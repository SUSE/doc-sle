<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="nm.xml" id="cha.nm">
 <title>使用 NetworkManager</title>
 <indexterm> <primary>網際網路</primary> <secondary>連接到</secondary></indexterm><indexterm> <primary>NetworkManager</primary></indexterm>
 <para> NetworkManager 是筆記型電腦與其他可攜式電腦的理想解決方案。它允許對網路連線使用一流的加密類型和標準，包括連至 802.1X 保護網路的連線。802.1X 是<quote>區域網路和都會區網路的 IEEE 標準 — 基於連接埠的網路存取控制</quote>。有了 NetworkManager，您在外出時，就不必顧慮網路介面的組態設定，也不必考慮如何在有線網路或無線網路之間進行切換。NetworkManager 可自動連接已知的無線網路，或是同時管理多個網路連線，然後按預設使用速度最快的連線。此外，您還可以手動在可用網路之間切換，並使用系統匣中的 Applet 管理網路連線。
  
 </para>
 <para> 同一時間有多個連線處於使用中狀態，而不僅僅是一個。因此，您可以在將筆記型電腦從乙太網路中斷開後，繼續透過無線網路保持連線狀態。 </para>
 <sect1 id="sec.nm.usecase">
  <title>NetworkManager 的使用案例</title>

  <para> NetworkManager 提供了精巧且直觀的使用者介面，可以讓使用者輕鬆切換網路環境。但是 NetworkManager 解決方案不適用於下列情況： </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para> 您的電腦會為網路的其他電腦提供網路服務，例如，它是 DHCP 或 DNS 伺服器。 </para>
   </listitem>
   <listitem>
    <para> 您的電腦為 Xen 伺服器，或您的系統是 Xen 之中的虛擬系統。 </para>
   </listitem>
  </itemizedlist>
 </sect1>
 <sect1 id="sec.nm.activate">
  <title>啟用或停用 NetworkManager</title>
  <indexterm> <primary>NetworkManager</primary> <secondary>啟用</secondary></indexterm>

  <para> 對於筆記型電腦，NetworkManager 預設處於啟用狀態。但是您也可以在 YaST 網路設定模組中隨時將其啟用或停用。 </para>

  <procedure>
   <step performance="required">
    <para> 執行 YaST，然後前往<menuchoice><guimenu>網路裝置</guimenu> <guimenu>網路設定</guimenu></menuchoice>。 </para>
   </step>
   <step performance="required">
    <para> 此時將開啟<guimenu>網路設定</guimenu>對話方塊。前往<guimenu>全域選項</guimenu>索引標籤。 </para>
   </step>
   <step performance="required">
    <para> 若要使用 NetworkManager 設定和管理網路連線： </para>
    <substeps performance="required">
     <step performance="required">
      <para> 在<guimenu>網路設定方法</guimenu>欄位中，選取<guimenu>使用 NetworkManager 進行使用者控制</guimenu>。 </para>
     </step>
     <step performance="required">
      <para> 按一下<guimenu>確定</guimenu>，然後關閉 YaST。 </para>
     </step>
     <step performance="required">
      <para> 依<xref linkend="sec.nm.configure"/>中所述使用 NetworkManager 設定您的網路連線。 </para>
     </step>
    </substeps>
   </step>
   <step performance="required">
    <para> 停用 NetworkManager 並使用您自己的組態控制網路 </para>
    <substeps performance="required">
     <step performance="required">
      <para> 在<guimenu>網路設定方法</guimenu>欄位中，選擇<guimenu>由 wicked 控制</guimenu>。 </para>
     </step>
     <step performance="required">
      <para> 按一下<guimenu>確定</guimenu>。 </para>
     </step>
     <step performance="required">
      <para> 透過 YaST 使用自動組態 (透過 DHCP 或靜態 IP 位址) 設定您的網路卡。 </para>
      <para> 如需使用 YaST 設定網路組態的詳細資訊，請參閱<xref linkend="sec.basicnet.yast"/>。 </para>
     </step>
    </substeps>
   </step>
  </procedure>
 </sect1>
 <sect1 id="sec.nm.configure">
  <title>設定網路連線</title>
  <indexterm> <primary>NetworkManager</primary> <secondary>設定</secondary></indexterm>

  <para> 在 YaST 中啟用 NetworkManager 之後，使用 GNOME 中提供的 NetworkManager 前端設定網路連線。它會顯示所有類型網路連線的索引標籤，如有線、無線、行動寬頻、DSL 及 VPN 連線。 </para>

  <para> 若要在 GNOME 中開啟網路組態對話方塊，請透過狀態功能表開啟設定功能表，然後按一下<guimenu>網路</guimenu>。 </para>

  <note>
   <title>選項的可用性</title>
   <para> 在某些系統設定下，您可能無法設定連線。在安全環境中，某些選項可能會被鎖定，或者需要 <systemitem class="username">root</systemitem> 許可權。請向您的系統管理員洽詢詳細資料。
   </para>
  </note>

  <figure>
   <title>GNOME 網路連線對話方塊</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="nm_gnome_tabs.png" width="70%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="nm_gnome_tabs.png" width="50%"/>
    </imageobject>
   </mediaobject>
  </figure>

  <procedure id="pro.nm.configure.add">
   <title>新增與編輯連線</title>
   <step performance="required">
    <para> 開啟 NetworkManager 組態對話方塊。 </para>
   </step>
   <step performance="required">
    <para> 新增連線︰ </para>
    <substeps performance="required">
     <step performance="required">
      <para> 按一下左下角的<guimenu>+</guimenu>圖示。
      </para>
     </step>
     <step performance="required">
      <para> 選取偏好的連線類型並依照指示進行操作。
      </para>
     </step>
     <step performance="required">
      <para> 完成後，按一下<guimenu>新增</guimenu>。 </para>
     </step>
     <step performance="required">
      <para> 確認變更後，開啟「狀態功能表」，所顯示的可用網路清單中便會出現新設定的網路連線。 </para>
     </step>
    </substeps>
   </step>
   <step performance="required">
    <para> 編輯連線︰ </para>
    <substeps performance="required">
     <step performance="required">
      <para> 選取要編輯的項目。 </para>
     </step>
     <step performance="required">
      <para> 按一下齒輪圖示以開啟<guimenu>連線設定</guimenu>對話方塊。 </para>
     </step>
     <step performance="required">
      <para> 插入您的變更，然後按一下<guimenu>套用</guimenu>以儲存變更。 </para>
     </step>
     <step performance="required">
      <para> 若要讓您的連線可用做系統連線，請移至<guimenu>身分</guimenu>索引標籤並選中<guimenu>讓其他使用者可用</guimenu>核取方塊。如需使用者與系統連線的詳細資訊，請參閱<xref linkend="sec.nm.sec.types"/>。
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <sect2 id="sec.nm.gome.applet.wired">
   <title>管理有線網路連線</title>
   <para> 如果您的電腦連接的是有線網路，請使用 NetworkManager Applet 管理連線。 </para>
   <procedure>
    <step performance="required">
     <para> 開啟「狀態功能表」，然後按一下<guimenu>有線</guimenu>以變更連線的詳細資料或將其關閉。 </para>
    </step>
    <step performance="required">
     <para> 若要變更設定，請按一下<guimenu>有線設定</guimenu>，然後按一下齒輪圖示。 </para>
    </step>
    <step performance="required">
     <para> 若要關閉所有網路連線，請啟動<guimenu>飛航模式</guimenu>設定。 </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.nm.gnome.applet.wireless">
   <title>管理無線網路連線</title>
   <para> 可見無線網路均列在<guimenu>無線網路</guimenu>下的 GNOME NetworkManager Applet 功能表中。每個網路的訊號強度也會顯示在功能表中。加密的無線網路以盾牌圖示標明。 </para>
   <procedure>
    <title>連接至可見無線網路</title>
    <step performance="required">
     <para> 若要連線至可見無線網路，請開啟「狀態功能表」，然後按一下<guimenu>Wi-Fi</guimenu>。 </para>
    </step>
    <step performance="required">
     <para> 按一下<guimenu>開啟</guimenu>以啟用。 </para>
    </step>
    <step performance="required">
     <para> 按一下<guimenu>選取網路</guimenu>，選取您的 Wi-Fi 網路，然後按一下<guimenu>連線</guimenu>。 </para>
    </step>
    <step performance="required">
     <para> 如果該網路已加密，則會開啓一個組態對話方塊。其上會顯示網路使用的加密類型以及用於輸入登入身分證明的文字方塊。 </para>
    </step>
   </procedure>
   <procedure>
    <title>連線至不可見無線網路</title>
    <step performance="required">
     <para> 若要連線至未廣播其服務組識別元 (SSID 或 ESSID) 而無法被自動偵測到的網路，請開啟「狀態功能表」，然後按一下<guimenu>Wi-Fi</guimenu>。 </para>
    </step>
    <step performance="required">
     <para> 按一下<guimenu>Wi-Fi 設定</guimenu>以開啟詳細設定功能表。 </para>
    </step>
    <step performance="required">
     <para> 確定您的 Wi-Fi 處於啟用狀態，然後按一下<guimenu>連線至隱藏網路...</guimenu>。 </para>
    </step>
    <step performance="required">
     <para> 在開啟的對話方塊中，於<guimenu>網路名稱</guimenu>內輸入 SSID 或 ESSID，並根據需要設定加密參數。 </para>
    </step>
   </procedure>
   <para> 明確指定的無線網路會儘可能長久地保持連線狀態。如果在此期間插入網路線，則會連接已設定為<guimenu>儘可能保持連接</guimenu>的連線，而無線連線仍將延續。 </para>
  </sect2>

  <sect2 id="sec.nm.gnome.applet.accesspoint">
   <title>將 Wi-Fi/藍芽卡設定成存取點</title>
   <para> 如果您的 Wi-Fi/藍芽卡支援存取點模式，您可以使用 NetworkManager 來設定組態。 </para>
   <procedure>
    <step performance="required">
     <para> 開啟「狀態功能表」，然後按一下<guimenu>Wi-Fi</guimenu>。 </para>
    </step>
    <step performance="required">
     <para> 按一下<guimenu>Wi-Fi 設定</guimenu>以開啟詳細設定功能表。 </para>
    </step>
    <step performance="required">
     <para> 按一下<guimenu>用做熱點...</guimenu>並依照指示進行操作。 </para>
    </step>
    <step performance="required">
     <para> 使用結果對話方塊中顯示的身分證明來連線至遠端機器上的熱點。 </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.nm.vpn">
   <title>NetworkManager 和 VPN</title>
   <indexterm> <primary>NetworkManager</primary> <secondary>VPN</secondary></indexterm><indexterm> <primary>VPN</primary></indexterm>
   <para> NetworkManager 支援多項虛擬私人網路 (VPN) 技術。對於每種技術，<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 都附帶了可為 NetworkManager 提供一般支援的基礎套件。除此之外，您還需要為 Applet 安裝相應的桌面專屬套件。 </para>
   <variablelist>
    <varlistentry>
     <term>OpenVPN</term>
     <listitem>
      <para> 若要使用此 VPN 技術，請安裝 </para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         <systemitem class="resource">NetworkManager-openvpn</systemitem> 和 </para>
       </listitem>
       <listitem>
        <para>
         <systemitem class="resource">NetworkManager-openvpn-gnome</systemitem>。
        </para>
       </listitem>
      </itemizedlist>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>vpnc (Cisco)</term>
     <listitem>
      <para> 若要使用此 VPN 技術，請安裝 </para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         <systemitem class="resource">NetworkManager-vpnc</systemitem> 和 </para>
       </listitem>
       <listitem>
        <para>
         <systemitem class="resource">NetworkManager-vpnc-gnome</systemitem>。 </para>
       </listitem>
      </itemizedlist>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>PPTP (點對點通道通訊協定)</term>
     <listitem>
      <para> 若要使用此 VPN 技術，請安裝 </para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         <systemitem class="resource">NetworkManager-pptp</systemitem> 和 </para>
       </listitem>
       <listitem>
        <para>
         <systemitem class="resource">NetworkManager-pptp-gnome</systemitem>。 </para>
       </listitem>
      </itemizedlist>
     </listitem>
    </varlistentry>
   </variablelist>
   <para> 安裝完套件後，請依<xref linkend="pro.nm.configure.add"/> 中所述設定 VPN 連線。 </para>
  </sect2>
 </sect1>
 <sect1 id="sec.nm.security">
  <title>NetworkManager 和安全性</title>
  <indexterm> <primary>NetworkManager</primary> <secondary>安全性</secondary></indexterm>

  <para> NetworkManager 將無線連線分為受信任和不受信任兩種。受信任的連線是過去您明確選取過的任何網路，除此以外的連線都屬於不受信任。受信任的連線以存取點的名稱和 MAC 位址來識別。使用 MAC 位址可確保別的存取點不能使用受信任連線的名稱。 </para>

  <para> NetworkManager 會定期掃描是否有可用的無線網路。如果找到多個受信任的網路，便自動選取最近使用的那個網路。如果所有網路都不受信任，NetworkManager 會等待您做出選擇。 </para>

  <para> 如果加密設定變更，但名稱和 MAC 位址未變，NetworkManager 會嘗試進行連接，但它會先要求您確認新的加密設定並提供所有更新，例如新的金鑰。 </para>

  <para> 如果從使用無線連線切換成離線模式，NetworkManager 會將 SSID 或 ESSID 設為空白。以確保該網路卡斷開連線。 </para>

  <sect2 id="sec.nm.sec.types">
   <title>使用者和系統連線</title>
   <para> NetworkManager 可識別兩種類型的連線︰<literal>使用者</literal>連線與<literal>系統</literal>連線。使用者連線是第一位使用者登入時 NetworkManager 可使用的連線，要求使用者提供所有必要的身分證明。使用者登出後，連線即會斷開，並從 NetworkManager 中移除。定義為系統連線的連線可由所有使用者共用，且在使用者登入之前，只要 NetworkManager 啟動後即可使用。對於系統連線，必須在連線建立時提供所有身分證明。此類系統連線可用於自動連接要求驗證的網路。如需使用 NetworkManager 設定使用者連線或系統連線的相關資訊，請參閱<xref linkend="sec.nm.configure"/>。 </para>
  </sect2>

  <sect2 id="sec.nm.sec.store">
   <title>儲存密碼與身分證明</title>
   <para> 如果您不希望每次連接至加密網路時都要重新輸入身分證明，則可以使用 GNOME 鑰匙圈管理員將加密的身分證明儲存在磁碟中，並以主密碼加以保護。 </para>
   
   
   <para> NetworkManager 也可從憑證儲存區取回安全連線 (例如，加密的有線、無線或 VPN 連線) 的憑證。如需詳細資訊，請參閱<xref linkend="cha.certstore"/>。 </para>
  </sect2>
 </sect1>
 <sect1 id="sec.nm.faq">
  <title>常見問題解答</title>

  <para> 以下提供了有關使用 NetworkManager 設定特殊網路選項的常見問題。 </para>
  <qandaset>
   <qandaentry>
    <question>
     <para> 如何將連線關聯到特定裝置？ </para>
    </question>
    <answer>
     <para> 依預設，NetworkManager 中的連線是特定於裝置類型的：它們適用於相同類型的所有實體裝置。如果一種連線類型對應多個實體裝置 (例如，您的機器配有兩個乙太網路卡)，可以將連線關聯到特定的裝置。
      
     </para>
     <para> 若要在 GNOME 中執行此動作，請先使用 Applet 中的<guimenu>連線資訊</guimenu>，或使用指令行工具 (如 <command>nm-tool</command> 或 <command>wicked show all</command>) 的輸出，來查詢裝置的 MAC 位址。然後開啟用於設定網路連線的對話方塊，並選擇要修改的連線。在<guimenu>有線</guimenu>或<guimenu>無線</guimenu>索引標籤中輸入裝置的<guimenu>MAC 位址</guimenu>，並確認您的變更。 </para>
    </answer>
   </qandaentry>
   <qandaentry>
    <question>
     <para> 在偵測到多個存取點具有相同 ESSID 的的情況下，如何指定特定的存取點？ </para>
    </question>
    <answer>
     <para> 如果有具有不同無線頻段 (a/b/g/n) 的多個存取點可用，系統預設會自動選擇訊號最強的存取點。要置換此存取點，請在設定無線連線時使用<guimenu>BSSID</guimenu>欄位。 </para>
     <para> 基本服務組識別碼 (BSSID) 可唯一識別每個基本服務組。在基礎結構基本服務組中，BSSID 是無線存取點的 MAC 位址。在獨立的 (臨機操作) 基本服務組中，BSSID 是由 46 位元隨機數字產生的本地管理的 MAC 位址。 </para>
     <para> 依照<xref linkend="sec.nm.configure"/> 中所述啟動用於設定網路連線的對話方塊。選擇要修改的無線連線，然後按一下<guimenu>編輯</guimenu>。在<guimenu>無線</guimenu>索引標籤中，輸入 BSSID。 </para>
    </answer>
   </qandaentry>
   <qandaentry>
    <question>
     <para> 如何與其他電腦共享網路連線？ </para>
    </question>
    <answer>
     <para> 主要裝置 (連接至網際網路的裝置) 不需要任何特殊組態。不過，您需要以如下方式設定連接至本地 Hub 或機器的裝置： </para>
     <orderedlist spacing="normal">
      <listitem>
       <para> 依照<xref linkend="sec.nm.configure"/> 中所述啟動用於設定網路連線的對話方塊。選擇要修改的連線，然後按一下<guimenu>編輯</guimenu>。切換到<guimenu>IPv4 設定</guimenu>索引標籤，然後從<guimenu>方法</guimenu>下拉式方塊中，選擇<guimenu>分享給其他電腦</guimenu>。這樣可讓 IP 流量轉遞並會執行裝置上的 DHCP 伺服器。確認您在 NetworkManager 中所做的變更。 </para>
      </listitem>
      <listitem>
       <para> 由於 DCHP 伺服器使用連接埠 <literal>67</literal>，請確定防火牆未封鎖此連接埠：在共用連線的機器上啟動 YaST，然後選取<menuchoice><guimenu>安全性與使用者</guimenu> <guimenu>防火牆</guimenu></menuchoice>。切換到<guimenu>允許的服務</guimenu>類別。如果<guimenu>DCHP 伺服器</guimenu>尚未顯示為<guimenu>允許的服務</guimenu>，則從<guimenu>要允許的服務</guimenu>中選取<guimenu>DCHP 伺服器</guimenu>，然後按一下<guimenu>新增</guimenu>。確認您在 YaST 中所做的變更。 </para>
      </listitem>
     </orderedlist>
    </answer>
   </qandaentry>
   <qandaentry>
    <question>
     <para> 如何使用動態位址 (DHCP、PPP 與 VPN) 提供靜態 DNS 資訊？ </para>
    </question>
    <answer>
     <para> 如果 DHCP 伺服器提供的 DNS 資訊 (與/或路由) 無效，則可將其置換。依照<xref linkend="sec.nm.configure"/> 中所述啟動用於設定網路連線的對話方塊。選擇要修改的連線，然後按一下<guimenu>編輯</guimenu>。切換到<guimenu>IPv4 設定</guimenu>索引標籤，然後從<guimenu>方法</guimenu>下拉式方塊中，選擇<guimenu>僅限自動 (DHCP) 位址</guimenu>。在<guimenu>DNS 伺服器</guimenu>與<guimenu>搜尋網域</guimenu>欄位中輸入 DNS 資訊。若要<guimenu>忽略自動取得的路由設定</guimenu>，請按一下<guimenu>路由</guimenu>，然後啟用相應的核取方塊。確認您的變更。 </para>
    </answer>
   </qandaentry>
   <qandaentry>
    <question>
     <para> 如何在使用者登入之前將 NetworkManager 連接到受密碼保護的網路？ </para>
    </question>
    <answer>
     <para> 定義用於此目的的<literal>系統連線</literal>。如需詳細資訊，請參閱<xref linkend="sec.nm.sec.types"/>。 </para>
    </answer>
   </qandaentry>
  </qandaset>
 </sect1>
 <sect1 id="sec.nm.trouble">
  <title>疑難排解</title>
  <indexterm> <primary>NetworkManager</primary> <secondary>疑難排解</secondary></indexterm>

  <para> 可能發生連線問題。與 NetworkManager 相關的一些常見問題有︰Applet 未啟動或缺少 VPN 選項。解析和預防這些問題的方法會視使用的工具而定。 </para>

  <variablelist>
   <varlistentry>
    <term>NetworkManager 桌面 Applet 不啟動</term>
    <listitem>
     <para> 如果設定了 NetworkManager 控制的網路，Applet 會自動啟動。如果 Applet 未啟動，請如<xref linkend="sec.nm.activate"/>中所述，檢查 YaST 中是否啟用 NetworkManager。然後，請確定 NetworkManager-gnome 套件亦已安裝。 </para>
     <para> 如果桌面 Applet 已安裝，但因為某些原因而不執行，您可以用手動方式啟動。如果安裝了桌面 Applet，但其由於某些原因並未執行，請使用 <command>nm-applet</command> 指令手動將其啟動。 </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>NetworkManager Applet 不包含 VPN 選項</term>
    <listitem>
     <para> 針對 NetworkManager 的支援、Applet 與適用於 NetworkManager 的 VPN 分佈於獨立套件中。如果您的 NetworkManager Applet 不包含 VPN 選項，請檢查是否安裝了包含 NetworkManager 支援的 VPN 技術套件。如需詳細資訊，請參閱<xref linkend="sec.nm.vpn"/>。 </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>無可用的網路連線</term>
    <listitem>
     <para> 如果已正確設定網路連線，且網路連線的所有其他元件 (路由器等) 也均已設定並正在執行中，有時需要重新啟動電腦的網路介面。若要執行此操作，請以 <systemitem class="username">root</systemitem> 身分登入指令行並執行 <command>systemctl restart wicked.services</command>。 </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 id="sec.nm.more">
  <title>更多資訊</title>

  <para> 您可以在下列網站和目錄中找到有關 NetworkManager 的詳細資訊： </para>

  <variablelist>
   <varlistentry>
    <term>NetworkManager 專案頁面</term>
    <listitem>
     <para>
      <ulink url="http://projects.gnome.org/NetworkManager/"/>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>套件文件</term>
    <listitem>
     <para> 另請參閱下列目錄中有關 NetworkManager 和 GNOME Applet 的最新資訊︰ </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        <filename>/usr/share/doc/packages/NetworkManager/</filename>, </para>
      </listitem>
      <listitem>
       <para>
         <filename>/usr/share/doc/packages/NetworkManager-gnome/</filename>。
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
