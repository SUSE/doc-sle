<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_printer.xml" version="5.0" xml:id="sec-yast-hw-print">
 <title>設定印表機</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  YaST 可用於組態地區設定和網路印表機。如需列印的詳細資訊 (一般資訊、技術詳細資料和疑難排解)，請參閱<xref linkend="cha-print"/>。
 </para>

 <para>
  在 YaST 中，按一下<menuchoice> <guimenu>硬體</guimenu>
  <guimenu>印表機</guimenu> </menuchoice>啟動印表機模組。它預設會在<guimenu>印表機組態</guimenu>檢視窗中開啟，顯示所有可用且已設定的印表機清單。這對於可以透過網路存取許多印表機的情況特別有用。您還可以在此處<guimenu>列印測試頁</guimenu>並設定印表機。
 </para>

 <note>
  <title>啟動 CUPS</title>
  <para>
   若要使用連接到機器的印表機，必須在系統上安裝並執行 CUPS。如果 CUPS 未執行，系統會提示您將其啟動。如果 CUPS 不會在開機時啟動，系統還會提示您啟用此設定 (建議做法)。
  </para>
 </note>

 <sect1 xml:id="sec-yast-hw-print-local">
  <title>設定印表機</title>
  <para>
   系統通常可以自動偵測到 USB 印表機。如果未偵測到印表機，請檢查印表機是否已開啟並連接到機器。
  </para>
  <para>
   設定印表機基本上需要完成三個步驟：指定連線類型、選擇驅動程式以及命名此設定的列印佇列。
  </para>
  <para>
   許多印表機型號可能有多個可用的驅動程式。設定印表機時，YaST 預設使用標有 <literal>recommended</literal> 的驅動程式。一般不需要變更驅動程式。但是，如果您希望彩色印表機只列印黑白色彩，可以使用不支援彩色列印的驅動程式。如果使用 PostScript 印表機列印圖形時遇到效能問題，請嘗試從 PostScript 切換到 PCL 驅動程式 (假設您的印表機支援 PCL)。
  </para>
  <para>
   如果系統未列出適用於您印表機的驅動程式，可以嘗試從清單中選取相應標準語言的一般驅動程式。請參閱您的印表機文件，以瞭解您的印表機支援的語言 (控制印表機的一組指令)。如果無法解決問題，請參閱<xref linkend="sec-yast-hw-print-local-get-ppd"/>瞭解替代解決方案。
  </para>
  <para>
   印表機永遠都是透過列印佇列來使用。這樣可確保將同時執行的工作排入佇列，然後逐個處理。系統會為每個列印佇列指定特定的驅動程式，一個印表機可以有多個佇列。這樣就能在彩色印表機上設定另一個佇列，例如，專門用於列印黑白內容。如需有關印表機佇列的詳細資訊，請參閱<xref linkend="sec-print-workflow"/>。
  </para>
  <procedure xml:id="pro-y2-hw-print-local-config">
   <title>新增新印表機</title>
   <step>
    <para>
     選取<menuchoice>
     <guimenu>硬體</guimenu> <guimenu>印表機</guimenu></menuchoice>啟動 YaST 印表機模組。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>印表機組態</guimenu>螢幕中，按一下<guimenu>新增</guimenu>。
    </para>
   </step>
   <step>
    <para>
     如果 <literal>Specify the
     Connection</literal> 下已列出印表機，請繼續執行下一步。否則，請嘗試<guimenu>偵測更多</guimenu>或啟動<guimenu>連接精靈</guimenu>。
    </para>
   </step>
   <step>
    <para>
     在 <literal>Find and Assign a Driver</literal> 下的文字方塊中輸入廠商名稱和型號名稱，然後按一下<guimenu>搜尋</guimenu>。
    </para>
   </step>
   <step>
    <para>
     選擇與您的印表機相符的驅動程式。建議您選擇最先列出的驅動程式。如果未顯示適合的驅動程式，請嘗試以下操作。
    </para>
    <substeps performance="required">
     <step>
      <para>
       檢查搜尋字詞。
      </para>
     </step>
     <step>
      <para>
       按一下<guimenu>尋找更多</guimenu>擴大搜尋範圍。
      </para>
     </step>
     <step>
      <para>
       如<xref linkend="sec-yast-hw-print-local-get-ppd"/>中所述新增驅動程式。
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     指定 <literal>Default paper size</literal>。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>設定任意名稱</guimenu>欄位中，為列印佇列輸入唯一的名稱。
    </para>
   </step>
   <step>
    <para>
     至此，印表機已使用預設設定完成了組態設定，可供您使用。按一下<guimenu>確定</guimenu>返回<guimenu>印表機組態</guimenu>檢視窗。現在應可在印表機清單中看見新設定的印表機。
    </para>
   </step>
  </procedure>
  <sect2 xml:id="sec-yast-hw-print-local-get-ppd">
   <title>使用 YaST 新增驅動程式</title>
   <para>
    並非所有適用於 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 的印表機驅動程式預設都會安裝。在新增印表機時，如果<guimenu>尋找並指定驅動程式</guimenu>對話方塊中沒有合適的驅動程式，請安裝包含適用印表機驅動程式的驅動程式套件：
   </para>
   <procedure>
    <title>安裝其他驅動程式套件</title>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>印表機組態</guimenu>螢幕中，按一下<guimenu>新增</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在 <literal>Find and Assign a Driver</literal> 區段中，按一下<guimenu>驅動程式套件</guimenu>。
     </para>
    </step>
    <step>
     <para>
      從清單中選擇一或多個合適的驅動程式套件。<emphasis>不要</emphasis>指定印表機說明檔案的路徑。
     </para>
    </step>
    <step>
     <para>
      選擇<guimenu>確定</guimenu>並確認安裝套件。
     </para>
    </step>
    <step>
     <para>
      若要直接使用這些驅動程式，請按照<xref linkend="pro-y2-hw-print-local-config"/>中所述操作。
     </para>
    </step>
   </procedure>
   <para>
    PostScript 印表機不需要印表機驅動程式軟體。PostScript 印表機只需要 PostScript 印表機描述 (PPD) 檔，該檔案與特定型號相符。PPD 檔案由印表機供應商提供。
   </para>
   <para>
    在新增 PostScript 印表機時，如果<guimenu>尋找並指定驅動程式</guimenu>對話方塊中沒有合適的 PPD 檔案可用，請安裝印表機的 PPD 檔案。
   </para>
   <para>
    PPD 檔案來源有數個。建議先嘗試 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 已隨附、但預設未安裝的其他驅動程式套件 (如需安裝指示，請參閱下文)。如果這些套件不包含適合您的印表機的驅動程式，請直接從印表機廠商處或從 PostScript 印表機的驅動程式 CD 中取得 PPD 檔案。如需詳細資料，請參閱<xref linkend="sec-print-prob-ppd"/>。此外，您還可以從 <link xlink:href="https://www.openprinting.org/printers"/> 中的 <quote>OpenPrinting.org 印表機資料庫</quote>找到 PPD 檔案。使用來自 OpenPrinting 的 PPD 檔案時，請注意它們可能不受 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 支援。
   </para>
   <procedure>
    <title>新增 PostScript 印表機的 PPD 檔案</title>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>印表機組態</guimenu>螢幕中，按一下<guimenu>新增</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在 <literal>Find and Assign a Driver</literal> 區段中，按一下<guimenu>驅動程式套件</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在 <literal>Make
      a Printer Description File Available</literal> 下的文字方塊中，輸入 PPD 檔案的完整路徑。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>確定</guimenu>回到 <literal>Add New Printer
      Configuration</literal> 螢幕。
     </para>
    </step>
    <step>
     <para>
      要直接使用此 PPD 檔案，請執行<xref linkend="pro-y2-hw-print-local-config"/>中所述的步驟。
     </para>
    </step>
   </procedure>
  </sect2>
  <sect2 xml:id="sec-yast-hw-print-local-tune">
   <title>編輯本地印表機組態</title>
   <para>
    透過編輯印表機的現有組態，您可以變更基本設定，例如連線類型和驅動程式。還可以調整紙張大小、解析度、媒體來源等的預設設定。您可以透過更改印表機描述或位置來變更印表機的識別碼。
   </para>
   <procedure>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>印表機組態</guimenu>螢幕中，從清單中選擇一台本地印表機，然後按一下<guimenu>編輯</guimenu>。
     </para>
    </step>
    <step>
     <para>
      按照<xref linkend="pro-y2-hw-print-local-config"/> 中所述變更連接類型或驅動程式。僅當目前組態有問題時才需執行此步驟。
     </para>
    </step>
    <step>
     <para>
      選擇性核取<guimenu>預設印表機</guimenu>，將此印表機設為預設印表機。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>目前驅動程式的所有選項</guimenu>來調整預設設定。若要變更設定，可以按一下 <literal>+</literal> 符號展開選項清單。按一下某個選項變更預設值。按一下<guimenu>確定</guimenu>套用您的變更。
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-yast-hw-print-network">
  <title>使用 YaST 設定網路列印</title>
  <para>
   網路印表機為自動獲得偵測，必須使用 YaST 印表機模組手動設定。根據網路設定的不同，您可以列印至列印伺服器 (CUPS、LPD、SMB 或 IPX)，或直接列印至網路印表機 (最好透過 TCP)。在 YaST 印表機模組中，從左側窗格選擇<guimenu>透過網路列印</guimenu>以存取網路列印的組態檢視窗。
  </para>
  <sect2 xml:id="sec-yast-hw-print-network-cups">
   <title>使用 CUPS</title>
   <para>
    在 Linux 環境中，使用 CUPS 來透過網路列印。最簡單的設定是只透過所有用戶端均可直接存取的某個 CUPS 伺服器進行列印。若要透過一個以上的 CUPS 伺服器執行列印，則需要執行本地 CUPS 精靈以與遠端 CUPS 伺服器通訊。
   </para>
   <important>
    <title>瀏覽網路列印佇列</title>
    <para>
     CUPS 伺服器透過傳統的 CUPS 瀏覽協定或 Bonjour/DNS-SD 通告其在網路上的列印佇列。用戶端需要瀏覽這些清單，以使使用者能夠選取要將列印工作傳送到的特定印表機。若要瀏覽網路列印佇列，則必須在透過 CUPS 伺服器列印的所有用戶端上執行 <systemitem class="resource">cups-filters-cups-browsed</systemitem> 套件所提供的 <systemitem class="daemon">cups-browsed</systemitem> 服務。<systemitem class="daemon">cups-browsed</systemitem> 在透過 YaST 設定網路列印時自動啟動。
    </para>
    <para>
     如果在啟動 <systemitem class="daemon">cups-browsed</systemitem> 之後無法瀏覽，則表明 CUPS 伺服器可能是透過 Bonjour/DNS-SD 宣告網路列印佇列的。在此情況下，您需要另外安裝 <systemitem class="resource">avahi</systemitem> 套件，並在所有用戶端上使用 <command>sudo systemctl start avahi-daemon</command> 啟動關聯的服務。
    </para>
   </important>
   <procedure>
    <title>透過單部 CUPS 伺服器列印</title>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      在左側窗格中，選取<guimenu>透過網路列印</guimenu>。
     </para>
    </step>
    <step>
     <para>
      核取<guimenu>透過一個單一 CUPS 伺服器直接執行所有列印</guimenu>並指定伺服器的名稱或 IP 位址。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>測試伺服器</guimenu>以確定您已選擇正確的名稱或 IP 位址。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>確定</guimenu>回到<guimenu>印表機組態</guimenu>螢幕。現在可透過 CUPS 伺服器執行的所有印表機都會列出。
     </para>
    </step>
   </procedure>
   <procedure>
    <title>透過多個 CUPS 伺服器列印</title>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      在左側窗格中，選取<guimenu>透過網路列印</guimenu>。
     </para>
    </step>
    <step>
     <para>
      勾選<guimenu>接受從 CUPS 伺服器傳來的印表機發佈</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在 <literal>General Settings</literal> 下，指定要使用的伺服器。您可以接受來自所有可用網路或特定主機的連線。如果選擇後者，則需要指定主機名稱或 IP 位址。
     </para>
    </step>
    <step>
     <para>
      在系統提示您啟動本地 CUPS 伺服器時，依序按一下<guimenu>確定</guimenu>和<guimenu>是</guimenu>。伺服器啟動後，YaST 會返回<guimenu>印表機組態</guimenu>螢幕。按一下<guimenu>重新整理清單</guimenu>，以查看到目前為止已偵測到的印表機。
     </para>
    </step>
   </procedure>
  </sect2>
  <sect2 xml:id="sec-yast-hw-print-network-other">
   <title>使用非 CUPS 列印伺服器</title>
   <para>
    如果網路透過 CUPS 以外的其他列印伺服器提供列印服務，可以按一下<menuchoice>
    <guimenu>硬體</guimenu><guimenu>印表機</guimenu></menuchoice>來啟動 YaST 印表機模組，然後從左側窗格中選取<guimenu>透過網路列印</guimenu>。啟動<guimenu>連接精靈</guimenu>，然後選擇合適的<guimenu>連接類型</guimenu>。如需在您的環境中設定網路印表機，請洽詢網路管理員。
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-yast-hw-print-share">
  <title>透過網路共用印表機</title>
  <para>
   您可以透過網路共用本地 CUPS 精靈所管理的印表機，這實際上是將您的機器變成了 CUPS 伺服器。可透過啟用 CUPS 中所謂的<quote>瀏覽模式</quote>來共用印表機。如果啟用了瀏覽模式，本地列印佇列便可用來在網路上監聽遠端 CUPS 精靈。您還可以設定專用 CUPS 伺服器來管理所有列印佇列，讓遠端用戶端可以直接存取該伺服器。在這種情況下，不需要啟用瀏覽。
  </para>
  <procedure>
   <title>共用印表機</title>
   <step>
    <para>
     選取<menuchoice>
     <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
    </para>
   </step>
   <step>
    <para>
     從左側窗格中選取<guimenu>共用印表機</guimenu>。
    </para>
   </step>
   <step>
    <para>
     選取<guimenu>允許遠端存取</guimenu>。此外核取<guimenu>適用於本地網路中的電腦</guimenu>，並透過核取<guimenu>預設在本地網路中發佈印表機</guimenu>啟用瀏覽模式。
    </para>
   </step>
   <step>
    <para>
     按一下<guimenu>確定</guimenu>重新啟動 CUPS 伺服器，並返回到<guimenu>印表機組態</guimenu>螢幕。
    </para>
   </step>
   <step>
    <para>
     有關 CUPS 和防火牆設定，請參閱 <link xlink:href="https://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings"/>。
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
