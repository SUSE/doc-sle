<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="x11_fonts.xml" version="5.0" xml:id="sec-x11-fontsys">
 <title>安裝與設定字型</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  Linux 中的字型可分為兩個部分：
 </para>

 <variablelist>
  <varlistentry>
   <term>描邊或向量字型</term>
   <listitem>
    <para>
     包含字符形狀的數學說明和繪圖說明。因此，每個字符都可以調整為任意大小而無損品質。在可以使用此類字型 (或字符) 之前，需要將數學說明轉換為點陣 (網格)。此過程稱為<emphasis>字型點陣化</emphasis>。<emphasis>字型影射</emphasis> (內嵌於字型中) 改進和最佳化特定大小的展示效果。點陣化和影射透過 FreeType 程式庫完成。
    </para>
    <para>
     Linux 下的常用格式是 PostScript Type 1 和 Type 2、TrueType 及 OpenType。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>點陣圖或點陣字型</term>
   <listitem>
    <para>
     包含為特定字型大小設計的像素陣列。點陣圖字型的展示速度超快，而且相當簡單。然而，與向量字型相比，它無法在無損品質的情況下調整。因此，這些字型通常以不同的大小分佈。近期，點陣圖字型仍然在 Linux 主控台使用，有時也見於終端機。
    </para>
    <para>
     Linux 旗下最常用的格式是可攜式編譯格式 (PCF) 或字符點陣圖影射格式 (BDF)。
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <para>
  這些字型的外觀會受兩個主要方面影響：
 </para>

 <itemizedlist mark="bullet" spacing="normal">
  <listitem>
   <para>
    選擇合適的字型系列，
   </para>
  </listitem>
  <listitem>
   <para>
    採用特定演算法展示字型，讓讀者觀看起來最為舒適。
   </para>
  </listitem>
 </itemizedlist>

 <para>
  最後一點僅與向量字型相關。雖然上述兩點非常主觀，但是需要建立一些預設值。
 </para>

 <para>
  Linux 字型展示系統由若干個程式庫及其各種關係組成。基本字型程式庫是 <link xlink:href="http://www.freetype.org/">FreeType</link>，它會將字型字符從受支援的格式轉換為最佳化的點陣圖字符。展示程序由演算法及其參數 (可能受父問題影響) 控制。
 </para>

 <para>
  使用 FreeType 的每個程式或程式庫都應參考 <link xlink:href="http://www.fontconfig.org/">Fontconfig</link> 程式庫。此程式庫會從使用者及系統收集字型組態。當使用者修正其 Fontconfig 設定時，此變更將導致發生 Fontconfig 感知的套用。
 </para>

 <para>
  Arabic、Han 或 Phags-Pa 等程序檔所需的更複雜的 OpenType 塑形，以及其他更高層級的文字處理透過 <link xlink:href="http://www.harfbuzz.org/">Harfbuzz</link> 或 <link xlink:href="http://www.pango.org/">Pango</link> 來進行。
 </para>

 <sect2 xml:id="sec-x11-fontsys-showing-fonts">
  <title>顯示已安裝的字型</title>
  <para>
   若要大致瞭解系統上已安裝哪些字型，請執行 <command>rpm</command> 或 <command>fc-list</command> 指令。二者均會出色回答，但有可能因根據系統和使用者組態傳回不同的清單。
  </para>
  <variablelist>
   <varlistentry>
    <term><command>rpm</command>
    </term>
    <listitem>
     <para>
      呼叫 <command>rpm</command> 可查看系統上已安裝哪些包含字型的軟體套件：
     </para>
<screen><prompt>&gt; </prompt>rpm -qa '*fonts*'</screen>
     <para>
      每個字型套件應符合此表示式。然而，指令可能傳回誤報，例如 <literal>fonts-config</literal> (可能既不是也不包含字型)。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>fc-list</command>
    </term>
    <listitem>
     <para>
      呼叫 <command>fc-list</command>，大致瞭解哪些字型系列可供存取、是否已安裝在系統上或主目錄中：
     </para>
<screen><prompt>&gt; </prompt>fc-list ':' family</screen>
     <note>
      <title>指令 <command>fc-list</command></title>
      <para>
       指令 <command>fc-list</command> 是 Fontconfig 程式庫的包裝程式。它可以從 Fontconfig (更確切地說，從它的快取) 查詢大量有趣的資訊。請參閱 <command>man 1 fc-list</command> 以取得詳細資料。
      </para>
     </note>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec-x11-fontsys-viewing">
  <title>檢視字型</title>
  <para>
   如果您要瞭解已安裝的字型有何外觀，請使用指令 <command>ftview</command> (套件 <systemitem>ft2demos</systemitem>) 或造訪 <link xlink:href="http://fontinfo.opensuse.org/"/>。例如，若要以 14 點顯示 FreeMono 字型，請依照下方所述使用 <command>ftview</command>：
  </para>
<screen><prompt>&gt; </prompt>ftview 14 /usr/share/fonts/truetype/FreeMono.ttf</screen>
  <para>
   如果您需要進一步的資訊，請造訪 <link xlink:href="http://fontinfo.opensuse.org/"/> 以瞭解支援的樣式 (標準、粗體、斜體等) 和語言。
  </para>
 </sect2>

 <sect2 xml:id="sec-x11-fontsys-querying">
  <title>查詢字型</title>
  <para>
   若要查詢給定模式時使用哪中字型，請使用 <command>fc-match</command> 指令。
  </para>
  <para>
   例如，如果您的模式包含已安裝的字型，<command>fc-match</command> 會傳回檔案名稱、字型系列和樣式：
  </para>
<screen><prompt>&gt; </prompt>fc-match 'Liberation Serif'
LiberationSerif-Regular.ttf: "Liberation Serif" "Regular"</screen>
  <para>
   如果所需字型在系統上不存在，Fontconfig 會調用相符規則嘗試找到最接近的可用字型。換言之，您的要求被取代為：
  </para>
<screen><prompt>&gt; </prompt>fc-match 'Foo Family'
DejaVuSans.ttf: "DejaVu Sans" "Book"</screen>
  <para>
   Fontconfig 支援<emphasis>別名</emphasis>，即用另一個系列名稱取代原始名稱。常見的情況是通用名稱，例如 <quote>sans-serif</quote>、<quote>serif</quote> 和 <quote>monospace</quote>。這些別名可取代為實際的系列名稱或者甚至是系列名稱的偏好設定清單：
  </para>
<screen><prompt>&gt; </prompt>for font in serif sans mono; do fc-match "$font" ; done
DejaVuSerif.ttf: "DejaVu Serif" "Book"
DejaVuSans.ttf: "DejaVu Sans" "Book"
DejaVuSansMono.ttf: "DejaVu Sans Mono" "Book"</screen>
  <para>
   結果可能因系統而異，具體視目前安裝的字型而定。
  </para>
  <note>
   <title>視 Fontconfig 而定的相似度規則</title>
   <para>
    Fontconfig <emphasis>始終</emphasis>根據給定要求傳回最相似的實際系列 (如果至少已安裝一個系列)。<quote>相似度</quote>視 Fontconfig 的內部測量以及使用者或管理員的 Fontconfig 設定而定。
   </para>
  </note>
 </sect2>

 <sect2 xml:id="sec-x11-fontsys-install">
  <title>安裝字型</title>
  <para>
   若要安裝新字型，可採用下列幾種主要的方法：
  </para>
  <orderedlist spacing="normal">
   <listitem>
    <para>
     將 <filename>*.ttf</filename> 或 <filename>*.otf</filename> 等字型檔案手動安裝至已知字型目錄。如果要將字型套用至整個系統，請使用標準目錄 <filename>/usr/share/fonts</filename>。如果要安裝到主目錄中，請使用 <filename>~/.config/fonts</filename>。
    </para>
    <para>
     如果不想使用標準目錄，Fontconfig 可讓您選擇其他目錄。使用 <literal>&lt;dir&gt;</literal> 元素通知 Fontconfig 所用目錄，相關詳細資料請參閱<xref linkend="sec-x11-fontsys-config-fontconfig"/>。
    </para>
   </listitem>
   <listitem>
    <para>
     使用 <command>zypper</command> 安裝字型。許多字型做為套件提供，隨附在 SUSE 套裝作業系統或位於 <link xlink:href="http://download.opensuse.org/repositories/M17N:/fonts/">M17N:fonts</link> 儲存庫中。使用以下指令將儲存庫新增至清單。例如，若要為 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP4</phrase></phrase> 新增儲存庫，請使用以下指令：
    </para>
<screen><prompt>&gt; </prompt><command>sudo</command> zypper ar
     <phrase os="sles;sled">https://download.opensuse.org/repositories/M17N:/fonts/SLE_15/</phrase></screen>
    <para>
     若要搜尋 <replaceable>字型系列名稱</replaceable>，請使用下面此指令：
    </para>
<screen><prompt>&gt; </prompt>zypper se '<replaceable>FONT_FAMILY_NAME</replaceable>*fonts'</screen>
   </listitem>


  </orderedlist>
 </sect2>

 <sect2 xml:id="sec-x11-fontsys-config">
  <title>設定字型外觀</title>
  <para>
   結果不一定會令人滿意，具體視展示媒體和字型大小而定。例如，如今常規監視器解析度為 100dpi，導致像素太大，字型看上去粗陋難看。
  </para>
  <para>
   有些演算法可用於應對低解析度，例如消除鋸齒 (灰階平滑化)、影射 (適合網格) 或子像素展示 (在一個方向使解析度增至三倍)。這些演算法還可能因字型格式而異。
  </para>
  <important>
   <title>子像素呈現的專利問題</title>
   <para>
    SUSE 套裝作業系統中不使用子像素展示。雖然 FreeType2 支援此演算法，但是所涉及的幾項專利將於 2019 年年末到期。因此，除非系統含有 FreeType2 程式庫並且該程式庫中已編譯子像素展示，否則在 Fontconfig 中設定子像素展示選項沒有任何效果。
   </para>
  </important>
  <para>
   透過 Fontconfig，可為每種字型個別選取展示演算法，也可為一組字型選取展示演算法。
  </para>
  <sect3 xml:id="sec-x11-fontsys-config-sysconfig">
   <title>透過 <literal>sysconfig</literal> 設定字型</title>
   <para>
    <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 在 Fontconfig 上提供一個 <literal>sysconfig</literal> 層。您可以從此處入手體驗字型組態。若要變更預設設定，請編輯組態檔案 <filename>/etc/sysconfig/fonts-config</filename>。(或使用 YaST sysconfig 模組)。編輯該檔案之後，請執行 <command>fonts-config</command>。
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> /usr/sbin/fonts-config</screen>
   <para>
    重新啟動應用程式以查看效果。請記住下列指示：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      一些應用程式不需要重新啟動。例如，Firefox 會不時重新讀取 Fontconfig 組態。新建立或重新載入的標籤日後可取得新的字型組態。
     </para>
    </listitem>
    <listitem>
     <para>
      系統會在安裝或移除每個套件後自動呼叫 <command>fonts-config</command> 程序檔 (否則表示字型軟體套件有誤)。
     </para>
    </listitem>
    <listitem>
     <para>
      可以使用 <command>fonts-config</command> 指令行選項暫時覆寫每個 sysconfig 變數。如需詳細資料，請參閱 <command>fonts-config --help</command>。
     </para>
    </listitem>
   </itemizedlist>
   <para>
    有數個 sysconfig 變數可以變更。請參閱 <command>man 1 fonts-config</command> 或 YaST sysconfig 模組的說明頁面。系統提供下列變數：
   </para>
   <variablelist>
    <varlistentry>
     <term>呈現演算法的用法</term>
     <listitem>
      <para>
       請考慮 <varname>FORCE_HINTSTYLE</varname>、<varname>FORCE_AUTOHINT</varname>、<varname>FORCE_BW</varname>、<varname>FORCE_BW_MONOSPACE</varname>、&#x200B;<varname>USE_EMBEDDED_BITMAPS</varname> 和 <varname>EMBEDDED_BITMAP_LANGAGES</varname>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>一般別名的優先設定清單</term>
     <listitem>
      <para>
       使用 <varname>PREFER_SANS_FAMILIES</varname>、<varname>PREFER_SERIF_FAMILIES</varname>、<varname>PREFER_MONO_FAMILIES</varname> 和 <varname>SEARCH_METRIC_COMPATIBLE</varname>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    下面的清單提供了一些組態範例，從<quote>最適合閱讀</quote>字型 (對比度較高) 到<quote>最漂亮</quote>(較平滑) 排序。
   </para>
   <variablelist>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-bitmap">
     <term>點陣圖字型</term>
     <listitem>
      <para>
       透過 <varname>PREFER_*_FAMILIES</varname> 變數設定偏好的點陣圖字型。對於這些變數，請按照說明部份中的範例操作。須知，這些字型以黑白且未平滑形式展示，並且點陣圖字型只有數種大小。考慮使用
      </para>
<screen>SEARCH_METRIC_COMPATIBLE="no"</screen>
      <para>
       來停用度量相容性驅動的系統名稱取代。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-bw">
     <term>以黑白呈現的可調整字型</term>
     <listitem>
      <para>
       展示可調整字型時如果未消除鋸齒，可能導致效果類似於點陣圖字型，同時保持字型可調整性。使用示意良好的 Liberation 系列之類。遺憾的是，系統中缺少影射良好的字型。設定下列變數以強制採用此方法。
      </para>
<screen>FORCE_BW="yes"</screen>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-bw-monospace">
     <term>以黑白呈現的等寬字型</term>
     <listitem>
      <para>
       僅以未消除鋸齒的方式展示等寬字型，否則使用預設設定：
      </para>
<screen>FORCE_BW_MONOSPACE="yes"</screen>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-default">
     <term>預設設定</term>
     <listitem>
      <para>
       展示所有字型時都消除鋸齒。使用<emphasis>位元組碼解譯器</emphasis> (BCI) 展示影射良好的字型，使用自動影射器 (<literal>hintstyle=hintslight</literal>) 展示其他字型。讓所有相關 sysconfig 變數保持預設設定。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-cff">
     <term>CFF 字型</term>
     <listitem>
      <para>
       以 CFF 格式使用字型。人們認為它們在 FreeType2 中進行最新改進之後，比預設的 TrueType 字型更適合閱讀。請按照 <literal>PREFER_*_FAMILIES</literal> 範例嘗試一下。可以透過
      </para>
<screen>SEARCH_METRIC_COMPATIBLE="no"</screen>
      <para>
       將展示調暗調粗，因為它們依預設透過 <literal>hintstyle=hintslight</literal> 展示。還可以考慮使用：
      </para>
<screen>SEARCH_METRIC_COMPATIBLE="no"</screen>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="ex-x11-fontsys-sysconfig-autohint">
     <term>專用自動影射器</term>
     <listitem>
      <para>
       即使對於影射良好的字型，也可以使用 FreeType2 的自動影射器。這可能會導致字形變得更粗、對比度更低，有時還會變得更模糊。設定下列變數以啟用此項：
      </para>
<screen>FORCE_AUTOHINTER="yes"</screen>
      <para>
       可使用 <literal>FORCE_HINTSTYLE</literal> 來控制影射層級。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
  <sect3 xml:id="sec-x11-fontsys-config-fontconfig">
   <title>深入瞭解 fontconfig XML</title>
   <para>
    Fontconfig 的組態設定格式是<emphasis>可延伸標記語言</emphasis> (XML)。下面的幾個範例不是完整參考，而是簡要概觀。詳細資料及其他靈感可在 <command>man 5 fonts-conf</command> 或 <filename>/etc/fonts/conf.d/</filename> 中找到。
   </para>
   <para>
    中心 Fontconfig 組態檔案是 <filename>/etc/fonts/fonts.conf</filename>，它及其他作品包括整個 <filename>/etc/fonts/conf.d/</filename> 目錄。若要自訂 Fontconfig，可在兩個位置插入變更：
   </para>
   <orderedlist xml:id="ol-x11-fontsys-configfiles" spacing="normal">
    <title>Fontconfig 組態檔案</title>
    <listitem>
     <formalpara>
      <title>泛系統變更</title>
      <para>
       編輯檔案 <filename>/etc/fonts/local.conf</filename> (依預設包含一個空的 <literal>fontconfig</literal> 元素)。
      </para>
     </formalpara>
    </listitem>
    <listitem>
     <formalpara>
      <title>使用者特定變更</title>
      <para>
       編輯檔案 <filename>~/.config/fontconfig/fonts.conf</filename>。將 Fontconfig 組態檔案置於 <filename>~/.config/fontconfig/conf.d/</filename> 目錄中。
      </para>
     </formalpara>
    </listitem>
   </orderedlist>
   <para>
    使用者特定變更會覆寫任何泛系統設定。
   </para>
   <note>
    <title>已棄用的使用者組態檔案</title>
    <para>
     檔案 <filename>~/.fonts.conf</filename> 標示為已取代，不應繼續使用。請改為使用 <filename>~/.config/fontconfig/fonts.conf</filename>。
    </para>
   </note>
   <para>
    每個組態檔案都需要有 <literal>fontconfig</literal> 元素。因此，最小的檔案外觀如下：
   </para>
<screen>&lt;?xml version="1.0"?&gt;
   &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
   &lt;fontconfig&gt;
   &lt;!-- Insert your changes here --&gt;
   &lt;/fontconfig&gt;</screen>
   <para>
    如果預設目錄不足，請插入 <literal>dir</literal> 元素及相應的目錄：
   </para>
<screen>&lt;dir&gt;/usr/share/fonts2&lt;/dir&gt;</screen>
   <para>
    Fontconfig 會<emphasis>以遞迴方式</emphasis>搜尋字型。
   </para>
   <para>
    字型展示演算法可透過下列 Fontconfig 片段選擇 (請參閱<xref linkend="ex-x11-fontsys-fontconfig-rendering-algorithms"/>)：
   </para>
   <example xml:id="ex-x11-fontsys-fontconfig-rendering-algorithms">
    <title>指定呈現演算法</title>
<screen>&lt;match target="font"&gt;
 &lt;test name="family"&gt;
  &lt;string&gt;<replaceable>FAMILY_NAME</replaceable>&lt;/string&gt;
 &lt;/test&gt;
 &lt;edit name="antialias" mode="assign"&gt;
  &lt;bool&gt;true&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="hinting" mode="assign"&gt;
  &lt;bool&gt;true&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="autohint" mode="assign"&gt;
  &lt;bool&gt;false&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="hintstyle" mode="assign"&gt;
  &lt;const&gt;hintfull&lt;/const&gt;
 &lt;/edit&gt;
&lt;/match&gt;</screen>
   </example>
   <para>
    可以測試的字型的各個內容。例如，<literal>&lt;test&gt;</literal> 元素可測試字型系列 (如範例中所示)、字型間隔、間距、字型格式以及其他。完全棄用 <literal>&lt;test&gt;</literal> 時，系統會將所有 <literal>&lt;edit&gt;</literal> 元素套用至每個字型 (全域變更)。
   </para>
   <example xml:id="ex-x11-fontsys-fontconfig-aliases1">
    <title>別名和系列名稱取代</title>
    <variablelist>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-default">
      <term>規則 1</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-prefer">
      <term>規則 2</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;prefer&gt;
  &lt;family&gt;Droid Serif&lt;/family&gt;
 &lt;/prefer&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-accept">
      <term>規則 3</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;STIXGeneral&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
    </variablelist>
   </example>
   <para>
    <xref linkend="ex-x11-fontsys-fontconfig-aliases1"/>中的規則可產生<emphasis>已設定優先順序的系列清單</emphasis> (PFL)。系統會根據元素執行不同的動作：
   </para>
   <variablelist>
    <varlistentry>
     <term><xref linkend="vle-x11-fontsys-example-alias-default"/> 中的 <literal>&lt;default&gt;</literal>
     </term>
     <listitem>
      <para>
       此規則會在 PFL <emphasis>末尾</emphasis>新增 <literal>serif</literal> 系列名稱。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><xref linkend="vle-x11-fontsys-example-alias-prefer"/> 中的 <literal>&lt;prefer&gt;</literal>
     </term>
     <listitem>
      <para>
       只要 PFL 中存在 <literal>Alegreya SC</literal>，此規則就會在 PFL 中的第一個 <literal>serif</literal> <emphasis>之前</emphasis>新增<quote>Droid Serif</quote>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><xref linkend="vle-x11-fontsys-example-alias-accept"/> 中的 <literal>&lt;accept&gt;</literal>
     </term>
     <listitem>
      <para>
       此規則會在 PFL 中第一個 <literal>serif</literal> 系列名稱之後，<emphasis>緊貼著</emphasis>它新增 <quote>STIXGeneral</quote> 系列名稱。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    將此片段放置在一起，當片段按<xref linkend="vle-x11-fontsys-example-alias-default"/> - <xref linkend="vle-x11-fontsys-example-alias-prefer"/> - <xref linkend="vle-x11-fontsys-example-alias-accept"/> 的順序出現並且使用者要求 <quote>Alegreya SC</quote> 時，便會建立如<xref linkend="tab-x11-fontsys-example-alias"/>中所述的 PFL。
   </para>
   <table xml:id="tab-x11-fontsys-example-alias">
    <title>從 fontconfig 規則產生 PFL</title>
    <tgroup cols="2">
     <colspec colwidth="1*"/>
     <colspec colwidth="3*"/>
     <thead>
      <row>
       <entry>
        <para>
         順序
        </para>
       </entry>
       <entry>
        <para>
         目前 PFL
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         要求
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-default"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>、<literal>serif</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-prefer"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>、<literal>Droid Serif</literal>、<literal>serif</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-accept"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>、<literal>Droid Serif</literal>、<literal>serif</literal><literal></literal>
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <para>
    在 Fontconfig 的度量標準中，系列名稱具有最高優先權，高於樣式、大小等其他模式。Fontconfig 會檢查系統上目前安裝了哪個系列。如果已安裝 <quote>Alegreya SC</quote>，則 Fontconfig 會傳回此名稱。如果未安裝，則會尋找 <quote>Droid Serif</quote>，依此類推。
   </para>
   <para>
    請小心。在變更 Fontconfig 片段的順序時，Fontconfig 可能傳回不同的結果，如<xref linkend="tab-x11-fontsys-example-alias2"/>中所述。
   </para>
   <table xml:id="tab-x11-fontsys-example-alias2">
    <title>從變更了順序的 fontconfig 規則產生 PFL 的結果</title>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         順序
        </para>
       </entry>
       <entry>
        <para>
         目前 PFL
        </para>
       </entry>
       <entry>
        <para>
         記事
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         要求
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
       <entry>
        <para>
         執行相同的要求。
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-prefer"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
       <entry>
        <para>
         PFL 中沒有 <literal>serif</literal>，未取代任何內容
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-accept"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
       <entry>
        <para>
         PFL 中沒有 <literal>serif</literal>，未取代任何內容
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-default"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>、<literal>serif</literal>
        </para>
       </entry>
       <entry>
        <para>
         PFL 中存在 <literal>Alegreya SC</literal>，執行取代
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <note>
    <title>隱含意義</title>
    <para>
     將 <literal>&lt;default&gt;</literal> 別名視為此群組的分類或包含 (如果未安裝)。如範例所示，<literal>&lt;default&gt;</literal> 應該一律優先於該群組的 <literal>&lt;prefer&gt;</literal> 和 <literal>&lt;accept&gt;</literal> 別名。
    </para>
    <para>
     <literal>&lt;default&gt;</literal> 分類不限於一般別名 serif、sans-serif 和 monospace。如需複雜的範例，請參閱 <filename>/usr/share/fontconfig/conf.avail/30-metric-aliases.conf</filename>。
    </para>


   </note>
   <para>
    <xref linkend="ex-x11-fontsys-fontconfig-aliases2"/>中的下列 Fontconfig 片段會建立 <literal>serif</literal> 群組。當前一種字型未安裝時，此群組中的每個系列可取代其他系列。
   </para>
   <example xml:id="ex-x11-fontsys-fontconfig-aliases2">
    <title>別名和系列名稱取代</title>
<screen>&lt;alias&gt;
 &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;Droid Serif&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;STIXGeneral&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;Droid Serif&lt;/family&gt;
  &lt;family&gt;STIXGeneral&lt;/family&gt;
  &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</screen>
   </example>
   <para>
    優先順序由 <literal>&lt;accept&gt;</literal> 別名中的順序提供。類似地，可以使用較強的 <literal>&lt;prefer&gt;</literal> 別名。
   </para>
   <para>
    <xref linkend="ex-x11-fontsys-fontconfig-aliases3"/>擴展了<xref linkend="ex-x11-fontsys-fontconfig-aliases1"/>。
   </para>
   <example xml:id="ex-x11-fontsys-fontconfig-aliases3">
    <title>別名和系列名稱取代</title>
    <variablelist>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-accept2">
      <term>規則 4</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;Liberation Serif&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-prefer2">
      <term>規則 5</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;prefer&gt;
  &lt;family&gt;DejaVu Serif&lt;/family&gt;
 &lt;/prefer&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
    </variablelist>
   </example>
   <para>
    <xref linkend="ex-x11-fontsys-fontconfig-aliases3"/>中擴展的組態將導致下列 PFL 演變：
   </para>
   <table xml:id="tab-x11-fontsys-example-alias3">
    <title>從 fontconfig 規則產生 PFL 的結果</title>
    <tgroup cols="2">
     <colspec colwidth="1*"/>
     <colspec colwidth="3*"/>
     <thead>
      <row>
       <entry>
        <para>
         順序
        </para>
       </entry>
       <entry>
        <para>
         目前 PFL
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         要求
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-default"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>、<literal>serif</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-prefer"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>、<literal>Droid Serif</literal>、<literal>serif</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-accept"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>、<literal>Droid Serif</literal>、<literal>serif</literal><literal></literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-accept2"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>、<literal>Droid Serif</literal>、<literal>serif</literal>、<literal>Liberation Serif</literal>、<literal>STIXGeneral</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-prefer2"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>、<literal>Droid Serif</literal>、<literal>DejaVu Serif</literal>、<literal>serif</literal>、<literal>Liberation Serif</literal>、<literal>STIXGeneral</literal>
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <note>
    <title>隱含意義。</title>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       如果同一個一般名稱存在多個 <literal>&lt;accept&gt;</literal> 宣告，則最後剖析的宣告<quote>勝出</quote>。若有可能，在建立泛系統組態時不要在使用者 <filename>(/etc/fonts/conf.d/*-user.conf)</filename> <literal></literal> <emphasis role="bold">之後</emphasis>使用 &lt;accept&gt;。
      </para>
     </listitem>
     <listitem>
      <para>
       如果同一個一般名稱存在多個 <literal>&lt;accept&gt;</literal> 宣告，則最後剖析的宣告<quote>勝出</quote>。若有可能，在泛系統組態中不要在使用者之前<literal>使用 </literal>
       <emphasis role="bold">&lt;prefer&gt;</emphasis>。
      </para>
     </listitem>
     <listitem>
      <para>
       對於相同的一般名稱，每個 <literal>&lt;prefer&gt;</literal> 宣告會覆寫 <literal>&lt;accept&gt;</literal> 宣告。如果管理員不僅希望使用者能使用 <literal>&lt;prefer&gt;</literal>，還想允許其使用 <literal>&lt;accept&gt;</literal>，就不應該在泛系統組態中使用 <literal>&lt;prefer&gt;</literal>。另一方面，因為使用者通常都是使用 <literal>&lt;prefer&gt;</literal>，這種做法應該不會產生任何不利影響。我們還發現在泛系統組態中使用 <literal>&lt;prefer&gt;</literal> 的情況。
      </para>
     </listitem>
    </itemizedlist>
   </note>
  </sect3>
 </sect2>
</sect1>
