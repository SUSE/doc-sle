<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
                 type="text/xml"
                 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="article-cockpit-slemicro" xml:lang="en">
 <title>Cockpit Guide</title>
 <info>
  <productnumber>&productnumber;</productnumber><productname>&productname;</productname><date>
<?dbtimestamp format="B d, Y"?></date>
  <abstract>
   <para>
    This guide describes the administration of &slem; using Cockpit.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <section xml:id="sec-about-cockpit">
  <title>About Cockpit</title>
  <para>
    Cockpit is a web-based graphical interface that enables you to manage most of the administration task from one place by using plugins. You do not need to create credentials for cockpit as by default Cockpit uses the same credentials that you use to login to your server. Cockpit uses APIs that already exist on the system without adding additional layer to your system.
  </para>
  <para>
    Cockpit enables you to perform the following tasks:
  </para>
  <itemizedlist>
    <listitem>
      <para>
        download container images and run containers
      </para>
    </listitem>
    <listitem>
      <para>
        update the server
      </para>
    </listitem>
    <listitem>
      <para>
        inspect and change network settings
      </para>
    </listitem>
    <listitem>
      <para>
        manage user accounts
      </para>
    </listitem>
    <listitem>
      <para>
        view system logs
      </para>
    </listitem>
    <listitem>
      <para>
        create and administer virtual machines
      </para>
    </listitem>
    <listitem>
      <para>
        inspect and interact with &systemd; services
      </para>
    </listitem>
    <listitem>
      <para>
        use a terminal on a remote server in your web browser
      </para>
    </listitem>
  </itemizedlist>
 </section>

<section xml:id="sec-admin-cockpit">
  <title>Getting Cockpit</title>
  <para>
    Cockpit is included in the delivered
   pre-built images, or can be installed if you are installing your own
   instances manually. For details regarding the manual installation, refer to
   <xref linkend="sec-settings-software"/>.
  </para>
  <para>
   Though Cockpit is present in the pre-built images by default, the plugin for
   administration of virtual machines needs to be installed manually. You can
   do so by installing the <literal>microos-cockpit</literal> pattern as
   described bellow. Use the command below as well in case Cockpit is not
   installed on your system.
  </para>
  <screen>&prompt.root;transactional-update pkg install -t pattern microos-cockpit</screen>
  <para>
   Reboot your machine to switch to the latest snapshot.
  </para>
  <note>
   <title>Cockpit's plugins installed from the <literal>microos-cockpit</literal> pattern may differ according to technologies installed on your system</title>
   <para>
    The plugin <literal>Podman containers</literal> is installed only if the
    <emphasis>Containers Runtime for non-clustered systems</emphasis> patterns
    are installed on your system. Similarly, the <literal>Virtual
    Machines</literal> plugin is installed only if the <emphasis>KVM
    Virtualization Host</emphasis> pattern is installed on your system.
   </para>
  </note>
  <para>
  If the Cockpit instance is intended to serve as a primary one, you need to enable the cockpit socket
   in systemd by running:
  </para>
<screen>&prompt.root;systemctl enable --now cockpit.socket</screen>
<para>
  After running the command, the server will expose the default <emphasis>9090</emphasis> port. &systemd; will start the <literal>cockpit-ws</literal> that enables you to administer secondary servers from the primary server.
  </para>
  <para>
   In case you have enabled the firewall, you also must open the firewall for
   Cockpit as follows:
  </para>
<screen>&prompt.root;firewall-cmd --permanent --zone=public --add-service=cockpit</screen>
  <para>
   And then reload the firewall configuration by running:
  </para>
<screen>&prompt.root;firewall-cmd --reload</screen>
  <para>
   Now you can access the Cockpit web interface by opening the following
   address in your web browser:
  </para>
<screen>https://<replaceable>IP_ADDRESS_OF_MACHINE</replaceable>:9090</screen>



 </section>

<section xml:id="sec-cockpit-authentication">
  <title>Cockpit authentication</title>
  <section xml:id="sec-authentication-login">
    <title>Authentication</title>
    <para>
      Cockpit enables you to log in directly to each machine that can expose the 9090 port. If the port cannot be accessed on the particular machine, you can still use Cockpit to administer the machine by using it as a secondary server. For a procedure of adding a server as secondary, refer to <xref linkend="sec-adding-servers"/>. 
    </para>
    <note>
      <title>A limited count of secondary servers</title>
      <para>
        The count of secondary servers that you can administer from one primary session is limited to 20. If you need to administer more servers, add other primary sessions or use another tool for cluster administration. 
      </para>
    </note>
    <para>
      To log in to the primary server, enter your credentials on the Cockpit login page. To log in to secondary servers, there are two options. You can access secondary machines after log in to the primary server, or you can access a secondary machine using the <guimenu>Connect to</guimenu> field on the login page.
    </para>
    

    <section xml:id="sec-adding-servers">
      <title>Adding secondary servers</title>
      <para>
        To add a server as a secondary, proceed as follows:
      </para>
      <procedure>
        <step>
          <para>
            Log in to the primary server with an account with the <emphasis>system administrator</emphasis> role.
          </para>
        </step>
        <step>
          <para>
            Click on the <replaceable>USERNAME</replaceable>@<replaceable>HOSTNAME</replaceable> in the left upper corner.
          </para>
        </step>
        <step>
          <para>
            Click <guimenu>Add new host</guimenu>.
          </para>
        </step>
        <step>
          <para>
            Fill in the host identification and user name that will be used to log in to the server. You can assign a color to the machine. When the details are complete, click <guimenu>Add</guimenu>.
          </para>
        </step>
        <step>
          <para>
            Verify a fingerprint on the server you want to add, if the fingerprint matches or if you have not set up the SSH connection, click <guimenu>Accept and connect</guimenu> to proceed. 
          </para>
        </step>
        <step>
          <para>
            Fill in the password and if needed check <guimenu>Automatic login</guimenu>. Cockpit will generate a new SSH key for the user and next time tou will be logged in automatically.
          </para>
        </step>
      </procedure>
    </section>

    <section xml:id="sec-secondary-direct">
      <title>Logging into secondary servers directly</title>
      <para>
        You can log in to any secondary server without logging in to the primary server first. This solution can be useful when you do not have credentials for the primary server. The primary server will be used as a bridge and you will be connected to the secondary server using SSH.
      </para>
      <para>
        To connect to the secondary server, expand <guimenu>Other options</guimenu> on the login screen of the primary server. Fill in you user name, password and the IP address of the secondary server. If you try to log in for the first time, you are asked to verify the fingerprint, click <guimenu>Accept and connect</guimenu>.
      </para>
    </section>
  </section>
</section>

  <section xml:id="sec-cockpit-logs">
    <title>&slema; logs</title>
    <para>
      After clicking <guimenu>Logs</guimenu>, Cockpit enables you to view logs on your system. You can filter the logs according to the following criteria:
          </para>
          <variablelist>
            <varlistentry>
              <term>Time</term>
              <listitem>
                <para>
                  to filter the logs according a specific time, you can choose from the following values:
                </para>
                <itemizedlist>
                  <listitem>
                    <para>
                      <emphasis>Current boot</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      <emphasis>Previous boot</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      <emphasis>Last 24 hours</emphasis>
                    </para>
                  </listitem>
                  <listitem>
                    <para>
                      <emphasis>Last 7 days</emphasis>
                    </para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>Priority</term>
              <listitem>
                <para>the standard <command>syslog</command> severity levels are used (sorted from the most severe to the least:</para>
                <variablelist>
                  <varlistentry>
                    <term>Only emergency</term>
                    <listitem>
                      <para>
                        The system is unusable. This is a panic condition.
                      </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Alert and above</term>
                    <listitem>
                      <para>
                        This log requires your immediate action.
                      </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Critical and above</term>
                    <listitem>
                      <para>
                        Failures in primary systems. You should correct the problem immediately.
                      </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Error and above</term>
                    <listitem>
                      <para>
                        Not an urgent error, but should be handled within a specific time.
                      </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Warning and above</term>
                    <listitem>
                      <para>
                        Not an error, but indicates that an error might occur if no action is taken.
                      </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Notice and above</term>
                    <listitem>
                      <para>
                        Unusal events that are not errors. No immediate actions are required.
                      </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Info and above</term>
                    <listitem>
                      <para>
                        Normal operational messages that serve as a confirmation that the system is working properly.
                      </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Debug and above</term>
                    <listitem>
                      <para>
                        These messages are used just for debugging of the system.
                      </para>
                    </listitem>
                  </varlistentry>
                </variablelist>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>Identifier</term>
              <listitem>
                <para>
                  You can filter logs for a particular service, daemon or process. Available identifiers are parsed from the logs currently displayed according to the set filters. 
                </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>Filters</term>
              <listitem>
                <para>
                  You can refine the logs view here according to the following criteria:
                </para>
                <variablelist>
                  <varlistentry>
                    <term>Since</term>
                    <listitem>
                      <para>
                        logs on the specified date or newer will be displayed. You can specify the time the following way: 
                      </para>
                      <itemizedlist>
                        <listitem>
                          <para>
                            using the absolute date in the format <emphasis>YYYY-MM-DD</emphasis>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            using any of the terms: <literal>yesterday</literal>, <literal>today</literal>, <literal>tomorrow</literal> and <literal>now</literal>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            using relative time by prefixing the value with - or + and specifying units. You can use the following units: <literal>s</literal> or <literal>seconds</literal>, <literal>hours</literal> or <literal>h</literal>, <literal>days</literal> or <literal>d</literal>, <literal>weeks</literal> or <literal>w</literal>, <literal>months</literal> or <literal>M</literal>, and <literal>years</literal> or <literal>y</literal>.
                          </para>
                        </listitem>
                      </itemizedlist>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Until</term>
                    <listitem>
                      <para>
                        logs on the specified date or older will be displayed. You can specify the time the following way:
                      </para>
                      <itemizedlist>
                        <listitem>
                          <para>
                            using the absolute date in the format <emphasis>YYYY-MM-DD</emphasis>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            using any of the terms: <literal>yesterday</literal>, <literal>today</literal>, <literal>tomorrow</literal> and <literal>now</literal>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            using relative time by prefixing the value with - or + and specifying units. You can use the following units: <literal>s</literal> or <literal>seconds</literal>, <literal>hours</literal> or <literal>h</literal>, <literal>days</literal> or <literal>d</literal>, <literal>weeks</literal> or <literal>w</literal>, <literal>months</literal> or <literal>M</literal>, and <literal>years</literal> or <literal>y</literal>.
                          </para>
                        </listitem>
                      </itemizedlist>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Boot</term> 
                    <listitem>
                      <para>
                        enter a positive integer to mark the boot number - 0 means the current boot, 1 for the first boot, 2 for the second, etc.
                      </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Unit</term> 
                    <listitem>
                      <para>
                        specify a &systemd; unit which logs you want to display. Use one of the formats: 
                      </para>
                      <itemizedlist>
                        <listitem>
                          <para>
                            <literal>_SYSTEMD_UNIT=<replaceable>NAME</replaceable>.service</literal>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            <literal>COREDUMP_UNIT=<replaceable>NAME</replaceable>.service</literal>
                          </para>
                        </listitem>
                        <listitem>
                          <para>
                            <literal>UNIT=<replaceable>NAME</replaceable>.service</literal>
                          </para>
                        </listitem>
                      </itemizedlist>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>Free-form search</term> 
                    <listitem>
                      <para>
                        enter a string that you want to find in the log messages. You can also use <link xlink:href="https://www.freedesktop.org/software/systemd/man/journalctl.html#-g">PERL-compatible regular expressions</link>. Alternatively, you can filter message according to message log fields, in the format: <replaceable>FIELD=VALUE</replaceable>, for example, <literal>CODE_LINE=349</literal> displays logs with this value.
                      </para>
                    </listitem>
                  </varlistentry>
                </variablelist>
              </listitem>
            </varlistentry>
            </variablelist>
  </section>

  <section xml:id="sec-cockpit-networking">
    <title>Managing networking</title>
    <section xml:id="sec-networking-interfaces">
      <title>Interfaces</title>
      <para>
        From the <guimenu>Interfaces</guimenu> tab, you can add, modify or delete VLANs, bridges or bond interfaces.
      </para>
      <section xml:id="sec-networking-bridges">
        <title>Adding interfaces</title>
        <para>
          Click <guimenu>Add</guimenu> to select the type of interface to add, either <guimenu>Bond</guimenu>, <guimenu>Bridge</guimenu>, or <guimenu>VLAN</guimenu>.
        </para>        
        <figure xml:id="fig-adding-bond">
          <title>Adding a bond</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_adding_bond.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_adding_bond.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit adding bond</phrase>
  </textobject>
   </mediaobject>
        </figure>
        <para>
          When adding a bonding interface, enter a name and specify which interfaces to include. If possible, proceed with other items as suggested by Cockpit. However, you can select one of the following modes: 
        </para>
        <variablelist>
          <varlistentry>
            <term>Round Robin</term>
            <listitem>
              <para>
                Transfers packets from the first available interface to the last. The mode offers fault tolerance and load balancing.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Active Backup</term>
            <listitem>
              <para>
                Only one interface in the bonding is active. If the active interface fails, the backup will be activated.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Balance XOR</term>
            <listitem>
              <para>
                Balancing using a transmit hash policy. The default is a modulo device count. To select a different policy, specify the <literal>xmit_hash_policy</literal> option in the <guimenu>Option</guimenu> field.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Broadcast</term>
            <listitem>
              <para>
                Evrything is transmitted on all interfaces.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>802.3ad Dynamic Link Aggregation</term>
            <listitem>
              <para>
                Creates aggregation groups that share the same speed and duplex settings.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Adaptive Transmit Load Balancing</term>
            <listitem>
              <para>
                Is a channel bonding that does not require any special switch support. The outgoing traffic is distributed according to the current load on each interface.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Adaptive Load Balancing</term>
            <listitem>
              <para>
                Includes adaptive transmit load balancing and receive load balancing, no special switch support is required.
              </para>
            </listitem>
          </varlistentry>
        </variablelist>
        <para>
          You can also provide more options in the field <guimenu>Options</guimenu> using the <emphasis>key=value</emphasis> format.
        </para>
        <figure xml:id="fig-adding-bridge">
          <title>Adding a bridge</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_adding_bridge.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_adding_bridge.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit adding bridge</phrase>
  </textobject>
</mediaobject>
        </figure>
        <para>
          When adding a bridge, specify a name of the bridge and select the interfaces you want to add to the subnet.
        </para>
        <figure xml:id="fig-adding-vlan">
          <title>Adding VLAN</title>
          <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_adding_vlan.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_adding_vlan.png" width="100%"/>
    </imageobject>
    <textobject role="description">
   <phrase>Cockpit adding VLAN</phrase>
  </textobject>
  </mediaobject>
        </figure>
        <para>
          When adding a virtual local area network, select the parent interface, assign an ID number and provide a name for the VLAN.
        </para>
      </section>

  <!-- Currently not available in 5.3
  <section xml:id="sec-networking-management">
        <title>Managing interfaces</title>
        <para>
          By default, the interfaces are started on boot and use DHCP to assign an IP address. However, you can configure an interface to start on other occassions and/or use a static IP address.
        </para>
        <para>
          The <guimenu>Interfaces</guimenu> view also enables you to delete an interface or disable it.
        </para>
      </section>
    </section>

    <section xml:id="sec-networking-routing">
      <title>Routing</title>
      <para>
        TBD
      </para>
    </section>

<section xml:id="sec-networking-dns">
  <title>DNS</title>
  <para>
        TBD
      </para>
</section>
-->
</section>
  </section>

  <section xml:id="sec-cockpit-containers">
    <title>Working with containers</title>
    <para>
        After the first login to Cockpit, you need to start Podman. Keep the default check box selected to start Podman automatically on each boot.
      </para>
      <para>
        The <guimenu>Podman containers</guimenu> page enables you to pull images from registries and manage your container. You can also filter the view by entering filter criterion into the filter field.
      </para>
      <section xml:id="sec-pulling-images">
        <title>Getting container images</title>
      <para>
        To start a container you need a container image. Click <guimenu>Get new image</guimenu> to open a search box for images.
      </para>
      <para>
        In the search box:  
      </para>
      <itemizedlist>
        <listitem>
          <para>
            choose preferred image registry or proceed with <literal>All registries</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            define the <guimenu>Tag</guimenu>. The default value is <literal>latest</literal>
          </para>
        </listitem>
        <listitem>
          <para>
            fill in the image name or description. 
          </para>
        </listitem>
      </itemizedlist>
      <para>
        Cockpit suggests possible images according to the entered name, registry and tag. Select the desired image and click <guimenu>Download</guimenu>. 
      </para>
      <note>
        <title>Adding custom registry</title>
        <para>
          &slema; comes with a predefined set of registries. If you need to use a custom registry, you need to configure Cockpit to display them. Add the custom registry to the file <filename>/etc/containers/registries.conf</filename> to the <literal>registries</literal> list. For example, you can add <emphasis>registry.example</emphasis> to the list as follows:
        </para>
        <screen>registries = ["registry.opensuse.org", "docker.io", "registry.example"]</screen>
      </note>
      <tip>
        <title>Pulling images using Podman</title>
        <para>
          You can also get container images using Podman by running the <command>podman pull</command> command.For details, refer to <xref linkend="article-podman"/>.
        </para>        
      </tip>
    </section>

    <section xml:id="sec-running-containers">
      <title>Managing containers</title>
      <para>
        After you get an image, you can start a container based on that image by clicking the button next to the image information. Enter the container details:
      </para>
      <variablelist>
          <varlistentry>
            <term>Name</term>
            <listitem>
              <para>
                You can define a custom name for the container. If not specified, the generated value is used.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Command</term>
            <listitem>
              <para>
                defines a command that is run inside the container, for example, <filename>/usr/lib/systemd/systemd</filename> or <filename>/bin/bash</filename>
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Memory limit</term>
            <listitem>
              <para>
                you can limit maximun memory consumption of the container by checking the box and specifying the limit
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>With terminal</term>
            <listitem>
              <para>
                the container will not run in the detached mode
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>CPU shares</term>
            <listitem>
              <para>
                specify the weight of the container to use CPU time. The default weight is 1024. The weight applies only if containers are under high load. If tasks in one container are idle, other containers may use its CPU time. 
              </para>
              <para>
                If you have four contaners, two of them have CPU shares of 512 and the other two have 1024, then under high load the containers with lower CPU shares get only 16,5% of CPU time, while those with 1024 CPU shares get 33% of CPU time.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Ports</term>
            <listitem>
              <para>
                you can publish ports of the container to the host. If you do not provide the host IP address, the port will be bound to all host IP addresses. If you omit the host port number, a random port is assigned.
              </para>
              <para>
                To publish a port for both protocols (TCP and UDP), enter the same port number twice just select different protocols.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Volumes</term>
            <listitem>
              <para>
                maps volumes on the host system on paths in the container. The <literal>Container path</literal> must be an absolute path inside the container, if it does not exist, the directory will be created.
              </para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>Environment</term>
            <listitem>
              <para>
                enables to pass environment variables to the container. 
              </para>
            </listitem>
          </varlistentry>
        </variablelist>
        <para>
          After expanding the container details, you can perform the following tasks: 
        </para>
        <itemizedlist>
          <listitem>
            <para>
              access a terminal of the container in the <guimenu>Console</guimenu> tab
            </para>
          </listitem>
          <listitem>
            <para>
              view the container logs in the <guimenu>Logs</guimenu> tab
            </para>
          </listitem>
          <listitem>
            <para>
              delete the container by clicking the trash bin button
            </para>
          </listitem>
          <listitem>
            <para>
              commit changes performed to the container, for exmple, installing packages to the container
            </para>
          </listitem>
          <listitem>
            <para>
              start the container by clicking <guimenu>Start</guimenu>
            </para>
          </listitem>
          <listitem>
            <para>
              restart the container, either by regular <guimenu>Restart</guimenu>, where processes running inside the container are stopped, or by <guimenu>Force restart</guimenu>, where the processes are killed and you might lose data
            </para>
          </listitem>
          <listitem>
            <para>
            stop the container, either by regular <guimenu>Stop</guimenu>, or <guimenu>Force stop</guimenu> or by <guimenu>Checkpoint</guimenu>. When using <guimenu>Checkpoint</guimenu> the state of all processes in the container is written to the disk and after the next start, the container is restored to the same point before stopping. 
          </para>
          </listitem>
        </itemizedlist>
    </section>

  </section>

  <section xml:id="sec-cockpit-vm">
    <title>Virtual machines management</title>
    <para>
      TBD
    </para>
    <section xml:id="sec-adding-pools">
      <title>Creating storage pools</title>
      <para>
        TBD
      </para>
    </section>

    <section xml:id="sec-creating-network">
      <title>Creating virtual networks</title>
      <para>
        TBD
      </para>
    </section>

    <section xml:id="sec-vm-management">
      <title>Managing virtual machines</title>
      <para>
        TBD
      </para>
    </section>
  </section>

  <section xml:id="sec-users-cockpit">
   <title>Users administration</title>
   <note>
    <title>Users administration only for server administrators</title>
    <para>
     Only users with the <guimenu>Server administrator</guimenu> role can edit
     other users.
    </para>
   </note>
   <para>
    Cockpit enables you to manage users of your system. Click
    <guimenu>Accounts</guimenu> to open the user administration page. Here you
    can create a new account by clicking <guimenu>Create new account</guimenu>
    or manage already existing accounts by clicking on the particular account.
   </para>
   <figure>
    <title>The <guimenu>Accounts</guimenu> screen</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cockpit_accounts_screen.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_accounts_screen.png" width="100%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <section xml:id="sec-adding-users">
    <title>Creating new accounts</title>
    <para>
     Click <guimenu>Create new account</guimenu> to open the window that
     enables you to add a new user. Fill in the user's login and/or full name
     and password, then confirm the form by clicking <guimenu>Create</guimenu>.
    </para>
    <para>
     To add authorized SSH keys for the new user or set the <guimenu>Server
     administrator</guimenu> role, edit the already created account by clicking
     on it. For details, refer to <xref linkend="sec-modifying-users"/>.
    </para>
   </section>
   <section xml:id="sec-modifying-users">
    <title>Modifying accounts</title>
    <para>
     After clicking the user icon in the <guimenu>Accounts</guimenu> page, the
     user details view opens and you can edit the user.
    </para>
    <figure>
     <title>User details</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="cockpit_user_details.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_user_details.png" width="100%"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     In the user's details view, you perform the following actions.
    </para>
    <variablelist>
     <varlistentry>
      <term>Delete the user</term>
      <listitem>
       <para>
        Click <guimenu>Delete</guimenu> to remove the user from the system.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Terminate user's session</term>
      <listitem>
       <para>
        By clicking <guimenu>Terminate session</guimenu>, you can log out the
        particular user of the system.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Change user's role</term>
      <listitem>
       <para>
        By checking/unchecking the <guimenu>Server administrator</guimenu>
        check box, you can assign or remove the administrator role from the
        user.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Manage access to the account</term>
      <listitem>
       <para>
        You can lock the account or you can set a date when the account will
        expire.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Manage the user's password</term>
      <listitem>
       <para>
        Click <guimenu>Set password</guimenu> to set a new password for the
        account.
       </para>
       <para>
        By clicking <guimenu>Force change</guimenu>, the user will have to
        change the password on the next login.
       </para>
       <para>
        Click <guimenu>edit</guimenu> to set whether or when the password
        expires.
      </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Add SSH key</term>
      <listitem>
       <para>
        You can add a SSH key for passwordless authentication via SSH. Click
        <guimenu>Add key</guimenu>, paste the contents of the public SSH key
        and confirm it by clicking <guimenu>Add</guimenu>.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </section>
  </section>

  <section xml:id="sec-cockpit-services">
    <title>Managing services</title>
    <para>
      In the <guimenu>Services</guimenu> view, you can view status of &systemd; units, start resp. stop particular units and create &systemd; timers.
    </para>
    <para>
      To manage a &systemd; unit, select the appropriate tab, then click on the particular unit. In the unit details you can view relations to other &systemd; units, the status of the unit, or you can perform the following actions that you can find under the three-dots menu:
    </para>
    <itemizedlist>
      <listitem>
        <para>
          <guimenu>Start</guimenu> if the unit is not running 
        </para>
      </listitem>
      <listitem>
        <para>
          <guimenu>Restart</guimenu> the running unit
        </para>
      </listitem> 
      <listitem>
        <para>
          <guimenu>Stop</guimenu> the running unit
        </para>
      </listitem>
      <listitem>
        <para>
          <guimenu>Disallow running</guimenu> - that will stop the service permanently including its all dependencies. Keep in mind that the dependent service can be used by other unit and disallowing the unit might cause serious troubles to the system.
        </para>
      </listitem>
    </itemizedlist>

    <section xml:id="sec-creating-timers">
      <title>Creating new timers</title>
      <para>
        To create a new timer, click <guimenu>Create timer</guimenu> in the <guimenu>Timers</guimenu> tab. Fill in the details described below in the opened <guimenu>Create timer</guimenu> window: 
      </para>
      <!--Add figure-->

      <variablelist>
        <varlistentry>
          <term>Name</term>
          <listitem>
            <para>
              the name of the timer that will be used in the unit name and in the service unit name as well. For example, specifying the name: <emphasis>example</emphasis> will create the following unit files: <filename>/etc/systemd/system/example.timer</filename> and <filename>/etc/systemd/system/example.service</filename>
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Description</term>
          <listitem>
            <para>
              you can provide a short description of the timer
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Command</term>
          <listitem>
            <para>
              the command to be invoked when the timer is triggered
            </para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Trigger</term>
          <listitem>
            <para>
              the timer can be triggered each time you reboot your machine or at a specific time. For the <guimenu>After system boot</guimenu> option, you can define delay of the service invocation. For the <guimenu>At specific time</guimenu> option, specify when the service should be invoked.
            </para>
          </listitem>
        </varlistentry>
      </variablelist>

      <note>
        <title>Overriding existings timers</title>
        <para>
          The default set of &systemd; timers is stored in <filename>/usr/lib/systemd</filename>. If you create a timer with already existing names, the default unit file is not overwritten, but a new one is created in <filename>/etc/systemd/system/</filename> that overrides the default unit file. If you want to restore the timer to the default one, delete the timer unit file in <filename>/etc/systemd/system/</filename>.
        </para>
        <para>
          If you try to create a timer that already exists in the <filename>/etc/systemd/system/</filename> directory, the unit file will be overwritten and the previous changes are lost. 
        </para>
      </note>
    </section>
    
  </section>

  <section xml:id="sec-cockpit-updates">
   <title>Managing &slema; updates and snapshots</title>
   <note>
    <title>Snapshots and updates management only for system administrators</title>
    <para>
     Only users with the <guimenu>Server administrator</guimenu> role can
     update the system or perform a rollback to another snapshot.
    </para>
   </note>
   <para>
    Cockpit enables you to update your &slema; instance or perform a rollback
    from the <literal>Software Updates</literal> menu.
   </para>
   <figure>
    <title>Software Updates</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cockpit_software_updates.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_software_updates.png" width="100%"/>
     </imageobject>
     <textobject role="description">
   <phrase>Software Updates view</phrase>
  </textobject>
    </mediaobject>
   </figure>
   <section xml:id="sec-cockpit-updates-procedure">
    <title>Managing updates</title>
    <para>
     Click <guimenu>Check for Updates</guimenu> to get a list of new package
     updates and patches available for your system. You can view each package
     update or patch information by clicking the blue icon next to the package
     update/patch. It is recommended to install the patches marked as important
     as soon as possible.
    </para>
    <para>
     To apply the updates and patches, click <guimenu>Update and
     Reboot</guimenu>. The equivalent of the <command>transactional-update up</command>
     command is called and a new snapshot of your system is created. After the update
     completes successfully, your system will be rebooted and the new snapshot
     set as default.
    </para>
    <para>
     You can postpone the reboot of your system after the update process by
     selecting <guimenu>Update without Reboot</guimenu> from the three-dot
     menu. Bear in mind that you need to reboot the system to activate the
     snapshot with updates. If you perform further changes without rebooting
     the system beforehand, a new snapshot will be created from the same point
     as the snapshots with updates. Therefore, the new snapshot will not include
     the updates.
    </para>
    <para>
     You can also update &slema; using CLI. For details, refer to
     <xref linkend="sec-command-list"/>.
    </para>
   </section>
   <section xml:id="sec-cockpit-rollback">
    <title>Performing rollbacks</title>
    <para>
     In <literal>Snapshots &amp; Updates</literal> you can perform a rollback
     to one of older snapshots by clicking <guimenu>Rollback and
     Reboot</guimenu>, or <guimenu>Rollback without Reboot</guimenu> in
     three-dot menu.
    </para>
    <para>
     After rebooting the system, the snapshot you rolled back to will be set as
     active. Do not make any changes (install updates, packages, etc.) before
     rebooting your system, as the snapshot you rolled back to is not active.
     Any changes performed before you reboot your system will start from the
     currently active snapshot.
    </para>
    <para>
     For a system rollback procedure performed using CLI, refer to
     <xref linkend="sec-rollback-procedure"/>.
    </para>
   </section>
  </section>
 

</article>