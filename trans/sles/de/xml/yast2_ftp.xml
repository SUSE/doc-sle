<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="yast2_ftp.xml" id="cha.ftp">
 <title>Einrichten eines FTP-Servers mit YaST</title><indexterm> <primary>FTP-Server</primary> <secondary>konfigurieren</secondary> </indexterm> <indexterm> <primary>konfigurieren</primary> <secondary>FTP-Server</secondary> </indexterm>
 <abstract>
  <para>
   Mithilfe des YaST-<guimenu>FTP-Server</guimenu>-Moduls können Sie Ihren Rechner für die Funktion als FTP (File Transfer Protocol)-Server konfigurieren. Anonyme bzw. authentifizierte Benutzer können mithilfe des FTP-Protokolls eine Verbindung zu Ihrem Rechner herstellen und Dateien herunterladen. Abhängig von der Konfiguration können sie auch Dateien auf den FTP-Server hochladen. YaST nutzt vsftpd (Very Secure FTP Daemon).
  </para>
 </abstract>
 <para>
  Wenn das YaST-FTP Server-Modul in Ihrem System nicht verfügbar ist, installieren Sie das Paket <systemitem class="resource">yast2-ftp-server</systemitem>.
 </para>
 <para>
  Führen Sie zum Konfigurieren des FTP-Servers mit YaST die folgenden Schritte aus:
 </para>
 <procedure>
  <step performance="required">
   <para>
    Öffnen Sie das YaST-Kontrollzentrum, und wählen Sie <menuchoice> <guimenu>Netzwerkdienste</guimenu> <guimenu>FTP-Server</guimenu> </menuchoice>, oder führen Sie das Kommando <command>yast2 ftp-server</command> als <systemitem class="username">root</systemitem> aus.
   </para>
  </step>
  <step performance="required">
   <para>
    Wenn auf Ihrem System kein FTP-Server installiert ist, werden Sie gefragt, welcher Server installiert werden soll, wenn das YaST-FTP-Server-Modul gestartet wird. Wählen Sie einen Server aus, und bestätigen Sie den Dialog.
   </para>
  </step>
  <step performance="required">
   <para>
    Konfigurieren Sie im Dialogfeld <guimenu>Start</guimenu> die Optionen für den Startvorgang des FTP-Servers. Weitere Informationen finden Sie unter <xref linkend="sec.ftp.start"/>.
   </para>
   <para>
    Konfigurieren Sie im Dialogfeld <guimenu>Allgemein</guimenu> die FTP-Verzeichnisse, eine Begrüßung, die Masken zum Erstellen von Dateien sowie verschiedene andere Parameter. Weitere Informationen finden Sie unter <xref linkend="sec.ftp.general"/>.
   </para>
   <para>
    Legen Sie im Dialogfeld <guimenu>Leistung</guimenu> die Parameter fest, die sich auf das Laden des FTP-Servers auswirken. Weitere Informationen finden Sie unter <xref linkend="sec.ftp.performance"/>.
   </para>
   <para>
    Legen Sie im Dialogfeld <guimenu>Authentifizierung</guimenu> fest, ob der FTP-Server für anonyme und/oder authentifizierte Benutzer verfügbar sein soll. Weitere Informationen finden Sie unter <xref linkend="sec.ftp.auth"/>.
   </para>
   <para>
    Konfigurieren Sie im Dialogfeld <guimenu>Einstellungen für Experten</guimenu>den Betriebsmodus des FTP-Servers, der SSL-Verbindungen sowie die Firewall-Einstellungen. Weitere Informationen finden Sie unter <xref linkend="sec.ftp.expert"/>.
   </para>
  </step>
  <step performance="required">
   <para>
    Klicken Sie auf <guimenu>Beenden</guimenu>, um die Konfigurationen zu speichern.
   </para>
  </step>
 </procedure>
 <sect1 id="sec.ftp.start">
  <title>Starten des FTP-Servers</title>

  <para>
   Legen Sie im Bereich <guimenu>Dienststart</guimenu> des Dialogfelds <guimenu>FTP-Start</guimenu> die Art und Weise fest, in der der FTP-Server gestartet wird.  Sie können den Server entweder automatisch während des Systemstarts oder manuell starten. Wenn der FTP-Server erst bei einer FTP-Verbindungsanfrage gestartet werden soll, wählen Sie <guimenu>Via xinetd</guimenu> aus.
  </para>

  <para>
   Der aktuelle Status des FTP-Servers wird im Bereich <guimenu>An- und ausschalten</guimenu> im Dialogfeld <guimenu>FTP-Start</guimenu> angezeigt. Starten Sie den FTP-Server, indem Sie auf <guimenu>FTP-Server jetzt starten</guimenu> klicken. Um den Server zu stoppen, klicken Sie auf <guimenu>Stoppen FTP</guimenu>. Nachdem Sie die Servereinstellungen geändert haben, klicken Sie auf <guimenu>Einstellungen speichern und FTP jetzt neu starten</guimenu>. Ihre Konfigurationen werden gespeichert, wenn Sie das Konfigurationsmodul mit <guimenu>Beenden</guimenu> verlassen.
  </para>

  <para>
   Im Bereich <guimenu>Ausgewählter Dienst</guimenu> des Dialogfelds <guimenu>FTP-Start</guimenu> wird der verwendete FTP-Server angezeigt: entweder vsftpd oder pure-ftpd. Wenn beide Server installiert sind, können Sie zwischen ihnen wechseln – die aktuelle Konfiguration wird automatisch konvertiert.
  </para>

  <figure id="fig.yast2.ftp-start-up">
   <title>FTP-Serverkonfiguration - Start</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_ftp-start-up.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_ftp-start-up.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 id="sec.ftp.general">
  <title>Allgemeine FTP-Einstellungen</title>

  <para>
   Im Bereich <guimenu>Allgemeine Einstellungen</guimenu> des Dialogfelds <guimenu>Allgemeine FTP-Einstellungen</guimenu> können Sie die <guimenu>Willkommensnachricht</guimenu> festlegen, die nach der Verbindungsherstellung zum FTP-Server angezeigt wird.
  </para>

  <para>
   Wenn Sie die Option <guimenu>Chroot Everyone</guimenu> (Alle platzieren) aktivieren, werden alle lokalen Benutzer nach der Anmeldung in einem Chroot Jail in ihrem Home-Verzeichnis platziert Diese Option hat Auswirkungen auf die Sicherheit, besonders wenn die Benutzer über Uploadberechtigungen oder Shellzugriff verfügen, daher sollten Sie beim Aktivieren dieser Option mit Bedacht vorgehen.
  </para>

  <para>
   Wenn Sie die Option <guimenu>Ausführliche Protokollierung</guimenu> aktivieren, werden alle FTP-Anfragen und -Antworten protokolliert.
  </para>

  <para>
   Sie können die Berechtigungen für Dateien, die von anonymen und/oder authentifizierten Benutzern erstellt wurden, mit umask einschränken. Legen Sie die Dateierstellungsmaske für anonyme Benutzer in <guimenu>Umask für anonyme Benutzer</guimenu> fest und die Dateierstellungsmaske für authentifizierte Benutzer in <guimenu>Umask für authentifizierte Benutzer</guimenu>. Die Masken sollten als Oktalzahlen mit führender Null eingegeben werden. Weitere Informationen zu umask finden Sie auf der man-Seite für umask (<command>man 1p umask</command>).
  </para>

  <para>
   Legen Sie im Bereich <guimenu>FTP-Verzeichnisse</guimenu> die für anonyme und autorisierte Benutzer verwendeten Verzeichnisse fest. Wenn Sie auf <guimenu>Durchsuchen</guimenu> klicken, können Sie ein zu verwendendes Verzeichnis aus dem lokalen Dateisystem wählen. Das standardmäßige FTP-Verzeichnis für anonyme Benutzer ist <filename>/srv/ftp</filename>. Beachten Sie, dass vsftpd keine Verzeichnisschreibrechte für alle Benutzer erteilt. Stattdessen wird das Unterverzeichnis <filename>upload</filename> mit Schreibberechtigungen für anonyme Benutzer erstellt.
  </para>

  <note>
   <title>Schreibberechtigungen im FTP-Verzeichnis</title>
   <para>
    Der pure-ftpd-Server ermöglicht es, dass anonyme Benutzer über Schreibberechtigungen für dieses FTP-Verzeichnis verfügen. Stellen Sie beim Wechseln zwischen den Servern sicher, dass Sie die Schreibberechtigungen im Verzeichnis, das mit pure-ftpd verwendet wurde, entfernen, bevor Sie zum vsftpd-Server zurückschalten.
   </para>
  </note>
 </sect1>
 <sect1 id="sec.ftp.performance">
  <title>FTP-Leistungseinstellungen</title>

  <para>
   Legen Sie im Dialogfeld <guimenu>Leistung</guimenu> die Parameter fest, die sich auf das Laden des FTP-Servers auswirken. <guimenu>Max. Lerrlaufzeit</guimenu> entspricht der Maximalzeit (in Minuten), die der Remote-Client zwischen FTP-Kommandos pausieren darf. Bei einer längeren Inaktivität wird die Verbindung zum Remote-Client getrennt. <guimenu>Max. Clients für eine IP</guimenu> bestimmt die maximale Clientanzahl, die von einer einzelnen IP-Adresse aus verbunden sein können. <guimenu>Max. Clients</guimenu> bestimmt die maximale Clientanzahl, die verbunden sein können. Alle zusätzlichen Clients erhalten eine Fehlermeldung.
  </para>

  <para>
   Die maximale Datenübertragungsrate (in KB/s) wird in <guimenu>Lovale Max Rate</guimenu> (Lokale max. Rate) für lokale authentifizierte Benutzer und in <guimenu>Anonymous Max Rate</guimenu> (Anonyme max. Rate) für anonyme Benutzer festgelegt. Der Standardwert für diese Einstellung ist <literal>0</literal>, was für eine unbegrenzte Datenübertragungsrate steht.
  </para>
 </sect1>
 <sect1 id="sec.ftp.auth">
  <title>Authentifizierung </title>

  <para>
   Im Bereich <guimenu>Anonyme und lokale Benutzer aktivieren/deaktivieren</guimenu> des Dialogfelds <guimenu>Authentifizierung</guimenu> können Sie festlegen, welche Benutzer auf Ihren FTP-Server zugreifen dürfen. Folgende Optionen stehen zur Verfügung: nur anonymen Benutzern, nur authentifizierten Benutzern oder beiden Benutzergruppen Zugriff erteilen.
  </para>

  <para>
   Wenn Sie es Benutzern ermöglichen möchten, Dateien auf den FTP-Server hochzuladen, aktivieren Sie die Option <guimenu>Hochladen aktivieren</guimenu> im Bereich <guimenu>Hochladen</guimenu> des Dialogfelds <guimenu>Authentifizierung</guimenu>. Hier können Sie das Hochladen und das Erstellen von Verzeichnissen sogar für anonyme Benutzer zulassen, indem Sie das entsprechende Kontrollkästchen aktivieren.
  </para>

  <note>
   <title>vsftp – Heraufladen von Dateien für anonyme Benutzer zulassen</title>
   <para>
    Wenn ein vsftpd-Server verwendet wird und anonyme Benutzer Dateien hochladen oder Verzeichnisse erstellen dürfen, muss ein Unterverzeichnis mit Schreibberechtigung für alle Benutzer im anonymen FTP-Verzeichnis erstellt werden.
   </para>
  </note>
 </sect1>
 <sect1 id="sec.ftp.expert">
  <title>Einstellungen für Experten</title>

  <para>
   Ein FTP-Server kann im aktiven oder passiven Modus ausgeführt werden. Standardmäßig wird der Server im passiven Modus ausgeführt. Um in den aktiven Modus zu wechseln, deaktivieren Sie die Option <guimenu>Passiven Modus aktivieren</guimenu> im Dialogfeld <guimenu>Einstellungen für Experten</guimenu>. Sie können außerdem den Portbereich ändern, der auf dem Server für den Datenstrom verwendet wird, indem Sie die Optionen <guimenu>Min Port für Pas.- Modus</guimenu> und <guimenu>Max Port für Pas.-Modus</guimenu> bearbeiten.
  </para>

  <para>
   Wenn die Kommunikation zwischen den Clients und dem Server verschlüsselt sein soll, können Sie <guimenu>SSL aktivieren</guimenu>. Wählen Sie dazu die Protokollversionen aus, die unterstützt werden sollen, und geben Sie das DSA-Zertifikat an, das für SSL-verschlüsselte Verbindungen verwendet werden soll.

  </para>

  <para>
   Wenn Ihr System von einer Firewall geschützt wird, aktivieren Sie <guimenu>Port in Firewall öffnen</guimenu>, um eine Verbindung zum FTP-Server zu ermöglichen.
  </para>
 </sect1>
 <sect1 id="sec.ftp.info">
  <title>Weiterführende Informationen</title>

  <para>
   Weitere Informationen zum FTP-Server finden Sie auf den man-Seiten zu <command>vsftpd</command> und <command>vsftpd.conf</command>.
  </para>
 </sect1>
</chapter>
