<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_prep_power_preparing.xml" version="5.0" xml:id="cha.power.prep">
 <title>Preparação</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes (sim)</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  Esta seção descreve as etapas preparatórias que devem ser executadas antes da instalação real do SUSE Linux Enterprise Server. O procedimento de instalação depende do sistema utilizado. Os seguintes métodos são suportados:
 </para>

 <itemizedlist>
  <listitem>
   <para>
    <xref linkend="sec.prep.powerlinux.powerkvm.kimchi" xrefstyle="select:title nopage"/>
   </para>
  </listitem>
  <listitem>
   <para>
    <xref linkend="sec.prep.powerlinux.powerkvm.virt-install" xrefstyle="select:title nopage"/>
   </para>
  </listitem>
  <listitem>
   <para>
    <xref linkend="sec.prep.powerlinux.powerkvm.ivm" xrefstyle="select:title nopage"/>
   </para>
  </listitem>
  <listitem>
   <para>
    <xref linkend="sec.prep.powerlinux.powerkvm.bare_metal" xrefstyle="select:title nopage"/>
   </para>
  </listitem>
 </itemizedlist>

 <para>
  Se o SUSE® Linux Enterprise Server precisa ser instalado em vários sistemas ou partições, é recomendável criar uma fonte de instalação de rede. A mesma fonte pode ser usada para a instalação simultânea em várias partições ou sistemas. A configuração de uma fonte de instalação de rede é descrita na <xref linkend="sec.deployment.instserver.sles9"/>.
 </para>

 <sect2 version="5.0" xml:id="sec.prep.powerlinux.powerkvm.kimchi">
  <title>Instalação em servidores com IBM PowerKVM usando o Kimchi</title>
  <para>
   Esta seção apresenta as etapas preparatórias para instalação em sistemas IBM PowerLinux com PowerKVM. Ela explica a instalação de uma imagem ISO com a interface da Web do Kimchi. Kimchi é uma ferramenta de administração do IBM PowerKVM.
  </para>
  <para>
   Esta seção assume que você tenha o PowerKVM em execução no seu servidor IBM PowerLinux. Se o PowerKVM não foi pré-instalado, consulte <quote>Configurando o IBM PowerKVM no Power Systems</quote> em <link xlink:href="http://www.ibm.com/support/knowledgecenter/linuxonibm/liabp/liabpkickoff.htm"/> para instalar e configurar o PowerKVM.
  </para>
  <sect3 xml:id="sec.prep.powerlinux.powerkvm.template">
   <title>Criando um gabarito do SUSE Linux Enterprise Server com o Kimchi</title>
   <para>
    Os gabaritos são a fonte de instalação dos convidados do PowerKVM. Você pode criar um gabarito, editar um gabarito existente ou clonar um gabarito. Para clonar um gabarito de um convidado existente, esse convidado deve ser desativado.
   </para>
   <procedure>
    <title>Criando um gabarito com o Kimchi</title>
    <step>
     <para>
      No browser da Web, digite o URL do servidor PowerLinux que executa o PowerKVM, por exemplo <literal>https://<replaceable>POWERLINUX_IP</replaceable>:8001</literal> (substitua <replaceable>POWERLINUX_IP</replaceable> pelo endereço IP do sistema).
     </para>
    </step>
    <step>
     <para>
      Clique na guia <guimenu>Templates</guimenu> (Gabaritos) para ativar a página <guimenu>Templates</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Clique no sinal de adição verde (<guimenu>+</guimenu>) para criar o gabarito do SUSE Linux Enterprise Server.
     </para>
    </step>
    <step>
     <para>
      Na caixa de diálogo <guimenu>Adicionar modelo</guimenu>, selecione uma das seguintes opções:
     </para>
     <variablelist>
      <varlistentry>
       <term><guimenu>Imagem ISO local</guimenu>
       </term>
       <listitem>
        <para>
         Selecione essa opção para explorar os pools de armazenamento de imagens ISO de instalação disponíveis no sistema.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Arquivo de imagem local</guimenu>
       </term>
       <listitem>
        <para>
         Selecione essa opção para especificar um caminho para um arquivo de imagem local.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Arquivo ISO remoto</guimenu>
       </term>
       <listitem>
        <para>
         Selecione essa opção para especificar um local remoto para uma imagem ISO de instalação.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </step>
    <step>
     <para>
      Selecione o arquivo ISO que você deseja usar para criar um convidado e clique em <guimenu>Criar modelos de ISO selecionado</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Para configurar o gabarito recém-criado, clique em <menuchoice><guimenu>Actions</guimenu><guimenu>Edit</guimenu></menuchoice> (Ações/Editar) e mude os valores padrão conforme necessário para sua carga de trabalho.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="kimchi_create_template.png" width="50%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="kimchi_create_template.png" width="50%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
   </procedure>
   <para>
    Para obter mais informações, consulte <quote>Configurando um modelo utilizando Kimchi</quote> em <link xlink:href="http://www.ibm.com/support/knowledgecenter/linuxonibm/liabp/liabpkimchitemplate.htm"/>.
   </para>
  </sect3>
  <sect3 xml:id="sec.prep.powerlinux.powerkvm.install">
   <title>Instalando o SUSE Linux Enterprise Server como convidado com o Kimchi</title>
   <para/>
   <procedure>
    <step>
     <para>
      No browser da Web, digite o URL do servidor PowerLinux que executa o PowerKVM, por exemplo <literal>https://<replaceable>POWERLINUX_IP</replaceable>:8001</literal> (substitua <replaceable>POWERLINUX_IP</replaceable> pelo endereço IP do sistema).
     </para>
    </step>
    <step>
     <para>
      Clique na guia <guimenu>Guests</guimenu> (Convidados) para ativar a página <guimenu>Guests</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Clique no sinal de adição verde (<guimenu>+</guimenu>) para criar o convidado do SUSE Linux Enterprise Server.
     </para>
    </step>
    <step>
     <para>
      Digite o <guimenu>nome da máquina virtual</guimenu> para o convidado do SUSE Linux Enterprise Server.
     </para>
     <para>
      Escolha o gabarito do SUSE Linux Enterprise Server criado na <xref linkend="sec.prep.powerlinux.powerkvm.template"/> e clique em <guimenu>Create</guimenu> (Criar).
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="kimchi_create_guest.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="kimchi_create_guest.png" width="70%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Após a criação do convidado, ele estará pronto para ser iniciado. Clique no botão de energia vermelho para iniciar o convidado do SUSE Linux Enterprise Server. Se preferir, selecione <menuchoice><guimenu>Ações</guimenu><guimenu>Iniciar</guimenu></menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Clique em <menuchoice><guimenu>Ações</guimenu><guimenu>Conectar</guimenu></menuchoice> e conecte o viewer do VNC ao processo de instalação, conforme descrito na <xref linkend="sec.deployment.remoteinst.monitor.vnc.connect"/>.
     </para>
    </step>
   </procedure>
   <tip>
    <title>Criando vários convidados</title>
    <para>
     Para criar vários convidados de um tipo similar, selecione <guimenu>Clonar</guimenu> no menu <guimenu>Ações</guimenu> de um convidado existente.
    </para>
   </tip>
   <para>
    Agora você pode continuar a instalação padrão por VNC, conforme descrito na <xref linkend="sec.i.yast2.steps"/>.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.prep.powerlinux.powerkvm.virt-install">
  <title>
   Instalação em servidores com IBM PowerKVM usando <command>virt-install</command>
  </title>
  <para>
   Além da instalação com o Kimchi, use a ferramenta de linha de comando <command>virt-install</command> para instalar em Servidores com IBM PowerKVM. Isso é útil principalmente quando você precisa instalar várias máquinas virtuais em sistemas IBM PowerLinux Server. O <command>virt-install</command> permite diversos cenários de instalação. Veja a seguir a descrição de um cenário de instalação remota por VNC e boot PXE. Para obter mais informações sobre o <command>virt-install</command>, consulte a <xref linkend="sec.libvirt.inst.virt-install"/>.
  </para>
  <para>
   Prepare um repositório com as fontes de instalação e o sistema de destino habilitado para boot PXE, conforme descrito na <xref linkend="sec.deployment.remoteinst.scenario.vncpxe"/>.
  </para>
  <para>
   Na linha de comando, digite algo parecido com o seguinte (ajuste as opções de acordo com as suas necessidades e seu hardware):
  </para>

<screen>virt-install --name server_sle12 --memory 4096 --vcpus=2 --pxe \
--graphics vnc --os-variant sles11 \
--disk pool=default,size=3000,format=qcow2,allocation=1G,bus=virtio \
-w mac=<replaceable>mac_address</replaceable>,model=spapr-vlan</screen>
  <para>
   Ele vai usar gráficos VNC e iniciar automaticamente o cliente gráfico. Conclua a instalação como descrito na <xref linkend="sec.i.yast2.steps"/>.
  </para>
 </sect2>

 <sect2 xml:id="sec.prep.powerlinux.powerkvm.ivm">
  <title>
   Instalação em uma partição usando IVM
  </title>
  <para>
   Este guia ajuda a instalar o <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> em uma partição de servidor Power Systems usando a interface da Web do Integrated Virtualization Manager (IVM). Antes de iniciar a instalação, verifique se os seguintes requisitos foram cumpridos:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     O Linux no Power Systems está ligado
    </para>
   </listitem>
   <listitem>
    <para>
     O servidor de E/S Virtual está instalado
    </para>
   </listitem>
   <listitem>
    <para>
     O IVM foi inicialmente configurado
    </para>
   </listitem>
  </itemizedlist>
  <procedure>
   <title>Efetue login na interface da Web do IVM</title>
   <step>
    <para>
     Abra uma janela do browser da Web e conecte-se usando o protocolo HTTP ou HTTPS para o endereço IP atribuído ao IVM durante o processo de instalação (por exemplo, https://<replaceable>ENDEREÇO_IP</replaceable>). A janela de boas-vindas é exibida.
    </para>
   </step>
   <step>
    <para>
     Efetue login como o usuário <systemitem class="username">padmin</systemitem>, inserindo a senha que você definiu durante o processo de instalação. A interface do IVM é exibida.
    </para>
   </step>
   <step>
    <para>
     Selecione <guimenu>Visualizar/Modificar Ethernet Virtual</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Clique em <guimenu>Inicializar Ethernet Virtual</guimenu> para fornecer a conectividade de Ethernet entre as partições.
    </para>
   </step>
   <step>
    <para>
     Quando a Ethernet Virtual for inicializada, clique em Aplicar.
    </para>
   </step>
   <step>
    <para>
     Se a instalação exigir rede externa, crie uma ponte Ethernet virtual.
    </para>
    <substeps>
     <step>
      <para>
       Selecione a guia <guimenu>Ponte Ethernet Virtual</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Selecione o adaptador físico para a ponte e clique em <guimenu>Aplicar</guimenu> para prosseguir.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>
  <para>Em seguida, crie uma partição seguindo estas etapas:</para>
  <procedure>
   <title>Criar uma Partição</title>
   <step>
    <para>
     Na interface da Web do IVM, clique em <menuchoice><guimenu>Visualizar/Modificar Partições</guimenu><guimenu>Criar partição</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Insira um nome para a partição. Para ir à próxima etapa, clique em <guimenu>Avançar</guimenu> nesta e nas etapas seguintes.
    </para>
   </step>
   <step>
    <para>
     Especifique a memória da partição. Se você criou um pool de memória compartilhada, as partições podem compartilhar memória. Do contrário, selecione <guimenu>Dedicado</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Especifique o número de processadores e o modo de processamento para a partição.
    </para>
   </step>
   <step>
    <para>
     Especifique uma Ethernet virtual para a partição. Se você não deseja configurar um adaptador, selecione <guimenu>nenhum</guimenu> para a Ethernet virtual.
    </para>
   </step>
   <step>
    <para>
     Crie um novo disco virtual ou atribua discos virtuais existentes e volumes físicos que não estejam atribuídos a nenhuma partição.
    </para>
   </step>
   <step>
    <para>
     Verifique o <guimenu>Nome do disco virtual</guimenu> e o <guimenu>Nome do pool de armazenamento</guimenu> do disco e especifique o <guimenu>Tamanho do disco virtual</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Configure dispositivos óticos para a partição, expandindo <guimenu>Dispositivos Óticos Físicos</guimenu> e <guimenu>Dispositivos Óticos Virtuais</guimenu> e selecione o(s) dispositivo(s) que você deseja atribuir à partição.
    </para>
   </step>
   <step>
    <para>
     Verifique as definições de configuração da partição e clique em <guimenu>Concluir</guimenu>. A partição é criada e disponibilizada na lista <guimenu>Visualizar/Modificar Partições</guimenu>.
    </para>
   </step>
  </procedure>
  <para>Agora ative a partição que você criou:</para>
  <procedure>
   <title>Ativar a partição</title>
   <step>
    <para>
     Na interface da Web do IVM, clique em <guimenu>Visualizar/Modificar Partições</guimenu> e marque a caixa ao lado da partição que deseja ativar.
    </para>
   </step>
   <step>
    <para>
     Selecione <guimenu>Mais tarefas</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Selecione <guimenu>Abrir janela do terminal</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Clique em <guimenu>Ativar</guimenu> ao lado da partição.
    </para>
   </step>
   <step>
    <para>
     Na janela do terminal, digite <keycap>1</keycap> para iniciar os serviços de gerenciamento de sistema (SMS).
    </para>
   </step>
  </procedure>
  <para>
   A máquina é configurada, e você pode inicializar na instalação:
  </para>
  <procedure>
   <title>Inicializar a instalação do Linux</title>
   <step>
    <para>
     Na janela de <guimenu>seleção de boot</guimenu>, digite <keycap>1</keycap> para selecionar o <guimenu>Menu do SMS</guimenu>. Digite <keycap>1</keycap> antes que a tela de boot do firmware apareça completamente, porque ela vai desaparecer após a conclusão. Se você não digitar a tempo, reinicialize o sistema.
    </para>
   </step>
   <step>
    <para>
     Nesse momento, você pode inserir o disco de mídia do servidor de e/s virtuais (VIOS) para a unidade de disco.
    </para>
   </step>
   <step>
    <para>
     Digite <keycap>2</keycap> para inserir a senha no menu <guimenu>Seleção de Idioma</guimenu>. Digite a senha do ID de admin.
    </para>
   </step>
   <step>
    <para>
     No menu principal do SMS, digite <keycap>5</keycap> para escolher <guimenu>Selecionar Opções de Boot</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Digite<keycap>1</keycap>para selecionar<guimenu>Dispositivo de instalação/Boot</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Digite <keycap>7</keycap> para ver todos os dispositivos de boot disponíveis.
    </para>
   </step>
   <step>
    <para>
     Digite o número correspondente ao dispositivo que você deseja usar. Se o dispositivo não constar na lista, digite <keycap>N</keycap> para exibir mais.
    </para>
   </step>
   <step>
    <para>
     Digite <keycap>2</keycap> para executar um <guimenu>Boot no Modo Normal</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Digite <keycap>1</keycap> para sair do menu do SMS e iniciar o processo de boot.
    </para>
   </step>
   <step>
    <para>
     No prompt de boot do instalador, digite
    </para>
    <screen>install vnc=1
vncpassword=<replaceable>VNC_PASSWORD</replaceable></screen>
    <para>
     Substitua <replaceable>VNC_PASSWORD</replaceable> por uma senha de sua escolha (tamanho mínimo de oito caracteres) e pressione <keycap function="enter"/> para iniciar a instalação do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. O kernel iniciará o carregamento.
    </para>
   </step>
  </procedure>
  <para>
   Depois que o kernel iniciar o carregamento, o instalador precisará de algumas informações do sistema para configurar uma sessão VNC. Você deve ter uma pilha de TCP/IP válida para usar o VNC. Use o DHCP ou defina manualmente as informações de rede seguindo as instruções apresentadas pelo instalador.
  </para>
  <procedure>
   <title>Iniciar a sessão VNC</title>
   <step>
    <para>
     Na janela <guimenu>Dispositivo de rede</guimenu>, selecione <guimenu>eth0</guimenu> como dispositivo de rede. Selecione <guimenu>OK</guimenu> e pressione <keycap function="enter"/>.
    </para>
   </step>
   <step>
    <para>
     Teste a mídia de instalação. Se preferir continuar sem o teste, selecione <guimenu>Ignorar</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Depois que o sistema iniciar o servidor VNC, você verá uma mensagem para conectar o cliente VNC seguida de um endereço IP. Anote esse endereço IP.
    </para>
   </step>
   <step>
    <para>
     Inicie um cliente VNC no laptop ou PC. Digite o endereço IP da etapa anterior seguido por <literal>:1</literal>, por exemplo, 192.168.2.103:1.
    </para>
   </step>
   <step>
    <para>
     Conclua a instalação como descrito na <xref linkend="sec.i.yast2.steps"/>.
    </para>
   </step>
  </procedure>
 </sect2>
 <sect2 xml:id="sec.prep.powerlinux.powerkvm.bare_metal">
  <title>
   Instalando em servidores sem camada de abstração OpenPower
  </title>
  <para>
   Siga estas informações para instalar o Linux usando um console serial ou um monitor e teclado em um servidor Power Systems. A instalação considera que um sistema não gerenciado (independente) esteja pronto para inicializar.
  </para>
  <procedure>
   <step>
    <para>
     Ligue o sistema selecionando <guimenu>Ligar</guimenu> no menu <guimenu>Ligar/Desligar Sistema</guimenu>. Quando for perguntado se você deseja continuar usando o console, digite <keycap>0</keycap> para confirmar.
    </para>
   </step>
   <step>
    <para>
     Insira a mídia de instalação do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> na unidade de disco.
    </para>
   </step>
   <step>
    <para>
     Na janela de <guimenu>seleção de idioma</guimenu>, digite <keycap>2</keycap> para continuar a inicialização.
    </para>
   </step>
   <step>
    <para>
     Digite <keycap>1</keycap> para aceitar o contrato de licença.
    </para>
   </step>   <step>
    <para>
     Na janela de <guimenu>seleção de boot</guimenu>, digite <keycap>1</keycap> para selecionar o <guimenu>Menu do SMS</guimenu>. Digite <keycap>1</keycap> antes que a tela de boot do firmware apareça completamente, porque ela vai desaparecer após a conclusão. Se você não digitar a tempo, reinicialize o sistema.
    </para>
   </step>
   <step>
    <para>
     Digite <keycap>2</keycap> para inserir a senha no menu <guimenu>Seleção de Idioma</guimenu>. Digite a senha do ID de admin.
    </para>
   </step>
   <step>
    <para>
     No menu principal do SMS, digite <keycap>5</keycap> para escolher <guimenu>Selecionar Opções de Boot</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Digite <keycap>7</keycap> para ver todos os dispositivos de boot disponíveis.
    </para>
   </step>
   <step>
    <para>
     Digite o número correspondente ao dispositivo que você deseja usar. Se o dispositivo não constar na lista, digite <keycap>N</keycap> para exibir mais.
    </para>
   </step>
   <step>
    <para>
     Digite <keycap>2</keycap> para executar um <guimenu>Boot no Modo Normal</guimenu>.
    </para>
   </step>   <step>
    <para>
     Digite <keycap>1</keycap> para sair do menu do SMS e iniciar o processo de boot.
    </para>
   </step>
   <step>
    <para>
     No prompt de boot do instalador, digite
    </para>
    <screen>install vnc=1
vncpassword=<replaceable>VNC_PASSWORD</replaceable></screen>
    <para>
     Substitua <replaceable>VNC_PASSWORD</replaceable> por uma senha de sua escolha (tamanho mínimo de oito caracteres) e pressione <keycap function="enter"/> para iniciar a instalação do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. O kernel iniciará o carregamento.
    </para>
   </step>
  </procedure>

  <para>
   Depois que o kernel iniciar o carregamento, o instalador precisará de algumas informações do sistema para configurar uma sessão VNC. Você deve ter uma pilha de TCP/IP válida para usar o VNC. Use o DHCP ou defina manualmente as informações de rede seguindo as instruções apresentadas pelo instalador.
  </para>
  <procedure>
   <title>Iniciar a sessão VNC</title>
   <step>
    <para>
     Na janela <guimenu>Dispositivo de rede</guimenu>, selecione <guimenu>eth0</guimenu> como dispositivo de rede. Selecione <guimenu>OK</guimenu> e pressione <keycap function="enter"/>.
    </para>
   </step>
   <step>
    <para>
     Teste a mídia de instalação. Se preferir continuar sem o teste, selecione <guimenu>Ignorar</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Depois que o sistema iniciar o servidor VNC, você verá uma mensagem para conectar o cliente VNC seguida de um endereço IP. Anote esse endereço IP.
    </para>
   </step>
   <step>
    <para>
     Inicie um cliente VNC no laptop ou PC. Digite o endereço IP da etapa anterior seguido por <literal>:1</literal>, por exemplo, 192.168.2.103:1.
    </para>
   </step>
   <step>
    <para>
     Conclua a instalação como descrito na <xref linkend="sec.i.yast2.steps"/>.
    </para>
   </step>
  </procedure>
 </sect2>

</sect1>
