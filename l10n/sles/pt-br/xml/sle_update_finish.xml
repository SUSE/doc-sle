<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="sle_update_finish.xml" version="5.0" xml:id="cha-upgrade-finish">
 <title>Concluindo o upgrade</title>
 <info>
  <abstract>
   <para>
    Após o upgrade, você precisará executar algumas tarefas adicionais. O capítulo a seguir orientará você durante as etapas.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 
 <sect1 xml:id="sec-upgrade-postupgrade-checks">
  <title>Verificações pós-upgrade</title>
  <itemizedlist>
   <listitem>
    <para>
     Verifique se há quaisquer <quote>pacotes órfãos</quote>. Durante um procedimento de upgrade, os pacotes podem ser renomeados, removidos, fundidos ou divididos. Como resultado, alguns pacotes podem se tornar órfãos e perder o suporte. Os pacotes órfãos não são removidos automaticamente. O comando a seguir fornece uma lista deles:
    </para>
<screen><prompt>&gt; </prompt><command>zypper packages --orphaned --unneeded</command></screen>
    <para>
     Use a lista para determinar quais pacotes ainda são necessários e quais podem ser removidos com segurança.
    </para>
   </listitem>
   <listitem>
    <para>
     Verifique se há arquivos <filename>*.rpmnew</filename> e <filename>*.rpmsave</filename>, examine o conteúdo deles e faça a possível fusão das mudanças desejadas. Quando um upgrade inclui mudanças em um arquivo de configuração padrão, em vez de sobregravar esse arquivo, o pacote cria um desses tipos de arquivo. O <filename>*.rpmnew</filename> contém a nova configuração padrão e mantém seu arquivo original inalterado, já o <filename>*.rpmsave</filename> é uma cópia do seu arquivo original que foi substituído pelo novo arquivo padrão.
    </para>
    <para>
     Você não precisa pesquisar todo o sistema de arquivos para localizar os arquivos <filename>*.rpmnew</filename> e <filename>*.rpmsave</filename>, os mais importantes são armazenados no diretório <filename>/etc</filename>. Use o seguinte comando para listá-los:
    </para>
<screen><prompt>&gt; </prompt><command>find /etc/ -name "*.rpmnew" -o -name "*.rpmsave"</command></screen>
   </listitem>
  </itemizedlist>
 </sect1>

 
 <sect1 xml:id="sec-upgrade-finish-python3">
  <title>Habilitar o módulo <literal>Python 3</literal></title>
  <para>
   Por padrão, o <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 15 usa o Python 3.6. O Python 3.9 foi adicionado ao <phrase role="productname"><phrase os="sles">SLES</phrase></phrase> 15 SP3 como uma alternativa mais recente. Essa versão não é mais suportada a partir do <phrase role="productname"><phrase os="sles">SLES</phrase></phrase> 15 SP4. Em vez disso, versões recentes do Python com atualizações e correções de segurança importantes estão disponíveis no módulo <literal>Python 3</literal>.
  </para>
  <para>
   Se você instalou o Python 3.9 no <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 15 SP3, habilite o módulo <literal>Python 3</literal> por meio do comando:
  </para>
<screen><prompt>&gt; </prompt><command>sudo</command> <command>SUSEConnect -p sle-module-python3/15.4/<replaceable>x86_64</replaceable></command>&#x002E;</screen>
  <para>
   Se preferir, retorne à versão padrão do Python removendo 3.9 por meio do comando <command>zypper remove -u python39</command>.
  </para>
 </sect1>

 <sect1 xml:id="sec-upgrade-finish-xfs4">
  <title>Reformatar dispositivos XFS v4</title>
  <para>
   OO <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> suporta o <quote>formato em disco</quote> (v5) do sistema de arquivos XFS. As principais vantagens desse formato são os checksums automáticos de todos os metadados do XFS, suporte a tipos de arquivos e suporte a um número maior de listas de controles de acesso para um arquivo.
  </para>
  <para>
   Observe que esse formato não é suportado pelos kernels do SUSE Linux Enterprise anteriores à versão 3.12, pelo <literal>xfsprogs</literal> anteriores à versão 3.2.0 e pelas versões do GRUB 2 lançadas antes do SUSE Linux Enterprise 12.
  </para>
  <important>
   <title>A V4 foi descontinuada</title>
   <para>
    O XFS está descontinuando os sistemas de arquivos com o formato V4. Esse formato de sistema de arquivos foi criado pelo comando:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkfs.xfs -m crc=0 <replaceable>DEVICE</replaceable></screen>
   <para>
    O formato era usado no SLE 11 e em versões mais antigas e, atualmente, cria uma mensagem de aviso pelo <command>dmesg</command>:
   </para>
<screen>Deprecated V4 format (crc=0) will not be supported after September 2030</screen>
   <para>
    Se você vir a mensagem acima na saída do comando <command>dmesg</command>, é recomendável atualizar o sistema de arquivos para o formato V5:
   </para>
   <procedure>
    <step>
     <para>
      Faça backup de seus dados em outro dispositivo.
     </para>
    </step>
    <step>
     <para>
      Crie o sistema de arquivos no dispositivo.
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkfs.xfs -m crc=1 <replaceable>DEVICE</replaceable></screen>
    </step>
    <step>
     <para>
      Restaure os dados do backup no dispositivo atualizado.
     </para>
    </step>
   </procedure>
  </important>
 </sect1>
</chapter>
