<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_sw_repo.xml" version="5.0" xml:id="sec-yast-software-instsource">
 <title>Gestion des services et des dépôts de logiciels</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>oui</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  Pour installer un logiciel tiers, ajoutez des dépôts de logiciels à votre système. Par défaut, les dépôts de produit tels que le DVD de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP3</phrase></phrase> et le dépôt de mise à jour correspondant, sont automatiquement configurés une fois le système enregistré.<phrase os="sles;sled"> Pour plus d'informations sur l'enregistrement,
reportez-vous à la <xref linkend="sec-yast-install-scc-registration"/> ou au <xref linkend="sec-update-registersystem"/></phrase>. En fonction du produit initialement sélectionné, un autre dépôt contenant des traductions, des dictionnaires, etc. peut également être configuré.
 </para>

 <para>
  Pour gérer les dépôts, lancez YaST et sélectionnez <menuchoice>
  <guimenu>Logiciel</guimenu> <guimenu>Dépôts de logiciels</guimenu>
  </menuchoice>. La boîte de dialogue <guimenu>Dépôts de logiciels configurés</guimenu> s'ouvre. Vous pouvez gérer ici les abonnements aux <guimenu>services</guimenu> en modifiant la <guimenu>vue</guimenu> dans le coin droit de la boîte de dialogue et en la définissant sur <guimenu>Tous les services</guimenu>. Dans ce contexte, un service est un <guimenu>service d'index de dépôts</guimenu> (RIS - Repository Index Service) qui peut contenir un ou plusieurs dépôts de logiciels. Un tel service peut être modifié de façon dynamique par son administrateur ou son fournisseur.
 </para>

 <para>
  Chaque dépôt fournit des fichiers décrivant le contenu du dépôt (noms des paquetage, versions, etc.). Ces fichiers de description du dépôt sont téléchargés dans un cache local utilisé par YaST. Pour garantir leur intégrité, les dépôts de logiciels peuvent être signés avec la clé GPG du mainteneur des dépôts. À chaque fois que vous ajoutez un nouveau dépôt, YaST vous propose d'importer sa clé. 
 </para>

 <warning>
  <title>approbation des sources de logiciels externes</title>
  <para>
   Avant d'ajouter des dépôts de logiciels externes à votre liste de dépôts, assurez-vous qu'ils sont approuvés. SUSE n'est pas responsable en cas d'éventuels problèmes résultant de l'installation de logiciels à partir de dépôts tiers.
  </para>
 </warning>

 <sect2 xml:id="sec-yast-software-instsource-add">
  <title>Ajout de dépôts de logiciels</title>
  <para>
   Vous pouvez ajouter des dépôts à partir d'un DVD/CD, d'une clé USB à mémoire flash, d'un répertoire local, d'une image ISO ou d'une source réseau.
  </para>
  <para>
   Pour ajouter des dépôts depuis la boîte de dialogue <guimenu>Dépôts de logiciels configurés</guimenu> dans YaST, procédez comme suit :
  </para>
  <procedure>
   <step>
    <para>
     Cliquez sur <guimenu>Ajouter</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez l'une des options de la boîte de dialogue :
    </para>
    <figure xml:id="fig-y2-sw-repo-new">
     <title>Ajout d'un dépôt de logiciels</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_addon_new.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_addon_new.png" width="65%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Pour analyser le réseau à la recherche des serveurs d'installation qui annoncent leurs services via SLP, sélectionnez <guimenu>Analyser avec SLP</guimenu> et cliquez ensuite sur <guimenu>Suivant</guimenu>.
      </para>
     </listitem>
     <listitem>
      <para>
       Pour ajouter un dépôt à partir d'un support amovible, sélectionnez l'option appropriée et insérez le support ou connectez le périphérique USB à la machine. Cliquez sur <guimenu>Suivant</guimenu> pour démarrer l'installation.
      </para>
     </listitem>
     <listitem>
      <para>
       Pour la majorité des dépôts, vous êtes invité à indiquer le chemin d'accès (ou URL) au support après avoir sélectionné l'option appropriée et cliqué sur <guimenu>Suivant</guimenu>. Vous n'êtes pas obligé d'indiquer un <guimenu>Nom de dépôt</guimenu>. Si aucun nom n'est renseigné, YaST utilise l'URL ou le nom du produit.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     L'option <guimenu>Télécharger les fichiers de description du dépôt</guimenu> est activée par défaut. Si vous désactivez cette option, YaST téléchargera automatiquement les fichiers ultérieurement, si cela s'avère nécessaire.
    </para>
   </step>
   <step>
    <para>
     En fonction du dépôt que vous avez ajouté, vous pouvez être invité à importer la clé GPG de l'espace de stockage ou à accepter une licence.
    </para>
    <para>
     Une fois les messages confirmés, YaST télécharge et analyse les métadonnées. Le logiciel ajoute alors le dépôt à la liste des <guimenu>Dépôts configurés</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Au besoin, définissez les <guimenu>Propriétés</guimenu> du dépôt en suivant la procédure décrite à la <xref linkend="sec-yast-software-instsource-manage"/>.
    </para>
   </step>
   <step>
    <para>
     Cliquez sur <guimenu>OK</guimenu> pour confirmer vos modifications et fermer la boîte de dialogue de configuration.
    </para>
   </step>
   <step>
    <para>
     Une fois le dépôt ajouté, le gestionnaire de logiciels démarre et vous pouvez installer des paquetages à partir de cette source. Pour plus d'informations, reportez-vous au <xref linkend="cha-yast-software"/>.
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-yast-software-instsource-manage">
  <title>Gestion des propriétés des dépôts</title>
  <para>
   L'aperçu <guimenu>Dépôts de logiciels configurés</guimenu> des <guimenu>Dépôts de logiciels</guimenu> vous permet de modifier les propriétés des dépôts suivantes :
  </para>
  <variablelist>
   <varlistentry>
    <term>État</term>
    <listitem>
     <para>
      L'état du dépôt peut être <guimenu>Activé</guimenu> ou <guimenu>Désactivé</guimenu>. Les paquetages que vous pouvez installer ne proviennent que des dépôts activés. Pour désactiver temporairement un dépôt, sélectionnez-le et désélectionnez l'option <guimenu>Activer</guimenu>. Vous pouvez également double-cliquer sur le nom d'un dépôt pour changer son état. Pour supprimer totalement un dépôt, cliquez sur <guimenu>Supprimer</guimenu>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Rafraîchir</term>
    <listitem>
     <para>
      Lors du rafraîchissement d'un dépôt, la description de son contenu (noms des paquetages, versions, etc.) est téléchargée dans un cache local utilisé par YaST. Il suffit d'effectuer cette manipulation une fois pour les dépôts statiques, comme les CD ou les DVD, alors que les dépôts dont le contenu est souvent modifié doivent être rafraîchis fréquemment. La façon la plus simple de conserver le cache d'un dépôt à jour consiste à sélectionner <guimenu>Rafraîchir automatiquement</guimenu>. Pour exécuter un rafraîchissement manuel, cliquez sur <guimenu>Rafraîchir</guimenu>, puis sélectionnez l'une des options.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>Conserver les paquetages téléchargés</guimenu>
    </term>
    <listitem>
     <para>
      Les paquetages des dépôts distants sont téléchargés avant d'être installés. Ils sont supprimés par défaut en cas d'installation réussie. L'activation de l'option <guimenu>Conserver les paquetages téléchargés</guimenu> permet d'empêcher la suppression des paquetages téléchargés. L'emplacement de téléchargement est configuré dans <filename>/etc/zypp/zypp.conf</filename>. Il s'agit par défaut du dossier <filename>/var/cache/zypp/packages</filename>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>Priorité</guimenu>
    </term>
    <listitem>
     <para>
      La <guimenu>priorité</guimenu> d'un dépôt est une valeur comprise entre <literal>1</literal> et <literal>200</literal>, avec <literal>1</literal> correspondant à la priorité la plus élevée et <literal>200</literal>, la plus faible. Tout nouveau dépôt ajouté avec YaST est associé par défaut à une priorité de <literal>99</literal>. Si vous n'accordez pas d'importance à la valeur de la priorité d'un dépôt spécifique, vous pouvez également la définir sur <literal>0</literal> pour lui attribuer la priorité par défaut (<literal>99</literal>). Si un paquetage est disponible dans plusieurs dépôts, le dépôt ayant la plus haute priorité est prioritaire. Ceci est utile pour éviter de télécharger des paquetages inutiles depuis Internet en attribuant à un dépôt local (un DVD par exemple) une priorité plus élevée.
     </para>
     <important>
      <title>priorité par rapport à la version</title>
      <para>
       Le dépôt ayant la plus haute priorité est prioritaire dans tous les cas. Ainsi, assurez-vous que le dépôt de mise à jour a toujours la priorité la plus élevée, faute de quoi vous risquez d'installer une version obsolète qui ne sera pas mise à jour avant la prochaine mise à jour en ligne.
      </para>
     </important>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Nom et URL</term>
    <listitem>
     <para>
      Pour modifier le nom ou l'URL d'un dépôt, sélectionnez-le dans la liste, puis cliquez sur <guimenu>Modifier</guimenu>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec-yast-software-repo-gpg-keys">
  <title>Gestion des clés de dépôts</title>
  <para>
   Pour garantir leur intégrité, les dépôts de logiciels peuvent être signés avec la clé GPG du mainteneur des dépôts. À chaque fois que vous ajoutez un nouveau dépôt, YaST vous propose d'importer sa clé. Vérifiez-la comme toutes les autres clés GPG et assurez-vous qu'elle ne change pas. Si vous détectez un changement de clé, il est possible que le dépôt soit à l'origine du problème. Désactivez le dépôt en tant que source d'installation jusqu'à ce que la cause du changement de clé soit identifiée.
  </para>
  <para>
   Pour gérer toutes les clés importées, cliquez sur <guimenu>Clés GPG</guimenu> dans la boîte de dialogue <guimenu>Dépôts de logiciels configurés. </guimenu> Sélectionnez une entrée pour afficher les principales priorités en bas de la fenêtre. Cliquez sur <guimenu>Ajouter</guimenu>, <guimenu>Modifier</guimenu> ou <guimenu>Supprimer</guimenu> pour ajouter, modifier ou supprimer des clés.
  </para>
 </sect2>
</sect1>
