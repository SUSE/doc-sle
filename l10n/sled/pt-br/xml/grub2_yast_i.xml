<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="grub2_yast_i.xml" version="5.0" xml:id="sec-grub2-yast2-config">
 <title>Configurando o carregador de boot com o YaST</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  O modo mais fácil de configurar opções gerais do carregador de boot no sistema <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> é usar o módulo do YaST. No <guimenu>Centro de Controle do YaST</guimenu>, selecione <menuchoice> <guimenu>Sistema</guimenu> <guimenu>Carregador de Boot</guimenu></menuchoice>. O módulo mostra a configuração do carregador de boot atual do sistema e permite fazer mudanças.
 </para>

 <para>
  Use a guia <guimenu>Opções de Código de Boot</guimenu> para ver e mudar configurações relativas a tipo, local e definições avançadas do carregador. Você pode especificar se é para usar o GRUB 2 no modo padrão ou EFI.
 </para>

 <important>
  <title>Sistemas EFI exigem GRUB2-EFI</title>
  <para>
   Se você tem um sistema EFI, é possível instalar apenas o GRUB2-EFI, senão o sistema não poderá mais ser inicializado.
  </para>
 </important>

 <important>
  <title>Reinstalando o carregador de boot</title>
  <para>
   Para reinstalar o carregador de boot, mude uma configuração no YaST e, em seguida, reverta-a. Por exemplo, para reinstalar o GRUB2-EFI, selecione <guimenu>GRUB2</guimenu> primeiro e, em seguida, alterne imediatamente para <guimenu>GRUB2-EFI</guimenu>.
  </para>
  <para>
   Do contrário, o carregador de boot poderá ser apenas parcialmente reinstalado.
  </para>
 </important>

 <note>
  <title>Carregador de boot personalizado</title>
  <para>
   Para usar um carregador de boot diferente dos que estão na lista, selecione <guimenu>Não Instalar Nenhum Carregador de Boot</guimenu>. Leia a documentação do seu carregador de boot cuidadosamente antes de escolher esta opção.
  </para>
 </note>

 <sect2 xml:id="sec-grub2-yast2-location">
  <title>Local do carregador de boot e opções de código de boot</title>

  <para>
   O local padrão do carregador de boot depende da configuração da partição e é o MBR (Master Boot Record – Registro Mestre de Boot) ou o setor de boot da partição <filename>/</filename>. Para modificar o local do carregador de boot, siga estas etapas:
  </para>
  <procedure xml:id="pro-sec-grub2-yast2-location">
   <title>Mudando o local do carregador de boot</title>
   <step>
    <para>
     Selecione a guia <guimenu>Opções de Código de Boot</guimenu> e escolha uma das seguintes opções para <guimenu>Localização do Carregador de Boot</guimenu>:
    </para>
    <variablelist>
     <varlistentry>
      <term><guimenu>Boot do Master Boot Record</guimenu>
      </term>
      <listitem>
       <para>
        Esse procedimento instala o carregador de boot no MBR do disco que contém o diretório <filename>/boot</filename>. Normalmente, esse será o disco montado em <filename>/</filename>, mas se <filename>/boot</filename> estiver montado em uma partição separada em um disco diferente, o MBR desse disco será usado.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Boot da partição raiz</guimenu>
      </term>
      <listitem>
       <para>
        Instala o carregador de boot no setor de boot da partição <filename>/</filename>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Partição Raiz Personalizada</guimenu>
      </term>
      <listitem>
       <para>
        Use esta opção para especificar a localização do carregador de boot manualmente.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     Clique em <guimenu>OK</guimenu> para aplicar as mudanças.
    </para>
   </step>
   </procedure>
   <figure xml:id="fig-grub2-yast-boot-code-options0">
    <title>Opções de código de boot</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_boot_code.png" width="75%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_boot_code.png" width="75%"/>
     </imageobject>
    </mediaobject>
  </figure>
  <para>
   A guia <guimenu>Opções de Código de Boot</guimenu> inclui as seguintes opções adicionais:
  </para>
   <variablelist>
    <varlistentry>
     <term><guimenu>Definir Flag ativo na Tabela de Partição para Partição de Boot</guimenu>
     </term>
     <listitem>
      <para>
       Ativa a partição que contém o diretório <filename>/boot</filename>. Para os sistemas POWER, ela ativa a partição PReP. Use essa opção nos sistemas com BIOS antigo e/ou sistemas operacionais legados, porque eles podem não ser inicializados de uma partição não ativa. É seguro deixar essa opção ativa.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Gravar Código de Boot genérico no MBR</guimenu>
     </term>
     <listitem>
      <para>
       Se o MBR incluir um código personalizado “não GRUB”, essa opção o substituirá por um código genérico e independente do sistema operacional. Se você desativar essa opção, o sistema poderá se tornar não inicializável.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Habilitar Suporte a Boot Confiável</guimenu>
     </term>
     <listitem>
      <para>
       Inicia o TrustedGRUB2, que suporta a funcionalidade de computação confiável (Trusted Platform Module, TPM). Para obter mais informações, consulte <link xlink:href="https://github.com/Sirrix-AG/TrustedGRUB2"/>.
      </para>
       </listitem>
    </varlistentry>    
    </variablelist>   
      <para>
      A seção <guimenu>Flag de MBR protetor</guimenu> inclui as seguintes opções:
      </para>
    <variablelist>
    <varlistentry>
     <term><guimenu>set</guimenu>
     </term>
     <listitem>
      <para>
       Essa opção é apropriada para inicialização do BIOS legado tradicional.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>remove</guimenu>
     </term>
     <listitem>
      <para>
       Essa opção é apropriada para inicialização da UEFI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>do not change</guimenu>
     </term>
     <listitem>
      <para>
       Geralmente, essa é a melhor opção se você já tem um sistema em funcionamento.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
    <para>
       Na maioria dos casos, o YaST usa como padrão a opção apropriada.
    </para>         
       
 </sect2>
 <sect2 xml:id="sec-grub2-yast2-config-order">
  <title>Ajustando a ordem dos discos</title>
  <para>
   Se o computador tiver mais do que um disco rígido, você poderá especificar a sequência de boot dos discos. O primeiro disco na lista é onde o GRUB 2 será instalado no caso da inicialização do MBR. Ele é o disco no qual o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> é instalado por padrão. O restante da lista é uma dica para o mapeador de dispositivos do GRUB 2 (consulte a <xref linkend="sec-grub2-map"/>).
  </para>
  <warning>
   <title>Sistema não inicializável</title>
   <para>
    Normalmente, o valor padrão é válido para quase todas as implantações. Se você mudar a ordem de boot dos discos incorretamente, o sistema poderá se tornar não inicializável na próxima reinicialização. Por exemplo, se o primeiro disco na lista não fizer parte da ordem de boot do BIOS e os outros discos na lista tiverem MBRs vazios.
   </para>
  </warning>
  <procedure xml:id="pro-sec-grub2-yast2-config-order">
   <title>Definindo a ordem dos discos</title>
   <step>
    <para>
     Abra a guia <guimenu>Opções de Código de Boot</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Clique em <guimenu>Editar Ordem de Boot do Disco</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Se mais de um disco for listado, selecione um disco e clique em <guimenu>Para cima</guimenu> ou <guimenu>Para baixo</guimenu> para reordenar os discos exibidos.
    </para>
   </step>
   <step>
    <para>
     Clique em <guimenu>OK</guimenu> duas vezes para gravar as mudanças.
    </para>
   </step>
  </procedure>
 </sect2>
 <sect2 xml:id="sec-grub2-yast2-config-advanced">
  <title>Configurando as opções avançadas</title>
  <para>
   É possível configurar as opções de boot avançadas na guia <guimenu>Opções do Carregador de Boot</guimenu>.
  </para>
  <sect3 xml:id="sec-grub2-yast2-config-advanced-boot-loader">
   <title>Guia <guimenu>Opções do Carregador de Boot</guimenu></title>
   <figure xml:id="fig-grub2-yast-bootloader-options">
    <title>Opções do carregador de boot</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_options.png" width="75%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_options.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term><guimenu>Tempo de espera do carregador de boot</guimenu>
     </term>
     <listitem>
      <para>
       Mude o valor de <guimenu>Tempo de Espera em Segundos</guimenu> digitando um novo valor e clicando na tecla de seta apropriada com o mouse.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Investigar OS Estrangeiro</guimenu>
     </term>
     <listitem>
      <para>
       Quando selecionada, o carregador de boot procura por outros sistemas, como Windows ou outras instalações do Linux.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Ocultar Menu na Inicialização</guimenu>
     </term>
     <listitem>
      <para>
       Oculta o menu de boot e a entrada padrão.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Ajustando a entrada de boot padrão</guimenu>
     </term>
     <listitem>
      <para>
       Selecione a entrada desejada na lista <quote>Seção de Boot Padrão. </quote> Observe que o sinal de <quote>&gt;</quote> no nome da entrada de boot delimita a seção de boot e sua subseção.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-grub2-yast2-boot-password">
     <term><guimenu>Proteger Carregador de Boot com Senha</guimenu>
     </term>
     <listitem>
      <para>
       Protege o carregador de boot e o sistema com uma senha adicional. Para obter detalhes sobre a configuração manual, consulte a <xref linkend="sec-grub2-password"/>. Se essa opção for ativada, a senha de boot será necessária em cada inicialização, o que significa que o sistema não será inicializado automaticamente. No entanto, se você prefere o comportamento do GRUB 1, habilite também <guimenu>Proteger apenas modificação de entrada</guimenu>. Com essa configuração, qualquer pessoa tem permissão para selecionar uma entrada de boot e inicializar o sistema, enquanto a senha para o usuário <systemitem class="username">root</systemitem> do GRUB 2 apenas é necessária para modificar as entradas de boot.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
  <sect3 xml:id="sec-grub2-yast2-config-advanced-kernel-parameters">
   <title>Guia <guimenu>Parâmetros de Kernel</guimenu></title>
   
   <figure xml:id="fig-grub2-yast-kernel-parameters">
    <title>Parâmetros kernel</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_kernel_parameters.png" width="75%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_kernel_parameters.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term><guimenu>Parâmetro opcional da linha de comando do kernel</guimenu>
     </term>
     <listitem>
      <para>
       Especifique parâmetros opcionais do kernel aqui para habilitar/desabilitar recursos do sistema, adicionar drivers etc 
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-grub2-yast2-cpu-mitigations">
     
     <term><guimenu>Mitigações da CPU</guimenu></term>
     <listitem>
      <para>
       A SUSE lançou um ou mais parâmetros de linha de comando de boot do kernel para todas as mitigações de software que foram implantadas com a finalidade de evitar ataques de temporização na CPU. Alguns deles podem resultar em perda de desempenho. Escolha uma das seguintes opções para encontrar um equilíbrio entre segurança e desempenho, dependendo da sua configuração:
      </para>
     <formalpara>
       <title><guimenu>Automático</guimenu></title>
        <para>
   Habilita todas as mitigações necessárias para o modelo de CPU, mas não protege contra ataques de thread entre CPUs. Essa configuração pode afetar o desempenho a um certo nível, dependendo da carga de trabalho.
  </para>
       </formalpara>
       <formalpara>
       <title><guimenu>Auto + Sem SMT</guimenu></title>
        <para>
    Fornece o conjunto completo de mitigações de segurança disponíveis. Habilita todas as mitigações necessárias para o modelo de CPU. Além disso, ela desabilita o Multithreading Simultâneo (SMT, Simultaneous Multithreading) para evitar ataques de temporização em vários threads de CPU. Essa configuração pode prejudicar o desempenho, dependendo da carga de trabalho.
    </para>
       </formalpara>
       <formalpara>
       <title><guimenu>Desativado</guimenu></title>
         <para>
    Desabilita todas as mitigações. Os ataques de temporização contra a CPU são possíveis, dependendo do modelo dela. Essa configuração não afeta o desempenho.
   </para>
      </formalpara>
       <formalpara>
       <title><guimenu>Manual</guimenu></title>
        <para>
    Não define nenhum nível de mitigação. Especifique suas mitigações da CPU manualmente usando as opções de linha de comando do kernel.
   </para>
       </formalpara>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Usar console gráfico</guimenu>
     </term>
     <listitem>
      <para>
       Quando marcada, o menu de boot aparece na splash screen gráfica, e não em modo de texto. Por padrão, a resolução da tela de boot é definida automaticamente, mas você pode defini-la manualmente em <guimenu>Resolução do console</guimenu>. O arquivo de definição de tema gráfico pode ser especificado com o seletor de arquivos <guimenu>Tema do console</guimenu>. Mude essa opção apenas se você deseja aplicar seu próprio tema personalizado.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Usar o console serial</guimenu>
     </term>
     <listitem>
      <para>
       Se a sua máquina é controlada por um console serial, ative essa opção e especifique a porta COM que será usada e em qual velocidade. Consulte <command>info grub</command> ou o site <link xlink:href="http://www.gnu.org/software/grub/manual/grub.html#Serial-terminal"/>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
 </sect2>
</sect1>
