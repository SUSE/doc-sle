<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="net_slp.xml" id="cha.slp">
 <title>SLP</title><indexterm> <primary>Netzwerke</primary> <secondary>SLP</secondary> </indexterm> <indexterm> <primary>Service Location Protocol</primary> <see>SLP</see> </indexterm> <indexterm> <primary>SLP</primary> </indexterm> <indexterm> <primary>Protokolle</primary> <secondary>SLP</secondary> </indexterm>
 <abstract>
  <para>
   Um einen Netzwerkclient konfigurieren zu können, benötigen Sie eingehende Kenntnisse zu den Diensten, die über das Netzwerk bereitgestellt werden (z. B. Drucken oder LDAP). Als Erleichterung der Konfiguration dieser Dienste auf einem Netzwerkclient wurde das SLP (<quote>service location protocol</quote>) entwickelt. SLP teilt allen Clients im lokalen Netzwerk die Verfügbarkeit und die Konfigurationsdaten ausgewählter Dienste mit. Anwendungen mit SLP-Unterstützung können diese Informationen verarbeiten und damit automatisch konfiguriert werden.
  </para>
 </abstract>
 <para>
  <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase> unterstützt die Installation von per SLP bekannt gegebenen Installationsquellen und beinhaltet viele Systemdienste mit integrierter Unterstützung für SLP. Nutzen Sie SLP, um vernetzten Clients zentrale Funktionen wie Installationsserver, YOU-Server, Dateiserver oder Druckserver auf Ihrem System zur Verfügung zu stellen. Dienste mit SLP-Unterstützung sind beispielsweise login, ntp, openldap2, postfix, rpasswd, rsyncd, saned, sshd (über fish), vnc und ypserv.
 </para>
 <para>
  Alle Pakete, die zur Verwendung von SLP-Diensten auf einem Netzwerkclient erforderlich sind, werden standardmäßig installiert. Falls Sie jedoch Dienste via SLP <emphasis>bereitstellen</emphasis> möchten, müssen Sie sicherstellen, dass auch das Paket <systemitem>openslp-server</systemitem> installiert wird.
 </para>
 <sect1 id="sec.slp.sl.fend">
  <title>Das SLP-Frontend <command>slptool</command></title>

  <para>
   Mit dem Kommandozeilenwerkzeug <command>slptool</command> werden SLP-Dienste abgefragt und registriert. Die Abfragefunktionen sind bei der Diagnose von Nutzen. Im Folgenden werden die wichtigsten Subkommandos von <command>slptool</command> aufgeführt. Mit <command>slptool</command> <option>--help</option> werden alle verfügbaren Optionen und Funktionen aufgelistet. 
  </para>

  <variablelist>
   <varlistentry>
    <term>findsrvtypes</term>
    <listitem>
     <para>
      Zeigt eine Liste aller Dienste an, die im Netzwerk verfügbar sind.
     </para>
<screen><prompt role="user">tux &gt; </prompt> slptool findsrvtypes
service:install.suse:nfs
service:install.suse:ftp
service:install.suse:http
service:install.suse:smb
service:ssh
service:fish
service:YaST.installation.suse:vnc
service:smtp
service:domain
service:management-software.IBM:hardware-management-console
service:rsync
service:ntp
service:ypserv</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>findsrvs <replaceable>Diensttyp</replaceable>
    </term>
    <listitem>
     <para>
      Zeigt eine Liste aller Server an, die den gewünschten <replaceable>Diensttyp</replaceable> bereitstellen.
     </para>
<screen><prompt role="user">tux &gt; </prompt> slptool findsrvs service:ntp
service:ntp://ntp.example.com:123,57810
service:ntp://ntp2.example.com:123,57810</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
     findattrs <replaceable>Diensttyp</replaceable>//<replaceable>Host</replaceable>
    </term>
    <listitem>
     <para>
      Zeigt eine Liste der Attribute für den <replaceable>Diensttyp</replaceable> auf dem <replaceable>Host</replaceable> an.
     </para>
<screen><prompt role="user">tux &gt; </prompt> slptool findattrs service:ntp://ntp.example.com
(owner=tux),(email=tux@example.com)</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
     register <replaceable>Diensttyp</replaceable>//<replaceable>Host</replaceable>:<replaceable>Port</replaceable> "(<replaceable>Attribut=Wert</replaceable>),(<replaceable>Attribut=Wert</replaceable>)"
    </term>
    <listitem>
     <para>
      Registriert den <replaceable>Diensttyp</replaceable> auf dem <replaceable>Host</replaceable>, wobei optional eine Liste mit Attributen angegeben werden kann.
     </para>
<screen>slptool register service:ntp://ntp.example.com:57810 \
"(owner=tux),(email=tux@example.com)"</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
     deregister <replaceable>Diensttyp</replaceable>//<replaceable>Host</replaceable>
    </term>
    <listitem>
     <para>
      Hebt die Registrierung des <replaceable>Diensttyps</replaceable> auf dem <replaceable>Host</replaceable> auf.
     </para>
<screen>slptool deregister service:ntp://ntp.example.com</screen>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   Weitere Informationen erhalten Sie mit dem Kommando <command>slptool --help</command>.
  </para>
 </sect1>
 <sect1 id="sec.slp.sl.reg">
  <title>Bereitstellen von Diensten über SLP</title>

  <para>
   Zum Bereitstellen von SLP-Diensten muss der SLP-Daemon (<systemitem class="daemon">slpd</systemitem>) ausgeführt werden. Wie die meisten Systemdienste unter <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> wird der <systemitem class="daemon">slpd</systemitem>-Daemon über ein separates Startskript gesteuert. Nach der Installation ist der Daemon standardmäßig inaktiv. Zum Aktivieren für die aktuelle Sitzung führen Sie das Kommando <command>sudo systemctl start slpd.service</command> aus. Wenn <systemitem class="daemon">slpd</systemitem> beim Systemstart aktiviert werden soll, führen Sie das Kommando <command>sudo systemctl enable slpd.service</command> aus.
  </para>

  <para>
   Viele Anwendungen unter <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> verfügen durch die <literal>libslp</literal>-Bibliothek über eine integrierte SLP-Unterstützung. Falls ein Dienst ohne SLP-Unterstützung kompiliert wurde, können Sie ihn mit einer der folgenden Methoden per SLP verfügbar machen:
  </para>

  <variablelist>
   <varlistentry>
    <term>Statische Registrierung über <filename>/etc/slp.reg.d</filename>
    </term>
    <listitem>
     <para>
      Legen Sie für jeden neuen Dienst eine separate Registrierungsdatei an. Im folgenden Beispiel wird ein Scannerdienst registriert:
     </para>
<screen>## Register a saned service on this system
## en means english language
## 65535 disables the timeout, so the service registration does
## not need refreshes
service:scanner.sane://$HOSTNAME:6566,en,65535
watch-port-tcp=6566
description=SANE scanner daemon</screen>
     <para>
      Die wichtigste Zeile dieser Datei ist die <emphasis>Dienst-URL</emphasis>, die mit <literal>service:</literal> beginnt. Sie enthält den Diensttyp (<literal>scanner.sane</literal>) und die Adresse, unter der der Dienst auf dem Server verfügbar ist. <replaceable>$HOSTNAME</replaceable> wird automatisch durch den vollständigen Hostnamen ersetzt. Abgetrennt durch einen Doppelpunkt folgt nun der Name des TCP-Ports, auf dem der entsprechende Dienst gefunden werden kann. Geben Sie nun die Sprache an, in der der Dienst angekündigt werden soll, und die Gültigkeitsdauer der Registrierung in Sekunden. Diese Angaben müssen durch Kommas von der Dienst-URL getrennt werden. Wählen Sie für die Registrierungsdauer einen Wert zwischen <literal>0</literal> und <literal>65535</literal>. <literal>0</literal> verhindert die Registrierung. <literal>Mit </literal>65535 werden alle Einschränkungen aufgehoben.
     </para>
     <para>
      Die Registrierungsdatei enthält außerdem die beiden Variablen <systemitem>watch-port-tcp</systemitem> und <systemitem>description</systemitem>. <systemitem>watch-port-tcp</systemitem> koppelt die SLP-Dienstankündigung daran, ob der entsprechende Dienst aktiv ist, indem <systemitem class="daemon">slpd</systemitem> den Status des Diensts überprüft. Die zweite Variable enthält eine genauere Beschreibung des Diensts, die in den entsprechenden Browsern angezeigt wird.
     </para>
     <tip>
      <title>YaST und SLP</title>
      <para>
       Einige von YaST bereitgestellte Services, wie ein Installationsserver oder YOU-Server, führen diese Registrierung automatisch aus, wenn Sie SLP in den Modul-Dialogfeldern aktivieren. Dann erstellt YaST Registrierungsdateien für diese Dienste.
      </para>
     </tip>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Statische Registrierung über <filename>/etc/slp.reg</filename>
    </term>
    <listitem>
     <para>
      Der einzige Unterschied zwischen dieser Methode und der Prozedur mit <filename>/etc/slp.reg.d</filename> besteht darin, dass alle Dienste in einer zentralen Datei gruppiert sind.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Dynamische Registrierung über <command>slptool</command>
    </term>
    <listitem>
     <para>
      Wenn ein Dienst dynamisch ohne Verwendung von Konfigurationsdateien registriert werden soll, verwenden Sie das Kommandozeilenprogramm slptool. Dasselbe Programm kann auch die Registrierung eines bestehenden Dienstangebots aufheben, ohne <systemitem class="daemon">slpd</systemitem> neu zu starten. Weitere Informationen finden Sie in <xref linkend="sec.slp.sl.fend"/>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <sect2 id="sec.slp.sl.reg.install">
   <title>Einrichten eines SLP-Installationsservers</title>
   <para>
    Die Bereitstellung der Installationsdaten über SLP im Netzwerk erleichtert die Netzwerkinstallation deutlich, da die Installationsdaten (z. B. IP-Adresse des Servers oder Pfad zu den Installationsmedien) automatisch über eine SLP-Abfrage angefordert werden. Weitere Anweisungen finden Sie unter <xref linkend="sec.deployment.remoteinst.instserver"/>. 
   </para>
  </sect2>
 </sect1>
 <sect1 id="sec.slp.info">
  <title>Weiterführende Informationen</title>

  <variablelist>
   <varlistentry>
    <term>RFC 2608, 2609, 2610</term>
    <listitem>
     <para>
      RFC 2608 befasst sich mit der Definition von SLP im Allgemeinen. RFC 2609 geht näher auf die Syntax der verwendeten Dienst-URLs ein und RFC 2610 thematisiert DHCP über SLP.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><ulink url="http://www.openslp.org"/>
    </term>
    <listitem>
     <para>
      Die Homepage des OpenSLP-Projekts.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>/usr/share/doc/packages/openslp</filename>
    </term>
    <listitem>
     <para>
      Dieses Verzeichnis enthält die Dokumentation für SLP, die im Lieferumfang des <systemitem>openslp-server</systemitem>-Pakets enthalten ist, einschließlich einer <filename>README.SuSE</filename>-Datei mit den <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-Details, den RFCs und zwei einführenden HTML-Dokumenten. Programmierer, die an den SLP-Funktionen interessiert sind, finden weitere Informationen im <emphasis>Programmierhandbuch</emphasis>, das im Paket <systemitem class="resource">openslp-devel</systemitem> im SUSE-SDK (Software Development Kit) enthalten ist.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
