<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="sle_update_finish.xml" version="5.0" xml:id="cha-upgrade-finish">
 <title>Das Upgrade abschließen</title>
 <info>
  <abstract>
   <para>
    Nach dem Upgrade müssen Sie einige zusätzliche Aufgaben durchführen. Im folgenden Kapitel werden Sie durch diese Schritte geführt.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 
 <sect1 xml:id="sec-upgrade-postupgrade-checks">
  <title>Prüfungen nach dem Upgrade</title>
  <itemizedlist>
   <listitem>
    <para>
     Prüfen Sie, ob <quote>verwaiste Pakete</quote> vorhanden sind. Während eines Upgrade-Vorgangs können Pakete umbenannt, entfernt, zusammengeführt oder aufgeteilt werden. Dies kann dazu führen, dass bestimmte Pakete verwaist sind und nicht mehr unterstützt werden. Verwaiste Pakete werden nicht automatisch entfernt. Mit dem folgenden Kommando erhalten Sie eine entsprechende Liste:
    </para>
<screen><prompt>&gt; </prompt><command>zypper packages --orphaned --unneeded</command></screen>
    <para>
     Ermitteln Sie anhand der Liste, welche Pakete noch benötigt werden und welche Pakete sicher entfernt werden können.
    </para>
   </listitem>
   <listitem>
    <para>
     Suchen Sie nach <filename>*.rpmnew</filename> und <filename>*.rpmsave</filename>, untersuchen Sie deren Inhalt und führen Sie gewünschte Änderungen zusammen, falls möglich. Wenn ein Upgrade Änderungen an einer Standardkonfigurationsdatei umfasst, erstellt das Paket einen dieser Dateitypen statt die Konfigurationsdatei zu überschreiben. Die Datei <filename>*.rpmnew</filename> enthält die neue Standardkonfiguration und lässt Ihre Originaldatei unverändert. <filename>*.rpmsave</filename> ist eine Kopie der ursprünglichen Konfiguration, die durch die neue Standarddatei ersetzt wurde.
    </para>
    <para>
     Sie brauchen nicht das gesamte Dateisystem nach <filename>*.rpmnew</filename>- und <filename>*.rpmsave</filename>-Dateien zu durchsuchen. Die wichtigsten Dateien sind im Verzeichnis <filename>/etc</filename> gespeichert. Listen Sie sie mit folgendem Kommando auf:
    </para>
<screen><prompt>&gt; </prompt><command>find /etc/ -name "*.rpmnew" -o -name "*.rpmsave"</command></screen>
   </listitem>
  </itemizedlist>
 </sect1>

 
 <sect1 xml:id="sec-upgrade-finish-python3">
  <title>Das <literal>Python 3</literal>-Modul aktivieren</title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 15 verwendet standardmäßig Python 3.6. Python 3.9 wurde in <phrase role="productname"><phrase os="sles">SLES</phrase></phrase> 15 SP3 als neuere Alternative hinzugefügt. Diese Version wird ab <phrase role="productname"><phrase os="sles">SLES</phrase></phrase> 15 SP4 nicht mehr unterstützt. Stattdessen sind aktuelle Python-Versionen mit wichtigen Updates und Sicherheits-Fixes über das <literal>Python 3</literal>-Modul verfügbar.
  </para>
  <para>
   Wenn Sie Python 3.9 unter <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 15 SP3 installiert haben, aktivieren Sie das <literal>Python 3</literal>-Modul mit:
  </para>
<screen><prompt>&gt; </prompt><command>sudo</command> <command>SUSEConnect -p sle-module-python3/15.4/<replaceable>x86_64</replaceable></command>&#x002E;</screen>
  <para>
   Alternativ können Sie zur Standard-Python-Version zurückkehren, indem Sie 3.9 bei <command>zypper remove -u python39</command> entfernen.
  </para>
 </sect1>

 <sect1 xml:id="sec-upgrade-finish-xfs4">
  <title>XFS v4-Geräte neu formatieren</title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> unterstützt das <quote>On-Disk-Format</quote> (v5) des XFS-Dateisystems. Die wichtigsten Vorteile dieses Formats sind automatische Prüfsummen aller XFS-Metadaten, die Unterstützung von Dateitypen sowie einer größeren Anzahl von Zugriffskontrolllisten für eine Datei.
  </para>
  <para>
   Dieses Format von SUSE Linux Enterprise-Kerneln, die älter als Version 3.12 sind, von <literal>xfsprogs</literal>, die älter als Version 3.2.0 sind, und von GRUB 2-Versionen, die vor SUSE Linux Enterprise 12 veröffentlicht wurden, werden nicht unterstützt.
  </para>
  <important>
   <title>V4 wird außer Kraft gesetzt</title>
   <para>
    XFS setzt Dateisysteme mit dem V4-Format außer Kraft. Dieses Dateisystemformat wurde mit folgendem Befehl erstellt:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkfs.xfs -m crc=0 <replaceable>DEVICE</replaceable></screen>
   <para>
    Das Format wurde in SLE 11 und älteren Versionen verwendet und erzeugt derzeit eine Warnmeldung von <command>dmesg</command>:
   </para>
<screen>Deprecated V4 format (crc=0) will not be supported after September 2030</screen>
   <para>
    Wenn Sie die obige Meldung in der Ausgabe des <command>dmesg</command>-Befehls sehen, sollten Sie für Ihr Dateisystem eine Aktualisierung auf das V5-Format vornehmen:
   </para>
   <procedure>
    <step>
     <para>
      Sichern Sie Ihre Daten auf einem anderen Gerät.
     </para>
    </step>
    <step>
     <para>
      Erstellen Sie das Dateisystem auf dem Gerät.
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkfs.xfs -m crc=1 <replaceable>DEVICE</replaceable></screen>
    </step>
    <step>
     <para>
      Stellen Sie die Daten aus der Sicherung auf dem aktualisierten Gerät wieder her.
     </para>
    </step>
   </procedure>
  </important>
 </sect1>
</chapter>
