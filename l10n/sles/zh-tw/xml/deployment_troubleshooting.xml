<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_troubleshooting.xml" version="5.0" role="General" xml:id="cha-installation-troubleshooting">
 <title>疑難排解</title>
 <info>
  <abstract>
   <para>
    本章重點介紹您在安裝期間可能會遇到的一般性問題，並提供可行的解決方案或處理方式。
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>是</dm:translation>
  </dm:docmanager>
 </info>
 <sect1 xml:id="sec-installation-troubleshooting-checking-media">
  <title>檢查媒體</title>

  <para>
   若您在使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝媒體時遇到問題，請檢查安裝媒體的完整性。從該媒體開機，然後從開機功能表中選擇<menuchoice><guimenu>更多</guimenu> <guimenu>檢查安裝媒體</guimenu></menuchoice>。此時會將一個精簡系統開機，可讓您選擇要檢查的裝置。選取相關的裝置，然後按一下<guimenu>確定</guimenu>以確認執行檢查。
  </para>

  <para>
   在執行中的系統上，啟動 YaST 並選擇<menuchoice>
   <guimenu>軟體</guimenu> <guimenu> 媒體檢查</guimenu> </menuchoice>。插入媒體並按一下<guimenu>開始檢查</guimenu>。檢查可能需要數分鐘時間。
  </para>

  <para>
   如果在檢查期間偵測到錯誤，請勿使用此媒體進行安裝。例如，當您在 DVD 上自行燒錄媒體時，可能會出現媒體問題。以較低的速度 (4x) 燒錄媒體有助於避免出現問題。
  </para>
 </sect1>
 <sect1 xml:id="sec-installation-troubleshooting-dvd">
  <title>沒有可用的可開機磁碟機</title>

  <para>
   如果您的電腦無法從 USB 或 DVD 光碟機開機，可以採行幾種替代方案。如果 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 不支援您的磁碟機，您也可以採用這種做法。
  </para>

  <variablelist>
   <varlistentry>
    <term>使用外部 USB 隨身碟或 DVD 光碟機</term>
    <listitem>
     <para>
      Linux 支援市面上現有的大部分 USB 隨身碟或 DVD 光碟機。如果系統中沒有 USB 隨身碟或 DVD 光碟機，仍可使用透過 USB、FireWire 或 SCSI 連接的外部磁碟機將系統開機。如果您遇到問題，有時更新韌體可能會有幫助。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>透過 PXE 進行網路開機</term>
    <listitem>
     <para>
      如果機器沒有 USB 隨身碟和 DVD 光碟機，但提供可用的乙太網路連接，則您可以採用全網路式安裝。<phrase os="sles;sled">請參閱<xref linkend="sec-remote-installation-scenario-vncpxe"/>和<xref linkend="sec-remote-installation-scenario-sshpxe"/>以取得詳細資料。</phrase>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>USB 隨身碟</term>
    <listitem>
     <para>
      如果您的機器沒有 DVD 光碟機和網路連接，您可以使用快閃隨身碟。<phrase os="sles;sled">若需要詳細資料，請參閱:</phrase>
     </para>
     <itemizedlist os="sles;sled">
      <listitem>
       <para arch="x86_64">
        <xref linkend="sec-x86-media"/>
       </para>
      </listitem>
      <listitem os="sles">
       <para arch="aarch64">
        <xref linkend="sec-aarch64-media"/>
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="sec-installation-troubleshooting-bios">
  <title>從安裝媒體開機失敗</title>

  <para>
   機器無法開機安裝媒體的一個原因可能是 BIOS 中的開機順序設定不正確。在 BIOS 開機順序中，必須將 USB 隨身碟或 DVD 光碟機設為第一開機項目。否則機器會嘗試從其他媒體開機，一般會從硬碟開機。如需變更韌體開機順序的指導，可參閱主機板隨附的文件，或者參閱下面的段落。
  </para>

  <para>
   BIOS 是提供電腦最基本功能的軟體。主機板供應商會針對自己的硬體提供特製的 BIOS。通常，BIOS 設定只可在特定時間（機器開機時）進行存取。在這個初始化階段，機器會執行一些硬體診斷測試。其中之一是記憶體檢查，由記憶體計數器指示。當計數器出現時，請尋找指示按下按鍵來存取 BIOS 設定的一行文字，通常在計數器下方或底端某個位置。要按的鍵通常是 <keycap function="delete"/>、<keycap>F1</keycap> 或 <keycap function="escape"/> 中的一個。請按住這個按鍵，直到 BIOS 設定畫面出現為止。
  </para>

  <procedure xml:id="pro-tinstallation-troubleshooting-bios">
   <title>變更 BIOS 開機順序</title>
   <step>
    <para>
     使用開機常式所宣告的正確按鍵進入 BIOS，等待 BIOS 畫面出現。
    </para>
   </step>
   <step>
    <para>
     要變更 AWARD BIOS 中的開機順序，請尋找 <guimenu>BIOS FEATURES SETUP</guimenu> (BIOS 功能設定) 項目。其他製造商可能使用不同的名稱，例如 <guimenu>ADVANCED CMOS SETUP</guimenu> (進階 CMOS 設定)。當您找到該項目後，請選取並按 <keycap function="enter"/> 確認。
    </para>
   </step>
   <step>
    <para>
     在隨後開啟的畫面中，找到<guimenu>BOOT SEQUENCE</guimenu>或<guimenu>BOOT ORDER</guimenu>(開機順序) 子項目。按 <keycap function="pageup"/> 或 <keycap function="pagedown"/> 來變更設定，直到 USB 隨身碟或 DVD 光碟機列在最前面。
    </para>
   </step>
   <step>
    <para>
     請按 <keycap function="escape"/> 來離開 BIOS 設定畫面。若要儲存變更，請選取<guimenu>SAVE &amp; EXIT SETUP</guimenu>(儲存並結束設定)，或者按 <keycap>F10</keycap>。要確認儲存設定，請按 <keycap>Y</keycap>。
    </para>
   </step>
  </procedure>

  <procedure>
   <title>變更 SCSI BIOS (Adaptec 主機介面卡) 中的開機順序</title>
   <step>
    <para>
     按 <keycombo> <keycap function="control"/>
     <keycap>A</keycap> </keycombo> 開啟設定。
    </para>
   </step>
   <step>
    <para>
     選取<guimenu>磁碟公用程式</guimenu>。連接的硬體元件隨即顯示。
    </para>
    <para>
     記下 USB 隨身碟或 DVD 光碟機的 SCSI ID。
    </para>
   </step>
   <step>
    <para>
     使用 <keycap function="escape"/> 離開功能表。
    </para>
   </step>
   <step>
    <para>
     開啟 <guimenu>Configure Adapter Settings</guimenu> (設定介面卡設定)。在 <guimenu>Additional Options</guimenu> (其他選項) 下，請選取 <guimenu>Boot Device Options</guimenu> (開機裝置選項)，然後按 <keycap function="enter"/>。
    </para>
   </step>
   <step>
    <para>
     輸入 USB 隨身碟或 DVD 光碟機的 ID，然後再次按 <keycap function="enter"/>。
    </para>
   </step>
   <step>
    <para>
     按兩下 <keycap function="escape"/> 回到 SCSI BIOS 的開始畫面。
    </para>
   </step>
   <step>
    <para>
     退出這個畫面，接著按 <guimenu>Yes</guimenu> (是) 來啟動電腦。
    </para>
   </step>
  </procedure>

  <para>
   不管最終安裝將使用何語言和鍵盤配置，大多數 BIOS 組態都使用美國鍵盤配置，如下圖所示：
  </para>

  <figure xml:id="fig-trouble-install-keyboard-us">
   <title>美式鍵盤配置</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="keyboard_us.svg" width="75%" format="SVG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="keyboard_us.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="sec-installation-troubleshooting-noboot">
  <title>開機失敗</title>

  <para>
   有些硬體類型 (多半是極舊或極新的硬體) 無法開機。原因可能是安裝核心或驅動程式中未提供硬體支援，導致某些特定硬體出現問題。
  </para>

  <para>
   若您的系統無法使用標準<guimenu>安裝</guimenu>模式，從第一個安裝開機畫面安裝的話，請嘗試下列方法：
  </para>

  <procedure>
   <step>
    <para>
     使用尚留在磁碟機中的安裝媒體，以 <keycombo> <keycap function="control"/> <keycap function="alt"/>
     <keycap function="delete"/> </keycombo> 或硬體重設按鈕重新開機。
    </para>
   </step>
   <step>
    <para>
     出現開機畫面時按 <keycap>F5</keycap>，並使用鍵盤上的方向鍵導覽至<guimenu>無 ACPI</guimenu>，然後按 <keycap function="enter"/> 啟動開機與安裝程序。此選項會停用 ACPI 電源管理技術的支援。
    </para>
   </step>
   <step>
    <para>
     如<xref linkend="cha-install"/> 所述，繼續安裝。
    </para>
   </step>
  </procedure>

  <para>
   如果失敗，請仍按上述步驟執行，但改選<guimenu>安全設定</guimenu>。此選項會停用 ACPI 和 DMA 支援。大部分硬體將以此選項開機。
  </para>

  <para>
   如果上述兩種做法都不湊效，請使用開機參數提示向安裝核心傳遞支援此硬體類型所需的任何其他參數。如需可做為開機參數的參數的詳細資訊，請參閱位於 <filename>/usr/src/linux/Documentation/kernel-parameters.txt</filename> 的核心文件。
  </para>

  <tip>
   <title>獲取核心文件</title>
   <para>
    安裝 <systemitem class="systemname">kernel-source</systemitem> 套件以檢視核心文件。
   </para>
  </tip>

  <para>
   在開機以完成安裝之前，可以在開機提示中輸入其他與 ACPI 相關的核心參數：
  </para>

  <variablelist>
   <varlistentry>
    <term><systemitem>acpi=off</systemitem></term>
    <listitem>
     <para>
      此參數會關閉電腦的所有 ACPI 子系統。如果您的電腦無法處理 ACPI 或者您認為電腦的 ACPI 造成問題，此參數會很有幫助。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>acpi=force</systemitem></term>
    <listitem>
     <para>
      永遠啟用 ACPI (即使您的電腦使用的是 2000 年以前的舊 BIOS)。如果既設定了 <systemitem>acpi=off</systemitem>，又設定了此參數，此參數仍會啟用 ACPI。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>acpi=noirq</systemitem></term>
    <listitem>
     <para>
      不將 ACPI 用於 IRQ 路由。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>acpi=ht</systemitem></term>
    <listitem>
     <para>
      只執行足夠啟用超執行緒的 ACPI。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>acpi=strict</systemitem></term>
    <listitem>
     <para>
      降低對不完全與 ACPI 規格相容之平台的容忍度。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>pci=noacpi</systemitem></term>
    <listitem>
     <para>
      停用新 ACPI 系統的 PCI IRQ 路由。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>pnpacpi=off</systemitem></term>
    <listitem>
     <para>
      當您的 BIOS 設定中包含錯誤的岔斷或連接埠時，可透過此選項解決序列或平行問題。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>notsc</systemitem></term>
    <listitem>
     <para>
      停用時戳計數器。可使用此選項解決系統中的計時問題。這是一項新功能，如果您發現機器上出現效能衰退，特別是越到最後，效能越低，甚至完全當機，不妨嘗試此選項。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>nohz=off</systemitem></term>
    <listitem>
     <para>
      停用 nohz 功能。如果您的機器當機，使用此選項可能會有所幫助。其他情況下則毫無用處。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   當您確定了適當的參數組合後，YaST 會自動將其寫入開機載入程式組態，以確保系統下次可正確開機。
  </para>

  <para>
   如果核心載入或者安裝期間發生不明錯誤，請在開機功能表中選取<guimenu>記憶體測試</guimenu>，以檢查記憶體。若<guimenu>記憶體測試</guimenu>傳回錯誤，則通常會是硬體錯誤。
  </para>
 </sect1>
 <sect1 xml:id="sec-installation-troubleshooting-graph">
  <title>無法啟動圖形安裝程式</title>

  <para>
   將媒體插入磁碟機並將系統重新開機後，會出現安裝畫面，但在選取<guimenu>安裝</guimenu>之後，圖形安裝程式並未啟動。
  </para>

  <para>
   有許多方法可以解決此狀況：
  </para>

  <itemizedlist>
   <listitem>
    <para>
     嘗試選取安裝對話方塊的其他螢幕解析度。
    </para>
   </listitem>
   <listitem>
    <para>
     選取<guimenu>文字模式</guimenu>進行安裝。
    </para>
   </listitem>
   <listitem>
    <para>
     透過 VNC，使用圖形安裝程式進行遠端安裝。
    </para>
   </listitem>
  </itemizedlist>

  <procedure xml:id="pro-installation-troubleshooting-graph">
   <title>變更安裝的畫面解析度</title>
   <step>
    <para>
     開機以進行安裝。
    </para>
   </step>
   <step>
    <para>
     按 <keycap>F3</keycap> 開啟功能表，從中選取較低解析度進行安裝。
    </para>
   </step>
   <step>
    <para>
     選取<guimenu>安裝</guimenu>並如 <xref linkend="cha-install"/> 所述繼續安裝。
    </para>
   </step>
  </procedure>

  <procedure xml:id="pro-installation-troubleshooting-text">
   <title>以文字模式安裝</title>
   <step>
    <para>
     開機以進行安裝。
    </para>
   </step>
   <step>
    <para>
     按下 <keycap>F3</keycap> 並選取<guimenu>文字模式</guimenu>。
    </para>
   </step>
   <step>
    <para>
     選取<guimenu>安裝</guimenu>並如 <xref linkend="cha-install"/> 所述繼續安裝。
    </para>
   </step>
  </procedure>

  <procedure xml:id="pro-trouble-install-vnc">
   <title>VNC 安裝</title>
   <step>
    <para>
     開機以進行安裝。
    </para>
   </step>
   <step>
    <para>
     在開機參數提示中輸入以下文字：
    </para>
<screen>vnc=1 vncpassword=<replaceable>SOME_PASSWORD</replaceable></screen>
    <para>
     以 VNC 安裝所用的密碼取代 <replaceable>SOME_PASSWORD</replaceable>。
    </para>
   </step>
   <step>
    <para>
     選取<guimenu>安裝</guimenu>，然後按 <keycap function="enter"/> 啟動安裝。
    </para>
    <para>
     系統不會直接啟動至圖形安裝常式，而是繼續以文字模式執行。然後，系統會終止，顯示含有 IP 位址與連接埠號碼的訊息，根據此訊息便可以透過瀏覽器介面或 VNC 檢視器應用程式存取安裝程式。
    </para>
   </step>
   <step>
    <para>
     如果使用瀏覽器來存取安裝程式，則啟動瀏覽器並輸入 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 機器安裝常式所提供的位址資訊，並按 <keycap function="enter"/>：
    </para>
<screen>http://<replaceable>IP_ADDRESS_OF_MACHINE</replaceable>:5801</screen>
    <para>
     瀏覽器視窗中會開啟一個對話方塊，提示您輸入 VNC 密碼。輸入密碼，並如 <xref linkend="cha-install"/> 所述繼續安裝。
    </para>
    <important>
     <title>跨平台 支援</title>
     <para>
      若要在任何作業系統下、使用任何瀏覽器、透過 VNC 工作，首先必須啟用 Java 支援。
     </para>
    </important>
    <para>
     出現提示時，提供 VNC 檢視器的 IP 位址和密碼。會開啟一個視窗，顯示安裝對話。請依一般方式繼續安裝。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-installation-troubleshooting-mini">
  <title>只啟動極簡開機畫面</title>

  <para>
   將媒體插入磁碟機後，BIOS 常式結束，但系統未啟動圖形開機畫面。而是啟動一個非常簡易的文字介面。若機器無法提供足夠的圖形記憶體以轉譯圖形開機畫面，就可能發生此狀況。
  </para>

  <para>
   雖然文字開機畫面看起來非常簡易，但其提供的功能幾乎與圖形介面一樣：
  </para>

  <variablelist>
   <varlistentry>
    <term>開機選項</term>
    <listitem>
     <para>
      與圖形介面不同的是，這裡無法以鍵盤游標選取開機參數。文字模式開機畫面的開機功能表，會在開機提示時提供一些可輸入的關鍵字。這些關鍵字對映到圖形版本所提供的選項。輸入您的選擇並按 <keycap function="enter"/> 以啟動開機程序。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>自訂開機選項</term>
    <listitem>
     <para>
      選取開機參數之後，在開機提示中輸入適當的關鍵字，或依<xref linkend="sec-installation-troubleshooting-noboot"/>所述輸入自訂開機參數。若要啟動安裝程序，請按下 <keycap function="enter"/>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>螢幕解析度</term>
    <listitem>
     <para>
      使用功能鍵 (<keycap>F1</keycap> ... <keycap>F12</keycap>) 確定安裝的螢幕解析度。若您需要以文字模式開機，請選擇 <keycap>F3</keycap>。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="sec-installation-troubleshooting-log" os="sles">
  <title>記錄檔</title>

  <para>
   如需安裝期間建立之記錄檔案的詳細資訊，請參閱<xref linkend="sec-admsupport-install"/>。
  </para>
 </sect1>
</chapter>
