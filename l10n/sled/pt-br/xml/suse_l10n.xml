<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="suse_l10n.xml" version="5.0" xml:id="sec-suse-l10n">
 <title>Configurações de idioma e específicas de país</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  O sistema é, em uma extensão bastante ampla, internacionalizado e pode ser modificado de acordo com as necessidades locais. A internacionalização (<emphasis>I18N</emphasis>) permite a localização específica (<emphasis>L10N</emphasis>). As abreviações I18N e L10N são derivadas das primeiras e últimas letras das palavras e, no meio, está o número de letras omitidas.
 </para>

 <para>
  As configurações são feitas com variáveis <systemitem>LC_</systemitem> definidas no arquivo <filename>/etc/sysconfig/language</filename>. Elas referem-se não somente ao <emphasis>suporte ao idioma nativo</emphasis>, mas também às categorias <emphasis>Mensagens</emphasis> (Idioma), <emphasis>Conjunto de Caracteres</emphasis>, <emphasis>Ordem de Classificação</emphasis>, <emphasis>Hora e Data</emphasis>, <emphasis>Números</emphasis> e <emphasis>Moeda</emphasis>. Cada uma dessas categorias pode ser definida diretamente com sua própria variável ou indiretamente com uma variável master no arquivo <filename>language</filename> (consulte a página de manual <command>locale</command>).
 </para>

 <variablelist xml:id="vl-suse-l10n-variables">
  <title>Lista de variáveis</title>
  <varlistentry>
   <term><systemitem>RC_LC_MESSAGES</systemitem>, <systemitem>RC_LC_CTYPE</systemitem>, <systemitem>RC_LC_COLLATE</systemitem>, <systemitem>RC_LC_TIME</systemitem>, <systemitem>RC_LC_NUMERIC</systemitem>, <systemitem>RC_LC_MONETARY</systemitem>
   </term>
   <listitem>
    <para>
     Essas variáveis são passadas para o shell sem o prefixo <systemitem>RC_</systemitem> e representam as categorias listadas. Os perfis shell de referência estão listados abaixo. A configuração atual pode ser exibida com o comando <command>locale</command>.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LC_ALL</systemitem>
   </term>
   <listitem>
    <para>
     Essa variável, se definida, sobregrava os valores das variáveis já mencionadas.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LANG</systemitem>
   </term>
   <listitem>
    <para>
     Se nenhuma das variáveis anteriores for definida, esse é o fallback. Por padrão, apenas <systemitem>RC_LANG</systemitem> está definida. Isso facilita o processo para que os usuários informem seus próprios valores.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>ROOT_USES_LANG</systemitem>
   </term>
   <listitem>
    <para>
     É possível definir essa variável como <literal>yes</literal> ou <literal>ctype</literal> (padrão). Se definida como <literal>yes</literal>, o <systemitem class="username">root</systemitem> usará as configurações específicas de idioma e país; do contrário, o administrador do sistema sempre trabalhará em um ambiente POSIX.
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <para>
  As variáveis podem ser definidas com o editor sysconfig do YaST. O valor dessa variável contém o código do idioma, código do país, codificação e modificador. Os componentes individuais são unidos por caracteres especiais:
 </para>

<screen>LANG=&lt;language&gt;[[_&lt;COUNTRY&gt;].&lt;Encoding&gt;[@&lt;Modifier&gt;]]</screen>

 <sect2 xml:id="sec-suse-l10n-settings">
  <title>Configurações de idioma de todo o sistema</title>
  <para>
   O <systemitem class="daemon">systemd</systemitem> lê o <filename>/etc/locale.conf</filename> no início do boot. As configurações de idioma definidas nesse arquivo são herdadas por cada serviço ou usuário, a menos que haja configurações individuais.
  </para>
  <note>
   <title>Comportamento dos arquivos de configuração mais antigos no <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> <phrase role="productname"><phrase os="sled"></phrase></phrase></title>
   <para>
    As versões anteriores do <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> liam as configurações de idioma de <filename>/etc/sysconfig/language</filename>, <filename>/etc/sysconfig/keyboard</filename> e <filename>/etc/sysconfig/console</filename>. A partir do <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>
    <phrase os="sles;sled">15 GA</phrase>, esses arquivos são considerados obsoletos. O <systemitem class="daemon">systemd</systemitem> não lê mais as configurações desses arquivos. Em vez disso, o <systemitem class="daemon">systemd</systemitem> lê de <filename>/etc/locale.conf</filename>.
   </para>
   <para>
    No entanto, as variáveis definidas no <filename>/etc/sysconfig/language</filename> ainda serão usadas: elas anulam o idioma de todo o sistema e podem ser usadas para definir configurações de idioma diferentes para os shells de usuário (consulte a <xref linkend="sec-suse-l10n-examples"/>).
   </para>
  </note>

  <para>Para definir o idioma de todo o sistema, você pode:</para>
  <itemizedlist>
   <listitem>
    <para>
     Gravar as configurações no <filename>/etc/locale.conf</filename>. Cada linha é uma atribuição de variável como um ambiente (consulte <command>man 5 locale.conf</command> para ver uma lista de variáveis):
    </para>
    <screen>LANG=de_DE.UTF-8</screen>
    <para>
     Para ajustar as configurações, você pode adicionar outras variáveis, uma por linha.
    </para>
   </listitem>
   <listitem>
    <para>
     Usar o comando <command>localectl</command>:
    </para>
<screen><prompt role="root"># </prompt><command>localectl</command> set-locale LANG=de_DE.UTF-8</screen>
    <para>Neste caso, você também pode especificar mais variáveis após o comando <command>localectl set-locale</command>.</para>
   </listitem>
  </itemizedlist>

  <para>
   Para manter a compatibilidade retroativa com sistemas antigos durante a atualização do pacote systemd, todas as variáveis mencionadas serão migradas do sysconfig para seus destinos finais, se ainda não estiverem definidas nesse local.
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-examples">
  <title>Alguns exemplos</title>
  <remark>toms 2019-05-21: This section should be restructured as
  it not completely deals with generating locales.
  Postponed to a later point.
  </remark>
  <para>
   Você deve sempre definir os códigos do idioma e do país juntos. As configurações do idioma seguem o padrão ISO 639 disponível em <link xlink:href="http://www.evertype.com/standards/iso639/iso639-en.html"/> e <link xlink:href="http://www.loc.gov/standards/iso639-2/"/>. Os códigos de país estão listados em ISO 3166, consulte <link xlink:href="http://en.wikipedia.org/wiki/ISO_3166"/>.
  </para>
  <para>
   Só faz sentido definir valores para os quais os arquivos de descrição utilizáveis podem ser encontrados em <filename>/usr/lib/locale</filename>. Arquivos de descrição adicionais podem ser criados de arquivos em <filename>/usr/share/i18n</filename> utilizando o comando <command>localedef</command>. Os arquivos de descrição fazem parte do pacote <systemitem>glibc-i18ndata</systemitem>. Um arquivo de descrição para <literal>en_US.UTF-8</literal> (para inglês e Estados Unidos) pode ser criado com:
  </para>

  <remark role="trans">Change the description file in the previous para and the
   following screen to something appropriate for your language.</remark>
<screen>localedef -i en_US -f UTF-8 en_US.UTF-8</screen>
  <variablelist>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.UTF-8</systemitem>
    </term>
    <listitem>
     <para>
      Essa é a configuração padrão se Inglês americano for selecionado durante a instalação. Se você tiver selecionado outro idioma, ele será habilitado, mas ainda terá o UTF-8 como codificação de caractere.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.ISO-8859-1</systemitem>
    </term>
    <listitem>
     <para>
      Define o idioma como inglês, o país como Estados Unidos e o conjunto de caracteres como <literal>ISO-8859-1</literal>. Essa definição de caractere não suporta o sinal de Euro, mas às vezes pode ser útil para programas que não foram atualizados para suportar <literal>UTF-8</literal>. A string que define o conjunto de caracteres (<literal>ISO-8859-1</literal> nesse caso) é então avaliada por programas como o Emacs.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term><systemitem>LANG=en_IE@euro</systemitem>
    </term>
    <listitem>
     <para>
      O exemplo acima inclui explicitamente o sinal de Euro em uma configuração de idioma. Essa configuração está obsoleta agora, pois o UTF-8 também abrange o símbolo do Euro. Será útil apenas se um aplicativo suportar ISO-8859-15 e não UTF-8.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   As mudanças em <filename>/etc/sysconfig/language</filename> são ativadas pela seguinte cadeia de processo:
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Para Bash: <filename>/etc/profile</filename> lê <filename>/etc/profile.d/lang.sh</filename> que, por sua vez, analisa <filename>/etc/sysconfig/language</filename>.
    </para>
   </listitem>
   <listitem>
    <para>
     Para tcsh: No login, <filename>/etc/csh.login</filename> lê <filename>/etc/profile.d/lang.csh</filename> que, por sua vez, analisa <filename>/etc/sysconfig/language</filename>.
    </para>
   </listitem>
  </itemizedlist>
  <para>
   Isso garante que toda mudança em <filename>/etc/sysconfig/language</filename> fique disponível no próximo login para o respectivo shell, sem ter que ativá-la manualmente.
  </para>
  <para>
   Os usuários anular os padrões do sistema editando o seu <filename>~/.bashrc</filename> da maneira adequada. Por exemplo, se você não deseja usar <literal>en_US</literal> em todo o sistema para mensagens de programa, em vez disso, inclua <systemitem>LC_MESSAGES=es_ES</systemitem> para exibir as mensagens em espanhol.
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-dot-i18n">
  <title>Configurações de idioma em <filename>~/.i18n</filename></title>
  <para>
   Se não estiver satisfeito com os padrões do sistema local, mude as configurações em <filename>~/.i18n</filename> de acordo com a sintaxe de script Bash. As entradas em <filename>~/.i18n</filename> substituem os padrões do sistema de <filename>/etc/sysconfig/language</filename>. Use os mesmos nomes de variáveis, mas sem os prefixos de namespace <literal>RC_</literal>. Por exemplo, use <literal>LANG</literal> em vez de <literal>RC_LANG</literal>:
  </para>
<screen>LANG=cs_CZ.UTF-8
LC_COLLATE=C</screen>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-fallback">
  <title>Configurações de suporte de idioma</title>
  <para>
   Arquivos na categoria <emphasis>Mensagens</emphasis> são, via de regra, armazenados somente no diretório do idioma correspondente (como <filename>en</filename>) para ter um fallback. Se você definir <systemitem>LANG</systemitem> para <literal>en_US</literal> e o arquivo de mensagem em <filename>/usr/share/locale/en_US/LC_MESSAGES</filename> não existir, ele voltará para <filename>/usr/share/locale/en/LC_MESSAGES</filename>.
  </para>
  <para>
   Uma cadeia de fallback também pode ser definida, por exemplo, para bretão para francês ou galego para espanhol para português:
  </para>
  <para>
   <systemitem>LANGUAGE="br_FR:fr_FR"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="gl_ES:es_ES:pt_PT"</systemitem>
  </para>
  <para>
   Se desejar, use as variantes norueguesas Nynorsk e Bokmål (com fallback adicional para <literal>no</literal>):
  </para>
  <para>
   <systemitem>LANG="nn_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nn_NO:nb_NO:no"</systemitem>
  </para>
  <para>
   ou
  </para>
  <para>
   <systemitem>LANG="nb_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nb_NO:nn_NO:no"</systemitem>
  </para>
  <para>
   Observe que em norueguês, <systemitem>LC_TIME</systemitem> também é tratado de maneira diferente.
  </para>
  <remark>The following example does not make sense  for 'en'; that's why I
   use 'de' as an example here. -ke- </remark>

  <para>
   Um problema que pode surgir é um separador usado para delimitar grupos de dígitos não ser reconhecido corretamente. Isso acontece se <systemitem>LANG</systemitem> for definido para um código de idioma com somente duas letras, como <literal>de</literal>, mas o arquivo de definição que o glibc utiliza estiver localizado em <filename>/usr/share/lib/de_DE/LC_NUMERIC</filename>. Por isso, <systemitem>LC_NUMERIC</systemitem> deve ser definido como <literal>de_DE</literal> para tornar a definição de separador visível para o sistema.
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-info">
  <title>Mais informações</title>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <emphasis>The GNU C Library Reference Manual</emphasis>, Capítulo <quote>Locales and Internationalization</quote>. Ele está incluído no pacote <package>glibc-info</package>.
    </para>
   </listitem>
   <listitem>
    <para>
     Markus Kuhn, <emphasis>UTF-8 and Unicode FAQ for Unix/Linux</emphasis>, atualmente em <link xlink:href="https://www.cl.cam.ac.uk/~mgk25/unicode.html"/>.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>
</sect1>
