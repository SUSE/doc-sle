<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="adm_support.xml" version="5.0" xml:id="cha-adm-support">
 <title>Erfassen der Systeminformationen für den Support</title>
 <info>
      <abstract>
        <para>
    Das Paket <phrase role="productname"><phrase os="sled">hostinfo in </phrase></phrase>SUSE Linux Enterprise Desktop<systemitem class="systemname"/> ermöglicht einen raschen Überblick über alle relevanten Systeminformationen eines Computers. Hier können Systemadministratoren außerdem ermitteln, ob ein Computer unbrauchbare (nicht unterstützte) Kernels enthält oder ob Drittanbieterpakete installiert sind.
   </para>
        <para>
    Bei Problemen wird ein detaillierter Systembericht mit dem Kommandozeilenwerkzeug <command>supportconfig</command> oder mit dem YaST-<guimenu>Support</guimenu>-Modul erzeugt. Beide Werkzeuge sammeln Informationen zum System, etwa aktuelle Kernel-Version, Hardware, installierte Pakete, Partitionseinrichtung und einiges mehr. Hierbei wird ein TAR-Archiv mit Dateien ausgegeben. Wenn Sie eine Service-Anforderung öffnen, können Sie das TAR-Archiv für den globalen technischen Support heraufladen. Der Support hilft Ihnen, das gemeldete Problem zu lokalisieren und zu beheben.
   </para>
        <para>
    Darüber hinaus können Sie die <command>supportconfig</command>-Ausgabe auf bekannte Probleme hin analysieren und so die Fehlerbehebung noch beschleunigen. <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> bietet hierzu eine Anwendung und ein Kommandozeilenwerkzeug für die <literal>Supportconfig-Analyse</literal> (SCA).
   </para>
      </abstract>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker/>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    
 <sect1 xml:id="sec-admsupport-hostinfo">
  <title>Anzeigen aktueller Systeminformationen</title>

  <para>
   Mit dem Paket <systemitem class="systemname">hostinfo</systemitem> erhalten Sie schnell und einfach eine Übersicht über alle relevanten Systeminformationen, sobald Sie sich bei einem Server anmelden. Nach der Installation auf einem Computer zeigt die Konsole die folgenden Informationen für jeden <systemitem class="username">root</systemitem>-Benutzer an, der sich bei diesem Computer anmeldet:
  </para>

  <example xml:id="ex-support-hostinfo">
   <title>Ausgabe von <command>hostinfo</command> beim Anmelden als <systemitem class="username">root</systemitem></title>
<screen>Welcome to SUSE Linux Enterprise Server 15 SP2 Snapshot8 (x86_64) - Kernel \r (\l).


Distribution:             SUSE Linux Enterprise Server 15 SP2
Current As Of:            Wed 25 Mar 2020 12:09:20 PM PDT
Hostname:                 localhost
Kernel Version:           5.3.18-8-default
 Architecture:            x86_64
 Installed:               Thu 19 Mar 2020 11:25:13 AM PDT
 Status:                  Not Tainted
Last Installed Package:   Wed 25 Mar 2020 11:42:24 AM PDT
 Patches Needed:          0
 Security:                0
 3rd Party Packages:      219
Network Interfaces
 eth0:                    192.168.2/24 2002:c0a8:20a::/64
Memory
 Total/Free/Avail:        7.4Gi/6.4Gi/6.8Gi (91% Avail)
CPU Load Average:         7 (3%) with 2 CPUs
</screen>
  </example>

  <para>
   Wenn die Ausgabe auf einen <literal>unbrauchbaren</literal> Kernel-Status hinweist, finden Sie weitere Details in <xref linkend="sec-admsupport-kernel"/>.
  </para>
 </sect1>
 <sect1 xml:id="sec-admsupport-supportconfig">
  <title>Erfassen von Systeminformationen mit supportconfig</title>
  <para>
   Ein TAR-Archiv mit ausführlichen Systeminformationen, die Sie an den globalen technischen Support übertragen können, erstellen Sie entweder:
  </para>
  <itemizedlist>
   <listitem>
    <para>mit dem Kommando <command>supportconfig</command> oder </para>
   </listitem>
   <listitem>
    <para>mit dem YaST-<guimenu>Support</guimenu>-Modul.</para>
   </listitem>
  </itemizedlist>
  <para>
   Das Kommandozeilenwerkzeug wird im Paket <systemitem>supportutils</systemitem> bereitgestellt, das standardmäßig installiert ist. Das YaST-<guimenu>Support</guimenu>-Modul baut zudem auf dem Kommandozeilenwerkzeug auf.
  </para>
  <para>
   Je nachdem, welche Pakete auf Ihrem System installiert sind, werden mit einem Teil dieser Pakete außerdem Supportconfig-Plugins integriert. Beim Ausführen von Supportconfig werden auch alle Plugins ausgeführt, wobei mindestens eine Ergebnisdatei für das Archiv erstellt wird. Dies hat den Vorteil, dass nur die Themen überprüft werden, die ein spezielles Plugin enthalten. Die Supportconfig-Plugins werden im Verzeichnis <filename>/usr/lib/supportconfig/plugins/</filename> gespeichert.
  </para>

  <sect2 xml:id="sec-admsupport-supportconfig-sr">
   <title>Erstellen einer Serviceanforderungsnummer</title>
   <para>
    supportconfig-Archive können jederzeit erzeugt werden. Wenn Sie die Supportconfig-Daten an den globalen technischen Support übertragen möchten, müssen Sie jedoch zunächst eine Service-Anforderungs-Nummer erstellen. Diese Nummer benötigen Sie, um das Archiv an den Support heraufladen zu können.
   </para>
   <para>
    Zum Erstellen einer Service-Anforderung wechseln Sie zu <link xlink:href="https://scc.suse.com/support/requests"/>, und befolgen Sie die Anweisungen auf dem Bildschirm. Notieren Sie die Serviceanforderungsnummer.
   </para>
   <note>
    <title>Datenschutzerklärung</title>
    <para>
     SUSE behandelt Systemberichte als vertrauliche Daten. Weitere Informationen zum Datenschutz finden Sie unter <link xlink:href="https://www.suse.com/company/policies/privacy/"/>.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="sec-admsupport-supportconfig-upload">
   <title>Upload-Ziele</title>
   <para>
    Sobald Sie eine Service-Anforderungs-Nummer erstellt haben, können Sie Ihre Supportconfig-Archive gemäß den Anweisungen in <xref linkend="pro-admsupport-submit-yast"/> oder <xref linkend="pro-admsupport-submit-cli"/> an den globalen technischen Support hochladen. Verwenden Sie eines der folgenden Upload-Ziele:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
     
      Nordamerika: FTP <link xlink:href="ftp://support-ftp.us.suse.com/incoming/"/>, FTPS <link xlink:href="ftps://support-ftp.us.suse.com/incoming/"/>
     </para>
    </listitem>
    <listitem>
     <para>
      EMEA (Europa, Nahost und Afrika): FTP<link xlink:href="ftp://support-ftp.emea.suse.com/incoming"/>, FTPS<link xlink:href="ftps://support-ftp.emea.suse.com/incoming"/>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Alternativ können Sie das TAR-Archiv auch an Ihre Service-Anforderung anhängen und die URL für Service-Anforderungen verwenden: <link xlink:href="https://scc.suse.com/support/requests"/>.
   </para>
  </sect2>

  <sect2 xml:id="sec-admsupport-yast">
   <title>Erstellen eines supportconfig-Archivs mit YaST</title>
   <para>
    Gehen Sie wie folgt vor, wenn Sie Ihre Systeminformationen mithilfe von YaST erfassen möchten: <remark>2008-11-20 toms: YaST asks the user to open a URL as
     root(!). This happens when the users clicks on "Open" (Open
     Support Center/ This will start a browser with
     Support Center Portal). I do not think we should describe this
     and only *use* the above URL as a normal user for security
     reasons.</remark>
   </para>
   <procedure>
    <step>
     <para>
      Starten Sie YaST, und öffnen Sie das <guimenu>Support</guimenu>-Modul.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2_support_main.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2_support_main.png" width="60%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Klicken Sie auf <guimenu>Berichts-Tarball erstellen</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Wählen Sie im nächsten Fenster eine der Supportconfig-Optionen in der Optionsliste aus. Die Option <guimenu>Benutzerdefinierte Einstellungen (für Experten) verwenden</guimenu> ist standardmäßig aktiviert. Wenn Sie die Berichtfunktion zuerst testen möchten, verwenden Sie <guimenu>Nur eine minimale Anzahl von Informationen sammeln</guimenu>. Zusätzliche Informationen zu den weiteren Optionen finden Sie auf der man-Seite zu <command>supportconfig</command>.
     </para>
     <para>
      Drücken Sie <guimenu>Weiter</guimenu>.
     </para>
    </step>
    <step xml:id="st-supportconfig-contact">
     <para>
      Geben Sie Ihre Kontaktdaten ein. Sie sind in der Datei <filename>basic-environment.txt</filename> gespeichert und im erstellten Archiv enthalten.
     </para>
    </step>
    <step xml:id="st-supportconfig-upload-target">
     <para>
      Geben Sie zum Senden das Archivs an den globalen technischen Support die erforderlichen <guimenu>Upload-Informationen</guimenu> an. YaST schlägt automatisch einen Upload-Server vor. Falls Sie einen anderen verwenden möchten, finden Sie detaillierte Informationen zu den verfügbaren Upload-Servern in <xref linkend="sec-admsupport-supportconfig-upload"/>.
     </para>
     <para>
      Lassen Sie das Feld für <guimenu>Upload-Informationen</guimenu> leer, falls Sie das Archiv später senden möchten.
     </para>
    </step>
    <step>
     <para>
      Drücken Sie zum Starten des Vorgangs der Informationserfassung auf <guimenu>Weiter</guimenu>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2_support_conf.png" width="90%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2_support_conf.png" width="80%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
     <para>
      Drücken Sie nach Ende des Vorgangs auf <guimenu>Weiter</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Wählen Sie zum Prüfen der erfassten Daten die gewünschte Datei unter <guimenu>Dateiname</guimenu> aus, um den Inhalt in YaST anzuzeigen. Mit der Option <guimenu>Aus Daten entfernen</guimenu> entfernen Sie eine Datei aus dem TAR-Archiv, bevor Sie es an den Support senden. Drücken Sie <guimenu>Weiter</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Speichern Sie das TAR-Archiv. Wenn Sie das YaST-Modul als <systemitem class="username">root</systemitem>-Benutzer gestartet haben, fordert YaST standardmäßig dazu auf, das Archiv unter <filename>/var/log</filename> zu speichern (ansonsten in Ihrem Basisverzeichnis). Das Format des Dateinamens lautet <filename>scc_<replaceable>HOST</replaceable>_<replaceable>DATE</replaceable>_<replaceable>TIME</replaceable>.tbz</filename>.
     </para>
    </step>
    <step>
     <para>
      Zum Heraufladen des Archivs direkt an den Support muss die Option <guimenu>Protokolldatei-Tarball an URL hochladen</guimenu> aktiviert sein. Hier ist das <guimenu>Upload-Ziel</guimenu> angegeben, das YaST in <xref linkend="st-supportconfig-upload-target"/> vorgeschlagen hat. Prüfen Sie in <xref linkend="sec-admsupport-supportconfig-upload"/>, welche Upload-Server verfügbar sind, bevor Sie das Upload-Ziel ändern.
     </para>
    </step>
    <step>
     <para>
      Deaktivieren Sie die Option <guimenu>Protokolldatei-Tarball zu URL heraufladen</guimenu>, um den Upload zu überspringen.
     </para>
    </step>
    <step>
     <para>
      Bestätigen Sie die Änderungen, um das YaST-Modul zu schließen.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-admsupport-cli">
   <title>Erstellen eines supportconfig-Archivs über die Kommandozeile</title>
   <para>
    Mit dem nachstehenden Verfahren erstellen Sie ein Supportconfig-Archiv, ohne das Archiv direkt an den Support zu übertragen. Zum Heraufladen müssen Sie das entsprechende Kommando mit den zugehörigen Optionen ausführen (siehe <xref linkend="pro-admsupport-submit-cli"/>).
   </para>
   <procedure>
    <step>
     <para>
      Öffnen Sie eine Shell und melden Sie sich als <systemitem class="username">root</systemitem> an.
     </para>
    </step>
    <step>
     <para>
      Führen Sie <command>supportconfig</command> aus. In der Regel reicht es aus, dieses Tool ohne Optionen auszuführen. Die folgende Liste zeigt einige häufig verwendete Optionen:
     </para>
     <variablelist>
      <varlistentry>
       <term><option>-E <replaceable>MAIL</replaceable></option></term>
       <term><option>-N <replaceable>NAME</replaceable></option></term>
       <term><option>-O <replaceable>UNTERNEHMEN</replaceable></option></term>
       <term><option>-P <replaceable>TELEFON</replaceable></option></term>
       <listitem>
        <para>
         Legt Ihre Kontaktangaben fest: Email-Adresse (<option>-E</option>), Unternehmensname (<option>-O</option>), Ihr Name (<option>-N</option>) und Ihre Telefonnummer (<option>-P</option>).
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><option>-i <replaceable>SCHLÜSSELWÖRTER</replaceable></option></term>
       <term><option>-F</option></term>
       <listitem>
        <para>
         Schränkt die zu überprüfenden Funktionen ein. Der Platzhalter <replaceable>SCHLÜSSELWÖRTER</replaceable> steht für eine Liste von Schlüsselwörtern, die jeweils durch Komma voneinander getrennt werden müssen und bei denen zwischen Groß- und Kleinschreibung unterschieden wird. Mit <command>supportconfig -F</command> erhalten Sie eine Liste aller Schlüsselwörter.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><option>-r <replaceable>SRNUMMER</replaceable></option></term>
       <listitem>
        <para>
         Definiert die Nummer Ihrer Service-Anforderung, wenn Sie das erzeugte TAR-Archiv hochladen.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </step>
    <step>
     <para>
      Warten Sie, bis das Tool den Vorgang beendet hat.
     </para>
    </step>
    <step>
     <para>
      Der Standardspeicherort für das Archiv befindet sich unter <filename>/var/log</filename> und hat das Dateinamenformat <filename>scc_<replaceable>HOST</replaceable>_<replaceable>DATE</replaceable>_<replaceable>TIME</replaceable>.tbz</filename>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-admsupport-supportconfig-log">
   <title>Informationen zur Ausgabe von <command>supportconfig</command></title>
   <para>
    <command>supportconfig</command> gibt eine Zusammenfassung der erledigten Aktionen zurück, unabhängig davon, ob Sie das Skript über YaST oder direkt ausführen.
   </para>
   <screen>                     Support Utilities - Supportconfig
                          Script Version: 3.0-98 
                          Script Date: 2017 06 01
[...]
Gathering system information
  Data Directory:    /var/log/scc_d251_180201_1525 <co xml:id="co-admsupport-script-datadir"/>

  Basic Server Health Check...                 Done <co xml:id="co-admsupport-script-done"/>
  RPM Database...                              Done <xref linkend="co-admsupport-script-done"/>
  Basic Environment...                         Done <xref linkend="co-admsupport-script-done"/>
  System Modules...                            Done <xref linkend="co-admsupport-script-done"/>
[...]
  File System List...                          Skipped <co xml:id="co-admsupport-script-skipped"/>
[...]
  Command History...                           Excluded <co xml:id="co-admsupport-script-excluded"/>
[...]
  Supportconfig Plugins:                       1 <co xml:id="co-admsupport-script-plugin"/>
    Plugin: pstree...                          Done
[...]
Creating Tar Ball

==[ DONE ]===================================================================
  Log file tar ball: /var/log/scc_d251_180201_1525.txz <co xml:id="co-admsupport-script-archive"/>
  Log file size:     732K
  Log file md5sum:   bf23e0e15e9382c49f92cbce46000d8b
=============================================================================</screen>
   <calloutlist>
    
    <callout arearefs="co-admsupport-script-datadir">
     <para>
      Das temporäre Verzeichnis, in dem die Ergebnisse gespeichert werden. Dieses Verzeichnis wird als tar-Datei archiviert (siehe <xref linkend="co-admsupport-script-archive"/>).
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-done">
     <para>
      Die Funktion wurde (standardmäßig oder manuell) aktiviert und wurde erfolgreich ausgeführt. Das Ergebnis wird in einer Datei gespeichert (siehe <xref linkend="tab-admsupport-features-and-filenames"/>).
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-skipped">
     <para>
      Die Funktion wurde übersprungen, weil einige Dateien in mindestens einem RPM-Paket geändert wurden.
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-excluded">
     <para>
      Die Funktion wurde ausgeschlossen, weil ihre Auswahl mit der Option <option>-x</option> aufgehoben wurde.
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-plugin">
     <para>
      Das Skript hat ein Plugin gefunden und führt das Plugin <command>pstree</command> aus. Das Plugin wurde im Verzeichnis <filename class="directory">/usr/lib/supportconfig/plugins/</filename> gefunden. Weitere Informationen hierzu finden Sie auf der man-Seite.
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-archive">
     <para>
      Der tar-Dateiname des Archivs, das standardmäßig mit <command>xz</command> komprimiert wird.
     </para>
    </callout>
   </calloutlist>
  </sect2>

  <sect2 xml:id="sec-admsupport-options">
   <title>Allgemeine Optionen für Supportconfig</title>
   <para>
    Das Dienstprogramm <command>supportconfig</command> wird in der Regel ohne Optionen aufgerufen. Zeigen Sie mit eine Liste aller Optionen für <command>supportconfig</command> <option> mit -h</option> an oder lesen Sie die man-Seite. Die folgende Liste enthält eine kurze Übersicht einiger gängiger Fälle:
   </para>
   <variablelist>
    <varlistentry>
     <term>Vermindern des Umfangs der erfassten Informationen</term>
     <listitem>
      <para>
       Verwenden Sie die Minimal-Option (<option>-m</option>):
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -m</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Begrenzen der Informationen auf ein bestimmtes Thema</term>
     <listitem>
      <para>
       Wenn Sie bereits ein Problem festgestellt haben, das auf einen bestimmten Bereich oder eine bestimmte Funktionsgruppe beschränkt ist, sollten Sie die erfassten Informationen beim nächsten Ausführen von <command>supportconfig</command> auf diesen Bereich begrenzen. Sie haben beispielsweise Probleme mit LVM festgestellt und möchten nun eine Änderung testen, die Sie kürzlich an der LVM-Konfiguration vorgenommen haben. In diesem Fall sollten Sie nur die mindestens erforderlichen Supportconfig-Informationen zu LVM zusammenstellen:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -i LVM</screen>
      <para>
       Zusätzliche Schlüsselwörter können jeweils durch Komma getrennt werden. Beispielsweise ein zusätzlicher Festplattentest:
      </para>
      <screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -i LVM,DISK</screen>
      <para>
       Eine vollständige Liste der Funktionsschlüsselwörter, mit denen Sie die erfassten Informationen auf einen bestimmten Bereich begrenzen, erhalten Sie mit dem:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -F</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Aufnehmen zusätzlicher Kontaktinformationen in die Ausgabe:</term>
     <listitem>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -E tux@example.org -N "Tux Penguin" -O "Penguin Inc." ...</screen>
      <para>
       (alle in einer Zeile)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Sammeln von bereits rotierten Protokolldateien</term>
     <listitem>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -l</screen>
      <para>
       Nützlich ist dies insbesondere in Umgebungen mit hohem Protokollierungsaufkommen sowie nach einem Kernel-Crash, wenn syslog die Protokolldateien nach dem Neustart rotiert.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>
  <sect2 xml:id="sec-admsupport-log">
   <title>Überblick über den Archivinhalt</title>
   <para>
    Das TAR-Archiv enthält alle Ergebnisse der Funktionen. Die Anzahl der Dateien im Archiv ist abhängig von der ursprünglichen Auswahl (alles oder nur ein kleiner Teil). Der Funktionsset kann mit der Option <option>-i</option> eingeschränkt werden (siehe <xref linkend="sec-admsupport-options"/>).
   </para>
   <para>
    Mit dem folgenden <command>tar</command>-Kommando rufen Sie eine Liste des Archivinhalts ab:
   </para>
   <screen><prompt role="root">root # </prompt><command>tar</command> xf /var/log/scc_earth_180131_1545.tbz</screen>
   <para>
    Die folgenden Dateinamen sind stets im TAR-Archiv verfügbar:
   </para>
   <variablelist>
    <title>Mindestens im Archiv enthaltene Dateien</title>
    <varlistentry>
     <term><filename>basic-environment.txt</filename></term>
     <listitem>
      <para>Datum, an dem dieses Skript ausgeführt wurde, sowie Systeminformationen wie die Version der Distribution, Hypervisor-Informationen und vieles mehr.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>basic-health-check.txt</filename></term>
     <listitem>
      <para>
       Grundlegende Integritätsprüfungen, z. B. Betriebszeit, Statistiken zum virtuellen Speicher, freier Arbeits- und Festplattenspeicher, Prüfungen auf „Zombie-Prozesse“ und vieles mehr.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>hardware.txt</filename></term>
     <listitem>
      <para>
       Grundlegende Hardware-Prüfungen, z. B. Informationen zur CPU-Active Directory, Liste der gesamten angeschlossenen Hardware, Interrupts, E/A-Ports, Kernel-Bootmeldungen und vieles mehr.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>messages.txt</filename></term>
     <listitem>
      <para>
       Enthält Protokollmeldungen vom Systemjournal.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>rpm.txt</filename></term>
     <listitem>
      <para>Liste aller installierten RPM-Pakete mit Name, Ursprung und Version.</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>summary.xml</filename></term>
     <listitem>
      <para>Informationen im XML-Format, z. B. Distribution, Version und produktspezifische Fragmente.</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>supportconfig.txt</filename></term>
     <listitem>
      <para>
       Informationen zum Skript <command>supportconfig</command> selbst.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>y2log.txt</filename></term>
     <listitem>
      <para>
       YaST-spezifische Informationen, z. B. spezielle Pakete, Konfigurationsdateien und Protokolldateien.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    <xref linkend="tab-admsupport-features-and-filenames"/> zeigt eine Liste aller verfügbaren Funktionen und ihrer Dateinamen. Weitere Service Packs und Plugins können die Liste noch erweitern.
   </para>
   <table xml:id="tab-admsupport-features-and-filenames">
    <title>Vergleich der Funktionen und Dateinamen im TAR-Archiv</title>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>Funktion</entry>
       <entry>Dateiname</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry><parameter>APPARMOR</parameter></entry>
       <entry><filename>security-apparmor.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>AUDIT</parameter></entry>
       <entry><filename>security-audit.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>AUTOFS</parameter></entry>
       <entry><filename>fs-autofs.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>BOOT</parameter></entry>
       <entry><filename>boot.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>BTRFS</parameter></entry>
       <entry><filename>fs-btrfs.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>DAEMONS</parameter></entry>
       <entry><filename>systemd.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>CIMOM</parameter></entry>
         <entry><filename>cimom.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>CRASH</parameter></entry>
         <entry><filename>crash.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>CRON</parameter></entry>
         <entry><filename>cron.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DHCP</parameter></entry>
         <entry><filename>dhcp.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DISK</parameter></entry>
         <entry><filename>fs-diskio.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DNS</parameter></entry>
         <entry><filename>dns.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DOCKER</parameter></entry>
         <entry><filename>docker.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DRBD</parameter></entry>
         <entry><filename>drbd.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>ENV</parameter></entry>
         <entry><filename>env.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>ETC</parameter></entry>
         <entry><filename>etctxt</filename></entry>
      </row>
      <row>
         <entry><parameter>HA</parameter></entry>
         <entry><filename>ha.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>HAPROXY</parameter></entry>
         <entry><filename>haproxy.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>HISTORY</parameter></entry>
         <entry><filename>shell_history.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>IB</parameter></entry>
         <entry><filename>ib.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>IMAN</parameter></entry>
         <entry><filename>novell-iman.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>ISCSI</parameter></entry>
         <entry><filename>fs-iscsi.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>LDAP</parameter></entry>
         <entry><filename>ldap.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>LIVEPATCH</parameter></entry>
         <entry><filename>kernel-livepatch.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>LVM</parameter></entry>
         <entry><filename>lvm.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>MEM</parameter></entry>
         <entry><filename>memory.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>MOD</parameter></entry>
         <entry><filename>modules.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>MPIO</parameter></entry>
         <entry><filename>mpio.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NET</parameter></entry>
         <entry><filename>network-*.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NFS</parameter></entry>
         <entry><filename>nfs.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NTP</parameter></entry>
         <entry><filename>ntp.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NVME</parameter></entry>
         <entry><filename>nvme.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>OCFS 2</parameter></entry>
         <entry><filename>ocfs2.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>OFILES</parameter></entry>
         <entry><filename>open-files.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>PRINT</parameter></entry>
         <entry><filename>print.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>PROC</parameter></entry>
         <entry><filename>proc.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SAR</parameter></entry>
         <entry><filename>sar.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SLERT</parameter></entry>
         <entry><filename>slert.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SLP</parameter></entry>
         <entry><filename>slp.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SMT</parameter></entry>
         <entry><filename>smt.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SMART</parameter></entry>
         <entry><filename>fs-smartmon.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SMB</parameter></entry>
         <entry><filename>samba.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SRAID</parameter></entry>
         <entry><filename>fs-softraid.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SSH</parameter></entry>
         <entry><filename>ssh.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SSSD</parameter></entry>
         <entry><filename>sssd.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SYSCONFIG</parameter></entry>
         <entry><filename>sysconfig.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SYSFS</parameter></entry>
         <entry><filename>sysfs.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>TRANSACTIONAL</parameter></entry>
         <entry><filename>transactional-update.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>TUNED</parameter></entry>
         <entry><filename>tuned.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>UDEV</parameter></entry>
         <entry><filename>udev.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>UFILES</parameter></entry>
         <entry><filename>fs-files-additional.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>UP</parameter></entry>
         <entry><filename>updates.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>WEB</parameter></entry>
         <entry><filename>web.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>X</parameter></entry>
         <entry><filename>x.txt</filename></entry>
      </row>
     </tbody>
    </tgroup>
   </table>
  <remark>toms 2018-04-05: Make the table be aware of what packages brings
     what plugin?</remark>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-admsupport-submit">
  <title>Übertragen von Informationen an den globalen technischen Support</title>

  <para>
   Zum Übertragen der Systeminformationen an den globalen technischen Support verwenden Sie das YaST-<guimenu>Support</guimenu>-Modul oder das Befehlszeilenprogramm <command>supportconfig</command>. Falls Serverprobleme auftreten und Sie Hilfe benötigen, müssen Sie zunächst eine Serviceanforderung öffnen. Weitere Informationen finden Sie unter <xref linkend="sec-admsupport-supportconfig-sr"/>.
  </para>

  <para>
   In den nachfolgenden Beispielen fungiert die Zahl <replaceable>12345678901</replaceable> als Platzhalter für die Service-Anforderungs-Nummer. Ersetzen Sie die Zahl <replaceable>12345678901</replaceable> durch die Service-Anforderungs-Nummer, die Sie in <xref linkend="sec-admsupport-supportconfig-sr"/> erstellt haben.
  </para>

  <procedure xml:id="pro-admsupport-submit-yast">
   <title>Übertragen von Informationen an den Support mithilfe von YaST</title>
   <para>
    Im nachfolgenden Verfahren wird angenommen, dass Sie bereits ein Supportconfig-Archiv erstellt, jedoch noch nicht heraufgeladen haben. Nehmen Sie in jedem Fall Ihre Kontaktdaten in das Archiv auf (siehe <xref linkend="sec-admsupport-yast"/>, <xref linkend="st-supportconfig-contact" xrefstyle="select:label nopage"/>). Weitere Anweisungen zum Erzeugen und Übertragen eines Supportconfig-Archivs in einem einzigen Arbeitsgang finden Sie in <xref linkend="sec-admsupport-yast"/>.
   </para>
   <step>
    <para>
     Starten Sie YaST, und öffnen Sie das <guimenu>Support</guimenu>-Modul.
    </para>
   </step>
   <step>
    <para>
     Klicken Sie auf <guimenu>Heraufladen</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Geben Sie unter <guimenu>Paket mit Protokolldateien</guimenu> den Pfad zum vorhandenen Supportconfig-Archiv ein, oder klicken Sie auf <guimenu>Durchsuchen</guimenu>, und wechseln Sie zu dem Ordner, in dem sich das Archiv befindet.
    </para>
   </step>
   <step xml:id="st-supportcfg-submit-upltarget">
    <para>
     YaST schlägt automatisch einen Upload-Server vor. Wenn Sie diesen Server ändern möchten, erfahren Sie in <xref linkend="sec-admsupport-supportconfig-upload"/>, welche Upload-Server verfügbar sind.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_support_conf_upload.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_support_conf_upload.png" width="60%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
    <para>
     <remark>taroth 2014-04-11: this does not make sense to me - why does the
      YaST module *not* ask for the SR number now? and lets you continue after
      specifying an upload target (but no RC or customer info)? I would
      expect it to *check* if an SR has been entered and otherwise show an error
      message - filed http://bugzilla.suse.com/show_bug.cgi?id=880943 for this, unfortunately it
      was rejected for technical reasons</remark> Fahren Sie mit <guimenu>Weiter</guimenu> fort.
    </para>
   </step>
   <step>
    <para>
     Klicken Sie auf <guimenu>Finish</guimenu> (Fertig stellen).
    </para>
   </step>
  </procedure>

  <procedure xml:id="pro-admsupport-submit-cli">
   <title>Übertragen von Informationen an den Support über die Kommandozeile</title>
   <para>
    Im nachfolgenden Verfahren wird angenommen, dass Sie bereits ein Supportconfig-Archiv erstellt, jedoch noch nicht heraufgeladen haben. Weitere Anweisungen zum Erzeugen und Übertragen eines Supportconfig-Archivs in einem einzigen Arbeitsgang finden Sie in <xref linkend="sec-admsupport-yast"/>.
   </para>
   <step>
    <para>
     Server mit Internetkonnektivität:
    </para>
    <substeps performance="required">
     <step>
      <para>
       Führen Sie das folgende Kommando aus, um das Standard-Uploadziel zu verwenden:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -ur <replaceable>12345678901</replaceable></screen>
     </step>
     <step>
      <para>
       Verwenden Sie das folgende sichere Upload-Ziel:
      </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -ar <replaceable>12345678901</replaceable></screen>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Server <emphasis>ohne</emphasis> Internetkonnektivität
    </para>
    <substeps performance="required">
     <step>
      <para>
       Führen Sie Folgendes aus:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -r <replaceable>12345678901</replaceable></screen>
     </step>
     <step>
      <para>
       Laden Sie das Archiv <filename>/var/log/scc_<replaceable>SR12345678901</replaceable>*tbz</filename> manuell auf einen unserer FTP-Server herauf. Der richtige Server ist abhängig von Ihrem Standort. Einen Überblick finden Sie unter <xref linkend="sec-admsupport-supportconfig-upload"/>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Sobald das TAR-Archiv im Eingangsverzeichnis unseres FTP-Servers eingeht, wird es automatisch an Ihre Service-Anforderung angehängt.
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 xml:id="sec-admsupport-sca">
  <title>Analysieren von Systeminformationen</title>

  <para>
   Die mit <command>supportconfig</command> erstellten Systemberichte können auf bekannte Probleme hin analysiert werden, so dass die Fehlerbehebung noch beschleunigt wird. <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> bietet hierzu eine Anwendung und ein Kommandozeilenwerkzeug für die <literal>Supportconfig-Analyse</literal> (SCA). Die SCA-Appliance ist ein serverseitiges, nicht interaktives Werkzeug. Das SCA-Werkzeug (<command>scatool</command> aus dem Paket <package>sca-server-report</package>) wird auf Client-Seite an der Kommandozeile ausgeführt. Beide Werkzeuge analysieren die Supportconfig-Archive von betroffenen Servern. Die erste Serveranalyse erfolgt in der SCA-Appliance oder auf dem Arbeitsplatzrechner, auf dem <command>scatool</command> ausgeführt wird. Auf dem Produktionsserver werden keine Analysezyklen durchgeführt.
  </para>

  <para>
   Sowohl für die Appliance als auch für das Kommandozeilenwerkzeug sind zusätzliche produktspezifische Schemata erforderlich, damit die Supportconfig-Ausgabe für die entsprechenden Produkte analysiert werden kann. Jedes Schema ist ein Skript, mit dem ein Supportconfig-Archiv auf genau ein bekanntes Problem hin analysiert und ausgewertet wird. Die Schemata stehen als RPM-Pakete zur Verfügung.
  </para>

  <para>
   Sie können außerdem eigene Schemata entwickeln (kurze Beschreibung siehe <xref linkend="sec-admsupport-sca-patterns"/>).
  </para>

  <sect2 xml:id="sec-admsupport-sca-tool">
   <title>SCA-Kommandozeilenwerkzeug</title>
   <para>
    Mithilfe des SCA-Kommandozeilenwerkzeugs können Sie einen lokalen Rechner sowohl mit <command>supportconfig</command> als auch mit den auf dem lokalen Rechner installierten Analyseschemata analysieren. Das Werkzeug erstellt einen HTML-Bericht mit den Analyseergebnissen. Ein Beispiel finden Sie in <xref linkend="fig-scatool-html"/>.
   </para>
   <figure xml:id="fig-scatool-html">
    <title>Mit dem SCA-Werkzeug erstellter HTML-Bericht</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="sca_tool_report_html.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="sca_tool_report_html.png" width="100%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Das Kommando <command>scatool</command>wird mit dem Paket <package>sca-server-report</package> bereitgestellt. Die Installation erfolgt nicht standardmäßig. Darüber hinaus benötigen Sie das Paket <package>sca-patterns-base</package> sowie alle produktspezifischen Pakete <package>sca-patterns-*</package> für das Produkt, das auf dem Rechner installiert ist, auf dem das Kommando <command>scatool</command> ausgeführt werden soll.
   </para>
   <para>
    Führen Sie das Kommando <command>scatool</command> als <systemitem class="username">root</systemitem>-Benutzer oder mit <command>sudo</command> aus. Beim Aufrufen des SCA-Werkzeugs können Sie wahlweise ein vorhandenes <command>supportconfig</command>-TAR-Archiv analysieren oder auch ein neues Archiv erzeugen und im gleichen Arbeitsgang analysieren. Das Werkzeug bietet außerdem eine interaktive Konsole zum Ausfüllen der Registerkarten. Sie können <command>supportconfig</command> auf einem externen Computer und die nachfolgende Analyse dann auf dem lokalen Computer ausführen.
   </para>
   <para>
    Einige Kommandobeispiele:
   </para>
   <variablelist>
    <varlistentry>
     <term><command>sudo scatool </command><option>-s</option>
     </term>
     <listitem>
      <para>
       Ruft <command>supportconfig</command> auf und erzeugt ein neues Supportconfig-Archiv auf dem lokalen Rechner. Analysiert das Archiv auf bekannte Probleme mithilfe der passenden SCA-Analyseschemata für das installierte Produkt. Zeigt den Pfad zum HTML-Bericht an, der aus den Analyseergebnissen erzeugt wird. Der Bericht wird in der Regel in dasselbe Verzeichnis geschrieben wie das Supportconfig-Archiv.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-s</option> <option>-o</option> <replaceable>/opt/sca/reports/</replaceable> 
     </term>
     <listitem>
      <para>
       Wie <command>sudo scatool </command> <option>-s</option>, mit dem Unterschied, dass der HTML-Bericht in den mit der Option <option>-o</option> angegebenen Pfad geschrieben wird.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-a</option> <replaceable>PFAD_ZU_TARBALL_ODER_VERZEICHNIS</replaceable> 
     </term>
     <listitem>
      <para>
       Analysiert die angegebene Supportconfig-Archivdatei (oder das angegebene Verzeichnis, in das das Supportconfig-Archiv extrahiert wurde). Der erzeugte HTML-Bericht wird an demselben Speicherort gespeichert wie das Supportconfig-Archiv oder -Verzeichnis.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-a</option> <replaceable>SLES_SERVER.COMPANY.COM</replaceable> 
     </term>
     <listitem>
      <para>
       Stellt eine SSH-Verbindung zu einem externen Server <replaceable>SLES_SERVER.COMPANY.COM</replaceable> her und führt <command>Supportconfig</command> auf dem Server aus. Das Supportconfig-Archiv wird dann auf den lokalen Rechner zurückkopiert und dort analysiert. Der erzeugte HTML-Bericht wird standardmäßig in das Verzeichnis <filename>/var/log</filename> gespeichert. (Auf dem Server <replaceable>SLES_SERVER.COMPANY.COM</replaceable> wird ausschließlich das Supportconfig-Archiv erstellt.)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-c</option>
     </term>
     <listitem>
      <para>
       Startet die interaktive Konsole für <command>scatool</command>. Zum Abrufen der verfügbaren Kommandos drücken Sie zweimal <keycap function="tab"/>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Weitere Optionen und Informationen erhalten Sie mit dem Kommando <command>sudo scatool -h</command> und auf der man-Seite zu <command>scatool</command>.
   </para>
  </sect2>

  <sect2 xml:id="sec-admsupport-sca-appliance">
   <title>SCA-Appliance</title>
   <para>
    Wenn Sie die Supportconfig-Archive mit der SCA-Appliance analysieren, konfigurieren Sie einen dedizierten Server (oder einen dedizierten virtuellen Computer) als SCA-Appliance-Server. Auf dem SCA-Appliance-Server können Sie dann Supportconfig-Archive von allen Rechnern im Unternehmen analysieren, auf denen SUSE Linux Enterprise Server oder SUSE Linux Enterprise Desktop ausgeführt wird. Zum Analysieren laden Sie die gewünschten Supportconfig-Archive einfach auf den Appliance-Server herauf. Ein weiterer Eingriff Ihrerseits ist nicht erforderlich. In einer MariaDB-Datenbank verfolgt die SCA-Appliance alle bereits analysierten Supportconfig-Archive. Sie können die SCA-Berichte direkt über die Webschnittstelle der Appliance lesen. Alternativ können Sie in der Appliance angeben, dass der HTML-Bericht per Email an einen verwaltungsbefugten Benutzer gesendet werden soll. Weitere Informationen finden Sie unter <xref linkend="sec-admsupport-sca-appliance-config-mail"/>.
   </para>
   <sect3 xml:id="sec-admsupport-sca-appliance-installquick">
    <title>Installationsschnellanleitung</title>
    <para>
     Zum raschen Installieren und Einrichten der SCA-Appliance über die Kommandozeile gehen Sie nach den folgenden Anweisungen vor. Das Verfahren richtet sich an fortgeschrittene Benutzer und umfasst lediglich die reinen Installations- und Einrichtungskommandos. Weitere Informationen finden Sie in der detaillierteren Beschreibung in <xref linkend="sec-admsupport-sca-appliance-pre"/> bis <xref linkend="sec-admsupport-sca-appliance-install"/>.
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <title>Voraussetzungen</title>
     <listitem>
      <para>
       Web- und LAMP-Schema
      </para>
     </listitem>
     <listitem>
      <para>
       Web- und Skripterstellungsmodul (zur Auswahl dieses Moduls muss der Rechner registriert sein).
      </para>
     </listitem>
    </itemizedlist>
    <note>
     <title>Erforderliche <systemitem class="username">root</systemitem>-Berechtigungen</title>
     <para>
      Alle Befehle im folgenden Vorgang müssen als <systemitem class="username">root</systemitem> ausgeführt werden.
     </para>
    </note>
    <procedure>
     <title>Installation mit Heraufladen über anonymen FTP-Zugang</title>
     <para>
      Sobald die Appliance eingerichtet ist und ausgeführt wird, sind keine weiteren manuellen Eingriffe mehr erforderlich. Diese Methode zur Einrichtung der Appliance eignet sich daher ideal für das Erstellen und Heraufladen von Supportconfig-Archiven mithilfe von Cron-Aufträgen.
     </para>
     <step>
      <para>
       Melden Sie sich auf dem Rechner, auf dem die Appliance installiert werden soll, bei einer Konsole an und führen Sie folgende Kommandos aus (akzeptieren Sie dabei auf jeden Fall die empfohlenen Pakete):
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper install sca-appliance-* sca-patterns-* \
vsftpd yast2 yast2-ftp-server
<prompt>tux &gt; </prompt><command>sudo</command> systemctl enable apache2
<prompt>tux &gt; </prompt><command>sudo</command> systemctl start apache2
<prompt>tux &gt; </prompt><command>sudo</command> systemctl enable vsftpd
<prompt>tux &gt; </prompt><command>sudo</command> systemctl start vsftpd
<prompt>tux &gt; </prompt><command>sudo</command> yast ftp-server</screen>
     </step>
     <step>
      <para>
       Wählen Sie im YaST-FTP-Server-Modul Folgendes: <menuchoice>
       <guimenu>Authentifizierung</guimenu> <guimenu>Heraufladen aktivieren</guimenu>
       <guimenu>Anonyme Benutzer dürfen hochladen</guimenu> <guimenu>Beenden</guimenu>
       <guimenu>Ja</guimenu> </menuchoice>. Der Ordner <guimenu>/srv/ftp/upload</guimenu> wird erstellt.
      </para>
     </step>
     <step>
      <para>
       Führen Sie folgende Befehle aus:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> systemctl enable mysql
<prompt>tux &gt; </prompt><command>sudo</command> systemctl start mysql
<prompt>tux &gt; </prompt><command>sudo</command> mysql_secure_installation
<prompt>tux &gt; </prompt><command>sudo</command> setup-sca -f</screen>
      <para>
       Bei der sicheren MySQL-Erstellung (mysql_secure_installation) wird ein <systemitem class="username">root</systemitem>-Passwort für MariaDB erstellt.
      </para>
     </step>
    </procedure>
    <procedure>
     <title>Installation mit Heraufladen über SCP/tmp</title>
     <para>
      Bei dieser Methode zum Einrichten der Appliance ist ein manueller Eingriff erforderlich (das SSH-Passwort muss eingegeben werden).
     </para>
     <step>
      <para>
       Melden Sie sich auf dem Rechner, auf dem die Appliance installiert werden soll, bei einer Konsole an:
      </para>
     </step>
     <step>
      <para>
       Führen Sie folgende Befehle aus:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper install sca-appliance-* sca-patterns-*
<prompt>tux &gt; </prompt><command>sudo</command> systemctl enable apache2
<prompt>tux &gt; </prompt><command>sudo</command> systemctl start apache2
<prompt>tux &gt; </prompt><command>sudo</command> sudo systemctl enable mysql
<prompt>tux &gt; </prompt><command>sudo</command> systemctl start mysql
<prompt>tux &gt; </prompt><command>sudo</command> mysql_secure_installation
<prompt>tux &gt; </prompt><command>sudo</command> setup-sca</screen>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-pre">
    <title>Voraussetzungen</title>
    <para>
     Zum Ausführen eines Appliance-Servers müssen folgende Voraussetzungen erfüllt sein:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Alle Pakete <systemitem>sca-appliance-*</systemitem>.
      </para>
     </listitem>
     <listitem>
      <para>
       Paket <systemitem class="resource">sca-patterns-base</systemitem>. Zusätzlich alle produktspezifischen Pakete <systemitem class="resource">sca-patterns-*</systemitem> für den Typ der Supportconfig-Archive, die mit der Appliance analysiert werden sollen.
      </para>
     </listitem>
     <listitem>
      <para>
       Apache
      </para>
     </listitem>
     <listitem>
      <para>
       PHP
      </para>
     </listitem>
     <listitem>
      <para>
       MariaDB
      </para>
     </listitem>
     <listitem>
      <para>
       Anonymer FTP-Server (optional)
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-install">
    <title>Installation und grundlegende Einrichtung</title>
    <para>
     Wie in <xref linkend="sec-admsupport-sca-appliance-pre"/> beschrieben, bestehen mehrere Abhängigkeiten der SCA-Appliance von anderen Paketen. Aus diesem Grund sind einige Vorbereitungsmaßnahmen erforderlich, bevor Sie den SCA-Appliance-Server installieren und einrichten können:
    </para>
    <procedure>
     <step>
      <para>
       Für Apache und MariaDB installieren Sie die Installationsschemata <systemitem>Web</systemitem> und <systemitem>LAMP</systemitem>.
      </para>
     </step>
     <step>
      <para>
       Richten Sie Apache und MariaDB ein (und optional einen anonymen FTP-Server). 
       
      </para>
     </step>
     <step>
      <para>
       Konfigurieren Sie Apache und MariaDB für das Starten beim Systemstart:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> systemctl enable apache2 mysql</screen>
     </step>
     <step>
      <para>
       Starten Sie beide Services:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> systemctl start apache2 mysql</screen>
     </step>
    </procedure>
    <para>
     Sie können nun die SCA-Appliance gemäß den Anweisungen in <xref linkend="pro-sca-appl-install"/> installieren und einrichten.
    </para>
    <procedure xml:id="pro-sca-appl-install">
     <title>Installieren und Konfigurieren der SCA-Appliance</title>
     <para>
      Nach dem Installieren der Pakete nehmen Sie mit dem Skript <command>setup-sca</command> die grundlegende Konfiguration der MariaDB-Administrations-/Berichtdatenbank vor, die von der SCA-Appliance genutzt wird.
     </para>
     <para>
      Hiermit können Sie die folgenden Optionen für das Heraufladen der Supportconfig-Archive von den Rechnern in die SCA-Appliance konfigurieren:
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        <command>scp</command>
       </para>
      </listitem>
      <listitem>
       <para>
        Anonymer FTP-Server
       </para>
      </listitem>
     </itemizedlist>
     <step>
      <para>
       Installieren Sie die Appliance und die SCA-Basisschema-Bibliothek:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper install sca-appliance-* sca-patterns-base</screen>
     </step>
     <step>
      <para>
       Installieren Sie außerdem die Schemapakete für die zu analysierenden Supportconfig-Archive. Wenn sich beispielsweise Server mit SUSE Linux Enterprise Server 12 und SUSE Linux Enterprise 15 in Ihrer Umgebung befinden, installieren Sie sowohl das Paket <systemitem>sca-patterns-sle12</systemitem> als auch das Paket <systemitem>sca-patterns-sle15</systemitem>.
      </para>
      <para>
       So installieren Sie alle verfügbaren Pakete:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper install sca-patterns-*</screen>
     </step>
     <step>
      <para>
       Nehmen Sie mit dem Skript <command>setup-sca</command> die grundlegende Einrichtung der SCA-Appliance vor. Der Aufruf dieses Skripts ist abhängig davon, ob die Supportconfig-Archive auf den SCA-Appliance-Server heraufgeladen werden sollen:
      </para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         Wenn Sie einen anonymen FTP-Server konfiguriert haben, bei dem das Verzeichnis <filename>/srv/ftp/upload</filename> genutzt wird, führen Sie das Einrichtungsskript mit der Option <option>-f</option> aus. Befolgen Sie die Anweisungen auf dem Bildschirm:
        </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> setup-sca -f</screen>
        <note>
         <title>FTP-Server mit anderem Verzeichnis</title>
         <para>
          Wenn der FTP-Server ein anderes Verzeichnis verwendet (also nicht das Verzeichnis <filename>/srv/ftp/upload</filename>), passen Sie zunächst die folgenden Konfigurationsdateien so an, dass sie auf das richtige Verzeichnis verweisen: <filename>/etc/sca/sdagent.conf</filename> und <filename>/etc/sca/sdbroker.conf</filename>. 
         </para>
        </note>
       </listitem>
       <listitem>
        <para>
         Sollen Supportconfig-Dateien mit <filename>scp</filename> in das Verzeichnis <command>/tmp</command> des SCA-Appliance-Servers hochgeladen werden, rufen Sie das Einrichtungsskript ohne Parameter auf. Befolgen Sie die Anweisungen auf dem Bildschirm:
        </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> setup-sca</screen>
       </listitem>
      </itemizedlist>
      <para>
       Das Einrichtungsskript überprüft, ob die Voraussetzungen erfüllt sind, und konfiguriert die erforderlichen Komponenten. Sie werden zur Eingabe von zwei Passwörtern aufgefordert: das MySQL-<systemitem class="username">root</systemitem>-Passwort für die eingerichtete MariaDB sowie ein Webbenutzer-Passwort, mit dem Sie sich bei der Webschnittstelle der SCA-Appliance anmelden.
      </para>
     </step>
     <step>
      <para>
       Geben Sie das vorhandene MariaDB-<systemitem class="username">root</systemitem>-Passwort ein. Damit kann die SCA-Appliance eine Verbindung zur MariaDB herstellen.
      </para>
     </step>
     <step>
      <para>
       Definieren Sie ein Passwort für den Webbenutzer. Dieses Passwort wird in die Datei <filename>/srv/www/htdocs/sca/web-config.php</filename> geschrieben und als Passwort für den Benutzer <systemitem class="username">scdiag</systemitem> eingerichtet. Sowohl der Benutzername als auch das Passwort können jederzeit geändert werden (siehe <xref linkend="sec-admsupport-sca-appliance-config-passwd"/>).
      </para>

     </step>
    </procedure>
    <para>
     Nach erfolgter Installation und Einrichtung ist die SCA-Appliance einsatzbereit (siehe <xref linkend="sec-admsupport-sca-appliance-use"/>). Sie sollten jedoch bestimmte Optionen noch bearbeiten, beispielsweise das Passwort für die Webschnittstelle oder die Quelle für die SCA-Schemaaktualisierungen ändern, den Archivierungsmodus aktivieren oder Email-Benachrichtigungen konfigurieren. Weitere Informationen finden Sie in <xref linkend="sec-admsupport-sca-appliance-config"/>.
    </para>
    <warning>
     <title>Schutz der Daten</title>
     <para>
      Die Berichte auf dem SCA-Appliance-Server enthalten sicherheitsrelevante Informationen, weshalb die Daten auf dem SCA-Appliance-Server vor unbefugtem Zugriff geschützt werden müssen.
     </para>
    </warning>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-use">
    <title>Verwenden der SCA-Appliance</title>
    <para>
     Sie können vorhandene Supportconfig-Archive manuell an die SCA-Appliance heraufladen oder neue Supportconfig-Archive erstellen und im gleichen Arbeitsgang analysieren an die SCA-Appliance heraufladen. Das Heraufladen kann über FTP oder SCP erfolgen. In beiden Fällen benötigen Sie die URL, unter der sich die SCA-Appliance befindet. Zum Heraufladen über FTP muss ein FTP-Server für die SCA-Appliance installiert sein (siehe <xref linkend="pro-sca-appl-install"/>).
    </para>
    <sect4 xml:id="sec-admsupport-sca-appliance-use-upload">
     <title>Hochladen von supportconfig-Archiven an die SCA-Appliance</title>
     <para/>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        So können Sie ein Supportconfig-Archiv erstellen und über einen (anonymen) FTP-Zugang hochladen:
       </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -U “ftp://<replaceable>SCA-APPLIANCE.COMPANY.COM</replaceable>/upload”</screen>
      </listitem>
      <listitem>
       <para>
        So können Sie ein Supportconfig-Archiv erstellen und über SCP hochladen:
       </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -U “scp://<replaceable>SCA-APPLIANCE.COMPANY.COM</replaceable>/tmp”</screen>
       <para>
        Sie werden aufgefordert, das <systemitem class="username">root</systemitem>-Benutzerpasswort für den Server einzugeben, auf dem die SCA-Appliance ausgeführt wird.
       </para>
      </listitem>
      <listitem>
       <para>
        Zum manuellen Heraufladen von einem oder mehreren Archiven kopieren Sie die vorhandenen Archivdateien (in der Regel unter <filename>/var/log/scc_*.tbz</filename>) in die SCA-Appliance. Als Ziel verwenden Sie entweder das Verzeichnis <filename>/tmp</filename> oder das Verzeichnis <filename>/srv/ftp/upload</filename> des Appliance-Servers (wenn FTP für den SCA-Appliance-Server konfiguriert ist).
       </para>
      </listitem>
     </itemizedlist>
    </sect4>
    <sect4 xml:id="sec-admsupport-sca-appliance-use-view">
     <title>Anzeigen von SCA-Berichten</title>
     <para>
      Die SCA-Berichte können auf jedem Rechner angezeigt werden, auf dem ein Browser installiert ist und der auf die Berichtindexseite der SCA-Appliance zugreifen kann.
     </para>
     <procedure>
      <step>
       <para>
        Starten Sie einen Webbrowser, und aktivieren Sie JavaScript und Cookies.
       </para>
      </step>
      <step>
       <para>
        Als URL geben Sie die Berichtindexseite der SCA-Appliance ein.
       </para>
<screen>https://sca-appliance.company.com/sca</screen>
       <para>
        Fragen Sie im Zweifelsfall Ihren Systemadministrator.
       </para>
      </step>
      <step>
       <para>
        Sie werden aufgefordert, einen Benutzernamen und ein Passwort für die Anmeldung einzugeben.
       </para>
       <figure xml:id="fig-sca-appl-html">
        <title>Mit dem SCA-Werkzeug erstellter HTML-Bericht</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="sca_appl_report_html.png" width="100%"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="sca_appl_report_html.png" width="100%"/>
         </imageobject>
        </mediaobject>
       </figure>
      </step>
      <step>
       <para>
        Nach erfolgter Anmeldung klicken Sie auf das Datum des gewünschten Berichts.
       </para>
      </step>
      <step>
       <para>
        Klicken Sie zunächst auf die Kategorie <guimenu>Grundstatus</guimenu>.
       </para>
      </step>
      <step>
       <para>
        Klicken Sie in der Spalte <guimenu>Nachricht</guimenu> auf einen Eintrag. Der entsprechende Artikel in der SUSE Knowledgebase wird geöffnet. Lesen Sie die vorgeschlagene Lösung, und befolgen Sie die Anweisungen.
       </para>
      </step>
      <step>
       <para>
        Wenn die Spalte <guimenu>Lösungen</guimenu> im <guimenu>Supportconfig-Analysebericht</guimenu> weitere Einträge enthält, klicken Sie auf diese Einträge. Lesen Sie die vorgeschlagene Lösung, und befolgen Sie die Anweisungen.
       </para>
      </step>
      <step>
       <para>
        Suchen Sie in der SUSE Knowledgebase (<link xlink:href="https://www.suse.com/support/kb/"/>) nach Ergebnissen, die direkt mit dem für SCA erkannten Problem zusammenhängen. Bearbeiten Sie die Probleme.
       </para>
      </step>
      <step>
       <para>
        Suchen Sie nach Ergebnissen, die proaktiv bearbeitet werden können, damit künftige Probleme vermieden werden.
       </para>
      </step>
     </procedure>
    </sect4>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-config">
    <title>Anpassen der SCA-Appliance</title>
    <para>
     In den nachfolgenden Abschnitten erfahren Sie, wie Sie das Passwort für die Webschnittstelle und die Quelle für die SCA-Schemaaktualisierungen ändern, den Archivierungsmodus aktivieren und Email-Benachrichtigungen archivieren.
    </para>
    <sect4 xml:id="sec-admsupport-sca-appliance-config-passwd">
     <title>Passwort für die Webschnittstelle</title>
     <para>
      Zur Anmeldung bei der Webschnittstelle der SCA-Appliance benötigen Sie einen Benutzernamen und ein Passwort. Der Standard-Benutzername lautet <literal>scdiag</literal> und das Standardpasswort ist <literal>linux</literal> (sofern nicht anders festgelegt, siehe <xref linkend="pro-sca-appl-install"/>). Ändern Sie das Standard-Passwort so bald wie möglich in ein sicheres Passwort. Auch den Benutzernamen können Sie bearbeiten.
     </para>
     <procedure xml:id="pro-sca-passwd-change">
      <title>Ändern des Benutzernamens oder des Passworts für die Webschnittstelle</title>
      <step>
       <para>
        Melden Sie sich an der Systemkonsole des SCA-Appliance-Servers als <systemitem class="username">root</systemitem>-Benutzer an.
       </para>
      </step>
      <step>
       <para>
        Öffnen Sie die Datei <filename>/srv/www/htdocs/sca/web-config.php</filename> in einem Editor.
       </para>
      </step>
      <step>
       <para>
        Ändern Sie die Werte für <literal>$username</literal> und <literal>$password</literal>.
       </para>
      </step>
      <step>
       <para>
        Speichern und schließen Sie die Datei.
       </para>
      </step>
     </procedure>
    </sect4>
    <sect4 xml:id="sec-admsupport-sca-appliance-config-upd">
     <title>Aktualisierungen der SCA-Schemata</title>
     <para>
      Standardmäßig werden alle Pakete <systemitem class="resource">sca-patterns-*</systemitem> regelmäßig mit einem <systemitem class="username">root</systemitem>Cron-Auftrag aktualisiert, mit dem jeden Abend das Skript <filename>sdagent-patterns</filename> ausgeführt wird, das wiederum <command>zypper update sca-patterns-*</command> startet. Bei einer normalen Systemaktualisierung werden alle SCA-Appliance- und Schemapakete aktualisiert. So aktualisieren Sie die SCA-Appliance und die Schemata manuell:
     </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper update sca-*</screen>
     <para>
      Die Aktualisierungen werden standardmäßig aus dem Aktualisierungs-Respository für SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP3</phrase></phrase> installiert. Bei Bedarf können Sie die Quelle der Aktualisierungen in einen RMT-Server ändern. Beim Ausführen von <command>zypper update sca-patterns-*</command> durch <filename>sdagent-patterns</filename> werden die Aktualisierungen über den derzeit konfigurierten Aktualisierungskanal abgerufen. Wenn sich dieser Kanal auf einem RMT-Server befindet, werden die Pakete von diesem Server abgerufen.
     </para>
     <procedure>
      <title>Deaktivieren der automatischen Aktualisierung der SCA-Schemata</title>
      <step>
       <para>
        Melden Sie sich an der Systemkonsole des SCA-Appliance-Servers als <systemitem class="username">root</systemitem>-Benutzer an.
       </para>
      </step>
      <step>
       <para>

        Öffnen Sie die Datei <filename>/etc/sca/sdagent-patterns.conf</filename> in einem Editor.
       </para>
      </step>
      <step>
       <para>
        Ändern Sie den Eintrag
       </para>
<screen>UPDATE_FROM_PATTERN_REPO=1</screen>
       <para>
        zu
       </para>
<screen>UPDATE_FROM_PATTERN_REPO=0</screen>
      </step>
      <step>
       <para>
        Speichern und schließen Sie die Datei. Die Änderung tritt ohne Neustart des Rechners in Kraft.
       </para>
      </step>
     </procedure>
    </sect4>
    <sect4 xml:id="sec-admsupport-sca-appliance-config-archive">
     <title>Archivierungsmodus</title>
     <para>
      Alle supportconfig-Archive werden aus der SCA-Appliance gelöscht, sobald sie analysiert und die zugehörigen Ergebnisse in der MariaDB-Datenbank gespeichert wurden. Wenn Sie Kopien der Supportconfig-Archive eines Rechners aufheben, kann dies allerdings ggf. eine spätere Fehlerbehebung erleichtern. Standardmäßig ist der Archivierungsmodus deaktiviert.
     </para>
     <procedure>
      <title>Aktivieren des Archivierungsmodus in der SCA-Appliance</title>
      <step>
       <para>
        Melden Sie sich an der Systemkonsole des SCA-Appliance-Servers als <systemitem class="username">root</systemitem>-Benutzer an.
       </para>
      </step>
      <step>
       <para>
        Öffnen Sie die Datei <filename>/etc/sca/sdagent.conf</filename> in einem Editor.
       </para>
      </step>
      <step>
       <para>
        Ändern Sie den Eintrag
       </para>
<screen>ARCHIVE_MODE=0</screen>
       <para>
        zu
       </para>
<screen>ARCHIVE_MODE=1</screen>
      </step>
      <step>
       <para>
        Speichern und schließen Sie die Datei. Die Änderung tritt ohne Neustart des Rechners in Kraft.
       </para>
      </step>
     </procedure>
     <para>
      Sobald der Archivierungsmodus aktiviert ist, werden die Supportconfig-Dateien nicht mehr von der SCA-Appliance gelöscht, sondern im Verzeichnis <filename>/var/log/archives/saved</filename> gespeichert.
     </para>
    </sect4>
    <sect4 xml:id="sec-admsupport-sca-appliance-config-mail">
     <title>Senden von SCA-Berichten per Email</title>
     <para>
      Die SCA-Appliance kann für jede analysierte Supportconfig-Datei einen HTML-Bericht per Email schicken. Diese Funktion ist standardmäßig deaktiviert. Wenn Sie dies aktivieren, können Sie eine Liste der Email-Adressen definieren, an die die Berichte gesendet werden sollen. Definieren Sie die Statusebene, die das Senden von Berichten auslösen soll (<literal>STATUS_NOTIFY_LEVEL</literal>).
     </para>
     <variablelist xml:id="vl-sca-mails-notify-level">
      <title>Mögliche Werte für <literal>STATUS_NOTIFY_LEVEL</literal></title>
      <varlistentry>
       <term>$STATUS_OFF</term>
       <listitem>
        <para>
         Deaktiviert das Senden von HTML-Berichten.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_CRITICAL</term>
       <listitem>
        <para>
         Sendet nur SCA-Berichte, die den Status CRITICAL enthalten.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_WARNING </term>
       <listitem>
        <para>
         Sendet nur SCA-Berichte, die den Status WARNING oder CRITICAL enthalten.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_RECOMMEND</term>
       <listitem>
        <para>
         Sendet nur SCA-Berichte, die den Status RECOMMEND, WARNING oder CRITICAL enthalten.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_SUCCESS</term>
       <listitem>
        <para>
         Sendet SCA-Berichte, die den Status SUCCESS, RECOMMEND, WARNING oder CRITICAL enthalten.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <procedure>
      <title>Konfigurieren von Email-Benachrichtigungen für SCA-Berichte</title>
      <step>
       <para>
        Melden Sie sich an der Systemkonsole des SCA-Appliance-Servers als <systemitem class="username">root</systemitem>-Benutzer an.
       </para>
      </step>
      <step>
       <para>
        Öffnen Sie die Datei <filename>/etc/sca/sdagent.conf</filename> in einem Editor.
       </para>
      </step>
      <step>
       <para>
        Wechseln Sie zum Eintrag <systemitem>STATUS_NOTIFY_LEVEL</systemitem>. Standardmäßig ist hier <literal>$STATUS_OFF</literal> festgelegt (Email-Benachrichtigungen sind deaktiviert).
       </para>
      </step>
      <step>
       <para>
        Zum Aktivieren der Email-Benachrichtigungen ändern Sie <literal>$STATUS_OFF</literal> in die Statusebene, ab der die Email-Berichte gesendet werden sollen, beispielsweise:
       </para>
<screen>STATUS_NOTIFY_LEVEL=$STATUS_SUCCESS</screen>
       <para>
        Weitere Informationen finden Sie unter <xref linkend="vl-sca-mails-notify-level"/>.
       </para>
      </step>
      <step>
       <para>
        So definieren Sie die Liste der Empfänger, an die die Berichte gesendet werden sollen:
       </para>
       <substeps performance="required">
        <step>
         <para>
          Wechseln Sie zum Eintrag <literal>EMAIL_REPORT='root'</literal>.
         </para>
        </step>
        <step>
         <para>
          Ersetzen Sie <literal>root</literal> durch eine Liste der Email-Adressen, an die die SCA-Berichte gesendet werden sollen. Die Email-Adressen müssen jeweils durch ein Komma getrennt werden. Beispiel:
         </para>
<screen>EMAIL_REPORT='tux@my.company.com wilber@your.company.com'</screen>
        </step>
       </substeps>
      </step>
      <step>
       <para>
        Speichern und schließen Sie die Datei. Die Änderungen treten ohne Neustart des Rechners in Kraft. Alle künftigen SCA-Berichte werden an die angegebenen Adressen gesendet.
       </para>
      </step>
     </procedure>
    </sect4>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-backup">
    <title>Sichern und Wiederherstellen der Datenbank</title>
    <para>
     Mit dem Kommando <command>scadb</command> können Sie die MariaDB-Datenbank, in der die SCA-Berichte gespeichert werden, sichern und wiederherstellen. <command>scadb</command> wird im Paket <package>sca-appliance-broker</package> bereitgestellt.
    </para>
    <procedure>
     <title>Sichern der Datenbank</title>
     <step>
      <para>
       Melden Sie sich an der Systemkonsole des Servers, auf dem die SCA-Appliance ausgeführt wird, als <systemitem class="username">root</systemitem>-Benutzer an.
      </para>
     </step>
     <step>
      <para>
       Versetzen Sie die Appliance mit dem folgenden Kommando in den Wartungsmodus:
      </para>
<screen><prompt role="root">root # </prompt>scadb maint</screen>
     </step>
     <step>
      <para>
       Starten Sie die Sicherung mit:
      </para>
<screen><prompt role="root">root # </prompt>scadb backup</screen>
      <para>
       Die Daten werden in einem TAR-Archiv gespeichert: <filename>sca-backup-*sql.gz</filename>.
      </para>
     </step>
     <step>
      <para>
       Wenn Sie mit der Schemaerstellungsdatenbank eigene Schemata entwickelt haben (siehe <xref linkend="sec-admsupport-sca-patterns"/>), sichern Sie diese Daten ebenfalls:
      </para>
<screen><prompt role="root">root # </prompt>sdpdb backup</screen>
      <para>
       Die Daten werden in einem TAR-Archiv gespeichert: <filename>sdp-backup-*sql.gz</filename>.
      </para>
     </step>
     <step>
      <para>
       Kopieren Sie die folgenden Daten auf einen anderen Rechner oder auf ein externes Speichermedium:
      </para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         <filename>sca-backup-*sql.gz</filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>sdp-backup-*sql.gz</filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>/usr/lib/sca/patterns/local</filename> (nur wenn Sie benutzerdefinierte Schemata erstellt haben)
        </para>
       </listitem>
      </itemizedlist>
     </step>
     <step>
      <para>
       Reaktivieren Sie die SCA-Appliance mit:
      </para>
<screen><prompt role="root">root # </prompt>scadb reset agents</screen>
     </step>
    </procedure>
    <procedure>
     <title>Wiederherstellen der Datenbank</title>
     <para>
      Zum Wiederherstellen der Datenbank aus der Sicherung gehen Sie wie folgt vor:
     </para>
     <step>
      <para>
       Melden Sie sich an der Systemkonsole des Servers, auf dem die SCA-Appliance ausgeführt wird, als <systemitem class="username">root</systemitem>-Benutzer an.
      </para>
     </step>
     <step>
      <para>
       Kopieren Sie die jüngsten TAR-Archive mit der Bezeichnung <filename>sca-backup-*sql.gz</filename> und <filename>sdp-backup-*sql.gz</filename> auf den SCA-Appliance-Server.
      </para>
     </step>
     <step>
      <para>
       Dekomprimieren Sie die Dateien mit:
      </para>
<screen><prompt role="root">root # </prompt>gzip -d *-backup-*sql.gz</screen>
     </step>
     <step>
      <para>
       Importieren Sie die Daten mit dem folgenden Kommando in die Datenbank:
      </para>
<screen><prompt role="root">root # </prompt>scadb import sca-backup-*sql</screen>
     </step>
     <step>
      <para>
       Wenn Sie mit der Schemaerstellungsdatenbank eigene Schemata entwickelt haben, importieren Sie außerdem die nachfolgenden Daten mit:
      </para>
<screen><prompt role="root">root # </prompt>sdpdb import sdp-backup-*sql</screen>
     </step>
     <step>
      <para>
       Wenn Sie benutzerdefinierte Schemata verwenden, stellen Sie außerdem die Datei <filename>/usr/lib/sca/patterns/local</filename> aus den Sicherungsdaten wieder her.
      </para>
     </step>
     <step>
      <para>
       Reaktivieren Sie die SCA-Appliance mit:
      </para>
<screen><prompt role="root">root # </prompt>scadb reset agents</screen>
     </step>
     <step>
      <para>
       Aktualisieren Sie die Schemamodule in der Datenbank mit:
      </para>
<screen><prompt role="root">root # </prompt>sdagent-patterns -u</screen>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 xml:id="sec-admsupport-sca-patterns">
   <title>Entwickeln von benutzerdefinierten Analyseschemata</title>
   <para>
    Die SCA-Appliance bietet eine umfangreiche Schemaentwicklungsumgebung (die SCA-Schemadatenbank), mit der Sie eigene, benutzerdefinierte Schemata erstellen können. Schemata können in jeder beliebigen Programmiersprache geschrieben sein. Damit sie für das Supportconfig-Analyseverfahren zur Verfügung stehen, müssen sie im Verzeichnis <filename>/usr/lib/sca/patterns/local</filename> gespeichert und ausführbar gemacht werden. Die benutzerdefinierten Schemata werden dann im Rahmen des Analyseberichts sowohl von der SCA-Appliance als auch vom SCA-Werkzeug für neue Supportconfig-Archive ausgeführt. Weitere Anweisungen zum Erstellen (und Testen) der benutzerdefinierten Schemata finden Sie unter <link xlink:href="https://www.suse.com/c/blog/sca-pattern-development/"/>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-admsupport-install">
  <title>Sammeln von Informationen bei der Installation</title>
  <para>
   Während der Installation ist <command>supportconfig</command> nicht verfügbar. Sie können Protokolldateien von YaST jedoch mithilfe von <command>save_y2logs</command> sammeln. Dieses Kommando erstellt ein <filename>.tar.xz</filename>-Archiv im Verzeichnis <filename>/tmp</filename>.
  </para>
  
  <para>
   Wenn bereits früh Probleme bei der Installation auftreten, können Sie möglicherweise Informationen aus der durch <command>linuxrc</command> erstellten Protokolldatei sammeln. <command>linuxrc</command> ist ein kleines Kommando, das vor dem Start von YaST ausgeführt wird. Diese Protokolldatei finden Sie unter <filename>/var/log/linuxrc.log</filename>.
  </para>
  <important>
   <title>Installationsprotokolldateien sind im installierten System nicht verfügbar</title>
   <para>
    Die während der Installation verfügbaren Protokolldateien sind im installierten System nicht mehr verfügbar. Speichern Sie die Installationsprotokolldateien ordnungsgemäß, während das Installationsprogramm noch ausgeführt wird.
   </para>
  </important>
 </sect1>

 <sect1 xml:id="sec-admsupport-kernel">
  <title>Unterstützung für Kernelmodule</title>

  <para>
   Eine wichtige Anforderung für jedes Enterprise-Betriebssystem ist der Grad der Unterstützung für die jeweilige Umgebung. Kernelmodule sind die wichtigsten Bindeglieder zwischen der Hardware (<quote>Controller</quote>) und dem Betriebssystem. Die Kernelmodule in SUSE Linux Enterprise umfassen jeweils das Flag <literal>supported</literal>, das drei mögliche Werte annehmen kann:
  </para>

  <itemizedlist mark="bullet" spacing="normal">

   <listitem>
    <para>
     <quote>Ja</quote>, daher <literal>supported</literal>
    </para>
   </listitem>
   <listitem>
    <para>
     <quote>Extern</quote>, daher <literal>supported</literal>
    </para>
   </listitem>
   <listitem>
    <para>
     <quote/> (leer, nicht festgelegt), daher <literal>unsupported</literal>
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Es gelten die folgenden Regeln:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Alle Module eines selbst rückkompilierten Kernels sind standardmäßig als nicht unterstützt gekennzeichnet.
    </para>
   </listitem>
   <listitem>
    <para>
     Kernelmodule, die von den SUSE-Partnern unterstützt und über das <literal>SUSE SolidDriver-Programm</literal> bereitgestellt, sind als <quote>extern</quote> gekennzeichnet.
    </para>
   </listitem>
   <listitem>
    <para>
     Wenn das Flag <literal>supported</literal> nicht gesetzt ist, wird der Kernel beim Laden dieses Moduls unbrauchbar. Unbrauchbare Kernel werden nicht unterstützt. Die nicht unterstützten Kernel-Module befinden sich in einem separaten RPM-Paket (<systemitem>kernel-<replaceable>FLAVOR</replaceable>-extra</systemitem>). Dieses Paket ist lediglich für SUSE Linux Enterprise Desktop und SUSE Linux Enterprise Workstation Extension verfügbar. Diese Kernel werden standardmäßig nicht geladen (<replaceable>FLAVOR</replaceable>=<literal>default</literal>|<literal>xen</literal>|...). Darüber hinaus sind diese nicht unterstützten Module im Installationsprogramm nicht verfügbar, und das Kernelpaket <systemitem class="resource">kernel-<replaceable>FLAVOR</replaceable>-extra</systemitem>ist kein Bestandteil der SUSE Linux Enterprise-Medien.
    </para>
   </listitem>
   <listitem>
    <para>
     Kernelmodule, die nicht unter einer zur Lizenz des Linux-Kernels kompatiblen Lizenz bereitgestellt werden, machen den Kernel ebenfalls unbrauchbar. Weitere Informationen finden Sie unter <filename>/usr/src/linux/Documentation/sysctl/kernel.txt</filename> und dem Status <filename>/proc/sys/kernel/tainted</filename>.
    </para>
   </listitem>
  </itemizedlist>

  <sect2 xml:id="sec-admsupport-kernel-background">
   <title>Technischer Hintergrund</title>
   <para/>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Linux-Kernel: Der Standardwert für <filename>/proc/sys/kernel/unsupported</filename> bei SUSE Linux Enterprise <literal>15 SP3</literal> lautet <phrase role="productnumber"><phrase os="sles;sled">2</phrase></phrase> (<literal>do not warn in syslog when loading unsupported modules</literal> [keine Warnung im Syslog, wenn nicht unterstützte Module geladen werden]). Dieser Standardwert wird im Installationsprogramm und im installierten System verwendet. Weitere Informationen finden Sie unter <filename>/usr/src/linux/Documentation/sysctl/kernel.txt</filename>.
     </para>
    </listitem>
    <listitem>
     <para>
      <command>modprobe</command>: Das Dienstprogramm <command>modprobe</command> zum Prüfen der Modulabhängigkeiten und zum Laden der Module prüft den Wert des Flags <literal>supported</literal>. Beim Wert <quote>Ja</quote> oder <quote>Extern</quote> wird das Modul geladen, ansonsten nicht. Weitere Informationen, wie Sie dieses Verhalten außer Kraft setzen, finden Sie in <xref linkend="sec-admsupport-kernel-unsupported"/>.
     </para>
     <note>
      <title>Support</title>
      <para>
       SUSE bietet im Allgemeinen keine Unterstützung für das Entfernen von Speichermodulen mit <command>modprobe -r</command>.
      </para>
     </note>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec-admsupport-kernel-unsupported">
   <title>Arbeiten mit nicht unterstützten Modulen</title>
   <para>
    Auch wenn die allgemeine Unterstützung wichtig ist, können Situationen auftreten, in denen das Laden eines nicht unterstützten Moduls erforderlich ist. Zum Beispiel zu Testzwecken oder für die Fehlersuche oder wenn Ihr Hardwarehersteller ein Hotfix zur Verfügung stellt.
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Zum Überschreiben des Standardwerts bearbeiten Sie die Datei <filename>/etc/modprobe.d/10-unsupported-modules.conf</filename>, und ändern Sie den Wert der Variablen <varname>allow_unsupported_modules</varname> zu <literal>1</literal>. Falls in der initrd ein nicht unterstütztes Modul erforderlich ist, müssen Sie zur Aktualisierung der initrd auch <command>dracut</command> <option>-f</option> ausführen.
     </para>
     <para>
      Falls Sie nur einmalig versuchen möchten, ein Modul zu laden, verwenden Sie die Option <option>--allow-unsupported-modules</option> für <command>modprobe</command>. Weitere Informationen finden Sie auf der man-Seite zu <command>modprobe</command>.
     </para>
    </listitem>
    <listitem>
     <para>
      Während der Installation werden nicht unterstützte Module u. U. über Treiberaktualisierungs-Datenträger hinzugefügt und entsprechend geladen. Soll das Laden von nicht unterstützten Modulen beim Booten und zu späteren Zeitpunkten erzwungen werden, verwenden Sie die Kernel-Befehlszeile <option>oem-modules</option>. Beim Installieren und Initialisieren des Pakets <systemitem class="resource">suse-module-tools</systemitem> wird das Kernel-Flag <literal>TAINT_NO_SUPPORT</literal> (<filename>/proc/sys/kernel/tainted</filename>) ausgewertet. Ist das Kernel bereits unbrauchbar, wird <literal>allow_unsupported_modules</literal> aktiviert. Damit wird verhindert, dass nicht unterstützte Module im zu installierenden System zu Fehlern führen. Wenn während der Installation keine nicht unterstützten Module vorhanden sind und die andere spezielle Kernel-Befehlszeilenoption (<option>oem-modules=1</option>) nicht verwendet wird, so werden nicht unterstützte Module dennoch standardmäßig nicht zugelassen.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Beachten Sie, dass der Kernel und das gesamte System nicht mehr durch SUSE unterstützt werden, sobald nicht unterstützte Module geladen und ausgeführt werden.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-admsupport-moreinfo">
  <title>Weitere Informationen</title>

  <para/>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <command>man supportconfig</command> – man-Seite zu <command>supportconfig</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man supportconfig.conf</command> – man-Seite zur Supportconfig-Konfigurationsdatei.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man scatool</command> – man-Seite zu <command>scatool</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man scadb</command> – man-Seite zu <command>scadb</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man setup-sca</command> – man-Seite zu <command>setup-sca</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://mariadb.com/kb/en/"/> – Dokumentation zur MariaDB.
    </para>
   </listitem>
   
   
   <listitem>
    <para>
     <link xlink:href="https://www.suse.com/c/blog/sca-pattern-development/"/> – Anweisungen zum Erstellen (und Testen) benutzerdefinierter SCA-Schemata.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://www.suse.com/c/blog/basic-server-health-check-supportconfig/"/> – Grundlegende Server-Integritätsprüfung mit supportconfig.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://community.microfocus.com/t5/GroupWise-Tips-Information/Create-Your-Own-Supportconfig-Plugin/ta-p/1783289"/> – Erstellen eines eigenen supportconfig-Plug-ins.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://www.suse.com/c/blog/creating-a-central-supportconfig-repository/"/> – Erstellen eines zentralen supportconfig-Repositorys.
    </para>
    <para>
     <remark>taroth 2014-04-25: jrecord, should we still refer to the three articles above? </remark>
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
</chapter>
