<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_prep_zseries_prep_i.xml" version="5.0" xml:id="sec-zseries-prep">
 <title>Preparazione per l&apos;installazione</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  In questo capitolo viene illustrato come rendere accessibili i dati per l&apos;installazione, installare <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> con metodi differenti e preparare e utilizzare l&apos;IPL del sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Il capitolo offre inoltre informazioni sulla configurazione e sull&apos;installazione della rete.
 </para>

 <sect2 xml:id="sec-prep-makeavail">
  <title>Rendere disponibili i dati dell&apos;installazione</title>
  <para>
   In questa sezione sono contenute informazioni dettagliate su come rendere accessibili i dati di installazione del sistema IBM Z di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> per l&apos;installazione. Scegliere l&apos;installazione NFS o FTP in base al computer e all&apos;ambiente di sistema in uso. Se nel proprio ambiente sono in esecuzione workstation di Microsoft Windows, è possibile utilizzare la rete Windows (incluso il protocollo SMB) per installare <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> nel sistema IBM Z.
  </para>
  <tip>
   <title>IPL da DVD</title>
   <para>
    È possibile effettuare l&apos;IPL da DVD e utilizzare quest&apos;ultimo come supporto di installazione. Questa operazione è molto pratica se vi sono restrizioni di configurazione in un server di installazione che fornisce supporti di installazione in rete. Il prerequisito è un&apos;unità DVD SCSI collegata tramite FCP.
   </para>
  </tip>
  <note>
   <title>nessuna installazione da disco rigido</title>
   <para>
    Non è possibile eseguire l&apos;installazione da un disco rigido copiando il contenuto del DVD in una partizione su un disco DASD.
   </para>
  </note>
  <sect3 xml:id="sec-prep-makeavail-linuxws">
   <title>Utilizzo di una workstation Linux o di un DVD di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
   <para>
    È possibile utilizzare una postazione di lavoro Linux nell&apos;ambiente del computer per fornire i dati di installazione al processo di installazione IBM Z mediante NFS o FTP.<phrase os="sles"> Se la postazione di lavoro Linux esegue <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, è possibile configurare un server di installazione (NFS o FTP) utilizzando il modulo <guimenu>Server di installazione</guimenu> di YaST come descritto nella <xref linkend="sec-deployment-instserver-sles9"/>&#x002E;</phrase>
   </para>
   <important>
    <title>esportazione di dispositivi montati via NFS</title>
    <para>
     L&apos;esportazione della directory root del file system (<filename>/</filename>) non implica l&apos;esportazione automatica dei dispositivi montati, ad esempio i DVD. È quindi necessario denominare in modo esplicito il punto di montaggio in <filename>/etc/exports</filename>:
    </para>
<screen>/media/dvd  *(ro)</screen>
    <para>
     Dopo aver modificato questo file, riavviare il server NFS con il comando <command>sudo systemctl restart nfsserver</command>.
    </para>
   </important>
   <para>
    Per configurare un server FTP in un sistema Linux è necessario installare e configurare software server, ad esempio <package>vsftpd</package>.<phrase os="sles"> Se si utilizza <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, vedere il <xref linkend="cha-ftp"/> per le istruzioni di installazione.</phrase> Poiché non è possibile effettuare il download dei dati di installazione tramite login anonimo, è necessario configurare il server FTP in modo da supportare l&apos;autenticazione degli utenti.
   </para>
   <sect4 xml:id="sec-prep-makeavail-linuxws-oncd">
    <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> su DVD</title>
    <para>
     Il primo supporto di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> per IBM Z contiene un&apos;immagine Linux di avvio per le postazioni di lavoro basate su Intel e un&apos;immagine per la piattaforma IBM Z.
    </para>
    <para>
     Per le postazioni di lavoro basate su Intel, eseguire l&apos;avvio da questo supporto. Quando richiesto, selezionare la lingua di risposta e la mappatura della tastiera desiderati, quindi <guimenu>Avvia sistema di ripristino</guimenu>. Per questa operazione sono necessari almeno 64 MB di RAM. Non è necessario alcuno spazio sul disco perché l&apos;intero di sistema di ripristino risiede nella RAM della postazione di lavoro. Questo approccio prevede la configurazione manuale della rete della postazione di lavoro.
    </para>
    <para>
     Per IBM Z, eseguire l&apos;IPL del guest LPAR/VM da questo supporto, come descritto nella <xref linkend="sec-prep-ipling-lpar-dvd"/>. Dopo aver immesso i parametri di rete, il sistema di installazione tratta il supporto come origine dei dati di installazione. Poiché non è possibile connettere direttamente a IBM Z un terminale compatibile con X11, occorre scegliere se eseguire l&apos;installazione tramite VNC o SSH. SSH fornisce inoltre un&apos;installazione grafica tramite tunnelling della connessione X attraverso SSH mediante <command>ssh -X</command>.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-makeavail-windowsws">
   <title>Utilizzo di una workstation Microsoft Windows</title>
   <para>
    È possibile utilizzare una postazione di lavoro Microsoft Windows nella rete per rendere disponibili i supporti di installazione. A tale scopo, il metodo più semplice consiste nell&apos;utilizzare il protocollo SMB. Assicurarsi che l&apos;opzione <guimenu>SMB su TCP/IP</guimenu> sia attivata per garantire l&apos;incapsulamento dei pacchetti SMB in pacchetti TCP/IP. Le informazioni dettagliate sono disponibili nella Guida online di Windows o nella documentazione Windows relativa alle connessioni di rete.
   </para>
   <sect4 xml:id="sec-prep-makeavail-windowsws-smb">
    <title>Utilizzo di SMB</title>
    <para>
     Per rendere disponibili i supporti di installazione con SMB, inserire l&apos;unità flash USB con il file SLE-15-SP4-Online-<replaceable>ARCH</replaceable>-GM-media1.iso nella porta USB della postazione di lavoro Windows. Creare quindi una nuova condivisione utilizzando la lettera dell&apos;unità flash USB e renderla disponibile a tutti gli utenti in rete.
    </para>
    
    <para>
     Il percorso di installazione in YaST può essere:
    </para>
<screen>smb://<replaceable>DOMAIN</replaceable>;<replaceable>USER</replaceable>:<replaceable>PW</replaceable>@<replaceable>SERVERNAME</replaceable>/<replaceable>SHAREPATH</replaceable></screen>
    <para>
     Dove i segnaposto significano:
    </para>
    <variablelist>
     <varlistentry>
      <term><replaceable>DOMINIO</replaceable></term>
      <listitem>
       <para>
        Gruppo di lavoro o dominio active directory facoltativi.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>USER</replaceable></term>
      <term><replaceable>PW</replaceable></term>
      <listitem>
       <para>
        Nome utente e password facoltativi di un utente autorizzato ad accedere al server e alle rispettive condivisioni.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>SERVERNAME</replaceable></term>
      <listitem>
       <para>
        Nome del server host delle condivisioni.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>SHAREPATH</replaceable></term>
      <listitem>
       <para>
        Percorso delle condivisioni.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para/>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-windowsws-nfs">
    <title>NFS</title>
    <para>
     Consultare la documentazione fornita con il prodotto di terze parti che consente di abilitare i servizi del server NFS per la workstation Windows in uso. L&apos;unità flash USB contenente il supporto SLE-15-SP4-Online-<replaceable>ARCH</replaceable>-GM-media1.iso deve trovarsi al percorso NFS disponibile.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-windowsws-ftp">
    <title>Utilizzo di FTP</title>
    <para>
     Consultare la documentazione fornita con il prodotto di terze parti che consente di abilitare i servizi del server FTP per la postazione di lavoro Windows in uso. L&apos;unità flash USB contenente il supporto SLE-15-SP4-Online-<replaceable>ARCH</replaceable>-GM-media1.iso deve trovarsi al percorso FTP disponibile.
    </para>
    <para>
     Il server FTP incluso in alcune versioni di Microsoft Windows implementa solo un sottoinsieme di comandi FTP e non è idoneo per fornire i dati di installazione. In questo caso, utilizzare un server FTP di terze parti che fornisca la funzionalità richiesta.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-windowsws-scsi">
    <title>Utilizzo di un&apos;unità DVD SCSI collegata tramite FCP</title>
    <para>
     Dopo l&apos;esecuzione di IPL dal DVD SCSI, come descritto nella <xref linkend="sec-prep-ipling-lpar-dvd"/>, il sistema di installazione utilizzerà il DVD come supporto di installazione. In tal caso, non sarà necessario il supporto di installazione su un server FTP, NFS o SMB. Tuttavia, saranno necessari i dati di configurazione della rete per <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, in quanto occorre configurare la rete durante l&apos;installazione per eseguire un&apos;installazione grafica tramite VNC o X.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-makeavail-zpxe-cobbler">
   <title>Utilizzo di un server Cobbler per zPXE</title>
   <para>
    Per l&apos;esecuzione dell&apos;IPL dalla rete è necessario un server Cobbler per fornire il kernel, il file initrd e i dati di installazione. La preparazione del server Cobbler è costituita dai seguenti passaggi:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      <xref xrefstyle="select:label nopage" linkend="sec-prep-makeavail-zpxe-cobbler-import"/>
     </para>
    </listitem>
    <listitem>
     <para>
      <xref xrefstyle="select:label nopage" linkend="sec-prep-makeavail-zpxe-cobbler-add-distro"/>
     </para>
    </listitem>
    <listitem>
     <para>
      <xref xrefstyle="select:label nopage" linkend="sec-prep-makeavail-zpxe-cobbler-profile"/>
     </para>
    </listitem>
    <listitem>
     <para>
      <xref xrefstyle="select:label nopage" linkend="sec-prep-makeavail-zpxe-cobbler-system"/>
     </para>
    </listitem>
   </itemizedlist>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-import">
    <title>Importazione dei dati di installazione</title>
    <para>
     Per l&apos;importazione dei supporti è necessario che la sorgente di installazione sia disponibile sul server Cobbler da un&apos;unità flash USB o da un&apos;origine di rete. Eseguire il seguente comando per importare i dati:
    </para>
<screen><prompt>&gt; </prompt><command>sudo</command> cobbler import --path=<replaceable>PATH</replaceable><co xml:id="co-cobbler-import-path"/> --name=<replaceable>IDENTIFIER</replaceable><co xml:id="co-cobbler-import-dirname"/> --arch=s390x</screen>
    <calloutlist>
     <callout arearefs="co-cobbler-import-path">
      <para>
       Punto di montaggio dei dati di installazione
      </para>
     </callout>
     <callout arearefs="co-cobbler-import-dirname">
      <para>
       Una stringa che identifica il prodotto importato, ad esempio <quote>sles15_s390x</quote>. Tale stringa viene utilizzata come nome per la sottodirectory in cui vengono copiati i dati dell&apos;installazione. Su un server Cobbler in esecuzione su SUSE Linux Enterprise la stringa è <filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable></filename>. Il percorso può essere diverso se Cobbler viene eseguito su un altro sistema operativo.
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-add-distro">
    <title>Aggiunta di una distribuzione</title>
    <para>
     L&apos;aggiunta di una distribuzione indica a Cobbler di fornire il kernel e il file initrd necessari per l&apos;esecuzione di IPL tramite zPXE. Eseguire il comando seguente sul server Cobbler per aggiungere <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> per IBM Z:
    </para>
<screen><prompt>&gt; </prompt><command>sudo</command> cobbler distro add --arch=s390 --breed=suse --name="<replaceable>IDENTIFIER</replaceable>"<co xml:id="co-cobbler-add-identifier"/> \
  --os-version=<phrase os="sles;sled">sles15</phrase><co xml:id="co-cobbler-add-os"/> \
  --initrd=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/initrd<co xml:id="co-cobbler-add-initrd"/> \
  --kernel=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/linux<co xml:id="co-cobbler-add-kernel"/> \
  --kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co xml:id="co-cobbler-add-server"/>
    </screen>    
    <calloutlist>
     <callout arearefs="co-cobbler-add-identifier">
      <para os="sles;sled;osuse">
       Identificatore univoco per la distribuzione, ad esempio <quote>SLES <phrase role="productnumber"><phrase os="sles;sled">15 SP4</phrase></phrase> IBM Z</quote>.
      </para>
      
     </callout>
     <callout arearefs="co-cobbler-add-os">
      <para>
       Identificatore del sistema operativo. Utilizzare <literal>sles15</literal>.
      </para>
     </callout>
     <callout arearefs="co-cobbler-add-initrd">
      <para>
       Percorso del file initrd. La prima parte del percorso (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>) dipende dall&apos;ubicazione dei dati importati e dal nome della sottodirectory scelto durante l&apos;importazione dei dati di installazione.
      </para>
     </callout>
     <callout arearefs="co-cobbler-add-kernel">
      <para>
       Percorso del kernel. La prima parte del percorso (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>) dipende dall&apos;ubicazione dei dati importati e dal nome della sottodirectory scelto durante l&apos;importazione dei dati di installazione.
      </para>
     </callout>
     <callout arearefs="co-cobbler-add-server">
      <para>
       URL della directory di installazione sul server Cobbler. 
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-profile">
    <title>Modifica del profilo</title>
    <para>
     L&apos;aggiunta di una distribuzione (consultare la <xref linkend="sec-prep-makeavail-zpxe-cobbler-add-distro"/>) genera automaticamente un profilo con l&apos;elemento <replaceable>IDENTIFIER</replaceable> corrispondente. Utilizzare il seguente comando per apportare alcune modifiche necessarie:
    </para>
<screen><prompt>&gt; </prompt><command>sudo</command> cobbler distro edit \
--name=<replaceable>IDENTIFIER</replaceable><co xml:id="co-cobbler-profile-name"/> --os-version=sles10<co xml:id="co-cobbler-profile-os"/> --ksmeta=""<co xml:id="co-cobbler-profile-meta"/>
--kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co xml:id="co-cobbler-profile-opts"/></screen>
    <calloutlist>
     <callout arearefs="co-cobbler-profile-name">
      <para>
       Identificatore per il profilo. Utilizzare la stringa specificata durante l&apos;aggiunta della distribuzione.
      </para>
     </callout>
     <callout arearefs="co-cobbler-profile-os">
      <para>
       Versione sistema operativo. Distribuzione alla quale deve essere applicato il profilo. Utilizzare la stringa specificata con <option>--name=<replaceable>IDENTIFIER</replaceable></option> nel passaggio dell&apos;importazione.
      </para>
     </callout>
     <callout arearefs="co-cobbler-profile-meta">
      <para>
       Opzione necessaria per creare modelli di file Kickstart. Poiché non è utilizzata per SUSE, lasciare il campo vuoto.
      </para>
     </callout>
     <callout arearefs="co-cobbler-profile-opts">
      <para>
       Elenco separato da spazi dei parametri kernel. Deve includere almeno il parametro <literal>install</literal>.
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-system">
    <title>Aggiunta di sistemi</title>
    <para>
     L&apos;aggiunta di sistemi al server Cobbler rappresenta l&apos;ultimo passaggio, che deve essere eseguito per ogni guest IBM Z da avviare tramite zPXE. I guest vengono identificati mediante il relativo ID utente z/VM (nel seguente esempio, l&apos;ID <quote>linux01</quote>). L&apos;ID deve essere specificato in lettere minuscole. Per aggiungere un sistema, eseguire il seguente comando:
    </para>
<screen><prompt>&gt; </prompt><command>sudo</command> cobbler system add --name=linux01 --hostname=linux01.example.com \
--profile=<replaceable>IDENTIFIER</replaceable> --interface=qdio \
--ip-address=192.168.2.103 --subnet=192.168.2.255 --netmask=255.255.255.0 \
--name-servers=192.168.1.116 --name-servers-search=example.com \
--gateway=192.168.2.1 --kopts="<replaceable>KERNEL_OPTIONS</replaceable>"</screen>
    <para>
     L&apos;opzione <option>--kopts</option> consente di specificare il kernel e i parametri di installazione in genere indicati nel parmfile. Specificare i parametri utilizzando il seguente formato: <replaceable>PARAMETER1=VALUE1 PARAMETER2=VALUE2</replaceable>. Il programma di installazione richiede di specificare i parametri mancanti. Per un&apos;installazione completamente automatizzata, è necessario specificare tutti i parametri per reti e dischi DASD e fornire un file AutoYaST. Di seguito è riportato un esempio di guest dotato di un&apos;interfaccia OSA che utilizza gli stessi parametri di rete di cui sopra.
    </para>
<screen>--kopts=" \
AutoYaST=http://192.168.0.5/autoinst.xml \
Hostname=linux01.example.com \
Domain=example.com \
HostIP=192.168.2.103 \
Gateway=192.168.2.1 \
Nameserver=192.168.1.116 \
Searchdns=example.com \
InstNetDev=osa; \
Netmask=255.255.255.0 \
Broadcast=192.168.2.255 \
OsaInterface=qdio \
Layer2=0 \
PortNo=0 \
ReadChannel=0.0.0700 \
WriteChannel=0.0.0701 \
DataChannel=0.0.0702 \
DASD=600"</screen>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-makeavail-dvd-usb-hmc">
   <title>Installazione da un&apos;unità flash USB dell&apos;HMC</title>
   <para>
    L&apos;installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> nei server IBM Z richiede in genere una sorgente di installazione di rete. Se non è possibile soddisfare questo requisito, SUSE Linux Enterprise Server consente di utilizzare l&apos;unità flash USB di Hardware Management Console (HMC) come sorgente per l&apos;installazione in una partizione LPAR.
   </para>
   <para>
    Per eseguire l&apos;installazione dall&apos;unità flash USB dell&apos;HMC, procedere come segue:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Aggiungere <option>install=hmc:/</option> al <filename>parmfile</filename> (consultare la <xref linkend="sec-appdendix-parm"/>) o alle opzioni del kernel.
     </para>
    </listitem>
    <listitem>
     <para>
      Nell&apos;installazione in modalità manuale mediante <filename>linuxrc</filename>, selezionare <emphasis role="italic">Avvia installazione</emphasis>, quindi <emphasis role="italic">Installazione</emphasis> e infine <emphasis role="italic">Hardware Management Console</emphasis>. Il supporto di installazione deve essere inserito nell&apos;HMC.
     </para>
    </listitem>
   </itemizedlist>
   <important>
    <title>configurare la rete</title>
    <para>
     Prima di avviare l&apos;installazione, specificare una configurazione di rete in <filename>linuxrc</filename>. Questa operazione non è consentita tramite i parametri di avvio e sarà probabilmente necessario l&apos;accesso alla rete. In <filename>linuxrc</filename> passare ad <emphasis role="italic">Avvia installazione</emphasis> e scegliere <emphasis role="italic">Configurazione di rete</emphasis>.
    </para>
   </important>
   <important>
    <title>avviare prima il sistema Linux</title>
    <para>
     Prima di concedere l&apos;accesso al supporto nell&apos;unità flash USB dell&apos;HMC, attendere l&apos;avvio del sistema Linux. L&apos;esecuzione di un IPL può interrompere la connessione fra l&apos;HMC e la partizione LPAR. Se il primo metodo illustrato non funziona, consentire l&apos;accesso e provare di nuovo a utilizzare l&apos;opzione <option>HMC</option>.
    </para>
   </important>
   <note>
    <title>repository di installazione</title>
    <para>
     L&apos;unità flash USB non viene mantenuta come repository di installazione, in quanto l&apos;installazione è una procedura una tantum. Se è necessario un archivio di installazione, registrare e utilizzare l&apos;archivio online.
    </para>
   </note>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-inst-types">
  <title>Tipi di installazione</title>
  <para>
   In questa sezione vengono descritti i passaggi per ogni modalità di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Una volta completati i passaggi di preparazione descritti nei capitoli precedenti, seguire la panoramica della modalità di installazione desiderata.
  </para>
  <para>
   Come descritto nella <xref linkend="sec-prep-makeavail"/>, sono disponibili tre modalità di installazione distinte per Linux su IBM Z: LPAR, z/VM e guest KVM.
  </para>
  <procedure xml:id="pro-prep-inst-types-lpar">
   <title>Panoramica dell&apos;installazione LPAR</title>
   <step>
    <para>
     Preparare i dispositivi necessari per l&apos;installazione. Vedere <xref linkend="sec-prep-prep-ipl-natlpar"/>.
    </para>
   </step>
   <step>
    <para>
     Effettuare l&apos;IPL del sistema di installazione. Vedere <xref linkend="sec-prep-ipling-lpar"/>.
    </para>
   </step>
   <step>
    <para>
     Configurare la rete. Vedere <xref linkend="sec-prep-netcfg"/>.
    </para>
   </step>
   <step>
    <para>
     Connettersi al sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Vedere <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Avviare l&apos;installazione utilizzando YaST ed eseguire l&apos;IPL del sistema installato. Vedere <xref linkend="cha-install"/>.
    </para>
   </step>
  </procedure>
  <procedure xml:id="pro-prep-inst-types-vm">
   <title>Panoramica dell&apos;installazione z/VM</title>
   <step>
    <para>
     Preparare i dispositivi necessari per l&apos;installazione. Vedere <xref linkend="sec-prep-prep-ipl-vm-linux-guest"/>.
    </para>
   </step>
   <step>
    <para>
     Effettuare l&apos;IPL del sistema di installazione. Vedere <xref linkend="sec-prep-ipling-vm"/>.
    </para>
   </step>
   <step>
    <para>
     Configurare la rete. Vedere <xref linkend="sec-prep-netcfg"/>.
    </para>
   </step>
   <step>
    <para>
     Connettersi al sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Vedere <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Avviare l&apos;installazione utilizzando YaST ed eseguire l&apos;IPL del sistema installato. Vedere <xref linkend="cha-install"/>.
    </para>
   </step>
  </procedure>
  <procedure xml:id="pro-prep-inst-types-kvm">
   <title>Panoramica dell&apos;installazione guest KVM</title>
   <step>
    <para>
     Creare un&apos;immagine del disco virtuale e scrivere un file XML di dominio. Vedere <xref linkend="sec-prep-prep-ipl-kvm"/>.
    </para>
   </step>
   <step>
    <para>
     Preparare la destinazione di installazione ed eseguire l&apos;IPL del guest VM. Vedere <xref linkend="sec-prep-ipling-kvm"/>.
    </para>
   </step>
   <step>
    <para>
     <xref linkend="sec-prep-netcfg-data"/>.
    </para>
   </step>
   <step>
    <para>
     Connettersi al sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Vedere <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Avviare l&apos;installazione utilizzando YaST ed eseguire l&apos;IPL del sistema installato. Vedere <xref linkend="cha-install"/>.
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-prep-prep-ipl">
  <title>Preparazione dell&apos;IPL del sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para/>
  <sect3 xml:id="sec-prep-prep-ipl-natlpar">
   <title>Preparazione dell&apos;IPL di un&apos;installazione LPAR</title>
   <para>
    Configurare il sistema IBM Z per l&apos;avvio in modalità ESA/S390 o solo Linux con un profilo di attivazione appropriato e IOCDS. Per ulteriori informazioni fare riferimento alla documentazione IBM. Procedere come descritto nella <xref linkend="sec-prep-ipling-lpar"/>.
   </para>
  </sect3>
  <sect3 xml:id="sec-prep-prep-ipl-vm">
   <title>Preparazione dell&apos;IPL di un&apos;installazione z/VM</title>
   <para/>
   <sect4 xml:id="sec-prep-prep-ipl-vm-linux-guest">
    <title>Aggiunta di un guest Linux mediante dirMaint</title>
    <para>
     Il primo passaggio consiste nel collegare e formattare uno o più dispositivi DASD nel sistema che deve essere utilizzato dal guest di Linux in z/VM. Creare quindi un nuovo utente in z/VM. Nell&apos;esempio sono illustrati la directory per un utente <literal>LINUX1</literal> con password <literal>LINPWD</literal>, 1 GB di memoria (ampliabile fino a 2 GB), alcuni minidischi (MDISK), due CPU e un dispositivo OSA QDIO.
    </para>
    <tip>
     <title>assegnazione di memoria a guest z/VM</title>
     <para>
      Quando si assegna una quantità di memoria a un guest z/VM, assicurarsi che le dimensioni della memoria siano idonee al tipo di installazione preferito. <phrase os="sles">Vedere la <xref linkend="sec-zseries-requirements-hw-mem"/>&#x002E;</phrase>Per impostare le dimensioni della memoria su 1 GB, usare il comando <command>CP DEFINE STORAGE 1G</command>. Al termine dell&apos;installazione, ripristinare le dimensioni della memoria al valore desiderato.
     </para>
    </tip>
    <example xml:id="ex-prep-prep-ipl-vm-linux-guest-config">
     <title>Configurazione di una directory z/VM</title>
<screen>USER LINUX1 LINPWD 1024M 2048M G
*____________________________________________
* LINUX1
*____________________________________________
* This VM Linux guest has two CPUs defined.

CPU 01 CPUID 111111
CPU 02 CPUID 111222
IPL CMS PARM AUTOCR
IUCV ANY
IUCV ALLOW
MACH ESA 10
OPTION MAINTCCW RMCHINFO
SHARE RELATIVE 2000
CONSOLE 01C0 3270 A
SPOOL 000C 2540 READER *
SPOOL 000D 2540 PUNCH A
SPOOL 000E 3203 A
* OSA QDIO DEVICE DEFINITIONS
DEDICATE 9A0 9A0
DEDICATE 9A1 9A1
DEDICATE 9A2 9A2
*
LINK MAINT 0190 0190 RR
LINK MAINT 019E 019E RR
LINK MAINT 019D 019D RR
* MINIDISK DEFINITIONS
MDISK 201 3390 0001 0050 DASD40 MR ONE4ME TWO4ME THR4ME
MDISK 150 3390 0052 0200 DASD40 MR ONE4ME TWO4ME THR4ME
MDISK 151 3390 0253 2800 DASD40 MR ONE4ME TWO4ME THR4ME</screen>
    </example>
    <para>
     Nell&apos;esempio viene utilizzato il minidisco 201 come disco principale del guest. Il dispositivo di scambio Linux corrisponde al minidisco 150 con 200 cilindri. Il disco 151 con 2800 cilindri include l&apos;installazione Linux.
    </para>
    <para>
     Come utente <systemitem class="username">MAINT</systemitem>, aggiungere il guest alla directory dell&apos;utente mediante il comando <command>DIRM FOR LINUX1 ADD</command>. Immettere il nome del guest (<literal>LINUX1</literal>) e premere <keycap>F5</keycap>. Configurare l&apos;ambiente dell&apos;utente con:
    </para>
<screen>DIRM DIRECT
DIRM USER WITHPASS</screen>
    <para>
     L&apos;ultimo comando restituisce un numero di file del lettore. necessario per il comando successivo:
    </para>
<screen>RECEIVE &lt;number&gt; USER DIRECT A (REPL)</screen>
    <para>
     È possibile eseguire il login sul guest come utente <systemitem class="username">LINUX1</systemitem>.
    </para>
    <para>
     Se l&apos;opzione <literal>dirmaint</literal> non è disponibile, consultare la documentazione IBM su come configurare questo utente.
    </para>
    <para>
     Procedere con la <xref linkend="sec-prep-ipling-vm"/>.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-prep-ipl-kvm">
   <title>Preparazione dell&apos;IPL di un&apos;installazione guest KVM</title>
   <para>
    Per un&apos;installazione guest KVM sono richiesti un file XML di dominio che specifica la macchina virtuale e almeno un&apos;immagine del disco virtuale da utilizzare per l&apos;installazione.
   </para>
   <sect4 xml:id="sec-prep-prep-ipl-kvm-disk">
    <title>Creare un&apos;immagine del disco virtuale</title>
    <para>
     Per impostazione predefinita, libvirt ricerca le immagini dei dischi nella directory <filename>/var/lib/libvirt/images/</filename> dell&apos;host server VM. Sebbene sia possibile memorizzare le immagini anche in qualsiasi altro percorso nel file system, è consigliabile archiviarle tutte in una singola ubicazione per semplificare la manutenzione. Per creare un&apos;immagine, accedere all&apos;host server KVM ed eseguire il comando seguente:
    </para>
<screen>qemu-img create -f qcow2 /var/lib/libvirt/images/s12lin_qcow2.img 10G</screen>
    <para>
     Viene creata un&apos;immagine qcow2 con dimensione di 10 GB in <filename>/var/lib/libvirt/images/</filename>.<phrase os="sles"> Per ulteriori informazioni, vedere il <xref linkend="cha-qemu-guest-inst-qemu-img"/>&#x002E;</phrase>
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-prep-ipl-kvm-domain">
    <title>Scrivere un file XML di dominio</title>
    <para>
     Il file XML di dominio viene utilizzato per definire il guest VM. Per creare il file XML di dominio, aprire in un editor un file vuoto denominato <filename>s15-1.xml</filename> e aggiungere un file simile a quello dell&apos;esempio seguente.
    </para>
    <example>
     <title>Esempio di file XML di dominio</title>
     <para>
      L&apos;esempio seguente crea un guest VM con una singola CPU, 1 GB di RAM e l&apos;immagine del disco virtuale creata nella sezione precedente (<xref linkend="sec-prep-prep-ipl-kvm-disk"/>). Si presuppone che il server virtuale sia associato all&apos;interfaccia di rete host <literal>bond0</literal>. Modificare l&apos;elemento relativo ai dispositivi di origine in base alla configurazione di rete in uso.
     </para>
<screen>&lt;domain type="kvm"&gt;
 &lt;name&gt;s15-1&lt;/name&gt;
 &lt;description&gt;Guest-System SUSE SLES15&lt;/description&gt;
 &lt;memory&gt;1048576&lt;/memory&gt;
 &lt;vcpu&gt;1&lt;/vcpu&gt;
 &lt;os&gt;
  &lt;type arch="s390x" machine="s390-ccw-virtio"&gt;hvm&lt;/type&gt;
  &lt;!-- Boot kernel - remove 3 lines after successfull installation --&gt;
  &lt;kernel&gt;/var/lib/libvirt/images/s15-kernel.boot&lt;/kernel&gt;
  &lt;initrd&gt;/var/lib/libvirt/images/s15-initrd.boot&lt;/initrd&gt;
  &lt;cmdline&gt;linuxrcstderr=/dev/console&lt;/cmdline&gt;
 &lt;/os&gt;
 &lt;iothreads&gt;1&lt;/iothreads&gt;
 &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
 &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
 &lt;on_crash&gt;preserve&lt;/on_crash&gt;
 &lt;devices&gt;
  &lt;emulator&gt;/usr/bin/qemu-system-s390x&lt;/emulator&gt;
  &lt;disk type="file" device="disk"&gt;
   &lt;driver name="qemu" type="qcow2" cache="none" iothread="1" io="native"/&gt;
   &lt;source file="/var/lib/libvirt/images/s15lin_qcow2.img"/&gt;
   &lt;target dev="vda" bus="virtio"/&gt;
  &lt;/disk&gt;
  &lt;interface type="direct"&gt;
   &lt;source dev="bond0" mode="bridge"/&gt;
   &lt;model type="virtio"/&gt;
  &lt;/interface&gt;
  &lt;console type="pty"&gt;
   &lt;target type="sclp"/&gt;
  &lt;/console&gt;
 &lt;/devices&gt;
&lt;/domain&gt;</screen>
    </example>
   </sect4>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-ipling">
  <title>Esecuzione dell&apos;IPL del sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para/>
  <sect3 xml:id="sec-prep-ipling-lpar">
   <title>IPL di un&apos;installazione LPAR</title>
   <para>
    È possibile eseguire l&apos;IPL di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> in un LPAR in diversi modi. Il metodo preferito consiste nell&apos;utilizzo della funzione <guimenu>Load from CD-ROM or server (Carica da CD-ROM o server)</guimenu> di SE o HMC.
   </para>
   <sect4 xml:id="sec-prep-ipling-lpar-cdrom">
    <title>Esecuzione di IPL da un DVD-ROM</title>
    <para>
     Contrassegnare il LPAR da installare e selezionare <guimenu>Load from CD-ROM or server (Carica da CD-ROM o server)</guimenu>. Lasciare vuoto il campo relativo all&apos;ubicazione del file o immettere il percorso della directory root del primo DVD-ROM, quindi selezionare <guimenu>Continua</guimenu>. Mantenere la selezione predefinita nell&apos;elenco di opzioni visualizzato. In <guimenu>Operating system messages</guimenu> (Messaggi del sistema operativo) sono ora disponibili i messaggi di avvio del kernel.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-lpar-dvd">
    <title>IPL da un DVD SCSI collegato tramite FCP</title>
    <para>
     È possibile utilizzare la procedura <guimenu>Load</guimenu> selezionando <guimenu>SCSI</guimenu> come <guimenu>Load type</guimenu> per eseguire IPL da SCSI. Immettere WWPN (Worldwide Port Name) e LUN (Logical Unit Number) forniti dal bridge o dal dispositivo di memorizzazione SCSI (16 cifre, senza omettere gli zero finali). Il selettore del programma di avvio deve essere 2. Utilizzare l&apos;adattatore FCP come <guimenu>indirizzo di caricamento</guimenu> ed eseguire un IPL.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-ipling-vm">
   <title>IPL di un&apos;installazione z/VM</title>
   <para>
    In questa sezione viene descritto come eseguire l&apos;IPL del sistema di installazione al fine di installare <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> per IBM Z in un sistema z/VM.
   </para>
   <sect4 xml:id="sec-prep-ipling-vm-reader">
    <title>IPL dal lettore z/VM</title>
    <para>
     Per trasferire il sistema di installazione tramite FTP sono necessari una connessione TCP/IP funzionante e un programma client FTP nel guest z/VM appena definito. La configurazione TCP/IP per z/VM è al di fuori dell&apos;ambito di questo manuale. Fare riferimento alla documentazione IBM appropriata.
    </para>
    <para>
     Effettuare il login come guest z/VM all&apos;IPL. Rendere disponibile il contenuto della directory <filename>/boot/s390x</filename> del programma di installazione unificato (supporto 1) tramite FTP all&apos;interno della rete. Da questa directory, ottenere i file <filename>linux</filename>, <filename>initrd</filename>, <filename>parmfile</filename> e <filename>sles.exec</filename>. Trasferire i file con dimensioni a blocchi fisse di 80 caratteri. A questo scopo utilizzare il comando FTP <command>locsite fix 80</command>. È importante copiare i file <filename>linux</filename> (il kernel Linux) e <filename>initrd</filename> (l&apos;immagine di installazione) come file binari; per questo motivo, utilizzare la modalità di trasferimento <literal>binaria</literal>. È necessario trasferire <filename>parmfile</filename> e <filename>sles.exec</filename> in modalità ASCII.
    </para>
    <para>
     L&apos;esempio riportato di seguito illustra i passaggi richiesti. In questo specifico scenario si presuppone che i file necessari siano accessibili da un server FTP all&apos;indirizzo IP <literal>192.168.0.3</literal> con account utente <systemitem class="username">lininst</systemitem>.
    </para>
    <example xml:id="ex-prep-ipling-vm-reader-ftp-ftptrans">
     <title>Trasferimento di binari via FTP</title>
<screen>FTP 192.168.0.3
VM TCP/IP FTP Level 530
Connecting to 192.168.0.3, port 21
220 ftpserver FTP server (Version wu-2.4.2-academ[BETA-18](1)
Thu Feb 11 16:09:02 GMT 2010) ready.
USER
lininst
331 Password required for lininst
PASS
******
230 User lininst logged in.
Command:
binary
200 Type set to I
Command:
locsite fix 80
Command:
get /media/dvd1/boot/s390x/linux sles15.linux
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/linux
(10664192 bytes)
226 Transfer complete.
10664192 bytes transferred in 13.91 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/initrd sles12.initrd
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/initrd
(21403276 bytes)
226 Transfer complete.
21403276 bytes transferred in 27.916 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
ascii
200 Type set to A
Command:
get /media/dvd1/boot/s390x/parmfile sles12.parmfile
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/parmfile
(5 bytes)
226 Transfer complete.
5 bytes transferred in 0.092 seconds.
Transfer rate 0.05 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/sles.exec sles.exec
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/sles.exec
(891 bytes)
226 Transfer complete.
891 bytes transferred in 0.097 seconds.
Transfer rate 0.89 Kbytes/sec.
Command:
quit</screen>
    </example>
    <para>
     Utilizzare lo script REXX sles.exec scaricato per eseguire l&apos;IPL del sistema di installazione Linux. Questo script carica il kernel, parmfile, e il disco RAM iniziale nel lettore per IPL:
    </para>
    <example xml:id="ex-prep-ipling-vm-reader-startscript-slesexec">
     <title>SLES12 EXEC</title>
<screen>/* REXX LOAD EXEC FOR SUSE LINUX S/390 VM GUESTS       */
/* LOADS SUSE LINUX S/390 FILES INTO READER            */
SAY ''
SAY 'LOADING SLES12 FILES INTO READER...'
'CP CLOSE RDR'
'PURGE RDR ALL'
'SPOOL PUNCH * RDR'
'PUNCH SLES12 LINUX A (NOH'
'PUNCH SLES12 PARMFILE A (NOH'
'PUNCH SLES12 INITRD A (NOH'
'IPL 00C'</screen>
    </example>
    <para>
     Mediante lo script è possibile eseguire l&apos;IPL del sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> con il comando <command>sles12</command>. Viene avviato il kernel Linux e vengono visualizzati i relativi messaggi di avvio.
    </para>
    <para>
     Per continuare il processo di installazione, passare alla <xref linkend="sec-prep-netcfg"/>.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-vm-dvd">
    <title>IPL da un DVD SCSI collegato tramite FCP</title>
    <para>
     Per eseguire l&apos;IPL in z/VM, è necessario preparare il processo IPL SCSI con il parametro SET LOADDEV:
    </para>
<screen>SET LOADDEV PORTNAME 200400E8 00D74E00 LUN 00020000 00000000 BOOT 2</screen>
    <para>
     Dopo aver impostato il parametro LOADDEV con i valori appropriati, eseguire l&apos;IPL dell&apos;adattatore FCP, ad esempio:
    </para>
<screen>IPL FC00</screen>
    <para>
     Per continuare il processo di installazione, procedere con la <xref linkend="sec-prep-netcfg"/>.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-vm-zpxe">
    <title>IPL da un server Cobbler con zPXE</title>
    <para>
     Per eseguire l&apos;IPL da un server Cobbler con zPXE, è necessario trasferire lo script <filename>zpxe.rexx</filename> via FTP dal server Cobbler al guest z/VM. A tale scopo, per il guest z/VM sono necessari una connessione TCP/IP funzionante e un programma client FTP.
    </para>
    <para>
     Eseguire il login come guest Linux z/VM a IPL e trasferire lo script con una dimensione fissa di 80 caratteri in modalità ASCII (per un esempio, vedere <xref linkend="ex-prep-ipling-vm-reader-ftp-ftptrans"/>). Lo script <filename>zpxe.rexx</filename> è disponibile nel DVD del programma di installazione unificato al percorso <filename>/boot/s390x/zpxe.rexx</filename> o in un server SLE Cobbler in <filename>usr/share/doc/packages/s390-tools/zpxe.rexx</filename>.
    </para>
    <para>
     Lo script <filename>zpxe.rexx</filename> dovrebbe sostituire <filename>PROFILE EXEC</filename> nel guest in uso. Creare una copia di backup di <filename>PROFILE EXEC</filename> e rinominare <filename>ZPXE REXX</filename> in <filename>PROFILE EXEC</filename>. In alternativa, chiamare <filename>ZPXE REXX</filename> dal file <filename>PROFILE EXEC</filename> esistente aggiungendovi la riga <literal>&apos;ZPXE REXX&apos;</literal>.
    </para>
    <para>
     L&apos;ultimo passaggio consiste nella creazione del file di configurazione <filename>ZPXE CONF</filename>, che indica a <filename>ZPXE REXX</filename> il server Cobbler da contattare e il disco di cui eseguire l&apos;IPL. Eseguire <command>xedit zpxe conf a</command> e creare <filename>ZPXE CONF</filename> con il contenuto seguente (sostituire di conseguenza i dati dell&apos;esempio):
    </para>
<screen>HOST cobbler.example.com
IPLDISK 600</screen>
    <para>
     In questo modo il server Cobbler si connette al successivo login al guest z/VM. Se è pianificata sul server Cobbler, l&apos;installazione verrà eseguita . Per pianificare l&apos;installazione, eseguire il seguente comando sul server Cobbler:
    </para>
<screen><prompt>&gt; </prompt><command>sudo</command> cobbler system edit --name <replaceable>ID</replaceable><co xml:id="co-cobbler-sysedit-id"/> --netboot-enabled 1<co xml:id="co-cobbler-sysedit-netboot"/> --profile <replaceable>PROFILENAME</replaceable><co xml:id="co-cobbler-sysedit-profile"/></screen>
    <calloutlist>
     <callout arearefs="co-cobbler-sysedit-id">
      <para>
       ID utente z/VM.
      </para>
     </callout>
     <callout arearefs="co-cobbler-sysedit-netboot">
      <para>
       Abilitare l&apos;esecuzione dell&apos;IPL dalla rete.
      </para>
     </callout>
     <callout arearefs="co-cobbler-sysedit-profile">
      <para>
       Nome di un profilo esistente, vedere la <xref linkend="sec-prep-makeavail-zpxe-cobbler-profile"/>.
      </para>
     </callout>
    </calloutlist>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-ipling-kvm">
   <title>IPL di un&apos;installazione guest KVM</title>
   <para>
    Per avviare l&apos;installazione guest occorre innanzitutto avviare il guest VM definito nella <xref linkend="sec-prep-prep-ipl-kvm-disk"/>. Prima di iniziare, verificare che kernel e initrd siano disponibili per l&apos;IPL.
   </para>
   <sect4 xml:id="sec-prep-ipling-kvm-prep">
    <title>Preparazione dell&apos;origine di installazione</title>
    <para>
     Per eseguire l&apos;IPL del guest VM nel sistema di installazione, è necessario copiare nel server host VM il kernel e il file initrd del sistema di installazione.
    </para>
    <procedure>
     <step>
      <para>
       Eseguire il login all&apos;host KVM e verificare che sia possibile connettersi al dispositivo o all&apos;host remoto che fornisce l&apos;origine di installazione.
      </para>
     </step>
     <step>
      <para>
       Copiare i due file seguenti dall&apos;origine di installazione a <filename>/var/lib/libvirt/images/</filename>. Se i dati vengono forniti da un host remoto, utilizzare <command>ftp</command>, <command>sftp</command> o <command>scp</command> per trasferirli:
      </para>
      <simplelist><member><filename>/boot/s390x/initrd</filename></member><member><filename>/boot/s390x/cd.ikr</filename></member>
      </simplelist>
     </step>
     <step>
      <para>
       Rinominare i file nell&apos;host KVM:
      </para>
<screen><prompt>&gt; </prompt><command>sudo</command> cd /var/lib/libvirt/images/
<prompt>&gt; </prompt><command>sudo</command> mv initrd s15-initrd.boot
<prompt>&gt; </prompt><command>sudo</command> mv cd.ikr s15-kernel.boot</screen>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-kvm-guest">
    <title>IPL del guest VM</title>
    <para>
     Per eseguire l&apos;IPL del guest VM, effettuare il login all&apos;host KVM ed eseguire il comando seguente:
    </para>
<screen><prompt>&gt; </prompt>virsh  create s15-1.xml --console</screen>
    <para>
     Il processo di installazione si avvia quando il guest VM è operativo e verrà visualizzato il seguente messaggio:
    </para>
<screen>Domain s15-1 started
Connected to domain s15-1
Escape character is ^]
Initializing cgroup subsys cpuset
Initializing cgroup subsys cpu
Initializing
cgroup subsys cpuacct
.
.
Please make sure your installation medium is available.
Retry?
0) &lt;-- Back &lt;--
1) Yes
2) No</screen>
    <para>
     Rispondere <guimenu>2) No</guimenu> e, nel passaggio successivo, scegliere <guimenu>Installazione</guimenu>. Procedere come descritto nella <xref linkend="sec-prep-netcfg-data"/>.
    </para>
   </sect4>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-netcfg">
  <title>Configurazione della rete</title>
  <para>
   Attendere che il kernel completi le procedure di avvio. Se si effettua l&apos;installazione in modalità di base o in una partizione LPAR, aprire i <guimenu>Messaggi del sistema operativo</guimenu> nell&apos;HMC o in SE.
  </para>
  <para>
   Selezionare <guimenu>Avvia installazione</guimenu> nel menu principale di <filename>linuxrc</filename>. Selezionare <guimenu>Avvia installazione o aggiorna</guimenu> per avviare il processo di installazione. Selezionare <guimenu>Rete</guimenu> come supporto di installazione, quindi selezionare il tipo di protocollo di rete da utilizzare per l&apos;installazione. La <xref linkend="sec-prep-makeavail"/> spiega come rendere disponibili i dati di installazione per i vari tipi di connessioni di rete. attualmente sono supportati <guimenu>FTP</guimenu>, <guimenu>HTTP</guimenu>, <guimenu>NFS</guimenu> e <guimenu>SMB / CIFS</guimenu> (condivisione di file di Windows).
  </para>
  <para>
   Dall&apos;elenco dei dispositivi disponibili selezionare un dispositivo di rete OSA o HiperSockets per ricevere i dati di installazione. Sebbene l&apos;elenco possa contenere dispositivi CTC, ESCON o IUCV, questi non sono più supportati su <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
  </para>
  <sect3 xml:id="sec-prep-netcfg-hypersockets">
   <title>Configurare un&apos;interfaccia HiperSockets</title>
   <para>
    Selezionare un dispositivo HiperSocket dall&apos;elenco dei dispositivi di rete. Immettere quindi i valori per i canali di lettura, scrittura e dati:
   </para>
   <example xml:id="ex-appdendix-inst-netcontypes-types">
    <title>Tipi di connessione di rete supportati e parametri del driver</title>
<screen>Choose the network device.

 1) IBM parallel CTC Adapter (0.0.0600)
 2) IBM parallel CTC Adapter (0.0.0601)
 3) IBM parallel CTC Adapter (0.0.0602)
 4) IBM Hipersocket (0.0.0800)
 5) IBM Hipersocket (0.0.0801)
 6) IBM Hipersocket (0.0.0802)
 7) IBM OSA Express Network card (0.0.0700)
 8) IBM OSA Express Network card (0.0.0701)
 9) IBM OSA Express Network card (0.0.0702)
10) IBM OSA Express Network card (0.0.f400)
11) IBM OSA Express Network card (0.0.f401)
12) IBM OSA Express Network card (0.0.f402)
13) IBM IUCV

&gt; 4

Device address for read channel. (Enter '+++' to abort).
[0.0.0800]&gt; 0.0.0800

Device address for write channel. (Enter '+++' to abort).
[0.0.0801]&gt; 0.0.0801

Device address for data channel. (Enter '+++' to abort).
[0.0.0802]&gt; 0.0.0802</screen>
   </example>
  </sect3>
  <sect3 xml:id="sec-prep-netcfg-osa">
   <title>Configurare un dispositivo OSA Express</title>
   <para>
    Selezionare un dispositivo OSA Express dall&apos;elenco di dispositivi di rete e specificare un numero di porta. Immettere i valori per i canali di lettura, scrittura e dati. Scegliere se abilitare il supporto OSI Layer 2.
   </para>
   <para>
    Il numero di porta è necessario per i nuovi dispositivi di rete OSA Express 3 a 2 porte. Se non si utilizza un dispositivo OSA Express 3, immettere <literal>0</literal>. Le schede OSA Express posso essere eseguite in modalità di <quote>supporto per OSI Layer 2</quote> o nella modalità precedente <quote>Layer 3</quote>, più comune. La modalità della scheda riguarda tutti i sistemi che condividono il dispositivo, compresi i sistemi su altre partizioni LPAR. In caso di dubbi, specificare <literal>2</literal> per la compatibilità con la modalità di default utilizzata da altri sistemi operativi, quali z/VM e z/OS. Per ulteriori informazioni su queste opzioni, consultare l&apos;amministratore dell&apos;hardware.
   </para>
   <example xml:id="ex-appdendix-inst-netcontypes-gigabit-param">
    <title>Parametri del driver per il dispositivo di rete</title>
<screen>Choose the network device.

 1) IBM parallel CTC Adapter (0.0.0600)
 2) IBM parallel CTC Adapter (0.0.0601)
 3) IBM parallel CTC Adapter (0.0.0602)
 4) IBM Hipersocket (0.0.0800)
 5) IBM Hipersocket (0.0.0801)
 6) IBM Hipersocket (0.0.0802)
 7) IBM OSA Express Network card (0.0.0700)
 8) IBM OSA Express Network card (0.0.0701)
 9) IBM OSA Express Network card (0.0.0702)
10) IBM OSA Express Network card (0.0.f400)
11) IBM OSA Express Network card (0.0.f401)
12) IBM OSA Express Network card (0.0.f402)
13) IBM IUCV

&gt; 7

Enter the relative port number. (Enter '+++' to abort).
&gt; 0

Device address for read channel. (Enter '+++' to abort).
[0.0.0700]&gt; 0.0.0700

Device address for write channel. (Enter '+++' to abort).
[0.0.0701]&gt; 0.0.0701

Device address for data channel. (Enter '+++' to abort).
[0.0.0702]&gt; 0.0.0702

Enable OSI Layer 2 support?

0) &lt;-- Back &lt;--
1) Yes
2) No

&gt; 1

MAC address. (Enter '+++' to abort).
&gt; +++</screen>
   </example>
  </sect3>
  <sect3 xml:id="sec-prep-netcfg-data">
   <title>Configurare la rete e selezionare l&apos;origine di installazione</title>
   <para>
    Una volta terminata l&apos;immissione di tutti i parametri dei dispositivi di rete, vengono installati i relativi driver e vengono visualizzati i messaggi del kernel corrispondenti.
   </para>
   <para>
    Successivamente è necessario specificare se configurare i parametri dell&apos;interfaccia di rete con l&apos;autoconfigurazione DHCP. Poiché DHCP funziona solo su alcuni dispositivi e richiede specifiche impostazioni di configurazione hardware, selezionare <guimenu>NO</guimenu>. In questo modo viene richiesto di specificare i seguenti parametri di rete:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      l&apos;indirizzo IP del sistema in corso di installazione
     </para>
    </listitem>
    <listitem>
     <para>
      la maschera di rete corrispondente (se non è stata specificata con l&apos;indirizzo IP)
     </para>
    </listitem>
    <listitem>
     <para>
      l&apos;indirizzo IP di un gateway per raggiungere il server
     </para>
    </listitem>
    <listitem>
     <para>
      un elenco di domini di ricerca inclusi nel server DNS (Domain Name Server)
     </para>
    </listitem>
    <listitem>
     <para>
      l&apos;indirizzo IP del server dei nomi di dominio
     </para>
    </listitem>
   </itemizedlist>
   <example xml:id="ex-prep-netcfg-vm-network-setup">
    <title>Parametri di rete</title>
<screen>Automatic configuration via DHCP?

0) &lt;-- Back &lt;--
1) Yes
2) No

&gt; 2

Enter your IP address with network prefix.

You can enter more than one, separated by space, if necessary.
Leave empty for autoconfig.

Examples: 192.168.5.77/24 2001:db8:75:fff::3/64. (Enter '+++' to abort).
&gt; 192.168.0.20/24

Enter your name server IP address.

You can enter more than one, separated by space, if necessary.
Leave empty if you don't need one.

Examples: 192.168.5.77 2001:db8:75:fff::3. (Enter '+++' to abort).
&gt; 192.168.0.1

Enter your search domains, separated by a space:. (Enter '+++' to abort).
&gt; example.com

Enter the IP address of your name server. Leave empty if you do not need one. (En
ter '+++' to abort).
&gt; 192.168.0.1</screen>
   </example>
   <para>
    Fornire infine le informazioni necessarie per il server di installazione, ad esempio l&apos;indirizzo IP, la directory contenente i dati di installazione e le credenziali di accesso. Il sistema di installazione viene caricato dopo aver fornito le informazioni richieste.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-connect">
  <title>Connessione al sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para>
   Dopo il caricamento del sistema di installazione, linuxrc richiede di scegliere il tipo di visualizzazione da utilizzare per controllare la procedura di installazione. Le opzioni disponibili sono: <literal>Remote X11</literal> (X Window System), <literal>VNC</literal> (protocollo Virtual Network Computing), <literal>SSH</literal> (modalità testo o installazione X11 tramite Secure Shell), <literal>Text-based UI</literal> e <literal>Graphical UI</literal>. L&apos;ultima opzione consente di avviare YaST in modalità grafica su uno schermo grafico locale, se presente. Nell&apos;architettura s390x, è possibile implementare uno schermo grafico locale tramite QEMU e il driver <systemitem>virtio-gpu</systemitem>.
   </para>
   <para>
   Le opzioni consigliate sono <literal>VNC</literal> o <literal>SSH</literal>.
   </para>
  <para>
   Se si seleziona l’opzione <literal>Text-based UI</literal>, YaST viene avviato in modalità testo ed è possibile eseguire l&apos;installazione direttamente nel terminale.<phrase os="sles">Per istruzioni su come utilizzare YaST in modalità testo, vedere il <xref linkend="cha-yast-text"/>.</phrase> L’opzione <literal>Text-based UI</literal> è utile soltanto quando si esegue l’installazione in LPAR.
  </para>
  <note>
   <title>emulazione del terminale per l’opzione Text-based UI</title>
   <para>
    Per utilizzare YaST in modalità testo, è necessario eseguire il prodotto in un terminale con emulazione VT220/Linux (o <literal>Text-based UI</literal>).
   </para>
  </note>
  <sect3 xml:id="sec-inst-connect-vnc-inst">
   <title>Inizializzazione dell&apos;installazione per VNC</title>
   <para>
    Per controllare in remoto un&apos;installazione tramite VNC, seguire la procedura riportata di seguito:
   </para>
   <procedure>
    <step>
     <para>
      Selezionando l&apos;opzione <literal>VNC</literal>, viene avviato il server VNC. Una breve nota nella console indica l&apos;indirizzo IP e il numero di visualizzazione per la connessione a vncviewer.
     </para>
    </step>
    <step>
     <para>
      Quando viene richiesto, immettere l&apos;indirizzo IP e il numero di visualizzazione del sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
    </step>
    <step>
     <para>
      Quando viene richiesto, immettere l&apos;indirizzo IP e il numero di visualizzazione del sistema di installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
<screen>http://&lt;IP address of installation system&gt;:5801/</screen>
    </step>
    <step>
     <para>
      Dopo aver stabilito la connessione, eseguire l&apos;installazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> con YaST.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec-inst-connect-x">
   <title>Inizializzazione dell&apos;installazione per X Window System</title>
   <important>
    <title>meccanismo di autenticazione di X</title>
    <para>
     L&apos;installazione diretta con il sistema X Window si fonda su un meccanismo di autenticazione basato sui nomi degli host. Questo meccanismo è disabilitato nelle versioni correnti di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. È consigliabile eseguire l&apos;installazione mediante SSH o VNC.
    </para>
   </important>
   <para>
    Per controllare in remoto un&apos;installazione tramite l&apos;inoltro del server X, seguire la procedura riportata di seguito:
   </para>
   <procedure>
    <step>
     <para>
      Assicurarsi che il server X consenta la connessione del client (ovvero il sistema installato). Impostare la variabile <command>DISPLAYMANAGER_XSERVER_TCP_PORT_6000_OPEN=&quot;yes&quot;</command> nel file <filename>/etc/sysconfig/displaymanager</filename>. Riavviare il server X e consentire al client di associarsi al server utilizzando <command>xhost <replaceable>CLIENT_IP_ADDRESS</replaceable></command>.
     </para>
    </step>
    <step>
     <para>
      Quando richiesto nel sistema di installazione, immettere l&apos;indirizzo IP del computer in cui è in esecuzione il server X.
     </para>
    </step>
    <step>
     <para>
      Dopo l&apos;apertura di YaST avviare l&apos;installazione.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec-inst-connect-ssh">
   <title>Inizializzazione dell&apos;installazione per SSH</title>
   <para>
    Per connettersi a un sistema di installazione denominato <literal>earth</literal> utilizzando SSH, eseguire il comando <command>ssh -X earth</command>. Se la postazione di lavoro è in esecuzione su Microsoft Windows, utilizzare lo strumento PuTTY disponibile all&apos;indirizzo <link xlink:href="http://www.chiark.greenend.org.uk/~sgtatham/putty/"/>. In Putty impostare <guimenu>Abilita inoltro X11</guimenu>, nella sezione <menuchoice>
    <guimenu> Connessione</guimenu> <guimenu> SSH</guimenu> <guimenu> X11</guimenu>
    </menuchoice>.
   </para>
   <para>
    Se si utilizza un altro sistema operativo, eseguire <command>ssh -X </command> per connettersi a un sistema di installazione di nome <systemitem>earth</systemitem>earth. Se è disponibile un server X locale, è supportato l&apos;X-Forwarding su SSH. In caso contrario YaST fornisce un&apos;interfaccia di testo tramite ncurses.
   </para>
   <para>
    Quando viene richiesto, immettere il nome utente <literal>root</literal> e accedere con la password personale. Immettere <command>yast.ssh</command> per avviare YaST. YaST guida quindi l&apos;utente in tutta la procedura di installazione.
   </para>
   <important>
    <title>correzione di un problema di YaST su SSH</title>
    <para>
     In alcuni casi, l&apos;esecuzione della versione dell&apos;interfaccia grafica utente di YaST su SSH con inoltro X può avere esito negativo con il seguente messaggio di errore:
    </para>
<screen>XIO: fatal IO error 11 (Resource temporarily unavailable) on X server "localhost:11.0"</screen>
    <para>
     In questo caso sono disponibili due opzioni.
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Eseguire YaST con l&apos;opzione <option>QT_XCB_GL_INTEGRATION=none</option>, ad esempio:
      </para>
<screen>QT_XCB_GL_INTEGRATION=none yast.ssh
QT_XCB_GL_INTEGRATION=none yast2 disk</screen>
     </listitem>
     <listitem>
      <para>
       Eseguire la versione ncurses dell&apos;applicazione YaST disabilitando l&apos;inoltro X o specificando ncurses come interfaccia utente desiderata. Per la seconda opzione, utilizzare il comando <command>yast2 disk --ncurses</command> oppure <command>YUI_PREFERED_BACKEND=ncurses yast2 disk</command>.
      </para>
     </listitem>
    </itemizedlist>
   </important>
   <para>
    Continuare con la procedura di installazione come descritto nel <xref linkend="cha-install"/>.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-boot-procedure">
  <title>Procedura di avvio di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> su IBM Z</title>
  <para>
   In SLES 10 e 11 il processo di avvio veniva gestito dal boot loader zipl. Per consentire l&apos;avvio da partizioni Btrfs e supportare rollback di sistema con Snapper, è stata modificata la modalità di avvio di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> su IBM Z.
  </para>
  <para>
   GRUB 2 sostituisce zipl in <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> per IBM Z. GRUB 2 nell&apos;architettura AMD64/Intel 64 include driver di dispositivi a livello di firmware per accedere al file system. Nel mainframe non è presente alcun firmware e l&apos;aggiunta di <literal>ccw</literal> a GRUB 2, che costituisce già un&apos;impresa impegnativa, comporterebbe anche una reimplementazione di zipl in GRUB 2. Pertanto <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> adotta un approccio in due fasi:
  </para>
  <variablelist>
   <varlistentry>
    <term>Fase uno:</term>
    <listitem>
     <para>
      Una partizione distinta contenente il kernel e un file initrd viene montata in <filename>/boot/zipl</filename>. Il kernel e l&apos;initrd vengono caricati via zipl utilizzando la configurazione specificata in <filename>/boot/zipl/config</filename>.
     </para>
     <para>
      Questa configurazione aggiunge la parola chiave <literal>initgrub</literal> alla riga di comando del kernel. Dopo il caricamento del kernel e del file initrd, quest&apos;ultimo attiva i dispositivi necessari per montare il file system radice (vedere <filename>/boot/zipl/active_devices.txt</filename>). Viene quindi avviato un programma con spazio utente GRUB 2, che legge il file <filename>/boot/grub2/grub.cfg</filename>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Fase due:</term>
    <listitem>
     <para>
      Il kernel e l&apos;initrd specificati in <filename>/boot/grub2/grub.cfg</filename> vengono avviati con il comando <command>kexec</command>. Verranno quindi attivati i dispositivi elencati in <filename>/boot/zipl/active_devices.txt</filename> necessari per avviare il sistema su disco. Gli altri dispositivi presenti nell&apos;elenco saranno inclusi nella white list, ma saranno ignorati. Il file system root è montato e la procedura di avvio continua come sulle altre architetture.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <para os="sles">
   Per ulteriori dettagli sul processo di avvio, fare riferimento a <xref linkend="cha-boot"/>.
  </para>
 </sect2>
</sect1>
