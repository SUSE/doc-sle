<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_postinstall_slemicro.xml" version="5.0" xml:id="cha-postintall-registration">
 <title>Schritte nach der Bereitstellung</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    In diesem Kapitel wird die Registrierung von SLE Micro beschrieben und die verfügbaren Erweiterungen für SLE Micro werden vorgestellt.
   </para>
  </abstract>
 </info>

 <sect1 xml:id="sec-images-registration">
  <title>Registrierung</title>

  <para>
   Mit dem Befehl <command>transactional-update register</command> können Sie das System über die Befehlszeile registrieren. Informationen, die über den Umfang dieses Abschnitts hinausgehen, finden Sie in der Inline-Dokumentation zu <command>SUSEConnect --help</command>.
  </para>

  <procedure>
   <title>Produktregistrierung mit SUSE Connect</title>
   <step>
    <para>
     Führen Sie zur Registrierung von <phrase role="productname"><phrase os="slemicro">SUSE Linux Enterprise Micro</phrase></phrase> beim SUSE Customer Center <command>transactional-update
     register</command> wie folgt aus:
    </para>
<screen><prompt role="root"># </prompt>transactional-update register -r <replaceable>REGISTRATION_CODE</replaceable> -e <replaceable>EMAIL_ADDRESS</replaceable></screen>
    <para>
     Soll die Registrierung über einen lokalen Registrierungsserver erfolgen, geben Sie zusätzlich die URL des Servers an:
    </para>
<screen><prompt role="root"># </prompt>transactional-update register -r <replaceable>REGISTRATION_CODE</replaceable> -e <replaceable>EMAIL_ADDRESS</replaceable> \
--url "https://suse_register.example.com/"</screen>
    <para>
     Ersetzen Sie <replaceable>REGISTRATION_CODE</replaceable> durch den Registrierungscode, den Sie mit der Version von <phrase role="productname"><phrase os="slemicro">SUSE Linux Enterprise Micro</phrase></phrase> erhalten haben. Ersetzen Sie <replaceable>EMAIL_ADDRESS</replaceable> durch die E-Mail-Adresse für das SUSE-Konto, mit dem Sie oder Ihr Unternehmen die Abonnements verwalten.
    </para>
   </step>
   <step>
    <para>
     Booten Sie Ihr System neu, um zum neuesten Snapshot zu wechseln.
    </para>
   </step>
   <step>
    <para>
     <phrase role="productname"><phrase os="slemicro">SUSE Linux Enterprise Micro</phrase></phrase> ist nun registriert.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-adding-extension">
  <title>Verwalten von Erweiterungen</title>

  <para>
   SLE Micro unterstützt die folgenden Erweiterungen:
  </para>
<variablelist>
    <varlistentry>
        <term><literal>SUSE Linux Enterprise Live Patching</literal></term>
        <listitem>
            <para>
               Die Erweiterung ist nur für x86-Architekturen (ausgenommen Echtzeit-Kernel) und IBM Z-Architekturen verfügbar. Für diese Erweiterung ist unter Umständen ein zusätzliches Abonnement erforderlich.
            </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><literal>Package Hub</literal></term>
        <listitem>
            <para>
                Ein kostenloses Modul, das Zugriff auf von der Community betreute Pakete bietet. Die Pakete im Package Hub wurden von SUSE für die Verwendung unter SUSE Linux Enterprise Server freigegeben und können daher möglicherweise nicht unter SLE Micro installiert werden.
            </para>
        </listitem>
    </varlistentry>
</variablelist>
   <para>
   Bei der Aktivierung oder Deaktivierung der Erweiterung wird der Befehl <command>transactional-update</command> ausgeführt und ein neuer Snapshot erstellt. Sie müssen daher das System neu starten, damit der Start im neuen Snapshot erfolgt und die Änderungen übernommen werden.
  </para>

  <sect2 xml:id="sec-slemicro-live-patching">
   <title>Aktivieren von Erweiterungen</title>
   <para>
    Gehen Sie wie folgt vor, um eine Erweiterung zu aktivieren:
   </para>
   <procedure>
    <step>
     <para>
      Listen Sie die verfügbaren Erweiterungen auf, indem Sie folgenden Befehl ausführen:
     </para>
<screen><prompt role="root"># </prompt>transactional-update --quiet register -list-extensions</screen>
    </step>
    <step>
     <para>
      Die Ausgabe enthält einen Befehl zum Aktivieren der Erweiterungen, beispielsweise für <literal>SUSE Linux Enterprise Live Patching</literal>:
     </para>
<screen>
<prompt role="root"># </prompt>transactional-update register -p sle-module-live-patching/15.4/x86_64 \
  -r <replaceable>registration code</replaceable>
</screen>
    </step>
</procedure>
<para>
    Wenn Sie die Erweiterung <literal>SUSE Linux Enterprise Live Patching</literal> aktiviert haben, müssen Sie zusätzliche Schritte durchführen, wie unten beschrieben:
    </para>

    <procedure xml:id="pro-completing-KLP-activation">
        <title>Abschließen der Aktivierung von <literal>SUSE Linux Enterprise Live Patching</literal></title>
    <step>
     <para>
      Konfigurieren Sie <literal>libzypp</literal> in der Datei <filename>/etc/zypp/zypp.conf</filename> wie folgt:
     </para>
     <variablelist>
      <varlistentry>
       <term><literal>multiversion = provides:multiversion(kernel)</literal></term>
       <listitem>
        <para>
         Damit wird der aktuelle Kernel auch beim Patching des Systems weiterhin ausgeführt; ansonsten können Abhängigkeitskonflikte bei der Anwendung von Kernel-Aktualisierungen auftreten.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><literal>multiversion.kernels = latest</literal></term>
       <listitem>
        <para>
         Nach Anwendung des Live-Patches werden die Kernel im neuen Snapshot bereinigt. Wenn dies nicht angegeben ist, behält der Snapshot den bisherigen Kernel bei und wendet auch Kernel-Aktualisierungen auf den vorherigen Kernel an.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </step>
    <step>
     <para>
      Zusätzlich legen Sie <literal>LIVEPATCH_KERNEL='always'</literal> in der Datei <filename>/etc/sysconfig/livepatching</filename> fest.
     </para>
     <note>
      <title>Übereinstimmende Version von <literal>kernel-default-livepatch</literal> und Kernel</title>
      <para>
       Damit die Live-Patches auch nach einem Kernel-Upgrade installiert werden, installieren Sie die passende Version des Pakets <literal>kernel-default-livepatch</literal>.
      </para>
     </note>
    </step>
    <step>
     <para>
      Installieren Sie anschließend die Erweiterung, indem Sie folgenden Befehl ausführen:
     </para>
<screen><prompt role="root"># </prompt>transactional-update pkg install kernel-default-livepatch</screen>
    </step>
    <step>
     <para>
      Booten Sie Ihr System neu, um zum neuen Snapshot zu wechseln.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-disable-live-patching">
   <title>Deaktivieren von Erweiterungen</title>
   <para>
    Führen Sie den folgenden Befehl aus, um die Erweiterung zu deaktivieren:
   </para>
   <screen>
<prompt role="root"># </prompt>transactional-update register -d \
  -p <replaceable>EXTENSION_NAME</replaceable>
</screen>

   <para>
    Für die Erweiterung <literal>SUSE Linux Enterprise Live Patching</literal> lautet der Befehl beispielsweise wie folgt:
   </para>
<screen>
<prompt role="root"># </prompt>transactional-update register -d \
  -p sle-module-live-patching/15.4/x86_64
</screen>
  </sect2>
 </sect1>
</chapter>
