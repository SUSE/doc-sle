<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_sw_repo.xml" version="5.0" xml:id="sec-yast-software-instsource">
 <title>管理软件源和服务</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  要安装第三方软件，请向系统添加软件源。默认情况下，系统注册后会自动配置产品软件源（例如 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-DVD <phrase role="productnumber"><phrase os="sles;sled">15 SP4</phrase></phrase>）和匹配的更新软件源。<phrase os="sles;sled">有关注册的更多信息，请参见<xref linkend="sec-yast-install-scc-registration"/>或<xref linkend="sec-update-registersystem"/></phrase>。根据最初所选的产品，可能还会配置包含翻译、词典等的附加软件源。
 </para>

 <para>
  要管理软件源，请启动 YaST，并选择<menuchoice>
  <guimenu>软件</guimenu> <guimenu>软件源</guimenu>
  </menuchoice>。将打开<guimenu>已配置软件源</guimenu>对话框。在此，还可以通过将对话框右角的<guimenu>视图</guimenu>更改为<guimenu>所有服务</guimenu>来管理所谓的<guimenu>服务</guimenu>订阅。此环境中的服务是一种<guimenu>软件源索引服务</guimenu> (RIS)，它能提供一个或多个软件源。此类服务可通过其管理员或供应商手动更改。
 </para>

 <para>
  每个软件源都提供描述软件源内容（软件包名称、版本等）的文件。这些软件源描述文件将下载到 YaST 使用的本地缓存中。为了确保完整性，可使用软件源维护人员的 GPG 密钥来为软件源签名。每当您添加新的软件源时，YaST 都可让您导入其密钥。
 </para>

 <warning>
  <title>信任外部软件源</title>
  <para>
   将外部软件源添加到您的软件源列表前，请先确保此软件源可信。对于因安装的来自第三方软件源中的软件引起的任何问题，SUSE 不承担任何责任。
  </para>
 </warning>

 <sect2 xml:id="sec-yast-software-instsource-add">
  <title>添加软件源</title>
  <para>
   可以从 DVD/CD、USB 闪存盘、本地目录、ISO 映像或网络源添加软件源。
  </para>
  <para>
   要通过 YaST 的<guimenu>已配置的软件源</guimenu>对话框添加软件源，请执行以下步骤：
  </para>
  <procedure>
   <step>
    <para>
     单击<guimenu>添加</guimenu>。
    </para>
   </step>
   <step>
    <para>
     选择对话框中列出的选项之一：
    </para>
    <figure xml:id="fig-y2-sw-repo-new">
     <title>添加软件源</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_addon_new.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_addon_new.png" width="65%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       要通过 SLP 在网络中扫描宣告了其服务的安装服务器，请选择<guimenu>使用 SLP 扫描</guimenu>，然后单击<guimenu>下一步</guimenu>。
      </para>
     </listitem>
     <listitem>
      <para>
       要从可卸媒体添加安装源，请选择相关选项，并在计算机中插入媒体或连接 USB 设备。单击<guimenu>下一步</guimenu>开始安装。
      </para>
     </listitem>
     <listitem>
      <para>
       对于大多数软件源，在选择相应的选项并单击<guimenu>下一步</guimenu>后，系统会提示您指定媒体的路径（或 URL）。可以选择性地指定<guimenu>软件源名称</guimenu>。如果不指定任何软件源名称，YaST 将使用产品的名称或 URL 作为软件源名称。
      </para>
     </listitem>
    </itemizedlist>
    <para>
     默认情况下已激活<guimenu>下载软件源说明文件</guimenu>选项。如果停用该选项，YaST 稍后会根据需要自动下载这些文件。
    </para>
   </step>
   <step>
    <para>
     根据您添加的软件源，系统可能会提示您导入软件源的 GPG 密钥，或者要求您同意许可条款。
    </para>
    <para>
     确认这些消息后，YaST 将下载并分析元数据。它会将软件源添加到<guimenu>已配置软件源</guimenu>列表。
    </para>
   </step>
   <step>
    <para>
     如果需要，请根据<xref linkend="sec-yast-software-instsource-manage"/>中所述调整软件源的<guimenu>属性</guimenu>。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>确定</guimenu>确认所做的更改，并关闭配置对话框。
    </para>
   </step>
   <step>
    <para>
     成功添加软件源之后，会启动软件管理器，您可以从此软件源安装软件包。有关细节，请参见<xref linkend="cha-yast-software"/>。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-yast-software-instsource-manage">
  <title>管理软件源属性</title>
  <para>
   通过<guimenu>软件源</guimenu>的<guimenu>已配置的软件源</guimenu>概述，可以更改以下软件源属性：
  </para>
  <variablelist>
   <varlistentry>
    <term>状态</term>
    <listitem>
     <para>
      软件源状态可以为<guimenu>已启用</guimenu>或<guimenu>已禁用</guimenu>。您只能从已启用的软件源安装软件包。要暂时关闭某个软件源，请将它选中并停用<guimenu>启用</guimenu>。您还可以双击某个软件源名称来切换其状态。要彻底去除某个软件源，请单击<guimenu>删除</guimenu>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>刷新</term>
    <listitem>
     <para>
      刷新软件源时，会将其内容描述（软件包名称、版本等）下载到 YaST 使用的本地缓存中。对于诸如 CD 或 DVD 之类的静态软件源，该操作执行一次就已足够，而对于内容经常改变的软件源，应经常进行刷新。要使软件源的缓存保持最新，最简单的方式就是选择<guimenu>自动刷新</guimenu>。要执行手动刷新，请单击<guimenu>刷新</guimenu>并选择一个选项。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>保留已下载的软件包</guimenu>
    </term>
    <listitem>
     <para>
      安装前从远程软件源下载软件包。默认情况下，这些软件包安装成功后即会删除。激活<guimenu>保留已下载的软件包</guimenu>可防止删除已下载的软件包。下载位置在 <filename>/etc/zypp/zypp.conf</filename> 中配置，默认为 <filename>/var/cache/zypp/packages</filename>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>优先级</guimenu>
    </term>
    <listitem>
     <para>
      软件源<guimenu>优先级</guimenu>是一个介于 <literal>1</literal> 和 <literal>200</literal> 之间的值，<literal>1</literal> 是最高优先级，<literal>200</literal> 是最低优先级。默认情况下，通过 YaST 添加的任何新软件源的优先级都是 <literal>99</literal>。如果您不在意某个软件源的优先级值，还可以将值设置为 <literal>0</literal>，表示对该软件源应用默认优先级 (<literal>99</literal>)。如果有多个软件源都提供了某个软件包，那么将优先使用优先级最高的软件源。因此，要避免从因特网下载不需要的软件包，可以为本地软件源（如 DVD）指定较高优先级。
     </para>
     <important>
      <title>优先级与版本的对比</title>
      <para>
       在任何情况下，优先级最高的软件源都是优先的。因此，请确保更新软件源总是具有最高优先级，否则您可能会安装过时的版本，直到下一次联机更新时才会更新该版本。
      </para>
     </important>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>名称和 URL</term>
    <listitem>
     <para>
      要更改软件源名称或其 URL，可以从列表中单击选择它，然后单击<guimenu>编辑</guimenu>。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec-yast-software-repo-gpg-keys">
  <title>管理软件源密钥</title>
  <para>
   为了确保完整性，可使用软件源维护人员的 GPG 密钥来为软件源签名。每当您要添加新的软件源时，YaST 都可让您导入其密钥。像校验任何其他 GPG 密钥一样对它进行校验，并确保它未更改。如果检测到密钥更改，则说明软件源可能存在错误。禁用它作为软件源，直到知道密钥更改原因为止。
  </para>
  <para>
   要管理所有导入的密钥，请在<guimenu>已配置的软件源</guimenu>对话框中单击 <guimenu>GPG 密钥</guimenu>。用鼠标选择一个项以在窗口底部显示密钥属性。单击相应按钮可<guimenu>添加</guimenu>、<guimenu>编辑</guimenu>或<guimenu>删除</guimenu>密钥。
  </para>
 </sect2>
</sect1>
