<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_images_description.xml" version="5.0" xml:id="cha-images-description">
 <title>Beschreibung der vordefinierten Images</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  SLE Micro kann mithilfe von vordefinierten Images bereitgestellt werden. Aktuell stehen zwei Arten von Images zur Verfügung: Raw-Datenträger-Images und selbstinstallierende ISOs.
 </para>
 <para>
  SLE Micro-Raw-Images werden für die AMD64-/Intel 64-Architektur, IBM Z ZSeries sowie AArch64 geliefert. Die selbstinstallierenden Images werden aktuell nur für die AMD64-/Intel 64-Architektur geliefert. Die vordefinierten Images sind beim ersten Starten entweder mit Ignition oder Combustion zu konfigurieren. Der Bootloader erkennt den ersten Startvorgang; weitere Informationen finden Sie in <xref linkend="sec-first-boot"/>. Für jedes Image werden standardmäßig bestimmte Subvolumes eingehängt (siehe <xref linkend="sec-default-partitioning"/>). In <xref linkend="cha-images-procedure"/> wird erläutert, wie diese Images bereitgestellt werden.
 </para>
 <important>
  <title>Keine gemeinsame Nutzung der Firewall mit Podman</title>
  <para>
   Wenn Sie die Firewall zusammen mit Podman nutzen, kann dies dazu führen, dass Podman-spezifische Firewall-Regeln nach dem Neuladen des <literal>firewalld</literal>-Dienstes fehlen. Es wird daher empfohlen, die Firewall deaktiviert zu lassen, wenn Sie mit Podman arbeiten möchten.
  </para>
 </important>
 <note>
  <title>SLE Micro als VM-Host-Server</title>
  <para>
   SLE Micro kann als KVM-Host-Server ausgeführt werden – Xen wird nicht unterstützt. Die Ausführung von SLE Micro als VM-Host-Server ist allerdings mit mehreren Einschränkungen verbunden. Detaillierte Informationen finden Sie in <link xlink:href="https://documentation.suse.com/sles/15-SP3/html/SLES-all/cha-virt-support.html">Virtualization limits and support</link> (Einschränkungen und Unterstützung der Virtualisierung).
  </para>
 </note>
 <sect1 xml:id="sec-default-partitioning">
  <title>Standardpartitionierung</title>

  <para>
   Die vordefinierten Images werden mit einem standardmäßigen Partitionierungsschema geliefert, das beim ersten Starten mit Ignition oder Combustion geändert werden kann. Eine Anleitung zur Neupartitionierung des Systems finden Sie in <xref linkend="sec-ignition-configuration"/> oder <xref linkend="sec-combustion-script"/>.
  </para>

  <important>
   <title>Btrfs ist für das Root-Dateisystem obligatorisch</title>
   <para>
    Wenn Sie Änderungen am standardmäßigen Partitionierungsschema vornehmen möchten, muss das Root-Dateisystem Btrfs verwendet werden.
   </para>
  </important>

  <para>
   Jedes Image enthält die folgenden Subvolumes:
  </para>

<screen>
 /home
 /root
 /opt
 /srv 
 /usr/local
 /var
 </screen>

  <para>
   Standardmäßig sind in den Images außerdem Subvolumes zum Starten eingehängt. Die genauen Subvolumes sind abhängig von der jeweiligen Architektur.
  </para>

  <para>
   Das Verzeichnis <literal>/etc</literal> wird als „overlayfs“ eingehängt, wobei das oberste Verzeichnis in <filename>/var/lib/overlay/1/etc/</filename> eingehängt wird.
  </para>

  <para>
   Sie können die standardmäßig eingehängten Subvolumes mit der Option <literal>x-initrd.mount</literal> in <filename>/etc/fstab</filename> ermitteln. Andere Subvolumes oder Partitionen müssen entweder mit Ignition oder mit Combustion konfiguriert werden.
  </para>
 </sect1>
 <sect1 xml:id="sec-first-boot">
  <title>Erkennung des ersten Startvorgangs</title>

  <para>
   Die Konfiguration wird nur beim ersten Starten ausgeführt. Zur Unterscheidung zwischen dem ersten Starten und nachfolgenden Startvorgängen wird die Flag-Datei <filename>/boot/writable/firstboot_happened</filename> nach dem ersten Starten erstellt. Falls sich die Datei nicht im Dateisystem befindet, wird das Attribut <literal>ignition.firstboot</literal> an die Kernel-Befehlszeile übergeben, die die Erstellung von <filename>initramfs</filename> (Ignition) bzw. die Ausführung des dracut-Moduls (Combustion) auslöst. Nach Abschluss des ersten Startvorgangs wird die Flag-Datei <filename>/boot/writable/firstboot_happened</filename> erstellt.
  </para>

  <note>
   <title>Die Flag-Datei wird immer erstellt</title>
   <para>
    Die Flag-Datei <filename>/boot/writable/firstboot_happened</filename> wird selbst dann erstellt, wenn die Konfiguration nicht erfolgreich ist, beispielsweise weil Konfigurationsdateien fehlerhaft sind oder ganz fehlen.
   </para>
   
   <para>
    Sie können die Konfiguration für das erste Starten auch bei einem späteren Startvorgang erzwingen. Übergeben Sie hierzu das Attribut <literal>ignition.firstboot</literal> an die Kernel-Befehlszeile oder löschen Sie die Flag-Datei <filename>/boot/writable/firstboot_happened</filename>.
   </para>
  </note>
 </sect1>
</chapter>
