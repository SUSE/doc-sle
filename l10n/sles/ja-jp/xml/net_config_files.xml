<?xml version="1.0" encoding="UTF-8"?>
<sect2 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="net_config_files.xml" version="5.0" xml:id="sec-network-manconf-files">
 <title>環境設定ファイル</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  ここでは、ネットワークの環境設定ファイルの概要を紹介し、その目的と使用される形式について説明します。
 </para>
 <sect3 xml:id="wicked-configuration-common-xml">
  <title><filename>/etc/wicked/common.xml</filename></title>
  <para>
   <filename>/etc/wicked/common.xml</filename>ファイルには、すべてのアプリケーションが使用する共通定義が含まれます。このディレクトリにある他の設定ファイルにより読み込まれ、インクルードされます。このファイルを使用して、すべての<literal>wicked</literal>コンポーネントのデバッグを有効にすることはできますが、その場合はファイル<filename>/etc/wicked/local.xml</filename>を使用することをお勧めします。保守アップデートを適用すると、<filename>/etc/wicked/common.xml</filename>が上書きされて、変更内容が失われる可能性があります。デフォルトインストールでは、<filename>/etc/wicked/common.xml</filename>に<filename>/etc/wicked/local.xml</filename>がインクルードされるので、通常は<filename>/etc/wicked/common.xml</filename>を変更する必要はありません。
  </para>
  <para>
   <literal>&lt;use-nanny&gt;</literal>を<literal>false</literal>に設定して<literal>nanny</literal>を無効にする場合は、<literal>wickedd.service</literal>を再起動してから、次のコマンドを実行してすべての構成とポリシーを適用します。
  </para>
<screen><prompt>&gt; </prompt><command>sudo</command> wicked ifup all</screen>
  <note>
   <title>環境設定ファイル</title>
   <para>
    <literal>wickedd</literal>、<literal>wicked</literal>、または<literal>nanny</literal>の各プログラムは、それぞれの固有の設定ファイルが存在しない場合に、<filename>/etc/wicked/common.xml</filename>の読み込みを試みます。
   </para>
  </note>
 </sect3>
 <sect3 xml:id="wicked-configuration-server-xml">
  <title><filename>/etc/wicked/server.xml</filename></title>
  <para>
   ファイル<filename>/etc/wicked/server.xml</filename>は、起動時に<literal>wickedd</literal>サーバプロセスによって読み込まれます。このファイルには、<filename>/etc/wicked/common.xml</filename>の拡張機能が保存されます。さらに、リゾルバの処理および<literal>addrconf</literal>サプリカント(DHCPなど)からの情報の受信を設定します。
  </para>
  <para>
   このファイルに必要な変更は、<filename>/etc/wicked/server.xml</filename>にインクルードされる、別ファイルの<filename>/etc/wicked/server-local.xml</filename>に追加することをお勧めします。別ファイルを使用することによって、保守更新中に変更内容が上書きされることはなくなります。
  </para>
 </sect3>
 <sect3 xml:id="wicked-configuration-client-xml">
  <title><filename>/etc/wicked/client.xml</filename></title>
  <para>
   <filename>/etc/wicked/client.xml</filename>は、<command>wicked</command>コマンドによって使用されます。このファイルでは、ibftにより管理されるデバイスを検出するときに使用されるスクリプトの場所を指定し、ネットワークインタフェース設定の場所を設定します。
  </para>
  <para>
   このファイルに必要な変更は、<filename>/etc/wicked/server.xml</filename>にインクルードされる、別ファイルの<filename>/etc/wicked/client-local.xml</filename>に追加することをお勧めします。別ファイルを使用することによって、保守更新中に変更内容が上書きされることはなくなります。
  </para>
 </sect3>
 <sect3 xml:id="wicked-configuration-nanny-xml">
  <title><filename>/etc/wicked/nanny.xml</filename></title>
  <para>
   <filename>/etc/wicked/nanny.xml</filename>は、リンク層の種類を設定します。設定に独自の変更を加えた場合は、保守更新時に変更内容が失われることがないよう、別ファイルの<filename>/etc/wicked/nanny-local.xml</filename>にそれらの設定を追加しておくことをお勧めします。
  </para>
 </sect3>
 <sect3 xml:id="sec-network-manconf-files-ifcfg">
  <title><filename>/etc/sysconfig/network/ifcfg-*</filename></title>
  <para>
   これらのファイルには、ネットワークインタフェースの従来の環境設定が含まれています。
  </para>
  <note>
   <title><command>wicked</command>および<filename>ifcfg-*</filename>ファイル</title>
   <para>
    <command>wicked</command>は、<literal>compat:</literal>プレフィクスを指定した場合にのみ、これらのファイルを読み取ります。<filename>/etc/wicked/client.xml</filename>にある<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>のデフォルト設定に応じて、<command>wicked</command>は、<filename>/etc/wicked/ifconfig</filename>内のXML設定ファイルの前にこれらのファイルを読み込もうとします。
   </para>
   <para>
    <option>--ifconfig</option>スイッチは、多くの場合テストでのみ指定します。指定した場合、<filename>/etc/wicked/ifconfig</filename>に定義されたデフォルトの環境設定ソースは適用されません。
   </para>
  </note>
  <para>
   <filename>ifcfg-*</filename>ファイルには、起動モードやIPアドレスなどの情報が含まれています。指定可能なパラメータについては、<systemitem>ifup</systemitem>のマニュアルページを参照してください。また、一般的設定を1つのインタフェースだけに使用する場合は、<filename>dhcp</filename>および<filename>wireless</filename>ファイルのほとんどの変数を<filename>ifcfg-*</filename>ファイルで使用できます。ただし、<filename>/etc/sysconfig/network/config</filename>の変数の大半はグローバル変数であり、<literal>ifcfg</literal>ファイル内で上書きすることはできません。たとえば、<systemitem>NETCONFIG_*</systemitem>は、グローバル変数です。
  </para>
  <para>

   <systemitem>macvlan</systemitem>および<systemitem>macvtab</systemitem>インタフェースの設定方法については、<systemitem>ifcfg-macvlan</systemitem>および<systemitem>ifcfg-macvtap</systemitem>のマニュアルページを参照してください。たとえば、macvlanインタフェースでは、<filename>ifcfg-macvlan0</filename>を次のように設定します。
  </para>
<screen>STARTMODE='auto'
MACVLAN_DEVICE='eth0'
#MACVLAN_MODE='vepa'
#LLADDR=02:03:04:05:06:aa</screen>
  <para>
   <filename>ifcfg.template</filename>については、<xref linkend="sec-network-manconf-files-config-etc"/>を参照してください。
  </para>
  <para arch="zseries" os="sles">
   IBM Zは、USBをサポートしていません。インタフェースファイル名とネットワークエイリアスには、<literal>qeth</literal>のようなIBM Z固有の要素が含まれます。
  </para>
 </sect3>
 <sect3 xml:id="sec-network-manconf-files-config-etc">
  <title><filename>/etc/sysconfig/network/config</filename>、<filename>/etc/sysconfig/network/dhcp</filename>、および<filename>/etc/sysconfig/network/wireless</filename></title>
  <para>
   <filename>config</filename>ファイルは、<command>ifup</command>、<command>ifdown</command>、および<command>ifstatus</command>の動作の一般設定を含みます。<filename>dhcp</filename>は、DHCPの設定、およびワイヤレスLANカードの<filename>wireless</filename>を含みます。3つの環境設定ファイル内の変数にはコメントが付きます。<filename>/etc/sysconfig/network/config</filename>の一部の変数は、<filename>ifcfg-*</filename>ファイルでも使用できます。このファイルでは、それらの変数がより高い優先順位で処理されます。<filename>/etc/sysconfig/network/ifcfg.template</filename>ファイルは、インタフェースごとに指定できる変数を一覧表示します。ただし、<filename>/etc/sysconfig/network/config</filename>の変数の大半はグローバル変数であり、ifcfgファイル内で上書きすることはできません。たとえば、<systemitem>NETWORKMANAGER</systemitem>や<systemitem>NETCONFIG_*</systemitem>は、グローバル変数です。
  </para>
  <note>

   <title>DHCPv6の使用</title>
   <para>
    <phrase os="sles;sled">SUSE Linux Enterprise 11では、IPv6 Router Advertisements (RA)が適切に設定されていないネットワークでもDHCPv6は動作しました。SUSE Linux Enterprise 12から、</phrase>DHCPv6が動作するには、ネットワーク上の少なくとも1つのルータが、ネットワークがDHCPv6で管理されていることを示すRAを送出することが求められるようになりました。
   </para>
   <para>
    ルータを正しく設定できないネットワーク用に、ユーザは<literal>ifcfg</literal>オプションを使用して、<literal>DHCLIENT6_MODE=&apos;managed&apos;</literal>を<literal>ifcfg</literal>ファイルに指定することによって、この動作を無効にできます。インストールシステムでbootパラメータを使用することによっても、この回避策を有効にできます。
   </para>
<screen>ifcfg=eth0=dhcp6,DHCLIENT6_MODE=managed</screen>
  </note>
 </sect3>

 <sect3 xml:id="sec-network-manconf-files-routes">
  <title><filename>/etc/sysconfig/network/routes</filename>と<filename>/etc/sysconfig/network/ifroute-*</filename></title>
  <para>
   TCP/IPパケットのスタティックルーティングは、<filename>/etc/sysconfig/network/routes</filename>および<filename>/etc/sysconfig/network/ifroute-*</filename>ファイルによって決定されます。ホストへのルート、ゲートウェイ経由のホストへのルート、およびネットワークへのルートなど、さまざまなシステムタスクが必要とするすべてのスタティックルートは、<filename>/etc/sysconfig/network/routes</filename>ファイルに指定できます。個別のルーティングが必要な各インタフェースに対して、付加環境設定ファイル<filename>/etc/sysconfig/network/ifroute-*</filename>を定義します。ワイルドカード(<literal>*</literal>)はインタフェース名で読み替えてください。経路の環境設定ファイルのエントリは次のようになります。
  </para>
<screen># Destination     Gateway           Netmask            Interface  Options</screen>

  <para>
   第1列は、経路の宛先です。この列には、ネットワークまたはホストのIPアドレスが入ります。<emphasis>到達可能な</emphasis>ネームサーバの場合は、完全に修飾されたネットワークまたはホスト名が入ります。ネットワークは、IPv4ルートでは10.10.0.0/16、IPv6ルートではfc00::/7のように、CIDR表記(関連付けられたルーティングプレフィクス長付きのアドレス)で記述する必要があります。キーワードの<literal>default</literal>は、そのルートがゲートウェイと同じアドレスファミリ内のデフォルトゲートウェイであることを示しています。ゲートウェイのないデバイスの場合は、明示的な宛先0.0.0.0/0または::/0を使用します。
  </para>
  <para>
   第2列は、デフォルトゲートウェイ、すなわちホストまたはネットワークにアクセスする際に経由するゲートウェイです。
  </para>
  <para>
   第3列は非推奨になりました。これは、宛先のIPv4ネットマスクを示すために使用されていました。デフォルトルートであるIPv6ルートの場合、または第1列でプレフィクス長を使用する場合(CIDR表記)は、ここにダッシュ記号(<literal>-</literal>)を入力します。
  </para>

  <para>
   第4列は、インタフェースの名前です。ダッシュ記号(<literal>-</literal>)を使用して空のままにすると、<filename>/etc/sysconfig/network/routes</filename>で意図しない動作を引き起こす場合があります。詳細については、<systemitem>routes</systemitem>のマニュアルページを参照してください。
  </para>
  <para>
   第5列(オプション)では、特殊なオプションを指定することができます。詳細については、<systemitem>routes</systemitem>のマニュアルページを参照してください。
  </para>
  <example>
   <title>一般的なネットワークインタフェースとスタティックルートの例</title>
<screen># --- IPv4 routes in CIDR prefix notation:
# Destination     [Gateway]         -                  Interface
127.0.0.0/8       -                 -                  lo
204.127.235.0/24  -                 -                  eth0
default           204.127.235.41    -                  eth0
207.68.156.51/32  207.68.145.45     -                  eth1
192.168.0.0/16    207.68.156.51     -                  eth1

# --- IPv4 routes in deprecated netmask notation"
# Destination     [Dummy/Gateway]   Netmask            Interface
#
127.0.0.0         0.0.0.0           255.255.255.0      lo
204.127.235.0     0.0.0.0           255.255.255.0      eth0
default           204.127.235.41    0.0.0.0            eth0
207.68.156.51     207.68.145.45     255.255.255.255    eth1
192.168.0.0       207.68.156.51     255.255.0.0        eth1

# --- IPv6 routes are always using CIDR notation:
# Destination     [Gateway]                -           Interface
2001:DB8:100::/64 -                        -           eth0
2001:DB8:100::/32 fe80::216:3eff:fe6d:c042 -           eth0</screen>
  </example>
 </sect3>
 <sect3 xml:id="sec-network-manconf-files-resolv">
  <title><filename>/var/run/netconfig/resolv.conf</filename></title>
  <para>
   <filename>/var/run/netconfig/resolv.conf</filename>には、ホストが属するドメインが指定されています(キーワード<systemitem>search</systemitem>)。<systemitem>search</systemitem>オプションでは、最大256文字で最大6つのドメインを指定できます。完全修飾でない名前を解決する場合は、<systemitem>search</systemitem>の各エントリを付加して完全修飾名の生成が試みられます。<systemitem>nameserver</systemitem>オプションでは、1行に1つずつ、最大3つのネームサーバを指定できます。コメントの先頭には、ハッシュマークまたはセミコロン記号(<literal>#</literal>または<literal>;</literal>)を付加します。例については、<xref linkend="dat-net-etc-resolv-conf"/>を参照してください。
  </para>
  <para>
   ただし、<filename>/etc/resolv.conf</filename>は、手動では編集しないでください。これは<command>netconfig</command>スクリプトによって生成され、<filename>/run/netconfig/resolv.conf</filename>へのシンボリックリンクです。YaSTを使用せずに静的DNS設定を定義するには、<filename>/etc/sysconfig/network/config</filename>ファイルの該当する変数を手動で編集します。
  </para>
  <variablelist>
   <varlistentry>
    <term><systemitem>NETCONFIG_DNS_STATIC_SEARCHLIST</systemitem>
    </term>
    <listitem>
     <para>
      ホスト名の検索に使用されるDNSドメイン名のリスト
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>NETCONFIG_DNS_STATIC_SERVERS</systemitem>
    </term>
    <listitem>
     <para>
      ホスト名の検索に使用されるネームサーバのIPアドレスのリスト
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>NETCONFIG_DNS_FORWARDER</systemitem>
    </term>
    <listitem>
     <para>
      設定する必要のあるDNSフォワーダの名前。たとえば、<literal>bind</literal>または<literal>resolver</literal>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term><systemitem>NETCONFIG_DNS_RESOLVER_OPTIONS</systemitem>
    </term>
    <listitem>
     <para>
      <filename>/var/run/netconfig/resolv.conf</filename>に記述される任意のオプション。例:
     </para>
<screen>debug attempts:1 timeout:10</screen>
     <para>
      詳細については、<literal>resolv.conf</literal>のマニュアルページを参照してください。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem>NETCONFIG_DNS_RESOLVER_SORTLIST</systemitem>
    </term>
    <listitem>
     <para>
      最大10項目のリスト。例:
     </para>
<screen>130.155.160.0/255.255.240.0 130.155.0.0</screen>
     <para>
      詳細については、<systemitem>resolv.conf</systemitem>のマニュアルページを参照してください。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   netconfigでDNS環境設定を無効にするには、<literal>NETCONFIG_DNS_POLICY=&apos;&apos;</literal>を設定します。<command>netconfig</command>の詳細については、<systemitem>netconfig(8)</systemitem>のマニュアルページ(<command>man 8 netconfig</command>)を参照してください。
  </para>
  <example xml:id="dat-net-etc-resolv-conf">
   <title><filename>/var/run/netconfig/resolv.conf</filename></title>
<screen># Our domain
search example.com
#
# We use dns.example.com (192.168.1.116) as nameserver
nameserver 192.168.1.116</screen>
  </example>
 </sect3>

 <sect3 xml:id="sec-network-manconf-netconfig">
  <title><filename>/sbin/netconfig</filename></title>
  <para>
   <command>netconfig</command>は、追加のネットワーク環境設定を管理するモジュール式ツールです。このツールは、事前定義されたポリシーに従って、DHCPまたはPPPなどの自動設定メカニズムにより提供される設定と、静的に定義された設定をマージします。要求された変更は、netconfigモジュールの呼び出しによって適用されます。このモジュールは、環境設定ファイルの変更と、サービスまたは同様のアクションの再起動を行います。
  </para>
  <para>
   <command>netconfig</command>は、3つの主要なアクションを認識します。<command>netconfig modify</command>コマンドと<command>netconfig remove</command>コマンドは、 DHCPやPPPなどのデーモンによって使用され、netconfigの設定値を提供したり、削除します。ユーザが使用できるのは、<command>netconfig update</command>コマンドだけです。
  </para>
  <variablelist>
   <varlistentry>
    <term><command>modify</command>
    </term>
    <listitem>
     <para>
      <command>netconfig modify</command>コマンドは、現在のインタフェースとサービス固有の動的設定を変更し、ネットワーク設定を更新します。netconfigは、標準入力からか、または<option>--lease-file <replaceable>FILENAME</replaceable></option>オプションで指定されたファイルから設定を読み込み、システムのリブートまたは次の変更/削除アクションまで、それらの設定を内部的に保存します。同じインタフェースとサービスの組み合わせに関する既存設定は、上書きされます。インタフェースは、<option>-i <replaceable>INTERFACE_NAME</replaceable></option>パラメータで指定されます。サービスは、<option>-s <replaceable>SERVICE_NAME</replaceable></option>パラメータで指定されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>remove</command>
    </term>
    <listitem>
     <para>
      <command>netconfig remove</command>コマンドは、特定のインタフェースとサービスの組み合わせに対する編集アクションによる動的設定を削除し、ネットワーク設定を更新します。インタフェースは、<option>-i <replaceable>INTERFACE_NAME</replaceable></option>パラメータで指定されます。サービスは、<option>-s <replaceable>SERVICE_NAME</replaceable></option>パラメータで指定されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>update</command>
    </term>
    <listitem>
     <para>

      <command>netconfig update</command>コマンドは、現在の設定で、ネットワーク設定を更新します。これは、ポリシーや静的環境設定が変更された場合に便利です。指定したサービスのみ(<systemitem>dns</systemitem>、<systemitem>nis</systemitem>、または<systemitem>ntp</systemitem>)を更新するには、<option>-m <replaceable>MODULE_TYPE</replaceable></option>パラメータを使用します。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   netconfigポリシーおよび静的環境設定は、手動またはYaSTで、<filename>/etc/sysconfig/network/config</filename>ファイル内で定義します。DHCPやPPPなどの自動設定ツールで提供された動的設定は、<command>netconfig modify</command>および<command>netconfig remove</command>のアクションで、これらのツールによって直接配信されます。NetworkManagerが有効な場合、netconfig (ポリシーモードが<literal>auto</literal>)は、NetworkManagerの設定のみを使用し、従来のifup方式で設定された他のインタフェースからの設定を無視します。NetworkManagerが設定を提供しない場合は、静的設定がフォールバックとして使用されます。NetworkManagerと<command>wicked</command>方式の混合使用はサポートされません。
  </para>
  <para>
   <command>netconfig</command>の詳細については、<command>man 8 netconfig</command>を参照してください。
  </para>
 </sect3>

 <sect3 xml:id="sec-network-manconf-hosts">
  <title><filename>/etc/hosts</filename></title>
  <para>
   このファイル(<xref linkend="dat-net-etc-hosts"/>を参照)では、IPアドレスがホスト名に割り当てられています。ネームサーバが実装されていない場合は、IP接続をセットアップするすべてのホストをここに一覧にする必要があります。ファイルには、各ホストについて1行を入力し、IPアドレス、完全修飾ホスト名、およびホスト名を指定します。IPアドレスは、行頭に指定し、各エントリはブランクとタブで区切ります。コメントは常に<literal>#</literal>記号の後に記入します。
  </para>
  <example xml:id="dat-net-etc-hosts">
   <title><filename>/etc/hosts</filename></title>
<screen>127.0.0.1 localhost
192.168.2.100 jupiter.example.com jupiter
192.168.2.101 venus.example.com venus</screen>
  </example>
 </sect3>
 <sect3 xml:id="sec-network-manconf-files-networks">
  <title><filename>/etc/networks</filename></title>
  <para>
   このファイルには、ネットワーク名とネットワークアドレスの対応が記述されています。形式は、ネットワーク名をアドレスの前に指定すること以外は、<filename>hosts</filename>ファイルと同様です。<xref linkend="dat-net-networks"/>を参照してください。
  </para>
  <example xml:id="dat-net-networks">
   <title><filename>/etc/networks</filename></title>
<screen>loopback     127.0.0.0
localnet     192.168.0.0</screen>
  </example>
 </sect3>
 <sect3 xml:id="sec-network-manconf-files-host">
  <title><filename>/etc/host.conf</filename></title>
  <para>
   このファイルは、名前解決(<emphasis>resolver</emphasis>ライブラリによるホスト名とネットワーク名の変換)を制御します。このファイルは、libc4またはlibc5にリンクされているプログラムについてのみ使用されます。最新のglibcプログラムについては、<filename>/etc/nsswitch.conf</filename>の設定を参照してください。パラメータは常に、1行に1つずつ入力する必要があります。コメントの先頭には<literal>#</literal>記号が付きます。<xref linkend="tab-net-param-hostconf"/>には、利用可能なパラメータが表示されます。<filename>/etc/host.conf</filename>の例については、<xref linkend="dat-net-etc-hostconf"/>を参照してください。
  </para>
  <table xml:id="tab-net-param-hostconf">
   <title>/etc/host.confファイルのパラメータ</title>
   <tgroup cols="2" align="left">
    <tbody>
     <row>
      <entry>
       <para>
        order <emphasis>hosts</emphasis>,<emphasis>bind</emphasis>
       </para>
      </entry>
      <entry>
       <para>
        名前の解決の際、サービスがアクセスされる順序を指定します。有効な引数は次のとおりです(空白またはカンマで区切ります)。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para/>
      </entry>
      <entry>
       <para>
        <emphasis>hosts</emphasis>: <filename>/etc/hosts</filename>ファイルを検索します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para/>
      </entry>
      <entry>
       <para>
        <emphasis>bind</emphasis>: ネームサーバにアクセスします。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para/>
      </entry>
      <entry>
       <para>
        <emphasis>nis</emphasis>: NISを使用します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        multi <emphasis>on</emphasis>/<emphasis>off</emphasis>
       </para>
      </entry>
      <entry>
       <para>
        <filename>/etc/hosts</filename>に指定されているホストが、複数のIPアドレスを持てるかどうかを定義します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        nospoof <emphasis>on</emphasis> spoofalert <emphasis>on</emphasis>/<emphasis>off</emphasis>
       </para>
      </entry>
      <entry>
       <para>
        これらのパラメータは、ネームサーバ<emphasis>spoofing</emphasis>に影響を与えますが、ネットワークの環境設定にはまったく影響を与えません。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        trim <emphasis>domainname</emphasis>
       </para>
      </entry>
      <entry>
       <para>
        ホスト名が解決された後、指定したドメイン名をホスト名から切り離します(ホスト名にドメイン名が含まれている場合)。ローカルドメインにある名前は<filename>/etc/hosts</filename>ファイルにありますが、付加されるドメイン名でも認識する必要がある場合には便利なオプションです。
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>
  <example xml:id="dat-net-etc-hostconf">
   <title><filename>/etc/host.conf</filename></title>
<screen># We have named running
order hosts bind
# Allow multiple address
multi on</screen>
  </example>
 </sect3>
 <sect3 xml:id="sec-network-manconf-files-nsswitch">
  <title><filename>/etc/nsswitch.conf</filename></title>
  <para>
   GNU C Library 2.0を導入すると、<emphasis>Name Service Switch</emphasis> (NSS)も合わせて導入されます。詳細については、<systemitem>nsswitch.conf(5)</systemitem>のマニュアルページおよび『<emphasis>The GNU C Library Reference Manual</emphasis>』を参照してください。
  </para>
  <para>
   クエリの順序は、ファイル<filename>/etc/nsswitch.conf</filename>で定義します。<filename>nsswitch.conf</filename>の例については、<xref linkend="dat-net-nsswitchconf"/>を参照してください。コメントの先頭には<literal>#</literal>記号が付きます。この例では、<filename>hosts</filename>データベースの下のエントリは、要求がDNSを介して、<filename>/etc/hosts</filename>(<option>files</option>)に送信されることを意味しています<phrase os="sles;osuse">(<xref linkend="cha-dns"/>参照)。</phrase>
  </para>
  <example xml:id="dat-net-nsswitchconf">
   <title><filename>/etc/nsswitch.conf</filename></title>
<screen>passwd:     compat
group:      compat

hosts:      files dns
networks:   files dns

services:   db files
protocols:  db files
rpc:        files
ethers:     files
netmasks:   files
netgroup:   files nis
publickey:  files

bootparams: files
automount:  files nis
aliases:    files nis
shadow:     compat
</screen>
  </example>
  <para>
   NSSで利用できる<quote>データベース</quote>については、<xref linkend="tab-net-nnswitch-db"/>を参照してください。NSSデータベースの環境設定オプションについては、<xref linkend="tab-net-nnswitch-conf"/>を参照してください。
  </para>
  <table xml:id="tab-net-nnswitch-db">
   <title>/etc/nsswitch.confで利用できるデータベース</title>
   <tgroup cols="2" align="left">
    <tbody>
     <row>
      <entry>
       <para>
        <option>aliases</option>
       </para>
      </entry>
      <entry>
       <para>
        <filename>sendmail</filename>によって実行されたメールエイリアス。<command>man</command> <option>5 aliases</option>コマンドで、マニュアルページを参照してください。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>ethers</option>
       </para>
      </entry>
      <entry>
       <para>
        イーサネットアドレス。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>netmasks</option>
       </para>
      </entry>
      <entry>
       <para>
        ネットワークとそのサブネットマスクのリスト。サブネットを使用する場合のみ必要です。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>グループ</option>
       </para>
      </entry>
      <entry>
       <para>
        <filename>getgrent</filename>によって使用されるユーザグループ。<command>group</command>のマニュアルページも参照してください。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>hosts</option>
       </para>
      </entry>
      <entry>
       <para>
        <filename>gethostbyname</filename>および同類の関数によって使用されるホスト名とIPアドレス。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>netgroup</option>
       </para>
      </entry>
      <entry>
       <para>
        アクセス許可を制御するための、ネットワーク内にある有効なホストとユーザのリスト。<systemitem>netgroup(5)</systemitem>のマニュアルページを参照してください。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>networks</option>
       </para>
      </entry>
      <entry>
       <para>
        ネットワーク名とアドレス。<filename> getnetent</filename>によって使用されます。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>publickey</option>
       </para>
      </entry>
      <entry>
       <para>
        NFSとNIS+によって使用されるSecure_RPCの公開鍵と秘密鍵。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>passwd</option>
       </para>
      </entry>
      <entry>
       <para>
        ユーザパスワード。<filename>getpwent</filename>によって使用されます。<systemitem>passwd(5)</systemitem>のマニュアルページを参照してください。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>protocols</option>
       </para>
      </entry>
      <entry>
       <para>
        ネットワークプロトコル。<filename>getprotoent</filename>によって使用されます。<systemitem>protocols(5)</systemitem>のマニュアルページを参照してください。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>rpc</option>
       </para>
      </entry>
      <entry>
       <para>
        リモートプロシージャコール名とアドレス。<filename>getrpcbyname</filename>および同様の関数によって使用されます。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>services</option>
       </para>
      </entry>
      <entry>
       <para>
        ネットワークサービス。<filename>getservent</filename>によって使用されます。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>shadow</option>
       </para>
      </entry>
      <entry>
       <para>
        ユーザのシャドウパスワード。<filename>getspnam</filename>によって使用されます。<option>shadow(5)</option> manページを参照してください。
       </para>
      </entry>
     </row>

    </tbody>
   </tgroup>
  </table>
  <table xml:id="tab-net-nnswitch-conf">
   <title>NSS<quote>データベース</quote>の環境設定オプション</title>
   <tgroup cols="2" align="left">
    <tbody>
     <row>
      <entry>
       <para>
        <option>files</option>
       </para>
      </entry>
      <entry>
       <para>
        直接アクセスファイル。たとえば<filename>/etc/aliases</filename>。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>db</option>
       </para>
      </entry>
      <entry>
       <para>
        データベース経由のアクセス。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>nis</option>、<option>nisplus</option>
       </para>
      </entry>
      <entry>
       <para>
        NIS。<xref linkend="cha-nis"/>を参照。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>dns</option>
       </para>
      </entry>
      <entry>
       <para>
        <option>hosts</option>および<option>networks</option>の拡張としてのみ使用できます。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>compat</option>
       </para>
      </entry>
      <entry>
       <para>
        <option>passwd</option>、<option>shadow</option>、および<option>group</option>の拡張としてのみ使用できます。
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>
 </sect3>
 <sect3 xml:id="sec-network-manconf-files-nscd">
  <title><filename>/etc/nscd.conf</filename></title>
  <para>
   このファイルは、nscd (name service cache daemon)の環境設定に使用します。<systemitem>nscd(8)</systemitem>および<systemitem>nscd.conf(5)</systemitem>のマニュアルページを参照してください。デフォルトでは、nscdによって<option>passwd</option>、<option>groups</option>と<option>hosts</option>のシステムエントリがキャッシュされます。これは、NISやLDAPのようにディレクトリサービスのパフォーマンスにとって重要です。このようになっていないと、names、groupsまたはhostsにアクセスするたびにネットワーク接続を使用する必要があるためです。
   
  </para>
  <para>
   <option>passwd</option>オプションのキャッシュを有効にすると、新しく追加したローカルユーザが認識されるまで、通常、約15秒かかります。この待ち時間を短縮するには、次のコマンドを使用してnscdを再起動します。
  </para>
<screen><prompt>&gt; </prompt><command>sudo</command> systemctl restart nscd</screen>
 </sect3>
 <sect3 xml:id="sec-network-manconf-files-hostname">
  <title><filename>/etc/HOSTNAME</filename></title>
  <para>
   <filename>/etc/HOSTNAME</filename>には、完全修飾ホスト名(FQHN)が含まれています。完全修飾ホスト名は、ドメイン名が付加されたホスト名です。このファイルに指定できるのは、ホスト名が設定されている1行のみです。このファイルはマシンのブート時に読み込まれます。
  </para>
 </sect3>
</sect2>
