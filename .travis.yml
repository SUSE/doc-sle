language: bash
env:
      global:
      - LD_PRELOAD=/lib/x86_64-linux-gnu/libSegFault.so

dist: yakkety

addons:
  apt:
    packages:
    - libxml2-utils
    - libxml2-dev
    - libxml2
    - docbook-xml

#install:
#    - sudo apt-get install -y libxml2 libxml2-dev libxml2-utils

before_script:
    - cat /etc/os-release
    # - ls xml/*.xml
    - echo $TRAVIS_COMMIT
    - xmllint --version

script:
    - xmlcatalog --noout --create catalog.xml
    - xmlcatalog --noout --add public "http://www.oasis-open.org/docbook/xml/4.5/dbcentx.mod" "/usr/share/xml/docbook/schema/dtd/4.5/dbcentx.mod" catalog.xml
    - export XML_CATALOG_FILES="catalog.xml"
    - for file in xml/*.xml; do echo ">>> $file"; xmllint --nonet --noout --noent $file; done
