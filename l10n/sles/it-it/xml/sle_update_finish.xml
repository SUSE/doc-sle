<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="sle_update_finish.xml" version="5.0" xml:id="cha-upgrade-finish">
 <title>Fine dell&apos;upgrade</title>
 <info>
  <abstract>
   <para>
    Dopo l&apos;upgrade è necessario eseguire alcune attività aggiuntive. Il seguente capitolo offre indicazioni su questa procedura.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 
 <sect1 xml:id="sec-upgrade-postupgrade-checks">
  <title>Controlli post-upgrade</title>
  <itemizedlist>
   <listitem>
    <para>
     Verificare la presenza di <quote>pacchetti orfani</quote>. Durante una procedura di upgrade, i pacchetti possono essere rinominati, rimossi, uniti o divisi. Di conseguenza, alcuni di essi possono diventare orfani e non essere più supportati. I pacchetti orfani non vengono rimossi automaticamente. Per visualizzarli, è possibile utilizzare il comando seguente:
    </para>
<screen><prompt>&gt; </prompt><command>zypper packages --orphaned --unneeded</command></screen>
    <para>
     Utilizzare l&apos;elenco per determinare i pacchetti ancora necessari e quelli che è possibile rimuovere in modo sicuro.
    </para>
   </listitem>
   <listitem>
    <para>
     Verificare la presenza di file <filename>*.rpmnew</filename> e <filename>*.rpmsave</filename>, esaminarne il contenuto ed eventualmente unire le modifiche opportune. Se un upgrade include modifiche a un file di configurazione predefinito, il pacchetto crea uno di questi tipi di file invece di sovrascrivere il file di configurazione. Mentre il file <filename>*.rpmnew</filename> contiene la nuova configurazione predefinita e non modifica il file originale, il file <filename>*.rpmsave</filename> è una copia della configurazione originale sostituita dal nuovo file predefinito.
    </para>
    <para>
     Non è necessario cercare i file <filename>*.rpmnew</filename> e <filename>*.rpmsave</filename> all&apos;interno di tutto il file system, poiché i file più importanti sono memorizzati nella directory <filename>/etc</filename>. Utilizzare il comando seguente per visualizzare un elenco di tali file:
    </para>
<screen><prompt>&gt; </prompt><command>find /etc/ -name "*.rpmnew" -o -name "*.rpmsave"</command></screen>
   </listitem>
  </itemizedlist>
 </sect1>

 
 <sect1 xml:id="sec-upgrade-finish-python3">
  <title>Abilitazione del modulo <literal>Python 3</literal></title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 15 utilizza Python 3.6 per impostazione predefinita. Python 3.9 è stato aggiunto in <phrase role="productname"><phrase os="sles">SLES</phrase></phrase> 15 SP3 come alternativa più recente. Questa versione non è più supportata a partire da <phrase role="productname"><phrase os="sles">SLES</phrase></phrase> 15 SP4. Sono invece disponibili le versioni recenti di Python con importanti aggiornamenti e correzioni della sicurezza nel modulo <literal>Python 3</literal>.
  </para>
  <para>
   Se è stato installato Python 3.9 in <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 15 SP3, abilitare il modulo <literal>Python 3</literal> con:
  </para>
<screen><prompt>&gt; </prompt><command>sudo</command> <command>SUSEConnect -p sle-module-python3/15.4/<replaceable>x86_64</replaceable></command>&#x002E;</screen>
  <para>
   In alternativa, è possibile tornare alla versione Python predefinita rimuovendo 3.9 con <command>zypper remove -u python39</command>.
  </para>
 </sect1>

 <sect1 xml:id="sec-upgrade-finish-xfs4">
  <title>Riformattazione dei dispostivi XFS v4</title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> supporta il <quote>formato su disco</quote> (v5) del file system XFS. I principali vantaggi di questo formato sono i codici di controllo di tutti i metadati XFS, il supporto per il tipo di file e per un numero maggiore di elenchi di controllo dell&apos;accesso per un file.
  </para>
  <para>
   Tenere presente che questo formato non è supportato da kernel di SUSE Linux Enterprise precedenti alla versione 3.12, pacchetti <literal>xfsprogs</literal> precedenti alla versione 3.2.0 e versioni GRUB 2 rilasciate prima di SUSE Linux Enterprise 12.
  </para>
  <important>
   <title>il formato V4 è obsoleto</title>
   <para>
    XFS rende obsoleti i file system in formato V4. Questo formato di file system è stato creato dal comando:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkfs.xfs -m crc=0 <replaceable>DEVICE</replaceable></screen>
   <para>
    Il formato veniva utilizzato in SLE 11 e nelle release precedenti e attualmente crea un messaggio di avviso da <command>dmesg</command>:
   </para>
<screen>Deprecated V4 format (crc=0) will not be supported after September 2030</screen>
   <para>
    Se viene visualizzato tale messaggio nell&apos;output del comando <command>dmesg</command>, si consiglia di aggiornare il file system al formato V5:
   </para>
   <procedure>
    <step>
     <para>
      Eseguire il backup dei dati in un altro dispositivo.
     </para>
    </step>
    <step>
     <para>
      Creare il file system sul dispositivo.
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkfs.xfs -m crc=1 <replaceable>DEVICE</replaceable></screen>
    </step>
    <step>
     <para>
      Ripristinare i dati del backup sul dispositivo aggiornato.
     </para>
    </step>
   </procedure>
  </important>
 </sect1>
</chapter>
