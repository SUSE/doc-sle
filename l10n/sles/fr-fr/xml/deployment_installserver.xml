<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_installserver.xml" version="5.0" role="General" xml:id="cha-deployment-instserver">
 <title>Configuration d&apos;une source d&apos;installation réseau</title>
 <info>
  <abstract>
   <para>
    Ce chapitre décrit comment créer un serveur qui fournit les données requises pour l&apos;installation de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> sur le réseau.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  En fonction du système d&apos;exploitation exécuté sur la machine à utiliser comme source d&apos;installation réseau pour <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, plusieurs options sont disponibles pour la configuration du serveur. Pour configurer un serveur d&apos;installation, la procédure la plus simple consiste à utiliser YaST.
 </para>

 <tip>
  <title>système d&apos;exploitation du serveur d&apos;installation</title>
  <para>
   Vous pouvez même utiliser une machine Microsoft Windows comme serveur d&apos;installation pour le déploiement de Linux. Reportez-vous à la <xref linkend="sec-deployment-instserver-smb"/> pour plus d&apos;informations. 
  </para>
 </tip>
 <sect1 xml:id="sec-deployment-instserver-sles9">
  <title>Configuration d&apos;un serveur d&apos;installation à l&apos;aide de YaST</title>

  <para>
   YaST fournit un outil graphique qui permet de créer des dépôts réseau. Il prend en charge les serveurs d&apos;installation réseau HTTP, FTP et NFS.
  </para>

  <procedure xml:id="pro-deployment-instserver-sles9">
   <step>
    <para>
     Connectez-vous en tant qu&apos;utilisateur <systemitem class="username">root</systemitem> à la machine qui doit jouer le rôle de serveur d&apos;installation.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez <menuchoice> <guimenu>YaST</guimenu>
     <guimenu> Divers</guimenu> <guimenu> Serveur d&apos;installation</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez le type de dépôt (HTTP, FTP ou NFS). Le service sélectionné est lancé automatiquement à chaque démarrage du système. Si un service du type sélectionné est déjà en cours d&apos;exécution sur votre système et si vous souhaitez le configurer manuellement, désactivez la fonction de configuration automatique du service de serveur en sélectionnant <guimenu>Ne configurer aucun des services réseau</guimenu>. Dans les deux cas, définissez le répertoire du serveur dans lequel placer les données d&apos;installation.
    </para>
   </step>
   <step>
    <para>
     Configurez le type de dépôt requis. Cette étape concerne la configuration automatique des services de serveur. Elle est ignorée lorsque la configuration automatique est désactivée.
    </para>
    <para>

     Définissez un alias pour le répertoire racine du serveur FTP ou HTTP sur lequel les données d&apos;installation doivent figurer. Par la suite, le dépôt sera situé sous <literal>ftp://<replaceable>IP-serveur</replaceable>/<replaceable>Alias</replaceable>/<replaceable>Nom</replaceable></literal> (FTP) ou sous <literal>http://<replaceable>IP-serveur</replaceable>/<replaceable>Alias</replaceable>/<replaceable>Nom</replaceable></literal> (HTTP). <replaceable>Nom</replaceable> désigne le nom du dépôt, dont la définition s&apos;effectue à l&apos;étape suivante. Si vous avez sélectionné NFS à l&apos;étape précédente, définissez des caractères joker et des options d&apos;exportation. Le serveur NFS sera accessible sous <literal>nfs://<replaceable>IP-serveur</replaceable>/<replaceable>Nom</replaceable></literal>. <phrase os="sles">Pour plus de détails sur NFS et les exportations, reportez-vous au <xref linkend="cha-nfs"/>.</phrase>
    </para>
    <tip>
     <title>paramètres de pare-feu</title>
     <para>
      Assurez-vous que les paramètres du pare-feu de votre système serveur autorisent le trafic au niveau des ports pour HTTP, NFS et FTP. Dans le cas contraire, activez <guimenu>Ouvrir port dans pare-feu</guimenu> ou sélectionnez d&apos;abord <guimenu>Détails du pare-feu</guimenu>.
     </para>
    </tip>
   </step>
   <step>
    <para>
     Configurez le dépôt. Avant la copie des supports d&apos;installation vers leur destination, définissez le nom du dépôt (choisissez plutôt une abréviation du produit et de la version facile à mémoriser). YaST permet de fournir des images ISO des supports au lieu de copies des DVD d&apos;installation. Pour ce faire, sélectionnez la case à cocher correspondante et indiquez le chemin du répertoire sous lequel trouver les fichiers ISO localement. En fonction du produit à distribuer à l&apos;aide de ce serveur d&apos;installation, vous devrez peut-être ajouter des supports, tels que des DVD de Service Pack, comme dépôts supplémentaires. Pour annoncer votre serveur d&apos;installation sur le réseau via OpenSLP, sélectionnez l&apos;option correspondante.
    </para>
    <tip>
     <title>annonce du dépôt</title>
     <para>
      Pensez à annoncer votre dépôt via OpenSLP si la configuration du réseau prend en charge cette option. Cela vous évite d&apos;entrer le chemin d&apos;installation réseau sur chaque machine cible. Les systèmes cibles sont simplement démarrés à l&apos;aide du paramètre de démarrage SLP ; ils trouveront le dépôt réseau sans qu&apos;aucune autre opération de configuration ne soit nécessaire. Pour plus d&apos;informations sur cette option, reportez-vous au <xref linkend="cha-boot-parameters"/>.
     </para>
    </tip>
   </step>
   <step>
    <para>
     Configurez des dépôts supplémentaires. YaST suit une convention de dénomination spécifique pour configurer des dépôts de CD de produit complémentaire ou de Service Pack. La configuration est acceptée uniquement si le nom de dépôt des CD de produit complémentaire commence par le nom de dépôt du support d&apos;installation. En d&apos;autres termes, si vous avez choisi <literal>SLES12SP1</literal> comme nom de dépôt pour DVD 1, sélectionnez <literal>SLES12SP1addon</literal> comme nom de dépôt pour DVD2.
    </para>
   </step>
   <step>
    <para>
     Téléchargez les données d&apos;installation. La copie des supports d&apos;installation constitue l&apos;étape la plus longue dans la configuration d&apos;un serveur d&apos;installation. Insérez les supports dans l&apos;ordre demandé par YaST et attendez la fin de la procédure de copie. Lorsque les sources ont été entièrement copiées, revenez à l&apos;aperçu des dépôts existants et fermez la configuration en sélectionnant <guimenu>Terminer</guimenu>.
    </para>
    <para>
     Le serveur d&apos;installation est désormais entièrement configuré et prêt à fonctionner. Il démarre automatiquement en même temps que le système. Aucune autre intervention n&apos;est nécessaire. Si vous avez désactivé à l&apos;aide de YaST la configuration automatique du service réseau sélectionné lors de la première étape, il suffit de configurer et de démarrer manuellement ce service.
    </para>
   </step>
  </procedure>

  <para>
   Pour désactiver un dépôt, sélectionnez le dépôt à supprimer, puis sélectionnez <guimenu>Supprimer</guimenu>. Les données de l&apos;installation sont supprimées du système. Pour désactiver le service réseau, utilisez le module YaST correspondant.
  </para>

  <para>
   Si votre serveur d&apos;installation doit fournir les données d&apos;installation de plusieurs produits de la version du produit, démarrez le module de serveur d&apos;installation YaST. Sélectionnez ensuite <guimenu>Ajouter</guimenu> dans l&apos;aperçu des dépôts existants pour configurer le nouveau dépôt.
  </para>

  <warning>
   <title>conflit entre le serveur d&apos;installation YaST et le serveur RMT</title>
   <para>
    Si vous configurez un serveur en tant que serveur d&apos;installation avec YaST, cela installe et configure automatiquement le serveur Web Apache, qui écoute sur le port 80.
   </para>
   <para>
    Toutefois, la configuration d&apos;une machine en tant que serveur RMT (Repository Mirroring Tool) installe automatiquement le serveur Web NGINX et le configure pour écouter sur le port 80.
   </para>
   <para>
    Par conséquent, n&apos;essayez pas d&apos;activer ces deux fonctions sur un même serveur. Un seul serveur ne peut pas héberger ces deux fonctions simultanément.
   </para>
  </warning>

 </sect1>
 <sect1 xml:id="sec-deployment-instserver-nfs">
  <title>Configuration manuelle d&apos;un dépôt NFS</title>

  

  <para>
   La configuration d&apos;une source NFS en vue de l&apos;installation s&apos;effectue en deux étapes. Dans un premier temps, créez l&apos;arborescence qui contient les données d&apos;installation et copiez les supports d&apos;installation vers cette arborescence. Exportez ensuite le répertoire qui contient les données d&apos;installation vers le réseau.
  </para>

  <procedure xml:id="pro-deployment-instserver-nfs-cdir">
   <para>
    Pour créer un répertoire qui contient les données d&apos;installation, procédez de la façon suivante :
   </para>
   <step>
    <para>
     Connectez-vous en tant qu&apos;utilisateur <systemitem class="username">root</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Créez un répertoire destiné à contenir les données d&apos;installation et accédez à ce répertoire. Par exemple :
    </para>
<screen><prompt role="root"># </prompt>mkdir -p /srv/install/<replaceable>PRODUCT</replaceable>/<replaceable>PRODUCTVERSION</replaceable>
<prompt role="root"># </prompt>cd /srv/install/<replaceable>PRODUCT</replaceable>/<replaceable>PRODUCTVERSION</replaceable></screen>
    <para>
     Remplacez <replaceable>PRODUCT</replaceable> par l&apos;abréviation du nom du produit et <replaceable>PRODUCTVERSION</replaceable> par une chaîne qui contient le nom et la version du produit (par exemple, <filename>/srv/install/SLES/15.1</filename>).
    </para>
   </step>
   <step>
    <para>
     Pour chaque support d&apos;installation contenu dans le kit de supports, exécutez les commandes suivantes :
    </para>
    <substeps performance="required">
     <step>
      <para>
       Copiez tout le contenu du support d&apos;installation vers le répertoire du serveur d&apos;installation :
      </para>
<screen><prompt role="root"># </prompt>cp -a /media/<replaceable>PATH_TO_YOUR_MEDIA_DRIVE</replaceable> .</screen>
      <para>
       Remplacez <replaceable>PATH_TO_YOUR_MEDIA_DRIVE</replaceable> (CHEMIN_LECTEUR_SUPPPORT) par le chemin réel qui permet d&apos;accéder au lecteur du support d&apos;installation.
      </para>
     </step>
     <step>
      <para>
       Renommez le répertoire en fonction du numéro du support :
      </para>
<screen><prompt role="root"># </prompt>mv <replaceable>PATH_TO_YOUR_MEDIA_DRIVE</replaceable> DVD<replaceable>X</replaceable></screen>
      <para>
       Remplacez <replaceable>X</replaceable> par le numéro réel de votre support d&apos;installation.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <procedure xml:id="pro-deployment-instserver-nfs-export">
   <para>
    Sous <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, vous pouvez exporter le dépôt avec NFS à l&apos;aide de YaST. Procédez de la façon suivante :
   </para>
   <step>
    <para>
     Connectez-vous en tant qu&apos;utilisateur <systemitem class="username">root</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez <menuchoice> <guimenu>YaST</guimenu> <guimenu> Services réseau</guimenu> <guimenu> Serveur NFS</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Cliquez sur <guimenu>Démarrer</guimenu> et <guimenu>Ouvrir port dans pare-feu</guimenu>, puis cliquez sur <guimenu>Suivant</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez <guimenu>Ajouter un répertoire</guimenu> et recherchez le répertoire contenant les sources d&apos;installation (ici, il s&apos;agit du répertoire <filename><replaceable>PRODUCTVERSION</replaceable></filename>).
    </para>
   </step>
   <step>
    <para>
     Sélectionnez <guimenu>Ajouter hôte</guimenu> et entrez les noms d&apos;hôte des machines vers lesquelles exporter les données d&apos;installation. Au lieu d&apos;indiquer les noms d&apos;hôte, vous pouvez utiliser des caractères joker, des plages d&apos;adresses réseau ou le nom de domaine de votre réseau. Entrez les options d&apos;exportation appropriées ou laissez celles par défaut ; ces dernières fonctionnent correctement dans la plupart des configurations. Pour plus d&apos;informations sur la syntaxe utilisée lors de l&apos;exportation des partages NFS, reportez-vous à la page de manuel <systemitem>exports</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Cliquez sur <guimenu>Terminer</guimenu>. Le serveur NFS qui héberge le dépôt <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> est démarré et intégré automatiquement au processus d&apos;amorçage.
    </para>
   </step>
  </procedure>

  <procedure xml:id="pro-deployment-instserver-nfs-exportman">
   <para>
    Si vous préférez exporter manuellement le dépôt via NFS au lieu d&apos;utiliser le module YaST relatif aux serveurs NFS, procédez comme suit :
   </para>
   <step>
    <para>
     Connectez-vous en tant qu&apos;utilisateur <systemitem class="username">root</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Ouvrez le fichier <filename>/etc/exports</filename> et entrez la ligne de commande suivante :
    </para>
<screen>/<replaceable>PRODUCTVERSION</replaceable> *(ro,root_squash,sync)</screen>
    <para>
     Cette commande permet d&apos;exporter le répertoire <filename>/<replaceable>PRODUCTVERSION</replaceable></filename> vers tout hôte membre de ce réseau ou capable de se connecter à ce serveur. Pour limiter l&apos;accès à ce serveur, remplacez le caractère joker générique <literal>*</literal> par des masques de réseau ou des noms de domaine. Pour plus de détails, reportez-vous à la page de manuel <systemitem>export</systemitem>. Enregistrez et quittez ce fichier de configuration.
    </para>
   </step>
   <step>
    <para>
     Pour ajouter le service NFS à la liste des serveurs démarrés au cours du démarrage du système, exécutez les commandes suivantes :
    </para>
<screen><prompt role="root"># </prompt>systemctl enable nfsserver</screen>
   </step>
   <step>
    <para>
     Démarrez le serveur NFS avec la commande <command>systemctl start nfsserver</command>. Si vous devez modifier la configuration de votre serveur NFS par la suite, modifiez le fichier de configuration et redémarrez le daemon NFS à l&apos;aide de la commande <command>systemctl restart nfsserver.service</command>.
    </para>
   </step>
  </procedure>

  <procedure xml:id="pro-deployment-instserver-nfs-slpann">
   <para>
    L&apos;annonce du serveur NFS via OpenSLP permet de communiquer l&apos;adresse de ce serveur à tous les clients du réseau.
   </para>
   <step>
    <para>
     Connectez-vous en tant qu&apos;utilisateur <systemitem class="username">root</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Créez le fichier de configuration <filename>/etc/slp.reg.d/install.suse.nfs.reg</filename> avec les lignes suivantes :
    </para>
<screen><?dbsuse-fo font-size="7pt"?>
# Register the NFS Installation Server
service:install.suse:nfs://$HOSTNAME/<replaceable>PATH_TO_REPOSITORY</replaceable>/DVD1,en,65535
description=NFS Repository</screen>
    <para>
     Remplacez <replaceable>PATH_TO_REPOSITORY</replaceable> (CHEMIN_DÉPÔT) par le chemin réel de la source d&apos;installation sur votre serveur.
    </para>
   </step>
   <step>
    <para>
     Démarrez le daemon OpenSLP en exécutant la commande <command>systemctl start slpd</command>.
    </para>
   </step>
  </procedure>

  <para os="sles">
   Pour plus d&apos;informations sur OpenSLP, reportez-vous à la documentation relative au paquetage, située dans <filename>/usr/share/doc/packages/openslp/</filename>, ou le <xref linkend="cha-slp"/> (Guide d&apos;administration, Chapitre 37 « SLP »). Pour plus d&apos;informations sur NFS, reportez-vous au manuel <xref linkend="cha-nfs"/>.
  </para>
 </sect1>
 <sect1 xml:id="sec-deployment-instserver-ftp">
  <title>Configuration manuelle d&apos;un dépôt FTP</title>

  <para>
   La création d&apos;un dépôt FTP est très similaire à celle d&apos;un dépôt NFS. Un dépôt FTP peut également être annoncé sur le réseau à l&apos;aide d&apos;OpenSLP.
  </para>

  <procedure xml:id="pro-deployment-instserver-ftp">
   <step>
    <para>
     Créez un répertoire qui contient les sources d&apos;installation, comme décrit à la <xref linkend="sec-deployment-instserver-nfs"/>.
    </para>
   </step>
   <step>
    <para>
     Configurez le serveur FTP pour distribuer le contenu de votre répertoire d&apos;installation :
    </para>
    <substeps performance="required">
     <step>
      <para>
       Connectez-vous en tant qu&apos;utilisateur <systemitem class="username">root</systemitem> et installez le paquetage <systemitem>vsftpd</systemitem> à l&apos;aide du gestionnaire de logiciels YaST.
      </para>
     </step>
     <step>
      <para>
       Entrez dans le répertoire racine du serveur FTP :
      </para>
<screen><prompt role="root"># </prompt>cd <option>/srv/ftp</option></screen>
     </step>
     <step>
      <para>
       Créez un sous-répertoire qui contient les sources d&apos;installation dans le répertoire racine FTP :
      </para>
<screen><prompt role="root"># </prompt>mkdir <replaceable>REPOSITORY</replaceable></screen>
      <para>
       Remplacez <replaceable>REPOSITORY</replaceable> (DÉPÔT) par le nom du produit.
      </para>
     </step>
     <step>
      <para>
       Montez le contenu du référentiel d&apos;installation dans l&apos;environnement racine modifié du serveur FTP :
      </para>
<screen><prompt role="root"># </prompt>mount --bind <replaceable>PATH_TO_REPOSITORY</replaceable> /srv/ftp/<replaceable>REPOSITORY</replaceable></screen>
      <para>
       Remplacez les variables <replaceable>PATH_TO_REPOSITORY</replaceable> (CHEMIN_DÉPÔT) et <replaceable>REPOSITORY</replaceable> (DÉPÔT) par des valeurs adaptées à votre configuration. Pour que ces modifications soient permanentes, ajoutez-les au fichier <filename>/etc/fstab</filename>.
      </para>
     </step>
     <step>
      <para>
       Démarrez vsftpd à l&apos;aide de <command>vsftpd</command>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Annoncez le dépôt via OpenSLP si votre configuration réseau prend en charge cette opération :
    </para>
    <substeps performance="required">
     <step>
      <para>
       Créez le fichier de configuration <filename>/etc/slp.reg.d/install.suse.ftp.reg</filename> avec les lignes suivantes :
      </para>
<screen><?dbsuse-fo font-size="7pt"?>
# Register the FTP Installation Server
service:install.suse:ftp://$HOSTNAME/<replaceable>REPOSITORY</replaceable>/DVD1,en,65535
description=FTP Repository</screen>
      <para>
       Remplacez <replaceable>REPOSITORY</replaceable> (DÉPÔT) par le nom réel du répertoire de dépôt sur votre serveur. La ligne <literal>service:</literal> doit être entrée sous forme de ligne continue.
      </para>
     </step>
     <step>
      <para>
       Démarrez le daemon OpenSLP en exécutant la commande <command>systemctl start slpd</command>.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <tip os="sles">
   <title>configuration d&apos;un serveur FTP avec YaST</title>
   <para>
    Si vous préférez utiliser YaST plutôt que de configurer manuellement le serveur d&apos;installation FTP, reportez-vous au <xref linkend="cha-ftp"/> (Guide d&apos;administration, Chapitre 39 « Configuration d&apos;un serveur FTP avec YaST »).
   </para>
  </tip>
 </sect1>
 <sect1 xml:id="sec-deployment-instserver-http">
  <title>Configuration manuelle d&apos;un dépôt HTTP</title>

  <para>
   La création d&apos;un dépôt HTTP est très similaire à celle d&apos;un dépôt NFS. Un dépôt HTTP peut également être annoncé sur le réseau à l&apos;aide d&apos;OpenSLP.
  </para>

  <procedure xml:id="pro-deployment-instserver-http">
   <step>
    <para>
     Créez un répertoire qui contient les sources d&apos;installation en suivant la procédure décrite à la <xref linkend="sec-deployment-instserver-nfs"/>.
    </para>
   </step>
   <step>
    <para>
     Configurez le serveur HTTP pour distribuer le contenu de votre répertoire d&apos;installation :
    </para>
    <substeps performance="required">
     <step>
      <para>
       <phrase os="sles">Installez le serveur Web Apache conformément à la description proposée dans le <xref linkend="sec-apache2-quickstart-installation"/></phrase> (Guide d&apos;administration, Chapitre 38 « Serveur HTTP Apache », Section 38.1.2 « Installation »).
      </para>
     </step>
     <step>
      <para>
       Accédez au répertoire racine du serveur HTTP (<filename>/srv/www/htdocs</filename>) et créez un sous-répertoire qui contiendra les sources d&apos;installation :
      </para>
<screen><prompt role="root"># </prompt>mkdir <replaceable>REPOSITORY</replaceable></screen>
      <para>
       Remplacez <replaceable>REPOSITORY</replaceable> (DÉPÔT) par le nom du produit.
      </para>
     </step>
     <step>
      <para>
       Créez un lien symbolique à partir de l&apos;emplacement des sources d&apos;installation vers le répertoire racine du serveur Web (<filename>/srv/www/htdocs</filename>) :
      </para>
<screen><prompt role="root"># </prompt>ln -s <replaceable>/PATH_TO_REPOSITORY</replaceable>/srv/www/htdocs/<replaceable>REPOSITORY</replaceable></screen>
     </step>
     <step>
      <para>
       Modifiez le fichier de configuration du serveur HTTP (<filename>/etc/apache2/default-server.conf</filename>) de manière à ce qu&apos;il suive les liens symboliques. Remplacez la ligne suivante :
      </para>
<screen>Options None</screen>
      <para>
       par
      </para>
<screen>Options Indexes FollowSymLinks</screen>
     </step>
     <step>
      <para>
       Rechargez la configuration du serveur HTTP à l&apos;aide de la commande <command>systemctl reload apache2</command>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Annoncez le dépôt via OpenSLP si votre configuration réseau prend en charge cette opération :
    </para>
    <substeps performance="required">
     <step>
      <para>
       Créez le fichier de configuration <filename>/etc/slp.reg.d/install.suse.http.reg</filename> avec les lignes suivantes :
      </para>
<screen><?dbsuse-fo font-size="6.5pt"?>
# Register the HTTP Installation Server
service:install.suse:http://$HOSTNAME/<replaceable>REPOSITORY</replaceable>/DVD1/,en,65535
description=HTTP Repository</screen>
      <para>
       Remplacez <replaceable>REPOSITORY</replaceable> (DÉPÔT) par le chemin réel du dépôt sur votre serveur. La ligne <literal>service:</literal> doit être entrée sous forme de ligne continue.
      </para>
     </step>
     <step>
      <para>
       Démarrez le daemon OpenSLP en exécutant la commande <command>systemctl start slpd</command>.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-deployment-instserver-smb">
  <title>Gestion d&apos;un dépôt SMB</title>

  <para>
   À l&apos;aide du protocole SMB, vous pouvez importer les sources d&apos;installation depuis un serveur Microsoft Windows et démarrer le déploiement Linux sans même disposer d&apos;une machine Linux.
  </para>

  <procedure xml:id="pro-deployment-instserver-smb-export">
   <para>
    Pour configurer un partage Windows exporté sur lequel réside votre dépôt <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, procédez comme suit :
   </para>
   <step>
    <para>
     Connectez-vous à votre machine Windows.
    </para>
   </step>
   <step>
    <para>
     Créez un répertoire qui contiendra l&apos;intégralité de l&apos;arborescence d&apos;installation et nommez-le <filename>INSTALL</filename>, par exemple.
    </para>
   </step>
   <step>
    <para>
     Exportez ce partage en suivant la procédure décrite dans votre documentation Windows.
    </para>
   </step>
   <step>
    <para>
     Accédez à ce partage et créez un sous-répertoire nommé <filename><replaceable>PRODUCT</replaceable></filename>. Remplacez <replaceable>PRODUCT</replaceable> par le nom réel du produit.
    </para>
   </step>
   <step>
    <para>
     Accédez au répertoire <filename>INSTALL/<replaceable>PRODUCT</replaceable></filename> et copiez chaque support dans un répertoire distinct, par exemple <literal>DVD1</literal> et <literal>DVD2</literal>.
    </para>
   </step>
  </procedure>

  <para>
   Pour utiliser un partage monté SMB comme dépôt, procédez comme suit :
  </para>

  <procedure xml:id="pro-deployment-instserver-smb-use">
   <step>
    <para>
     Démarrez la cible d&apos;installation.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez <guimenu>Installation</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Appuyez sur la touche <keycap>F4</keycap> pour sélectionner le dépôt.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez SMB, puis saisissez le nom ou l&apos;adresse IP de la machine Windows, le nom du partage (<filename>INSTALL/<replaceable>PRODUCT</replaceable>/DVD1</filename> dans cet exemple), le nom d&apos;utilisateur et le mot de passe. La syntaxe ressemble à ceci :
    </para>
<screen>smb://workdomain;user:password@server/INSTALL/DVD1</screen>
    <para>
     Après avoir appuyé sur <keycap function="enter"/>, YaST démarre. Vous pouvez alors effectuer l&apos;installation.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-remote-installation-iso">
  <title>Utilisation d&apos;images ISO du support d&apos;installation sur le serveur</title>

  <para>
   Plutôt que de copier manuellement les supports physiques dans votre répertoire serveur, vous pouvez monter les images ISO du support d&apos;installation sur votre serveur d&apos;installation, puis les utiliser comme dépôt. Pour configurer un serveur HTTP, NFS ou FTP qui utilise des images ISO à la place des copies de support, procédez de la façon suivante :
  </para>

  <procedure>
   <step>
    <para>
     Téléchargez les images ISO et enregistrez-les sur la machine à utiliser comme serveur d&apos;installation.
    </para>
   </step>
   <step>
    <para>
     Connectez-vous en tant qu&apos;utilisateur <systemitem class="username">root</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Choisissez et créez un emplacement approprié pour stocker les données d&apos;installation, comme décrit à la <xref linkend="sec-deployment-instserver-nfs"/>, à la <xref linkend="sec-deployment-instserver-ftp"/> ou à la <xref linkend="sec-deployment-instserver-http"/>.
    </para>
   </step>
   <step>
    <para>
     Créez des sous-répertoires pour chaque support d&apos;installation.
    </para>
   </step>
   <step>
    <para>
     Pour monter et décompresser chaque image ISO à son emplacement final, exécutez la commande suivante :
    </para>
<screen><prompt role="root"># </prompt>mount -o loop <replaceable>PATH_TO_ISO</replaceable> <replaceable>PATH_TO_REPOSITORY</replaceable>/<replaceable>PRODUCT</replaceable>/<replaceable>MEDIUMX</replaceable></screen>
    <para>
     Remplacez <replaceable>PATH_TO_ISO</replaceable> (CHEMIN_ISO) par le chemin d&apos;accès à votre copie locale de l&apos;image ISO. Remplacez <replaceable>PATH_TO_REPOSITORY</replaceable> (CHEMIN_DÉPÔT) par le répertoire source de votre serveur. Remplacez <replaceable>PRODUCT</replaceable> (PRODUIT) par le nom du produit et <replaceable>SUPPORTX</replaceable> par le type (CD ou DVD) et le nombre de supports que vous utilisez.
    </para>
   </step>
   <step>
    <para>
     Procédez de même pour monter toutes les images ISO nécessaires à votre produit.
    </para>
   </step>
   <step>
    <para>
     Démarrez votre serveur d&apos;installation comme d&apos;habitude, en suivant la procédure décrite à la <xref linkend="sec-deployment-instserver-nfs"/>, à la <xref linkend="sec-deployment-instserver-ftp"/> ou à la <xref linkend="sec-deployment-instserver-http"/>.
    </para>
   </step>
  </procedure>

  <para>
   Pour monter automatiquement les images ISO lors du démarrage, ajoutez les entrées correspondantes dans <filename>/etc/fstab</filename>. Dans le cas ci-dessus, l&apos;entrée ressemblerait à l&apos;exemple suivant :
  </para>

<screen><replaceable>PATH_TO_ISO</replaceable> <replaceable>PATH_TO_REPOSITORY</replaceable>/<replaceable>PRODUCT</replaceable><replaceable>MEDIUM</replaceable> auto loop</screen>
 </sect1>
</chapter>
