<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="x11_fonts.xml" version="5.0" xml:id="sec-x11-fontsys"> <title>Installation und Konfiguration von Schriften</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker/>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <para>
  Schriften in Linux lassen sich in zwei Gruppen gliedern:
 </para>

 <variablelist>
  <varlistentry>
   <term>Outline- oder Vektorschriften</term>
   <listitem>
    <para>
     Enthält eine mathematische Beschreibung als Informationen zum Zeichnen der Form einer Glyphe. Die Glyphen können dabei auf eine beliebige Größe skaliert werden, ohne dass die Qualität darunter leidet. Bevor Sie eine solche Schrift (oder Glyphe) verwenden können, müssen die mathematischen Beschreibungen in ein Raster überführt werden. Dieser Vorgang wird als <emphasis>Schriftrasterung</emphasis> bezeichnet. Beim <emphasis>Schrift-Hinting</emphasis> (in der Schrift eingebettet) wird das Rendering-Ergebnis für eine bestimmte Größe optimiert. Die Rasterung und das Hinting erfolgen mit der FreeType-Bibliothek.
    </para>
    <para>
     Unter Linux werden häufig die Formate PostScript Typ 1 und Typ 2, TrueType und OpenType verwendet.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>Bitmap- oder Rasterschriften</term>
   <listitem>
    <para>
     Besteht aus einer Pixelmatrix, die auf eine bestimmte Schriftgröße abgestimmt ist. Bitmap-Schriften lassen sich äußerst schnell und einfach rendern. Im Gegensatz zu Vektorschriften können Bitmap-Schriften jedoch nicht ohne Qualitätseinbußen skaliert werden. Diese Schriften werden daher meist in unterschiedlichen Größen bereitgestellt. Selbst heute noch werden Bitmap-Schriften in der Linux-Konsole und teils auch auf Terminals verwendet.
    </para>
    <para>
     Unter Linux sind das Portable Compiled Format (PCF) und das Glyph Bitmap Distribution Format (BDF) die häufigsten Formate.
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <para>
  Das Erscheinungsbild dieser Schriften wird durch zwei wichtige Faktoren beeinflusst:
 </para>

 <itemizedlist mark="bullet" spacing="normal">
  <listitem>
   <para>
    Auswählen einer geeigneten Schriftfamilie
   </para>
  </listitem>
  <listitem>
   <para>
    Rendern der Schrift mit einem Algorithmus, der optisch ansprechende Ergebnisse bewirkt.
   </para>
  </listitem>
 </itemizedlist>

 <para>
  Der letzte Punkt ist nur für Vektorschriften relevant. Die beiden obigen Punkte sind stark subjektiv; dennoch müssen einige Standardvorgaben festgelegt werden.
 </para>

 <para>
  Linux-Schriftrenderingsysteme bestehen aus mehreren Bibliotheken mit unterschiedlichen Beziehungen. Die grundlegende Schriftrenderingbibilothek <link xlink:href="http://www.freetype.org/">FreeType</link> konvertiert die Schriftglyphen von unterstützten Formaten in optimierte Bitmap-Glyphen. Der Renderingvorgang wird durch einen Algorithmus und die zugehörigen Parameter gesteuert (unter Umständen patentrechtlich geschützt).
 </para>

 <para>
  Alle Programme und Bibliotheken, die mit FreeType arbeiten, sollten auf die <link xlink:href="http://www.fontconfig.org/">Fontconfig</link>-Bibliothek zurückgreifen. In dieser Bibliothek werden die Schriftkonfigurationen von Benutzern und vom System gesammelt. Wenn ein Benutzer die Fontconfig-Einstellung ergänzt, entstehen durch diese Änderung Fontconfig-fähige Anwendungen.
 </para>

 <para>
  Ein eingehenderes OpenType-Shaping für Skripte wie Arabic, Han oder Phags-Pa und andere höhere Textverarbeitung erfolgt mit <link xlink:href="http://www.harfbuzz.org/">Harfbuzz</link> oder <link xlink:href="http://www.pango.org/">Pango</link>.
 </para>

 <sect2 xml:id="sec-x11-fontsys-showing-fonts">
  <title>Anzeigen der installierten Schriften</title>
  <para>
   Mit dem Kommando <command>rpm</command> oder <command>fc-list</command> erhalten Sie einen Überblick über die Schriften, die auf dem System installiert sind. Beide Kommandos liefern eine aussagekräftige Antwort, geben dabei jedoch (je nach System- und Benutzerkonfiguration) ggf. unterschiedliche Listen zurück:
  </para>
  <variablelist>
   <varlistentry>
    <term><command>rpm</command>
    </term>
    <listitem>
     <para>
      <command>rpm</command> zeigt die auf dem System installierten Software-Pakete an, in denen sich Schriften befinden:
     </para>
<screen><prompt>tux &gt; </prompt>rpm -qa '*fonts*'</screen>
     <para>
      Alle Schriftpakete sollten mit diesem Ausdruck aufgefunden werden. Unter Umständen gibt das Kommando jedoch einige falsch positive Einträge zurück, beispielsweise <literal>fonts-config</literal> (dies ist weder eine Schrift noch sind hier Schriften enthalten).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>fc-list</command>
    </term>
    <listitem>
     <para>
      Mit <command>fc-list</command> erhalten Sie einen Überblick darüber, welche Schriftfamilien verfügbar sind und ob diese auf dem System oder in Ihrem Benutzerverzeichnis installiert sind:
     </para>
<screen><prompt>tux &gt; </prompt>fc-list ':' family</screen>
     <note>
      <title>Kommando <command>fc-list</command></title>
      <para>
       Das Kommando <command>fc-list</command> ist eine Erweiterung zur Fontconfig-Bibliothek. Aus Fontconfig – oder genauer gesagt, aus dem Cache – lassen sich zahlreiche interessante Informationen ermitteln. Unter <command>man 1 fc-list</command> finden Sie weitere Einzelheiten.
      </para>
     </note>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec-x11-fontsys-viewing">
  <title>Anzeigen von Schriften</title>
  <para>
   Mit dem Kommando <command>ftview</command> (Paket <systemitem>ft2demos</systemitem>) sowie unter <link xlink:href="http://fontinfo.opensuse.org/"/> sehen Sie, wie eine installierte Schriftfamilie dargestellt wird. Soll beispielsweise die Schrift FreeMono in 14 Punkt angezeigt werden, verwenden Sie <command>ftview</command> wie folgt:
  </para>
<screen><prompt>tux &gt; </prompt>ftview 14 /usr/share/fonts/truetype/FreeMono.ttf</screen>
  <para>
   Unter <link xlink:href="http://fontinfo.opensuse.org/"/> erfahren Sie, welche Schriftschnitte (normal, fett, kursiv etc.) und welche Sprachen unterstützt werden.
  </para>
 </sect2>

 <sect2 xml:id="sec-x11-fontsys-querying">
  <title>Abfragen von Schriften</title>
  <para>
   Mit dem Kommando <command>fc-match</command> fragen Sie ab, welche Schrift für ein angegebenes Muster verwendet wird.
  </para>
  <para>
   Wenn das Muster beispielsweise eine bereits installierte Schrift enthält, gibt <command>fc-match</command> den Dateinamen, die Schriftfamilie und den Schriftschnitt zurück:
  </para>
<screen><prompt>tux &gt; </prompt>fc-match 'Liberation Serif'
LiberationSerif-Regular.ttf: "Liberation Serif" "Regular"</screen>
  <para>
   Ist die gewünschte Schrift nicht auf dem System vorhanden, greifen die Ähnlichkeitsregeln von Fontconfig und es werden verfügbare Schriften mit der größtmöglichen Ähnlichkeit gesucht. Ihre Anforderung wird also ersetzt:
  </para>
<screen><prompt>tux &gt; </prompt>fc-match 'Foo Family'
DejaVuSans.ttf: "DejaVu Sans" "Book"</screen>
  <para>
   Fontconfig unterstützt <emphasis>Aliase</emphasis>: Ein Name wird durch den Namen einer anderen Schriftfamilie ersetzt. Ein typisches Beispiel sind generische Namen wie <quote>sans-serif</quote>, <quote>serif</quote> und <quote>monospace</quote>. Diese Alias-Namen können durch echte Familiennamen und sogar durch eine Präferenzliste mit Familiennamen ersetzt werden:
  </para>
<screen><prompt>tux &gt; </prompt>for font in serif sans mono; do fc-match "$font" ; done
DejaVuSerif.ttf: "DejaVu Serif" "Book"
DejaVuSans.ttf: "DejaVu Sans" "Book"
DejaVuSansMono.ttf: "DejaVu Sans Mono" "Book"</screen>
  <para>
   Das Ergebnis auf Ihrem System kann abweichen, abhängig davon, welche Schriften derzeit installiert sind.
  </para>
  <note>
   <title>Ähnlichkeitsregeln in Fontconfig</title>
   <para>
    Fontconfig gibt <emphasis>immer</emphasis> eine reale Schriftfamilie (sofern mindestens eine Familie installiert ist) für die angegebene Anforderung zurück, die so ähnlich ist wie möglich. Die <quote>Ähnlichkeit</quote> ist abhängig von den internen Metriken von Fontconfig sowie von den Fontconfig-Einstellungen des Benutzers oder Administrators.
   </para>
  </note>
 </sect2>

 <sect2 xml:id="sec-x11-fontsys-install">
  <title>Installieren von Schriften</title>
  <para>
   Zum Installieren einer neuen Schrift stehen die folgenden wichtigsten Verfahren zur Auswahl:
  </para>
  <orderedlist spacing="normal">
   <listitem>
    <para>
     Installieren Sie die Schriftdateien (z. B. <filename>*.ttf</filename> oder <filename>*.otf</filename>) manuell in ein bekanntes Schriftverzeichnis. Wenn die Schriften systemweit verfügbar sein sollen, verwenden Sie das Standardverzeichnis <filename>/usr/share/fonts</filename>. Für die Installation in Ihrem Benutzerverzeichnis verwenden Sie <filename>~/.config/fonts</filename>.
    </para>
    <para>
     Falls Sie nicht die standardmäßigen Verzeichnisse verwenden möchten, können Sie in Fontconfig ein anderes Verzeichnis auswählen. Hierzu geben Sie das Element <literal>&lt;dir&gt;</literal> an. Weitere Informationen finden Sie in <xref linkend="sec-x11-fontsys-config-fontconfig"/>.
    </para>
   </listitem>
   <listitem>
    <para>
     Installieren Sie die Schriften mit <command>zypper</command>. Zahlreiche Schriften sind bereits als Paket verfügbar, beispielsweise in der SUSE-Distribution oder im Repository <link xlink:href="http://download.opensuse.org/repositories/M17N:/fonts/">M17N:fonts</link>. Fügen Sie das Repository mit dem nachfolgenden Kommando in die Liste ein. So fügen Sie beispielsweise ein Repository für <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP3</phrase></phrase> hinzu:
    </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper ar
     <phrase os="sles;sled">https://download.opensuse.org/repositories/M17N:/fonts/SLE_15/</phrase></screen>
    <para>
     <replaceable>FONT_FAMILY_NAME</replaceable> ermitteln Sie mit dem folgenden Kommando:
    </para>
<screen><prompt>tux &gt; </prompt>zypper se '<replaceable>FONT_FAMILY_NAME</replaceable>*fonts'</screen>
   </listitem>


  </orderedlist>
 </sect2>

 <sect2 xml:id="sec-x11-fontsys-config">
  <title>Konfigurieren der Darstellung von Schriften</title>
  <para>
   Je nach Renderingmedium und Schriftgröße entstehen womöglich keine zufriedenstellenden Ergebnisse. Ein durchschnittlicher Monitor hat beispielsweise eine Auflösung von 100dpi. Bei dieser Auflösung sind die Pixel zu groß und die Glyphen wirken plump und unförmig.
  </para>
  <para>
   Für niedrigere Auflösungen stehen mehrere Algorithmen bereit, z. B. Anti-Aliasing (Graustufenglättung), Hinting (Anpassen an das Raster) oder Subpixel-Rendering (Verdreifachen der Auflösung in eine Richtung). Diese Algorithmen können dabei von Schriftformat zu Schriftformat unterschiedlich sein.
  </para>
  <important>
   <title>Patentprobleme beim Subpixel-Rendering</title>
   <para>
    Das Subpixel-Rendering kommt in SUSE-Distributionen nicht zum Einsatz. FreeType2 unterstützt zwar diesen Algorithmus, allerdings unterliegt er mehreren Patenten, die Ende 2019 auslaufen. Die eingestellten Optionen für das Subpixel-Rendering in Fontconfig wirken sich daher nur dann aus, wenn das System eine FreeType2-Bibilothek enthält, in der das Subpixel-Rendering kompiliert ist.
   </para>
  </important>
  <para>
   Mit Fontconfig können Sie den Rendering-Algorithmus für einzelne Schriften oder auch für eine Gruppe von Schriften gleichzeitig auswählen.
  </para>
  <sect3 xml:id="sec-x11-fontsys-config-sysconfig">
   <title>Konfigurieren von Schriften mit <literal>sysconfig</literal></title>
   <para>
    <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> umfasst eine <literal>sysconfig</literal>-Schicht oberhalb von Fontconfig. Dies ist ein guter Ausgangspunkt, um mit der Schriftkonfiguration zu experimentieren. Zum Ändern der Standardeinstellungen bearbeiten Sie die Konfigurationsdatei <filename>/etc/sysconfig/fonts-config</filename>. (Alternativ verwenden Sie das YaST-Modul sysconfig.) Führen nach dem Bearbeiten der Datei <command>fonts-config</command> aus:
   </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> /usr/sbin/fonts-config</screen>
   <para>
    Starten Sie die Anwendung neu, damit der Effekt sichtbar wird. Beachten Sie Folgendes:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Einige Anwendungen müssen nicht neu gestartet werden. Firefox liest die Fontconfig-Konfiguration beispielsweise in regelmäßigen Abständen aus. Auf soeben erstellten oder neu geladenen Registerkarten werden die Schriftkonfigurationen erst später sichtbar.
     </para>
    </listitem>
    <listitem>
     <para>
      Nach jedem Installieren oder Entfernen eines Pakets wird automatisch das Skript <command>fonts-config</command> aufgerufen. (Ist dies nicht der Fall, so ist das Schriften-Software-Paket fehlerhaft.)
     </para>
    </listitem>
    <listitem>
     <para>
      Jede sysconfig-Variable kann vorübergehend mit der Kommandozeilenoption <command>fonts-config</command> überschrieben werden. Weitere Informationen finden Sie in <command>fonts-config --help</command>.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Es können verschiedene sysconfig-Variablen geändert werden. Weitere Informationen finden Sie auf der man-Seite <command>man 1 fonts-config</command> oder auf der Hilfeseite des YaST-Moduls sysconfig. Beispiele für Variablen:
   </para>
   <variablelist>
    <varlistentry>
     <term>Verwendung der Rendering-Algorithmen</term>
     <listitem>
      <para>
       Nutzen Sie ggf. <varname>FORCE_HINTSTYLE</varname>, <varname>FORCE_AUTOHINT</varname>, <varname>FORCE_BW</varname>, <varname>FORCE_BW_MONOSPACE</varname>, <varname>USE_EMBEDDED_BITMAPS</varname> und <varname>EMBEDDED_BITMAP_LANGAGES</varname>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Präferenzliste generischer Aliase</term>
     <listitem>
      <para>
       Verwenden Sie <varname>PREFER_SANS_FAMILIES</varname>, <varname>PREFER_SERIF_FAMILIES</varname>, <varname>PREFER_MONO_FAMILIES</varname> und <varname>SEARCH_METRIC_COMPATIBLE</varname>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    In der nachfolgenden Liste finden Sie einige Konfigurationsbeispiele, sortiert von den <quote>am leichtesten lesbaren</quote> Schriften (stärkerer Kontrast) zu den <quote>ansprechendsten</quote> Schriften (stärker geglättet).
   </para>
   <variablelist>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-bitmap">
     <term>Bitmap-Schriften</term>
     <listitem>
      <para>
       Mit den Variablen <varname>PREFER_*_FAMILIES</varname> können Sie Bitmap-Schriften den Vorzug geben. Beachten Sie das Beispiel im Hilfeabschnitt zu diesen Variablen. Bitmap-Schriften werden schwarzweiß dargestellt und nicht geglättet und sie stehen nur in bestimmten Größen zur Verfügung. Nutzen Sie ggf.
      </para>
<screen>SEARCH_METRIC_COMPATIBLE="no"</screen>
      <para>
       zum Deaktivieren der Ersetzungen der Familienname auf Basis der Metrikkompatibilität.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-bw">
     <term>Skalierbare, schwarzweiß dargestellte Schriften</term>
     <listitem>
      <para>
       Skalierbare Schriften, die ohne Antialiasing gerendert werden, können ähnliche Ergebnisse liefern wie Bitmap-Schriften, wobei die Schriften weiterhin skalierbar bleiben. Verwenden Sie Schriften mit gutem Hinting, beispielsweise die Liberation-Schriftfamilien. Bislang sind leider nur wenige Schriften mit gutem Hinting erhältlich. Mit der folgenden Variablen erzwingen Sie diese Methode:
      </para>
<screen>FORCE_BW="yes"</screen>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-bw-monospace">
     <term>Nichtproportionale schwarzweiß dargestellte Schriften</term>
     <listitem>
      <para>
       Nichtproportionale Schriften werden nur ohne Antialiasing gerendert; ansonsten verwenden Sie die Standardeinstellungen:
      </para>
<screen>FORCE_BW_MONOSPACE="yes"</screen>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-default">
     <term>Standardeinstellungen</term>
     <listitem>
      <para>
       Alle Schriften werden mit Antialiasing gerendert. Schriften mit gutem Hinting werden mit dem <emphasis>Byte-Code-Interpreter</emphasis>) gerendert, die übrigen Schriften mit Autohinter (<literal>hintstyle=hintslight</literal>). Behalten Sie die Standardeinstellungen für alle relevanten sysconfig-Variablen bei.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-x11-fontsys-sysconfig-cff">
     <term>CFF-Schriften</term>
     <listitem>
      <para>
       Die Schriften werden im CFF-Format verwendet. Im Hinblick auf die aktuellen Verbesserungen in FreeType2 sind diese Schriften im Allgemeinen leichter lesbar als die standardmäßigen TrueType-Schriften. Probieren Sie sie aus, indem Sie das Beispiel <literal>PREFER_*_FAMILIES</literal> verwenden. Auf Wunsch können Sie sie wie folgt dunkler und fetter darstellen:
      </para>
<screen>SEARCH_METRIC_COMPATIBLE="no"</screen>
      <para>
       Standardmäßig werden sie mit <literal>hintstyle=hintslight</literal> gerendert. Eine weitere Möglichkeit:
      </para>
<screen>SEARCH_METRIC_COMPATIBLE="no"</screen>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="ex-x11-fontsys-sysconfig-autohint">
     <term>Nur Autohinter</term>
     <listitem>
      <para>
       Auch für Schriften mit gutem Hinter wird Autohinter aus FreeType2 verwendet. Dies kann zu fetteren, manchmal unscharfen Buchstaben mit niedrigerem Kontrast führen. Mit der folgenden Variablen aktivieren Sie dies:
      </para>
<screen>FORCE_AUTOHINTER="yes"</screen>
      <para>
       Mit <literal>FORCE_HINTSTYLE</literal> steuern Sie den Hinting-Grad.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
  <sect3 xml:id="sec-x11-fontsys-config-fontconfig">
   <title>Kurzer Einblick in Fontconfig-XML</title>
   <para>
    Bei Fontconfig wird das Konfigurationsformat <emphasis>eXtensible Markup Language</emphasis> (XML) genutzt. Diese wenigen Beispiele sollen keine erschöpfende Referenz darstellen, sondern lediglich einen kurzen Überblick bieten. Weitere Informationen und Anregungen finden Sie in <command>man 5 fonts-conf</command> oder <filename>/etc/fonts/conf.d/</filename>.
   </para>
   <para>
    Die zentrale Fontconfig-Konfigurationsdatei ist <filename>/etc/fonts/fonts.conf</filename> und umfasst unter anderem das gesamte Verzeichnis <filename>/etc/fonts/conf.d/</filename>. Änderungen an Fontconfig können an zwei Stellen vorgenommen werden:
   </para>
   <orderedlist xml:id="ol-x11-fontsys-configfiles" spacing="normal">
    <title>Fontconfig-Konfigurationsdateien</title>
    <listitem>
     <formalpara>
      <title>Systemweite Änderungen</title>
      <para>
       Bearbeiten Sie die Datei <filename>/etc/fonts/local.conf</filename>. (Standardmäßig enthält diese Datei ein leeres <literal>fontconfig</literal>-Element.)
      </para>
     </formalpara>
    </listitem>
    <listitem>
     <formalpara>
      <title>Benutzerspezifische Änderungen</title>
      <para>
       Bearbeiten Sie die Datei <filename>~/.config/fontconfig/fonts.conf</filename>. Speichern Sie die Fontconfig-Konfigurationsdateien in das Verzeichnis <filename>~/.config/fontconfig/conf.d/</filename>.
      </para>
     </formalpara>
    </listitem>
   </orderedlist>
   <para>
    Benutzerspezifische Änderungen überschreiben die systemweiten Einstellungen.
   </para>
   <note>
    <title>Veraltete Benutzerkonfigurationsdatei</title>
    <para>
     Die Datei <filename>~/.fonts.conf</filename> ist als veraltet gekennzeichnet und darf nicht mehr verwendet werden. Verwenden Sie stattdessen die Datei <filename>~/.config/fontconfig/fonts.conf</filename>.
    </para>
   </note>
   <para>
    Jede Konfigurationsdatei muss ein <literal>fontconfig</literal>-Element enthalten. Die minimale Datei sieht daher wie folgt aus:
   </para>
<screen>&lt;?xml version="1.0"?&gt;
   &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
   &lt;fontconfig&gt;
   &lt;!-- Insert your changes here --&gt;
   &lt;/fontconfig&gt;</screen>
   <para>
    Falls die Standardverzeichnisse nicht ausreichen, fügen Sie das <literal>dir</literal>-Element mit dem gewünschten Verzeichnis ein:
   </para>
<screen>&lt;dir&gt;/usr/share/fonts2&lt;/dir&gt;</screen>
   <para>
    Fontconfig sucht <emphasis>rekursiv</emphasis> nach den Schriften.
   </para>
   <para>
    Mit dem folgenden Fontconfig-Snippet können Sie die Algorithmen für das Schriftrendering auswählen (siehe <xref linkend="ex-x11-fontsys-fontconfig-rendering-algorithms"/>):
   </para>
   <example xml:id="ex-x11-fontsys-fontconfig-rendering-algorithms">
    <title>Festlegen von Rendering-Algorithmen</title>
<screen>&lt;match target="font"&gt;
 &lt;test name="family"&gt;
  &lt;string&gt;<replaceable>FAMILY_NAME</replaceable>&lt;/string&gt;
 &lt;/test&gt;
 &lt;edit name="antialias" mode="assign"&gt;
  &lt;bool&gt;true&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="hinting" mode="assign"&gt;
  &lt;bool&gt;true&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="autohint" mode="assign"&gt;
  &lt;bool&gt;false&lt;/bool&gt;
 &lt;/edit&gt;
 &lt;edit name="hintstyle" mode="assign"&gt;
  &lt;const&gt;hintfull&lt;/const&gt;
 &lt;/edit&gt;
&lt;/match&gt;</screen>
   </example>
   <para>
    Sie können verschiedene Eigenschaften der Schriften zunächst ausprobieren. Mit dem <literal>&lt;test&gt;</literal>-Element können Sie beispielsweise die Schriftfamilie (siehe Beispiel), das Größenintervall, den Zeichenabstand, das Schriftformat und andere Eigenschaften testen. Wenn Sie <literal>&lt;test&gt;</literal> vollständig löschen, werden alle <literal>&lt;edit&gt;</literal>-Elemente auf sämtliche Schriften angewendet (globale Änderung).
   </para>
   <example xml:id="ex-x11-fontsys-fontconfig-aliases1">
    <title>Aliasse und Ersetzungen von Familiennamen</title>
    <variablelist>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-default">
      <term>Regel 1</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-prefer">
      <term>Regel 2</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;prefer&gt;
  &lt;family&gt;Droid Serif&lt;/family&gt;
 &lt;/prefer&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-accept">
      <term>Regel 3</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;STIXGeneral&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
    </variablelist>
   </example>
   <para>
    Mit den Regeln in <xref linkend="ex-x11-fontsys-fontconfig-aliases1"/> wird eine <emphasis>priorisierte Familienliste</emphasis> (PFL) erzeugt. Je nach Element werden verschiedene Aktionen ausgeführt:
   </para>
   <variablelist>
    <varlistentry>
     <term><literal>&lt;default&gt;</literal> in <xref linkend="vle-x11-fontsys-example-alias-default"/>
     </term>
     <listitem>
      <para>
       Mit dieser Regel wird ein <literal>serif</literal>-Familienname <emphasis>an das Ende</emphasis> der PFL angehängt.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>&lt;prefer&gt;</literal> in <xref linkend="vle-x11-fontsys-example-alias-prefer"/>
     </term>
     <listitem>
      <para>
       Mit dieser Regel wird <quote>Droid Serif</quote> <emphasis> direkt vor</emphasis> dem ersten Auftreten von <literal>serif</literal> in der PFL eingefügt, wenn <literal>Alegreya SC</literal> in der PFL vorliegt.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>&lt;accept&gt;</literal> in <xref linkend="vle-x11-fontsys-example-alias-accept"/>
     </term>
     <listitem>
      <para>
       Mit dieser Regel wird ein <quote>STIXGeneral</quote>-Familienname <emphasis>direkt nach</emphasis> dem ersten Auftreten des <literal>serif</literal>-Familiennamens in die PFL eingefügt.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Wenn alle Snippets in der Reihenfolge <xref linkend="vle-x11-fontsys-example-alias-default"/> - <xref linkend="vle-x11-fontsys-example-alias-prefer"/> - <xref linkend="vle-x11-fontsys-example-alias-accept"/> ausgeführt werden und der Benutzer <quote>Alegreya SC</quote> anfordert, wird die PFL wie in <xref linkend="tab-x11-fontsys-example-alias"/> dargestellt erzeugt.
   </para>
   <table xml:id="tab-x11-fontsys-example-alias">
    <title>Erzeugen einer PFL aus Fontconfig-Regeln</title>
    <tgroup cols="2">
     <colspec colwidth="1*"/>
     <colspec colwidth="3*"/>
     <thead>
      <row>
       <entry>
        <para>
         Reihenfolge
        </para>
       </entry>
       <entry>
        <para>
         Aktuelle PFL
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Anforderung
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-default"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>, <literal>serif</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-prefer"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>, <literal>Droid Serif</literal>, <literal>serif</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-accept"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>, <literal>Droid Serif</literal>, <literal>serif</literal>, <literal>STIXGeneral</literal>
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <para>
    In den Fontconfig-Metriken hat der Familienname die höchste Priorität vor anderen Mustern wie Schriftschnitt, Größe usw. Fontconfig prüft, welche Familie derzeit auf dem System installiert ist. Wenn <quote>Alegreya SC</quote> installiert ist, gibt Fontconfig diese Schrift zurück. Ansonsten wird <quote>Droid Serif</quote> angefordert usw.
   </para>
   <para>
    Gehen Sie vorsichtig vor. Wenn die Reihenfolge der Fontconfig-Snippets geändert wird, gibt Fontconfig unter Umständen andere Ergebnisse zurück (siehe <xref linkend="tab-x11-fontsys-example-alias2"/>).
   </para>
   <table xml:id="tab-x11-fontsys-example-alias2">
    <title>Ergebnisse beim Erzeugen der PFL aus Fontconfig-Regeln mit anderer Reihenfolge</title>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Reihenfolge
        </para>
       </entry>
       <entry>
        <para>
         Aktuelle PFL
        </para>
       </entry>
       <entry>
        <para>
         Hinweis
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Anforderung
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
       <entry>
        <para>
         Dieselbe Anforderung wie oben.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-prefer"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
       <entry>
        <para>
         <literal>serif</literal> nicht in PFL, kein Ersatz
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-accept"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
       <entry>
        <para>
         <literal>serif</literal> nicht in PFL, kein Ersatz
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-default"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>, <literal>serif</literal>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal> in PFL vorhanden, Ersatz vorgenommen
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <note>
    <title>Implikation</title>
    <para>
     Betrachten Sie das Alias <literal>&lt;default&gt;</literal> als Klassifizierung oder Einbeziehung dieser Gruppe (sofern nicht installiert). Wie das Beispiel zeigt, muss <literal>&lt;default&gt;</literal> stets vor den Aliasen <literal>&lt;prefer&gt;</literal> und <literal>&lt;accept&gt;</literal> dieser Gruppe stehen.
    </para>
    <para>
     Die Klassifizierung <literal>&lt;default&gt;</literal> ist nicht auf die generischen Aliase serif, sans-serif und monospace beschränkt. Ein ausführlicheres Beispiel finden Sie in <filename>/usr/share/fontconfig/conf.avail/30-metric-aliases.conf</filename>.
    </para>


   </note>
   <para>
    Mit dem nachfolgenden Fontconfig-Snippet in <xref linkend="ex-x11-fontsys-fontconfig-aliases2"/> wird eine <literal>serif</literal>-Gruppe erstellt. Jede Familie in dieser Gruppe kann andere Familien ersetzen, wenn eine vorangehende Schrift nicht installiert ist.
   </para>
   <example xml:id="ex-x11-fontsys-fontconfig-aliases2">
    <title>Aliase und Ersetzungen von Familiennamen</title>
<screen>&lt;alias&gt;
 &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;Droid Serif&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;STIXGeneral&lt;/family&gt;
 &lt;default&gt;
  &lt;family&gt;serif&lt;/family&gt;
 &lt;/default&gt;
&lt;/alias&gt;
&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;Droid Serif&lt;/family&gt;
  &lt;family&gt;STIXGeneral&lt;/family&gt;
  &lt;family&gt;Alegreya SC&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</screen>
   </example>
   <para>
    Die Priorität ergibt sich aus der Reihenfolge im Alias <literal>&lt;accept&gt;</literal>. Ebenso können stärkere Aliase <literal>&lt;prefer&gt;</literal> verwendet werden.
   </para>
   <para>
    <xref linkend="ex-x11-fontsys-fontconfig-aliases1"/> wird durch <xref linkend="ex-x11-fontsys-fontconfig-aliases3"/> ergänzt.
   </para>
   <example xml:id="ex-x11-fontsys-fontconfig-aliases3">
    <title>Aliasse und Ersetzungen von Familiennamen</title>
    <variablelist>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-accept2">
      <term>Regel 4</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;accept&gt;
  &lt;family&gt;Liberation Serif&lt;/family&gt;
 &lt;/accept&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
     <varlistentry xml:id="vle-x11-fontsys-example-alias-prefer2">
      <term>Regel 5</term>
      <listitem>
<screen>&lt;alias&gt;
 &lt;family&gt;serif&lt;/family&gt;
 &lt;prefer&gt;
  &lt;family&gt;DejaVu Serif&lt;/family&gt;
 &lt;/prefer&gt;
&lt;/alias&gt;</screen>
      </listitem>
     </varlistentry>
    </variablelist>
   </example>
   <para>
    Die erweiterte Konfiguration aus <xref linkend="ex-x11-fontsys-fontconfig-aliases3"/> würde die folgende PFL-Entwicklung bewirken:
   </para>
   <table xml:id="tab-x11-fontsys-example-alias3">
    <title>Ergebnisse beim Erzeugen einer PFL aus Fontconfig-Regeln</title>
    <tgroup cols="2">
     <colspec colwidth="1*"/>
     <colspec colwidth="3*"/>
     <thead>
      <row>
       <entry>
        <para>
         Reihenfolge
        </para>
       </entry>
       <entry>
        <para>
         Aktuelle PFL
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Anforderung
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-default"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>, <literal>serif</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-prefer"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>, <literal>Droid Serif</literal>, <literal>serif</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-accept"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>, <literal>Droid Serif</literal>, <literal>serif</literal>, <literal>STIXGeneral</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-accept2"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>, <literal>Droid Serif</literal>, <literal>serif</literal>, <literal>Liberation Serif</literal>, <literal>STIXGeneral</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <xref linkend="vle-x11-fontsys-example-alias-prefer2"/>
        </para>
       </entry>
       <entry>
        <para>
         <literal>Alegreya SC</literal>, <literal>Droid Serif</literal>, <literal>DejaVu Serif</literal>, <literal>serif</literal>, <literal>Liberation Serif</literal>, <literal>STIXGeneral</literal>
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <note>
    <title>Auswirkungen.</title>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Wenn mehrere <literal>&lt;accept&gt;</literal>-Deklarationen für denselben generischen Namen vorhanden sind, hat die zuletzt geparste Deklaration <quote>Vorrang</quote>. Beim Erstellen einer systemweiten Konfiguration sollten Sie <literal>&lt;accept&gt;</literal> <emphasis role="bold"> nach Möglichkeit nicht nach</emphasis> dem Benutzer(<filename>/etc/fonts/conf.d/*-user.conf</filename>) angeben.
      </para>
     </listitem>
     <listitem>
      <para>
       Wenn mehrere <literal>&lt;prefer&gt;</literal>-Deklarationen für denselben generischen Namen vorhanden sind, hat die zuletzt geparste Deklaration <quote>Vorrang</quote>. In der systemweiten Konfiguration sollten Sie <literal>&lt;prefer&gt;</literal>
       <emphasis role="bold"> nicht vor</emphasis> dem Benutzer angeben.
      </para>
     </listitem>
     <listitem>
      <para>
       Jede <literal>&lt;prefer&gt;</literal>-Deklaration überschreibt die <literal>&lt;accept&gt;</literal>-Deklarationen für denselben generischen Namen. Wenn der Administrator dem Benutzer die Möglichkeit geben möchte, <literal>&lt;accept&gt;</literal> zu verwenden (nicht nur <literal>&lt;prefer&gt;</literal>), sollte der Administrator <literal>&lt;prefer&gt;</literal> nicht in der systemweiten Konfiguration angeben. Die meisten Benutzer beschränken sich jedoch lediglich auf <literal>&lt;prefer&gt;</literal>, sodass dies keine negativen Auswirkungen haben sollte. <literal>&lt;prefer&gt;</literal> kommt auch in systemweiten Konfigurationen zum Einsatz.
      </para>
     </listitem>
    </itemizedlist>
   </note>
  </sect3>
 </sect2>
</sect1>
