<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="net_yast.xml" version="5.0" xml:id="sec-network-yast"> <title>使用 YaST 配置网络连接</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker/>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <para>
  Linux 上有多个支持的联网类型。其中多数使用不同的设备名，配置文件分布在文件系统上的多个位置。关于手动网络配置方面的详细概述，请参见<xref linkend="sec-network-manconf"/>。
 </para>

 <para>
  <phrase os="sled"><phrase role="productname"><phrase os="sled"/></phrase>在 NetworkManager 默认处于活动状态的 SUSE Linux Enterprise Desktop 上，所有网卡都会加以配置。如果 NetworkManager 不处于活动状态，那么系统只会自动配置使用链路连通的第一个接口（已连接网络电缆）。</phrase>可随时在已安装系统中配置额外的硬件。以下章节将介绍 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 支持的所有网络连接类型的网络配置。
 </para>

 

 <sect2 xml:id="sec-network-yast-netcard">
  <title>使用 YaST 配置网卡</title>
  <para>
   要在 YaST 中配置以太网卡或 Wi-Fi/蓝牙卡，请选择<menuchoice> <guimenu>系统</guimenu> <guimenu> 网络设置</guimenu>
   </menuchoice>。启动模块后，YaST 将显示<guimenu>网络设置</guimenu>对话框，其中包括四个选项卡：<guimenu>全局选项</guimenu>、<guimenu>概述</guimenu>、<guimenu>主机名/DNS</guimenu> 和<guimenu>路由选择</guimenu>。
  </para>
  <para>
   通过<guimenu>全局选项</guimenu>选项卡可设置常规联网选项，例如网路设置方法、IPv6 和常规 DHCP 选项。有关详细信息，请参见<xref linkend="sec-network-yast-netcard-global"/>。
  </para>
  <para>
   <guimenu>概述</guimenu>选项卡包含关于已安装网络接口和配置的信息。会列出已正确检测到的所有网卡及其名称。您可在此对话框中手动配置新卡、删除或更改其配置。要手动配置未自动检测到的网卡，请参见<xref linkend="sec-network-yast-netcard-man"/>。要更改所配置网卡的配置，请参见<xref linkend="sec-network-yast-netcard-change"/>。
  </para>
  <para>
   通过<guimenu>主机名/DNS</guimenu> 选项卡可设置计算机的主机名和要使用的服务器名称。有关详细信息，请参见<xref linkend="sec-network-yast-change-host"/>。
  </para>
  <para>
   <guimenu>路由选择</guimenu>选项卡用于配置路由选择。有关更多信息，请参见<xref linkend="sec-network-yast-change-route"/>。
  </para>
  <figure xml:id="fig-yast2-neticard">
   <title>配置网络设置</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_net_icard.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_net_icard.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
  <sect3 xml:id="sec-network-yast-netcard-global">
   <title>配置全局联网选项</title>
   <para>
    通过 YaST <guimenu>网络设置</guimenu>模块的<guimenu>全局选项</guimenu>选项卡，可设置重要的全局联网选项，如使用 NetworkManager、IPv6 和 DHCP 客户端选项。这些设置适用于所有网络接口。
   </para>
   
   <para>
    在<guimenu>网络设置方法</guimenu>中，选择管理网络连接的方法。如果希望 NetworkManager 桌面小程序管理所有接口的连接，请选择 <guimenu>NetworkManager 服务</guimenu>。NetworkManager 非常适用于在多个有线和无线网络之间切换。如果您运行的不是桌面环境，或者您的计算机是 Xen 服务器、虚拟系统或者会在网络中提供 DHCP 或 DNS 等网络服务，请使用 <guimenu>Wicked 服务</guimenu>方法。如果使用 NetworkManager，则应使用 <command>nm-applet</command> 配置网络选项，并且<guimenu>网络设置</guimenu>模块的<guimenu>概述</guimenu>、<guimenu>主机名/DNS</guimenu>和<guimenu>路由选择</guimenu>选项卡会被禁用。<phrase os="sled;osuse">有关 NetworkManager 的详细信息，请参见<xref linkend="cha-nm"/>。</phrase> 
   </para>
   <para>
    在 <guimenu>IPv6 协议设置</guimenu>中，选择是否使用 IPv6 协议。可将 IPv6 与 IPv4 一起使用。默认情况下，会启用 IPv6。但是在不使用 IPv6 协议的网络中，如果禁用 IPv6 协议，响应时间会更快。要禁用 IPv6，请停用<guimenu>启用 IPv6</guimenu>。如果禁用了 IPv6，内核将不再自动装载 IPv6 模块。重启动后会应用此设置。
   </para>
   <para>
    在 <guimenu>DHCP 客户端选项</guimenu>中，配置 DHCP 客户端的选项。在单个网络上，每个 DHCP 客户端的 <guimenu>DHCP 客户端标识符</guimenu>必须不同。如果保留为空，会默认为网络接口的硬件地址。但是，如果正在运行若干使用相同网络接口（即相同硬件地址）的虚拟机，则在此处指定唯一的自由格式标识符。
   </para>
   <para>
    <guimenu>要发送的主机名</guimenu>指定当 DHCP 客户端将消息发送到 DHCP 服务器时，主机名选项字段使用的字符串。某些 DHCP 服务器会根据此主机名（动态 DNS）来更新名称服务器区域（正向和反向记录）。此外，有些 DHCP 服务器要求<guimenu>要发送的主机名</guimenu>选项字段包含来自客户端的 DHCP 消息中的特定字符串。如果保留 <literal>AUTO</literal>，将发送当前的主机名（即 <filename>/etc/HOSTNAME</filename> 中定义的主机名）。将选项字段保留空白则不会发送任何主机名。
   </para>
   <para>
    如果您不希望根据 DHCP 中的信息更改默认路由，请停用<guimenu>通过 DHCP 更改默认路由</guimenu>。
   </para>
  </sect3>
  <sect3 xml:id="sec-network-yast-netcard-change">
   <title>更改网卡的配置</title>
   <para>
    要更改网卡的配置，请在 YaST <menuchoice> <guimenu>网络设置</guimenu>
    <guimenu> 概述</guimenu> </menuchoice>中已检测到的网卡列表中选择一个网卡，然后单击<guimenu>编辑</guimenu>。将显示<guimenu>网卡设置</guimenu>对话框，可在其中使用<guimenu>常规</guimenu>、<guimenu>地址</guimenu>和<guimenu>硬件</guimenu>选项卡调整网卡配置。
   </para>
   <sect4 xml:id="sec-network-yast-change-address">
    <title>配置 IP 地址</title>

    <para>
     您可在<guimenu>网卡设置</guimenu>对话框的<guimenu>地址</guimenu>选项卡中设置网卡的 IP 地址或 IP 地址的确定方法。同时支持 IPv4 和 IPv6 地址。网卡可设置为<guimenu>无 IP 地址</guimenu>（对于绑定设备很有用）、<guimenu>静态指派的 IP 地址</guimenu>（IPv4 或 IPv6）或通过 <guimenu>DHCP</guimenu>和/或 <guimenu>Zeroconf</guimenu> 指派的<guimenu>动态地址</guimenu>。
    </para>
    <para>
     如果使用<guimenu>动态地址</guimenu>，则选择是使用<guimenu>仅 DHCP 版本 4</guimenu>（用于 DHCPv4）、<guimenu>DHCP 版本 6</guimenu>（用于 DHCPv6）还是 <guimenu>DHCP 版本 4 和 6</guimenu>。
    </para>
    <para>
     如果可能，安装期间的首个带链接的可用网卡将会通过 DHCP 自动配置为使用自动 IP 地址。<phrase os="sled">在 NetworkManager 默认处于活动状态的 SUSE Linux Enterprise Desktop 上，所有网卡都会加以配置。</phrase>
    </para>
    
    <para>
     如果使用的是 DSL 线路，但 ISP（互联网服务提供商）没有指派静态 IP，此时还应使用 DHCP。如果决定使用 DHCP，请打开 YaST 网卡配置模块的<guimenu>网络设置</guimenu>对话框，在<guimenu>全局选项</guimenu>选项卡的 <guimenu>DHCP 客户端选项</guimenu>中配置细节。如果您使用虚拟主机设置，其中不同的主机都通过同一接口通信，则需要用 <guimenu>DHCP 客户端标识符</guimenu>来区分。
    </para>
    <para>
     DHCP 比较适合客户端配置，但不太适合服务器配置。要设置静态 IP 地址，请如下继续操作：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST 网卡配置模块的<guimenu>概述</guimenu>选项卡中，于已检测到的网卡列表中选择一个网卡，然后单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>地址</guimenu>选项卡中，选择<guimenu>静态指派的 IP 地址</guimenu>。
      </para>
     </step>
     <step>
      <para>
       输入 <guimenu>IP 地址</guimenu>。IPv4 和 IPv6 地址均可使用。在<guimenu>子网掩码</guimenu>中输入子网掩码。如果使用 IPv6 地址，则对于前缀长度使用 <literal>/64</literal> 格式的<guimenu>子网掩码</guimenu>。
      </para>
      <para>
       或者，您可以为此地址输入一个完全限定的<guimenu>主机名</guimenu>，该主机名将写入到 <filename>/etc/hosts</filename> 配置文件。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>下一步</guimenu>。
      </para>
     </step>
     <step>
      <para>
       要激活配置，请单击<guimenu>确定</guimenu>。
      </para>
     </step>
    </procedure>
    
    
    <note>
     <title>接口激活和链路检测</title>
     <para>
      在激活网络接口期间，<command>wicked</command> 会检查载波，并且只有在检测到链路之后，才会应用 IP 配置。如果不管链路状态为何，您都需要应用配置（例如，您要测试侦听某个地址的服务），则可以在 <filename>/etc/sysconfig/network/ifcfg</filename> 内的接口配置文件中添加变量 <literal>LINK_REQUIRED=no</literal> 来跳过链路检测。
     </para>
     <para>
      另外，您可以使用变量 <literal>LINK_READY_WAIT=<replaceable>5</replaceable></literal> 来指定等待链路的超时值（以秒为单位）。
     </para>
     <para>
      有关 <filename>ifcfg-*</filename> 配置文件的详细信息，请参见<xref linkend="sec-network-manconf-files-ifcfg"/>和 <command>man 5 ifcfg</command>。
     </para>
    </note>
    <para>
     如果使用静态地址，则不会自动配置名称服务器和默认网关。要配置名称服务器，请按照<xref linkend="sec-network-yast-change-host"/> 中所述进行。要配置网关，请按照<xref linkend="sec-network-yast-change-route"/> 中所述进行。
    </para>
   </sect4>
   <sect4 xml:id="sec-network-yast-configure-addresses">
    <title>配置多个地址</title>
    <para>
     一个网络设备可以有多个 IP 地址。
    </para>
    <note>
     <title>别名是兼容功能</title>
     <para>
      这些所谓的别名或标签只能分别用于 IPv4。对于 IPv6 则忽略它们。使用 <command>iproute2</command> 网络接口可以有一个或多个地址。
     </para>
    </note>
    <para>
     要使用 YaST 设置网卡的其他地址，请执行以下步骤：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST <guimenu>网络设置</guimenu>对话框的<guimenu>概述</guimenu>选项卡中，于已检测到的网卡列表中选择一个网卡，然后单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<menuchoice> <guimenu> 地址</guimenu> <guimenu> 附加地址</guimenu> </menuchoice> 选项卡中，单击<guimenu>添加</guimenu>。
      </para>
     </step>
     <step>
      <para>
       输入 <guimenu>IPv4 地址标签</guimenu>、<guimenu>IP 地址</guimenu>和<guimenu>网络掩码</guimenu>。不要在别名中包含接口名称。
      </para>
     </step>
     <step>
      <para>
       要激活该配置，请确认设置。
      </para>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec-network-yast-change-udev">
    <title>更改设备名称和 udev 规则</title>
    <para>
     可更改网卡在使用时的设备名称。还可确定 udev 是通过网卡的硬件 (MAC) 地址还是通过总线 ID 来标识网卡。后一个选项更适合大型服务器，因为便于热插拔网卡。要使用 YaST 设置这些选项，请执行以下步骤：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST <guimenu>网络设置</guimenu>对话框的<guimenu>概述</guimenu>选项卡中，于已检测到的网卡列表中选择一个网卡，然后单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step>
      <para>
       转到<guimenu>常规</guimenu>选项卡。当前设备名称显示在 <guimenu>Udev 规则</guimenu>中。单击<guimenu>更改</guimenu>。
      </para>
     </step>
     <step>
      <para>
       选择 udev 应通过网卡的 <guimenu>MAC 地址</guimenu>还是<guimenu>总线 ID</guimenu> 来识别网卡。网卡的当前 MAC 地址和总线 ID 显示在对话框中。
      </para>
     </step>
     <step>
      <para>
       要更改设备名称，请选中<guimenu>更改设备名称</guimenu>选项并编辑名称。
      </para>
     </step>
     <step>
      <para>
       要激活该配置，请确认设置。
      </para>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec-network-yast-change-driver">
    <title>更改网卡内核驱动程序</title>
    <para>
     对于某些网卡，可能会提供某些内核驱动程序。如果网卡已配置，YaST 允许您从可用的合适驱动程序列表中选择一个要使用的内核驱动程序。还可为内核驱动程序指定选项。要使用 YaST 设置这些选项，请执行以下步骤：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST 网络设置模块的<guimenu>概述</guimenu>选项卡中，于已检测到的网卡列表中选择一个网卡，然后单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step>
      <para>
       转到<guimenu>硬件</guimenu>选项卡。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>模块名称</guimenu>中选择要使用的内核驱动程序。在<guimenu>选项</guimenu>中以 <command>=</command> =<replaceable>VALUE</replaceable> 格式为所选驱动程序输入任何选项。如果使用多个选项，应用空格分隔这些选项。
      </para>
     </step>
     <step>
      <para>
       要激活该配置，请确认设置。
      </para>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec-network-yast-change-start">
    <title>激活网络设备</title>

    <para>
     如果使用结合 <command>wicked</command> 的方法，便可以将设备配置为在引导期间、连接电缆时或检测到网卡时启动、以手动方式启动或永不启动设备。要更改设备启动，请如下继续操作：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST 的<menuchoice>
       <guimenu>系统</guimenu> <guimenu> 网络设置</guimenu>
       </menuchoice>中，于已检测到的网卡列表中选择一个网卡，然后单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>常规</guimenu>选项卡中，从<guimenu>设备激活</guimenu>选择所希望的项。
      </para>
      <para>
       选择<guimenu>在引导时</guimenu>可在系统引导时启动设备。使用<guimenu>在电缆连接时</guimenu>将对任何现有物理连接监视接口。使用<guimenu>在热插拔时</guimenu>，可在接口可用时对其进行设置。这与<guimenu>在引导时</guimenu>选项很相似，唯一区别是如果引导时接口不存在，将不会发生错误。选择<guimenu>手动</guimenu>可通过 <command>ifup</command> 手动控制接口。选择<guimenu>从不</guimenu>将不启动设备。<guimenu>通过 NFSroot</guimenu> 与<guimenu>在引导时</guimenu>相似，区别是使用 <command>systemctl stop wicked.service</command> 命令不会关闭接口；如果 <command>wicked</command> 处于活动状态，则 <option>network</option> 服务还会处理 <option>wicked</option> 服务。如果您使用 NFS 或 iSCSI 根文件系统，则选择此选项。
      </para>
     </step>
     <step>
      <para>
       要激活该配置，请确认设置。
      </para>
     </step>
    </procedure>
    <tip>
     <title>NFS 用作根文件系统</title>
     <para>
      在通过网络以 NFS 共享形式挂载根分区的（无磁盘）系统中，配置可供访问 NFS 共享的网络设备时需保持谨慎。
     </para>
     <para>
      关闭或重引导系统时，默认的处理顺序是关闭网络连接，然后卸载根分区。对于 NFS 根分区，这种顺序会产生问题，因为在尚未激活与 NFS 共享的网络连接的情况下，根分区无法完全卸载。为防止系统停用相关的网络设备，请按<xref linkend="sec-network-yast-change-start"/>中所述打开网络设备配置选项卡，然后在<guimenu>设备激活</guimenu>窗格中选择<guimenu>通过 NFSroot</guimenu>。
     </para>
    </tip>
   </sect4>
   <sect4 xml:id="sec-network-yast-change-mtu">
    <title>设置最大传输单元大小</title>
    <para>
     您可为接口设置最大传输单元 (MTU)。MTU 是指允许的最大包大小（以字节为单位）。更高的 MTU 可带来更高的带宽效率。但是较大的包有时可能会堵塞较慢的接口，从而增加后续包的延迟。
    </para>
    <procedure>
     <step>
      <para>
       在 YaST 的<menuchoice>
       <guimenu>系统</guimenu> <guimenu> 网络设置</guimenu>
       </menuchoice>中，于已检测到的网卡列表中选择一个网卡，然后单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>常规</guimenu>选项卡中，从<guimenu>设置 MTU</guimenu> 列表中选择所需项。
      </para>
     </step>
     <step>
      <para>
       要激活该配置，请确认设置。
      </para>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec-network-yast-change-pciemulti">

    <title>PCIe 多功能设备</title>
    <para>
     系统支持对以下技术提供支持的多功能设备：LAN、iSCSI 和 FCoE。YaST FCoE 客户端 (<command>yast2 fcoe-client</command>) 会在额外的列中显示私用标志，以允许用户选择用于 FCoE 的设备。YaST 网络模块 (<command>yast2 lan</command>) 会针对网络配置排除<quote>仅储存设备</quote>。
    </para>
    
   </sect4>
   <sect4 xml:id="sec-network-yast-change-infiniband">

    <title>IP-over-InfiniBand (IPoIB) 的 Infiniband 配置</title>
    <procedure>
     <step>
      <para>
       在 YaST 的<menuchoice>
       <guimenu>系统</guimenu> <guimenu> 网络设置</guimenu>
       </menuchoice>中选择 InfiniBand 设备，然后单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>常规</guimenu>选项卡中，选择一种 <guimenu>IP-over-InfiniBand</guimenu> (IPoIB) 模式：<guimenu>已连接</guimenu>（默认）或<guimenu>数据报</guimenu>。
      </para>
     </step>
     <step>
      <para>
       要激活该配置，请确认设置。
      </para>
     </step>
    </procedure>
    <para>
     有关 InfiniBand 的更多信息，请参见 <filename>/usr/src/linux/Documentation/infiniband/ipoib.txt</filename>。
    </para>
   </sect4>
   <sect4 xml:id="sec-network-yast-change-fire">
    <title>配置防火墙</title>
    <para>
     您不必按<xref linkend="sec-security-firewall-firewalld"/>中所述执行详细的防火墙设置，只需在设置设备的过程中决定设备的基本防火墙配置。按如下所示继续：
    </para>
    <procedure>
     <step>
      <para>
       打开 YaST 的<menuchoice> <guimenu>系统</guimenu> <guimenu> 网络设置</guimenu> </menuchoice>模块。在<guimenu>概述</guimenu>选项卡中，从已检测到的网卡列表中选择一个网卡，然后单击<guimenu>编辑</guimenu>。
      </para>
     </step>
     <step>
      <para>
       进入<guimenu>网络设置</guimenu>对话框的<guimenu>常规</guimenu>选项卡。
      </para>
     </step>
     <step>
      <para>
       确定要将接口指派到的<guimenu>防火墙区域</guimenu>。下列选项可用：
      </para>
      <variablelist>
       <varlistentry>
        <term>防火墙已禁用</term>
        <listitem>
         <para>
          此选项只有在禁用防火墙和防火墙未在运行时才可用。仅当计算机属于受外部防火墙保护的大型网络时才使用此选项。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>自动指派区域</term>
        <listitem>
         <para>
          此选项只有在启用防火墙后才可用。防火墙正在运行且接口自动指派给防火墙区域。包含关键字 <literal>any</literal> 的区域或外部区域将用于此类接口。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>内部区域（不受保护）</term>
        <listitem>
         <para>
          防火墙正在运行，但不会强制执行任何规则来保护此接口。当计算机属于受外部防火墙保护的大型网络时才使用此选项。当计算机具有多个网络接口时，此选项还可用于连接到内部网络的接口。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>非管制区域</term>
        <listitem>
         <para>
          隔离区域是位于内部网络和（恶意）互联网之前的附加防线。可从内部网络和互联网访问指派到此区域的主机，但指派到此区域的主机无法访问内部网络。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>外部区域</term>
        <listitem>
         <para>
          防火墙在此接口上运行，并且全面保护其抵御其他假定有害的网络流量。这是默认选项。
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </step>
     <step>
      <para>
       要激活该配置，请确认设置。
      </para>
     </step>
    </procedure>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-network-yast-netcard-man">
   <title>配置未检测到的网卡</title>
   <para>
    如果未正确检测到某个网卡，该卡将不会包含在已检测到的网卡列表中。如果确定系统包含网卡的驱动程序，则可以手动对其进行配置。还可以配置特殊网络设备类型，例如网桥、绑定、TUN 或 TAP。要配置未检测到的网卡（或特殊设备），请如下操作：
   </para>
   <procedure>
    <step>
     <para>
      在 YaST 的<menuchoice> <guimenu>系统</guimenu> <guimenu> 网络设置</guimenu> <guimenu> 概述</guimenu> </menuchoice>对话框中，单击<guimenu>添加</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>硬件</guimenu>对话框中，从可用选项中设置接口的<guimenu>设备类型</guimenu>和<guimenu>配置名称</guimenu>。如果网卡为 USB 设备，请激活相应的复选框，并单击<guimenu>下一步</guimenu>退出此对话框。或者，如果需要，您可定义要用于网卡的内核<guimenu>模块名称</guimenu>及其<guimenu>选项</guimenu>。
     </para>
     <para>
      在 <guimenu>Ethtool 选项</guimenu>中，您可以为接口设置 <command>ifup</command> 使用的 <command>ethtool</command> 选项。有关可用选项的信息，请参见 <command>ethtool</command> 手册页。
     </para>
     <para>
      如果选项字符串以 <literal>-</literal> 开头（例如，<literal>-K <replaceable>INTERFACE_NAME</replaceable> rx on</literal>），则会用当前接口名称替换字符串中的第二个词。否则（例如，<literal>autoneg off speed 10</literal>）<command>ifup</command> 会在开头添加 <literal>-s <replaceable>INTERFACE_NAME</replaceable></literal>。
     </para>
    </step>
    <step>
     <para>
      单击<guimenu>下一步</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>常规</guimenu>、<guimenu>地址</guimenu>和<guimenu>硬件</guimenu>选项卡中，配置所有所需的选项，如接口的 IP 地址、设备激活或防火墙区域。有关配置选项的更多信息，请参见<xref linkend="sec-network-yast-netcard-change"/>。
     </para>
    </step>
    <step>
     <para>
      如果选择<guimenu>无线</guimenu>作为接口的设备类型，则在下一个对话框中配置无线连接。
     </para>
    </step>
    <step>
     <para>
      要激活新的网络配置，请确认设置。
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec-network-yast-change-host">
   <title>配置主机名和 DNS</title>
   <para>
    如果您在安装期间未更改网络配置，并且已有以太网卡可用，则系统会自动为您的计算机生成主机名并激活 DHCP。这同样适用于主机连接到网络环境所需的名称服务信息。如果网络地址设置使用了 DHCP，则会向域名服务器列表自动填充相应数据。如果希望使用静态设置，则手动设置这些值。
   </para>
   <para>
    要更改计算机名称并调整名称服务器搜索列表，则如下继续操作：
   </para>
   <procedure>
    <step>
     <para>
      转到 YaST 的<menuchoice> <guimenu>系统</guimenu>
      <guimenu>模块中的</guimenu> </menuchoice>网络设置<guimenu>主机名/DNS</guimenu> 选项卡。
     </para>
    </step>
    <step>
     <para>
      输入<guimenu>主机名</guimenu>。请注意，主机名是全局性的，将应用到所有网络接口。
     </para>
     <para>
      如果使用 DHCP 获取 IP 地址，则计算机的主机名将由 DHCP 服务器自动设置。如果连接到不同网络，您应禁用此行为，因为其他网络可能会指派不同的主机名，而在运行时更改主机名可能会导致混淆图形桌面。要禁止使用 DHCP 获取 IP 地址，请停用<guimenu>通过 DHCP 更改主机名</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>修改 DNS 配置</guimenu>中，请选择修改 DNS 配置（名称服务器、搜索列表以及 <filename>/run/netconfig/resolv.conf</filename> 文件的内容）的方式。
     </para>
     <para>
      如果选择了<guimenu>使用默认策略</guimenu>选项，则配置由 <command>netconfig</command> 脚本处理，该脚本合并了静态定义的数据（通过 YaST 或在配置文件中）与动态获取的数据（来自 DHCP 客户端或 NetworkManager）。此默认策略可满足通常情况。
     </para>
     <para>
      如果选择了<guimenu>仅手动</guimenu>选项，则不允许 <command>netconfig</command> 修改 <filename>/run/netconfig/resolv.conf</filename> 文件。但是，此文件可手动编辑。
     </para>
     <para>
      如果已选择<guimenu>自定义策略</guimenu>选项，则应指定用于定义合并策略的<guimenu>自定义策略规则</guimenu>字符串。该字符串包含了接口名称的逗号分隔列表，可考虑作为设置的有效源。除完整接口名外，也可使用基本通配符来匹配多个接口。例如，<literal>eth* ppp? </literal> 首先以所有 eth 为目标，然后是 ppp0 到 ppp9 的所有接口。有两个特殊策略值表示如何应用 <filename>/etc/sysconfig/network/config</filename> 文件中定义的静态设置：
     </para>
     <variablelist>
      <varlistentry>
       <term><literal>STATIC</literal>
       </term>
       <listitem>
        <para>
         静态设置需要与动态设置合并到一起。
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><literal>STATIC_FALLBACK</literal>
       </term>
       <listitem>
        <para>
         仅当动态配置不可用时，才使用静态设置。
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <para>
      有关更多信息，请参见 <command>netconfig</command>(8) 的手册页 (<command>man 8 netconfig</command>)。
     </para>
    </step>
    <step>
     <para>
      输入<guimenu>名称服务器</guimenu>并填写<guimenu>域搜索</guimenu>列表。名称服务器必须由 IP 地址指定（如 192.168.1.116），而非由主机名指定。<guimenu>域搜索</guimenu>选项卡中指定的名称是用于解析主机名（未指定域）的域名。如果使用多个<guimenu>域搜索</guimenu>，则使用逗号或空格分隔域。
     </para>
    </step>
    <step>
     <para>
      要激活该配置，请确认设置。
     </para>
    </step>
   </procedure>
   <para>
    也可以使用 YaST 从命令行编辑主机名。YaST 所做更改会立即生效（手动编辑 <filename>/etc/HOSTNAME</filename> 文件时则不是这样）。要更改主机名，请使用以下命令：
   </para>
<screen><prompt role="root">root # </prompt>yast dns edit hostname=<replaceable>HOSTNAME</replaceable></screen>
   <para>
    要更改名称服务器，请使用以下命令：
   </para>
<screen><prompt role="root">root # </prompt>yast dns edit nameserver1=192.168.1.116
<prompt role="root">root # </prompt>yast dns edit nameserver2=192.168.1.117
<prompt role="root">root # </prompt>yast dns edit nameserver3=192.168.1.118</screen>
  </sect3>

  <sect3 xml:id="sec-network-yast-change-route">
   <title>配置路由</title>

   <para>
    要使计算机能够与其他计算机和其他网络进行通信，必须提供路由选择信息以使网络流量使用正确的路径。如果使用 DHCP，则将自动提供此信息。如果使用静态设置，则必须手动添加此数据。
   </para>
   <procedure>
    <step>
     <para>
      在 YaST 中，转到<menuchoice> <guimenu>网络设置</guimenu>
      <guimenu> 路由选择</guimenu> </menuchoice>。
     </para>
    </step>
    <step>
     <para>
      输入<guimenu>默认网关</guimenu>（如果需要是 IPv4 和 IPv6）的 IP 地址。默认网关与每个可能的目标匹配，但是如果存在与所需地址匹配的路由表项，则会使用此项，而不是通过默认网关使用默认路由。
     </para>
    </step>
    <step>
     <para>
      可在<guimenu>路由选择表</guimenu>中输入多个项。输入<guimenu>目标</guimenu>网络 IP 地址、<guimenu>网关</guimenu> IP 地址和<guimenu>网络掩码</guimenu>。选择将流量路由到定义的网络要经过的<guimenu>设备</guimenu>（减号代表任何设备）。<remark>mdejmek: ok, what does the minus exactly do? you are using it here for different things;</remark>要忽略这些值中的任何值，请使用减号 <literal>-</literal>。要在表中输入默认网关，请在<guimenu>目标</guimenu>字段中使用<literal>默认</literal>。
     </para>
     <note>
      <title>路由优先级</title>
      <para>
       如果使用更多的默认路由，则可以指定用于确定具有更高优先级的路由的度量选项。要指定度量选项，请在<guimenu>选项</guimenu>中输入 <option>- metric <replaceable>NUMBER</replaceable></option>。默认情况下使用具有最高度量的路由。如果网络设备已断开连接，则删除其路由并使用下一个路由。
      </para>
     </note>
    </step>
    <step>
     <para>
      如果系统是路由器，请根据需要在<guimenu>网络设置</guimenu>中启用 <guimenu>IPv4 转发</guimenu>和 <guimenu>IPv6 转发</guimenu>。
     </para>
    </step>
    <step>
     <para>
      要激活该配置，请确认设置。
     </para>
    </step>
   </procedure>
  </sect3>
 </sect2>

 
</sect1>
