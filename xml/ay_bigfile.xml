<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE book
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<book version="5.0" xml:lang="en" xml:id="book.autoyast"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker>
    <dm:assignee>fs@suse.com</dm:assignee>
   </dm:bugtracker>
  </dm:docmanager>
  <title>&ay;</title>
  <productname>&productname;</productname>
  <productnumber>&productnumber;</productnumber>
  <date>
   <?dbtimestamp format="B d, Y" ?>
  </date>
  <xi:include href="common_copyright_gfdl.xml"/>
  <abstract>
   <para>
    &abstract_autoyast;
   </para>
  </abstract>
 </info>
 <chapter xml:id="introduction">
  <title>Introduction</title>
  <info/>
  <para>
   &ay; is a system for installing one or more &productname; systems
   automatically and without user intervention. &ay; installations are
   performed using an &ay; control file (also called
   <quote>profile</quote>) with installation and configuration data. That
   control file can be created using the configuration interface of &ay;
   and can be provided to &yast; during installation in different ways.
  </para>
  <sect1 xml:id="motiv">
   <title>Motivation</title>

   <para>
    In an article in issue 78, the Linux Journal
    (<link xlink:href="http://www.linuxjournal.com/"/>) writes:
   </para>

   <para>
    <quote>A standard Linux installation asks many questions about what to
    install, what hardware to configure, how to configure the network
    interface, etc. Answering these questions once is informative and maybe
    even fun. But imagine a system engineer who needs to set up a new Linux
    network with many machines. Now, the same issues need to be addressed
    and the same questions answered repeatedly. This makes the task very
    inefficient, not to mention a source of irritation and boredom. Hence, a
    need arises to automate this parameter and option selection.</quote>
   </para>

   <para>
    <quote>The thought of simply copying the hard disks naturally crosses
    one's mind. This can be done quickly, and all the necessary functions
    and software will be copied without option selection. However, the fact
    is that simple copying of hard disks causes the individual computers to
    become too similar. This, in turn, creates an altogether new mission of
    having to reconfigure the individual settings on each PC. For example,
    IP addresses for each machine will need to be reset. If this is not done
    properly, strange and inexplicable behavior results.</quote>
   </para>

   <para>
    A regular installation of &productname; is semi-automated by default. The
    user is requested to select the necessary information at the beginning
    of the installation (usually language only), &yast; then generates a
    proposal for the underlying system depending on different factors and
    system parameters. Usually&mdash;and especially for new
    systems&mdash;such a proposal can be used to install the system and
    provides a usable installation. The steps following the proposal are
    fully automated.
   </para>

   <para>
    &ay; can be used where no user intervention is required or where
    customization is required. Using an &ay; control file, &yast;
    prepares the system for a custom installation and avoids any interaction
    with the user, unless specified in the file controlling the
    installation.
   </para>

   <para>
    &ay; is not an automated GUI system. This means that usually many
    screens will be skipped&mdash;you will never see the language
    selection interface, for example. &ay; will simply pass the language
    parameter to the sub-system without displaying any language related
    interface.
   </para>
  </sect1>
  <sect1 xml:id="overviewandconcept">
   <title>Overview and Concept</title>

   <para>
    Using &ay;, multiple systems can easily be installed in parallel and
    quickly. They need to share the same environment and similar, but not
    necessarily identical, hardware. The installation is defined by an XML
    configuration file (usually named <filename>autoinst.xml</filename>)
    called the <quote>&ay; control file</quote>. It can initially be
    created using existing configuration resources easily be tailored for
    any specific environment.
   </para>

   <para>
    &ay; is fully integrated and provides various options for installing
    and configuring a system. The main advantage over other
    auto-installation systems is the possibility to configure a computer by
    using existing modules and avoiding using custom scripts which are
    normally executed at the end of the installation.
   </para>

   <para>
    This document will guide you through the three steps of
    auto-installation:
   </para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Preparation: All relevant information about the target system is
      collected and turned into the appropriate directives of the control
      file. The control file is transferred onto the target system where its
      directives will be parsed and fed into &yast;.
     </para>
    </listitem>
    <listitem>
     <para>
      Installation: &yast; performs the installation of the basic system
      using the data from the &ay; control file.
     </para>
    </listitem>
    <listitem>
     <para>
      Configuration: After the installation of the basic system, the system
      configuration is performed in the second stage of the installation.
      User defined post-installation scripts from the &ay; control file
      will also be executed at this stage.
     </para>
    </listitem>
   </itemizedlist>

   <note>
    <title>Second Stage</title>
    <para>
     A regular installation of &productname; &productnumber; is
     performed in a single stage. The auto-installation process, however, is
     divided into two stages. After the installation of the basic system the
     system boots into the second stage where the system configuration is
     done.
    </para>
    <para>
     The second stage can be turned off with the
     <literal>second_stage</literal> parameter:
    </para>
<screen>&lt;general&gt;
  &lt;mode&gt;
    &lt;confirm config:type="boolean"&gt;false&lt;/confirm&gt;
    &lt;second_stage config:type="boolean"&gt;false&lt;/second_stage&gt;
  &lt;/mode&gt;
&lt;/general&gt;</screen>
   </note>

   <para>
    The complete and detailed process is illustrated in the following
    figure:
   </para>

   <figure xml:id="process">
    <title>Auto-installation process</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="autoyast-oview.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast-oview.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect1>
 </chapter>
 <chapter xml:id="Profile">
  <title>The Control File</title>
  <info/>
  <para/>
  <sect1 xml:id="Profile.Intro">
   <title>Introduction</title>

   <para>
    The control file usually is a configuration description for a single
    system. It consists of sets of resources with properties including
    support for complex structures such as lists, records, trees and large
    embedded or referenced objects.
   </para>

   <important>
    <title>Control Files from Previous Releases are Incompatible</title>
    <para>
     A lot of major changes were introduced with &productname; &productnumber; (the
     switch to systemd and &grub; for example). These changes also
     required fundamental changes in &ay;, therefore you cannot use
     &ay; control files created on previous &productname; versions to install
     &productname; &productnumber; and vice versa.
    </para>
   </important>
  </sect1>
  <sect1 xml:id="Profile.Format">
   <title>Format</title>

   <para>
    The XML configuration format provides a consistent file structure, which
    is easy to learn and to remember when attempting to configure a new
    system.
   </para>

   <para>
    The &ay; control file uses XML to describe the system installation
    and configuration. XML is a commonly used mark up and many users are
    familiar with the concepts of the language and the tools used to process
    XML files. If you edit an existing control file or create a control file
    using an editor from scratch, it is strongly recommended to validate the
    control file using a validating XML parser such as
    <literal>xmllint</literal> or <literal>jing</literal>, for example
    (see  <xref linkend="CreateProfile.Manual"/>).
   </para>

   <para>
    The following example shows a control file in XML format:
   </para>

   <example>
    <title>&ay; Control File (Profile)</title>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile
  xmlns="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;partitioning  config:type="list"&gt;
    &lt;drive&gt;
      &lt;device&gt;/dev/sda&lt;/device&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
          &lt;size&gt;10G&lt;/size&gt;
          &lt;mount&gt;/&lt;/mount&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
          &lt;size&gt;120G&lt;/size&gt;
          &lt;mount&gt;/data&lt;/mount&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
    &lt;/drive&gt;
  &lt;/partitioning&gt;
  &lt;scripts&gt;
    &lt;pre-scripts&gt;
      &lt;script&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;filename&gt;start.sh&lt;/filename&gt;
        &lt;source&gt;
        &lt;![CDATA[
#!/bin/sh
echo "Starting installation"
exit 0

]]&gt;

        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/pre-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</screen>
   </example>
  </sect1>
  <sect1 xml:id="Profile.Structure">
   <title>Structure</title>

   <para>
    Below is an example of a basic control file container, the actual
    content of which is explained later on in this chapter.
   </para>

   <example>
    <title>Control file container</title>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile
  xmlns="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;!-- RESOURCES --&gt;
&lt;/profile&gt;</screen>
   </example>

   <para>
    The <literal>&lt;profile&gt;</literal> element (root node)
    contains one or more distinct resource elements. The permissible
    resource elements are specified in the schema files
   </para>

   <sect2 xml:id="Profile.Format.ressources">
    <title>Resources and Properties</title>
    <para>
     A resource element either contains multiple and distinct property and
     resource elements, or multiple instances of the same resource element,
     or it is empty. The permissible content of a resource element is
     specified in the schema files.
    </para>
    <para>
     A property element is either empty or contains a literal value. The
     permissible property elements and values in each resource element are
     specified in the schema files
    </para>
    <para>
     An element can be either a container of other elements (a resource) or
     it has a literal value (a property); it can never be both. This
     restriction is specified in the schema files. A configuration component
     with more than one value must either be represented as some kind of
     embedded list in a property value or as a nested resource.
    </para>
   </sect2>

   <sect2 xml:id="Profile.Format.ressources_nested">
    <title>Nested Resources</title>
    <para>
     Nested resource elements allow a tree-like structure of configuration
     components to be built to any level.
    </para>
    <example>
     <title>Nested Resources</title>
<screen>...
&lt;drive&gt;
  &lt;device&gt;/dev/sda&lt;/device&gt;
  &lt;partitions&gt; &lt;!-- this is wrong, explanation below --&gt;
    &lt;partition&gt;
      &lt;size&gt;10G&lt;/size&gt;
      &lt;mount&gt;/&lt;/mount&gt;
    &lt;/partition&gt;
    &lt;partition&gt;
      &lt;size&gt;1G&lt;/size&gt;
      &lt;mount&gt;/tmp&lt;/mount&gt;
    &lt;/partition&gt;
  &lt;/partitions&gt;
&lt;/drive&gt;
....</screen>
    </example>
    <para>
     In the example above the disk resource consists of a device property
     and a partitions resource. The partitions resource contains multiple
     instances of the partition resource. Each partition resource contains a
     size and mount property.
    </para>
    <para>
     The XML schema defines the partitions element as a resource supporting
     one or multiple partition element children. If only one partition
     resource is specified it is important to use the
     <literal>config:type</literal> attribute of the partitions element to
     indicate that the content is a resource, in this case a list. Using the
     partitions element without specifying the type in this case will
     result in undefined behavior as &yast; will improperly interpret the
     partitions resource as a property. The example below illustrates this
     use case.
    </para>
    <example>
     <title>Nested Resources with Type Attributes</title>
<screen>...
&lt;drive&gt;
  &lt;device&gt;/dev/sda&lt;/device&gt;
  &lt;partitions config:type="list"&gt;
     &lt;partition&gt;
        &lt;size&gt;10G&lt;/size&gt;
        &lt;mount&gt;/&lt;/mount&gt;
     &lt;/partition&gt;
     &lt;partition&gt;
        &lt;size&gt;1G&lt;/size&gt;
        &lt;mount&gt;/tmp&lt;/mount&gt;
     &lt;/partition&gt;
  &lt;/partitions&gt;
&lt;/drive&gt;
....</screen>
    </example>
   </sect2>

   <sect2 xml:id="Profile.Format.attributes">
    <title>Attributes</title>
    <para>
     Global attributes are used to define metadata on resources and
     properties. Attributes are used to define context switching. They are
     also used for naming and typing properties as shown in the previous
     sections. Attributes are in a separate namespace so they do not need to
     be treated as reserved words in the default namespace.
    </para>
    <para>
     Global attributes are defined in the configuration namespace and must
     always be prefixed with <literal>config:</literal> . All attributes are
     optional. Most can be used with both resource and property elements but
     some can only be used with one type of element which is specified in
     the schema files.
    </para>
    <para>
     The type of an element is defined using the
     <literal>config:type</literal> attribute. The type of a resource
     element is always RESOURCE, although this can also be made explicit
     with this attribute (to ensure correct identification of an empty
     element, for example, when there is no schema file to refer to). A
     resource element cannot be any other type and this restriction is
     specified in the schema file. The type of a property element determines
     the interpretation of its literal value. The type of a property element
     defaults to <literal>STRING</literal>, as specified in the schema file.
     The full set of permissible types is specified in the schema file.
    </para>
   </sect2>
  </sect1>
 </chapter>
 <chapter xml:id="CreateProfile">
  <title>Creating A Control File</title>
  <info/>
  <para/>
  <sect1 xml:id="Autoinstallation.collectInfo">
   <title>Collecting Information</title>

   <para>
    To create the control file, you need to collect information about the
    systems you are going to install. This includes hardware data and
    network information among other things. Make sure you have the following
    information about the machines you want to install:
   </para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Hard disk types and sizes
     </para>
    </listitem>
    <listitem>
     <para>
      Graphical interface and attached monitor, if any
     </para>
    </listitem>
    <listitem>
     <para>
      Network interface and MAC address if known (for example, when using
      DHCP)
     </para>
    </listitem>
   </itemizedlist>
  </sect1>
  <sect1 xml:id="CreateProfile.CMS">
   <title>Using the Configuration Management System (CMS)</title>

   <para>
    To create the control file for one or more computers, a configuration
    interface based on &yast; is provided. This system depends on
    existing modules which are usually used to configure a computer in
    regular operation mode, for example, after &productname; is
    installed.
   </para>

   <para>
    The configuration management system lets you create control files easily
    and lets you manage a repository of configurations for the use in a
    networked environment with multiple clients.
   </para>

   <figure os="sles;sled">
    <title>Configuration System</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="autoyast2-maindialog.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast2-maindialog.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <figure os="osuse">
    <title>Configuration System</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="autoyast2-maindialog_kde.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast2-maindialog_kde.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <sect2 xml:id="CreateProfile.CMS.new">
    <title>Creating a New Control File</title>
    <para>
     With some exceptions, almost all resources of the control file can be
     configured using the configuration management system. The system offers
     flexibility and the configuration of some resources is identical to the
     one available in the &yast; control center. In addition to the
     existing and familiar modules new interfaces were created for special
     and complex configurations, for example for partitioning, general
     options and software.
    </para>
    <para>
     Furthermore, using a CMS guarantees the validity of the resulting
     control file and its direct use for starting automated installation.
    </para>
    <para>
     Make sure the configuration system is installed (package
     <systemitem class="resource">autoyast2</systemitem> and call it using
     the &yast; control center or as root with the following command
     (make sure the <envar>DISPLAY</envar> variable is set correctly to
     start the graphical user interface instead of the text based one):
    </para>
<screen>/sbin/yast2 autoyast</screen>
   </sect2>
  </sect1>
  <sect1 xml:id="CreateProfile.Manual">
   <title>Creating/Editing a Control File Manually</title>

   <para>
    If editing the control file manually, make sure it has a valid syntax.
    To check the syntax, use the tools already available on the
    distribution. For example, to verify that the file is well-formed, use
    the utility <command>xmllint</command> available with the
    <systemitem>libxml2</systemitem> package:
   </para>

<screen>xmllint &lt;control file&gt;</screen>

   <para>
    If the control file is not well formed, for example, if a tag is not
    closed, <command>xmllint</command> will report the errors.
   </para>


   <para>
    For a deeper look e.g. you would like to check if a tag is in the right
    section or if some tags are missing, the utility <command>jing</command>
    would be the right solution for:
   </para>

<screen>jing /usr/share/YaST2/schema/autoyast/rng/profile.rng &lt;control file&gt;</screen>

   <para>
    <literal>/usr/share/YaST2/schema/autoyast/rng/profile.rng</literal> is
    provided by the package <literal>yast2-schema</literal>. This file
    describes the syntax and classes of an &ay; profile.
   </para>


   <para>
    Before going on with the autoinstallation, fix any errors resulting from
    such checks. The autoinstallation process cannot be started with an
    invalid and not well-formed control file.
   </para>

   <para>
    You can use any XML editor available on your system or any text editor
    with XML support (for example, Emacs, Vim). However, it is not optimal
    to create the control file manually for many machines and it should only
    be seen as an interface between the autoinstallation engine and the
    Configuration Management System (CMS).
   </para>

   <tip>
    <title>Where to find the <literal>jing</literal> package ?</title>
    <para>
      The package <literal>jing</literal> is available on openSUSE and SLES/SDK.
    </para>
   </tip>

   <tip>
    <title>Using Emacs as an XML Editor</title>
    <para>
     The built-in nxml-mode turns Emacs into a fully-fledged XML editor with
     automatic tag completion and validation. Refer to the Emacs help for
     instructions on how to set up nxml-mode.
    </para>
   </tip>
  </sect1>
  <sect1 xml:id="CreateProfile.XSLT">
   <title>Creating a Control File via Script with XSLT</title>

   <para>
    If you have a template and want to change a few things via script or
    command line, use an XSLT processor like <literal>xsltproc</literal>.
    For example, if you have an &ay; control file and want to fill out
    the host name via script for any reason (if doing this so often, you
    want to script it)
   </para>

   <para>
    First, create an XSL file
   </para>

   <example>
    <title>Example File for Replacing the Host Name/Domain by Script</title>
<screen>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:y2="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"
  xmlns="http://www.suse.com/1.0/yast2ns"
  version="1.0"&gt;
  &lt;xsl:output method="xml" encoding="UTF-8" indent="yes" omit-xml-declaration="no" cdata-section-elements="source"/&gt;

  &lt;!-- the parameter names --&gt;
  &lt;xsl:param name="hostname"/&gt;
  &lt;xsl:param name="domain"/&gt;

  &lt;xsl:template match="/"&gt;
    &lt;xsl:apply-templates select="@*|node()"/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="y2:dns"&gt;
    &lt;xsl:copy&gt;
      &lt;!-- where to copy the parameters --&gt;
      &lt;domain&gt;&lt;xsl:value-of select="string($domain)"/&gt;&lt;/domain&gt;
      &lt;hostname&gt;&lt;xsl:value-of select="string($hostname)"/&gt;&lt;/hostname&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;


  &lt;xsl:template match="@*|node()" &gt;
    &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</screen>
   </example>

   <para>
    This file expects the host name and the domain name as parameters from
    the user.
   </para>

<screen>&lt;xsl:param name="hostname"/&gt;
&lt;xsl:param name="domain"/&gt;</screen>

   <para>
    There will be a copy of those parameters in the dns section of the
    control file. That means, if there already is a domain element in the
    dns section, you will get a second one which is not good.
   </para>

   <remark>mdejmek: why is this no good? please explain</remark>

<!-- FIXME: rewrite these sections using xsltproc
   <para>
    If you want to create a new &ay; control file now from the template plus
    the XSL file, run the following command:
   </para>

<screen>sabcmd add_hostname.xsl \$hostname=myHost \$domain=my.domain  template.xml</screen>

   <para>
    You will get a filled out &ay; control file then on STDOUT.
   </para>

   <para>
    If you have multiple XSL files you want to apply to a template, do the
    following:
   </para>

<screen>sabcmd add_hd_vg.xsl \$device=/dev/sda \$partition=p2 \$vg=system \
        | sabcmd add_harddisk.xsl \$device=/dev/system \$lvm=true \
        | sabcmd ....
        | sabcmd add_hostname.xsl \$hostname=myHost \$domain=my.domain</screen>

   <para>
    Pipe the output of each sabcmd to the next sabcmd.
   </para>
-->

   <para>
    For more information about XSLT, go to the official Web page
    <link xlink:href="http://www.w3.org/TR/xslt">www.w3.org/TR/xslt</link>
   </para>
  </sect1>
 </chapter>
 <chapter xml:id="configuration">
<!--
    <section id="Configuration.Network.NISplus">
    <title>
    NIS+
  </title>
    <para>
    If you activate NIS+, the data of the
    NIS+ Server will be added to <filename>/etc/hosts</filename>. Keyserv and the NIS+ cache manager
    will be started and the NSS and PAM configuration will be modified to use
    NIS+ and set the Secret Key of a user.
  </para>
    &example.nisplus;
  </section>
    -->
<!-- {{{ Kdump -->
  <title>Configuration and Installation Options</title>
  <info/>
  <para>
   This chapter introduces important parts of a control file for standard
   purposes. To learn about other available options, use the configuration
   management system.
  </para>
  <para>
   Note that for some configuration options to work, additional packages
   need to be installed, depending on the software selection you have
   configured. If you choose to install a minimal system then some packages
   might be missing and need to be added to the individual package
   selection.
  </para>
  <para>
   &yast; will install packages required in the second phase of the
   installation and before the post-installation phase of &ay; has
   started. However, if necessary &yast; modules are not available in the
   system, important configuration steps will be skipped. For example, no
   security settings will be configured if
   <systemitem class="resource">yast2-security</systemitem> is not
   installed.
  </para>
  <sect1 xml:id="CreateProfile.General">
   <title>General Options</title>

   <para>
    General options include all the settings related to the installation
    process and the environment of the installed system.
   </para>

   <para>
    The mode section configures the behavior of &ay; with regard to
    confirmation and rebooting. The following needs to be in the
    &lt;general&gt;&lt;mode&gt; section.
   </para>

   <para>
    By default, the user must confirm the auto-installation process. This
    option allows the user to view and change the settings for a target
    system before they are committed and can be used for debugging.
    <literal>confirm</literal> is set to <literal>true</literal> by default
    to avoid recursive installs when the system schedules a reboot after
    initial system setup. Only disable confirmation if you want to carry out
    a fully unattended installation.
   </para>

   <para>
    With <literal>halt</literal> you cause &ay; to shut down the machine
    after all packages have been installed. Instead of a reboot into stage
    two, the machine is turned off. The boot loader is already installed and
    all your chroot scripts have run.
   </para>

   <para>
    <literal>final_halt</literal> and <literal>final_reboot</literal> halts
    or reboots the machine after the installation and the configuration are
    finished at the end of stage 2.
   </para>

   <para>
    <literal>final_restart_services</literal>: After installation and
    configuration are finished at the end of stage 2 all services will be
    restarted by default. With this flag set to <literal>false</literal> no
    restart will be done.
   </para>

   <para>
    <literal>activate_systemd_default_target</literal>: After installation and
    configuration are finished at the end of stage 2 the default target system
    will be activated.
   </para>

   <para>
    <literal>ntp_sync_time_before_installation</literal> specifies the NTP
    server with which the system time needs to be synchronized before starting
    the installation on the target system. It will not be synchronized if this
    flag has not been used. Keep in mind that you need a reachable NTP
    server and network connections while running the installation.
   </para>

   <para>
    <literal>max_systemd_wait</literal> specifies how long &ay; waits at
    most for systemd to set up the default target. Normally you do not need
    to bother with this entry. If it is not preset, a reasonable default (30
    seconds) is used.
   </para>

   <para>
    Some &opensuse; versions use the kexec feature and do not reboot
    anymore between stage 1 and stage 2. With the <literal>forceboot</literal>
    option you can force the reboot in case you need it for some reason. The
    value <literal>true</literal> will reboot, <literal>false</literal> will
    not reboot and a missing <literal>forceboot</literal> option uses the
    product's default.
   </para>

   <important os="osuse">
    <title>Drivers May Need a Reboot</title>
    <para>
     <remark>2013-03-18 - fs: bnc #802387</remark>
     Some drivers, for example the proprietary drivers for Nvidia and ATI
     graphics cards, need a reboot and will not work properly when using
     kexec. Therefore the default on &productname; products is to always do a
     proper reboot.
    </para>
   </important>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>confirm</literal>
        </para>
       </entry>
       <entry>
        <para>
         If this boolean is set to <literal>true</literal>, the installation
         stops at the confirmation screen (also called proposal screen) and
         needs to be confirmed with the <guimenu>Install</guimenu> button.
        </para>
        <screen>&lt;confirm config:type="boolean"&gt;
  true
&lt;/confirm&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>true</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>halt</literal>
        </para>
       </entry>
       <entry>
        <para>
         Shuts down the machine after the first stage. So if you turn it on
         again, the machine boots and the second stage of the
         autoinstallation starts.
        </para>
        <screen>&lt;halt config:type="boolean"&gt;
  true
&lt;/halt&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>false</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>second_stage</literal>
        </para>
       </entry>
       <entry>
        <para>
         This boolean determines if &ay; will run in the second stage too
         (after the partitioning, software and boot loader installation of
         the first stage). If you set this to <literal>false</literal>, a
         normal manual installation happens in the second stage.
        </para>
        <screen>&lt;second_stage config:type="boolean"&gt;
  true
&lt;/second_stage&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>true</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>final_reboot</literal>
        </para>
       </entry>
       <entry>
        <para>
         If you set this to <literal>true</literal>, the machine will reboot
         at the very end of the installation (when everything is installed
         and configured at the end of the second stage).
        </para>
        <screen>&lt;final_reboot config:type="boolean"&gt;
  true
&lt;/final_reboot&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>false</literal>. It makes no
         sense to set this and <literal>final_halt</literal> to
         <literal>true</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>final_halt</literal>
        </para>
       </entry>
       <entry>
        <para>
         If you set this to <literal>true</literal>, the machine will shut
         down at the very end of the installation (when everything is
         installed and configured at the end of the second stage).
        </para>
        <screen>&lt;final_halt config:type="boolean"&gt;
  true
&lt;/final_halt&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>false</literal>. It makes no
         sense to set this and <literal>final_reboot</literal> to
         <literal>true</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>confirm_base_product_license</literal>
        </para>
       </entry>
       <entry>
        <para>
         If you set this to <literal>true</literal>, the EULA
         of the base product will be shown. The user needs to accept this
         license. Otherwise the installation will be canceled.
        </para>
        <screen>&lt;confirm_base_product_license config:type="boolean"&gt;
  true
&lt;/confirm_base_product_license&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>false</literal>. This applies to
         the base product license only. Use the flag
         <literal>confirm_license</literal> in the <literal>add-on</literal>
         section to show additional licenses.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>final_restart_services</literal>
        </para>
       </entry>
       <entry>
        <para>
         If you set this entry to <literal>false</literal>, all services will
         <emphasis>not</emphasis> be restarted at the very end of the
         installation (when everything is installed and configured at the end
         of the second stage).
        </para>
        <screen>&lt;final_restart_services config:type="boolean"&gt;
  false
&lt;/final_restart_services&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>true</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>activate_systemd_default_target</literal>
        </para>
       </entry>
       <entry>
        <para>
         If you set this entry to <literal>false</literal>, the default target
         will not be activated via the call <command>systemctl
         isolate</command>.
        </para>
        <screen>&lt;activate_systemd_default_target config:type="boolean"&gt;
  false
&lt;/activate_systemd_default_target&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>true</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>forceboot</literal>
        </para>
       </entry>
       <entry>
        <para>
         Some &opensuse; releases use kexec to avoid the reboot after the
         first stage. They immediately boot into the installed system. You
         can force a reboot with this:
        </para>
        <screen>&lt;forceboot config:type="boolean"&gt;
  true
&lt;/forceboot&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>false</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>self_update</literal>
        </para>
       </entry>
       <entry>
        <para>
         This option allows to enable (set it to <literal>true</literal>)
         or disable (set it to <literal>false</literal> the self-update.
         Check out <xref linkend="sec.i.yast2.self_update"/> to find further
         information about this feature.
         </para>
        <screen>&lt;self_update config:type="boolean"&gt;
  false
&lt;self_update/&gt;</screen>
        <para>
         Alternatively, you can specify the boot parameter
         <literal>self_update</literal> on the Kernel command line.
        </para>
       </entry>
       <entry>
        <para>Optional. The default is <literal>true</literal>.</para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>self_update_url</literal>
        </para>
       </entry>
       <entry>
        <para>
         This option allows to enable/disable the self-update.
         Check out the &deploy; to find further information about this feature.
         </para>
        <screen>&lt;self_update config:type="boolean"&gt;
  false
&lt;self_update/&gt;</screen>
        <para>
         Alternatively, you can specify the boot parameter
         <literal>self_update</literal> on the Kernel command line.
        </para>
        <important>
         <title>Disabling the self-update</title>
         <para>
          Please, note that this feature will be skipped if any option disables
          it: setting this option to <literal>false</literal> or using the
          boot parameter <literal>self_update=0</literal>.
         </para>
        </important>
       </entry>
       <entry>
        <para>Optional. The default is <literal>true</literal>.</para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>self_update_url</literal>
        </para>
       </entry>
       <entry>
        <para>
         Location of the update repository to use during &yast; self-update.
         Check out the &deploy; to find further information about this feature.
         </para>
         <important>
          <title>Installer Self-Update Repository Only</title>
          <para>
           The <option>self_update_url</option> parameter expects only the
           installer self-update repository URL.  Do not supply any other
           repository URL&mdash;for example the URL of the software update
           repository.
         </para>
       </important>
        <screen>&lt;self_update_url&gt;
  http://example.com/updates/$arch
&lt;/self_update_url&gt;</screen>
        <para>
         Alternatively, you can specify the boot parameter
         <literal>self_update</literal> on the Kernel command line.
        </para>
        <para>
         The URL can contain a variable <envar>$arch</envar> that will be
         replaced by the system's architecture, such as
         <literal>x86_64</literal>, <literal>s390x</literal>, etc.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>

   <para>
    &ay; allows you to configure the proposal screen with the
    &lt;proposals config:type="list"&gt; option in the control file.
    All proposals that are listed in that section are shown in the proposal
    screen if you set the <literal>confirm</literal> option to
    <literal>true</literal>. Proposals are also used during the regular
    installation and can be found in the file
    <filename>control.xml</filename> in the root directory of the
    installation media.
   </para>

   <example>
    <title>General Options</title>
<screen>&lt;general&gt;
  &lt;signature-handling&gt;
    &lt;accept_unsigned_file config:type="boolean"&gt;true&lt;/accept_unsigned_file&gt;
    &lt;accept_file_without_checksum config:type="boolean"&gt;true&lt;/accept_file_without_checksum&gt;
    &lt;accept_verification_failed config:type="boolean"&gt;true&lt;/accept_verification_failed&gt;
    &lt;accept_unknown_gpg_key config:type="boolean"&gt;true&lt;/accept_unknown_gpg_key&gt;
    &lt;import_gpg_key config:type="boolean"&gt;true&lt;/import_gpg_key&gt;
    &lt;accept_non_trusted_gpg_key config:type="boolean"&gt;true&lt;/accept_non_trusted_gpg_key&gt;
    &lt;/signature-handling&gt;
    &lt;cio_ignore config:type="boolean"&gt;false&lt;/cio_ignore&gt;       &lt;! -- IBM &zseries; only --&gt;
  &lt;mode&gt;
    &lt;halt config:type="boolean"&gt;false&lt;/halt&gt;
    &lt;forceboot config:type="boolean"&gt;false&lt;/forceboot&gt;
    &lt;final_reboot config:type="boolean"&gt;false&lt;/final_reboot&gt;
    &lt;final_halt config:type="boolean"&gt;false&lt;/final_halt&gt;
    &lt;confirm_base_product_license config:type="boolean"&gt;false&lt;/confirm_base_product_license&gt;
    &lt;confirm config:type="boolean"&gt;true&lt;/confirm&gt;
    &lt;second_stage config:type="boolean"&gt;true&lt;/second_stage&gt;
  &lt;/mode&gt;
  &lt;self_update_url&gt;http://example.com/updates/$arch&lt;self_update_url/&gt;
  &lt;proposals config:type="list"&gt;
    &lt;proposal&gt;partitions_proposal&lt;/proposal&gt;
  &lt;/proposals&gt;
  &lt;wait&gt;
    &lt;pre-modules config:type="list"&gt;
      &lt;module&gt;
        &lt;name&gt;networking&lt;/name&gt;
        &lt;sleep&gt;
          &lt;time config:type="integer"&gt;10&lt;/time&gt;
          &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
        &lt;/sleep&gt;
        &lt;script&gt;
          &lt;source&gt;sleep 5&lt;/source&gt;
          &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;/script&gt;
      &lt;/module&gt;
    &lt;/pre-modules&gt;
    &lt;post-modules config:type="list"&gt;
      &lt;module&gt;
        &lt;name&gt;networking&lt;/name&gt;
        &lt;sleep&gt;
          &lt;time config:type="integer"&gt;3&lt;/time&gt;
          &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
        &lt;/sleep&gt;
        &lt;script&gt;
          &lt;source&gt;sleep 7&lt;/source&gt;
          &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;/script&gt;
      &lt;/module&gt;
    &lt;/post-modules&gt;
  &lt;/wait&gt;
  &lt;storage&gt;
    &lt;!--
       partition_alignment:
         align_optimal  - That is the default. Partitions are aligned like the
                          kernel suggests. This can lead to problem with some
                          machines/bioses that are unable to boot with that
                          alignment
         align_cylinder -  Partitions always start on a cylinder boundary
    --&gt;
     &lt;partition_alignment config:type="symbol"&gt;align_cylinder&lt;/partition_alignment&gt;
  &lt;/storage&gt;
&lt;/general&gt;</screen>
   </example>

   <para>
    You can let &ay; <command>sleep</command> before and after each
    module run during the second stage. You can run scripts and/or pass a
    value (in seconds) for &ay; to sleep. In the example above &ay;
    will sleep for 15 seconds (10+5) before the network configuration starts
    and 10 seconds (3+7) after the network configuration is done. The
    scripts in the example do not really make a lot of sense because you
    could pass that value as <quote>time</quote> value too. They are only
    used to show how scripts in the wait section work now.
   </para>

   <para>
    To blacklist devices, use the flag <literal>cio_ignore</literal>.
    This option is available on IBM &zseries; <emphasis>only</emphasis>.
   </para>

   <tip>
    <title>Enabling Multipath for the Installation</title>
    <para>
     When installing on a network storage that is accessed via multiple
     paths, you need to enable multipath for the installation with the
     <literal>start_multipath</literal> parameter that needs to be placed
     within the following XML structure:
    </para>
<screen>&lt;general&gt;
  &lt;storage&gt;
    &lt;start_multipath config:type="boolean"&gt;true&lt;/start_multipath&gt;
  &lt;/storage&gt;
&lt;/general&gt;</screen>
    <para>
     Alternatively, you can pass the following parameter to linuxrc:
     <literal>LIBSTORAGE_MULTIPATH_AUTOSTART=ON</literal>
    </para>
   </tip>

   <tip>
     <title>Handling Installer Self-Update Signatures</title>
     <para>
       Installer updates are delivered using a dedicated repository, so the same
       security checks that are applied to other repositories and packages are
       performed to these updates.
     </para>
     <para>
       The section <literal>/general/signature_handling</literal> can be used to
       specify a different behavior.
     </para>
<screen>&lt;general&gt;
  &lt;signature-handling&gt;
    &lt;accept_unknown_gpg_key config:type="boolean"&gt;true&lt;/accept_unknown_gpg_key&gt;
  &lt;/signature-handling&gt;
&lt;/general&gt;</screen>
   </tip>
  </sect1>
  <sect1 xml:id="CreateProfile.Reporting">
   <title>Reporting</title>

   <para>
    The <literal>report</literal> resource manages three types of pop-ups
    that may appear during installation:
   </para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      message pop-ups (usually non-critical, informative messages),
     </para>
    </listitem>
    <listitem>
     <para>
      warning pop-ups (if something might go wrong),
     </para>
    </listitem>
    <listitem>
     <para>
      error pop-ups (in case an error occurs).
     </para>
    </listitem>
   </itemizedlist>

   <example>
    <title>Reporting Behavior</title>
<screen>&lt;report&gt;
  &lt;errors&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;0&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/errors&gt;
  &lt;warnings&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/warnings&gt;
  &lt;messages&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/messages&gt;
  &lt;yesno_messages&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/yesno_messages&gt;
&lt;/report&gt;</screen>
   </example>

   <para>
    Depending on your experience, you can skip, log and show (with timeout)
    those messages. It is recommended to show all
    <literal>messages</literal> with timeout. Warnings can be skipped in
    some places but should not be ignored.
   </para>

   <para>
    The default setting in auto-installation mode is to show errors
    without timeout and to show all warnings/messages with a timeout
    of 10 seconds.
   </para>

   <warning>
    <title>Critical System Messages</title>
    <para>
     Note that not all messages during installation are controlled by the
     <literal>report</literal> resource. Some critical messages concerning
     package installation and partitioning will show up ignoring your
     settings in the <literal>report</literal> section. Usually those
     messages will need to be answered with <guimenu>Yes</guimenu> or
     <guimenu>No</guimenu>.
    </para>
   </warning>
  </sect1>
  <sect1 xml:id="CreateProfile.Register">
   <title>System Registration and Extension Selection</title>

   <para>
    Registering the system with the can be configured within the
    <literal>suse_register</literal> resource. The following example
    registers the system with the &scc;. In case your organization
    provides its own registration server, you need to specify the required
    data with the <literal>reg_server*</literal> properties. Refer to the
    table below for details.
   </para>

<screen>&lt;suse_register&gt;
  &lt;do_registration config:type="boolean"&gt;true&lt;/do_registration&gt;
  &lt;email&gt;&exampleuser_plain;@&exampledomain;&lt;/email&gt;
  &lt;reg_code&gt;<replaceable>MY_SECRET_REGCODE</replaceable>&lt;/reg_code&gt;
  &lt;install_updates config:type="boolean"&gt;true&lt;/install_updates&gt;
  &lt;slp_discovery config:type="boolean"&gt;false&lt;/slp_discovery&gt;
&lt;/suse_register&gt;
 </screen>

   <para>
    As an alternative to the fully automated registration, &ay; can also
    be configured to start the &yast; registration module during the
    installation. this offers the possibility to enter the registration data
    manually. The following XML code is required:
   </para>

<screen>&lt;general&gt;
 &lt;semi-automatic config:type="list"&gt;
   &lt;semi-automatic_entry&gt;scc&lt;/semi-automatic_entry&gt;
 &lt;/semi-automatic&gt;
&lt;/general&gt;</screen>

   <tip>
    <title>Using the Installation Network Settings</title>
    <para>
     In case you need to use the same network settings that were used for
     the installation, &ay; needs to run the network setup in stage 1
     right before the registration is started:
    </para>
<screen>&lt;networking&gt;
  &lt;setup_before_proposal config:type="boolean"&gt;true&lt;/setup_before_proposal
&lt;/networking&gt;</screen>
   </tip>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Element
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
       <entry>
        <para>
         Comment
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>do_registration</literal>
        </para>
       </entry>
       <entry>
        <para>
         Boolean
        </para>
<screen>&lt;do_registration config:type="boolean"
&gt;true&lt;/do_registration&gt;</screen>
       </entry>
       <entry>
        <para>
         Specify whether the system should be registered or not. If set to
         <literal>false</literal> all other options are ignored and the system
         is not registered.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>e-mail</literal>
        </para>
       </entry>
       <entry>
        <para>
         E-mail address
        </para>
<screen>&lt;email&gt;&exampleuser_plain;@&exampledomain;&lt;/email&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The e-mail address matching the registration code.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>reg_code</literal>
        </para>
       </entry>
       <entry>
        <para>
         Text
        </para>
<screen>&lt;reg_code&gt;<replaceable>SECRET_REGCODE</replaceable>&lt;/reg_code&gt;</screen>
       </entry>
       <entry>
        <para>
         Required. Registration code.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>install_updates</literal>
        </para>
       </entry>
       <entry>
        <para>
         Boolean
        </para>
<screen>&lt;install_updates config:type="boolean"
&gt;true&lt;/install_updates&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. Determines if updates from the Updates channels should be
         installed. The default value is to not install them (<literal>false</literal>).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>slp_discovery</literal>
        </para>
       </entry>
       <entry>
        <para>
         Boolean
        </para>
<screen>&lt;slp_discovery config:type="boolean"
&gt;true&lt;/slp_discovery&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. Search for a registration server via SLP. The default value
         is <literal>false</literal>.
        </para>
        <para>
         Expects to find a single server. If more than one server is found,
         the installation will fail. In case there is more than one
         registration server available, you need to specify one with
         <literal>reg_server</literal>.
        </para>
        <para>
         If neither <literal>slp_discovery</literal> nor
         <literal>reg_server</literal> are set, the system is registered
         with the &scc;.
        </para>
        <para>
         This setting also affects self-update feature: If it is disabled, no
         SLP search will be performed.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>reg_server</literal>
        </para>
       </entry>
       <entry>
        <para>
         URL
        </para>
<screen>&lt;reg_server&gt;
  https://smt.&exampledomain;
&lt;/reg_server&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. &smt; server URL. If neither <literal>slp_discovery</literal>
         nor <literal>reg_server</literal> are set, the system is registered with
         the &scc;.
        </para>
        <para>
         The &smt; server is queried for an URL of the self-update repository. So if
         <literal>self_update_url</literal> is not set, the &smt; server influences
         where the self-updates are downloaded from. Check out the &deploy;
         to find further information about this feature.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>reg_server_cert_fingerprint_type</literal>
        </para>
       </entry>
       <entry>
        <para>
         <literal>SHA1</literal> or <literal>SHA256</literal>
        </para>
<screen>&lt;reg_server_cert_fingerprint_type&gt;
  SHA1
&lt;/reg_server_cert_fingerprint_type&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. Requires a checksum value provided with
         <literal>reg_server_cert_fingerprint</literal>. Using the fingerprint is
         recommended, since it ensures the SSL certificate is verified. The matching
         certificate will be automatically imported when the SSL communication fails
         because of a verification error.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>reg_server_cert_fingerprint</literal>
        </para>
       </entry>
       <entry>
        <para>
         Fingerprint value in hexadecimal notion (case-insensitive).
        </para>
<screen>&lt;reg_server_cert_fingerprint&gt;
  <replaceable>01:AB...:EF</replaceable>
&lt;/reg_server_cert_fingerprint&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. Requires a fingerprint type value provided with
         <literal>reg_server_cert_fingerprint_type</literal>. Using the fingerprint is
         recommended, since it ensures the SSL certificate is verified. The matching
         certificate will be automatically imported when the SSL communication fails
         because of a verification error.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>reg_server_cert</literal>
        </para>
       </entry>
       <entry>
        <para>
         URL
        </para>
<screen>&lt;reg_server_cert&gt;
  http://smt.&exampledomain;/smt.crt
&lt;/reg_server_cert&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. URL of the SSL certificate on the server. Using this option is
         not recommended, since the certificate that is downloaded is not verified.
         Use <literal>reg_server_cert_fingerprint</literal> instead.
        </para>
       </entry>
      </row>
      <row os="sles;sled">
       <entry>
        <para>
         <literal>addons</literal>
        </para>
       </entry>
       <entry>
        <para>
         Addons list
        </para>
       </entry>
       <entry>
        <para>
         Specify an extension from the registration server that should be
         added to the installation repositories. See
         <xref linkend="CreateProfile.Register.Extension"/> for details.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>

   <sect2 xml:id="CreateProfile.Register.Extension" os="sles;sled">
    <title>Extensions</title>
    <para>
     The &scc; provides several extensions, such as
     <literal>sle-sdk</literal> (Software Development Kit - SDK) that
     can be added as additional installation sources during the
     installation. Adding extensions can be configured via the
     <literal>addons</literal> property within the
     <literal>suse_register</literal> block.
     <!-- Below is a list of all extensions available for &productname;
          on x86_64: -->
    </para>
    <note>
     <title>Availability of Extensions</title>
     <para>
      The availability of extensions is product and architecture dependent.
      <!-- All listed extensions are available for &sls; on the x86_64
           architecture. -->
      Not all extensions are available on other architectures.  The only
      extension available for &sled; is the <literal>sle-sdk</literal>.
     </para>
     <para>
      Some extensions, such as the <literal>sle-we</literal>,
      <literal>sle-ha</literal> and <literal>sle-ha-geo</literal>
      require a registration code.
     </para>
    </note>

    <para>
     With <command>SUSEConnect --list-extensions</command> (available
     since &slsa;12 SP1), you can list all available extensions in a
     registered system. The result looks like:
    </para>
    <screen>Install with: SUSEConnect -p sle-sdk/12.2/x86_64</screen>
    <para>
     The <option>-p</option> argument displays the
     <replaceable>name/version/arch</replaceable> values that can be
     used in the AutoYaST profile as follows:
    </para>
    <screen><![CDATA[<addons config:type="list">
 <addon>
  <!-- SUSE Linux Enterprise Software Development Kit -->
  <name>sle-sdk</name>
  <version>12.2</version>
  <arch>x86_64</arch>
 </addon>
</addons>]]></screen>
    <para>
     For background information and add-on listings for &slsa;12,
     12SP1, and 12SP2, see <link
     xlink:href="https://github.com/yast/yast-registration/wiki/Available-SCC-Extensions-for-Use-in-Autoyast"/>.
     The listings will get updated from time to time.
    </para>
   </sect2>
  </sect1>
  <sect1 xml:id="CreateProfile.Bootloader">
   <title>The Boot Loader</title>

   <para>
    This documentation is for <command>yast2-bootloader</command> and applies
    to &grub;. For older product versions shipping with legacy GRUB, refer to
    the documentation that comes with your distribution in
    <filename>/usr/share/doc/packages/autoyast2/</filename>
   </para>

   <para>
    The general structure of the &ay; boot loader part looks like the
    following:
   </para>

<screen>&lt;bootloader&gt;
  &lt;loader_type&gt;
    &lt;!-- boot loader type (grub2 or grub2-efi) --&gt;
  &lt;/loader_type&gt;
  &lt;global&gt;
    &lt;!--
      entries defining the installation settings for &grub; and
      the generic boot code
    --&gt;
  &lt;/global&gt;
  &lt;device_map config:type="list"&gt;
    &lt;!-- entries defining the order of devices --&gt;
  &lt;/device_map&gt;
 &lt;/bootloader&gt;</screen>

   <sect2 xml:id="CreateProfile.Bootloader.type">
    <title>Loader Type</title>
    <para>
     Define which boot loader to use: <literal>grub2</literal> or
     <literal>grub2-efi</literal>.
    </para>
<screen>&lt;loader_type&gt;grub2&lt;/loader_type&gt;</screen>
   </sect2>

   <sect2 xml:id="CreateProfile.Bootloader.globals">
    <title>Globals</title>
    <para>
     This is an important if optional part. Define here where to install
     &grub; and how the boot process will work. Again,
     <command>yast2-bootloader</command> proposes a configuration if you
     do not define one. Usually the &ay; control file includes only this
     part and all other parts are added automatically during installation by
     <command>yast2-bootloader</command>. Unless you have some special
     requirements, do not specify the boot loader configuration in the XML
     file.
    </para>
<screen>&lt;global&gt;
  &lt;activate config:type="boolean"&gt;true&lt;/activate&gt;
  &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
  &lt;suse_btrfs config:type="boolean"&gt;true&lt;/suse_btrfs&gt;
  &lt;terminal&gt;gfxterm&lt;/terminal&gt;
  &lt;gfxmode&gt;1280x1024x24&lt;/gfxmode&gt;
&lt;/global&gt;</screen>
    <informaltable>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>activate</literal>
         </para>
        </entry>
        <entry>
         <para>
          Set the boot flag on the boot partition. The boot partition can be
          <filename>/</filename> if there is no separate /boot partition. If
          the boot partition is on a logical partition, the boot flag is set
          to the extended partition.
         </para>
<screen>&lt;activate config:type="boolean"&gt;true&lt;/activate&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>append</literal>
         </para>
        </entry>
        <entry>
         <para>
          Kernel parameters added at the end of boot entries for normal and
          recovery mode.
         </para>
<screen>&lt;append&gt;nomodeset vga=0x317&lt;/append&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>boot_boot</literal>
         </para>
        </entry>
        <entry>
         <para>
          Write &grub; to a separate /boot partition. If no separate
          /boot partition exists, &grub; will be written to
          <filename>/</filename>.
         </para>
<screen>&lt;boot_boot&gt;false&lt;/boot_boot&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>boot_custom</literal>
         </para>
        </entry>
        <entry>
         <para>
          Write &grub; to a custom device.
         </para>
<screen>&lt;boot_custom&gt;/dev/sda3&lt;/boot_custom&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>boot_extended</literal>
         </para>
        </entry>
        <entry>
         <para>
          Write &grub; to the extended partition (important if you want
          to use a generic boot code and the <filename>/boot</filename>
          partition is logical). NOTE: if the boot partition is logical, you
          should use <literal>boot_mbr</literal> (write &grub; to MBR)
          rather than <literal>generic_mbr</literal>.
         </para>
<screen>&lt;boot_extended&gt;false&lt;/boot_extended&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>boot_mbr</literal>
         </para>
        </entry>
        <entry>
         <para>
          Write &grub; to MBR of the first disk in the order (device.map
          includes order of disks).
         </para>
<screen>&lt;boot_mbr&gt;false&lt;/boot_mbr&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>boot_root</literal>
         </para>
        </entry>
        <entry>
         <para>
          Write &grub; to <filename>/</filename> partition.
         </para>
<screen>&lt;boot_root&gt;false&lt;/boot_root&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>generic_mbr</literal>
         </para>
        </entry>
        <entry>
         <para>
          Write generic boot code to MBR, will be ignored if boot_mbr is set
          to <literal>true</literal>.
         </para>
<screen>&lt;generic_mbr config:type="boolean"&gt;false&lt;/generic_mbr&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>gfxmode</literal>
         </para>
        </entry>
        <entry>
         <para>
          Graphical resolution of the &grub; screen (requires
          &lt;terminal&gt; to be set to <literal>gfxterm</literal>.
          Valid entries are <literal>auto</literal>,
          <literal><replaceable>HORIZONTAL</replaceable>x<replaceable>VERTICAL</replaceable></literal>,
          or
          <literal><replaceable>HORIZONTAL</replaceable>x<replaceable>VERTICAL</replaceable>x<replaceable>COLOR
          DEPTH</replaceable></literal>. You can display the screen
          resolutions available to &grub; on a particular system by
          typing <command>vbeinfo</command> at the &grub; command line in
          the running system.
         </para>
<screen>&lt;gfxmode&gt;1280x1024x24&lt;/gfxmode&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>os_prober</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, automatically searches for
          operating systems already installed and generates boot entries for
          them during the installation
         </para>
<screen>&lt;os_prober config:type="boolean"&gt;false&lt;/os_prober&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>suse_btrfs</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, booting from Btrfs snapshots
          will be enabled.
         </para>
<screen>&lt;suse_btrfs config:type="boolean"&gt;false&lt;/suse_btrfs&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>serial</literal>
         </para>
        </entry>
        <entry>
         <para>
          Command to execute if the &grub; terminal mode is set to
          <literal>serial</literal>.
         </para>
<screen>&lt;serial&gt;
  serial --speed=115200 --unit=0 --word=8 --parity=no --stop=1
&lt;/serials&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>terminal</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify the &grub; terminal mode to use, Valid entries are
          <literal>console</literal>, <literal>gfxterm</literal>, and
          <literal>serial</literal>. If set to <literal>serial</literal>,
          the serial command needs to be specified with
          &lt;serial&gt;, too.
         </para>
<screen>&lt;terminal&gt;serial&lt;/terminal&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>timeout</literal>
         </para>
        </entry>
        <entry>
         <para>
          The timeout in seconds until the default boot entry is booted
          automatically.
         </para>
<screen>&lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>vgamode</literal>
         </para>
        </entry>
        <entry>
         <para>
          Adds the Kernel parameter
          <literal>vga=<replaceable>VALUE</replaceable></literal> to the
          boot entries.
         </para>
<screen>&lt;vgamode&gt;0x317&lt;/vgamode&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>xen-append</literal>
         </para>
        </entry>
        <entry>
         <para>
          Kernel parameters added at the end of boot entries for &xen;
          guests.
         </para>
<screen>&lt;append&gt;nomodeset vga=0x317&lt;/append&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>xen-kernel-append</literal>
         </para>
        </entry>
        <entry>
         <para>
          Kernel parameters added at the end of boot entries for &xen;
          kernels on the &vmhost;.
         </para>
<screen>&lt;xen-append&gt;dom0_mem=768M&lt;/xen-append&gt;</screen>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="CreateProfile.Bootloader.dev_map">
    <title>Device map</title>
    <para>
     &grub; avoids mapping problems between BIOS drives and Linux devices
     by using device ID strings (UUIDs) or file system labels when
     generating its configuration files. &grub; utilities create a
     temporary device map on the fly, which is usually sufficient,
     particularly on single-disk systems. However, if you need to override
     the automatic device mapping mechanism, create your custom mapping in
     this section.
    </para>
<screen>&lt;device_map config:type="list"&gt;
  &lt;device_map_entry&gt;
    &lt;firmware&gt;hd0&lt;/firmware&gt; &lt;!-- order of devices in target map  --&gt;
    &lt;linux&gt;/dev/disk/by-id/ata-ST3500418AS_6VM23FX0&lt;/linux&gt; &lt;!-- name of device (disk)  --&gt;
  &lt;/device_map_entry&gt;
&lt;/device_map&gt;</screen>
   </sect2>
  </sect1>
  <sect1 xml:id="CreateProfile.Partitioning">
   <title>Partitioning</title>

   <para>
    <remark role="fixme">Add a short description</remark>
   </para>

   <sect2 xml:id="CreateProfile.Partitioning.config">
    <title>Drive Configuration</title>
    <para>
     The elements listed below must be placed within the following XML
     structure:
    </para>
<screen>&lt;profile&gt;
  &lt;partitioning config:type="list"&gt;
    &lt;drive&gt;
     ...
    &lt;/drive&gt;
  &lt;/partitioning&gt;
&lt;/profile&gt;</screen>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>device</literal>
         </para>
        </entry>
        <entry>
         <para>
          The device you want to configure in this &lt;drive&gt;
          section. You can use persistent device names via id, like
          <filename>/dev/disk/by-id/ata-WDC_WD3200AAKS-75L9A0_WD-WMAV27368122</filename>
          or <emphasis>by-path</emphasis>,like
          <filename>/dev/disk/by-path/pci-0001:00:03.0-scsi-0:0:0:0</filename>.
         </para>
<screen>&lt;device&gt;/dev/sda&lt;/device&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. If left out, &ay; tries to guess the device. See
          <xref linkend="ay.partitioning.skip_devices"/> on how to influence
          guessing.
         </para>
         <para>
          A RAID must always have <literal>/dev/md</literal> as device.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>initialize</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, the partition table gets wiped
          out before &ay; starts the partition calculation.
         </para>
<screen>&lt;initialize config:type="boolean"&gt;true&lt;/initialize&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. The default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>partitions</literal>
         </para>
        </entry>
        <entry>
         <para>
          A list of &lt;partition&gt; entries (see
          <xref linkend="ay.partition_configuration"/>).
         </para>
<screen>&lt;partitions config:type="list"&gt;
  &lt;partition&gt;...&lt;/partition&gt;
  ...
&lt;/partitions&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. If no partitions are specified, &ay; will create a
          reasonable partitioning (see
          <xref linkend="ay.auto_partitioning"/>).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>pesize</literal>
         </para>
        </entry>
        <entry>
         <para>
          This value only makes sense with LVM.
         </para>
<screen>&lt;pesize&gt;8M&lt;/pesize&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default is 4M for LVM volume groups.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>use</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specifies the strategy &ay; will use to partition the hard
          disk.
         </para>
         <para>
          Choose between:
         </para>
         <itemizedlist mark="bullet" spacing="normal">
          <listitem>
           <para>
            <literal>all</literal> (uses the whole device while calculating
            the new partitioning),
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>linux</literal> (only existing Linux partitions are
            used),
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>free</literal> (only unused space on the device is
            used, no other partitions are touched),
           </para>
          </listitem>
          <listitem>
           <para>
            1,2,3 (a list of comma separated partition numbers to use).
           </para>
          </listitem>
         </itemizedlist>
        </entry>
        <entry>
         <para>
          This parameter should be provided.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>type</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify the type of the <literal>drive</literal>,
         </para>
         <para>
          Choose between:
         </para>
         <itemizedlist mark="bullet" spacing="normal">
          <listitem>
           <para>
            <literal>CT_DISK</literal> for physical hard disks (default),
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>CT_LVM</literal> for LVM volume groups,
           </para>
          </listitem>
         </itemizedlist>
<screen>&lt;type config:type="symbol"&gt;CT_LVM&lt;/type&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default is <literal>CT_DISK</literal> for a normal
          physical hard disk.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>disklabel</literal>
         </para>
        </entry>
        <entry>
         <para>
          Describes the type of the partition table.
         </para>
         <para>
          Choose between:
         </para>
         <itemizedlist mark="bullet" spacing="normal">
          <listitem>
           <para>
            <literal>msdos</literal>
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>gpt</literal>
           </para>
          </listitem>
         </itemizedlist>
<screen>&lt;disklabel&gt;gpt&lt;/disklabel&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. By default &yast; decides what makes sense.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>keep_unknown_lv</literal>
         </para>
        </entry>
        <entry>
         <para>
          This value only makes sense for type=CT_LVM drives. If you are
          reusing a logical volume group and you set this to
          <literal>true</literal>, all existing logical volumes in that
          group will not be touched unless they are specified in the
          &lt;partitioning&gt; section. So you can keep existing
          logical volumes without specifying them.
         </para>
<screen>&lt;keep_unknown_lv config:type="boolean"
&gt;false&lt;/keep_unknown_lv&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. The default is <literal>false</literal>.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
    <tip xml:id="ay.partitioning.skip_devices">
     <title>Skipping Devices</title>
     <para>
      You can influence &ay;'s device-guessing for cases where you do not
      specify a &lt;device&gt; entry on your own. Usually &ay;
      would use the first device it can find that looks reasonable but you
      can configure it to skip some devices like this:
     </para>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;initialize config:type="boolean"&gt;true&lt;/initialize&gt;
    &lt;skip_list config:type="list"&gt;
      &lt;listentry&gt;
        &lt;!-- skip devices that use the usb-storage driver --&gt;
        &lt;skip_key&gt;driver&lt;/skip_key&gt;
        &lt;skip_value&gt;usb-storage&lt;/skip_value&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;!-- skip devices that are smaller than 1GB --&gt;
        &lt;skip_key&gt;size_k&lt;/skip_key&gt;
        &lt;skip_value&gt;1048576&lt;/skip_value&gt;
        &lt;skip_if_less_than config:type="boolean"&gt;true&lt;/skip_if_less_than&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;!-- skip devices that are larger than 100GB --&gt;
        &lt;skip_key&gt;size_k&lt;/skip_key&gt;
        &lt;skip_value&gt;104857600&lt;/skip_value&gt;
        &lt;skip_if_more_than config:type="boolean"&gt;true&lt;/skip_if_more_than&gt;
      &lt;/listentry&gt;
    &lt;/skip_list&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
     <para>
      For a list of all possible &lt;skip_key&gt;, run <command>yast2
      ayast_probe</command> on an already installed system.
     </para>
    </tip>
   </sect2>

   <sect2 xml:id="ay.partition_configuration">
    <title>Partition Configuration</title>
    <para>
     The elements listed below must be placed within the following XML
     structure:
    </para>
<screen>&lt;drive&gt;
  &lt;partitions config:type="list"&gt;
    &lt;partition&gt;
      ...
    &lt;/partition&gt;
  &lt;/partitions&gt;
&lt;/drive&gt;</screen>
    <informaltable>
     <tgroup cols="3">
      <colspec colwidth="1*"/>
      <colspec colwidth="3*"/>
      <colspec colwidth="2*"/>
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>create</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify if this partition must be created or if it already exists.
         </para>
<screen>&lt;create config:type="boolean" &gt;false&lt;/create&gt;</screen>
        </entry>
        <entry>
         <para>
          If set to <literal>false</literal>, you also need to set
          <literal>partition_nr</literal> to tell &ay; the partition
          number.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>crypt_fs</literal>
         </para>
        </entry>
        <entry>
         <para>
          Partition will be crypted.
         </para>
<screen>&lt;crypt_fs config:type="boolean"&gt;false&lt;/crypt_fs&gt;</screen>
        </entry>
        <entry>
         <para>
          Default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>crypt_key</literal>
         </para>
        </entry>
        <entry>
         <para>
          Encryption key
         </para>
<screen>&lt;crypted_key&gt;xxxxxxxx&lt;/crypt_key&gt;</screen>
        </entry>
        <entry>
         <para>
          Only needed if <literal>crypt_fs</literal> has been set to <literal>true</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>mount</literal>
         </para>
        </entry>
        <entry>
         <para>
          The mount point of this partition.
         </para>
<screen>&lt;mount&gt;/&lt;/mount&gt;
&lt;mount&gt;swap&lt;/mount&gt;</screen>
        </entry>
        <entry>
         <para>
          You should have at least a root partition (/) and a swap
          partition.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>fstopt</literal>
         </para>
        </entry>
        <entry>
         <para>
          Mount options for this partition.
         </para>
<screen>&lt;fstopt&gt;
  ro,noatime,user,data=ordered,acl,user_xattr
&lt;/fstopt&gt;</screen>
        </entry>
        <entry>
         <para>
          See <command>man mount</command> for available mount options.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>label</literal>
         </para>
        </entry>
        <entry>
         <para>
          The label of the partition (useful for the
          <literal>mountby</literal> parameter; see below).
         </para>
<screen>&lt;label&gt;mydata&lt;/label&gt;</screen>
        </entry>
        <entry>
         <para>
          See <command>man e2label</command> for an example.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>uuid</literal>
         </para>
        </entry>
        <entry>
         <para>
          The uuid of the partition (only useful for the
          <literal>mountby</literal> parameter; see below).
         </para>
<screen>&lt;uuid
&gt;1b4e28ba-2fa1-11d2-883f-b9a761bde3fb&lt;/uuid&gt;</screen>
        </entry>
        <entry>
         <para>
          See <command>man uuidgen</command>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>size</literal>
         </para>
        </entry>
        <entry>
         <para>
          The size of the partition, for example 4G, 4500M, etc. The /boot
          partition and the swap partition can have <literal>auto</literal>
          as size. Then &ay; calculates a reasonable size. One partition
          can have the value <literal>max</literal> to use all remaining
          space.
         </para>
         <para>
          You can also specify the size in percentage. So 10% will use 10%
          of the size of the hard disk or volume group. You can mix auto,
          max, size, and percentage as you like.
         </para>
<screen>&lt;size&gt;10G&lt;/size&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>format</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify if &ay; should format the partition.
         </para>
<screen>&lt;format config:type="boolean"&gt;false&lt;/format&gt;</screen>
        </entry>
        <entry>
         <para>
          If you set <literal>create</literal> to <literal>true</literal>,
          then you likely want this option set to <literal>true</literal> as
          well.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>file system</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify the file system to use on this partition:
         </para>
         <itemizedlist mark="bullet" spacing="normal">
          <listitem>
           <para>
            <literal>btrfs</literal>
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>ext2</literal>
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>ext3</literal>
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>ext4</literal>
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>fat</literal>
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>xfs</literal>
           </para>
          </listitem>
          <listitem>
           <para>
            <literal>swap</literal>
           </para>
          </listitem>
         </itemizedlist>
<screen>&lt;filesystem config:type="symbol"
&gt;ext3&lt;/filesystem&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. The default is <literal>btrfs</literal> for the root
          partition (<filename>/</filename>) and <literal>xfs</literal> for
          data partitions.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>mkfs_options</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify an option string that is added to the mkfs command.
         </para>
<screen>&lt;mkfs_options&gt;-I 128&lt;/mkfs_options&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Only use this when you know what you are doing.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>partition_nr</literal>
         </para>
        </entry>
        <entry>
         <para>
          The partition number of this partition. If you have set
          <literal>create=false</literal> or if you use LVM, then you can
          specify the partition via <literal>partition_nr</literal>. You can
          force &ay; to only create primary partitions by assigning
          numbers below 5.
         </para>
<screen>&lt;partition_nr config:type="integer"
&gt;2&lt;/partition_nr&gt;</screen>
        </entry>
        <entry>
         <para>
          Usually, numbers 1 to 4 are primary partitions while 5 and higher
          are logical partitions.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>partition_id</literal>
         </para>
        </entry>
        <entry>
         <para>
          The <literal>partition_id</literal> sets the id of the partition.
          If you want different identifiers than 131 for Linux partition or
          130 for swap, configure them with partition_id.
         </para>
<screen>&lt;partition_id config:type="integer"
&gt;131&lt;/partition_id&gt;</screen>
        </entry>
        <entry>
         <para>
          The default is <literal>131</literal> for Linux partition and
          <literal>130</literal> for swap.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>mountby</literal>
         </para>
        </entry>
        <entry>
         <para>
          Instead of a partition number, you can tell &ay; to mount a
          partition by <literal>device</literal>, <literal>label</literal>,
          <literal>uuid</literal>, <literal>path</literal> or
          <literal>id</literal>, which are the udev path and udev id (see
          <filename>/dev/disk/...</filename>).
         </para>
<screen>&lt;mountby config:type="symbol"
&gt;label&lt;/mountby&gt;</screen>
        </entry>
        <entry>
         <para>
          See <literal>label</literal> and <literal>uuid</literal>
          documentation above. The default depends on &yast; and usually
          is <literal>id</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>subvolumes</literal>
         </para>
        </entry>
        <entry>
         <para>
          List of subvolumes to create for a file system of type Btrfs. This
          key only makes sense for file systems of type Btrfs. See
          <xref linkend="ay.btrfs_subvolumes"/> for more information.
         </para>
<screen>&lt;subvolumes config:type="list"&gt;
  &lt;path&gt;tmp&lt;/path&gt;
  &lt;path&gt;opt&lt;/path&gt;
  &lt;path&gt;srv&lt;/path&gt;
  &lt;path&gt;var/crash&lt;/path&gt;
  &lt;path&gt;var/lock&lt;/path&gt;
  &lt;path&gt;var/run&lt;/path&gt;
  &lt;path&gt;var/tmp&lt;/path&gt;
  &lt;path&gt;var/spool&lt;/path&gt;
  ...
&lt;/subvolumes&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>lv_name</literal>
         </para>
        </entry>
        <entry>
         <para>
          If this partition is in a logical volume in a volume group specify
          the logical volume name here (see the <literal>is_lvm_vg</literal>
          parameter in the drive configuration).
         </para>
<screen>&lt;lv_name&gt;opt_lv&lt;/lv_name&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>stripes</literal>
         </para>
        </entry>
        <entry>
         <para>
          An integer that configures LVM striping. Specify across how many
          devices you want to stripe (spread data).
         </para>
<screen>&lt;stripes config:type="integer"&gt;2&lt;/stripes&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>stripesize</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify the size of each block in KB.
         </para>
<screen>&lt;stripesize config:type="integer"
&gt;4&lt;/stripesize&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>lvm_group</literal>
         </para>
        </entry>
        <entry>
         <para>
          If this is a physical partition used by (part of) a volume group
          (LVM), you need to specify the name of the volume group here.
         </para>
<screen>&lt;lvm_group&gt;system&lt;/lvm_group&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>pool</literal>
         </para>
        </entry>
        <entry>
         <para>
          <literal>pool</literal> must be set to <literal>true</literal> if
          the LVM logical volume should be an LVM thin pool.
         </para>
<screen>&lt;pool config:type="boolean"&gt;false&lt;/pool&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>used_pool</literal>
         </para>
        </entry>
        <entry>
         <para>
          The name of the LVM thin pool that is used as a data store for
          this thin logical volume. If this is set to something non-empty,
          it implies that the volume is a so-called thin logical volume.
         </para>
<screen>&lt;used_pool&gt;my_thin_pool&lt;/used_pool&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>raid_name</literal>
         </para>
        </entry>
        <entry>
         <para>
          If this physical volume is part of a RAID, specify the name of the
          RAID.
         </para>
<screen>&lt;raid_name&gt;/dev/md0&lt;/raid_name&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>raid_type</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify the type of the RAID.
         </para>
<screen>&lt;raid_type&gt;raid1&lt;/raid_type&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>raid_options</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify RAID options, see below.
         </para>
<screen>&lt;raid_options&gt;...&lt;/raid_options&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>resize</literal>
         </para>
        </entry>
        <entry>
         <para>
          This boolean must be <literal>true</literal> if an existing
          partition should be resized. In this case, you want to set
          <literal>create</literal> to <literal>false</literal> and usually
          you do not want to <literal>format</literal> the partition.  You need
          to tell &ay; the <literal>partition_nr</literal> and the
          <literal>size</literal>. The size can be in percentage of the
          original size or a number, like <literal>800M</literal>.
          <literal>max</literal> and <literal>auto</literal> do not work as
          size here.
         </para>
<screen>&lt;resize config:type="boolean"
&gt;false&lt;/resize&gt;</screen>
        </entry>
        <entry>
         <para>
          Resizing only works with physical disks, not with LVM volumes.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="ay.btrfs_subvolumes">
     <title>Btrfs subvolumes</title>
     <para>
      As mentioned in the <xref linkend="ay.partition_configuration"/>, it is
      possible to define a set of subvolumes for each Btrfs filesystem. In
      its simplest form, is just a list of entries:
     </para>

<screen>&lt;subvolumes config:type="list"&gt;
  &lt;path&gt;tmp&lt;/path&gt;
  &lt;path&gt;opt&lt;/path&gt;
  &lt;path&gt;srv&lt;/path&gt;
  &lt;path&gt;var/crash&lt;/path&gt;
  &lt;path&gt;var/lock&lt;/path&gt;
  &lt;path&gt;var/run&lt;/path&gt;
  &lt;path&gt;var/tmp&lt;/path&gt;
  &lt;path&gt;var/spool&lt;/path&gt;
&lt;/subvolumes&gt;</screen>

     <para>
      AutoYaST supports disabling copy-on-write for a given subvolume. In that case,
      an slightly more complex syntax should be used:
     </para>

<screen>&lt;subvolumes config:type="list"&gt;
&lt;listentry&gt;tmp&lt;/listentry&gt;
&lt;listentry&gt;opt&lt;/listentry&gt;
&lt;listentry&gt;srv&lt;/listentry&gt;
&lt;listentry&gt;
  &lt;path&gt;var/lib/pgsql&lt;/path&gt;
  &lt;copy_on_write config:type="boolean"&gt;false&lt;copy_on_write&gt;
&lt;/listentry&gt;
&lt;/subvolumes&gt;</screen>

     <para os="sles;sled">
      If there is a default subvolume used for the distribution (for example
      <filename>@</filename> in &productname;) the name of this default subvolume
      is automatically prefixed to the names in this list. This behaviour can
      be disabled setting the <literal>btrfs_set_default_subvolume_name</literal>
      in the <literal>general/storage</literal> section.
     </para>

<screen os="sles;sled">&lt;general&gt;
  &lt;storage&gt;
    &lt;btrfs_set_default_subvolume_name config:type="boolean"&gt;false&lt;/btrfs_set_default_subvolume_name&gt;
  &lt;/storage&gt;
&lt;/general&gt;
</screen>
   </sect2>

   <sect2 xml:id="ay.raid_configuration">
    <title>RAID Options</title>
    <para>
     The following elements must be placed within the following XML
     structure:
    </para>
<screen>&lt;partition&gt;
  &lt;raid_options&gt;
    ...
  &lt;/raid_options&gt;
&lt;/partition&gt;</screen>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>chunk_size</literal>
         </para>
        </entry>
        <entry>
         <para/>
<screen>&lt;chunk_size&gt;4&lt;/chunk_size&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>parity_algorithm</literal>
         </para>
        </entry>
        <entry>
         <para>
          Possible values are:
         </para>
         <para>
          <literal>left_asymmetric</literal>, <literal>left_symmetric,
          right_asymmetric</literal>, <literal>right_symmetric</literal>.
         </para>
         <para>
          For RAID6 and RAID10 the following values can be used:
         </para>
         <para>
          <literal>parity_first</literal>, <literal>parity_last</literal>,
          <literal>left_asymmetric_6, left_symmetric_6</literal>,
          <literal>right_asymmetric_6</literal>,
          <literal>right_symmetric_6</literal>,
          <literal>parity_first_6</literal>, <literal>n2</literal>,
          <literal>o2</literal>, <literal>f2</literal>,
          <literal>n3</literal>, <literal>o3</literal>,
          <literal>f3</literal> for RAID6 and RAID10.
         </para>
<screen>&lt;parity_algorithm
&gt;left_asymmetric&lt;/parity_algorithm&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>raid_type</literal>
         </para>
        </entry>
        <entry>
         <para>
          Possible values are: <literal>raid0</literal>,
          <literal>raid1</literal> and <literal>raid5</literal>.
         </para>
<screen>&lt;raid_type&gt;raid1&lt;/raid_type&gt;</screen>
        </entry>
        <entry>
         <para>
          The default is raid1.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>device_order</literal>
         </para>
        </entry>
        <entry>
         <para>
          This list contains the optional order of the physical devices:
         </para>
<screen>&lt;device_order config:type="list"&gt;
   &lt;device&gt;/dev/sdb2&lt;/device&gt;
   &lt;device&gt;/dev/sda1&lt;/device&gt;
   ...
&lt;/device_order&gt;</screen>
        </entry>
        <entry>
         <para>
          This is optional and the default is alphabetical order.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="ay.auto_partitioning">
    <title>Automated Partitioning</title>
    <para>
     For automated partitioning, you only need to provide the sizes and
     mount points of partitions. All other data needed for successful
     partitioning is calculated during installationunless provided in the
     control file.
    </para>
    <para>
     If no partitions are defined and the specified drive is also the drive
     where the root partition should be created, the following partitions
     are created automatically:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       <filename>/boot</filename>
      </para>
      <para>
       The size of the <filename>/boot</filename> partition is determined by
       the architecture of the target system.
      </para>
     </listitem>
     <listitem>
      <para>
       <filename>swap</filename>
      </para>
      <para>
       The size of the swap partition is determined by the amount of memory
       available in the system.
      </para>
     </listitem>
     <listitem>
      <para>
       <filename>/</filename> (root partition)
      </para>
      <para>
       The size of the root partition is determined by the space left after
       creating <filename>swap</filename> and <filename>/boot</filename>.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     Depending on the initial status of the drive and how it was previously
     partitioned, it is possible to create the default partitioning in the
     following ways:
    </para>
    <variablelist>
     <varlistentry>
      <term>Use Free Space</term>
      <listitem>
       <para>
        If the drive is already partitioned, it is possible to create the
        new partitions using the free space on the hard disk. This requires
        the availability of sufficient space for all selected packages in
        addition to swap.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Reuse all available space</term>
      <listitem>
       <para>
        Use this option to delete all existing partitions (Linux and
        non-Linux).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Reuse all available Linux partitions</term>
      <listitem>
       <para>
        This option deletes all existing Linux partitions. Other partitions
        (for example Windows partitions) remain untouched. Note that this
        works only if the Linux partitions are at the end of the device.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Reuse only specified partitions</term>
      <listitem>
       <para>
        This option allows you to select specific partitions to delete.
        Start the selection with the last available partition.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>
     Repartitioning only works if the selected partitions are neighbors and
     located at the end of the device.
    </para>
    <important>
     <title>Beware of Data Loss</title>
     <para>
      The value provided in the <literal>use</literal> property determines
      how existing data and partitions are treated. The value
      <literal>all</literal> means that the entire disk will be erased. Make
      backups and use the <literal>confirm</literal> property if you need to
      keep some partitions with important data. Otherwise, no pop-ups will
      notify you about partitions being deleted.
     </para>
    </important>
    <para>
     If multiple drives are in the target system, identify all drives with
     their device names and specify how the partitioning should be
     performed.
    </para>
    <para>
     Partition sizes can be given in gigabytes, megabytes or can be set to a
     flexible value using the keywords <literal>auto</literal> and
     <literal>max</literal>. <literal>max</literal> uses all available space
     on a drive, therefore should only be set for the last partition on the
     drive. With <literal>auto</literal> the size of a
     <literal>swap</literal> or <literal>boot</literal> partition is
     determined automatically, depending on the memory available and the
     type of the system.
    </para>
    <para>
     A fixed size can be given as shown below:
    </para>
    <para>
     <literal>1GB</literal>, <literal>1G</literal>,
     <literal>1000MB</literal>, or <literal>1000M</literal> will all create a
     partition of the size 1 Gigabyte.
    </para>
    <example>
     <title>Automated Partitioning</title>
     <para>
      The following is an example of a single drive system, which is not
      pre-partitioned and should be automatically partitioned according to
      the described pre-defined partition plan. If you do not specify the
      device, it will be automatically detected.
     </para>
<screen>&lt;partitioning  config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;
</screen>
    </example>
    <para>
     A more detailed example shows how existing partitions and multiple
     drives are handled.
    </para>
    <example>
     <title>Detailed Automated Partitioning</title>
<screen>&lt;partitioning  config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;size&gt;10G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;size&gt;1G&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem  config:type="symbol"&gt;reiser&lt;/filesystem&gt;
        &lt;mount&gt;/data1&lt;/mount&gt;
        &lt;size&gt;15G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;filesystem  config:type="symbol"&gt;jfs&lt;/filesystem&gt;
        &lt;mount&gt;/data2&lt;/mount&gt;
        &lt;size&gt;auto&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;free&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;
</screen>
    </example>
   </sect2>

   <sect2 xml:id="ay.partition_advanced">
    <title>Advanced Partitioning Features</title>
    <para>
     <remark role="fixme">Add a short description</remark>
    </para>
    <sect3 xml:id="ay.partition_advanced.wipe">
     <title>Wipe out Partition Table</title>
     <para>
      Usually this is not needed because &ay; can delete partitions one
      by one automatically, but you need the option to let &ay; clear the
      partition table instead of deleting partitions individually.
     </para>
     <para>
      Go to the <literal>drive</literal> section and add:
     </para>
<screen>&lt;initialize config:type="boolean"&gt;true&lt;/initialize&gt;</screen>
     <para>
      With this setting &ay; will delete the partition table before it
      starts to analyze the actual partitioning and calculates its partition
      plan. Of course this means, that you cannot keep any of your existing
      partitions.
     </para>
    </sect3>
    <sect3 xml:id="ay.partition_advanced.mount">
     <title>Mount Options</title>
     <para>
      By default a file system to be mounted is identified in
      <filename>/etc/fstab</filename> by the device name. This
      identification can be changed so the file system is found by searching
      for a UUID or a volume label. Note that not all file systems can be
      mounted by UUID or a volume label. To specify how a partition is to be
      mounted, use the <literal>mountby</literal> property which has the
      <literal>symbol</literal> type. Possible options are:
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        <literal>device</literal> (default)
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>label</literal>
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>UUID</literal>
       </para>
      </listitem>
     </itemizedlist>
     <para>
      If you choose to mount the partition using a label, the name entered
      for the <literal>label</literal> property is used as the volume label.
     </para>
     <para>
      Add any valid mount option in the fourth field of
      <filename>/etc/fstab</filename>. Multiple options are separated by
      commas. Possible fstab options:
     </para>
     <variablelist>
      <varlistentry>
       <term>Mount read-only (<literal>ro</literal>)</term>
       <listitem>
        <para>
         No write access to the file system. Default is
         <literal>false</literal>.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>No access time (<literal>noatime</literal>)</term>
       <listitem>
        <para>
         Access times are not updated when a file is read. Default is
         <literal>false</literal>.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Mountable by User (<literal>user</literal>)</term>
       <listitem>
        <para>
         The file system can be mounted by a normal user. Default is
         <literal>false</literal>.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
        Data Journaling Mode (<literal>ordered</literal>,
        <literal>journal</literal>, <literal>writeback</literal>)
       </term>
       <listitem>
        <variablelist>
         <varlistentry>
          <term><literal>journal</literal>
          </term>
          <listitem>
           <para>
            All data is committed to the journal prior to being written to
            the main file system.
           </para>
          </listitem>
         </varlistentry>
         <varlistentry>
          <term><literal>ordered</literal>
          </term>
          <listitem>
           <para>
            All data is directly written to the main file system before its
            metadata is committed to the journal.
           </para>
          </listitem>
         </varlistentry>
         <varlistentry>
          <term><literal>writeback</literal>
          </term>
          <listitem>
           <para>
            Data ordering is not preserved.
           </para>
          </listitem>
         </varlistentry>
        </variablelist>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Access Control List (<literal>acl</literal>)</term>
       <listitem>
        <para>
         Enable access control lists on the file system.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Extended User Attributes (<literal>user_xattr</literal>)</term>
       <listitem>
        <para>
         Allow extended user attributes on the file system.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <example>
      <title>Mount Options</title>
<screen>&lt;partitions config:type="list"&gt;
  &lt;partition&gt;
    &lt;filesystem config:type="symbol"&gt;reiser&lt;/filesystem&gt;
    &lt;format config:type="boolean"&gt;true&lt;/format&gt;
    &lt;fstopt&gt;ro,noatime,user,data=ordered,acl,user_xattr&lt;/fstopt&gt;
    &lt;mount&gt;/local&lt;/mount&gt;
    &lt;mountby config:type="symbol"&gt;uuid&lt;/mountby&gt;
    &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
    &lt;size&gt;10G&lt;/size&gt;
  &lt;/partition&gt;
&lt;/partitions&gt;
</screen>
     </example>
    </sect3>
    <sect3 xml:id="ay.partition_advanced.keep">
     <title>Keeping Specific Partitions</title>
     <para>
      In some cases you should leave partitions untouched and only format
      specific target partitions, rather than creating them from scratch.
      For example, if different Linux installations coexist, or you have
      another operating system installed, likely you do not want to wipe
      these out. You may also want to leave data partitions untouched.
     </para>
     <para>
      Such scenarios require certain knowledge about the target systems and
      hard disks. Depending on the scenario, you might need to know the
      exact partition table of the target hard disk with partition ids,
      sizes and numbers. With this data you can tell &ay; to keep certain
      partitions, format others and create new partitions if needed.
     </para>
     <para>
      The following example will keep partitions 1, 2 and 5 and delete
      partition 6 to create two new partitions. All remaining partitions
      will only be formatted.
      <remark>emap 2011-11-05: Not the best example for the scenarios two paras up with coexisting operating systems or data partitions. Who'd want to format those?</remark>
     </para>
     <example>
      <title>Keeping partitions</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdc&lt;/device&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;create config:type="boolean"&gt;false&lt;/create&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;mount&gt;/&lt;/mount&gt;
          &lt;partition_nr config:type="integer"&gt;1&lt;/partition_nr&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;create config:type="boolean"&gt;false&lt;/create&gt;
          &lt;format config:type="boolean"&gt;false&lt;/format&gt;
          &lt;partition_nr config:type="integer"&gt;2&lt;/partition_nr&gt;
          &lt;mount&gt;/space&lt;/mount&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;create config:type="boolean"&gt;false&lt;/create&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
          &lt;partition_nr config:type="integer"&gt;5&lt;/partition_nr&gt;
          &lt;mount&gt;swap&lt;/mount&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;mount&gt;/space2&lt;/mount&gt;
          &lt;size&gt;5G&lt;/size&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;mount&gt;/space3&lt;/mount&gt;
          &lt;size&gt;max&lt;/size&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
    &lt;use&gt;6&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
     </example>
     <para>
      The last example requires exact knowledge of the existing partition
      table and the partition numbers of those partitions that should be
      kept. In some cases however, such data may not be available,
      especially in a mixed hardware environment with different hard disk
      types and configurations. The following scenario is for a system with
      a non-Linux OS with a designated area for a Linux installation.
     </para>
     <figure xml:id="partitioning-keep1">
      <title>Keeping partitions</title>
      <mediaobject>
       <imageobject role="html">
        <imagedata fileref="partitioning-keep1.png"/>
       </imageobject>
       <imageobject role="fo">
        <imagedata fileref="partitioning-keep1.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>
      In this scenario, shown in figure
      <xref linkend="partitioning-keep1"/>, &ay; will not create new
      partitions. Instead it searches for certain partition types on the
      system and uses them according to the partitioning plan in the control
      file. No partition numbers are given in this case, only the mount
      points and the partition types (additional configuration data can be
      provided, for example file system options, encryption and file system
      type).
     </para>
     <example>
      <title>Auto-detection of partitions to be kept.</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;false&lt;/create&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;false&lt;/create&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;partition_id config:type="integer"&gt;130&lt;/partition_id&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
     </example>
    </sect3>
   </sect2>

   <sect2 xml:id="ay.partition_fstab">
    <title>Using an Existing Mount Table (fstab)</title>
    <note>
     <title>
      Cannot Be Combined with <literal>partitioning</literal> Section
     </title>
     <para>
      This section will be ignored if you have defined your own
      <literal>partitioning</literal> section too.
     </para>
    </note>
    <para>
     This option will allow &ay; to use an existing
     <filename>/etc/fstab</filename> and use the partition data from a
     previous installation. All partitions are kept and no new partitions
     are created. The partitions will be formatted and mounted as specified
     in <filename>/etc/fstab</filename> on a Linux root partition.
    </para>
    <para>
     Although the default behavior is to format all partitions, it is also
     possible to leave some partitions untouched and only mount them, for
     example data partitions. If multiple installations are found on the
     system (multiple root partitions with different
     <filename>fstab</filename> files, the installation will abort, unless
     the root partition is configured in the control file. The following
     example illustrates how this option can be used:
    </para>
    <example>
     <title>Reading an Existing <filename>/etc/fstab</filename></title>
<screen>&lt;partitioning_advanced&gt;
  &lt;fstab&gt;
    &lt;!-- Read data from existing fstab. If multiple root partitions are
            found, use the one specified below. Otherwise the first root
            partition is taken --&gt;
    &lt;!-- &lt;root_partition&gt;/dev/sda5&lt;/root_partition&gt; --&gt;
    &lt;use_existing_fstab config:type="boolean"&gt;true&lt;/use_existing_fstab&gt;
    &lt;!-- all partitions found in fstab will be formatted and mounted
            by default unless a partition is listed below with different
            settings --&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;format config:type="boolean"&gt;false&lt;/format&gt;
        &lt;mount&gt;/bootmirror&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/fstab&gt;
&lt;/partitioning_advanced&gt;</screen>
    </example>
   </sect2>

   <sect2 xml:id="ay.partition_lvm">
    <title>Logical Volume Manager (LVM)</title>
    <para>
     To configure LVM, first create a physical volume using the normal
     partitioning method described above.
    </para>
    <example>
     <title>Create LVM Physical Volume</title>
     <para>
      The following example shows how to prepare for LVM in the
      <literal>partitioning</literal> resource. A non-formatted partition is
      created on device <filename>/dev/sda1</filename> of the type
      <literal>LVM</literal> and with the volume group
      <literal>system</literal>. This partition will use all space available
      on the drive.
     </para>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;true&lt;/create&gt;
        &lt;lvm_group&gt;system&lt;/lvm_group&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;partition_id config:type="integer"&gt;142&lt;/partition_id&gt;
        &lt;partition_nr config:type="integer"&gt;1&lt;/partition_nr&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
    </example>
    <example>
     <title>LVM Logical Volumes</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;lvm_group&gt;system&lt;/lvm_group&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/system&lt;/device&gt;
      &lt;is_lvm_vg config:type="boolean"&gt;true&lt;/is_lvm_vg&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;reiser&lt;/filesystem&gt;
          &lt;lv_name&gt;user_lv&lt;/lv_name&gt;
          &lt;mount&gt;/usr&lt;/mount&gt;
          &lt;size&gt;15G&lt;/size&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;reiser&lt;/filesystem&gt;
          &lt;lv_name&gt;opt_lv&lt;/lv_name&gt;
          &lt;mount&gt;/opt&lt;/mount&gt;
          &lt;size&gt;10G&lt;/size&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;reiser&lt;/filesystem&gt;
          &lt;lv_name&gt;var_lv&lt;/lv_name&gt;
          &lt;mount&gt;/var&lt;/mount&gt;
          &lt;size&gt;1G&lt;/size&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
      &lt;pesize&gt;4M&lt;/pesize&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;
</screen>
    </example>
    <para>
     It is possible to set the <literal>size</literal> to
     <literal>max</literal> for the logical volumes. Of course, you can only
     use <literal>max</literal> for one(!) logical volume. You cannot set
     two logical volumes in one volume group to <literal>max</literal>.
    </para>
   </sect2>

   <sect2 xml:id="ay.partition_sw_raid">
    <title>Software RAID</title>
    <para>
     Using &ay;, you can create and assemble software RAID devices. The
     supported RAID levels are the following:
    </para>
    <variablelist>
     <varlistentry>
      <term>RAID 0</term>
      <listitem>
       <para>
        This level increases your disk performance. There is
        <emphasis>no</emphasis> redundancy in this mode. If one of the
        drives crashes, data recovery will not be possible.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>RAID 1</term>
      <listitem>
       <para>
        This mode offers the best redundancy. It can be used with two or
        more disks. An exact copy of all data is maintained on all disks. As
        long as at least one disk is still working, no data is lost. The
        partitions used for this type of RAID should have approximately the
        same size.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>RAID 5</term>
      <listitem>
       <para>
        This mode combines management of a larger number of disks and still
        maintains some redundancy. This mode can be used on three disks or
        more. If one disk fails, all data is still intact. If two disks fail
        simultaneously, all data is lost.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Multipath</term>
      <listitem>
       <para>
        This mode allows access to the same physical device via multiple
        controllers for redundancy against a fault in a controller card.
        This mode can be used with at least two devices.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>
     As with LVM, you need to create all RAID partitions first and assign
     them to the RAID device you want to create afterward. Additionally you
     need to specify whether a partition or a device should be part of the
     RAID or if it should be a Spare device.
    </para>
    <para>
     The following example shows a simple RAID1 configuration:
    </para>
    <example>
     <title>RAID1 configuration</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;partition_id config:type="integer"&gt;253&lt;/partition_id&gt;
        &lt;format config:type="boolean"&gt;false&lt;/format&gt;
        &lt;raid_name&gt;/dev/md0&lt;/raid_name&gt;
        &lt;raid_type&gt;raid&lt;/raid_type&gt;
        &lt;size&gt;4G&lt;/size&gt;
      &lt;/partition&gt;

        &lt;!-- Insert a configuration for the regular partitions located on
                /dev/sda here (for example / and swap) --&gt;

    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;format config:type="boolean"&gt;false&lt;/format&gt;
        &lt;partition_id config:type="integer"&gt;253&lt;/partition_id&gt;
        &lt;raid_name&gt;/dev/md0&lt;/raid_name&gt;
        &lt;raid_type&gt;raid&lt;/raid_type&gt;
        &lt;size&gt;4gb&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/md&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;reiser&lt;/filesystem&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/space&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
        &lt;partition_nr config:type="integer"&gt;0&lt;/partition_nr&gt;
        &lt;raid_options&gt;
          &lt;chunk_size&gt;4&lt;/chunk_size&gt;
          &lt;parity_algorithm&gt;left-asymmetric&lt;/parity_algorithm&gt;
          &lt;raid_type&gt;raid1&lt;/raid_type&gt;
        &lt;/raid_options&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
    </example>
    <para>
     Keep the following in mind when configuring a RAID:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       The device for raid is always <literal>/dev/md</literal>
      </para>
     </listitem>
     <listitem>
      <para>
       The property <literal>partition_nr</literal> is used to determine the
       MD device number. If <literal>partition_nr</literal> is equal to 0,
       then <literal>/dev/md0</literal> is configured.
      </para>
     </listitem>
     <listitem>
      <para>
       All RAID-specific options are contained in the
       <literal>raid_options</literal> resource.
      </para>
     </listitem>
    </itemizedlist>
   </sect2>

   <sect2 xml:id="ay.partition_s390">
    <title>IBM &zseries; Specific Configuration</title>
    <para/>
    <sect3 xml:id="ay.partition_s390.dasd">
     <title>Configuring DASD Disks</title>
     <para>
      The elements listed below must be placed within the following XML
      structure:
     </para>
<screen>&lt;dasd&gt;
 &lt;devices config:type="list"&gt;
  &lt;listentry&gt;
   ...
  &lt;/listentry&gt;
 &lt;/devices&gt;
&lt;/dasd&gt;</screen>
     <para>
      tags in the &lt;profile&gt; section. Each disk needs to be
      configured in a separate &lt;listentry&gt; ...
      &lt;/listentry&gt; section.
     </para>
     <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Values
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>device</literal>
          </para>
         </entry>
         <entry>
          <para>
           <literal>DASD</literal> is the only value allowed
          </para>
<screen>&lt;device
&gt;DASD&lt;/dev_name&gt;</screen>
         </entry>
         <entry>
          <para/>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>dev_name</literal>
          </para>
         </entry>
         <entry>
          <para>
           The device (<literal>dasd<replaceable>n</replaceable></literal>)
           you want to configure in this section.
          </para>
<screen>&lt;dev_name
&gt;/dev/dasda&lt;/dev_name&gt;</screen>
         </entry>
         <entry>
          <para>
           Optional but recommended. If left out, &ay; tries to guess the
           device.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>channel</literal>
          </para>
         </entry>
         <entry>
          <para>
           Channel by which the disk is accessed.
          </para>
<screen>&lt;channel&gt;0.0.0150&lt;/channel&gt;</screen>
         </entry>
         <entry>
          <para>
           Mandatory.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>diag</literal>
          </para>
         </entry>
         <entry>
          <para>
           Enable or disable the use of <literal>DIAG</literal>. Possible
           values are <literal>true</literal> (enable) or
           <literal>false</literal> (disable).
          </para>
<screen>&lt;diag
config:type="boolean"&gt;true&lt;/diag&gt;</screen>
         </entry>
         <entry>
          <para>
           Optional.
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </informaltable>
    </sect3>
    <sect3 xml:id="ay.partition_s390.zfcp">
     <title>Configuring zFCP Disks</title>
     <para>
      The following elements must be placed within the following XML
      structure:
     </para>
<screen>&lt;profile&gt;
  &lt;zfcp&gt;
    &lt;devices config:type="list"&gt;
      &lt;listentry&gt;
        ...
      &lt;/listentry&gt;
    &lt;/devices&gt;
  &lt;/zfcp&gt;
&lt;profile&gt;</screen>
     <para>
      Each disk needs to be configured in a separate
      <literal>listentry</literal> section.
     </para>
     <informaltable>
      <tgroup cols="2">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Values
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>controller_id</literal>
          </para>
         </entry>
         <entry>
          <para>
           Channel number
          </para>
<screen>&lt;controller_id
&gt;0.0.fc00&lt;/controller_id&gt;</screen>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </informaltable>
    </sect3>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.Iscsi_client">
   <title>iSCSI Initiator Overview</title>
   <para>
    Using the <literal>iscsi-client</literal> resource, you can configure
    the target machine as an iSCSI client.
   </para>

   <example>
     <title>iSCSI client</title>
     <screen>
  &lt;iscsi-client&gt;
    &lt;initiatorname&gt;iqn.2013-02.de.suse:01:e229358d2dea&lt;/initiatorname&gt;
    &lt;targets config:type="list"&gt;
      &lt;listentry&gt;
         &lt;authmethod&gt;None&lt;/authmethod&gt;
         &lt;portal&gt;192.168.1.1:3260&lt;/portal&gt;
         &lt;startup&gt;onboot&lt;/startup&gt;
         &lt;target&gt;iqn.2001-05.com.doe:test&lt;/target&gt;
         &lt;iface&gt;default&lt;/iface&gt;
      &lt;/listentry&gt;
    &lt;/targets&gt;
    &lt;version&gt;1.0&lt;/version&gt;
  &lt;/iscsi-client&gt;
     </screen>
   </example>

   <informaltable>
      <tgroup cols="2">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           initiatorname
          </para>
         </entry>
         <entry>
          <para>
           <literal>InitiatorName</literal> is a value from
           <literal>/etc/iscsi/initiatorname.iscsi</literal>. In case you have iBFT,
           this value will be added from there and you are only able to change it in the BIOS setup.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           version
          </para>
         </entry>
         <entry>
          <para>
           Version of the &yast; module. Default: 1.0
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           targets
          </para>
         </entry>
         <entry>
          <para>
           List of targets. Each entry contains:
          </para>
          <para>
           <literal>authmethod</literal> Authentication method: None/CHAP
          </para>
          <para>
           <literal>portal</literal> Portal address
          </para>
          <para>
           <literal>startup</literal> Value: manual/onboot
          </para>
          <para>
           <literal>target</literal> Target name
          </para>
          <para>
           <literal>iface</literal> Interface name
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="CreateProfile.fcoe_client">
   <title>Fibre Channel over Ethernet Configuration (FCoE)</title>
   <para>
    Using the <literal>fcoe_cfg</literal> resource, you can configure
    a Fibre Channel over Ethernet (FCoE).
   </para>

   <example>
     <title>FCoE configuration</title>
     <screen>
  &lt;fcoe-client&gt;
    &lt;fcoe_cfg&gt;
      &lt;DEBUG&gt;no&lt;/DEBUG&gt;
      &lt;USE_SYSLOG&gt;yes&lt;/USE_SYSLOG&gt;
    &lt;/fcoe_cfg&gt;
    &lt;interfaces config:type="list"&gt;
      &lt;listentry&gt;
        &lt;dev_name&gt;eth3&lt;/dev_name&gt;
        &lt;mac_addr&gt;01:000:000:000:42:42&lt;/mac_addr&gt;
        &lt;device&gt;Gigabit 1313&lt;/device&gt;
        &lt;vlan_interface&gt;200&lt;/vlan_interface&gt;
        &lt;fcoe_vlan&gt;eth3.200&lt;/fcoe_vlan&gt;
        &lt;fcoe_enable&gt;yes&lt;/fcoe_enable&gt;
        &lt;dcb_required&gt;yes&lt;/dcb_required&gt;
        &lt;auto_vlan&gt;no&lt;/auto_vlan&gt;
        &lt;dcb_capable&gt;no&lt;/dcb_capable&gt;
        &lt;cfg_device&gt;eth3.200&lt;/cfg_device&gt;
      &lt;/listentry&gt;
    &lt;/interfaces&gt;
    &lt;service_start&gt;
      &lt;fcoe config:type="boolean"&gt;true&lt;/fcoe&gt;
      &lt;lldpad config:type="boolean"&gt;true&lt;/lldpad&gt;
    &lt;/service_start&gt;
  &lt;/fcoe-client&gt;
     </screen>
   </example>

   <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Values
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           fcoe_cfg
          </para>
         </entry>
         <entry>
          <para>
           <literal>DEBUG</literal> is used to enable or disable debugging
           messages from the fcoe service script and fcoemon.
          </para>
          <para>
           <literal>USE_SYSLOG</literal> messages are sent to the system log
           if set to yes (data are logged to /var/log/messages).
          </para>
         </entry>
         <entry>
          <para>
           yes/no
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           interfaces
          </para>
         </entry>
         <entry>
          <para>
           List of network cards including the status of VLAN and FCoE
           configuration.
          </para>
         </entry>
         <entry>
          <para>
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           service_start
          </para>
         </entry>
         <entry>
          <para>
           Enable or disable the start of the services fcoe and lldpad at
           boot time.
          </para>
          <para>
           Starting the service fcoe means starting the Fibre Channel over
           Ethernet service daemon fcoemon which controls the FCoE interfaces
           and establishes a connection with the daemon lldpad.
          </para>
          <para>
           The lldpad service provides the Link Layer Discovery Protocol agent
           daemon lldpad, which informs fcoemon about DCB
           (Data Center Bridging) features and configuration of the interfaces.
          </para>
         </entry>
         <entry>
          <para>
           yes/no
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="CreateProfile.Country">
   <title>Country Settings</title>
   <para>
    Language, timezone, and keyboard settings.
   </para>

   <example>
     <title>Language</title>
     <screen>
       &lt;language&gt;
         &lt;language&gt;en_GB&lt;/language&gt;
         &lt;languages&gt;de_DE,en_US&lt;/languages&gt;
       &lt;/language&gt;
     </screen>
   </example>

   <para>
   A list of available languages can be found under
   <literal>/usr/share/YaST2/data/languages</literal>
   </para>

   <informaltable>
      <tgroup cols="2">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           languages
          </para>
         </entry>
         <entry>
          <para>
           Primary language
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           language
          </para>
         </entry>
         <entry>
          <para>
           Secondary languages separated by commas
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
   </informaltable>

   <para>
    If the configured value for the primary language is unknown, it will be reset
    to the default, <literal>en_US</literal>.
   </para>

   <example>
     <title>Timezone</title>
     <screen>
       &lt;timezone&gt;
         &lt;hwclock&gt;UTC&lt;/hwclock&gt;
         &lt;timezone&gt;Europe/Berlin&lt;/timezone&gt;
       &lt;/timezone&gt;
     </screen>
   </example>

   <informaltable>
      <tgroup cols="2">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Values
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           hwclock
          </para>
         </entry>
         <entry>
          <para>
           localtime/UTC
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           timezone
          </para>
         </entry>
         <entry>
          <para>
           A list of available timezones can be found under
           <literal>/usr/share/YaST2/data/timezone_raw.ycp</literal>
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
   </informaltable>

   <example>
     <title>Keyboard</title>
     <screen>
       &lt;keyboard&gt;
         &lt;keymap&gt;german&lt;/keymap&gt;
       &lt;/keyboard&gt;
     </screen>
   </example>

  </sect1>

  <sect1 xml:id="CreateProfile.Software">
   <title>Software</title>

   <para>
    <remark role="fixme">Add a short description</remark>
   </para>

   <sect2 xml:id="Software.Selections.sles10">
    <title>Package Selection with Patterns</title>
    <para>
     Patterns are configured like this:
    </para>
    <example>
     <title>Package Selection in the Control File with Patterns</title>
<screen>&lt;software&gt;
  &lt;patterns config:type="list"&gt;
    &lt;pattern&gt;directory_server&lt;/pattern&gt;
  &lt;/patterns&gt;
  &lt;packages  config:type="list"&gt;
    &lt;package&gt;apache&lt;/package&gt;
    &lt;package&gt;postfix&lt;/package&gt;
  &lt;/packages&gt;
  &lt;do_online_update config:type="boolean"&gt;true&lt;/do_online_update&gt;
&lt;/software&gt;</screen>
    </example>
   </sect2>

   <sect2 xml:id="Software.Selections.images" os="osuse">
    <title>Deploying Images</title>
    <para>
     You can use images during installation to speed up the installation.
    </para>
    <example>
     <title>Activating Image Deployment</title>
<screen>&lt;!-- note! this is not in the software section! --&gt;
&lt;deploy_image&gt;
  &lt;image_installation config:type="boolean"&gt;false&lt;/image_installation&gt;
&lt;/deploy_image&gt;</screen>
    </example>
   </sect2>

   <sect2 xml:id="Software.Selections.additional">
    <title>Installing Additional and Customized Packages</title>
    <remark condition="clarity">
     2014-09-19 - fs: FIXME
     This section needs clarification. What is a provisioner file that is
     specified with -x, why only one data directory, etc.
    </remark>
    <para>
     In addition to the packages available for installation on the DVD-ROMs,
     you can add external packages including customized kernels. Customized
     kernel packages must be compatible to the &suse; packages and must
     install the kernel files to the same locations.
    </para>
    <para>
     Unlike in earlier in versions, you do not need a special resource in
     the control file to install custom and external packages. Instead you
     need to re-create the package database and update it with any new
     packages or new package versions in the source repository.
    </para>
    <para>
     A script is provided for this task which will query packages available
     in the repository and create the package database. Use the command
     <command>/usr/bin/create_package_descr</command>. When creating the
     database, all languages will be reset to English.
    </para>
    <example>
     <title>Creating Package Database</title>
<screen>cd /usr/local/DVDs/LATEST/suse
create_package_descr -x PATH_TO_EXTRA_PROV -d /usr/local/CDs/LATEST/suse</screen>
    </example>
    <para>
     In the above example, the directory
     <filename>/usr/local/CDs/LATEST/suse</filename> contains the
     architecture dependent (for example <literal>x86_64</literal>) and
     architecture independent packages (<literal>noarch</literal>). This
     might look different on other architectures.
    </para>
    <para>
     The advantage of this method is that you can keep an up-to-date
     repository with fixed and updated package. Additionally this method
     makes the creation of custom CD-ROMs easier.
    </para>
    <para>
     To add your own RPMs to an installation source (or a module such as the
     SDK), add a file <filename>add_on_products</filename> to the
     installation source.
    </para>
<screen>media_url [path_on_media [product_1 [product_2 [....]]]</screen>
    <para>
     <literal>media_url</literal> is the URL of the media,
     <literal>path_on_media</literal> is the path to the catalog on the
     media. If not present, / (root) is assumed.
     <literal>product_1</literal> and following are the names of products,
     which should be marked for installation. If no product is specified,
     all products found on the media are selected for installation. For
     example:
    </para>
<screen>http://192.168.66.6/SLES/sdk/DVD1
        http://192.168.66.6/SLES/DVD1/updates</screen>
    <para>
     As an alternative to adding the <filename>add_on_products</filename>
     file to the installation source, you can use the &ay; control file
     to specify modules, extensions and add-on products. For example:
    </para>
<screen>&lt;add-on&gt;
  &lt;add_on_products config:type="list"&gt;
    &lt;listentry&gt;
      &lt;media_url&gt;http://192.168.66.6/SLES/DVD1/updates&lt;/media_url&gt;
      &lt;product&gt;SLES_Updates&lt;/product&gt;
      &lt;alias&gt;SuSE-Updates&lt;/alias&gt;
      &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;priority config:type="integer"&gt;20&lt;/priority&gt;
      &lt;ask_on_error config:type="boolean"&gt;false&lt;/ask_on_error&gt;
      &lt;confirm_license config:type="boolean"&gt;false&lt;/confirm_license&gt;
      &lt;name&gt;MyUpdates&lt;/name&gt;
    &lt;/listentry&gt;
  &lt;/add_on_products&gt;
&lt;/add-on&gt;</screen>
    <para>
     &ay; can ask the user to make add-on products, modules or extension available instead of
     reporting a time-out error when no repository can be found at
     the given location. Set ask_on_error to <literal>true</literal> (the
     default is <literal>false</literal>).
    </para>
    <para>
     To use unsigned installation sources with &ay;, turn off
     the checks with the following configuration in your &ay; control
     file.
    </para>
    <para>
     The elements listed below must be placed within the following XML
     structure:
    </para>
<screen>&lt;general&gt;
  &lt;signature-handling&gt;
    ...
  &lt;/signature-handling&gt;
&lt;/general&gt;</screen>
    <para>
     Default values for all options are <literal>false</literal>. If an
     option is set to <literal>false</literal> and a package or repository
     fails the respective test, it is silently ignored and will not be
     installed. Note that setting any of these options to
     <literal>true</literal> is a potential security risk. Never do it when
     using packages or repositories from third party sources.
    </para>
    <informaltable>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>accept_unsigned_file</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, &ay; will accept unsigned
          files like the content file.
         </para>
<screen>&lt;accept_unsigned_file config:type="boolean"
&gt;true&lt;/accept_unsigned_file&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>accept_file_without_checksum</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, &ay; will accept files
          without a checksum in the content file.
         </para>
<screen>&lt;accept_file_without_checksum config:type="boolean"
&gt;true&lt;/accept_file_without_checksum&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>accept_verification_failed</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, &ay; will accept signed
          files even when the verification of the signature failed.
         </para>
<screen>&lt;accept_verification_failed config:type="boolean"
&gt;true&lt;/accept_verification_failed&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>accept_unknown_gpg_key</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, &ay; will accept new gpg
          keys of the installation sources, for example the key used to sign
          the content file.
         </para>
         <screen>&lt;accept_unknown_gpg_key config:type="boolean"
&gt;true&lt;/accept_unknown_gpg_key&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>accept_non_trusted_gpg_key</literal>
         </para>
        </entry>
        <entry>
         <para>
          Set this option to <literal>true</literal> to accept known keys you
          have not yet trusted.
         </para>
         <screen>&lt;accept_non_trusted_gpg_key config:type="boolean"
&gt;true&lt;/accept_non_trusted_gpg_key&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>import_gpg_key</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, &ay; will accept and import
          new gpg keys on the installation source in its database.
         </para>
         <screen>&lt;import_gpg_key config:type="boolean"
&gt;true&lt;/import_gpg_key&gt;</screen>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
    <para>
     It is possible to configure the signature handling for each add-on
     product, module, or extension individually. The following elements must
     be between the <literal>signature-handling</literal> section of the
     individual add-on product, module, or extension. All settings are
     optional. If not configured, the global signature-handling from the
     <literal>general</literal> section is used.
    </para>
    <informaltable>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>accept_unsigned_file</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, &ay; will accept unsigned
          files like the content file for this add-on product.
         </para>
         <screen>&lt;accept_unsigned_file config:type="boolean"
&gt;true&lt;/accept_unsigned_file&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>accept_file_without_checksum</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, &ay; will accept files
          without a checksum in the content file for this add-on.
         </para>
<screen>&lt;accept_file_without_checksum config:type="boolean"
&gt;true&lt;/accept_file_without_checksum&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>accept_verification_failed</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>true</literal>, &ay; will accept signed
          files even when the verification of the signature fails.
         </para>
<screen>&lt;accept_verification_failed config:type="boolean"
&gt;true&lt;/accept_verification_failed&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>accept_unknown_gpg_key</literal>
         </para>
        </entry>
        <entry>
         <para>
          If <literal>all</literal> is set to <literal>true</literal>, &ay; will accept new gpg
          keys on the installation source.
         </para>
<screen>&lt;accept_unknown_gpg_key&gt;
  &lt;all config:type="boolean"&gt;true&lt;/all&gt;
&lt;/accept_unknown_gpg_key&gt;</screen>
         <para>
          Otherwise you can define single keys too.
         </para>
<screen>&lt;accept_unknown_gpg_key&gt;
  &lt;all config:type="boolean"&gt;false&lt;/all&gt;
  &lt;keys config:type="list"&gt;
    &lt;keyid&gt;3B3011B76B9D6523&lt;/keyid&gt;
  &lt;/keys&gt;
&lt;/accept_unknown_gpg_key&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>accept_non_trusted_gpg_key</literal>
         </para>
        </entry>
        <entry>
         <para>
          This means, the key is known, but it is not trusted by you.
         </para>
         <para>
          You can trust all keys by adding:
         </para>
<screen>&lt;accept_non_trusted_gpg_key&gt;
  &lt;all config:type="boolean"&gt;true&lt;/all&gt;
&lt;/accept_non_trusted_gpg_key&gt;</screen>
         <para>
          Or you can trust specific keys:
         </para>
<screen>&lt;accept_non_trusted_gpg_key&gt;
  &lt;all config:type="boolean"&gt;false&lt;/all&gt;
  &lt;keys config:type="list"&gt;
    &lt;keyid&gt;3B3011B76B9D6523&lt;/keyid&gt;
  &lt;/keys&gt;
&lt;/accept_non_trusted_gpg_key&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>import_gpg_key</literal>
         </para>
        </entry>
        <entry>
         <para>
          If <literal>all</literal> is set to <literal>true</literal>, &ay; will accept and import
          all new gpg keys on the installation source into its database.
         </para>
<screen>&lt;import_gpg_key&gt;
  &lt;all config:type="boolean"&gt;true&lt;/all&gt;
&lt;/import_gpg_key&gt;</screen>
         <para>
          This can be done for specific keys only:
         </para>
<screen>&lt;import_gpg_key&gt;
  &lt;all config:type="boolean"&gt;false&lt;/all&gt;
  &lt;keys config:type="list"&gt;
    &lt;keyid&gt;3B3011B76B9D6523&lt;/keyid&gt;
  &lt;/keys&gt;
&lt;/import_gpg_key&gt;</screen>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="Software.Selections.kernel">
    <title>Kernel Packages</title>
    <para>
     Kernel packages are not part of any selection. The required kernel is
     determined during installation. If the kernel package is added to any
     selection or to the individual package selection, installation will
     mostly fail because of conflicts.
    </para>
    <para>
     To force the installation of a specific kernel, use the
     <literal>kernel</literal> property. The following is an example of
     forcing the installation of the default kernel. This kernel will be
     installed even if an SMP or other kernel is required.
    </para>
    <example>
     <title>Kernel Selection in the Control File</title>
<screen>&lt;software&gt;
  &lt;kernel&gt;kernel-default&lt;/kernel&gt;
  ...
&lt;/software&gt;</screen>
    </example>
   </sect2>

   <sect2 xml:id="Software.Selections.remove_packs">
    <title>Removing Automatically Selected Packages</title>
    <para>
     Some packages are selected automatically either because of a dependency
     or because it is available in a selection.
    </para>
    <para>
     Removing such packages might break the system consistency and it is not
     recommended to remove basic packages unless a replacement which
     provides the same services is provided. The best example for this case
     are mail transfer agent (MTA) packages. By default,
     <systemitem>postfix</systemitem> will be selected and installed. If you
     want to use another MTA like <systemitem>sendmail</systemitem>, then
     postfix can be removed from the list of selected package using a list
     in the software resource. However, note that sendmail is not shipped
     with &productname;. The following example shows how this can be
     done:
    </para>
    <example>
     <title>Package Selection in Control File</title>
<screen>&lt;software&gt;
  &lt;packages  config:type="list"&gt;
    &lt;package&gt;sendmail&lt;/package&gt;
  &lt;/packages&gt;
  &lt;remove-packages  config:type="list"&gt;
    &lt;package&gt;postfix&lt;/package&gt;
  &lt;/remove-packages&gt;
&lt;/software&gt;</screen>
    </example>

    <note>
     <title>Package Removal Failure</title>
     <para>
      Note that it is not possible to remove a package, that is part of a
      pattern (see <xref linkend="Software.Selections.sles10"/>).  When
      specifying such a package for removal, the installation will fail with
      the following error message:
     </para>
     <screen>The package resolver run failed. Check
      your software section in the &ay; profile.</screen>
    </note>

   </sect2>

   <sect2 xml:id="Software.Selections.recommend_packs">
    <title>Installing Recommended Packages/Patterns</title>
    <para>
     By default all recommended packages/patterns will be installed.
     If you want to have a minimal installation which includes required
     packages only, you can switch off this behavior with the flag
     <literal>install_recommended</literal>:
    </para>
<screen>&lt;software&gt;
  &lt;install_recommended config:type="boolean"&gt;false
  &lt;/install_recommended&gt;
&lt;/software&gt;</screen>

    <para>
     <emphasis>Default</emphasis>: If this flag has not been set in the configuration file <emphasis>all</emphasis>
     recommended <literal>packages</literal> and <emphasis>no</emphasis>
     recommended <literal>pattern</literal> will be installed.
    </para>

   </sect2>

   <sect2 xml:id="Software.Selections.stage2_packs">
    <title>Installing Packages in Stage 2</title>
    <para>
     If you want to install packages after the reboot during stage two,
     instead of during the normal installation process in stage one, you can
     use the <literal>post-packages</literal> element for that:
    </para>
<screen>&lt;software&gt;
  &lt;post-packages config:type="list"&gt;
    &lt;package&gt;yast2-cim&lt;/package&gt;
  &lt;/post-packages&gt;
&lt;/software&gt;</screen>
   </sect2>

   <sect2 xml:id="Software.Selections.stage2_patterns">
    <title>Installing Patterns in Stage 2</title>
    <para>
     You can also install patterns in stage 2. Use the
     <literal>post-patterns</literal> element for that:
    </para>
<screen>&lt;software&gt;
  &lt;post-patterns config:type="list"&gt;
    &lt;pattern&gt;apparmor&lt;/pattern&gt;
  &lt;/post-patterns&gt;
&lt;/software&gt;</screen>
   </sect2>

   <sect2 xml:id="Software.Selections.stage2_update">
    <title>Online Update in Stage 2</title>
    <para>
     You can perform an online update at the end of the installation. Set
     the boolean <literal>do_online_update</literal> to
     <literal>true</literal>. Of course this only makes sense if you add an
     online update repository in the suse-register/customer-center section,
     for example, or in a post-script. If the online update repository was
     already available in stage one via the add-on section, then &ay; has
     already installed the latest packages available. If a kernel update is
     done via online-update, a reboot at the end of stage two is triggered.
    </para>
<screen>&lt;software&gt;
  &lt;do_online_update config:type="boolean"&gt;true&lt;/do_online_update&gt;
&lt;/software&gt;</screen>
   </sect2>
  </sect1>


  <sect1 xml:id="CreateProfile.upgrade">
   <title>Upgrade</title>

   <para>
    &ay; can also be used for doing a system upgrade. Besides upgrade
    packages, the following sections are supported too:
   </para>

   <itemizedlist>
    <listitem>
     <para>
      <literal>scripts/pre-scripts</literal> Running user scripts very early, before anything else
      really happens.
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>add-on</literal> Defining an additional add-on product.
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>language</literal> Setting language.
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>timezone</literal> Setting timezone.
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>keyboard</literal> Setting keyboard.
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>software</literal> Installing additional software/patterns.
       Removing installed packages.
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>suse_register</literal> Running registration process.
     </para>
    </listitem>
   </itemizedlist>

   <para>
    In order to control the upgrade process the following sections can be defined:
   </para>

   <example>
    <title>Upgrade and Backup</title>
<screen>&lt;upgrade&gt;
    &lt;only_installed_packages config:type="boolean"&gt;true&lt;/only_installed_packages&gt;
    &lt;stop_on_solver_conflict config:type="boolean"&gt;true&lt;/stop_on_solver_conflict&gt;
  &lt;/upgrade&gt;
  &lt;backup&gt;
    &lt;sysconfig config:type="boolean"&gt;true&lt;/sysconfig&gt;
    &lt;modified config:type="boolean"&gt;true&lt;/modified&gt;
    &lt;remove_old config:type="boolean"&gt;true&lt;/remove_old&gt;
  &lt;/backup&gt;</screen>
   </example>

   <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          only_installed_packages
         </para>
        </entry>
        <entry>
         <para>
          Update only installed packages and do not add additional ones, for example recommendations.
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          stop_on_solver_conflict
         </para>
        </entry>
        <entry>
         <para>
          Halt installation if there are package dependency issues.
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          modified
         </para>
        </entry>
        <entry>
         <para>
          Create backup of modified files.
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          sysconfig
         </para>
        </entry>
        <entry>
         <para>
          Create backup of <filename>/etc/sysconfig</filename> directory.
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          remove_old
         </para>
        </entry>
        <entry>
         <para>
          Remove backups from previous updates.
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
      </tbody>
     </tgroup>
   </informaltable>

   <note>
    <title>Starting &ay; in upgrade mode</title>
    <para>
     In order to start the &ay; upgrade mode while booting the system you
     need to select the menu entry <literal>Installation</literal> and use the
     following boot parameters:
    </para>
    <screen>autoupgrade=1 autoyast=http://..</screen>

    <remark condition="clarity">
     2016-07-29 - fs: What about network setup with ifcfg= ?? Otherwise this
     command line won't work??
    </remark>

   </note>
  </sect1>

  <sect1 xml:id="CreateProfile.Services">
   <title>Services and Targets</title>

   <para>
    With the <literal>services-manager</literal> resource you can set the
    default systemd target and specify in detail which system services you
    want to start or deactivate.
   </para>

   <para>
    The <literal>default-target</literal> property specifies the default
    systemd target into which the system boots. Valid options are
    <literal>graphical</literal> for a graphical login, or
    <literal>multi-user</literal> for a console login.
   </para>

   <para>
    The &lt;enable config:type="list"&gt; and &lt;disable
    config:type="list"&gt; let you explicitly enable or disable services.
   </para>

   <example>
    <title>Configuring Services and Targets</title>
<screen>&lt;services-manager&gt;
  &lt;default_target&gt;multi-user&lt;/default_target&gt;
  &lt;services&gt;
    &lt;disable config:type="list"&gt;
      &lt;service&gt;cups&lt;/service&gt;
    &lt;/disable&gt;
    &lt;enable config:type="list"&gt;
      &lt;service&gt;sshd&lt;/service&gt;
    &lt;/enable&gt;
  &lt;/services&gt;
&lt;/services-manager&gt;</screen>
   </example>
  </sect1>

  <sect1 xml:id="CreateProfile.Network">
   <title>Network Configuration</title>

   <para>
    Network configuration is used to connect a single workstation to an
    Ethernet-based LAN or to configure a dial-up connection. More complex
    configurations (multiple network cards, routing, etc.) are also
    provided.
   </para>

   <para>
    If the following setting is set to <literal>true</literal> &yast;
    will keep network settings created during the installation (via Linuxrc)
    and/or merge it with network settings from the &ay; control file (if
    defined). &ay; settings have higher priority than already present
    configuration files. &yast; will write ifcfg-* files based on the
    entries in the control file without removing old ones. If there is an
    empty or no dns and routing section, &yast; will keep already
    existing values. Otherwise settings from the control file will be
    applied.
   </para>

<screen>&lt;keep_install_network
config:type="boolean"&gt;true&lt;/keep_install_network&gt;</screen>

   <para>
    During the second stage, installation of additional packages will take
    place before the network, as described in the profile, is configured.
    <literal>keep_install_network</literal> is set by default to
    <literal>true</literal> to ensure that a network is available
    in case it is needed to install those packages. If all packages
    are installed during the first stage and the network is not needed early
    during the second one, setting <literal>keep_install_network</literal>
    to <literal>false</literal> will avoid copying the configuration.
   </para>

   <para>
    To configure network settings and activate networking automatically, one
    global resource is used to store the whole network configuration.
   </para>

   <example xml:id="ex.ay.network_config.general">
    <title>Network configuration</title>
<screen>&lt;networking&gt;
  &lt;dns&gt;
    &lt;dhcp_hostname config:type="boolean"&gt;true&lt;/dhcp_hostname&gt;
    &lt;domain&gt;site&lt;/domain&gt;
    &lt;hostname&gt;linux-bqua&lt;/hostname&gt;
    &lt;nameservers config:type="list"&gt;
      &lt;nameserver&gt;&dnsip;&lt;/nameserver&gt;
      &lt;nameserver&gt;&dnsip117;&lt;/nameserver&gt;
      &lt;nameserver&gt;&dnsip118;&lt;/nameserver&gt;
    &lt;/nameservers&gt;
    &lt;resolv_conf_policy&gt;auto&lt;/resolv_conf_policy&gt;
    &lt;searchlist config:type="list"&gt;
      &lt;search&gt;&exampledomain;&lt;/search&gt;
      &lt;search&gt;&exampledomain1;&lt;/search&gt;
    &lt;/searchlist&gt;
    &lt;write_hostname config:type="boolean"&gt;false&lt;/write_hostname&gt;
  &lt;/dns&gt;
  &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;
      &lt;bootproto&gt;dhcp&lt;/bootproto&gt;
      &lt;device&gt;eth0&lt;/device&gt;
      &lt;startmode&gt;auto&lt;/startmode&gt;
    &lt;/interface&gt;
    &lt;interface&gt;
      &lt;bootproto&gt;static&lt;/bootproto&gt;
      &lt;broadcast&gt;127.255.255.255&lt;/broadcast&gt;
      &lt;device&gt;lo&lt;/device&gt;
      &lt;firewall&gt;no&lt;/firewall&gt;
      &lt;ipaddr&gt;127.0.0.1&lt;/ipaddr&gt;
      &lt;netmask&gt;255.0.0.0&lt;/netmask&gt;
      &lt;network&gt;127.0.0.0&lt;/network&gt;
      &lt;prefixlen&gt;8&lt;/prefixlen&gt;
      &lt;startmode&gt;nfsroot&lt;/startmode&gt;
      &lt;usercontrol&gt;no&lt;/usercontrol&gt;
    &lt;/interface&gt;
  &lt;/interfaces&gt;
  &lt;ipv6 config:type="boolean"&gt;true&lt;/ipv6&gt;
  &lt;keep_install_network config:type="boolean"&gt;false&lt;/keep_install_network&gt;
  &lt;managed config:type="boolean"&gt;false&lt;/managed&gt;       ###### NetworkManager?
  &lt;net-udev config:type="list"&gt;
    &lt;rule&gt;
      &lt;name&gt;eth0&lt;/name&gt;
      &lt;rule&gt;ATTR{address}&lt;/rule&gt;
      &lt;value&gt;&wsImac;&lt;/value&gt;
    &lt;/rule&gt;
  &lt;/net-udev&gt;
  &lt;s390-devices config:type="list"&gt;
    &lt;listentry&gt;
      &lt;chanids&gt;0.0.0800 0.0.0801 0.0.0802&lt;/chanids&gt;
      &lt;type&gt;qeth&lt;/type&gt;
    &lt;/listentry&gt;
  &lt;/s390-devices&gt;
  &lt;routing&gt;
    &lt;ipv4_forward config:type="boolean"&gt;false&lt;/ipv4_forward&gt;
    &lt;ipv6_forward config:type="boolean"&gt;false&lt;/ipv6_forward&gt;
    &lt;routes config:type="list"&gt;
      &lt;route&gt;
        &lt;destination&gt;&routerintipII;&lt;/destination&gt;
        &lt;device&gt;eth0&lt;/device&gt;
        &lt;extrapara&gt;foo&lt;/extrapara&gt;
        &lt;gateway&gt;-&lt;/gateway&gt;
        &lt;netmask&gt;-&lt;/netmask&gt;
      &lt;/route&gt;
      &lt;route&gt;
        &lt;destination&gt;default&lt;/destination&gt;
        &lt;device&gt;eth0&lt;/device&gt;
        &lt;gateway&gt;&routerintipI;&lt;/gateway&gt;
        &lt;netmask&gt;-&lt;/netmask&gt;
      &lt;/route&gt;
      &lt;route&gt;
        &lt;destination&gt;default&lt;/destination&gt;
        &lt;device&gt;lo&lt;/device&gt;
        &lt;gateway&gt;&gateip;&lt;/gateway&gt;
        &lt;netmask&gt;-&lt;/netmask&gt;
      &lt;/route&gt;
    &lt;/routes&gt;
  &lt;/routing&gt;
&lt;/networking&gt;</screen>
   </example>

   <example xml:id="ex.ay.network_config.bridge">
     <title>Bridge Interface Configuration</title>
<screen>
&lt;interfaces config:type="list"&gt;
  &lt;interface&gt;
    &lt;device&gt;br0&lt;/device&gt;
    &lt;bootproto&gt;static&lt;/bootproto&gt;
    &lt;bridge&gt;yes&lt;/bridge&gt;
    &lt;bridge_forwarddelay&gt;0&lt;/bridge_forwarddelay&gt;
    &lt;bridge_ports&gt;eth0 eth1&lt;/bridge_ports&gt;
    &lt;bridge_stp&gt;off&lt;/bridge_stp&gt;
    &lt;ipaddr&gt;192.168.122.100&lt;/ipaddr&gt;
    &lt;netmask&gt;255.255.255.0&lt;/netmask&gt;
    &lt;network&gt;192.168.122.0&lt;/network&gt;
    &lt;prefixlen&gt;24&lt;/prefixlen&gt;
    &lt;startmode&gt;auto&lt;/startmode&gt;
  &lt;/interface&gt;
  &lt;interface&gt;
    &lt;device&gt;eth0&lt;/device&gt;
    &lt;bootproto&gt;none&lt;/bootproto&gt;
    &lt;startmode&gt;hotplug&lt;/startmode&gt;
  &lt;/interface&gt;
  &lt;interface&gt;
    &lt;device&gt;eth1&lt;/device&gt;
    &lt;bootproto&gt;none&lt;/bootproto&gt;
    &lt;startmode&gt;hotplug&lt;/startmode&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;
</screen>
   </example>

   <tip>
    <title>IPv6 Address Support</title>
    <para>
     Using IPv6 addresses in &ay; is fully supported. To disable IPv6
     Address Support, set &lt;ipv6
     config:type="boolean"&gt;false&lt;/ipv6&gt;
    </para>
   </tip>

   <sect2 xml:id="CreateProfile.Network.names">
    <title>Persistent Names of Network Interfaces</title>
    <para>
     The following elements must be between the
     &lt;net-udev&gt;...&lt;/net-udev&gt; tags.
    </para>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          name
         </para>
        </entry>
        <entry>
         <para>
          Network interface name, for example <literal>eth3</literal>
         </para>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          rule
         </para>
        </entry>
        <entry>
         <para>
          <literal>ATTR{address}</literal> for a MAC based rule,
          <literal>KERNELS</literal> for a bus ID based rule
         </para>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          value
         </para>
        </entry>
        <entry>
         <para>
          for example <literal>f0:de:f1:6b:da:69</literal> for a MAC rule,
          <literal>0000:00:1c.1 or 0.0.0700</literal> for a bus ID rule
         </para>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="CreateProfile.Network.s390">
    <title>s390 Devices</title>
    <para>
     The following elements must be between the
     &lt;s390-devices&gt;...&lt;/s390-devices&gt; tags.
    </para>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          type
         </para>
        </entry>
        <entry>
         <para>
          qeth, ctc or iucv
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          chanids
         </para>
        </entry>
        <entry>
         <para>
          channel ids separated by spaces
         </para>
<screen>&lt;chanids&gt;0.0.0700 0.0.0701 0.0.0702&lt;/chanids&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          layer2
         </para>
        </entry>
        <entry>
         <para/>
<screen>&lt;layer2 config:type="boolean"&gt;true&lt;/layer2&gt;</screen>
        </entry>
        <entry>
         <para>
          boolean; default: false
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          portname
         </para>
        </entry>
        <entry>
         <para>
          QETH port name (deprecated since <phrase os="sles;sled">SLE 12
          SP2</phrase><phrase os="osuse">openSUSE 42.2</phrase>)
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          protocol
         </para>
        </entry>
        <entry>
         <para>
          CTC / LCS protocol, a small number (as a string)
         </para>
<screen>&lt;protocol&gt;1&lt;/protocol&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          router
         </para>
        </entry>
        <entry>
         <para>
          IUCV router/user
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="Configuration.Network.Proxy">
    <title>Proxy</title>
    <para>
     Configure your Internet proxy (caching) settings.
    </para>
    <para>
     Configure proxies for HTTP and FTP with <literal>http_proxy</literal>
     and <literal>ftp_proxy</literal>, respectively. Addresses or names that
     should be directly accessible need to be specified with
     <literal>no_proxy</literal> (space separated values). If you are using
     a proxy server with authorization, fill in
     <literal>proxy_user</literal> and <literal>proxy_password</literal>,
    </para>
    <example>
     <title>Network configuration: Proxy</title>
<screen>&lt;proxy&gt;
  &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
  &lt;ftp_proxy&gt;http://192.168.1.240:3128&lt;/ftp_proxy&gt;
  &lt;http_proxy&gt;http://192.168.1.240:3128&lt;/http_proxy&gt;
  &lt;no_proxy&gt;www.&exampledomain; .&exampledomain2; localhost&lt;/no_proxy&gt;
  &lt;proxy_password&gt;testpw&lt;/proxy_password&gt;
  &lt;proxy_user&gt;testuser&lt;/proxy_user&gt;
&lt;/proxy&gt;</screen>
    </example>
   </sect2>

   <sect2 xml:id="Configuration.Network.Inetd">
    <title>(X)Inetd</title>
    <para>
     The control file has elements to specify which superserver should be
     used (netd_service), whether it should be enabled (netd_status) and how
     the services should be configured (netd_conf).
    </para>
    <para>
     A service description element needs two parts: key and non-key. When
     writing the configuration, services are matched using the key fields;
     to the matching service, non-key fields are applied. If no service
     matches, it is created. If more services match, a warning is reported.
     The key fields are <emphasis>script, service, protocol and
     server.</emphasis>
    </para>
    <para>
     <emphasis>service</emphasis> and <emphasis>protocol</emphasis> are
     matched literally. <emphasis>script</emphasis> is the base name of the
     configuration file: usually a file in<filename>
     /etc/xinetd.d</filename>, for example "echo-udp", or "inetd.conf". For
     compatibility with 8.2, <emphasis>server</emphasis> is matched more
     loosely: if it is <filename>/usr/sbin/tcpd</filename>, the real server
     name is taken from <emphasis>server_args</emphasis>. After that, the
     basename of the first whitespace-separated word is taken and these
     values are compared.
    </para>

    <example>
     <title>Inetd Example</title>
<screen>&lt;profile&gt;
  &lt;inetd&gt;
    &lt;netd_service config:type="symbol"&gt;xinetd&lt;/netd_service&gt;
    &lt;netd_status config:type="integer"&gt;0&lt;/netd_status&gt;
    &lt;netd_conf config:type="list"&gt;
      &lt;conf&gt;
        &lt;script&gt;imap&lt;/script&gt;
        &lt;service&gt;pop3&lt;/service&gt;
        &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
      &lt;/conf&gt;
      &lt;conf&gt;
        &lt;server&gt;in.ftpd&lt;/server&gt;
        &lt;server_args&gt;-A&lt;/server_args&gt;
        &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
      &lt;/conf&gt;
      &lt;conf&gt;
        &lt;service&gt;daytime&lt;/service&gt;
        &lt;protocol&gt;tcp&lt;/protocol&gt;
      &lt;/conf&gt;
      &lt;conf&gt;...&lt;/conf&gt;
    &lt;/netd_conf&gt;
  &lt;/inetd&gt;
&lt;/profile&gt;</screen>
    </example>
   </sect2>
  </sect1>
  <sect1 xml:id="Configuration.Network.NIS">
   <title>NIS Client</title>

   <para>
    Using the <literal>nis</literal> resource, you can configure the target
    machine as a NIS client. The following example shows a detailed
    configuration using multiple domains.
   </para>

   <example>
    <title>Network configuration: NIS</title>
<screen> &lt;nis&gt;
  &lt;nis_broadcast config:type="boolean"&gt;true&lt;/nis_broadcast&gt;
  &lt;nis_broken_server config:type="boolean"&gt;true&lt;/nis_broken_server&gt;
  &lt;nis_by_dhcp config:type="boolean"&gt;false&lt;/nis_by_dhcp&gt;
  &lt;nis_domain&gt;test.com&lt;/nis_domain&gt;
  &lt;nis_local_only config:type="boolean"&gt;true&lt;/nis_local_only&gt;
  &lt;nis_options&gt;&lt;/nis_options&gt;
  &lt;nis_other_domains config:type="list"&gt;
    &lt;nis_other_domain&gt;
      &lt;nis_broadcast config:type="boolean"&gt;false&lt;/nis_broadcast&gt;
      &lt;nis_domain&gt;domain.com&lt;/nis_domain&gt;
      &lt;nis_servers config:type="list"&gt;
        &lt;nis_server&gt;10.10.0.1&lt;/nis_server&gt;
      &lt;/nis_servers&gt;
    &lt;/nis_other_domain&gt;
  &lt;/nis_other_domains&gt;
  &lt;nis_servers config:type="list"&gt;
    &lt;nis_server&gt;192.168.1.1&lt;/nis_server&gt;
  &lt;/nis_servers&gt;
  &lt;start_autofs config:type="boolean"&gt;true&lt;/start_autofs&gt;
  &lt;start_nis config:type="boolean"&gt;true&lt;/start_nis&gt;
&lt;/nis&gt;</screen>
   </example>
  </sect1>

  <sect1 xml:id="Configuration.Network.NIS_Server">
   <title>NIS Server</title>

   <para>
    You can configure the target machine as a NIS server.
    NIS Master Server and NIS Slave Server and a combination of both are available.
   </para>

   <example>
    <title>NIS Server Configuration</title>
<screen>
  &lt;nis_server&gt;
    &lt;domain&gt;mydomain.de&lt;/domain&gt;
    &lt;maps_to_serve config:type="list"&gt;
      &lt;nis_map&gt;auto.master&lt;/nis_map&gt;
      &lt;nis_map&gt;ethers&lt;/nis_map&gt;
    &lt;/maps_to_serve&gt;
    &lt;merge_passwd config:type="boolean"&gt;false&lt;/merge_passwd&gt;
    &lt;mingid config:type="integer"&gt;0&lt;/mingid&gt;
    &lt;minuid config:type="integer"&gt;0&lt;/minuid&gt;
    &lt;nopush config:type="boolean"&gt;false&lt;/nopush&gt;
    &lt;pwd_chfn config:type="boolean"&gt;false&lt;/pwd_chfn&gt;
    &lt;pwd_chsh config:type="boolean"&gt;false&lt;/pwd_chsh&gt;
    &lt;pwd_srcdir&gt;/etc&lt;/pwd_srcdir&gt;
    &lt;securenets config:type="list"&gt;
      &lt;securenet&gt;
        &lt;netmask&gt;255.0.0.0&lt;/netmask&gt;
        &lt;network&gt;127.0.0.0&lt;/network&gt;
      &lt;/securenet&gt;
    &lt;/securenets&gt;
    &lt;server_type&gt;master&lt;/server_type&gt;
    &lt;slaves config:type="list"/&gt;
    &lt;start_ypbind config:type="boolean"&gt;false&lt;/start_ypbind&gt;
    &lt;start_yppasswdd config:type="boolean"&gt;false&lt;/start_yppasswdd&gt;
    &lt;start_ypxfrd config:type="boolean"&gt;false&lt;/start_ypxfrd&gt;
  &lt;/nis_server&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>domain</literal>
        </para>
       </entry>
       <entry>
        <para>
         NIS domain name.
        </para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>maps_to_serve</literal>
        </para>
       </entry>
       <entry>
        <para>
         List of maps which are available for the server.
        </para>
       </entry>
       <entry>
        <para>
        Values: auto.master, ethers, group, hosts, netgrp, networks, passwd, protocols, rpc, services, shadow
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>merge_passwd</literal>
        </para>
       </entry>
       <entry>
        <para>
         Select if your passwd file should be merged with the shadow file (only possible if the shadow file exists).
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>mingid</literal>
        </para>
       </entry>
       <entry>
        <para>
         Minimum GID to include in the user maps.
        </para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>minuid</literal>
        </para>
       </entry>
       <entry>
        <para>
         Minimum UID to include in the user maps.
        </para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>nopush</literal>
        </para>
       </entry>
       <entry>
        <para>
         Do not push the changes to slave servers. (useful if there are not
         any).
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>pwd_chfn</literal>
        </para>
       </entry>
       <entry>
        <para>
         YPPWD_CHFN - allow changing the full name
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>pwd_chsh</literal>
        </para>
       </entry>
       <entry>
        <para>
         YPPWD_CHSH - allow changing the login shell
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>pwd_srcdir</literal>
        </para>
       </entry>
       <entry>
        <para>
         YPPWD_SRCDIR - source directory for passwd data
        </para>
       </entry>
       <entry>
        <para>
         Default: <filename>/etc</filename>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>securenets</literal>
        </para>
       </entry>
       <entry>
        <para>
         List of allowed hosts to query the NIS server
        </para>
       </entry>
       <entry>
        <para>
         <remark>Dublin proofreader 2016-09-06: This does not make sense in
          the context of the sentence, however I am not sure of the intended
          meaning. Please revise.</remark>
         A host address will be allowed if network is equal to the bitwise
         AND of the host's address and the netmask.
        </para>
        <para>
         The entry with netmask 255.0.0.0 and network 127.0.0.0 must exist
         to allow connections from the local host.
        </para>
        <para>
         Entering netmask 0.0.0.0 and network 0.0.0.0 gives access to all hosts.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>server_type</literal>
        </para>
       </entry>
       <entry>
        <para>
         Select whether to configure the NIS server as a master or a slave or not to configure a NIS server.
        </para>
       </entry>
       <entry>
        <para>
         Values: master, slave, none
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>slaves</literal>
        </para>
       </entry>
       <entry>
        <para>
         List of host names to configure as NIS server slaves.
        </para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>start_ypbind</literal>
        </para>
       </entry>
       <entry>
        <para>
         This host is also a NIS client (only when client is configured locally).
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>start_yppasswdd</literal>
        </para>
       </entry>
       <entry>
        <para>
         Also start the password daemon.
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>start_ypxfrd</literal>
        </para>
       </entry>
       <entry>
        <para>
         Also start the map transfer daemon. Fast Map distribution; it will speed up the transfer of maps to the slaves.
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>

<!--
    <section id="Configuration.Network.NISplus">
    <title>
    NIS+
  </title>
    <para>
    If you activate NIS+, the data of the
    NIS+ Server will be added to <filename>/etc/hosts</filename>. Keyserv and the NIS+ cache manager
    will be started and the NSS and PAM configuration will be modified to use
    NIS+ and set the Secret Key of a user.
  </para>
    &example.nisplus;
  </section>
    -->

  <sect1 xml:id="Configuration.Network.Ldap">
   <title>LDAP Server (Authentication Server)</title>

   <para>
    Using the <literal>auth-server</literal> resource, you can configure the
    target machine as an LDAP server. The following example shows a detailed
    configuration.
   </para>

   <example>
    <title>LDAP configuration</title>
    <screen>
  &lt;auth-server&gt;
    &lt;daemon&gt;
      &lt;listeners config:type="list"&gt;
        &lt;listentry&gt;ldap&lt;/listentry&gt;
        &lt;listentry&gt;ldapi&lt;/listentry&gt;
      &lt;/listeners&gt;
      &lt;serviceEnabled&gt;1&lt;/serviceEnabled&gt;
      &lt;slp/&gt;
    &lt;/daemon&gt;
    &lt;databases config:type="list"&gt;
      &lt;listentry&gt;
        &lt;access config:type="list"&gt;
          &lt;listentry&gt;
            &lt;access config:type="list"&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;write&lt;/level&gt;
                &lt;type&gt;self&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;auth&lt;/level&gt;
                &lt;type&gt;*&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
            &lt;/access&gt;
            &lt;target&gt;
              &lt;attrs&gt;userPassword&lt;/attrs&gt;
            &lt;/target&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;access config:type="list"&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;write&lt;/level&gt;
                &lt;type&gt;self&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;read&lt;/level&gt;
                &lt;type&gt;*&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
            &lt;/access&gt;
            &lt;target&gt;
              &lt;attrs&gt;shadowLastChange&lt;/attrs&gt;
            &lt;/target&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;access config:type="list"&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;read&lt;/level&gt;
                &lt;type&gt;self&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;none&lt;/level&gt;
                &lt;type&gt;*&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
            &lt;/access&gt;
            &lt;target&gt;
              &lt;attrs&gt;userPKCS12&lt;/attrs&gt;
            &lt;/target&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;access config:type="list"&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;read&lt;/level&gt;
                &lt;type&gt;*&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
            &lt;/access&gt;
            &lt;target/&gt;
          &lt;/listentry&gt;
        &lt;/access&gt;
        &lt;checkpoint config:type="list"&gt;
          &lt;listentry&gt;1024&lt;/listentry&gt;
          &lt;listentry&gt;5&lt;/listentry&gt;
        &lt;/checkpoint&gt;
        &lt;directory&gt;/var/lib/ldap&lt;/directory&gt;
        &lt;entrycache&gt;10000&lt;/entrycache&gt;
        &lt;idlcache&gt;30000&lt;/idlcache&gt;
        &lt;indexes&gt;
          &lt;cn&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/cn&gt;
          &lt;displayName&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/displayName&gt;
          &lt;gidNumber&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/gidNumber&gt;
          &lt;givenName&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/givenName&gt;
          &lt;mail&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/mail&gt;
          &lt;member&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/member&gt;
          &lt;memberUid&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/memberUid&gt;
          &lt;objectclass&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/objectclass&gt;
          &lt;sn&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/sn&gt;
          &lt;uid&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/uid&gt;
          &lt;uidNumber&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/uidNumber&gt;
        &lt;/indexes&gt;
        &lt;rootdn&gt;cn=Administrator,DC=corp,DC=Fabrikam,DC=COM,CN=Karen Berge&lt;/rootdn&gt;
        &lt;rootpw&gt;{SSHA}LCdgE3gNejqBogGI3ac1Xf4DOIVMSk9ZQg==&lt;/rootpw&gt;
        &lt;suffix&gt;DC=corp,DC=Fabrikam,DC=COM,CN=Karen Berge&lt;/suffix&gt;
        &lt;type&gt;hdb&lt;/type&gt;
      &lt;/listentry&gt;
    &lt;/databases&gt;
    &lt;globals&gt;
      &lt;allow config:type="list"/&gt;
      &lt;disallow config:type="list"/&gt;
      &lt;loglevel config:type="list"&gt;
        &lt;listentry&gt;none&lt;/listentry&gt;
      &lt;/loglevel&gt;
      &lt;tlsconfig&gt;
        &lt;caCertDir/&gt;
        &lt;caCertFile/&gt;
        &lt;certFile/&gt;
        &lt;certKeyFile/&gt;
        &lt;crlCheck&gt;0&lt;/crlCheck&gt;
        &lt;crlFile/&gt;
        &lt;verifyClient&gt;0&lt;/verifyClient&gt;
      &lt;/tlsconfig&gt;
    &lt;/globals&gt;
    &lt;schema config:type="list"&gt;
      &lt;listentry&gt;
        &lt;definition&gt;dn: cn=schema,cn=config
            objectClass: olcSchemaConfig
            ......
            .....
            ....
            ...
            ..
            .
        &lt;/definition&gt;
        &lt;name&gt;schema&lt;/name&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeldif&gt;/etc/openldap/schema/core.ldif&lt;/includeldif&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeldif&gt;/etc/openldap/schema/cosine.ldif&lt;/includeldif&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeldif&gt;/etc/openldap/schema/inetorgperson.ldif&lt;/includeldif&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeschema&gt;/etc/openldap/schema/rfc2307bis.schema&lt;/includeschema&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeschema&gt;/etc/openldap/schema/yast.schema&lt;/includeschema&gt;
      &lt;/listentry&gt;
    &lt;/schema&gt;
  &lt;/auth-server&gt;
    </screen>
   </example>
  </sect1>

  <sect1 xml:id="Configuration.Network.Samba_client">
   <title>Windows Domain Membership</title>

   <para>
    Using the <literal>samba-client</literal> resource, you can configure a
    membership of a workgroup, NT domain, or Active Directory domain.
   </para>

   <example>
    <title>Samba Client configuration</title>
<screen>
  &lt;samba-client&gt;
    &lt;disable_dhcp_hostname config:type="boolean"&gt;true&lt;/disable_dhcp_hostname&gt;
    &lt;global&gt;
      &lt;security&gt;domain&lt;/security&gt;
      &lt;usershare_allow_guests&gt;No&lt;/usershare_allow_guests&gt;
      &lt;usershare_max_shares&gt;100&lt;/usershare_max_shares&gt;
      &lt;workgroup&gt;WORKGROUP&lt;/workgroup&gt;
    &lt;/global&gt;
    &lt;winbind config:type="boolean"&gt;false&lt;/winbind&gt;
  &lt;/samba-client&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>disable_dhcp_hostname</literal>
        </para>
       </entry>
       <entry>
        <para>
         Do not allow DHCP to change the host name.
        </para>
       </entry>
       <entry>
        <para>
        Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>global/security</literal>
        </para>
       </entry>
       <entry>
        <para>
         Kind of authentication regime (domain technology or Active Directory server (ADS)).
        </para>
       </entry>
       <entry>
        <para>
        Value: ADS/domain
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>global/usershare_allow_guests</literal>
        </para>
       </entry>
       <entry>
        <para>
         Sharing guest access is allowed.
        </para>
       </entry>
       <entry>
        <para>
        Value: No/Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>global/usershare_max_shares</literal>
        </para>
       </entry>
       <entry>
        <para>
         Max. number of shares from <filename>smb.conf</filename>.
        </para>
       </entry>
       <entry>
        <para>
         0 means that shares are not enabled.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>global/workgroup</literal>
        </para>
       </entry>
       <entry>
        <para>
         Workgroup or domain name.
        </para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>winbind</literal>
        </para>
       </entry>
       <entry>
        <para>
         Using winbind.
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="Configuration.Network.Samba_server">
   <title>Samba Server</title>

   <para>
    Configuration of a simple Samba server.
   </para>

   <example>
    <title>Samba Server configuration</title>
<screen>
  &lt;samba-server&gt;
    &lt;accounts config:type="list"/&gt;
    &lt;backend/&gt;
    &lt;config config:type="list"&gt;
      &lt;listentry&gt;
        &lt;name&gt;global&lt;/name&gt;
        &lt;parameters&gt;
          &lt;security&gt;domain&lt;/security&gt;
          &lt;usershare_allow_guests&gt;No&lt;/usershare_allow_guests&gt;
          &lt;usershare_max_shares&gt;100&lt;/usershare_max_shares&gt;
          &lt;workgroup&gt;WORKGROUP&lt;/workgroup&gt;
        &lt;/parameters&gt;
      &lt;/listentry&gt;
    &lt;/config&gt;
    &lt;service&gt;Disabled&lt;/service&gt;
    &lt;trustdom/&gt;
    &lt;version&gt;2.11&lt;/version&gt;
  &lt;/samba-server&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>accounts</literal>
        </para>
       </entry>
       <entry>
        <para>
         List of Samba accounts.
        </para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>backend</literal>
        </para>
       </entry>
       <entry>
        <para>
         List of available back-ends
        </para>
       </entry>
       <entry>
        <para>
        Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>config</literal>
        </para>
       </entry>
       <entry>
        <para>
         Setting additional user defined parameters in <filename>/etc/samba/smb.conf</filename>.
        </para>
       </entry>
       <entry>
        <para>
        The example shows parameters in the <literal>global</literal> section of <filename>/etc/samba/smb.conf</filename>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>service</literal>
        </para>
       </entry>
       <entry>
        <para>
         Samba service starts during boot.
        </para>
       </entry>
       <entry>
        <para>
         Value: Enabled/Disabled
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>trustdom/</literal>
        </para>
       </entry>
       <entry>
        <para>
         Trusted Domains.
        </para>
       </entry>
       <entry>
        <para>
         A map of two maps (keys: <literal>establish, revoke</literal>). Each map contains entries in the format key: domainname value: password.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>version</literal>
        </para>
       </entry>
       <entry>
        <para>
         Samba version.
        </para>
       </entry>
       <entry>
        <para>
         Default: 2.11
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="Configuration.Network.Auth">
   <title>Authentication Client</title>

   <para>
    The following is a simple example for an LDAP user authentication. NSS
    and PAM will automatically be configured accordingly. Required data are
    the name of the search base (base DN, for example,
    <literal>dc=mydomain,dc=com</literal>) and the IP address of the LDAP
    server.
   </para>

   <example>
    <title>Network configuration: Authentication Client</title>
<screen>&lt;auth-client&gt;
  &lt;sssd&gt;yes&lt;/sssd&gt;
  &lt;nssldap&gt;no&lt;/nssldap&gt;
  &lt;sssd_conf&gt;
    &lt;sssd&gt;
      &lt;config_file_version&gt;2&lt;/config_file_version&gt;
      &lt;services&gt;nss, pam, sudo&lt;/services&gt;
      &lt;domains&gt;EXAMPLE&lt;/domains&gt;
    &lt;/sssd&gt;
    &lt;auth_domains&gt;
      &lt;domain&gt;
        &lt;domain_name&gt;EXAMPLE&lt;/domain_name&gt;
        &lt;id_provider&gt;ldap&lt;/id_provider&gt;
        &lt;sudo_provider&gt;ldap&lt;/sudo_provider&gt;
        &lt;ldap_uri&gt;ldap://&exampledomain;&lt;/ldap_uri&gt;
        &lt;ldap_sudo_search_base&gt;ou=sudoers,dc=example,dc=com&lt;/ldap_sudo_search_base&gt;
      &lt;/domain&gt;
    &lt;/auth_domains&gt;
  &lt;/sssd_conf&gt;
&lt;/auth-client&gt;</screen>
   </example>

   <tip>
    <title>Using ldaps://</title>
    <para>
     To use LDAP with native SSL (rather than TLS), add the
     <literal>ldaps</literal> resource:
    </para>
<screen>&lt;auth-client&gt;
  &lt;sssd_conf&gt;
    &lt;auth_domains&gt;
      &lt;domain&gt;
        &lt;ldaps config:type="boolean"&gt;true&lt;/ldaps&gt;
      &lt;/domain&gt;
    &lt;/auth_domains&gt;
  &lt;/sssd_conf&gt;
&lt;/auth-client&gt;</screen>
   </tip>
  </sect1>
  <sect1 xml:id="ay.nfs">
   <title>NFS Client and Server</title>

   <para>
    Configuring a system as an NFS client or an NFS server is can be done
    using the configuration system. The following examples show how both NFS
    client and server can be configured.
   </para>

   <para>
    From &productname; &productnumber; on, the structure of NFS client configuration has
    changed. Some global configuration options were introduced:
    <literal>enable_nfs4</literal> to switch NFS4 support on/off and
    <literal>idmapd_domain</literal> to define domain name for rpc.idmapd
    (this only makes sense when NFS4 is enabled). Attention: the old
    structure is not compatible with the new one and the control files with
    an NFS section created on older releases will not work with newer
    products.
   </para>

   <example>
    <title>Network Configuration: NFS Client</title>
<screen>&lt;nfs&gt;
  &lt;enable_nfs4 config:type="boolean"&gt;true&lt;/enable_nfs4&gt;
  &lt;idmapd_domain&gt;suse.cz&lt;/idmapd_domain&gt;
  &lt;nfs_entries config:type="list"&gt;
    &lt;nfs_entry&gt;
      &lt;mount_point&gt;/home&lt;/mount_point&gt;
      &lt;nfs_options&gt;sec=krb5i,intr,rw&lt;/nfs_options&gt;
      &lt;server_path&gt;saurus.suse.cz:/home&lt;/server_path&gt;
      &lt;vfstype&gt;nfs4&lt;/vfstype&gt;
    &lt;/nfs_entry&gt;
    &lt;nfs_entry&gt;
      &lt;mount_point&gt;/work&lt;/mount_point&gt;
      &lt;nfs_options&gt;defaults&lt;/nfs_options&gt;
      &lt;server_path&gt;bivoj.suse.cz:/work&lt;/server_path&gt;
      &lt;vfstype&gt;nfs&lt;/vfstype&gt;
    &lt;/nfs_entry&gt;
    &lt;nfs_entry&gt;
      &lt;mount_point&gt;/mnt&lt;/mount_point&gt;
      &lt;nfs_options&gt;defaults&lt;/nfs_options&gt;
      &lt;server_path&gt;fallback.suse.cz:/srv/dist&lt;/server_path&gt;
      &lt;vfstype&gt;nfs&lt;/vfstype&gt;
    &lt;/nfs_entry&gt;
  &lt;/nfs_entries&gt;
&lt;/nfs&gt;</screen>
   </example>

   <example>
    <title>Network Configuration: NFS Server</title>
<screen>&lt;nfs_server&gt;
  &lt;nfs_exports config:type="list"&gt;
    &lt;nfs_export&gt;
      &lt;allowed config:type="list"&gt;
        &lt;allowed_clients&gt;*(ro,root_squash,sync)&lt;/allowed_clients&gt;
      &lt;/allowed&gt;
      &lt;mountpoint&gt;/home&lt;/mountpoint&gt;
    &lt;/nfs_export&gt;
    &lt;nfs_export&gt;
      &lt;allowed config:type="list"&gt;
        &lt;allowed_clients&gt;*(ro,root_squash,sync)&lt;/allowed_clients&gt;
      &lt;/allowed&gt;
      &lt;mountpoint&gt;/work&lt;/mountpoint&gt;
    &lt;/nfs_export&gt;
  &lt;/nfs_exports&gt;
  &lt;start_nfsserver config:type="boolean"&gt;true&lt;/start_nfsserver&gt;
&lt;/nfs_server&gt;</screen>
   </example>
  </sect1>
  <sect1 xml:id="Configuration.Network.Ntp">
   <title>NTP Client</title>

   <para>
    Select whether to start the NTP daemon when booting the system. The NTP
    daemon resolves host names when initializing.
   </para>

   <para>
    To run NTP daemon in chroot jail, set
    <literal>start_in_chroot</literal>. Starting any daemon in a chroot jail
    is more secure and strongly recommended. To adjust NTP servers, peers,
    local clocks, and NTP broadcasting, add the appropriate entry to the
    control file. An example of various configuration options is shown
    below.
   </para>

   <example>
    <title>Network configuration: NTP Client</title>
<screen>&lt;ntp-client&gt;
  &lt;configure_dhcp config:type="boolean"&gt;false&lt;/configure_dhcp&gt;
  &lt;peers config:type="list"&gt;
    &lt;peer&gt;
      &lt;address&gt;&ntpname;&lt;/address&gt;
      &lt;options&gt;&lt;/options&gt;
      &lt;type&gt;server&lt;/type&gt;
    &lt;/peer&gt;
  &lt;/peers&gt;
  &lt;start_at_boot config:type="boolean"&gt;true&lt;/start_at_boot&gt;
  &lt;start_in_chroot config:type="boolean"&gt;true&lt;/start_in_chroot&gt;
&lt;/ntp-client&gt;</screen>
   </example>
  </sect1>
  <sect1 xml:id="Configuration.Network.Sendmail">
   <title>Mail Configuration</title>

   <para>
    For the mail configuration of the client, this module lets you create a
    detailed mail configuration. The module contains various options. We
    recommended you use it at least for the initial configuration.
   </para>

   <example>
    <title>Mail Configuration</title>
<screen>&lt;mail&gt;
  &lt;aliases config:type="list"&gt;
    &lt;alias&gt;
      &lt;alias&gt;root&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;foo&lt;/destinations&gt;
    &lt;/alias&gt;
    &lt;alias&gt;
      &lt;alias&gt;test&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;foo&lt;/destinations&gt;
    &lt;/alias&gt;
  &lt;/aliases&gt;
  &lt;connection_type config:type="symbol"&gt;permanent&lt;/connection_type&gt;
  &lt;fetchmail config:type="list"&gt;
    &lt;fetchmail_entry&gt;
      &lt;local_user&gt;foo&lt;/local_user&gt;
      &lt;password&gt;bar&lt;/password&gt;
      &lt;protocol&gt;POP3&lt;/protocol&gt;
      &lt;remote_user&gt;foo&lt;/remote_user&gt;
      &lt;server&gt;pop.foo.com&lt;/server&gt;
    &lt;/fetchmail_entry&gt;
    &lt;fetchmail_entry&gt;
      &lt;local_user&gt;test&lt;/local_user&gt;
      &lt;password&gt;bar&lt;/password&gt;
      &lt;protocol&gt;IMAP&lt;/protocol&gt;
      &lt;remote_user&gt;test&lt;/remote_user&gt;
      &lt;server&gt;blah.com&lt;/server&gt;
    &lt;/fetchmail_entry&gt;
  &lt;/fetchmail&gt;
  &lt;from_header&gt;test.com&lt;/from_header&gt;
  &lt;listen_remote config:type="boolean"&gt;true&lt;/listen_remote&gt;
  &lt;local_domains config:type="list"&gt;
    &lt;domains&gt;test1.com&lt;/domains&gt;
  &lt;/local_domains&gt;
  &lt;masquerade_other_domains config:type="list"&gt;
      &lt;domain&gt;blah.com&lt;/domain&gt;
  &lt;/masquerade_other_domains&gt;
  &lt;masquerade_users config:type="list"&gt;
    &lt;masquerade_user&gt;
      &lt;address&gt;joe@test.com&lt;/address&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;user&gt;joeuser&lt;/user&gt;
    &lt;/masquerade_user&gt;
    &lt;masquerade_user&gt;
      &lt;address&gt;bar@test.com&lt;/address&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;user&gt;foo&lt;/user&gt;
    &lt;/masquerade_user&gt;
  &lt;/masquerade_users&gt;
  &lt;mta config:type="symbol"&gt;postfix&lt;/mta&gt;
  &lt;outgoing_mail_server&gt;test.com&lt;/outgoing_mail_server&gt;
  &lt;postfix_mda config:type="symbol"&gt;local&lt;/postfix_mda&gt;
  &lt;smtp_auth config:type="list"&gt;
    &lt;listentry&gt;
      &lt;password&gt;bar&lt;/password&gt;
      &lt;server&gt;test.com&lt;/server&gt;
      &lt;user&gt;foo&lt;/user&gt;
    &lt;/listentry&gt;
  &lt;/smtp_auth&gt;
  &lt;use_amavis config:type="boolean"&gt;true&lt;/use_amavis&gt;
  &lt;virtual_users config:type="list"&gt;
    &lt;virtual_user&gt;
      &lt;alias&gt;test.com&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;foo.com&lt;/destinations&gt;
    &lt;/virtual_user&gt;
    &lt;virtual_user&gt;
      &lt;alias&gt;geek.com&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;bar.com&lt;/destinations&gt;
    &lt;/virtual_user&gt;
  &lt;/virtual_users&gt;
&lt;/mail&gt;</screen>
   </example>
  </sect1>

  <sect1 xml:id="Configuration.Network.apache">
   <title>HTTP Server Configuration</title>

   <para>
    This section is used for configuration of an Apache HTTP server.
   </para>
   <para>
    For less experienced users, we would suggest to configure the Apache
    server using the <literal>HTTP server</literal> &yast; module. After that,
    call the <literal>&ay; configuration</literal> module,
    select the <literal>HTTP server</literal> &yast; module and clone the
    Apache settings. These settings can be exported via the menu
    <literal>File</literal>.
   </para>

   <example>
    <title>HTTP Server Configuration</title>
<screen>
  &lt;http-server&gt;
    &lt;Listen config:type="list"&gt;
      &lt;listentry&gt;
        &lt;ADDRESS/&gt;
        &lt;PORT&gt;80&lt;/PORT&gt;
      &lt;/listentry&gt;
    &lt;/Listen&gt;
    &lt;hosts config:type="list"&gt;
      &lt;hosts_entry&gt;
        &lt;KEY&gt;main&lt;/KEY&gt;
        &lt;VALUE config:type="list"&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;DocumentRoot&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            #
            # Global configuration that will be applicable for all
            # virtual hosts, unless deleted here or overriden elsewhere.
            #
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;"/srv/www/htdocs"&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            #
            # Configure the DocumentRoot
            #
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;"/srv/www/htdocs"&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Options&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # Possible values for the Options directive are "None", "All",
                # or any combination of:
                #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch
                #   ExecCGI MultiViews
                #
                # Note that "MultiViews" must be named *explicitly*
                # --- "Options All"
                # does not give it to you.
                #
                # The Options directive is both complicated and important.
                #  Please see
                #  http://httpd.apache.org/docs/2.4/mod/core.html#options
                # for more information.
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # AllowOverride controls what directives may be placed in
                # .htaccess files. It can be "All", "None", or any combination
                # of the keywords:
                #   Options FileInfo AuthConfig Limit
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # Controls who can get stuff from this server.
                &lt;/OVERHEAD&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;!mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Require&lt;/KEY&gt;
                    &lt;VALUE&gt;all granted&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Order&lt;/KEY&gt;
                    &lt;VALUE&gt;allow,deny&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Allow&lt;/KEY&gt;
                    &lt;VALUE&gt;from all&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;Alias&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # Aliases: aliases can be added as needed (with no limit).
            # The format is Alias fakename realname
            #
            # Note that if you include a trailing / on fakename then the
            # server will require it to be present in the URL.  So "/icons"
            # is not aliased in this example, only "/icons/".  If the fakename
            # is slash-terminated, then the realname must also be slash
            # terminated, and if the fakename omits the trailing slash, the
            # realname must also omit it.
            # We include the /icons/ alias for FancyIndexed directory listings.
            # If you do not use FancyIndexing, you may comment this out.
            #
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/icons/ "/usr/share/apache2/icons/"&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;"/usr/share/apache2/icons"&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Options&lt;/KEY&gt;
                &lt;VALUE&gt;Indexes MultiViews&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;!mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Require&lt;/KEY&gt;
                    &lt;VALUE&gt;all granted&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Order&lt;/KEY&gt;
                    &lt;VALUE&gt;allow,deny&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Allow&lt;/KEY&gt;
                    &lt;VALUE&gt;from all&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ScriptAlias&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # ScriptAlias: This controls which directories contain server
            # scripts. ScriptAliases are essentially the same as Aliases,
            # except that documents in the realname directory are treated
            # as applications and run by the server when requested rather
            # than as documents sent to the client.
            # The same rules about trailing "/" apply to ScriptAlias
            # directives as to Alias.
            #
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/cgi-bin/ "/srv/www/cgi-bin/"&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # "/srv/www/cgi-bin" should be changed to wherever your
            # ScriptAliased CGI directory exists, if you have that configured.
            #
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;"/srv/www/cgi-bin"&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Options&lt;/KEY&gt;
                &lt;VALUE&gt;+ExecCGI -Includes&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;!mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Require&lt;/KEY&gt;
                    &lt;VALUE&gt;all granted&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Order&lt;/KEY&gt;
                    &lt;VALUE&gt;allow,deny&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Allow&lt;/KEY&gt;
                    &lt;VALUE&gt;from all&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # UserDir: The name of the directory that is appended onto a
            # user's home directory if a ~user request is received.
            # To disable it, simply remove userdir from the list of modules
            # in APACHE_MODULES in /etc/sysconfig/apache2.
            #
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;mod_userdir.c&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;UserDir&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # Note that the name of the user directory ("public_html")
                # cannot simply be changed here, since it is a compile time
                # setting. The apache package would have to be rebuilt.
                # You could work around by deleting /usr/sbin/suexec, but
                # then all scripts from the directories would be executed
                # with the UID of the webserver.
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;public_html&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Include&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # The actual configuration of the directory is in
                # /etc/apache2/mod_userdir.conf.
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;/etc/apache2/mod_userdir.conf&lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;IncludeOptional&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # Include all *.conf files from /etc/apache2/conf.d/.
            #
            # This is mostly meant as a place for other RPM packages to drop
            # in their configuration snippet.
            #
            # <remark>The following wording is not grammatically correct, however I am not sure of the intended meaning. Please revise.</remark>
            # You can comment this out here if you want those bits include
            # only in a certain virtual host, but not here.
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/etc/apache2/conf.d/*.conf&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;IncludeOptional&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # The manual... if it is installed ('?' means it will not complain)
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/etc/apache2/conf.d/apache2-manual?conf&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerName&lt;/KEY&gt;
            &lt;VALUE&gt;linux-wtyj&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerAdmin&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;root@linux-wtyj&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;NameVirtualHost&lt;/KEY&gt;
            &lt;VALUE&gt;192.168.43.2&lt;/VALUE&gt;
          &lt;/listentry&gt;
        &lt;/VALUE&gt;
      &lt;/hosts_entry&gt;
      &lt;hosts_entry&gt;
        &lt;KEY&gt;192.168.43.2/secondserver.suse.de&lt;/KEY&gt;
        &lt;VALUE config:type="list"&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;DocumentRoot&lt;/KEY&gt;
            &lt;VALUE&gt;/srv/www/htdocs&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerName&lt;/KEY&gt;
            &lt;VALUE&gt;secondserver.suse.de&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerAdmin&lt;/KEY&gt;
            &lt;VALUE&gt;second_server@suse.de&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;/srv/www/htdocs&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Require&lt;/KEY&gt;
                &lt;VALUE&gt;all granted&lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
        &lt;/VALUE&gt;
      &lt;/hosts_entry&gt;
    &lt;/hosts&gt;
    &lt;modules config:type="list"&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;socache_shmcb&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;reqtimeout&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;authn_core&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;authz_core&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
    &lt;/modules&gt;
    &lt;service config:type="boolean"&gt;true&lt;/service&gt;
    &lt;version&gt;2.9&lt;/version&gt;
  &lt;/http-server&gt;
</screen>
   </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          List Name
         </para>
        </entry>
        <entry>
         <para>
          List Elements
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          Listen
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          List of host <literal>Listen</literal> settings
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          PORT
         </para>
        </entry>
        <entry>
         <para>
          port address
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          ADDRESS
         </para>
        </entry>
        <entry>
         <para>
          Network address. All addresses will be taken if this entry is empty.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          hosts
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          List of Hosts configuration
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          KEY
         </para>
        </entry>
        <entry>
         <para>
          Host name; <literal>&lt;KEY&gt;main&lt;/KEY&gt;</literal> defines the main hosts,
          for example <literal>&lt;KEY&gt;192.168.43.2/secondserver.suse.de&lt;/KEY&gt;</literal>
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          VALUE
         </para>
        </entry>
        <entry>
         <para>
          List of different values describing the host.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          modules
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          Module list. Only user defined modules need to be described.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          name
         </para>
        </entry>
        <entry>
         <para>
         Module name
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          userdefined
         </para>
        </entry>
        <entry>
         <para>
          For historical reasons, it is always set to <literal>true</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          change
         </para>
        </entry>
        <entry>
         <para>
          For historical reasons, it is always set to <literal>enable</literal>.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          version
         </para>
        </entry>
        <entry>
         <para>
          Version of used Apache server
         </para>
        </entry>
        <entry>
          <para>
          Only for information. Default 2.9
          </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          service
         </para>
        </entry>
        <entry>
         <para>
          Enable Apache service
         </para>
        </entry>
        <entry>
         <para>
         Optional. Default: false
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <note>
      <title>Firewall</title>
      <para>
      To run an Apache server correctly, make sure the firewall is configured
      appropriately.
      </para>
    </note>

  </sect1>

  <sect1 xml:id="Configuration.Network.Squid">
   <title>Squid Server</title>

   <para>
    Squid is a caching and forwarding Web proxy.
   </para>

   <example>
    <title>Squid Server Configuration</title>
<screen>
  &lt;squid&gt;
    &lt;acls config:type="list"&gt;
      &lt;listentry&gt;
        &lt;name&gt;QUERY&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;cgi-bin \?&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;urlpath_regex&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;apache&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;Server&lt;/option&gt;
          &lt;option&gt;^Apache&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;rep_header&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;all&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;0.0.0.0/0.0.0.0&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;src&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;manager&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;cache_object&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;proto&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;localhost&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;127.0.0.1/255.255.255.255&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;src&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;to_localhost&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;127.0.0.0/8&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;dst&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;SSL_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;443&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;80&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;21&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;443&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;70&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;210&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;1025-65535&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;280&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;488&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;591&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;777&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;CONNECT&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;CONNECT&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;method&lt;/type&gt;
      &lt;/listentry&gt;
    &lt;/acls&gt;
    &lt;http_accesses config:type="list"&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;manager&lt;/listentry&gt;
          &lt;listentry&gt;localhost&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;true&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;manager&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;!Safe_ports&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;CONNECT&lt;/listentry&gt;
          &lt;listentry&gt;!SSL_ports&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;localhost&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;true&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;all&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
    &lt;/http_accesses&gt;
    &lt;http_ports config:type="list"&gt;
      &lt;listentry&gt;
        &lt;host/&gt;
        &lt;port&gt;3128&lt;/port&gt;
        &lt;transparent config:type="boolean"&gt;false&lt;/transparent&gt;
      &lt;/listentry&gt;
    &lt;/http_ports&gt;
    &lt;refresh_patterns config:type="list"&gt;
      &lt;listentry&gt;
        &lt;case_sensitive config:type="boolean"&gt;true&lt;/case_sensitive&gt;
        &lt;max&gt;10080&lt;/max&gt;
        &lt;min&gt;1440&lt;/min&gt;
        &lt;percent&gt;20&lt;/percent&gt;
        &lt;regexp&gt;^ftp:&lt;/regexp&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;case_sensitive config:type="boolean"&gt;true&lt;/case_sensitive&gt;
        &lt;max&gt;1440&lt;/max&gt;
        &lt;min&gt;1440&lt;/min&gt;
        &lt;percent&gt;0&lt;/percent&gt;
        &lt;regexp&gt;^gopher:&lt;/regexp&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;case_sensitive config:type="boolean"&gt;true&lt;/case_sensitive&gt;
        &lt;max&gt;4320&lt;/max&gt;
        &lt;min&gt;0&lt;/min&gt;
        &lt;percent&gt;20&lt;/percent&gt;
        &lt;regexp&gt;.&lt;/regexp&gt;
      &lt;/listentry&gt;
    &lt;/refresh_patterns&gt;
    &lt;service_enabled_on_startup config:type="boolean"&gt;true&lt;/service_enabled_on_startup&gt;
    &lt;settings&gt;
      &lt;access_log config:type="list"&gt;
        &lt;listentry&gt;/var/log/squid/access.log&lt;/listentry&gt;
      &lt;/access_log&gt;
      &lt;cache_dir config:type="list"&gt;
        &lt;listentry&gt;ufs&lt;/listentry&gt;
        &lt;listentry&gt;/var/cache/squid&lt;/listentry&gt;
        &lt;listentry&gt;100&lt;/listentry&gt;
        &lt;listentry&gt;16&lt;/listentry&gt;
        &lt;listentry&gt;256&lt;/listentry&gt;
      &lt;/cache_dir&gt;
      &lt;cache_log config:type="list"&gt;
        &lt;listentry&gt;/var/log/squid/cache.log&lt;/listentry&gt;
      &lt;/cache_log&gt;
      &lt;cache_mem config:type="list"&gt;
        &lt;listentry&gt;8&lt;/listentry&gt;
        &lt;listentry&gt;MB&lt;/listentry&gt;
      &lt;/cache_mem&gt;
      &lt;cache_mgr config:type="list"&gt;
        &lt;listentry&gt;webmaster&lt;/listentry&gt;
      &lt;/cache_mgr&gt;
      &lt;cache_replacement_policy config:type="list"&gt;
        &lt;listentry&gt;lru&lt;/listentry&gt;
      &lt;/cache_replacement_policy&gt;
      &lt;cache_store_log config:type="list"&gt;
        &lt;listentry&gt;/var/log/squid/store.log&lt;/listentry&gt;
      &lt;/cache_store_log&gt;
      &lt;cache_swap_high config:type="list"&gt;
        &lt;listentry&gt;95&lt;/listentry&gt;
      &lt;/cache_swap_high&gt;
      &lt;cache_swap_low config:type="list"&gt;
        &lt;listentry&gt;90&lt;/listentry&gt;
      &lt;/cache_swap_low&gt;
      &lt;client_lifetime config:type="list"&gt;
        &lt;listentry&gt;1&lt;/listentry&gt;
        &lt;listentry&gt;days&lt;/listentry&gt;
      &lt;/client_lifetime&gt;
      &lt;connect_timeout config:type="list"&gt;
        &lt;listentry&gt;2&lt;/listentry&gt;
        &lt;listentry&gt;minutes&lt;/listentry&gt;
      &lt;/connect_timeout&gt;
      &lt;emulate_httpd_log config:type="list"&gt;
        &lt;listentry&gt;off&lt;/listentry&gt;
      &lt;/emulate_httpd_log&gt;
      &lt;error_directory config:type="list"&gt;
        &lt;listentry/&gt;
      &lt;/error_directory&gt;
      &lt;ftp_passive config:type="list"&gt;
        &lt;listentry&gt;on&lt;/listentry&gt;
      &lt;/ftp_passive&gt;
      &lt;maximum_object_size config:type="list"&gt;
        &lt;listentry&gt;4096&lt;/listentry&gt;
        &lt;listentry&gt;KB&lt;/listentry&gt;
      &lt;/maximum_object_size&gt;
      &lt;memory_replacement_policy config:type="list"&gt;
        &lt;listentry&gt;lru&lt;/listentry&gt;
      &lt;/memory_replacement_policy&gt;
      &lt;minimum_object_size config:type="list"&gt;
        &lt;listentry&gt;0&lt;/listentry&gt;
        &lt;listentry&gt;KB&lt;/listentry&gt;
      &lt;/minimum_object_size&gt;
    &lt;/settings&gt;
  &lt;/squid&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>acls</literal>
        </para>
       </entry>
       <entry>
        <para>
         List of Access Control Settings (ACLs).
        </para>
       </entry>
       <entry>
        <para>
         Each list entry contains the name, type, and additional options.
         Use the &yast; Squid configuration module in order to get an overview
         of possible entries.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>http_accesses</literal>
        </para>
       </entry>
       <entry>
        <para>
         In the Access Control table, access can be denied or allowed to ACL
         Groups.
        </para>
        <para>
        </para>
       </entry>
       <entry>
        <para>
         If there are more ACL Groups in one definition, it means that
         access will be allowed or denied to members who belong to all ACL
         Groups at the same time.
       </para>
        <para>
         The Access Control table is checked in the order listed here. The
         first matching entry is used.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>http_ports</literal>
        </para>
       </entry>
       <entry>
        <para>
         Define all ports where Squid will listen for clients' HTTP requests.
        </para>
       </entry>
       <entry>
        <para>
         <literal>Host</literal> can contain a host name or IP address or
         remain empty.
        </para>
        <para>
         <literal>transparent</literal> disables PMTU discovery when transparent.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>refresh_patterns</literal>
        </para>
       </entry>
       <entry>
        <para>
         Refresh patterns define how Squid treats the objects in the cache.
        </para>
       </entry>
       <entry>
        <para>
         The refresh patterns are checked in the order listed here. The first
         matching entry is used.
        </para>
        <para>
         <literal>Min</literal> determines how long (in minutes) an object
         should be considered fresh if no explicit expiry time is given.
         <literal>Max</literal> is the upper limit of how long objects without
         an explicit expiry time will be considered fresh.
         <literal>Percent</literal> is the percentage of the object's age
         (time since last modification). An object without an explicit expiry
         time will be considered fresh.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>settings</literal>
        </para>
       </entry>
       <entry>
        <para>
         Map of all available general parameters with default values.
        </para>
       </entry>
       <entry>
        <para>
         Use the &yast; Squid configuration module in order to get an overview
         about possible entries.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>service_enabled_on_startup</literal>
        </para>
       </entry>
       <entry>
        <para>
         Squid service start when booting.
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="Configuration.Network.Ftp">
    <title>FTP Server</title>
    <para>
     Configure your FTP Internet server settings.
    </para>
    <example>
     <title>FTP server configuration:</title>
<screen>
  &lt;ftp-server&gt;
    &lt;AnonAuthen&gt;1&lt;/AnonAuthen&gt;
    &lt;AnonCreatDirs&gt;NO&lt;/AnonCreatDirs&gt;
    &lt;AnonMaxRate&gt;0&lt;/AnonMaxRate&gt;
    &lt;AnonReadOnly&gt;YES&lt;/AnonReadOnly&gt;
    &lt;AntiWarez&gt;YES&lt;/AntiWarez&gt;
    &lt;Banner&gt;Welcome message&lt;/Banner&gt;
    &lt;CertFile/&gt;
    &lt;ChrootEnable&gt;NO&lt;/ChrootEnable&gt;
    &lt;EnableUpload&gt;NO&lt;/EnableUpload&gt;
    &lt;FTPUser&gt;ftp&lt;/FTPUser&gt;
    &lt;FtpDirAnon&gt;/srv/ftp&lt;/FtpDirAnon&gt;
    &lt;FtpDirLocal/&gt;
    &lt;GuestUser/&gt;
    &lt;LocalMaxRate&gt;0&lt;/LocalMaxRate&gt;
    &lt;MaxClientsNumber&gt;10&lt;/MaxClientsNumber&gt;
    &lt;MaxClientsPerIP&gt;3&lt;/MaxClientsPerIP&gt;
    &lt;MaxIdleTime&gt;15&lt;/MaxIdleTime&gt;
    &lt;PasMaxPort&gt;40500&lt;/PasMaxPort&gt;
    &lt;PasMinPort&gt;40000&lt;/PasMinPort&gt;
    &lt;PassiveMode&gt;YES&lt;/PassiveMode&gt;
    &lt;SSL&gt;0&lt;/SSL&gt;
    &lt;SSLEnable&gt;NO&lt;/SSLEnable&gt;
    &lt;SSLv2&gt;NO&lt;/SSLv2&gt;
    &lt;SSLv3&gt;NO&lt;/SSLv3&gt;
    &lt;StartDaemon&gt;0&lt;/StartDaemon&gt;
    &lt;TLS&gt;YES&lt;/TLS&gt;
    &lt;Umask/&gt;
    &lt;UmaskAnon/&gt;
    &lt;UmaskLocal/&gt;
    &lt;VerboseLogging&gt;NO&lt;/VerboseLogging&gt;
    &lt;VirtualUser&gt;NO&lt;/VirtualUser&gt;
  &lt;/ftp-server&gt;
</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          AnonAuthen
         </para>
        </entry>
        <entry>
         <para>
          Enable/disable anonymous and local users.
         </para>
        </entry>
        <entry>
         <para>
          Authenticated Users Only: 1; Anonymous Only: 0; Both: 2
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          AnonCreatDirs
         </para>
        </entry>
        <entry>
         <para>
         Anonymous users can create directories.
         </para>
        </entry>
        <entry>
         <para>
         Values: YES/NO
        </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          AnonReadOnly
         </para>
        </entry>
        <entry>
         <para>
         Anonymous users can upload.
         </para>
        </entry>
        <entry>
         <para>
          Values: YES/NO
          </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          AnonMaxRate
         </para>
        </entry>
        <entry>
         <para>
          The maximum data transfer rate permitted for anonymous clients.
         </para>
        </entry>
        <entry>
         <para>
          KB/s
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          AntiWarez
         </para>
        </entry>
        <entry>
         <para>
          Disallow downloading of files that were uploaded but not validated by a local admin.
         </para>
        </entry>
        <entry>
         <para>
          Values: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          Banner
         </para>
        </entry>
        <entry>
         <para>
          Specify the name of a file containing the text to display when someone connects to the server.
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          CertFile
         </para>
        </entry>
        <entry>
         <para>
          DSA certificate to use for SSL-encrypted connections
         </para>
        </entry>
        <entry>
         <para>
          This option specifies the location of the DSA certificate to use for SSL-encrypted connections.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          ChrootEnable
         </para>
        </entry>
        <entry>
         <para>
          When enabled, local users will be (by default) placed in a chroot jail in their home directory after login.
         </para>
        </entry>
        <entry>
         <para>
          Warning: This option has security implications.
          Values: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          EnableUpload
         </para>
        </entry>
        <entry>
         <para>
          If enabled, FTP users can upload.
         </para>
        </entry>
        <entry>
         <para>
          To allow anonymous users to upload, enable <literal>AnonReadOnly</literal>.
          Values: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          FTPUser
         </para>
        </entry>
        <entry>
         <para>
          Defining anonymous FTP user.
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          FtpDirAnon
         </para>
        </entry>
        <entry>
         <para>
          FTP Directory for Anonymous Users.
         </para>
        </entry>
        <entry>
         <para>
          Specify a directory which is used for FTP anonymous users.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          FtpDirLocal
         </para>
        </entry>
        <entry>
         <para>
          FTP directory for authenticated users.
         </para>
        </entry>
        <entry>
         <para>
          Specify a directory which is used for FTP authenticated users.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          LocalMaxRate
         </para>
        </entry>
        <entry>
         <para>
          The maximum data transfer rate permitted for local authenticated users.
         </para>
        </entry>
        <entry>
         <para>
          KB/s
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          MaxClientsNumber
         </para>
        </entry>
        <entry>
         <para>
          The maximum number of clients allowed to connect.
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          MaxClientsPerIP
         </para>
        </entry>
        <entry>
         <para>
          Max clients for one IP.
         </para>
        </entry>
        <entry>
         <para>
          The maximum number of clients allowed to connect from the same source Internet address.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          MaxIdleTime
         </para>
        </entry>
        <entry>
         <para>
          The maximum time (timeout) a remote client may wait between FTP commands.
         </para>
        </entry>
        <entry>
         <para>
          Minutes
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          PasMaxPort
         </para>
        </entry>
        <entry>
         <para>
          Maximum value for a port range for passive connection replies.
         </para>
        </entry>
        <entry>
         <para>
          <literal>PassiveMode</literal> needs to be set to YES.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          PasMinPort
         </para>
        </entry>
        <entry>
         <para>
          Minimum value for a port range for passive connection replies.
         </para>
        </entry>
        <entry>
         <para>
          <literal>PassiveMode</literal> needs to be set to YES.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          PassiveMode
         </para>
        </entry>
        <entry>
         <para>
          Enable Passive Mode
         </para>
        </entry>
        <entry>
         <para>
         Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          SSL
         </para>
        </entry>
        <entry>
         <para>
          Security Settings
         </para>
        </entry>
        <entry>
         <para>
         Disable SSL/TLS: 0; Accept SSL and TLS: 1; Refuse Connections Without SSL/TLS: 2
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          SSLEnable
         </para>
        </entry>
        <entry>
         <para>
          If enabled, SSL connections are allowed.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          SSLv2
         </para>
        </entry>
        <entry>
         <para>
          If enabled, SSL version 2 connections are allowed.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          SSLv3
         </para>
        </entry>
        <entry>
         <para>
          If enabled, SSL version 3 connections are allowed.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          StartDaemon
         </para>
        </entry>
        <entry>
         <para>
          FTP daemon is started.
         </para>
        </entry>
        <entry>
         <para>
          Manually: 0; when booting: 1; via xinetd: 2
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          TLS
         </para>
        </entry>
        <entry>
         <para>
          If enabled, TLS connections are allowed.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         Umask
         </para>
        </entry>
        <entry>
         <para>
          File creation mask. (umask for files):(umask for directories).
         </para>
        </entry>
        <entry>
         <para>
          For example <literal>177:077</literal> if you feel paranoid.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         UmaskAnon
         </para>
        </entry>
        <entry>
         <para>
          The value to which the umask for file creation is set for anonymous users.
         </para>
        </entry>
        <entry>
         <para>
          If you want to specify octal values, remember the "0" prefix, otherwise the value will be treated as a base 10 integer.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         UmaskLocal
         </para>
        </entry>
        <entry>
         <para>
          Umask for authenticated users.
         </para>
        </entry>
        <entry>
         <para>
          If you want to specify octal values, remember the "0" prefix, otherwise the value will be treated as a base 10 integer.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          VerboseLogging
         </para>
        </entry>
        <entry>
         <para>
          When enabled, all FTP requests and responses are logged.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          VirtualUser
         </para>
        </entry>
        <entry>
         <para>
          By using virtual users, FTP accounts can be administrated without affecting system accounts.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <note>
      <title>Firewall</title>
      <para>
      Proper Firewall setting will be required for the FTP server to run correctly.
      </para>
    </note>

   </sect1>

   <sect1 xml:id="Configuration.Network.Tftp">
    <title>TFTP Server</title>
    <para>
     Configure your TFTP Internet server settings.
    </para>
    <para>
     Use this to enable a server for TFTP (trivial file transfer protocol). The server will be started using xinetd.
    </para>
    <para>
     Note that TFTP and FTP are not the same.
    </para>
    <example>
     <title>TFTP server configuration:</title>
<screen>
  &lt;tftp-server&gt;
    &lt;start_tftpd config:type="boolean"&gt;true&lt;/start_tftpd&gt;
    &lt;tftp_directory&gt;/tftpboot&lt;/tftp_directory&gt;
  &lt;/tftp-server&gt;
</screen>
    </example>
    <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Element
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Comment
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           start_tftpd
          </para>
         </entry>
         <entry>
          <para>
           Enabling TFTP server service.
          </para>
         </entry>
         <entry>
          <para>
           Value: true/false
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           tftp_directory
          </para>
         </entry>
         <entry>
          <para>
           Boot Image Directory: Specify the directory where served
           files are located.
          </para>
         </entry>
         <entry>
          <para>
           The usual value is /tftpboot. The directory will be created if it
           does not exist. The server uses this as its root directory
           (using the -s option).
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
    </informaltable>
   </sect1>

   <sect1 xml:id="CreateProfile.Firstboot">
   <title>Firstboot Workflow</title>

   <para>
    The &yast; firstboot utility (&yast; Initial System Configuration), which
    runs after the installation is completed, lets you configure the before
    creation of the install image. On the first boot after configuration, users
    are then guided through a series of steps that allow for easier
    configuration of their desktops. &yast; firstboot does not run by default
    and needs to be configured to run.
    </para>

   <example>
    <title>Enabling Firstboot Workflow</title>
    <screen>
      &lt;firstboot&gt;
        &lt;firstboot_enabled config:type="boolean"&gt;true&lt;/firstboot_enabled&gt;
      &lt;/firstboot&gt;
    </screen>
   </example>
  </sect1>

  <sect1 xml:id="CreateProfile.Security">
   <title>Security Settings</title>

   <para>
    Using the features of this module, you can to change the local security
    settings on the target system. The local security settings include the
    boot configuration, login settings, password settings, user addition
    settings, and file permissions.
   </para>

   <para>
    Configuring the security settings automatically corresponds to the
    <literal>Custom Settings</literal> in the security module available in
    the running system which lets you create your own, customized
    configuration.
   </para>

   <example>
    <title>Security configuration</title>
    <para>
     See the reference for the meaning and the possible values of the
     settings in the following example.
    </para>
<screen>&lt;security&gt;
  &lt;console_shutdown&gt;ignore&lt;/console_shutdown&gt;
  &lt;displaymanager_remote_access&gt;no&lt;/displaymanager_remote_access&gt;
  &lt;fail_delay&gt;3&lt;/fail_delay&gt;
  &lt;faillog_enab&gt;yes&lt;/faillog_enab&gt;
  &lt;gid_max&gt;60000&lt;/gid_max&gt;
  &lt;gid_min&gt;101&lt;/gid_min&gt;
  &lt;gdm_shutdown&gt;root&lt;/gdm_shutdown&gt;
  &lt;lastlog_enab&gt;yes&lt;/lastlog_enab&gt;
  &lt;encryption&gt;md5&lt;/encryption&gt;
  &lt;obscure_checks_enab&gt;no&lt;/obscure_checks_enab&gt;
  &lt;pass_max_days&gt;99999&lt;/pass_max_days&gt;
  &lt;pass_max_len&gt;8&lt;/pass_max_len&gt;
  &lt;pass_min_days&gt;1&lt;/pass_min_days&gt;
  &lt;pass_min_len&gt;6&lt;/pass_min_len&gt;
  &lt;pass_warn_age&gt;14&lt;/pass_warn_age&gt;
  &lt;passwd_use_cracklib&gt;yes&lt;/passwd_use_cracklib&gt;
  &lt;permission_security&gt;secure&lt;/permission_security&gt;
  &lt;run_updatedb_as&gt;nobody&lt;/run_updatedb_as&gt;
  &lt;uid_max&gt;60000&lt;/uid_max&gt;
  &lt;uid_min&gt;500&lt;/uid_min&gt;
&lt;/security&gt;</screen>
   </example>

   <sect2 xml:id="CreateProfile.Security.password">
    <title>Password Settings Options</title>
    <para>
     Change various password settings. These settings are mainly stored in
     the <filename>/etc/login.defs</filename> file.
    </para>
    <para>
     Use this resource to activate one of the encryption methods currently
     supported. If not set, <literal>DES</literal> is configured.
    </para>
    <para>
     <literal>DES</literal>, the Linux default method, works in all network
     environments, but it restricts you to passwords no longer than eight
     characters. <literal>MD5</literal> allows longer passwords, thus
     provides more security, but some network protocols do not support this,
     and you may have problems with NIS. <literal>Blowfish</literal> is also
     supported.
    </para>
    <para>
     Additionally, you can set up the system to check for password
     plausibility and length etc.
    </para>
   </sect2>

   <sect2 xml:id="CreateProfile.Security.boot">
    <title>Boot Settings</title>
    <para>
     Use the security resource, to change various boot settings.
    </para>
    <variablelist>
     <varlistentry>
      <term>
       How to interpret <keycombo><keycap function="control"/><keycap function="alt"/><keycap function="delete"/></keycombo>?
      </term>
      <listitem>
       <para>
        When someone at the console has pressed the
        <keycombo><keycap function="control"/> <keycap function="alt"/>
        <keycap function="delete"/></keycombo> key combination, the system
        usually reboots. Sometimes it is desirable to ignore this event, for
        example, when the system serves as both workstation and server.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Shutdown behavior of GDM</term>
      <listitem>
       <para>
        Configure a list of users allowed to shut down the machine from GDM.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect2>

   <sect2 xml:id="CreateProfile.Security.login">
    <title>Login Settings</title>
    <para>
     Change various login settings. These settings are mainly stored in the
     <filename>/etc/login.defs</filename> file.
    </para>
   </sect2>

   <sect2 xml:id="CreateProfile.Security.users">
    <title>New user settings (<command>useradd</command> settings)</title>
    <para>
     Set the minimum and maximum possible user and group ID
    </para>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.Security.laf">
   <title>Linux Audit Framework (LAF)</title>

   <para>
    This module allows the configuration of the audit daemon and to add
    rules for the audit subsystem.
   </para>

   <example>
    <title>LAF configuration</title>
<screen>
  &lt;audit-laf&gt;
    &lt;auditd&gt;
      &lt;flush&gt;INCREMENTAL&lt;/flush&gt;
      &lt;freq&gt;20&lt;/freq&gt;
      &lt;log_file&gt;/var/log/audit/audit.log&lt;/log_file&gt;
      &lt;log_format&gt;RAW&lt;/log_format&gt;
      &lt;max_log_file&gt;5&lt;/max_log_file&gt;
      &lt;max_log_file_action&gt;ROTATE&lt;/max_log_file_action&gt;
      &lt;name_format&gt;NONE&lt;/name_format&gt;
      &lt;num_logs&gt;4&lt;/num_logs&gt;
    &lt;/auditd&gt;
    &lt;rules/&gt;
  &lt;/audit-laf&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>auditd/flush</literal>
        </para>
       </entry>
       <entry>
        <para>
         Describes how to write the data to disk.
        </para>
       </entry>
       <entry>
        <para>
         If set to <literal>INCREMENTAL</literal> the Frequency parameter tells
         how many records to write before issuing an explicit flush to disk.
         <literal>NONE</literal> means: no special effort is made to flush data,
         <literal>DATA</literal>: keep data portion synchronized,
         <literal>SYNC</literal>: keep data and metadata fully synchronized.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/freq</literal>
        </para>
       </entry>
       <entry>
        <para>
         This parameter tells how many records to write before issuing an explicit flush to disk.
        </para>
       </entry>
       <entry>
        <para>
         The parameter <literal>flush</literal> needs to be set to <literal>INCREMENTAL</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/log_file</literal>
        </para>
       </entry>
       <entry>
        <para>
         The full path name to the log file.
        </para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/log_fomat</literal>
        </para>
       </entry>
       <entry>
        <para>
         How much information needs to be logged.
        </para>
       </entry>
       <entry>
        <para>
         Set <literal>RAW</literal> to log all data (store in a format exactly as the kernel sends it)
         or <literal>NOLOG</literal> to discard all audit information instead of writing it to disk
         (does not affect data sent to the dispatcher).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/max_log_file</literal>
        </para>
       </entry>
       <entry>
        <para>
         How much information needs to be logged.
        </para>
       </entry>
       <entry>
        <para>
         Unit: Megabytes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/num_logs</literal>
        </para>
       </entry>
       <entry>
        <para>
         Number of log files.
        </para>
       </entry>
       <entry>
        <para>
         <literal>max_log_file_action</literal> needs to be set to <literal>ROTATE</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/max_log_file_action</literal>
        </para>
       </entry>
       <entry>
        <para>
         What happens if the log capacity has been reached.
        </para>
       </entry>
       <entry>
        <para>
         If the action is set to <literal>ROTATE</literal> the Number of Log Files specifies
         the number of files to keep. Set to <literal>SYSLOG</literal>, the audit daemon will
         write a warning to /var/log/messages. With <literal>SUSPEND</literal>
         the daemon stops writing records to disk. <literal>IGNORE</literal> means do nothing,
         <literal>KEEP_LOGS</literal> is similar to <literal>ROTATE</literal>, but log files
         are not overwritten.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/name_format</literal>
        </para>
       </entry>
       <entry>
        <para>
         Computer Name Format describes how to write the computer name to the log file.
        </para>
       </entry>
       <entry>
        <para>
         If <literal>USER</literal> is set, the User Defined Name is used.
         <literal>NONE</literal> means no computer name is inserted.
         <literal>HOSTNAME</literal> uses the name returned by the 'gethostname' syscall.
         <literal>FQD</literal> uses the fully qualified domain name.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>rules</literal>
        </para>
       </entry>
       <entry>
        <para>
         Rules for auditctl
        </para>
       </entry>
       <entry>
        <para>
         You can edit the rules manually, which we only recommend for
         advanced users.  For more information about all options, see
         <command>man auditctl</command>.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>


  <sect1 xml:id="Configuration.Security.users_and_groups">
   <title>Users and Groups</title>

   <para>
    AutoYaST supports defining local users, groups, special login settings and even
    default options for new users. Those settings are defined in the following sections:
   </para>

   <variablelist>
    <varlistentry>
     <term>users</term>
     <listitem>
      <para>
       List of users
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>user_defaults</term>
     <listitem>
      <para>
       Default options for new users
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>groups</term>
     <listitem>
      <para>
       List of groups
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>login_settings</term>
     <listitem>
      <para>
       Special login settings like password-less login or autologin
      </para>
     </listitem>
    </varlistentry>
   </variablelist>

   <note>
    <title>Users and groups set up during the first stage</title>
    <para>
     Users and groups are set up during the first stage, so you can set up an
     usable system without running the second stage.
    </para>
   </note>

   <sect2 xml:id="Configuration.Security.users">
    <title>Users</title>

    <para>
     A list of users can be defined in the <literal>&lt;users&gt;</literal> section.
     Take into account that at least the &rootuser; users should be set up so you can
     login after the installation is finished.
    </para>

    <example>
     <title>Minimal User Configuration</title>
     <screen>&lt;users config:type="list"&gt;
  &lt;user&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
    &lt;user&gt;
    &lt;username&gt;&exampleuser_plain;&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
&lt;/users&gt;</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>username</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;username&gt;lukesw&lt;/username&gt;</screen>
        </entry>
        <entry>
         <para>
          Required. It should be a valid username. Check <literal>man 8 useradd</literal>
          if you're not sure.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>fullname</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;fullname&gt;Tux Torvalds&lt;/fullname&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User's fullname.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>forename</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;forname&gt;Tux&lt;/forename&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User's forename.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>surname</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;surname&gt;Skywalkwer&lt;/surname&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User's surname.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>uid</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number
         </para>
<screen>&lt;uid&gt;1001&lt;/uid&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User ID. It must be a unique and non-negative number.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>gid</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number
         </para>
<screen>&lt;gid&gt;100&lt;/gid&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Initial group ID. It must be a unique and non-negative
          number. Moreover it must refer to an existing group.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>home</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;home&gt;/home/luke&lt;/home&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Absolute path to the user's home directory. By default,
          <literal>/home/username</literal> will be used (e.g.
          <literal>alice</literal>'s home directory will be
          <literal>/home/alice</literal>).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>shell</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;shell&gt;/usr/bin/zsh&lt;/shell&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. <literal>/bin/bash</literal> is the default value. If you
          choose another one, make sure that it's installed (adding the corresponding
          package to the <literal>software</literal> section).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>user_password</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;user_password&gt;some-password&lt;/user_password&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User's password can be written in plain text (not recommended) or in encrypted form.
          Check the <literal>encrypted</literal> to select the desired behaviour.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>encrypted</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
<screen>&lt;encrypted config:type="boolean"&gt;true&lt;/encrypted&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Considered <literal>false</literal> if not present.
          Indicates if the user's password in the profile is encrypted or not.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>password_settings</literal>
         </para>
        </entry>
        <entry>
         <para>
          Password settings
         </para>
         <screen>&lt;password_settings&gt;
  &lt;expire/&gt;
  &lt;max&gt;60&lt;/max&gt;
  &lt;warn&gt;7&lt;/warn&gt;
&lt;/password_settings&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Some password settings can be customized: <literal>expire</literal>
          (account expiration date in format <literal>YYYY-MM-DD</literal>), <literal>flag</literal>
          (<literal>/etc/shadow</literal> flag), <literal>inact</literal> (number of days
          after password expiration that account is disabled), <literal>max</literal>
          (maximum number of days a password is valid), <literal>min</literal> (minimum
          number of days a user can change the password) and <literal>warn</literal>
          (number of days when the password change reminder starts).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>authorized_keys</literal>
         </para>
        </entry>
        <entry>
         <para>
          List of authorized keys
         </para>
         <screen>&lt;authorized_keys config:type="list"&gt;
  &lt;listentry&gt;ssh-rsa ...&lt;/listentry&gt;
&lt;/authorized_keys&gt;</screen>
        </entry>
        <entry>
         <para>
          A list of authorized keys to be written to <literal>$HOME/.ssh/authorized_keys</literal>.
          See example below.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <para>
     The last example shows a more complete example. The data in
     <filename>/etc/default/useradd</filename> is used to determine the home
     directory of the user to be created plus other parameters.
    </para>

    <example>
     <title>Complex User Configuration</title>
     <screen>&lt;users config:type="list"&gt;
  &lt;user&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;uid&gt;1001&lt;/uid&gt;
    &lt;gid&gt;100&lt;/gid&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
    &lt;fullname&gt;Root User&lt;fullname&gt;
    &lt;authorized_keys config:type="list"&gt;
      &lt;listentry&gt;command="/opt/login.sh" ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDKLt1vnW2vTJpBp3VK91rFsBvpY97NljsVLdgUrlPbZ/L51FerQQ+djQ/ivDASQjO+567nMGqfYGFA/De1EGMMEoeShza67qjNi14L1HBGgVojaNajMR/NI2d1kDyvsgRy7D7FT5UGGUNT0dlcSD3b85zwgHeYLidgcGIoKeRi7HpVDOOTyhwUv4sq3ubrPCWARgPeOLdVFa9clC8PTZdxSeKp4jpNjIHEyREPin2Un1luCIPWrOYyym7aRJEPopCEqBA9HvfwpbuwBI5F0uIWZgSQLfpwW86599fBo/PvMDa96DpxH1VlzJlAIHQsMkMHbsCazPNC0++Kp5ZVERiH root@example.net&lt;/listentry&gt;
    &lt;/authorized_keys&gt;
  &lt;/user&gt;
  &lt;user&gt;
    &lt;username&gt;&exampleuser_plain;&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
    &lt;fullname&gt;Plain User&lt;fullname&gt;
    &lt;home&gt;/Users/plain&lt;home&gt;
    &lt;password_settings&gt;
      &lt;max&gt;120&lt;/max&gt;
      &lt;inact&gt;5&lt;/inact&gt;
    &lt;/password_settings&gt;
  &lt;/user&gt;
&lt;/users&gt;</screen>
    </example>

    <note>
     <title><literal>authorized_keys</literal> file will be overwritten</title>
     <para>
      If the profile defines a set of SSH authorized keys for a user, the content
      of <literal>$HOME/.ssh/authorized_keys</literal> file will be overwritten
      when using AutoYaST to perform a system upgrade or configuration.
     </para>
     <para>
      To avoid such behaviour, the <literal>&lt;authorized_keys&gt;</literal> section
      should be omitted.
     </para>
    </note>
   </sect2>

   <sect2 xml:id="Configuration.Security.user_defaults">
    <title>User Defaults</title>

    <para>
     The profile can specify a set of default values for new users like
     password expiration, initial group, home directory prefix, etc. Besides using them
     as default values for the users that are defined in the profile, AutoYaST will
     write those settings to <filename>/etc/default/useradd</filename> to be read for
     <literal>useradd</literal>.
    </para>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>group</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;group&gt;100&lt;/group&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default initial login group.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>groups</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;groups&gt;users&lt;/groups&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. List of additional groups.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>home</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;home&gt;/home&lt;/home&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Users home directories prefix.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>expire</literal>
         </para>
        </entry>
        <entry>
         <para>
          Date
         </para>
<screen>&lt;expire&gt;2017-12-31&lt;/expire&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default password expiration date in <literal>YYYY-MM-DD</literal> format.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>inactive</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number
         </para>
<screen>&lt;inactive&gt;3&lt;/inactive&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Number of days after an expired account is disabled.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>no_group</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
<screen>&lt;no_groups config:type="boolean"&gt;true&lt;/no_groups&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Do not use secondary groups.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>shell</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;shell&gt;/usr/bin/fish&lt;/shell&gt;</screen>
        </entry>
        <entry>
         <para>
          Default login shell. <literal>/bin/bash</literal> is the default value. If you
          choose another one, make sure that it's installed (adding the corresponding
          package to the <literal>software</literal> section).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>skel</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;skel&gt;/etc/skel&lt;/skel&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Location of the files to be used as skel when adding a new user. You can find more
          issue in <literal>man 8 useradd</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>umask</literal>
         </para>
        </entry>
        <entry>
         <para>
          File creation mode mask
         </para>
<screen>&lt;umask&gt;022&lt;/umask&gt;</screen>
        </entry>
        <entry>
         <para>
          Set the file creation mode mask for the home directory. By default
          <literal>useradd</literal> will use <literal>022</literal>. Check <literal>man 8 useradd</literal>
          and <literal>man 1 umask</literal> for further information.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="Configuration.Security.groups">
    <title>Groups</title>

    <para>
     A list of groups can be defined in the <literal>&lt;groups&gt;</literal>
     as shown in the example.
    </para>

    <example>
     <title>Group Configuration</title>
     <screen>&lt;groups&gt;
  &lt;group&gt;
    &lt;gid&gt;100&lt;gid&gt;
    &lt;groupname&gt;users&lt;/groupname&gt;
    &lt;userlist&gt;bob,alice&lt;/userlist&gt;
  &lt;/group&gt;
&lt;/groups&gt;</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>groupname</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;groupname&gt;users&lt;/groupname&gt;</screen>
        </entry>
        <entry>
         <para>
          Required. It should be a valid groupname. Check <literal>man 8 groupadd</literal>
          if you're not sure.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>gid</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number
         </para>
<screen>&lt;gid&gt;100&lt;/gid&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Group ID. It must be a unique and non-negative number.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>group_password</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;group_password&gt;password&lt;/group_password&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. The group's password can be written in plain text (not
          recommended) or in encrypted form. Check the <literal>encrypted</literal> to
          select the desired behaviour.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>encrypted</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
<screen>&lt;encrypted config:type="boolean"&gt;true&lt;/encrypted&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Indicates if the group's password in the profile is encrypted or not.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>userlist</literal>
         </para>
        </entry>
        <entry>
         <para>
          Users list
         </para>
<screen>&lt;userlist&gt;bob,alice&lt;/userlist&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. A list of users who belong to the group. Usernames must be separated by commas.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="Configuration.Security.login_settings">
    <title>Login Settings</title>

    <para>Two special login settings can be enabled through an AutoYaST profile:
    autologin and password-less login. Both of them are disabled by default.</para>

    <example>
     <title>Enabling autologin and password-less login</title>
     <screen>&lt;login_settings&gt;
  &lt;autologin_user&gt;vagrant&lt;/autologin_user>
  &lt;password_less_login config:type="boolean"&gt;true&lt;/password_less_login>
&lt;/login_settings&gt;</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>password_less_login</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
<screen>&lt;password_less_login config:type="boolean"&gt;true&lt;/password_less_login&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Enables password-less login. It only affects to graphical login.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autologin_user</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;autologin_user&gt;alice&lt;/autologin_user&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Enables autologin for the given user.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

  </sect1>

  <sect1 xml:id="createprofile.scripts">
   <title>Custom User Scripts</title>

   <para>
    By adding scripts to the auto-installation process you can customize the
    installation according to your needs and take control in different
    stages of the installation.
   </para>

   <para>
    In the auto-installation process, five types of scripts can be executed
    at different points in time during the installation:
   </para>

   <para>
    All scripts need to be in the &lt;scripts&gt; section.
   </para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      <literal>pre-scripts</literal> (very early, before anything else
      really happens)
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>postpartitioning-scripts</literal> (after partitioning and
      mounting to <filename>/mnt</filename> but before RPM installation)
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>chroot-scripts</literal> (after the package installation,
      before the first boot)
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>post-scripts</literal> (during the first boot of the
      installed system, no services running)
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>init-scripts</literal> (during the first boot of the
      installed system, all services up and running)
     </para>
    </listitem>
   </itemizedlist>

   <sect2 xml:id="pre-install.scripts">
    <title>Pre-Install Scripts</title>
    <para>
     Executed before &yast; does any real change to the system (before
     partitioning and package installation but after the hardware
     detection).
    </para>
    <para>
     You can use a pre-script to modify your control file and let &ay;
     reread it. Find your control file in
     <filename>/tmp/profile/autoinst.xml</filename>. Adjust the file and
     store the modified version in
     <filename>/tmp/profile/modified.xml</filename>. &ay; will read the
     modified file after the pre-script finishes.
    </para>
    <para>
     It is also possible to change the partitioning in your pre-script.
    </para>
    <note>
     <title>Pre-Install Scripts with Confirmation</title>
     <para>
      Pre-scripts are executed at an early stage of the installation. This
      means if you have requested to confirm the installation, the
      pre-scripts will be executed before the confirmation screen shows up
      (<literal>profile/install/general/mode/confirm</literal>).
     </para>
    </note>
    <note>
     <title>Pre-Install and Zypper</title>
     <para>
      If you want to call <emphasis>zypper</emphasis> in the pre-install
      script you will need to set the environment variable <emphasis>ZYPP_LOCKFILE_ROOT="/var/run/autoyast"</emphasis>
      in order to prevent conflicts with the running &yast; process.
     </para>
    </note>
    <para>
     Pre-Install Script elements must be placed as follows:
    </para>
<screen>&lt;scripts&gt;
  &lt;pre-scripts config:type="list"&gt;
    &lt;script&gt;
      ...
    &lt;/script&gt;
  &lt;/pre-scripts&gt;
&lt;/scripts&gt;</screen>
   </sect2>

   <sect2 xml:id="postpartitioning-install.scripts">
    <title>Post-partitioning Scripts</title>
    <para>
     Executed after &yast; has done the partitioning and written the
     fstab. The empty system is already mounted to
     <filename>/mnt</filename>.
    </para>
    <para>
     Post-partitioning script elements must be placed as follows:
    </para>
<screen>&lt;scripts&gt;
  &lt;postpartitioning-scripts config:type="list"&gt;
    &lt;script&gt;
      ...
    &lt;/script&gt;
  &lt;/postpartitioning-scripts&gt;
&lt;/scripts&gt;</screen>
   </sect2>

   <sect2 xml:id="chroot.scripts">
    <title>Chroot Environment Scripts</title>
    <para>
     Chroot scripts are executed before the machine reboots for the first
     time. You can execute chroot scripts before the installation chroots
     into the installed system and configures the boot loader or you can
     execute a script after the chroot into the installed system has
     happened (look at the <literal>chrooted</literal> parameter for that).
    </para>
    <para>
     Chroot Environment script elements must be placed as follows:
    </para>
<screen>&lt;scripts&gt;
  &lt;chroot-scripts config:type="list"&gt;
    &lt;script&gt;
      ...
    &lt;/script&gt;
  &lt;/chroot-scripts&gt;
&lt;/scripts&gt;</screen>
   </sect2>

   <sect2 xml:id="post-install.scripts">
    <title>Post-Install Scripts</title>
    <para>
     These scripts are executed after &ay; has completed the system
     configuration and after it has booted the system for the first time.
    </para>
    <para>
     It is possible to execute post scripts in an earlier phase while the
     installation network is still up and before &ay; configures the
     system. To run network-enabled post scripts, the boolean property
     <literal>network_needed</literal> needs to be set to
     <literal>true</literal>.
    </para>
    <para>
     Post-install script elements must be placed as follows:
    </para>
<screen>&lt;scripts&gt;
    &lt;post-scripts config:type="list"&gt;
      &lt;script&gt;
        ...
      &lt;/script&gt;
    &lt;/post-scripts&gt;
  &lt;/scripts&gt;</screen>
   </sect2>

   <sect2 xml:id="init.scripts">
    <title>Init Scripts</title>
    <para>
     These scripts are executed when &yast; has finished, during the
     initial boot process after the network has been initialized. These
     final scripts are executed using
     <filename>/usr/lib/YaST2/bin/autoyast-initscripts.sh</filename> and are
     executed only once. Init scripts are configured using the tag
     <emphasis>init-scripts</emphasis>.
    </para>
    <para>
     The following elements must be between the
     &lt;scripts&gt;&lt;init-scripts
     config:type="list"&gt;&lt;script&gt; ...
     &lt;/script&gt;&lt;/init-scripts&gt;...&lt;/scripts&gt;
     tags
    </para>
    <table>
     <title>Init script XML representation</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>location</literal>
         </para>
        </entry>
        <entry>
         <para>
          Define a location from where the script gets fetched. Locations
          can be the same as for the profile (HTTP, FTP, NFS, etc.).
         </para>
<screen>&lt;location
&gt;http://10.10.0.1/myInitScript.sh&lt;/location&gt;</screen>
        </entry>
        <entry>
         <para>
          Either &lt;location&gt; or &lt;source&gt; must be
          defined.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>source</literal>
         </para>
        </entry>
        <entry>
         <para>
          The script itself (source code), encapsulated in a CDATA tag. If
          you do not want to put the whole shell script into the XML
          profile, use the location parameter.
         </para>
<screen>&lt;source&gt;
&lt;![CDATA[
echo "Testing the init script" &gt;
/tmp/init_out.txt
]]&gt;
&lt;/source&gt;</screen>
        </entry>
        <entry>
         <para>
          Either &lt;location&gt; or &lt;source&gt; must be
          defined.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>filename</literal>
         </para>
        </entry>
        <entry>
         <para>
          The file name of the script. It will be stored in a temporary
          directory under <filename>/tmp</filename>
         </para>
<screen>&lt;filename&gt;mynitScript5.sh&lt;/filename&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional in case you only have a single init script. The default
          name (<filename>init-scripts</filename>) is used in this case. If
          having specified more than one init script, you must set a unique
          name for each script.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>rerun</literal>
         </para>
        </entry>
        <entry>
         <para>
          A script is only run once. Even if you use ayast_setup to run an
          XML file multiple times, the script is only run once. Change this
          default behavior by setting this boolean to
          <literal>true</literal>.
         </para>
<screen>&lt;rerun config:type="boolean"&gt;true&lt;/rerun&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>false</literal> (scripts only run
          once).
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>
     When added to the control file manually, scripts need to be included in
     a <emphasis>CDATA</emphasis> element to avoid confusion with the file
     syntax and other tags defined in the control file.
    </para>
   </sect2>

   <sect2 xml:id="scripts.syntax">
    <title>Script XML Representation</title>
    <para>
     All XML elements described below can be used for each of the script
     types described above. The only exceptions are
     <literal>chrooted</literal> and
     <literal>network_needed</literal>&mdash;they are only valid for
     chroot and post-install scripts.
    </para>
    <table>
     <title>Script XML Representation</title>
     <tgroup cols="3">
      <colspec colwidth="1*"/>
      <colspec colwidth="3*"/>
      <colspec colwidth="2*"/>
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>location</literal>
         </para>
        </entry>
        <entry>
         <para>
          Define a location from where the script gets fetched. Locations
          can be the same as for the control file (HTTP, FTP, NFS, etc.).
         </para>
<screen>&lt;location
&gt;http://10.10.0.1/myPreScript.sh&lt;/location&gt;</screen>
        </entry>
        <entry>
         <para>
          Either <literal>location</literal> or <literal>source</literal>
          must be defined.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>source</literal>
         </para>
        </entry>
        <entry>
         <para>
          The script itself (source code), encapsulated in a CDATA tag. If
          you do not want to put the whole shell script into the XML control
          file, refer to the location parameter.
         </para>
<screen>&lt;source&gt;
&lt;![CDATA[
echo "Testing the pre script" &gt; /tmp/pre-script_out.txt
]]&gt;
&lt;/source&gt;</screen>
        </entry>
        <entry>
         <para>
          Either <literal>location</literal> or <literal>source</literal>
          must be defined.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>interpreter</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify the interpreter that must be used for the script.
          Supported options are shell and perl.
         </para>
<screen>&lt;interpreter&gt;perl&lt;/interpreter&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional (default is <literal>shell</literal>).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>file name</literal>
         </para>
        </entry>
        <entry>
         <para>
          The file name of the script. It will be stored in a temporary
          directory under <filename>/tmp</filename>.
         </para>
<screen>&lt;filename&gt;myPreScript5.sh&lt;/filename&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default is the type of the script (pre-scripts in this
          case). If you have more than one script, you should define
          different names for each script.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>feedback</literal>
         </para>
        </entry>
        <entry>
         <para>
          If this boolean is <literal>true</literal>, output and error
          messages of the script (STDOUT and STDERR) will be shown in a
          pop-up, which the user needs to confirm via the OK button. the
          pop-up will only be shown if the script produces any such output.
         </para>
<screen>&lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>feedback_type</literal>
         </para>
        </entry>
        <entry>
         <para>
          This can be <literal>message</literal>, <literal>warning</literal>
          or <literal>error</literal>. Set the timeout for these pop-ups in
          the &lt;report&gt; section.
         </para>
<screen>&lt;feedback_type&gt;warning&lt;/feedback_type&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, if missing, an always blocking pop-up is used.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>debug</literal>
         </para>
        </entry>
        <entry>
         <para>
          If this is <literal>true</literal>, every single line of a shell
          script is logged. Perl scripts are run with warnings turned on.
         </para>
<screen>&lt;debug config:type="boolean"&gt;true&lt;/debug&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>true</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>notification</literal>
         </para>
        </entry>
        <entry>
         <para>
          This text will be shown in a pop-up for the time the script is
          running in the background.
         </para>
<screen>&lt;notification&gt;Please wait while script is running...&lt;/notification&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, if not configured, no notification pop-up will be shown.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>param-list</literal>
         </para>
        </entry>
        <entry>
         <para>
          It is possible to specify parameters given to the script being
          called. You may have more than one <literal>param</literal> entry.
          They are concatenated by a single space character on the script
          command line. If any shell quoting should be necessary (for
          example to protect embedded spaces) you need to include this.
         </para>
<screen>&lt;param-list&gt;
  &lt;param&gt;par1&lt;/param&gt;
  &lt;param&gt;par2 par3&lt;/param&gt;
  &lt;param&gt;"par4.1 par4.2"&lt;/param&gt;
&lt;/param-list&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, if not configured, no parameters get passed to script.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>rerun</literal>
         </para>
        </entry>
        <entry>
         <para>
          A script is only run once. Even if you use
          <literal>ayast</literal>_setup to run an XML file multiple times,
          the script is only run once. Change this default behavior by
          setting this boolean to <literal>true</literal>.
         </para>
<screen>&lt;rerun config:type="boolean"&gt;true&lt;/rerun&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>false</literal> (scripts only run
          once).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>chrooted</literal>
         </para>
        </entry>
        <entry>
         <para>
          If set to <literal>false</literal>, the installed system remains
          mounted at <filename>/mnt</filename> and no chroot happens. The
          boot loader is not installed either at this stage. Setting it to
          <literal>true</literal> means, a chroot into
          <filename>/mnt</filename> is performed, where the installed system
          is mounted. The boot loader is installed, and if you want to
          change anything in the installed system, you do not need to use the
          <filename>/mnt</filename> prefix anymore.
         </para>
<screen>&lt;chrooted config:type="boolean"
&gt;true&lt;/chrooted&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>false</literal>. This option is only
          available for chroot environment scripts.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>network_needed</literal>
         </para>
        </entry>
        <entry>
         <para>
          <remark>FIXME: double check that. I'm very unsure if this is
          correct</remark>
          If set to <literal>false</literal> the script will run after the
          &yast; modules like the user configuration and everything else
          are done. The network is configured but not up and running yet.
          With this value set to <literal>true</literal>, the script runs
          before all &yast; modules are configured. So there is no local
          user and no network is configured but the installation network is
          still up and running (if you did a network installation).
         </para>
<screen>&lt;network_needed config:type="boolean"
&gt;true&lt;/network_needed&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>false</literal>. This option is only
          available for post-install scripts.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="script_examples">
    <title>Script Example</title>
    <example>
     <title>Script Configuration</title>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
&lt;scripts&gt;
  &lt;chroot-scripts config:type="list"&gt;
    &lt;script&gt;
      &lt;chrooted config:type="boolean"&gt;true&lt;/chrooted&gt;
      &lt;filename&gt;chroot.sh&lt;/filename&gt;
      &lt;interpreter&gt;shell&lt;/interpreter&gt;
      &lt;source&gt;&lt;![CDATA[
#!/bin/sh
echo "Testing chroot (chrooted) scripts"
ls
]]&gt;
      &lt;/source&gt;
    &lt;/script&gt;
    &lt;script&gt;
      &lt;filename&gt;chroot.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
#!/bin/sh
echo "Testing chroot scripts"
df
cd /mnt
ls
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/chroot-scripts&gt;
    &lt;post-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;post.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
#!/bin/sh

echo "Running Post-install script"
systemctl start portmap
mount -a 192.168.1.1:/local /mnt
cp /mnt/test.sh /tmp
umount /mnt
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
      &lt;script&gt;
        &lt;filename&gt;post.pl&lt;/filename&gt;
        &lt;interpreter&gt;perl&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
#!/usr/bin/perl
print "Running Post-install script";

]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/post-scripts&gt;
    &lt;pre-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;location&gt;http://192.168.1.1/profiles/scripts/prescripts.sh&lt;/location&gt;
      &lt;/script&gt;
      &lt;script&gt;
        &lt;filename&gt;pre.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
#!/bin/sh
echo "Running pre-install script"
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/pre-scripts&gt;
    &lt;postpartitioning-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;postpart.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
        &lt;source&gt;&lt;![CDATA[
touch /mnt/testfile
echo Hi
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/postpartitioning-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</screen>
    </example>
    <para>
     After installation is finished, the scripts and the output logs can be
     found in the directory <filename>/var/adm/autoinstall</filename>. The
     scripts are located in the subdirectory <filename>scripts</filename>
     and the output logs in the <filename>log</filename> directory.
    </para>
    <para>
     The log consists of the output produced when executing the shell
     scripts using the following command:
    </para>
<screen>/bin/sh -x <replaceable>SCRIPT_NAME</replaceable> 2&amp;&gt;/var/adm/autoinstall/logs/<replaceable>SCRIPT_NAME</replaceable>.log</screen>
   </sect2>
  </sect1>
  <sect1 xml:id="createprofile.sysconfig">
   <title>System Variables (Sysconfig)</title>

   <para>
    Using the sysconfig resource, it is possible to define configuration
    variables in the sysconfig repository
    (<filename>/etc/sysconfig</filename>) directly. Sysconfig variables,
    offer the possibility to fine-tune many system components and
    environment variables exactly to your needs.
   </para>

   <para>
    The following example shows how a variable can be set using the
    sysconfig resource.
   </para>

   <example>
    <title>Sysconfig Configuration</title>
<screen>&lt;sysconfig config:type="list" &gt;
  &lt;sysconfig_entry&gt;
    &lt;sysconfig_key&gt;XNTPD_INITIAL_NTPDATE&lt;/sysconfig_key&gt;
    &lt;sysconfig_path&gt;/etc/sysconfig/xntp&lt;/sysconfig_path&gt;
    &lt;sysconfig_value&gt;ntp.host.com&lt;/sysconfig_value&gt;
  &lt;/sysconfig_entry&gt;
  &lt;sysconfig_entry&gt;
    &lt;sysconfig_key&gt;HTTP_PROXY&lt;/sysconfig_key&gt;
    &lt;sysconfig_path&gt;/etc/sysconfig/proxy&lt;/sysconfig_path&gt;
    &lt;sysconfig_value&gt;proxy.host.com:3128&lt;/sysconfig_value&gt;
  &lt;/sysconfig_entry&gt;
  &lt;sysconfig_entry&gt;
    &lt;sysconfig_key&gt;FTP_PROXY&lt;/sysconfig_key&gt;
    &lt;sysconfig_path&gt;/etc/sysconfig/proxy&lt;/sysconfig_path&gt;
    &lt;sysconfig_value&gt;proxy.host.com:3128&lt;/sysconfig_value&gt;
  &lt;/sysconfig_entry&gt;
&lt;/sysconfig&gt;</screen>
    <para>
     Both relative and absolute paths can be provided. If no absolute path
     is given, it is treated as a sysconfig file under the
     <filename>/etc/sysconfig</filename> directory.
    </para>
   </example>
  </sect1>
  <sect1 xml:id="createprofile.completeconf">
   <title>Adding Complete Configurations</title>

   <para>
    For many applications and services you might have prepared a
    configuration file which should be copied to the appropriate location in
    the installed system, for example if you are installing a Web server and
    have a <literal>ready to go</literal> server configuration file
    (<filename>httpd.conf</filename>).
   </para>

   <para>
    Using this resource, you can embed the file into the control file by
    specifying the final path on the installed system. &yast; will copy
    this file to the specified location.
   </para>

   <para>
    This feature requires the <package>autoyast2</package> package to be
    installed. If the package is missing, &ay; will automatically install the
    package if it is missing.
   </para>

   <para>
    You can specify the <literal>file_location</literal> where the file
    should be retrieved from. This can also be a location on the network
    such as an HTTP server:
    <literal>&lt;file_location&gt;http://my.server.site/issue&lt;/file_location&gt;</literal>.
   </para>

   <para>
    You can create directories by specifying a <literal>file_path</literal>
    that ends with a slash.
   </para>

   <example>
    <title>Dumping files into the installed system</title>
<screen>&lt;files config:type="list"&gt;
  &lt;file&gt;
    &lt;file_path&gt;/etc/apache2/httpd.conf&lt;/file_path&gt;
    &lt;file_contents&gt;

&lt;![CDATA[
some content
]]&gt;

    &lt;/file_contents&gt;
  &lt;/file&gt;
  &lt;file&gt;
    &lt;file_path&gt;/mydir/a/b/c/&lt;/file_path&gt; &lt;!-- create directory --&gt;
  &lt;/file&gt;
&lt;/files&gt;</screen>
   </example>

   <para>
    A more advanced example is shown below. This configuration will create a
    file using the content supplied in <literal>file_contents</literal> and
    change the permissions and ownership of the file. After the file has
    been copied to the system, a script is executed, which can be used to
    manipulate the file and prepare it for the environment of the client.
   </para>

   <example>
    <title>Dumping files into the installed system</title>
<screen>&lt;files config:type="list"&gt;
  &lt;file&gt;
    &lt;file_path&gt;/etc/someconf.conf&lt;/file_path&gt;
    &lt;file_contents&gt;

&lt;![CDATA[
some content
]]&gt;

    &lt;/file_contents&gt;
    &lt;file_owner&gt;&exampleuser_plain;.users&lt;/file_owner&gt;
    &lt;file_permissions&gt;444&lt;/file_permissions&gt;
    &lt;file_script&gt;
      &lt;interpreter&gt;shell&lt;/interpreter&gt;
      &lt;source&gt;

&lt;![CDATA[
#!/bin/sh

echo "Testing file scripts" &gt;&gt; /etc/someconf.conf
df
cd /mnt
ls
]]&gt;

      &lt;/source&gt;
    &lt;/file_script&gt;
  &lt;/file&gt;
&lt;/files&gt;</screen>
   </example>
  </sect1>
  <sect1 xml:id="CreateProfile.Ask">
   <title>Ask the User for Values during Installation</title>

   <para>
    You have the option to let the user decide the values of specific parts
    of the control file during the installation. If you use this feature, a
    pop-up will ask the user to enter a specific part of the control file
    during installation. If you want a full auto installation, but the user
    should set the password of the local account, you can do this via the
    <literal>ask</literal> directive in the control file.
   </para>

   <para>
    The elements listed below must be placed within the following XML
    structure:
   </para>

<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      ...
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>

   <table>
    <title>Ask the User for Values: XML representation</title>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Element
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
       <entry>
        <para>
         Comment
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>question</literal>
        </para>
       </entry>
       <entry>
        <para>
         The question you want to ask the user.
        </para>
<screen>&lt;question&gt;Enter the LDAP server&lt;/question&gt;</screen>
       </entry>
       <entry>
        <para>
         The default value is the path to the element (the path often looks
         strange, so we recommend entering a question).
        </para>
        <remark>emap 2011-11-04: not sure I understand this.</remark>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>default</literal>
        </para>
       </entry>
       <entry>
        <para>
         Set a preselection for the user. A text entry will be filled out
         with this value. A check box will be true or false and a selection
         will have the given value preselected.
        </para>
<screen>&lt;default&gt;dc=suse,dc=de&lt;/default&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>help</literal>
        </para>
       </entry>
       <entry>
        <para>
         An optional help text that is shown on the left side of the
         question.
        </para>
<screen>&lt;help&gt;Enter the LDAP server address.&lt;/help&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>title</literal>
        </para>
       </entry>
       <entry>
        <para>
         An optional title that is shown above the questions.
        </para>
<screen>&lt;title&gt;LDAP server&lt;/title&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>type</literal>
        </para>
       </entry>
       <entry>
        <para>
         The type of the element you want to change. Possible values are
         <literal>symbol</literal>, <literal>boolean</literal>,
         <literal>string</literal> and <literal>integer</literal>. The file
         system in the partition section is a symbol, while the
         <literal>encrypted</literal> element in the user configuration is a
         boolean. You can see the type of that element if you look in your
         control file at the <literal>config:type="...."</literal>
         attribute. You can also use <literal>static_text</literal> as type.
         A <literal>static_text</literal> is a text that does not
         require any user input and can be used to show information if it is
         not wanted in the help text.
        </para>
<screen>&lt;type&gt;symbol&lt;/type&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>string</literal>. If type is
         <literal>symbol</literal>, you must provide the selection element
         too (see below).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>password</literal>
        </para>
       </entry>
       <entry>
        <para>
         If this boolean is set to <literal>true</literal>, a password
         dialog pops up instead of a simple text entry. Setting this to
         <literal>true</literal> only makes sense if <literal>type</literal>
         is string.
        </para>
<screen>&lt;password config:type="boolean"&gt;true&lt;/password&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>false</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>pathlist</literal>
        </para>
       </entry>
       <entry>
        <para>
         A list of <literal>path</literal> elements. A path is a comma
         separated list of elements that describes the path to the element
         you want to change. For example, the LDAP server element can be
         found in the control file in the
         <literal>&lt;ldap&gt;&lt;ldap_server&gt;</literal> section.
         So if you want to change that value, you need to set the path to
         <literal>ldap,ldap_server</literal>.
        </para>
        <screen>&lt;pathlist config:type="list"&gt;
  &lt;path&gt;networking,dns,hostname&lt;/path&gt;
  &lt;path&gt;...&lt;/path&gt;
&lt;/pathlist&gt;
        </screen>
        <para>If you want to change the
         password of the first user in the control file, you need to set the
         path to <literal>users,0,user_password</literal>. The
         <literal>0</literal> indicates the first user in the &lt;users
         config:type="list"&gt; list of users in the control file.
         <literal>1</literal> would be the second one, and so on.
        </para>
        <screen>&lt;users config:type="list"&gt;
  &lt;user&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;user_password&gt;password to change&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
  &lt;user&gt;
    &lt;username&gt;&exampleuser_plain;&lt;/username&gt;
    &lt;user_password&gt;password to change&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
&lt;/users&gt;
        </screen>

       </entry>
       <entry>
        <para>
         This information is optional but you should at least provide
         <literal>path</literal> or <literal>file</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>file</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can store the answer to a question in a file, to use it in one
         of your scripts later. If you ask during
         <literal>stage=initial</literal> and you want to use the answer in
         stage&nbsp;2 then you need to copy the answer-file in a chroot script
         that is running as <literal>chrooted=false</literal>. Use the
         command: <command>cp /tmp/my_answer /mnt/tmp/</command>. The reason
         is that <filename>/tmp</filename> in stage&nbsp;1 is in the RAM disk
         and will get lost after the reboot, but the installed system is
         already mounted at <filename>/mnt/</filename>.
        </para>
<screen>&lt;file&gt;/tmp/answer_hostname&lt;/file&gt;</screen>
       </entry>
       <entry>
        <para>
         This information is optional, but you should at least provide
         <literal>path</literal> or <literal>file</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>password</literal>
        </para>
       </entry>
       <entry>
        <para>
         If this boolean is set to <literal>true</literal>, a password
         dialog pops up instead of a simple text entry. Setting this to
         <literal>true</literal> only makes sense if <literal>type</literal>
         is string.
        </para>
<screen>&lt;password config:type="boolean"&gt;true&lt;/password&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>false</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         stage
        </para>
       </entry>
       <entry>
        <para>
         Stage configures the installation stage in which the question pops
         up. You can set this value to <literal>cont</literal> or
         <literal>initial</literal>. <literal>initial</literal> means the
         pop-up comes up very early in the installation, shortly after the
         pre-script has run. <literal>cont</literal> means, that the dialog
         with the question comes after the first reboot when the system
         boots for the very first time. Questions you answer during the
         <literal>initial</literal> stage will write their answer into the
         control file on the hard disk. You should know that if you enter
         clear text passwords during <literal>initial</literal>. Of course
         it does not make sense to ask for the file system to use during the
         <literal>cont</literal> phase. The hard disk is already partitioned
         at that stage and the question will have no effect.
        </para>
<screen>&lt;stage&gt;cont&lt;/stage&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>initial</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>selection</literal>
        </para>
       </entry>
       <entry>
        <para>
         The selection element contains a list of <literal>entry</literal>
         elements. Each entry represents a possible option for the user to
         choose. The user cannot enter a value in a text box, but he can
         choose from a list of values.
        </para>
<screen>&lt;selection config:type="list"&gt;
  &lt;entry&gt;
    &lt;value&gt;
        btrfs
    &lt;/value&gt;
    &lt;label&gt;
        Btrfs File System
    &lt;/label&gt;
  &lt;/entry&gt;
  &lt;entry&gt;
    &lt;value&gt;
        ext3
    &lt;/value&gt;
    &lt;label&gt;
        Extended3 File System
    &lt;/label&gt;
  &lt;/entry&gt;
&lt;/selection&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional for <literal>type=string</literal>, not possible for
         <literal>type=boolean</literal> and mandatory for
         <literal>type=symbol</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>dialog</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can ask more than one question per dialog. To do so, specify
         the dialog-id with an integer. All questions with the same
         dialog-id belong to the same dialog. The dialogs are sorted by the
         id too.
        </para>
<screen>&lt;dialog config:type="integer"&gt;3&lt;/dialog&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>element</literal>
        </para>
       </entry>
       <entry>
        <para>
         you can have more than one question per dialog. To make that
         possible you need to specify the element-id with an integer. The
         questions in a dialog are sorted by id.
        </para>
<screen>&lt;element config:type="integer"&gt;1&lt;/element&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional (see dialog).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>width</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can increase the default width of dialog. If there are multiple
         width specifications per dialog, the largest one is used. The
         number is roughly equivalent to the number of characters.
        </para>
<screen>&lt;width config:type="integer"&gt;50&lt;/width&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>height</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can increase default height of dialog. If there are multiple
         height specifications per dialog, largest one is used. The number
         is roughly equivalent to number of lines.
        </para>
<screen>&lt;height config:type="integer"&gt;15&lt;/height&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>frametitle</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can have more than one question per dialog. Each question on a
         dialog has a frame that can have a frame title, a small caption for
         each question. You can put multiple elements into one frame. They
         need to have the same frame title.
        </para>
<screen>&lt;frametitle&gt;User data&lt;/frametitle&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. Default is no frame title.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>script</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can run scripts after a question has been answered (see the
         table below for detailed instructions about scripts).
        </para>
<screen>&lt;script&gt;...&lt;/script&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional (default is no script).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>ok_label</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can change the label on the <guimenu>Ok</guimenu> button. The
         last element that specifies the label for a dialog wins.
        </para>
<screen>&lt;ok_label&gt;Finish&lt;/ok_label&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>back_label</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can change the label on the <guimenu>Back</guimenu> button. The
         last element that specifies the label for a dialog wins.
        </para>
<screen>&lt;back_label&gt;change values&lt;/back_label&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>timeout</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can specify an integer here that is used as timeout in seconds.
         If the user does not answer the question before the timeout, the
         default value is taken as answer. When the user touches or changes
         any widget in the dialog, the timeout is turned off and the dialog
         needs to be confirmed via <guimenu>Ok</guimenu>.
        </para>
<screen>&lt;timeout config:type="integer"&gt;30&lt;/timeout&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. A missing value is interpreted as <literal>0</literal>,
         which means that there is no timeout.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>default_value_script</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can run scripts to set the default value for a question (see
         <xref linkend="CreateProfile.Ask.default_value"/> for detailed
         instructions about default value scripts). This feature is useful
         if you can <literal>calculate</literal> a default value, especially
         in combination with the <literal>timeout</literal> option.
        </para>
<screen>&lt;default_value_script&gt;...&lt;/default_value_script&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. Default is no script.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>

   <sect2 xml:id="CreateProfile.Ask.default_value">
    <title>Default Value Scripts</title>
    <para>
     You can run scripts to set the default value for a question. This
     feature is useful if you can <literal>calculate</literal> a default
     value, especially in combination with the <literal>timeout</literal>
     option.
    </para>
    <para>
     The elements listed below must be placed within the following XML
     structure:
    </para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;default_value_script&gt;
        ...
      &lt;/default_value_script&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
    <table>
     <title>Default Value Scripts: XML representation</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>source</literal>
         </para>
        </entry>
        <entry>
         <para>
          The source code of the script. Whatever you
          <command>echo</command> to STDOUT will be used as default value
          for the ask-dialog. If your script has an exit code other than 0,
          the normal default element is used. Take care you use
          <command>echo -n</command> to suppress the <literal>\n</literal>
          and that you echo reasonable values and not <quote>okay</quote>
          for a boolean
         </para>
<screen>&lt;source&gt;...&lt;/source&gt;</screen>
        </entry>
        <entry>
         <para>
          This value is required, otherwise nothing would be executed.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>interpreter</literal>
         </para>
        </entry>
        <entry>
         <para>
          The interpreter to use.
         </para>
<screen>&lt;interpreter&gt;perl&lt;/interpreter&gt;</screen>
        </entry>
        <entry>
         <para>
          The default value is <literal>shell</literal>. You can also set
          <filename>/bin/myinterpreter</filename> as value.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="CreateProfile.Ask.script">
    <title>Scripts</title>
    <para>
     You can run scripts after a question has been answered.
    </para>
    <para>
     The elements listed below must be placed within the following XML
     structure:
    </para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;script&gt;
        ...
      &lt;/script&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
    <table>
     <title>Scripts: XML representation</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>file name</literal>
         </para>
        </entry>
        <entry>
         <para>
          The file name of the script.
         </para>
<screen>&lt;filename&gt;my_ask_script.sh&lt;/filename&gt;</screen>
        </entry>
        <entry>
         <para>
          The default is ask_script.sh
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>source</literal>
         </para>
        </entry>
        <entry>
         <para>
          The source code of the script. Together with
          <literal>rerun_on_error</literal> activated, you check the value
          that was entered for sanity. Your script can create a file
          <filename>/tmp/next_dialog</filename> with a dialog id specifying
          the next dialog &ay; will raise. A value of -1 terminates the
          ask sequence. If that file is not created, &ay; will run the
          dialogs in the normal order (since 11.0 only).
         </para>
<screen>&lt;source&gt;...&lt;/source&gt;</screen>
        </entry>
        <entry>
         <para>
          This value is required, otherwise nothing would be executed.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>environment</literal>
         </para>
        </entry>
        <entry>
         <para>
          A boolean that passes the value of the answer to the question as
          an environment variable to the script. The variable is named
          <envar>VAL</envar>.
         </para>
<screen>&lt;environment config:type="boolean"&gt;true&lt;/environment&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>feedback</literal>
         </para>
        </entry>
        <entry>
         <para>
          A boolean that turns on feedback for the script execution. STDOUT
          will be displayed in a pop-up window that must be confirmed after
          the script execution.
         </para>
<screen>&lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>debug</literal>
         </para>
        </entry>
        <entry>
         <para>
          A boolean that turns on debugging for the script execution.
         </para>
<screen>&lt;debug config:type="boolean"&gt;true&lt;/debug&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>true</literal>. This value needs
          <literal>feedback</literal> to be turned on, too.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>rerun_on_error</literal>
         </para>
        </entry>
        <entry>
         <para>
          A boolean that keeps the dialog open until the script has an exit
          code of 0 (zero). So you can parse and check the answers the user
          gave in the script and display an error with the
          <literal>feedback</literal> option.
         </para>
<screen>&lt;rerun_on_error config:type="boolean"&gt;true&lt;/rerun_on_error&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>false</literal>. This value should
          be used together with the feedback option.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>
     Below you can see an example of the usage of the <literal>ask</literal>
     feature.
    </para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;ldap,ldap_server&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;stage&gt;cont&lt;/stage&gt;
      &lt;help&gt;Choose your server depending on your department&lt;/help&gt;
      &lt;selection config:type="list"&gt;
        &lt;entry&gt;
          &lt;value&gt;ldap1.mydom.de&lt;/value&gt;
          &lt;label&gt;LDAP for development&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value&gt;ldap2.mydom.de&lt;/value&gt;
          &lt;label&gt;LDAP for sales&lt;/label&gt;
        &lt;/entry&gt;
      &lt;/selection&gt;
      &lt;default&gt;ldap2.mydom.de&lt;/default&gt;
      &lt;default_value_script&gt;
        &lt;source&gt; &lt;![CDATA[
echo -n "ldap1.mydom.de"
]]&gt;
        &lt;/source&gt;
      &lt;/default_value_script&gt;
    &lt;/ask&gt;
    &lt;ask&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;networking,dns,hostname&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;question&gt;Enter Hostname&lt;/question&gt;
      &lt;stage&gt;initial&lt;/stage&gt;
      &lt;default&gt;enter your hostname here&lt;/default&gt;
    &lt;/ask&gt;
    &lt;ask&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;partitioning,0,partitions,0,filesystem&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;question&gt;File System&lt;/question&gt;
      &lt;type&gt;symbol&lt;/type&gt;
      &lt;selection config:type="list"&gt;
        &lt;entry&gt;
          &lt;value config:type="symbol"&gt;reiser&lt;/value&gt;
          &lt;label&gt;default File System (recommended)&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value config:type="symbol"&gt;ext3&lt;/value&gt;
          &lt;label&gt;Fallback File System&lt;/label&gt;
        &lt;/entry&gt;
      &lt;/selection&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
    <para>
     The following example shows a to choose between &ay; control files.
     &ay; will read the <filename>modified.xml</filename> file again
     after the ask-dialogs are done. This way you can fetch a complete new
     control file.
    </para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;selection config:type="list"&gt;
        &lt;entry&gt;
          &lt;value&gt;part1.xml&lt;/value&gt;
          &lt;label&gt;Simple partitioning&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value&gt;part2.xml&lt;/value&gt;
          &lt;label&gt;encrypted /tmp&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value&gt;part3.xml&lt;/value&gt;
          &lt;label&gt;LVM&lt;/label&gt;
        &lt;/entry&gt;
      &lt;/selection&gt;
      &lt;title&gt;XML Profile&lt;/title&gt;
      &lt;question&gt;Choose a profile&lt;/question&gt;
      &lt;stage&gt;initial&lt;/stage&gt;
      &lt;default&gt;part1.xml&lt;/default&gt;
      &lt;script&gt;
        &lt;filename&gt;fetch.sh&lt;/filename&gt;
        &lt;environment config:type="boolean"&gt;true&lt;/environment&gt;
        &lt;source&gt;
&lt;![CDATA[
wget http://10.10.0.162/$VAL -O /tmp/profile/modified.xml 2&gt;/dev/null
]]&gt;
        &lt;/source&gt;
        &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;feedback config:type="boolean"&gt;false&lt;/feedback&gt;
      &lt;/script&gt;
    &lt;/ask&gt;tion&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
    <para>
     You can verify the answer of a question with a script like this:
    </para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;script&gt;
        &lt;filename&gt;my.sh&lt;/filename&gt;
        &lt;rerun_on_error config:type="boolean"&gt;true&lt;/rerun_on_error&gt;
        &lt;environment config:type="boolean"&gt;true&lt;/environment&gt;
        &lt;source&gt;&lt;![CDATA[
if [ "$VAL" = "myhost" ]; then
    echo "Illegal Hostname!";
    exit 1;
fi
exit 0
]]&gt;
        &lt;/source&gt;
        &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
      &lt;/script&gt;
      &lt;dialog config:type="integer"&gt;0&lt;/dialog&gt;
      &lt;element config:type="integer"&gt;0&lt;/element&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;networking,dns,hostname&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;question&gt;Enter Hostname&lt;/question&gt;
      &lt;default&gt;enter your hostname here&lt;/default&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
   </sect2>
  </sect1>
<!-- {{{ Kdump -->
  <sect1 xml:id="CreateProfile.kdump">
   <title>Kernel Dumps</title>

   <note>
    <title>Availability</title>
    <para>
     This feature is not available on the IBM &zseries; (s390x)
     architecture.
    </para>
   </note>

   <para>
    With Kdump the system can create crashdump files if the whole kernel
    crashes. Crash dump files contain the memory contents while the system
    crashed. Such core files can be analyzed later by support or a (kernel)
    developer to find the reason for the system crash. Kdump is mostly
    useful for servers where you cannot easily reproduce such crashes but it
    is important to get the problem fixed.
   </para>

   <para>
    The only downside: enabling Kdump costs you between 64 MB and 128 MB of
    system RAM (on <quote>normal</quote> sized systems), reserved for Kdump
    in case the system crashes and the dump needs to be generated.
   </para>

   <para>
    This section only describes how to set up Kdump with &ay;. It does
    not describe how Kdump works. For details, refer to the kdump(7) manual
    page.
   </para>

   <para>
    The following example shows a general Kdump configuration.
   </para>

   <example>
    <title>Kdump configuration</title>
<screen>&lt;kdump&gt;
  &lt;!-- memory reservation --&gt;
  &lt;add_crash_kernel config:type="boolean"&gt;true&lt;/add_crash_kernel&gt;
  &lt;crash_kernel&gt;256M-:64M&lt;/crash_kernel&gt;
  &lt;general&gt;

    &lt;!-- dump target settings --&gt;
    &lt;KDUMP_SAVEDIR&gt;ftp://stravinsky.suse.de/incoming/dumps&lt;/KDUMP_SAVEDIR&gt;
    &lt;KDUMP_COPY_KERNEL&gt;true&lt;/KDUMP_COPY_KERNEL&gt;
    &lt;KDUMP_FREE_DISK_SIZE&gt;64&lt;/KDUMP_FREE_DISK_SIZE&gt;
    &lt;KDUMP_KEEP_OLD_DUMPS&gt;5&lt;/KDUMP_KEEP_OLD_DUMPS&gt;

    &lt;!-- filtering and compression --&gt;
    &lt;KDUMP_DUMPFORMAT&gt;compressed&lt;/KDUMP_DUMPFORMAT&gt;
    &lt;KDUMP_DUMPLEVEL&gt;1&lt;/KDUMP_DUMPLEVEL&gt;

    &lt;!-- notification --&gt;
    &lt;KDUMP_NOTIFICATION_TO&gt;&exampleuser_plain;@&exampledomain;&lt;/KDUMP_NOTIFICATION_TO&gt;
    &lt;KDUMP_NOTIFICATION_CC&gt;spam@&exampledomain; devnull@&exampledomain;&lt;/KDUMP_NOTIFICATION_CC&gt;
    &lt;KDUMP_SMTP_SERVER&gt;&mailname;&lt;/KDUMP_SMTP_SERVER&gt;
    &lt;KDUMP_SMTP_USER&gt;&lt;/KDUMP_SMTP_USER&gt;
    &lt;KDUMP_SMTP_PASSWORD&gt;&lt;/KDUMP_SMTP_PASSWORD&gt;

    &lt;!-- kdump kernel --&gt;
    &lt;KDUMP_KERNELVER&gt;&lt;/KDUMP_KERNELVER&gt;
    &lt;KDUMP_COMMANDLINE&gt;&lt;/KDUMP_COMMANDLINE&gt;
    &lt;KDUMP_COMMANDLINE_APPEND&gt;&lt;/KDUMP_COMMANDLINE_APPEND&gt;

    &lt;!-- expert settings --&gt;
    &lt;KDUMP_IMMEDIATE_REBOOT&gt;yes&lt;/KDUMP_IMMEDIATE_REBOOT&gt;
    &lt;KDUMP_VERBOSE&gt;15&lt;/KDUMP_VERBOSE&gt;
    &lt;KEXEC_OPTIONS&gt;&lt;/KEXEC_OPTIONS&gt;
  &lt;/general&gt;
&lt;/kdump&gt; </screen>
   </example>

<!-- {{{ Memory Reservation -->

   <sect2 xml:id="CreateProfile.kdump.reservation">
    <title>Memory Reservation</title>
    <para>
     The first step is to reserve memory for Kdump at boot-up. Because the
     memory must be reserved very early during the boot process, the
     configuration is done via a kernel command line parameter called
     <literal>crashkernel</literal>. The reserved memory will be used to
     load a second kernel which will be executed without rebooting if the
     first kernel crashes. This second kernel has a special initrd, which
     contains all programs necessary to save the dump over the network or to
     disk, send a notification e-mail, and finally reboot.
    </para>
    <para>
     To reserve memory for Kdump, specify the <literal>amount</literal>
     (such as <literal>64M</literal> to reserve 64 MB of memory from the
     RAM) and the <literal>offset</literal>. The syntax is
     <literal>crashkernel=AMOUNT@OFFSET</literal>. The kernel can
     auto-detect the right offset (except for the &xen; hypervisor, where
     you need to specify <literal>16M</literal> as offset). The amount of
     memory that needs to be reserved depends on architecture and main
     memory&mdash;refer to
     <xref linkend="cha.tuning.kdump.basic.manual"/> for recommendations on
     the amount of memory to reserve for Kdump.
    </para>
    <para>
     You can also use the extended command line syntax to specify the amount
     of reserved memory depending on the System RAM. That is useful if you
     share one &ay; control file for multiple installations or if you
     often remove or install memory on one machine. The syntax is:
    </para>
<screen>BEGIN_RANGE_1-END_RANGE_1:AMOUNT_1,BEGIN_RANGE_2-END_RANGE_2:AMOUNT_2@OFFSET</screen>
    <para>
     <literal>BEGIN_RANGE_1</literal> is the start of the first memory range
     (for example: <literal>0M</literal>) and <literal>END_RANGE_1</literal>
     is the end of the first memory range (can be empty in case
     <literal>infinity</literal> should be assumed) and so on. For example
     <literal>256M-2G:64M,2G-:128M</literal> means to reserve 64 MB of
     crashkernel memory if the system has between 256 MB and 2 GB RAM and to
     reserve 128 MB of crashkernel memory if the system has more than 2 GB
     RAM.
    </para>
    <para>
     On the other hand, it is possible to specify multiple values for
     crashkernel parameter, for example, when wanting to reserve different
     segments of low and high memory. In this case use values like
     <literal>72M,low</literal> and <literal>256M,high</literal>:
    </para>
    <example>
    <title>Kdump memory reservation with multiple values</title>
<screen>
&lt;kdump&gt;
  &lt;!-- memory reservation (high and low) --&gt;
  &lt;add_crash_kernel config:type="boolean"&gt;true&lt;/add_crash_kernel&gt;
  &lt;crash_kernel&gt;
    &lt;listentry&gt;72M,low&lt;/listentry&gt;
    &lt;listentry&gt;256M,high&lt;/listentry&gt;
  &lt;/crash_kernel&gt;
&lt;/kdump&gt; </screen>
   </example>
    <para>
     The following table shows the settings necessary to reserve memory:
    </para>
    <table>
     <title>Kdump Memory Reservation Settings:XML Representation</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>add_crash_Kernel</literal>
         </para>
        </entry>
        <entry>
         <para>
          Set to <literal>true</literal> if memory should be reserved and
          Kdump enabled.
         </para>
<screen>&lt;add_crash_kernel config:type="boolean"&gt;true&lt;/add_crash_kernel&gt;</screen>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>crash_Kernel</literal>
         </para>
        </entry>
        <entry>
         <para>
          Use the syntax of the crashkernel command line as discussed above.
         </para>
<screen>&lt;crash_kernel&gt;256M:64M&lt;/crash_kernel&gt;</screen>
        <para>A list of values is also supported.</para>
<screen>&lt;crash_kernel&gt;
  &lt;listentry&gt;72M,low&lt;/listentry&gt;
  &lt;listentry&gt;256M,high&lt;/listentry&gt;
&lt;/crash_kernel&gt;</screen>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="CreateProfile.kdump.saving">
    <title>Dump Saving</title>
    <para>
     <remark role="fixme">Add a short description</remark>
    </para>
    <sect3 xml:id="CreateProfile.kdump.saving.target">
     <title>Target</title>
     <para>
      The element <literal>KDUMP_SAVEDIR</literal> specifies the URL to
      where the dump is saved. The following methods are possible:
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        <literal>file</literal> to save to the local disk,
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>ftp</literal> to save to an FTP server (without
        encryption),
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>sftp</literal> to save to an SSH2 SFTP server,
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>nfs</literal> to save to an NFS location and
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>cifs</literal> to save the dump to a CIFS/SMP export from
        Samba or Microsoft Windows.
       </para>
      </listitem>
     </itemizedlist>
     <para>
      For details see the kdump(5) manual page. Two examples are:
      <literal>file:///var/crash</literal> (which is the default location
      according to FHS) and
      <literal>ftp://user:password@host:port/incoming/dumps</literal>. A
      subdirectory, with the time stamp contained in the name, will be
      created and the dumps saved there.
     </para>
     <para>
      When the dump is saved to the local disk,
      <literal>KDUMP_KEEP_OLD_DUMPS</literal> can be used to delete old
      dumps automatically. Set it to the number of old dumps that should be
      kept. If the target partition would end up with less free disk space
      than specified in <literal>KDUMP_FREE_DISK_SIZE</literal>, the dump is
      not saved.
     </para>
     <para>
      If you want to save the whole kernel and the debug information (if
      installed) to the same directory, set
      <literal>KDUMP_COPY_KERNEL</literal> to <literal>true</literal>. You
      will have everything you need to analyze the dump in one directory
      (except kernel modules and their debugging information).
     </para>
    </sect3>
    <sect3 xml:id="CreateProfile.kdump.saving.compression">
     <title>Filtering and Compression</title>
     <para>
      The kernel dump is uncompressed and unfiltered. It can get as large as
      your system RAM. To get smaller files, compress the dump file
      afterward. The dump needs to be decompressed before opening.
     </para>
     <para>
      To use page compression, which compresses every page and allows
      dynamic decompression with the crash(8) debugging tool, set
      <literal>KDUMP_DUMPFORMAT</literal> to <literal>compressed</literal>
      (default).
     </para>
     <para>
      You may not want to save all memory pages, for example those filled
      with zeroes. To filter the dump, set the
      <literal>KDUMP_DUMPLEVEL</literal>. 0 produces a full dump and 31 is
      the smallest dump. The manual pages kdump(5) and makedumpfile(8) list
      for each value which pages will be saved.
     </para>
    </sect3>
    <sect3 xml:id="CreateProfile.kdump.saving.summary">
     <title>Summary</title>
     <table>
      <title>Dump Target Settings: XML Representation</title>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Element
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Comment
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>KDUMP_SAVEDIR</literal>
          </para>
         </entry>
         <entry>
          <para>
           A URL that specifies the target to which the dump and related
           files will be saved.
          </para>
<screen>&lt;KDUMP_SAVEDIR&gt;file:///var/crash/&lt;/KDUMP_SAVEDIR&gt;</screen>
         </entry>
         <entry>
          <para>
           required
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>KDUMP_COPY_KERNEL</literal>
          </para>
         </entry>
         <entry>
          <para>
           Set to <literal>true</literal>, if not only the dump should be
           saved to <literal>KDUMP_SAVEDIR</literal> but also the kernel and
           its debugging information (if installed).
          </para>
<screen>&lt;KDUMP_COPY_KERNEL&gt;false&lt;/KDUMP_COPY_KERNEL&gt;</screen>
         </entry>
         <entry>
          <para>
           optional
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>KDUMP_FREE_DISK_SIZE</literal>
          </para>
         </entry>
         <entry>
          <para>
           Disk space in megabytes that must remain free after saving the
           dump. If not enough space is available, the dump will not be
           saved.
          </para>
<screen>&lt;KDUMP_FREE_DISK_SIZE&gt;64&lt;/KDUMP_FREE_DISK_SIZE&gt;</screen>
         </entry>
         <entry>
          <para>
           optional
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>KDUMP_KEEP_OLD_DUMPS</literal>
          </para>
         </entry>
         <entry>
          <para>
           The number of dumps that are kept (not deleted) if
           <literal>KDUMP_SAVEDIR</literal> points to a local directory.
           Specify 0 if you do not want any dumps to be automatically
           deleted, specify -1 if all dumps except the current one should be
           deleted.
          </para>
<screen>&lt;KDUMP_KEEP_OLD_DUMPS&gt;4&lt;/KDUMP_KEEP_OLD_DUMPS&gt;</screen>
         </entry>
         <entry>
          <para>
           optional
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </sect3>
   </sect2>

   <sect2 xml:id="CreateProfile.kdump.notification">
    <title>E-Mail Notification</title>
    <para>
     Configure e-mail notification if you want to be informed when a machine
     crashes and a dump is saved.
    </para>
    <para>
     Because Kdump runs in the initrd, a local mail server cannot send the
     notification e-mail. An SMTP server needs to be specified (see below).
    </para>
    <para>
     You need to provide exactly one address in
     <literal>KDUMP_NOTIFICATION_TO</literal>. More addresses can be
     specified in <literal>KDUMP_NOTIFICATION_CC</literal>. Only use e-mail
     addresses in both cases, not a real name.
    </para>
    <para>
     Specify <literal>KDUMP_SMTP_SERVER</literal> and (if the server needs
     authentication) <literal>KDUMP_SMTP_USER</literal> and
     <literal>KDUMP_SMTP_PASSWORD</literal>. Support for TLS/SSL is not
     available but may be added in the future.
    </para>
<!-- {{{ Table: XML representation of the e-mail notification settings -->
    <table>
     <title>E-Mail Notification Settings: XML Representation</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>KDUMP_NOTIFICATION_TO</literal>
         </para>
        </entry>
        <entry>
         <para>
          Exactly one e-mail address to which the e-mail should be sent.
          Additional recipients can be specified in
          <literal>KDUMP_NOTIFICATION_CC</literal>.
         </para>
<screen>&lt;KDUMP_NOTIFICATION_TO
&gt;&exampleuser_plain;@&exampledomain;&lt;/KDUMP_NOTIFICATION_TO&gt;</screen>
        </entry>
        <entry>
         <para>
          optional (notification disabled if empty)
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_NOTIFICATION_CC</literal>
         </para>
        </entry>
        <entry>
         <para>
          Zero, one or more recipients that are in the cc line of the
          notification e-mail.
         </para>
<screen>&lt;KDUMP_NOTIFICATION_CC
&gt;&exampleuserII_plain;@&exampledomain; &exampleuserIII_plain;@&exampledomain;&lt;/KDUMP_NOTIFICATION_CC&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_SMTP_SERVER</literal>
         </para>
        </entry>
        <entry>
         <para>
          Host name of the SMTP server used for mail delivery. SMTP
          authentication is supported (see
          <literal>KDUMP_SMTP_USER</literal> and
          <literal>KDUMP_SMTP_PASSWORD</literal>) but TLS/SSL are
          not.
         </para>
<screen>&lt;KDUMP_SMTP_SERVER&gt;email.suse.de&lt;/KDUMP_SMTP_SERVER&gt;</screen>
        </entry>
        <entry>
         <para>
          optional (notification disabled if empty)
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_SMTP_USER</literal>
         </para>
        </entry>
        <entry>
         <para>
          User name used together with
          <literal>KDUMP_SMTP_PASSWORD</literal> for SMTP authentication.
         </para>
<screen>&lt;KDUMP_SMTP_USER&gt;bwalle&lt;/KDUMP_SMTP_USER&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_SMTP_PASSWORD</literal>
         </para>
        </entry>
        <entry>
         <para>
          Password used together with <literal>KDUMP_SMTP_USER</literal> for
          SMTP authentication.
         </para>
<screen>&lt;KDUMP_SMTP_PASSWORD&gt;geheim&lt;/KDUMP_SMTP_PASSWORD&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="CreateProfile.kdump.kernel">
    <title>Kdump Kernel Settings</title>
    <para>
     As already mentioned, a special kernel is booted to save the dump. If
     you do not want to use the auto-detection mechanism to find out which
     kernel is used (see the kdump(5) manual page that describes the
     algorithm which is used to find the kernel), you can specify the
     version of a custom kernel in <literal>KDUMP_KERNELVER</literal>. If
     you set it to <literal>foo</literal>, then the kernel located in
     <filename>/boot/vmlinuz-foo</filename> or
     <filename>/boot/vmlinux-foo</filename> (in that order on platforms that
     have a <filename>vmlinuz</filename> file) will be used.
    </para>
    <para>
     You can specify the command line used to boot the Kdump kernel.
     Normally the boot command line is used minus some settings that make no
     sense with Kdump (like the <literal>crashkernel</literal> parameter)
     plus some settings needed by Kdump (see the manual page kdump(5)). If
     you want some additional parameters like an overwritten console
     setting then use <literal>KDUMP_COMMANDLINE_APPEND</literal>. If you
     know what you are doing and you want to specify the whole command line,
     set <literal>KDUMP_COMMANDLINE</literal>.
    </para>
    <table>
     <title>Kernel Settings: XML Representation</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>KDUMP_KERNELVER</literal>
         </para>
        </entry>
        <entry>
         <para>
          Version string for the kernel used for Kdump. Leave it empty to
          use the auto-detection mechanism (strongly recommended).
         </para>
<screen>&lt;KDUMP_KERNELVER
&gt;2.6.27-default&lt;/KDUMP_KERNELVER&gt;</screen>
        </entry>
        <entry>
         <para>
          optional (auto-detection if empty)
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_COMMANDLINE_APPEND</literal>
         </para>
        </entry>
        <entry>
         <para>
          Additional command line parameters for the Kdump kernel.
         </para>
<screen>&lt;KDUMP_COMMANDLINE_APPEND
&gt;console=ttyS0,57600&lt;/KDUMP_COMMANDLINE_APPEND&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_Command Line</literal>
         </para>
        </entry>
        <entry>
         <para>
          Overwrite the automatically generated Kdump command line. Use with
          care. Usually, <literal>KDUMP_COMMANDLINE_APPEND</literal> should
          suffice.
         </para>
<screen>&lt;KDUMP_COMMANDLINE_APPEND
&gt;root=/dev/sda5 maxcpus=1 irqpoll&lt;/KDUMP_COMMANDLINE&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="CreateProfile.kdump.expert">
    <title>Expert Settings</title>
    <table>
     <title>Expert Settings: XML Representations</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>KDUMP_IMMEDIATE_REBOOT</literal>
         </para>
        </entry>
        <entry>
         <para>
          <literal>true</literal> if the system should be rebooted
          automatically after the dump has been saved,
          <literal>false</literal> otherwise. The default is to reboot the
          system automatically.
         </para>
<screen>&lt;KDUMP_IMMEDIATE_REBOOT
&gt;true&lt;/KDUMP_IMMEDIATE_REBOOT&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_VERBOSE</literal>
         </para>
        </entry>
        <entry>
         <para>
          Bitmask that specifies how verbose the Kdump process should be.
          Read kdump(5) for details.
         </para>
<screen>&lt;KDUMP_VERBOSE&gt;3&lt;/KDUMP_VERBOSE&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KEXEC_OPTIONS</literal>
         </para>
        </entry>
        <entry>
         <para>
          Additional options that are passed to kexec when loading the Kdump
          kernel. Normally empty.
         </para>
<screen>&lt;KEXEC_OPTIONS&gt;--noio&lt;/KEXEC_OPTIONS&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.dns-server">
   <title>DNS Server</title>

   <para>
    The Bind DNS server can be configured by adding a <literal>dns-server</literal>
    resource. The three more straightforward properties of that resource can
    have a value of 1 to enable them or 0 to disable.
   </para>
   <!-- Dropped properties: allowed_interfaces -->

   <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Value
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>chroot</literal>
          </para>
         </entry>
         <entry>
          <para>
           0 / 1
          </para>
         </entry>
         <entry>
          <para>
           The DNS server must be jailed into a chroot.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>start_service</literal>
          </para>
         </entry>
         <entry>
          <para>
           0 / 1
          </para>
         </entry>
         <entry>
          <para>
           Bind is enabled (executed on system start).
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>use_ldap</literal>
          </para>
         </entry>
         <entry>
          <para>
           0 / 1
          </para>
         </entry>
         <entry>
          <para>
           Store the settings in LDAP instead of native configuration files.
          </para>
         </entry>
        </row>
      </tbody>
     </tgroup>
    </informaltable>

    <example>
    <title>Basic DNS server settings</title>
<screen>
&lt;dns-server&gt;
  &lt;chroot&gt;0&lt;/chroot&gt;
  &lt;start_service&gt;1&lt;/start_service&gt;
  &lt;use_ldap&gt;0&lt;/use_ldap&gt;
&lt;/dns-server&gt; </screen>
   </example>

   <para>
    In addition to those basic settings, there are three properties of type
    list that can be used to fine-tune the service configuration.
   </para>

   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>
        <para>
         List
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>logging</literal>
        </para>
       </entry>
       <entry>
        <para>
         Options of the DNS server logging.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>options</literal>
        </para>
       </entry>
       <entry>
        <para>
         Bind options like the files and directories to use, the list of
         forwarders and other configuration settings.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>zones</literal>
        </para>
       </entry>
       <entry>
        <para>
         List of DNS zones known by the server, including all the settings,
         records and SOA records.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>

   <example>
    <title>Configuring DNS server zones and advanced settings</title>
<screen>
&lt;dns-server&gt;
  &lt;logging config:type="list"&gt;
    &lt;listentry&gt;
      &lt;key&gt;channel&lt;/key&gt;
      &lt;value&gt;log_syslog { syslog; }&lt;/value&gt;
    &lt;/listentry&gt;
  &lt;/logging&gt;
  &lt;options config:type="list"&gt;
    &lt;option&gt;
      &lt;key&gt;forwarders&lt;/key&gt;
      &lt;value&gt;{ 10.10.0.1; }&lt;/value&gt;
    &lt;/option&gt;
  &lt;/options&gt;
  &lt;zones config:type="list"&gt;
    &lt;listentry&gt;
      &lt;is_new&gt;1&lt;/is_new&gt;
      &lt;modified&gt;1&lt;/modified&gt;
      &lt;options config:type="list"/&gt;
      &lt;records config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;mydom.uwe.&lt;/key&gt;
          &lt;type&gt;MX&lt;/type&gt;
          &lt;value&gt;0 mail.mydom.uwe.&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;mydom.uwe.&lt;/key&gt;
          &lt;type&gt;NS&lt;/type&gt;
          &lt;value&gt;ns.mydom.uwe.&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/records&gt;
      &lt;soa&gt;
        &lt;expiry&gt;1w&lt;/expiry&gt;
        &lt;mail&gt;root.aaa.aaa.cc.&lt;/mail&gt;
        &lt;minimum&gt;1d&lt;/minimum&gt;
        &lt;refresh&gt;3h&lt;/refresh&gt;
        &lt;retry&gt;1h&lt;/retry&gt;
        &lt;serial&gt;2005082300&lt;/serial&gt;
        &lt;server&gt;aaa.aaa.cc.&lt;/server&gt;
        &lt;zone&gt;@&lt;/zone&gt;
      &lt;/soa&gt;
      &lt;soa_modified&gt;1&lt;/soa_modified&gt;
      &lt;ttl&gt;2d&lt;/ttl&gt;
      &lt;type&gt;master&lt;/type&gt;
      &lt;update_actions config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;mydom.uwe.&lt;/key&gt;
          &lt;operation&gt;add&lt;/operation&gt;
          &lt;type&gt;NS&lt;/type&gt;
          &lt;value&gt;ns.mydom.uwe.&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/update_actions&gt;
      &lt;zone&gt;mydom.uwe&lt;/zone&gt;
    &lt;/listentry&gt;
  &lt;/zones&gt;
&lt;/dns-server&gt; </screen>
   </example>
  </sect1>

  <sect1 xml:id="CreateProfile.dhcp-server">
   <title>DHCP Server</title>

   <para>
    The <literal>dhcp-server</literal> resource makes it possible to configure
    all the settings of a DHCP server by means of the six following properties.
   </para>
   <!-- Dropped properties: allowed_interfaces -->

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Element
        </para>
       </entry>
       <entry>
        <para>
         Value
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>chroot</literal>
        </para>
       </entry>
       <entry>
        <para>
         0 / 1
        </para>
       </entry>
       <entry>
        <para>
         A value of 1 means that the DHCP server must be jailed in a chroot.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>start_service</literal>
        </para>
       </entry>
       <entry>
        <para>
         0 / 1
        </para>
       </entry>
       <entry>
        <para>
         Set this to 1 to enable the DHCP server (that is, run it on system startup).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>use_ldap</literal>
        </para>
       </entry>
       <entry>
        <para>
         0 / 1
        </para>
       </entry>
       <entry>
        <para>
         If set to 1, the settings will be stored in LDAP instead of native configuration files.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>other_options</literal>
        </para>
       </entry>
       <entry>
        <para>
         Text
        </para>
       </entry>
       <entry>
        <para>
         String with parameters that will be passed to the DHCP server executable
         when started. For example, use "-p 1234" to listen on a non-standard
         1234 port. For all possible options, consult the dhcpd manual page. If
         left blank, default values will be used.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>allowed_interfaces</literal>
        </para>
       </entry>
       <entry>
        <para>
         List
        </para>
       </entry>
       <entry>
        <para>
         List of network cards in which the DHCP server will be operating.
         See the example below for the exact format.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>settings</literal>
        </para>
       </entry>
       <entry>
        <para>
         List
        </para>
       </entry>
       <entry>
        <para>
         List of settings to configure the behavior of the DHCP server. The
         configuration is defined in a tree-like structure where the root
         represents the global options, with subnets and host nested from there.
         The <literal>children</literal>, <literal>parent_id</literal> and
         <literal>parent_type</literal> properties are used to represent that
         nesting. See the example below for the exact format.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>

   <example>
    <title>Example dhcp-server section</title>
<screen>
&lt;dhcp-server&gt;
  &lt;allowed_interfaces config:type="list"&gt;
    &lt;allowed_interface&gt;eth0&lt;/allowed_interface&gt;
  &lt;/allowed_interfaces&gt;
  &lt;chroot&gt;0&lt;/chroot&gt;
  &lt;other_options&gt;-p 9000&lt;/other_options&gt;
  &lt;start_service&gt;1&lt;/start_service&gt;
  &lt;use_ldap&gt;0&lt;/use_ldap&gt;

  &lt;settings config:type="list"&gt;
    &lt;settings_entry&gt;
      &lt;children config:type="list"/&gt;
      &lt;directives config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;fixed-address&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;192.168.0.10&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;hardware&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;ethernet d4:00:00:bf:00:00&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/directives&gt;
      &lt;id&gt;static10&lt;/id&gt;
      &lt;options config:type="list"/&gt;
      &lt;parent_id&gt;192.168.0.0 netmask 255.255.255.0&lt;/parent_id&gt;
      &lt;parent_type&gt;subnet&lt;/parent_type&gt;
      &lt;type&gt;host&lt;/type&gt;
    &lt;/settings_entry&gt;
    &lt;settings_entry&gt;
      &lt;children config:type="list"&gt;
        &lt;child&gt;
          &lt;id&gt;static10&lt;/id&gt;
          &lt;type&gt;host&lt;/type&gt;
        &lt;/child&gt;
      &lt;/children&gt;
      &lt;directives config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;range&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;dynamic-bootp 192.168.0.100 192.168.0.150&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;default-lease-time&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;14400&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;max-lease-time&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;86400&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/directives&gt;
      &lt;id&gt;192.168.0.0 netmask 255.255.255.0&lt;/id&gt;
      &lt;options config:type="list"/&gt;
      &lt;parent_id/&gt;
      &lt;parent_type/&gt;
      &lt;type&gt;subnet&lt;/type&gt;
    &lt;/settings_entry&gt;
    &lt;settings_entry&gt;
      &lt;children config:type="list"&gt;
        &lt;child&gt;
          &lt;id&gt;192.168.0.0 netmask 255.255.255.0&lt;/id&gt;
          &lt;type&gt;subnet&lt;/type&gt;
        &lt;/child&gt;
      &lt;/children&gt;
      &lt;directives config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;ddns-update-style&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;none&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;default-lease-time&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;14400&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/directives&gt;
      &lt;id/&gt;
      &lt;options config:type="list"/&gt;
      &lt;parent_id/&gt;
      &lt;parent_type/&gt;
      &lt;type/&gt;
    &lt;/settings_entry&gt;
  &lt;/settings&gt;
&lt;/dhcp-server&gt; </screen>
   </example>
  </sect1>

  <sect1 xml:id="CreateProfile.firewall">
   <title>SUSE Firewall</title>

   <para>
    SUSE Firewall can be configured using the <literal>firewall</literal>
    resource. All the properties in this resource are optional and all of them
    are of type text, with the exception of
    <literal>start_firewall</literal> and <literal>enable_firewall</literal>,
    which are the only boolean ones.
   </para>

   <sect2 xml:id="CreateProfile.firewall.general">
    <title>General Firewall Configuration</title>

    <para>
     The following properties are intended to configure the general settings of
     SUSE Firewall. Most of them are a direct representation of the corresponding
     setting at <filename>/etc/sysconfig/SuSEfirewall2</filename>. Check the
     comments in that file for further information.
    </para>
    <!-- Properties from .rng file intentionally not included:
    fw_protect_from_internal (the code seems to use FW_PROTECT_FROM_INT)
    fw_ipsec_trust (duplicate of `FW_IPSEC_TRUST`)
    fw_allow_fw_traceroute and FW_ALLOW_FW_TRACEROUTE are not present
         in recent versions of /etc/sysconfig/SuSEfirewall2. Still supported?
    fw_masq_nets seems to not be used anymore
    fw_autoprotect_services seems to not be used anymore
    -->

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Value
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>start_firewall</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
        </entry>
        <entry>
         <para>
          Whether SUSE Firewall should be started right after applying the configuration.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>enable_firewall</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
        </entry>
        <entry>
         <para>
          Whether SUSE Firewall should be started on every system startup.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_LOG_ACCEPT_ALL</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no
         </para>
        </entry>
        <entry>
         <para>
          Log every accepted package. If set to "yes" the value of <literal>FW_LOG_ACCEPT_CRIT</literal> becomes irrelevant.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_LOG_ACCEPT_CRIT</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no
         </para>
        </entry>
        <entry>
         <para>
          Log accepted critical packages.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_LOG_DROP_ALL</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no
         </para>
        </entry>
        <entry>
         <para>
          Log every dropped package. If set to "yes" the value of <literal>FW_LOG_DROP_CRIT</literal> becomes irrelevant.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_LOG_DROP_CRIT</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no
         </para>
        </entry>
        <entry>
         <para>
          Log dropped critical packages.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_ALLOW_PING_FW</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no
         </para>
        </entry>
        <entry>
         <para>
          Allow the firewall to reply to icmp echo requests.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_MASQUERADE</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no
         </para>
        </entry>
        <entry>
         <para>
          Used to enable network masquerading, which allows to transparently redirect ports
          from one interface in the external zone to ports of another interface in a different zone.
          Masquerading needs at least one external interface and one other (not external) interface.
          Since routing is needed for masquerading, the values of this property and
          <literal>FW_ROUTE</literal> are connected.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_FORWARD_MASQ</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space delimited list of rules
         </para>
        </entry>
        <entry>
         <para>
          Rules for network masquerading, with each rule following this format:          <literal>source_network,ip_to_forward_to,protocol,port[,redirect_port,[destination_ip]]</literal>
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_FORWARD_ALWAYS_INOUT_DEV</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space separated list of interface names
         </para>
        </entry>
        <entry>
         <para>
          Bridge interfaces without IP address.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_IPSEC_TRUST</literal>
         </para>
        </entry>
        <entry>
         <para>
         yes / no / int /ext / dmz
         </para>
        </entry>
        <entry>
         <para>
          Trust level of IPsec packets.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_LOAD_MODULES</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space delimited list
         </para>
        </entry>
        <entry>
         <para>
          Additional kernel modules to load at startup.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_ROUTE</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no
         </para>
        </entry>
        <entry>
         <para>
          Whether routing between external, dmz and internal network should be activated.
          Related to <literal>FW_MASQUERADE</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_PROTECT_FROM_INT</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no / notrack
         </para>
        </entry>
        <entry>
         <para>
          Whether to protect the firewall from the internal network.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

   </sect2>

   <sect2 xml:id="CreateProfile.firewall.zones">
    <title>Firewall Zones Configuration</title>

    <para>
     The configuration of SUSE Firewall is based on the existence of three network zones.
     The behavior of each zone can be tweaked in several ways. Thus, there are many almost
     equivalent &ay; properties that are only different in the name and the zone to
     which they apply, like <literal>FW_DEV_DMZ</literal> for the demilitarized zone,
     <literal>FW_DEV_EXT</literal> for the external zone and <literal>FW_DEV_INT</literal>
     for the internal one.
    </para>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attributes
         </para>
        </entry>
        <entry>
         <para>
          Value
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>FW_ALLOW_FW_BROADCAST_{DMZ/EXT/INT}</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no
         </para>
        </entry>
        <entry>
         <para>
          Allow IP broadcasts in that zone.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_CONFIGURATIONS_{DMZ/EXT/INT}</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space delimited list
         </para>
        </entry>
        <entry>
         <para>
          Services that should be accessible from that zone.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_DEV_{DMZ/EXT/INT}</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space delimited list
         </para>
        </entry>
        <entry>
         <para>
          Name of the interfaces that are considered to belong to the zone.
          The special keyword "any" means that packets arriving on interfaces not
          explicitly configured as int, ext or dmz will be considered to belong to
          this zone.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_IGNORE_FW_BROADCAST_{DMZ/EXT/INT}</literal>
         </para>
        </entry>
        <entry>
         <para>
          yes / no
         </para>
        </entry>
        <entry>
         <para>
          Suppress logging of dropped broadcast packets. Useful if you do not
          allow broadcasts on a LAN interface.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_SERVICES_ACCEPT_{DMZ/EXT/INT}</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space separated list of rules
         </para>
        </entry>
        <entry>
         <para>
          Services to allow. Each rule following the format
          <literal>net,protocol[,dport[,sport[,flags]]]</literal>.
          For example, "0/0,tcp,22".
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_SERVICES_ACCEPT_RELATED_{DMZ/EXT/INT}</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space delimited list of rules
         </para>
        </entry>
        <entry>
         <para>
          Services to allow that are considered RELATED by the connection tracking engine.
          Format of each rule: <literal>net,protocol[,sport[,dport]]</literal>. For example,
          to allow Samba broadcast replies marked as related by <literal>nf_conntrack_netbios_ns</literal>
          from a certain network: "192.168.1.0/24,udp,137".
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_SERVICES_{DMZ/EXT/INT}_IP</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space separated list
         </para>
        </entry>
        <entry>
         <para>
          Which IP services should be accessible from the zone. Every entry in
          the list can be a port, a port range or a well known protocol name.
          This setting has precedence over <literal>FW_SERVICES_ACCEPT_*</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_SERVICES_{DMZ/EXT/INT}_RPC</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space delimited list
         </para>
        </entry>
        <entry>
         <para>
          RPC services that should be accessible from the zone.
          This setting has precedence over <literal>FW_SERVICES_ACCEPT_*</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_SERVICES_{DMZ/EXT/INT}_TCP</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space separated list
         </para>
        </entry>
        <entry>
         <para>
          Which TCP services should be accessible from the zone. Every entry in
          the list can be a port, a port range or a well known protocol name.
          This setting has precedence over <literal>FW_SERVICES_ACCEPT_*</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FW_SERVICES_{DMZ/EXT/INT}_UDP</literal>
         </para>
        </entry>
        <entry>
         <para>
          Space separated list
         </para>
        </entry>
        <entry>
         <para>
          Which UDP services should be accessible from the zone. Every entry in
          the list can be a port, a port range or a well known protocol name.
          This setting has precedence over <literal>FW_SERVICES_ACCEPT_*</literal>.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="CreateProfile.firewall.example">
    <title>A Full Example</title>

    <para>
     A full example of the firewall section, including general and zone specific
     properties could look like this.
    </para>

    <example>
     <title>Example firewall section</title>
     <screen>
&lt;firewall&gt;
  &lt;FW_ALLOW_FW_BROADCAST_DMZ&gt;no&lt;/FW_ALLOW_FW_BROADCAST_DMZ&gt;
  &lt;FW_ALLOW_FW_BROADCAST_EXT&gt;no&lt;/FW_ALLOW_FW_BROADCAST_EXT&gt;
  &lt;FW_ALLOW_FW_BROADCAST_INT&gt;no&lt;/FW_ALLOW_FW_BROADCAST_INT&gt;
  &lt;FW_DEV_DMZ&gt;&lt;/FW_DEV_DMZ&gt;
  &lt;FW_DEV_EXT&gt;any eth0&lt;/FW_DEV_EXT&gt;
  &lt;FW_DEV_INT&gt;&lt;/FW_DEV_INT&gt;
  &lt;FW_FORWARD_ALWAYS_INOUT_DEV&gt;&lt;/FW_FORWARD_ALWAYS_INOUT_DEV&gt;
  &lt;FW_FORWARD_MASQ&gt;&lt;/FW_FORWARD_MASQ&gt;
  &lt;FW_IGNORE_FW_BROADCAST_DMZ&gt;no&lt;/FW_IGNORE_FW_BROADCAST_DMZ&gt;
  &lt;FW_IGNORE_FW_BROADCAST_EXT&gt;yes&lt;/FW_IGNORE_FW_BROADCAST_EXT&gt;
  &lt;FW_IGNORE_FW_BROADCAST_INT&gt;no&lt;/FW_IGNORE_FW_BROADCAST_INT&gt;
  &lt;FW_IPSEC_TRUST&gt;no&lt;/FW_IPSEC_TRUST&gt;
  &lt;FW_LOAD_MODULES&gt;nf_conntrack_netbios_ns&lt;/FW_LOAD_MODULES&gt;
  &lt;FW_LOG_ACCEPT_ALL&gt;no&lt;/FW_LOG_ACCEPT_ALL&gt;
  &lt;FW_LOG_ACCEPT_CRIT&gt;yes&lt;/FW_LOG_ACCEPT_CRIT&gt;
  &lt;FW_LOG_DROP_ALL&gt;no&lt;/FW_LOG_DROP_ALL&gt;
  &lt;FW_LOG_DROP_CRIT&gt;yes&lt;/FW_LOG_DROP_CRIT&gt;
  &lt;FW_MASQUERADE&gt;no&lt;/FW_MASQUERADE&gt;
  &lt;FW_PROTECT_FROM_INT&gt;no&lt;/FW_PROTECT_FROM_INT&gt;
  &lt;FW_ROUTE&gt;no&lt;/FW_ROUTE&gt;
  &lt;enable_firewall config:type="boolean"&gt;true&lt;/enable_firewall&gt;
  &lt;start_firewall config:type="boolean"&gt;true&lt;/start_firewall&gt;
&lt;/firewall&gt; </screen>
    </example>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.Hardware">
   <title>Miscellaneous Hardware and System Components</title>

   <para>
    In addition to the core component configuration, like network
    authentication and security, &ay; offers a wide range of hardware and
    system configuration options, the same as available by default on any
    system installed manually and in an interactive way. For example, it is
    possible to configure printers, sound devices, TV cards and any other
    hardware components which have a module within &yast;.
   </para>

   <para>
    Any new configuration options added to &yast; will be automatically
    available in &ay;.
   </para>

   <sect2 xml:id="CreateProfile.Hardware.Printer">
    <title>Printer</title>
    <para>
     &ay; support for printing is limited to basic settings defining how
     CUPS is used on a client for printing via the network.
    </para>
    <para>
     There is no &ay; support for setting up local print queues. Modern
     printers are usually connected via USB. CUPS accesses USB printers by a
     model-specific device URI like
     <literal>usb://ACME/FunPrinter?serial=1a2b3c</literal>. Usually it is
     not possible to predict the correct USB device URI in advance, because
     it is determined by the CUPS back-end <literal>usb</literal> during
     runtime. Therefore it is not possible to set up local print queues with
     &ay;.
    </para>
    <para>
     Basics on how CUPS is used on a client workstation to print via
     network:
    </para>
    <para>
     On client workstations application programs submit print jobs to the
     CUPS daemon process (<systemitem>cupsd</systemitem>).
     <systemitem>cupsd</systemitem> forwards the print jobs to a CUPS print
     server in the network where the print jobs are processed. The server
     sends the printer specific data to the printer device.
    </para>
    <para>
     If there is only a single CUPS print server in the network, there is no
     need to have a CUPS daemon running on each client workstation. Instead
     it is simpler to specify the CUPS server in
     <filename>/etc/cups/client.conf</filename> and access it directly (only
     one CUPS server entry can be set). In this case application programs
     that run on client workstations submit print jobs directly to the
     specified CUPS print server.
    </para>
    <para>
     <xref linkend="printer.conf"/> shows a <literal>printer</literal>
     configuration section. The <literal>cupsd_conf_content</literal> entry
     contains the whole verbatim content of the
     <systemitem class="daemon">cupsd</systemitem> configuration file
     <filename>/etc/cups/cupsd.conf</filename>. The
     <literal>client_conf_content</literal> entry contains the whole
     verbatim content of <filename>/etc/cups/client.conf</filename>. The
     <literal>printer</literal> section contains the
     <systemitem class="daemon">cupsd</systemitem> configuration but it does
     not specify whether the cupsd should run.
    </para>
    <example xml:id="printer.conf">
     <title>Printer configuration</title>
<screen>  &lt;printer&gt;
    &lt;client_conf_content&gt;
      &lt;file_contents&gt;&lt;![CDATA[
... verbatim content of /etc/cups/client.conf ...
]]&gt;&lt;/file_contents&gt;
    &lt;/client_conf_content&gt;
    &lt;cupsd_conf_content&gt;
      &lt;file_contents&gt;&lt;![CDATA[
... verbatim content of /etc/cups/cupsd.conf ...
]]&gt;&lt;/file_contents&gt;
    &lt;/cupsd_conf_content&gt;
  &lt;/printer&gt;</screen>
    </example>
    <note>
     <title><filename>/etc/cups/cups-files.conf</filename></title>
     <para>
      With release 1.6 the CUPS configuration file has been split into two
      files: <filename>cupsd.conf</filename> and
      <filename>cups-files.conf</filename>. As of &productname; &productnumber;,
      &ay; only supports modifying <filename>cupsd.conf</filename> since
      the default settings in <filename>cups-files.conf</filename> are
      sufficient for usual printing setups.
     </para>
    </note>
   </sect2>

   <sect2 xml:id="CreateProfile.Hardware.Sound">
    <title>Sound devices</title>
    <para>
     An example of the sound configuration created using the configuration
     system is shown below.
    </para>
    <example>
     <title>Sound configuration</title>
<screen>&lt;sound&gt;
  &lt;autoinstall config:type="boolean"&gt;true&lt;/autoinstall&gt;
  &lt;modules_conf config:type="list"&gt;
    &lt;module_conf&gt;
      &lt;alias&gt;snd-card-0&lt;/alias&gt;
      &lt;model&gt;M5451, ALI&lt;/model&gt;
      &lt;module&gt;snd-ali5451&lt;/module&gt;
      &lt;options&gt;
        &lt;snd_enable&gt;1&lt;/snd_enable&gt;
        &lt;snd_index&gt;0&lt;/snd_index&gt;
        &lt;snd_pcm_channels&gt;32&lt;/snd_pcm_channels&gt;
      &lt;/options&gt;
    &lt;/module_conf&gt;
  &lt;/modules_conf&gt;
  &lt;volume_settings config:type="list"&gt;
    &lt;listentry&gt;
      &lt;Master config:type="integer"&gt;75&lt;/Master&gt;
    &lt;/listentry&gt;
  &lt;/volume_settings&gt;
&lt;/sound&gt;</screen>
    </example>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.SSHKeysAndConfig">
    <title>Importing SSH Keys and Configuration</title>

    <para>
     &yast; allows to import SSH keys and server configuration from
     previous installations. The behavior of this feature can also be
     controlled through an &ay; profile.
    </para>

    <example xml:id="import_ssh">
     <title>Importing SSH Keys and Configuration from /dev/sda2</title>
<screen>&lt;ssh_import&gt;
  &lt;import config:type="boolean"&gt;true&lt;/import&gt;
  &lt;copy_config config:type="boolean"&gt;true&lt;/copy_config&gt;
  &lt;device&gt;/dev/sda2&lt;/device&gt;
&lt;/ssh_import&gt;</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attributes
         </para>
        </entry>
        <entry>
         <para>
          Value
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>import</literal>
         </para>
        </entry>
        <entry>
         <para>
          true / false
         </para>
        </entry>
        <entry>
         <para>
          SSH keys will be imported. If set to
          <literal>false</literal>, nothing will be imported.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>copy_config</literal>
         </para>
        </entry>
        <entry>
         <para>
          true / false
         </para>
        </entry>
        <entry>
         <para>
          Additionally, SSH server configuration will be imported.
          This setting will not have effect if
          <literal>import</literal> is set to <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>device</literal>
         </para>
        </entry>
        <entry>
         <para>
          Partition
         </para>
        </entry>
        <entry>
         <para>
          Partition to import keys and configuration from. If it is not set,
          the partition which contains the most recently accessed key is used.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
  </sect1>

  <sect1 xml:id="CreateProfile.ConfigurationManagement">
    <title>Configuration Management</title>

    <para>
     &ay; allows delegating part of the configuration to a Configuration
     Management like Salt:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       &ay; takes care of system installation (partitioning, network setup,
       etc.)
      </para>
     </listitem>
     <listitem>
      <para>
       System configuration can be delegated to a Configuration Management
       tool
      </para>
     </listitem>
    </itemizedlist>
    <para>
     This module configures the connection to a Configuration Management and
     uploads SSH keys which are needed for establishing connections. At the
     end of the installation, the Configuration Management Master will be
     contacted to retrieve state files and other resources.
    </para>

    <example xml:id="configuration_management">
     <title>Configuring Salt Manager</title>
<screen>&lt;configuration_management&gt;
    &lt;type&gt;salt&lt;/type&gt;
    &lt;master&gt;linux-addc&lt;/master&gt;
    &lt;auth_attempts config:type="integer"&gt;5&lt;/auth_attempts&gt;
    &lt;auth_time_out config:type="integer"&gt;10&lt;/auth_time_out&gt;
    &lt;keys_url&gt;http://keys.example.de/keys&lt;/keys_url&gt;
&lt;/configuration_management&gt;</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attributes
         </para>
        </entry>
        <entry>
         <para>
          Value
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>type</literal>
         </para>
        </entry>
        <entry>
         <para>
          Configuration Management type
         </para>
        </entry>
        <entry>
         <para>
          Configuration Management name. Currently only <literal>salt</literal>
          is supported.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>master</literal>
         </para>
        </entry>
        <entry>
         <para>
          hostname
         </para>
        </entry>
        <entry>
         <para>
          Hostname or IP address of the Configuration Management Master.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>auth_attempts</literal>
         </para>
        </entry>
        <entry>
         <para>
          Integer
         </para>
        </entry>
        <entry>
         <para>
          At the end of installation, &yast; is connecting to Configuration
          Management Master with maximum <literal>auth_attempts</literal>
          attempts. The default is 3 attempts.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>auth_time_out</literal>
         </para>
        </entry>
        <entry>
         <para>
          Integer
         </para>
        </entry>
        <entry>
         <para>
          Time between the Configuration Management Master connection attempts.
          The default is 15 seconds.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>keys_url</literal>
         </para>
        </entry>
        <entry>
         <para>
          URL of used key
         </para>
        </entry>
        <entry>
         <para>
          Path to a HTTP server, hard drive, USB drive or similar with
          the files <literal>default.key</literal> and
          <literal>default.pub</literal>. This key has to be known to
          the Configuration Management Master.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>enable_services</literal>
         </para>
        </entry>
        <entry>
         <para>
          true/false
         </para>
        </entry>
        <entry>
         <para>
          Enabling the Configuration Management services on the client
          side. Default is <literal>true</literal>.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
  </sect1>

 </chapter>
<!-- fs 2014-09-24:
     Commenting since this short chapter does not provide new information
     This is already covered in greater detail in the Deployment Guide

 <chapter id="Bootmanagement">
  <title>Network-based Installation</title>
  <para>
   &ay; provides a method to automatically and identically install
   groups of systems. The first step when preparing an &ay; installation
   is to decide how you want to install the target systems. The following
   scenario is a good example for how to set up and perform automated
   installations:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     You need to install &productname; on 50 new systems.
    </para>
   </listitem>
   <listitem>
    <para>
     The development department owns 30 out of the 50 new dual processor and
     SCSI systems, and these systems must be installed as clients with
     development software.
    </para>
   </listitem>
   <listitem>
    <para>
     The sales department owns 20 out of the 50 new, uni-processor IDE based
     systems and its systems must be installed as clients with end user
     software and office tools.
    </para>
    <remark>emap 2011-11-07: What about the remaining new systems? Will they be
    needed in this example? If not better let R&amp;D buy 30 new machines and
    Sales 20 new ones with different hardware. Um, reading to the end of this
    file, I wonder if we need this example at all? It is not being used to
    explain anything. It rather gets in the way. We do not even explain how the
    different hardware is handled.</remark>
   </listitem>
  </itemizedlist>
  <para>
   Prerequisites:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     a boot server on the same Ethernet segment,
    </para>
   </listitem>
   <listitem>
    <para>
     an installation server with the SUSE Linux OS,
    </para>
    <remark>emap 2011-11-07: Rather with the installation sources? </remark>
   </listitem>
   <listitem>
    <para>
     an &ay; configuration server that defines rules and control files.
     <remark>emap 2011-11-07: This is the first mention of a configuration server. Is it really needed?</remark>
    </para>
   </listitem>
  </itemizedlist>

  <sect1>
   <title>Configuration Server</title>

   <para>
    A configuration repository holds the control files for multiple
    machines. The control files can have any file names, which need to be
    specified at the boot time of a target client. To avoid supplying the
    control file name for every client, you can define the directory of the
    control files. If a directory is specified, then the target client tries
    to load a file with a name matching its IP address in HEX mode. This has
    the advantage that you will be dealing with consistent file names rather
    than IPs as file names which might lead to some confusion.
    <remark>emap 2011-11-07: Sounds like no dedicated server is needed, only a repository.</remark>
   </para>

   <para>
    The configuration repository is the same directory you specify when
    using the configuration system for creating control files.
   </para>

   <sect2>
    <title>HTTP Repository</title>
    <para>
     To be able to use the HTTP protocol to
     retrieve control files while auto-installing, you need a working
     HTTP server on the server side. Install
     <emphasis>Apache</emphasis> or another Web server and enable it
     using &yast;. Normally the Web server root directory resides in
     <filename>/srv/www/htdocs</filename> so you need to create a
     subdirectory which will serve your configuration repository.
    </para>
   </sect2>

   <sect2>
    <title>NFS Repository</title>
    <para>
     Create a directory and export it via
     NFS to the target clients. This
     directory may the same location where you have copied the CDs (for example
     <filename>/usr/local/SUSE</filename>).
     <remark>emap 2011-11-07: Change CDs to installation source/repository?</remark>
    </para>
   </sect2>

   <sect2>
    <title>TFTP Repository</title>
    <para>
     By default the TFTP directory is
     available under <filename>/tftpboot</filename> which can also contain
     boot images if you are booting over network. Do not forget to enable
     TFTP in the Inetd configuration file
     (<filename>/etc/inetd.conf</filename>). <emphasis>Inetd</emphasis>
     configuration can be done via &yast;.
    </para>
   </sect2>
  </sect1>
 </chapter>
-->
 <chapter xml:id="rulesandclass">
  <title>Rules and Classes</title>
  <info/>
  <para/>
  <sect1 xml:id="rules">
   <title>Rules-based Automatic Installation</title>

   <para>
    Rules offer the possibility to configure a system depending on system
    attributes by merging multiple control files during installation. The
    rules-based installation is controlled by a rules file. This is useful
    to install, for example, systems in two departments in one go. Assume a
    scenario where machines in department A need to be installed as office
    desktops, whereas machines in department B need to be installed as
    developer workstations. You would create a rules file with two different
    rules. For each rule, you could use different system parameters to
    distinguish the installations from one another. Each rule would also
    contain a link to an appropriate profile for each department.
   </para>

   <para>
    The rules file is an XML file containing rules for each group of systems
    (or single systems) that you want to automatically install. A set of
    rules distinguish a group of systems based on one or more system
    attributes. After passing all rules, each group of systems is linked to
    a control file. Both the rules file and the control files must be
    located in a pre-defined and accessible location.
   </para>

   <para>
    The rules file is retrieved only if no specific control file is supplied
    using the <literal>autoyast</literal> keyword. For example, if the
    following is used, the rules file will not be evaluated:
   </para>

<screen>autoyast=http://10.10.0.1/profile/myprofile.xml
autoyast=http://10.10.0.1/profile/rules/rules.xml</screen>

   <para>
    Instead use:
   </para>

<screen>autoyast=http://10.10.0.1/profile/</screen>

   <para>
    which will load
    <literal>http://10.10.0.1/profile/rules/rules.xml</literal> (the slash
    at the end of the directory name is important).
   </para>

   <figure xml:id="rules_fig1">
    <title>Rules</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="autoyast_rules.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast_rules.svg" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <para>
    If more than one rule applies, the final control file for each group is
    generated on the fly using a merge script. The merging process is based
    on the order of the rules and later rules override configuration data in
    earlier rules. Note that the names of the top sections in the merged xml
    files need to be in alphabetical order for the merge to succeed.
   </para>

   <para>
    The use of a rules file is optional. If the rules file is not found,
    system installation proceeds in the classic way by only using the
    supplied control file or by searching for the control file depending on
    the MAC or the IP address of the system.
   </para>

   <sect2 xml:id="rulesfile">
    <title>Rules File Explained</title>
    <example>
     <title>Simple Rules File</title>
     <para>
      The following simple example illustrates how the rules file is used to
      retrieve the configuration for a client with known hardware.
     </para>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE autoinstall&gt;
&lt;autoinstall xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;rules config:type="list"&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sdc 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_a.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sda 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_b.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
  &lt;/rules&gt;
&lt;/autoinstall&gt;</screen>
    </example>
    <para>
     The last example defines two rules and provides a different control
     file for every rule. The rule used in this case is
     <literal>disksize</literal>. After parsing the rules file, &yast;
     attempts to match the target system with the rules in the
     <filename>rules.xml</filename> file. A rule match occurs when the
     target system matches all system attributes defined in the rule. As
     soon as the system matches a rule, the respective resource is added to
     the stack of control files &ay; will use to create the final control
     file. The <literal>continue</literal> property tells &ay; whether it
     should continue with other rules after a match has been found.
    </para>
    <para>
     If the first rule does not match, the next rule in the list is examined
     until a match is found.
    </para>
    <para>
     Using the <literal>disksize</literal> attribute, you can provide
     different configurations for systems with hard disks of different
     sizes. The first rule checks if the device
     <filename>/dev/sdc</filename> is available and if it is greater than 1
     GB in size using the <literal>match</literal> property.
    </para>
    <para>
     A rule must have at least one attribute to be matched. If you need to
     check more attributes, such as memory or architectures, you can add
     more attributes in the rule resource as shown in the next example.
    </para>
    <example>
     <title>Simple Rules File</title>
     <para>
      The following example illustrates how the rules file is used to
      retrieve the configuration for a client with known hardware.
     </para>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE autoinstall&gt;
&lt;autoinstall xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;rules config:type="list"&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sdc 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;memsize&gt;
            &lt;match&gt;1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/memsize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_a.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/shda 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;memsize&gt;
            &lt;match&gt;256&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/memsize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_b.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
  &lt;/rules&gt;
&lt;/autoinstall&gt;</screen>
    </example>
    <para>
     The rules directory must be located in the same directory specified via
     the <literal>autoyast</literal> keyword at boot time. If the client was
     booted using <literal>autoyast=http://10.10.0.1/profiles/</literal>,
     &ay; will search for the rules file at
     http://10.10.0.1/profiles/rules/rules.xml.
    </para>
   </sect2>

   <sect2 xml:id="customrules">
    <title>Custom Rules</title>
    <para>
     If the attributes &ay; provides for rules are not enough for your
     purposes, use custom rules. Custom rules contain a shell script. The
     output of the script (STDOUT, STDERR is ignored) can be evaluated.
    </para>
    <para>
     Here is an example for the use of custom rules:
    </para>
<screen>&lt;rule&gt;
  &lt;custom1&gt;
    &lt;script&gt;
if grep -i intel /proc/cpuinfo &gt; /dev/null; then
echo -n "intel"
else
echo -n "non_intel"
fi;
    &lt;/script&gt;
    &lt;match&gt;*&lt;/match&gt;
    &lt;match_type&gt;exact&lt;/match_type&gt;
  &lt;/custom1&gt;
  &lt;result&gt;
    &lt;profile&gt;@custom1@.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
  &lt;/result&gt;
&lt;/rule&gt;</screen>
    <para>
     The script in this rule can echo either <literal>intel</literal> or
     <literal>non_intel</literal> to STDOUT (the output of the grep command
     must be directed to /dev/null in this case). The output of the rule
     script will be filled between the two '@' characters, to determine the
     file name of the control file to fetch. &ay; will read the output and
     fetch a file with the name <filename>intel.xml</filename> or
     <filename>non_intel.xml</filename>. This file can contain the &ay;
     profile part for the software selection, for example, in case you want
     a different software selection on intel hardware than on others.
    </para>
    <para>
     The number of custom rules is limited to five. So you can use
     <literal>custom1</literal> to <literal>custom5</literal>.
    </para>
   </sect2>

   <sect2 xml:id="matchtypes">
    <title>Match Types for Rules</title>
    <para>
     You can use five different match_types:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       <literal>exact</literal> (default)
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>greater</literal>
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>lower</literal>
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>range</literal>
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>regex</literal> (a simple <literal>=~</literal> operator
       like in Bash)
      </para>
     </listitem>
    </itemizedlist>
    <para>
     If using <literal>exact</literal>, the string must match exactly as
     specified. <literal>regex</literal> can be used to match substrings
     like <literal>ntel</literal> will match Intel, intel and intelligent.
     <literal>greater</literal> and <literal>lower</literal> can be used for
     <literal>memsize</literal> or <literal>totaldisk</literal> for example. They can match only with rules that
     return an integer value. A range is only possible for integer values
     too and has the form of <literal>value1-value2</literal>, for example
     <literal>512-1024</literal>.
    </para>
   </sect2>

   <sect2 xml:id="rulescombination">
    <title>Combine Attributes</title>
    <para>
     Multiple attributes can be combined via a logical operator. It is
     possible to let a rule match if <literal>disksize</literal> is greater than 1GB or <literal>memsize</literal>
     is exactly 512MB.
    </para>
    <para>
     You can do this with the <literal>operator</literal> element in the
     rules.xml file. <literal>and</literal> and <literal>or</literal> are
     possible operators, <literal>and</literal> being the default. Here is
     an example:
    </para>
<screen>&lt;rule&gt;
  &lt;disksize&gt;
    &lt;match&gt;/dev/sda 1000&lt;/match&gt;
    &lt;match_type&gt;greater&lt;/match_type&gt;
  &lt;/disksize&gt;
  &lt;memsize&gt;
    &lt;match&gt;256&lt;/match&gt;
    &lt;match_type&gt;greater&lt;/match_type&gt;
  &lt;/memsize&gt;
  &lt;result&gt;
    &lt;profile&gt;machine2.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
  &lt;/result&gt;
  &lt;operator&gt;or&lt;/operator&gt;
&lt;/rule&gt;</screen>
   </sect2>

   <sect2 xml:id="rulesstructure">
    <title>Rules File Structure</title>
    <para>
     The <filename>rules.xml</filename> file needs to:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       have at least one rule,
      </para>
     </listitem>
     <listitem>
      <para>
       have the name <filename>rules.xml</filename>,
      </para>
     </listitem>
     <listitem>
      <para>
       be located in the directory <filename>rules</filename> in the profile
       repository,
      </para>
     </listitem>
     <listitem>
      <para>
       have at least one attribute to match in the rule.
      </para>
     </listitem>
    </itemizedlist>
   </sect2>

   <sect2 xml:id="ruleattributes">
    <title>Predefined System Attributes</title>
    <para>
     The following table lists the predefined system attributes you can
     match in the rules file.
    </para>
    <para>
     If you are unsure about a value on your system, run
     <command>/usr/lib/&yast;/bin/y2base ayast_probe ncurses</command>.
     The text box displaying the detected values can be scrolled. Note that
     this command will not work while another &yast; process that
     requires a lock (for example the installer) is running. Therefore you
     cannot run it during the installation.
    </para>
    <table>
     <title>System Attributes</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>hostaddress</literal>
         </para>
        </entry>
        <entry>
         <para>
          IP address of the host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>host name</literal>
         </para>
        </entry>
        <entry>
         <para>
          The name of the host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>domain</literal>
         </para>
        </entry>
        <entry>
         <para>
          Domain name of host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>installed_product</literal>
         </para>
        </entry>
        <entry>
         <para>
          The name of the product to be installed.
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>installed_product_version</literal>
         </para>
        </entry>
        <entry>
         <para>
          The version of the product to be installed.
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>network</literal>
         </para>
        </entry>
        <entry>
         <para>
          network address of host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>mac</literal>
         </para>
        </entry>
        <entry>
         <para>
          MAC address of host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly (the MAC addresses should
          have the form <literal>0080c8f6484c</literal>).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>linux</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number of installed Linux partitions on the system
         </para>
        </entry>
        <entry>
         <para>
          This attribute can be 0 or more.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>others</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number of installed non-Linux partitions on the system
         </para>
        </entry>
        <entry>
         <para>
          This attribute can be 0 or more.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>xserver</literal>
         </para>
        </entry>
        <entry>
         <para>
          X Server needed for graphic adapter
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>memsize</literal>
         </para>
        </entry>
        <entry>
         <para>
          Memory available on host in MBytes
         </para>
        </entry>
        <entry>
         <para>
          All match types are available.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>totaldisk</literal>
         </para>
        </entry>
        <entry>
         <para>
          Total disk space available on host in MBytes
         </para>
        </entry>
        <entry>
         <para>
          All match types are available.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>hostid</literal>
         </para>
        </entry>
        <entry>
         <para>
          Hex representation of the IP address
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>arch</literal>
         </para>
        </entry>
        <entry>
         <para>
          Architecture of host
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>karch</literal>
         </para>
        </entry>
        <entry>
         <para>
          Kernel Architecture of host (for example SMP kernel, &xen;
          Kernel)
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>disksize</literal>
         </para>
        </entry>
        <entry>
         <para>
          Drive device and size
         </para>
        </entry>
        <entry>
         <para>
          All match types are available.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>product</literal>
         </para>
        </entry>
        <entry>
         <para>
          The hardware product name as specified in SMBIOS
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>product_vendor</literal>
         </para>
        </entry>
        <entry>
         <para>
          The hardware vendor as specified in SMBIOS
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>board</literal>
         </para>
        </entry>
        <entry>
         <para>
          The system board name as specified in SMBIOS
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>board_vendor</literal>
         </para>
        </entry>
        <entry>
         <para>
          The system board vendor as specified in SMBIOS
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>custom1-5</literal>
         </para>
        </entry>
        <entry>
         <para>
          Custom rules using shell scripts
         </para>
        </entry>
        <entry>
         <para>
          All match types are available.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="rules_dialogs">
    <title>Rules with Dialogs</title>
    <para>
     You can use dialog pop-ups with check boxes to select rules you want
     matched.
    </para>
    <para>
     The elements listed below must be placed within the following XML
     structure in the <filename>rules.xml</filename> file:
    </para>
<screen>&lt;rules config:type="list"&gt;
  &lt;rule&gt;
    &lt;dialog&gt;
      ...
    &lt;/dialog&gt;
  &lt;/rule&gt;
&lt;/rules&gt;</screen>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>dialog_nr</literal>
         </para>
        </entry>
        <entry>
         <para>
          All rules with the same <literal>dialog_nr</literal> are presented
          in the same pop-up dialog. The same <literal>dialog_nr</literal>
          can appear in multiple rules.
         </para>
<screen>&lt;dialog_nr config:type="integer"&gt;3&lt;/dialog_nr&gt;</screen>
        </entry>
        <entry>
         <para>
          This element is optional and the default for a missing dialog_nr
          is always <literal>0</literal>. To use one pop-up for
          all rules, you do not need to specify the
          <literal>dialog_nr</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>element</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify a unique ID. Even if you have more than one dialog, you
          must not use the same id twice. Using id <literal>1</literal> on
          dialog 1 and id <literal>1</literal> on dialog 2 is not supported.
          (This behavior is contrary to the <literal>ask</literal> dialog,
          where you can have the same ID for multiple dialogs.)
         </para>
<screen>&lt;element config:type="integer"&gt;3&lt;/element&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. If left out, &ay; adds its own ids internally. Then
          you cannot specify conflicting rules (see below).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>title</literal>
         </para>
        </entry>
        <entry>
         <para>
          Caption of the pop-up dialog
         </para>
<screen>&lt;title&gt;Desktop Selection&lt;/title&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>question</literal>
         </para>
        </entry>
        <entry>
         <para>
          Question shown in the pop-up behind the check box.
         </para>
<screen>&lt;question&gt;GNOME Desktop&lt;/question&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. If you do not configure a text here, the name of the XML
          file that is triggered by this rule will be shown instead.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>timeout</literal>
         </para>
        </entry>
        <entry>
         <para>
          Timeout in seconds after which the dialog will automatically
          <quote>press</quote> the okay button. Useful for a non-blocking
          installation in combination with rules dialogs.
         </para>
<screen>&lt;timeout config:type="integer"&gt;30&lt;/timeout&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. A missing timeout will stop the installation process
          until the dialog is confirmed by the user.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>conflicts</literal>
         </para>
        </entry>
        <entry>
         <para>
          A list of element ids (rules) that conflict with this rule. If
          this rule matches or is selected by the user, all conflicting
          rules are deselected and disabled in the pop-up. Take care that
          you do not create deadlocks.
         </para>
<screen>&lt;conflicts config:type="list"&gt;
  &lt;element config:type="integer"&gt;1&lt;/element&gt;
  &lt;element config:type="integer"&gt;5&lt;/element&gt;
  ...
&lt;/conflicts&gt;</screen>
        </entry>
        <entry>
         <para>
          <literal>optional</literal>
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
    <para>
     Here is an example of how to use dialogs with rules:
    </para>
<screen>&lt;rules config:type="list"&gt;
  &lt;rule&gt;
    &lt;custom1&gt;
      &lt;script&gt;
echo -n 100
      &lt;/script&gt;
      &lt;match&gt;100&lt;/match&gt;
      &lt;match_type&gt;exact&lt;/match_type&gt;
    &lt;/custom1&gt;
    &lt;result&gt;
      &lt;profile&gt;rules/gnome.xml&lt;/profile&gt;
      &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;/result&gt;
    &lt;dialog&gt;
      &lt;element config:type="integer"&gt;0&lt;/element&gt;
      &lt;question&gt;GNOME Desktop&lt;/question&gt;
      &lt;title&gt;Desktop Selection&lt;/title&gt;
      &lt;conflicts config:type="list"&gt;
        &lt;element config:type="integer"&gt;1&lt;/element&gt;
      &lt;/conflicts&gt;
      &lt;dialog_nr config:type="integer"&gt;0&lt;/dialog_nr&gt;
    &lt;/dialog&gt;
  &lt;/rule&gt;
  &lt;rule&gt;
    &lt;custom1&gt;
      &lt;script&gt;
echo -n 100
      &lt;/script&gt;
      &lt;match&gt;101&lt;/match&gt;
      &lt;match_type&gt;exact&lt;/match_type&gt;
    &lt;/custom1&gt;
    &lt;result&gt;
      &lt;profile&gt;rules/gnome.xml&lt;/profile&gt;
      &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;/result&gt;
    &lt;dialog&gt;
      &lt;element config:type="integer"&gt;1&lt;/element&gt;
      &lt;dialog_nr config:type="integer"&gt;0&lt;/dialog_nr&gt;
      &lt;question&gt;Gnome Desktop&lt;/question&gt;
      &lt;conflicts config:type="list"&gt;
        &lt;element config:type="integer"&gt;0&lt;/element&gt;
      &lt;/conflicts&gt;
    &lt;/dialog&gt;
  &lt;/rule&gt;
  &lt;rule&gt;
    &lt;custom1&gt;
      &lt;script&gt;
echo -n 100
      &lt;/script&gt;
      &lt;match&gt;100&lt;/match&gt;
      &lt;match_type&gt;exact&lt;/match_type&gt;
    &lt;/custom1&gt;
    &lt;result&gt;
      &lt;profile&gt;rules/all_the_rest.xml&lt;/profile&gt;
      &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
    &lt;/result&gt;
  &lt;/rule&gt;
&lt;/rules&gt;</screen>
   </sect2>
  </sect1>
  <sect1 xml:id="classes">
   <title>Classes</title>

   <para>
    Classes represent configurations for groups of target systems. Unlike
    rules, classes need to be configured in the control file. Then classes
    can be assigned to target systems.
   </para>

   <para>
    Here is an example of a class definition:
   </para>

<screen>&lt;classes config:type="list"&gt;
  &lt;class&gt;
    &lt;class_name&gt;TrainingRoom&lt;/class_name&gt;
    &lt;configuration&gt;Software.xml&lt;/configuration&gt;
  &lt;/class&gt;
&lt;/classes&gt;</screen>

   <para>
    In the example above, the file <filename>Software.xml</filename> must be
    placed in the subdirectory <filename>classes/TrainingRoom/</filename> It
    will get fetched from the same place the &ay; control file and rules
    were fetched from.
   </para>

   <para>
    If you have multiple control files and those control files share parts,
    better use classes for common parts.
<!--You just need to change the class and all profiles using that class are fixed too.-->
    <remark>emap 2011-11-07: Sentence does not make sense.</remark>
    You can also use XIncludes.
   </para>

   <para>
    Using the configuration management system, you can define a set of
    classes. A class definition consists of the following variables:
   </para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Name: class name
     </para>
    </listitem>
    <listitem>
     <para>
      Description:
     </para>
    </listitem>
    <listitem>
     <para>
      Order: order (or priority) of the class in the stack of migration
      <remark>emap 2011-11-07: What migration?</remark>
     </para>
    </listitem>
   </itemizedlist>

   <figure os="sles;sled">
    <title>Defining Classes</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="cms-class-definitions.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="cms-class-definitions.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <figure os="osuse">
    <title>Defining Classes</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="cms-class-definitions_kde.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="cms-class-definitions_kde.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <para>
    You can create as many classes as you need, however it is recommended to
    keep the set of classes as small as possible to keep the configuration
    system concise. For example, the following sets of classes can be used:
   </para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      site: classes describing a physical location or site,
     </para>
    </listitem>
    <listitem>
     <para>
      machine: classes describing a type of machine,
     </para>
    </listitem>
    <listitem>
     <para>
      role: classes describing the function of the machine,
     </para>
    </listitem>
    <listitem>
     <para>
      group: classes describing a department or a group within a site or a
      location.
     </para>
    </listitem>
   </itemizedlist>

   <para>
    A file saved in a class directory can have the same syntax and format as
    a regular control file but represents a subset of the configuration. For
    example, to create a new control file for a special computer with a
    specific network interface, only the control file resource which
    controls the configuration of the network is needed. Having multiple
    network types, you can merge the one needed for a special type of
    hardware with other class files and create a new control file which
    suits the system being installed.
    <remark>emap 2011-11-07: Not very clear.</remark>
   </para>
  </sect1>
  <sect1 xml:id="mixinfrulesclasses">
   <title>Mixing Rules and Classes</title>

   <para>
    It is possible to mix rules and classes during an auto-installation
    session. For example you can identify a system using rules which contain
    class definitions in them. The process is described in the figure
    <xref linkend="rulesflow"/>.
   </para>

   <para>
    After retrieving the rules and merging them, the generated control file
    is parsed and checked for class definitions. If classes are defined,
    then the class files are retrieved from the original repository and a
    new merge process is initiated.
   </para>
  </sect1>
  <sect1 xml:id="merging">
   <title>Merging of Rules and Classes</title>

   <para>
    With classes and with rules, multiple XML files get merged into one
    resulting XML file. This merging process is often confusing for people,
    because it behaves different than one would expect. First of all it is
    important to note that the names of the top sections in the merged XML
    files need to be in alphabetical order for the merge to succeed.
   </para>

   <para>
    For example, the following two XML parts should be merged:
   </para>

<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;130&lt;/partition_id&gt;
        &lt;size&gt;2000mb&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;size&gt;4Gb&lt;/size&gt;
        &lt;mount&gt;/data&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>

<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;initialize config:type="boolean"&gt;false&lt;/initialize&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>

   <para>
    You might expect the control file to contain 3 partitions. This is not
    the case. You will end up with two partitions and the first partition is
    a mix up of the swap and the root partition. Settings configured in both
    partitions, like <literal>mount</literal> or <literal>size</literal>,
    will be used from the second file. Settings that only exist in the first
    or second partition, will be copied to the merged partition too.
    <remark>emap 2011-11-07: A little confusing, why not put the merged file here.</remark>
   </para>

   <para>
    In this example, you do not want a second <literal>drive</literal>. The
    two drives should be merged into one. With regard to partitions, three
    separate ones should be defined. Using the <literal>dont_merge</literal>
    method solves the merging problem:
   </para>

<screen>&lt;classes config:type="list"&gt;
  &lt;class&gt;
    &lt;class_name&gt;swap&lt;/class_name&gt;
    &lt;configuration&gt;largeswap.xml&lt;/configuration&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/class&gt;
&lt;/classes&gt;</screen>

<screen>&lt;rule&gt;
  &lt;board_vendor&gt;
    &lt;match&gt;ntel&lt;/match&gt;
    &lt;match_type&gt;regex&lt;/match_type&gt;
  &lt;/board_vendor&gt;
  &lt;result&gt;
    &lt;profile&gt;classes/largeswap.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/result&gt;
  &lt;board_vendor&gt;
    &lt;match&gt;PowerEdge [12]850&lt;/match&gt;
    &lt;match_type&gt;regex&lt;/match_type&gt;
  &lt;/board_vendor&gt;
  &lt;result&gt;
    &lt;profile&gt;classes/smallswap.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/result&gt;
&lt;/rule&gt;</screen>
  </sect1>
 </chapter>
 <chapter xml:id="Invoking">
  <title>The Auto-Installation Process</title>
  <info/>
  <para/>
  <sect1 xml:id="Installation.process">
   <title>Introduction</title>

   <para>
    After the system has booted into an automatic installation and the
    control file has been retrieved, &yast; configures the system
    according to the information provided in the control file. All
    configuration settings are summarized in a window that is shown by
    default and should be deactivated if a fully automatic installation is
    needed.
   </para>

   <para>
    By the time &yast; displays the summary of the configuration,
    &yast; has only probed hardware and prepared the system for
    auto-installation. Nothing has been changed in the system yet. In case
    of any error, you can still abort the process.
   </para>

   <para>
    A system should be automatically installable without the need to have
    any graphic adapter or monitor. Having a monitor attached to the client
    machine is nevertheless recommended so you can supervise the process and
    to get feedback in case of errors. Choose between the graphical and the
    text-based Ncurses interfaces. For headless clients, system messages can
    be monitored using the serial console.
   </para>

   <sect2 xml:id="Installation.Interface.X11">
    <title>X11 Interface (graphical)</title>
    <para>
     This is the default interface while auto-installing. No special
     variables are required to activate it.
    </para>
   </sect2>

   <sect2 xml:id="Installation.Interface.SerialConsole">
    <title>Serial console</title>
    <para>
     Start installing a system using the serial console by adding the
     keyword <literal>console</literal> (for example
     <literal>console=ttyS0</literal>) to the command line of the kernel.
     This starts linuxrc in console mode and later &yast; in serial
     console mode.
    </para>
   </sect2>

   <sect2 xml:id="Installation.Interface.Ncurses">
    <title>Text-based &yast; Installation</title>
    <para>
     This option can also be activated on the command line. To start
     &yast; in text mode, add <literal>textmode=1</literal> on the
     command line.
    </para>
    <para>
     Starting &yast; in text mode is recommended when installing a client
     with less than 64 MB or when X11 should not be configured, especially
     on headless machines.
    </para>
   </sect2>
  </sect1>
  <sect1 xml:id="bootmedium">
   <title>Choosing the Right Boot Medium</title>

   <para>
    There are different methods for booting the client. The computer can
    boot from its network interface card (NIC) to receive the boot images
    via DHCP or TFTP. Alternatively a suitable kernel and initrd image can
    be loaded from a flash disk or a bootable DVD-ROM.
   </para>

   <para>
    &yast; will check for <filename>autoinst.xml</filename> in the root
    directory of the boot medium or the initrd upon start-up and switch to
    an automated installation if it was found. In case the control file is
    named differently or located elsewhere, specify its location on the
    Kernel command line with the parameter
    <literal>&ay;=<replaceable>URL</replaceable></literal>.
   </para>

   <sect2 xml:id="bootmedium.flash">
    <title>Booting from a Flash Disk</title>
    <para>
     For testing/rescue purposes or because the NIC does not have a PROM or
     PXE you can build a bootable flash disk to use with &ay;. Flash
     disks can also store the control file.
    </para>
    <tip>
     <title>Creating a Bootable Flash Disk</title>
     <para>
      To create a bootable flash disk, copy either the
      &productname; iso image of DVD1 or the Mini CD ISO image to the
      disk using the <command>dd</command> command (the flash disk must not be
      mounted, all data on the device will be erased):
     </para>
<screen>dd if=PATH_TO_ISO_IMAGE of=USB_STORAGE_DEVICE bs=4M</screen>
    </tip>
   </sect2>

   <sect2 xml:id="bootmedium.dvd">
    <title>Booting from DVD-ROM</title>
    <para>
     You can use the original &productname; DVD-ROM number one in
     combination with other media. For example, the control file can be
     provided via a flash disk or a specified location on the network.
     Alternatively, create a customized DVD-ROM that includes the control
     file.
    </para>
   </sect2>

   <sect2 xml:id="bootmedium.pxe">
    <title>Booting via PXE over the Network</title>
    <para>
     Booting via PXE requires a DHCP and a TFTP server in your network. The
     computer will then boot without a physical medium.  <phrase
     os="sles;sled">For instructions on setting up the required
     infrastructure, see <xref linkend="cha.deployment.remoteinst"/>.</phrase>
    </para>
    <para>
     A problem you might run into if you do installation via PXE is that the
     installation will run into an endless loop, because after the first
     reboot, the machine is doing PXE boot again and restarts the
     installation instead of booting from hard disk for the second stage of
     the installation.
    </para>
    <para>
     This problem can be solved in different ways. One way is to use an HTTP
     server to provide the &ay; control file. And, instead of a static
     control file, run a CGI script on the Web server that provides the
     control file and changes the TFTP server configuration for your target
     host. Then the next PXE boot of the machine will be from hard disk by
     default.
    </para>
    <para>
     Another way is to use &ay; to upload a new PXE boot configuration
     for the target host via the control file:
    </para>
<screen>&lt;pxe&gt;
  &lt;pxe_localboot config:type="boolean"&gt;true&lt;/pxe_localboot&gt;
  &lt;pxelinux-config&gt;
    DEFAULT linux
    LABEL linux
    localboot 0
  &lt;/pxelinux-config&gt;
  &lt;tftp-server&gt;&tftpip;&lt;/tftp-server&gt;
  &lt;pxelinux-dir&gt;/pxelinux.cfg&lt;/pxelinux-dir&gt;
  &lt;filename&gt;__MAC__&lt;/filename&gt;
&lt;/pxe&gt;</screen>
    <para>
     This entry will upload a new configuration for the target host to the
     TFTP server shortly before the first reboot happens. In most
     installations the TFTP daemon runs as user
     <systemitem class="username">nobody</systemitem>. You need to make sure
     this user has write permissions to the
     <filename>pxelinux.cfg</filename> directory. You can also configure the
     file name that will be uploaded. If you use the <quote>magic</quote>
     <literal>__MAC__</literal> file name, the file name will be the MAC
     address of your machine like, for example
     <literal>01-08-00-27-79-49-ee</literal>. If the file name setting is
     missing, the IP address will be used for the file name.
    </para>
    <para>
     If you want to do another auto-installation on the same machine, you
     need to remove the file from the TFTP server.
    </para>
   </sect2>
  </sect1>
  <sect1 xml:id="invoking_autoinst">
   <title>Invoking the Auto-Installation Process</title>

   <para>
    <remark role="fixme">Add a short description</remark>
   </para>

   <sect2 xml:id="invoking_autoinst.options">
    <title>Command Line Options</title>
    <para>
     Adding the command line variable <literal>autoyast</literal> causes
     linuxrc to start in automated mode. linuxrc searches for a
     configuration file, which should be distinguished from the main control
     file in the following places:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       in the root directory of the initial RAM disk used for booting the
       system,
      </para>
     </listitem>
     <listitem>
      <para>
       in the root directory of the boot medium
      </para>
     </listitem>
    </itemizedlist>
    <para>
     The configuration file used by linuxrc can have the following keywords
     (for a detailed description of how linuxrc works and other keywords,
     see <xref linkend="appendix.linuxrc"/>):
    </para>
    <table>
     <title>Keywords for linuxrc</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          Keyword
         </para>
        </entry>
        <entry>
         <para>
          Value
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
        <row>
        <entry>
         <para>
          <literal>autoupgrade</literal>
         </para>
        </entry>
        <entry>
         <para>
          Initiate an automatic upgrade using &ay;. Also requires the
          <literal>autoyast</literal> parameter (see <xref
          linkend="Commandline.ay"/> for details).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast</literal>
         </para>
        </entry>
        <entry>
         <para>
          Location of the control file for automatic installation,
          see <xref linkend="Commandline.ay"/> for details.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast2</literal>
         </para>
        </entry>
        <entry>
         <para>
          Location of the control file for automatic installation.
          Similar to <literal>autoyast</literal> option but linuxrc parses
          the provided value and, for example, tries to configure a network
          when needed. For information about differences between the &ay; and
          linuxrc URI syntax, see the documentation of linuxrc. &ay;'s rules
          and classes are not supported.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>ifcfg</literal>
         </para>
        </entry>
        <entry>
         <para>
          Configure and start the network. Required if the &ay; is to be
          fetched from a remote location. See <xref linkend="ay.adv_network"/>
          for details.
         </para>
        </entry>
       </row>
       <!-- fs 2016-07-29: better use ifcfg
       <row>
        <entry>
         <para>
          <literal>gateway</literal>
         </para>
        </entry>
        <entry>
         <para>
          Gateway
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>hostip</literal>
         </para>
        </entry>
        <entry>
         <para>
          When empty, client sends BOOTP request, otherwise client is
          configured with entered IP configuration.
         </para>
        </entry>
        </row>
        -->
       <row>
        <entry>
         <para>
          <literal>insmod</literal>
         </para>
        </entry>
        <entry>
         <para>
          Kernel modules to load
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>install</literal>
         </para>
        </entry>
        <entry>
         <para>
          Location of the installation directory, for example
          <literal>install=nfs://192.168.2.1/CDs/</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>instmode</literal>
         </para>
        </entry>
        <entry>
         <para>
          Installation mode, for example <literal>nfs</literal>,
          <literal>http</literal> etc. (not needed if
          <literal>install</literal> is set).
         </para>
        </entry>
       </row>
       <!-- fs 2016-07-29: better use ifcfg
       <row>
        <entry>
         <para>
          <literal>nameserver</literal>
         </para>
        </entry>
        <entry>
         <para>
          Name Server
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>netdevice</literal>
         </para>
        </entry>
        <entry>
         <para>
          Network device to use for network setup (for BOOTP and DHCP
          requests)
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>netmask</literal>
         </para>
        </entry>
        <entry>
         <para>
          Netmask
         </para>
        </entry>
        </row>
        -->
       <row>
        <entry>
         <para>
          <literal>server</literal>
         </para>
        </entry>
        <entry>
         <para>
          Server (NFS) to contact for source directory
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>serverdir</literal>
         </para>
        </entry>
        <entry>
         <para>
          Directory on NFS Server
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>y2confirm</literal>
         </para>
        </entry>
        <entry>
         <para>
          Even with &lt;confirm&gt;no&lt;/confirm&gt; in the
          control file, the confirm proposal comes up.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>
     These variables and keywords will bring the system up to the point
     where &yast; can take over with the main control file. Currently,
     the source medium is automatically discovered, which in some cases
     makes it possible to initiate the auto-install process without giving
     any instructions to linuxrc.
    </para>
    <para>
     The traditional linuxrc configuration file (<filename>info</filename>)
     has the function of giving the client enough information about the
     installation server and the location of the sources. Usually this file
     is not needed; it is however needed in special network environments
     where DHCP and BOOTP are not used or when special kernel modules need
     to be loaded.
    </para>
    <para>
     All linuxrc keywords can be passed to linuxrc using the kernel command
     line. The command line can also be set when creating network bootable
     images or it can be passed to the kernel using a specially configured
     DHCP server in combination with Etherboot or PXE.
     <remark>emap 2011-11-07:Obscure paragraph. What is set in the command
     line? And what is the 'it' that can be passed to the kernel? Probably not
     the command line itself.</remark>
    </para>
    <para>
     The command line variable <literal>autoyast</literal> can be used in
     the format described in table
     <quote><xref linkend="Commandline.ay"/></quote>
    </para>
    <table xml:id="Commandline.ay">
     <title>Command Line Variables for &ay;</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          Command line variable
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>autoyast=default</literal>
         </para>
        </entry>
        <entry>
         <para>
          Default auto-installation option.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=file:///<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Looks for control file in specified path (relative to the source
          root directory, for example
          <literal>file:///autoinst.xml</literal> if in the top directory of
          a CD-ROM and you did an installation from CD).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=device://<replaceable>DEVICE</replaceable>/<replaceable>FILENAME</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Looks for control file on a storage device. Do not specify the
          full path to the device, but rather the device name only, for
          example You may also omit specifying the device and trigger
          &ay; to search all devices
          (<literal>autoyast=device:///<replaceable>FILENAME</replaceable></literal>).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=nfs://<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Looks for control file on an NFS server.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=http://[user:password@]<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieves the control file from a Web server using the HTTP
          protocol. Specifying a user name and a password is optional.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=https://[user:password@]<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieves the control file from a Web server using HTTPS.
          Specifying a user name and a password is optional.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=tftp://<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieve the control file via TFTP.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=ftp://[user:password@]<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieve the control file via FTP. Specifying a user name and a
          password is optional.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=usb://<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieve the control file from USB devices (&ay; will search
          all connected USB devices).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=relurl://<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieve the control file from the installation source
          (install=....).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=slp</literal>
         </para>
        </entry>
        <entry>
         <para>
          Query the location of the control file from an SLP server
          (service:autoyast:...). Optionally you may add a
          <literal>description=</literal> attribute so you can
          <quote>translate</quote> the URL into something more readable.
          (<literal>autoyast=slp:/?descr=*SLES*</literal>
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=cifs://<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Looks for control file on a CIFS server.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=label://<replaceable>LABEL</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Searches for a control file on a device with the specified label
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>
     Several scenarios for auto-installation are possible using different
     types of infrastructure and source media. The simplest way is to use
     the source media (DVD number one) of &productname;. To initiate the
     auto-installation process however, the auto-installation command line
     variable should be entered at system boot-up and the control file
     should be accessible for &yast;.
     </para>
     <para>In a scripting context, you can use a serial console for your
       virtual machine, that allows you to work in text mode. Then you can
       pass the needed parameters from an expect script or equivalent.</para>
     <para>
     The following list of scenarios explains how the control file can be supplied:
    </para>
    <variablelist>
     <varlistentry>
      <term>Using the Original &productname; DVD-ROM</term>
      <listitem>
       <para>
        When using the original DVD-ROM (DVD #1 is needed), the control file
        needs to be accessible via flash disk or network:
       </para>
       <formalpara>
        <title>Flash Disk</title>
        <para>
         Access the control file via the
         <literal>autoyast=usb://<replaceable>PATH</replaceable></literal>
         option.
        </para>
       </formalpara>
       <formalpara>
        <title>Network</title>
        <para>
         Access the control file via the following commands:
         <literal>autoyast=nfs://..</literal>,
         <literal>autoyast=ftp://..</literal>,
         <literal>autoyast=http://..</literal>,
         <literal>autoyast=https://..</literal>,
         <literal>autoyast=tftp://..</literal>, or
         <literal>autoyast=cifs://..</literal>.
        </para>
       </formalpara>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Using a Custom DVD-ROM</term>
      <listitem>
       <para>
        In this case, you can include the control file directly on the
        DVD-ROM. When placing it in the root directory and naming it
        <filename>autoinst.xml</filename>, it will automatically be found
        and used for the installation. Otherwise use
        <literal>autoyast=file:///<replaceable>PATH</replaceable></literal>
        to specify the path to the control file.
       </para>
       <para>
        When using a DVD-ROM for auto-installation, it is necessary to
        instruct the installer to use the DVD-ROM for installation and not
        try to find the installation files on the network. This can be
        accomplished by adding the <literal>instmode=cd</literal> option to
        the kernel command line (this can be automated done by adding the
        option to the <filename>isolinux.cfg</filename> file on the DVD).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Using a Network Installation Source</term>
      <listitem>
       <para>
        This option is the most important one because
        installations of multiple machines are usually done using SLP or NFS
        servers and other network services like BOOTP and DHCP. The easiest
        way to make the control file available is to place it in the root
        directory of the installation source naming it
        <filename>autoinst.xml</filename>. In this case it will
        automatically be found and used for the installation. The control
        file can also reside in the following places:
       </para>
       <formalpara>
        <title>Flash Disk</title>
        <para>
         Access the control file via the
         <literal>autoyast=usb://<replaceable>PATH</replaceable></literal>
         option.
        </para>
       </formalpara>
       <formalpara>
        <title>Network</title>
        <para>
         Access the control file via the following commands:
         <literal>autoyast=nfs://..</literal>,
         <literal>autoyast=ftp://..</literal>,
         <literal>autoyast=http://..</literal>,
         <literal>autoyast=https://..</literal>,
         <literal>autoyast=tftp://..</literal>, or
         <literal>autoyast=cifs://..</literal>.
        </para>
       </formalpara>
      </listitem>
     </varlistentry>
    </variablelist>
    <note>
     <title>Disabling Network and DHCP</title>
     <para>
      To disable the network during installations where it is not needed or
      unavailable, for example when auto-installing from DVD-ROMs, use the
      linuxrc option <literal>netsetup=0</literal> to disable the network
      setup.
     </para>
    </note>
    <note>
     <title>
      Difference Between the <literal>autoyast</literal> and
      <literal>autoyast2</literal> Options
     </title>
     <para>
      The options <literal>autoyast</literal> and <literal>autyast2</literal>
      are very similar but differ in one important point:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        When you use <literal>autoyast=http://...</literal>, you need to
        provide linuxrc with the network configuration.
       </para>
      </listitem>
      <listitem>
       <para>
        When you use <literal>autoyast2=http://...</literal>, linuxrc tries
        to configure the network for you.
       </para>
      </listitem>
     </itemizedlist>
    </note>
    <para>
     If <literal>autoyast=default</literal> is defined, &yast; will look
     for a file named <filename>autoinst.xml</filename> in the following
     three places:
    </para>
    <orderedlist>
     <listitem>
      <para>
       the root directory of the flash disk,
      </para>
     </listitem>
     <listitem>
      <para>
       the root directory of the installation medium,
      </para>
     </listitem>
     <listitem>
      <para>
       the root directory of the initial RAM disk used to boot the system.
      </para>
     </listitem>
    </orderedlist>
    <para>
     With all &ay; invocation options, excluding
     <literal>default</literal>, it is possible to specify the location of
     the control file in the following ways:
    </para>
<!-- numeration="arabic" -->
    <orderedlist>
     <listitem>
      <para>
       Specify the exact location of the control file:
      </para>
<screen>autoyast=http://192.168.1.1/control-files/client01.xml</screen>
     </listitem>
     <listitem>
      <para>
       Specify a directory where several control files are located:
      </para>
<screen>autoyast=http://192.168.1.1/control-files/</screen>
      <para>
       In this case the relevant control file is retrieved using the hex
       digit representation of the IP as described below.
      </para>
     </listitem>
    </orderedlist>
    <para>
     If only the path prefix variable is defined, &yast; will fetch the
     control file from the specified location in the following way:
    </para>
<!-- numeration="arabic" -->
    <orderedlist>
     <listitem>
      <para>
       First, it will search for the control file using its own IP address
       in uppercase hexadecimal, for example <literal>192.0.2.91 -&gt;
       C000025B</literal>.
      </para>
     </listitem>
     <listitem>
      <para>
       If this file is not found, &yast; will remove one hex digit and
       try again. This action is repeated until the file with the correct
       name is found. Ultimately, it will try looking for a file with the
       MAC address of the client as the file name (mac should have the
       following syntax: <literal>0080C8F6484C</literal>) and if not found a
       file named <filename>default</filename> (in lowercase).
      </para>
     </listitem>
    </orderedlist>
    <para>
     As an example, for 192.0.2.91, the HTTP client will try:
    </para>
<!-- role="literallayout" -->
<screen>C000025B
C000025
C00002
C0000
C000
C00
C0
C
0080C8F6484C
default</screen>
    <para>
     in that order.
    </para>
    <para>
     To determine the hex representation of the IP address of the client,
     use the utility called <command>/usr/bin/gethostip</command> available
     with the <systemitem class="resource">syslinux</systemitem> package.
    </para>
    <example>
     <title>Determine HEX code for an IP address</title>
<screen># /usr/bin/gethostip 10.10.0.1
10.10.0.1 10.10.0.1 0A0A0001</screen>
    </example>
   </sect2>

   <sect2 xml:id="autoinstall.singlesystem">
    <title>Auto-installing a Single System</title>
    <para>
     The easiest way to auto-install a system without any network connection
     is to use the original &productname; DVD-ROMs and a flash disk. You
     do not need to set up an installation server nor the network
     environment.
    </para>
    <para>
     Create the control file and name it <filename>autoinst.xml</filename>.
     Copy the file <filename>autoinst.xml</filename> to the flash disk.
    </para>
   </sect2>

   <sect2 xml:id="invoking_autoinst.linuxrc">
    <title>Combining the linuxrc <filename>info</filename> file with the &ay; control file</title>
    <para>
     If you choose to pass information to linuxrc using the
     <filename>info</filename> file, it is possible to integrate the
     keywords in the XML control file. In this case the file needs to be
     accessible to linuxrc and needs to be named <filename>info</filename>.
    </para>
    <para>
     Linuxrc will look for a string (<literal>start_linuxrc_conf</literal>
     in the control file which represents the beginning of the file. If it
     is found, it will parse the content starting from that string and will
     finish when the string <literal>end_linuxrc_conf</literal> is found.
     The options are stored in the control file in the following way:
    </para>
    <example>
     <title>Linuxrc options in the control file</title>
<screen>....
  &lt;install&gt;
....
    &lt;init&gt;
      &lt;info_file&gt;
&lt;![CDATA[
#
# Do not remove the following line:
# start_linuxrc_conf
#
install: nfs://192.168.1.1/CDs/full-i386
textmode: 1
autoyast: file:///info

# end_linuxrc_conf
# Do not remove the above comment
#
]]&gt;

      &lt;/info_file&gt;
    &lt;/init&gt;
......
  &lt;/install&gt;
....
</screen>
    </example>
    <para>
     Note that the <literal>autoyast</literal> keyword must point to the
     same file. If it is on a flash disk, then the option
     <literal>usb:///</literal> needs to be used. If the
     <filename>info</filename> file is stored in the initial RAM disk, the
     <literal>file://</literal> option needs to be used.
    </para>
   </sect2>
  </sect1>
  <sect1 xml:id="System_Configuration">
   <title>System Configuration</title>

   <para>
    The system configuration during auto-installation is the most important
    part of the whole process. As you have seen in the previous chapters,
    almost anything can be configured automatically on the target system. In
    addition to the pre-defined directives, you can always use post-scripts
    to change other things in the system. Additionally you can change any
    system variables, and if required, copy complete configuration files
    into the target system.
   </para>

   <sect2 xml:id="System_Configuration.post">
    <title>Post-Install and System Configuration</title>
    <para>
     The post-installation and system configuration are initiated directly
     after the last package is installed on the target system and continue
     after the system has booted for the first time.
    </para>
    <para>
     Before the system is booted for the first time, &ay; writes all data
     collected during installation and writes the boot loader in the
     specified location. In addition to these regular tasks, &ay;
     executes the chroot-scripts as specified in the control file. Note that
     these scripts are executed while the system is not yet mounted.
    </para>
    <para>
     If a different kernel than the default is installed, a hard reboot will
     be required. A hard reboot can also be forced during auto-installation,
     independent of the installed kernel. Use the <literal>reboot</literal>
     property of the <literal>general</literal> resource (see
     <xref linkend="CreateProfile.General"/>).
    </para>
   </sect2>

   <sect2 xml:id="System_Configuration.custom">
    <title>System Customization</title>
    <para>
     Most of the system customization is done in the second stage of the
     installation. If you require customization that cannot be done using
     &ay; resources, use post-install scripts for further modifications.
    </para>
    <para>
     You can define an unlimited number of custom scripts in the control
     file, either by editing the control file or by using the configuration
     system.
    </para>
   </sect2>
  </sect1>
 </chapter>
 <chapter xml:id="InstalledSystem">
  <title>Running &ay; in an Installed System</title>
   <para>
    In some cases it is useful to run &ay; in a running system.
   </para>
   <para>
    In the following example, an additional software package
    (<literal>foo</literal>) is going to be installed. In order to run this
    software, a user needs to be added and an NTP client needs to be configured.
   </para>
   <para>
    The respective &ay; profile needs to include a section for the package
    installation (<xref linkend="Software.Selections.stage2_packs"/>),
    a user (<xref linkend="Configuration.Security.users"/>) section and an
    NTP-client (<xref linkend="Configuration.Network.Ntp"/>) section:
   </para>
   <screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;ntp-client&gt;
    &lt;peers config:type="list"&gt;
      &lt;peer&gt;
        &lt;address&gt;us.pool.ntp.org&lt;/address&gt;
        &lt;comment/&gt;
        &lt;options&gt; iburst&lt;/options&gt;
        &lt;type&gt;server&lt;/type&gt;
      &lt;/peer&gt;
    &lt;/peers&gt;
    &lt;start_at_boot config:type="boolean"&gt;true&lt;/start_at_boot&gt;
    &lt;start_in_chroot config:type="boolean"&gt;false&lt;/start_in_chroot&gt;
    &lt;sync_interval config:type="integer"&gt;5&lt;/sync_interval&gt;
    &lt;synchronize_time config:type="boolean"&gt;false&lt;/synchronize_time&gt;
  &lt;/ntp-client&gt;
  &lt;software&gt;
    &lt;post-packages config:type="list"&gt;
      &lt;package&gt;ntp&lt;/package&gt;
      &lt;package&gt;yast2-ntp-client&lt;/package&gt;
      &lt;package&gt;foo&lt;/package&gt;
    &lt;/post-packages&gt;
  &lt;/software&gt;
  &lt;users config:type="list"&gt;
    &lt;user&gt;
      &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
      &lt;fullname&gt;Foo user&lt;/fullname&gt;
      &lt;gid&gt;100&lt;/gid&gt;
      &lt;home&gt;/home/foo&lt;/home&gt;
      &lt;password_settings&gt;
        &lt;expire/&gt;
        &lt;flag/&gt;
        &lt;inact/&gt;
        &lt;max&gt;99999&lt;/max&gt;
        &lt;min&gt;0&lt;/min&gt;
        &lt;warn&gt;7&lt;/warn&gt;
      &lt;/password_settings&gt;
      &lt;shell&gt;/bin/bash&lt;/shell&gt;
      &lt;uid&gt;1001&lt;/uid&gt;
      &lt;user_password&gt;linux&lt;/user_password&gt;
      &lt;username&gt;foo&lt;/username&gt;
    &lt;/user&gt;
  &lt;/users&gt;
&lt;/profile&gt;</screen>
   <para>
    Store this file as <filename>/tmp/install_foo.xml</filename> and start the
    &ay; installation process by calling:
   </para>
   <screen>yast2 ayast_setup setup filename=/tmp/install_foo.xml dopackages="yes"</screen>

   <para>
    For more information, run <command>yast2 ayast_setup longhelp</command>
   </para>
 </chapter>
 <appendix xml:id="handlingrules">
  <title>Handling Rules</title>
  <info/>
  <para>
   The following figure illustrates how rules are handled and the processes
   of retrieval and merge.
  </para>
  <figure xml:id="rulesflow">
   <title>Rules Retrieval Process</title>
   <mediaobject>
    <imageobject role="html">
     <imagedata fileref="rules_flow.png"/>
    </imageobject>
    <imageobject role="fo">
     <imagedata fileref="rules_flow.png" width="75%"/>
    </imageobject>
   </mediaobject>
  </figure>
 </appendix>
 <appendix xml:id="app.ay.faq">
  <title>&ay; FAQ - Frequently Asked Questions</title>
  <qandaset>
   <qandaentry xml:id="qa.ay.invoke">
    <question>
     <para>
      How do I invoke an &ay; installation?
     </para>
    </question>
    <answer>
     <para>
      On all &productname; versions, the automatic installation gets invoked by
      adding <literal>autoyast=&lt;PATH_TO_PROFILE&gt;</literal> to the kernel
      parameter list. So for example adding
      <literal>autoyast=<replaceable>http://myserver/myconfig.xml</replaceable></literal>
      will start an automatic installation where the profile with the &ay;
      configuration gets fetched from the Web server
      <literal>myserver</literal>.  See <xref linkend="invoking_autoinst"/> for
      more information.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.profile">
    <question>
     <para>
      What is an &ay; profile?
     </para>
    </question>
    <answer>
     <para>
      A profile is the &ay; configuration file. The content of the &ay; profile determines
      how the system will be configured and which packages will get installed.
      This includes partitioning, network setup, and software sources, to name but a
      few. Almost everything that can be configured with &yast; in a running
      system can also be configured in an &ay; profile. The profile format is
      an ASCII XML file.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.create_profile">
    <question>
     <para>
      How do I create an &ay; profile?
     </para>
    </question>
    <answer>
     <para>
      The easiest way to create an &ay; profile is to use an existing
      &productname; system
      as a template. On an already installed system, start <menuchoice>
      <guimenu>&yast;</guimenu> <guimenu>Miscellaneous</guimenu>
      <guimenu>Autoinstallation</guimenu></menuchoice>. Now select <menuchoice>
      <guimenu>Tools</guimenu> <guimenu>Create Reference Profile</guimenu>
      </menuchoice> from the menu. Choose the system components you want
      to include in the profile. Alternatively, create a profile containing
      the complete system configuration by running <command>sudo yast
      clone_system</command> from the command line.
     </para>
     <para>
      Both methods will create the file
      <filename>/root/autoinst.xml</filename>. The version created on the
      command line can be used to set up an identical clone of the system on
      which the profile was created. However, usually you will want to adjust
      the file to make it possible to install several machines that are very
      similar, but not identical. This can be done by adjusting the profile
      using your favorite text/XML editor.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.check_profile">
    <question>
     <para>
      How can I check the syntax of an created &ay; profile?
     </para>
    </question>
    <answer>
     <para>
      The most efficient way to check your created &ay; profile is by
      using <command>jing</command> or <command>xmllint</command>.
     </para>
     <para>
       See
       <xref linkend="CreateProfile.Manual"/> for details.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.small_profile">
    <question>
     <para>
      What is smallest &ay; profile that makes sense?
     </para>
    </question>
    <answer>
     <para>
      If a section has not been defined in the &ay; profile
      the settings of the general &yast; installation proposal will be used.
      However, you need to specify at least the &rootuser; password to be able
      to log in to the machine after the installation.
     </para>
     <screen>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;users config:type="list"&gt;
    &lt;user&gt;
      &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
      &lt;user_password&gt;linux&lt;/user_password&gt;
      &lt;username&gt;root&lt;/username&gt;
    &lt;/user&gt;
  &lt;/users&gt;
&lt;/profile&gt;</screen>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.auto_sound">
    <question>
     <para>
      How do I do an automatic installation with autodetection of my sound card?
     </para>
    </question>
    <answer>
     <para>
      Use the following <literal>sound</literal> section in your profile:
     </para>
     <screen>&lt;sound&gt;
  &lt;autoinstall config:type="boolean"&gt;true&lt;/autoinstall&gt;
  &lt;configure_detected config:type="boolean"&gt;true&lt;/configure_detected&gt;
&lt;/sound&gt;</screen>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.cd">
    <question>
     <para>
      I want to install from DVD only. Where do I put the &ay; profile?
     </para>
    </question>
    <answer>
     <para>
      Put the profile in the root of the DVD. Refer to it with
      <literal>file:///<replaceable>PROFILE</replaceable>.xml</literal>.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.test_merge">
    <question>
     <para>
      How can I test a merging process on the command line?
     </para>
    </question>
    <answer>
     <para>
      If you want to merge two profiles, <filename>a.xml</filename> with
      <filename>base.xml</filename>, run the following command:
     </para>
     <screen>/usr/bin/xsltproc --novalid --param replace "'false'" \
--param dontmerge1 "'package'" --param with "'a.xml'" --output out.xml \
/usr/share/autoinstall/xslt/merge.xslt base.xml</screen>
     <para>
      This requires sections in both profiles to be in alphabetical
      order (&lt;software&gt;, for example, needs to be listed after
      &lt;add-on&gt;). If you have created the profile with &yast;, profiles
      are automatically sorted correctly.
     </para>
     <para>
      The <literal>dontmerge1</literal> parameter is optional and an
      example of for what to do when you use the <literal>dont_merge</literal>
      element in your profile. See <xref linkend="merging"/> for more
      information.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.zypper">
    <question>
     <para>
      May I call Zypper from scripts?
     </para>
    </question>
    <answer>
     <para>
      Zypper can only be called from &ay; init scripts, because during the
      post-script phase, &yast; still has an exclusive lock on the RPM
      database.
     </para>
     <para>
      If you really need to use other script types (for example a post-script)
      you will need to break the lock at your own risk:
     </para>
     <screen>&lt;post-scripts config:type="list"&gt;
  &lt;script&gt;
    &lt;filename&gt;yast_clone.sh&lt;/filename&gt;
    &lt;interpreter&gt;shell&lt;/interpreter&gt;
    &lt;location/&gt;
    &lt;feedback config:type="boolean"&gt;false&lt;/feedback&gt;
    &lt;source&gt;&lt;![CDATA[#!/bin/sh
mv /var/run/zypp.pid /var/run/zypp.sav
zypper in foo
mv /var/run/zypp.sav /var/run/zypp.pid
]]&gt;&lt;/source&gt;
  &lt;/script&gt;
&lt;/post-scripts&gt;</screen>
    </answer>
   </qandaentry>
   <qandaentry>
    <question>
     <para>
      Is the order of sections in an &ay; profile important?
     </para>
    </question>
    <answer>
     <para>
      Actually the order is not important. The order of sections in the profile
      has no influence on the &ay; workflow. However, if you want to
      <emphasis>merge</emphasis> different profiles, sections need to be in
      alphabetical order.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.insecure">
    <question>
     <para>
      linuxrc blocks the installation with <literal>File not
      signed</literal>. I need to manually interact.
     </para>
    </question>
    <answer>
     <para>
      Linuxrc found some unsigned file (like a driver update). If you want to
      use such an unsigned file, you can suppress that message by passing
      <literal>insecure=1</literal> to the linuxrc parameter list (together
      with the <literal>autoyast=...</literal> parameter).
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.net">
    <question>
     <para>
      I want to install from DVD/USB/HD but fetch the XML file from the
      network.
     </para>
    </question>
    <answer>
     <para>
      You need to pass <literal>ifcfg</literal> to linuxrc. This is required
      to set up the network, otherwise &ay; will not be able to download the
      profile from remote. See <xref linkend="ay.adv_network"/> for more
      information.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.nfsroot">
    <question>
     <para>
      Is the installation on an NFS root (<filename>/</filename>) possible?
     </para>
    </question>
    <answer>
     <para>
      Yes, but it is a little bit <quote>tricky</quote>. You will need to set
      up the environment (DHCP, TFTP, etc.) very carefully. The &ay; profile
      needs to look like the following:
     </para>
     <screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;partitioning config:type="list"&gt;
    &lt;drive&gt;
      &lt;device&gt;/dev/nfs&lt;/device&gt;
      &lt;initialize config:type="boolean"&gt;false&lt;/initialize&gt;
      &lt;type config:type="symbol"&gt;CT_NFS&lt;/type&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;nfs&lt;/filesystem&gt;
          &lt;fstopt&gt;nolock&lt;/fstopt&gt;
          &lt;device&gt;10.10.1.53:/tmp/m4&lt;/device&gt;
          &lt;mount&gt;/&lt;/mount&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
      &lt;use&gt;all&lt;/use&gt;
    &lt;/drive&gt;
  &lt;/partitioning&gt;
&lt;/profile&gt;</screen>
    </answer>
   </qandaentry>
   <qandaentry>
    <question>
     <para>
      Where can I ask questions which have not been answered here?
     </para>
    </question>
    <answer>
     <para>
      There is an &ay; mailing list where you can post your questions.
      Join us at <link xlink:href="http://lists.opensuse.org/opensuse-autoinstall/"/>.
     </para>
    </answer>
   </qandaentry>
  </qandaset>
 </appendix>

 <appendix xml:id="appendix.linuxrc">
  <title>Advanced Linuxrc Options</title>
  <info/>
  <para>
   Linuxrc is a program used for setting up the kernel for installation
   purposes. It allows the user to load modules, start an installed system,
   a rescue system or an installation via &yast;.
  </para>
  <para>
   Linuxrc is designed to be as small as possible. Therefore, all needed
   programs are linked directly into one binary. So there is no need for
   shared libraries in the init disk.
  </para>
  <note>
   <title>Running Linuxrc on an Installed System</title>
   <para>
    If you run Linuxrc on an installed system, it will work slightly
    differently so as not to destroy your installation. As a consequence you
    cannot test all features this way.
   </para>
  </note>
  <sect1 xml:id="ay.cmd_parameters">
   <title>Passing parameters to Linuxrc</title>

   <para>
    Unless Linuxrc is in manual mode, it will look for an
    <filename>info</filename> file in these locations: first
    <filename>/info</filename> on the flash disk and if that does not exist,
    for <filename>/info</filename> in the initrd. After that it parses the
    kernel command line for parameters. You may change the
    <filename>info</filename> file Linuxrc reads by setting the
    <filename>info</filename> command line parameter. If you do not want
    Linuxrc to read the kernel command line (for example because you need to
    specify a kernel parameter that Linuxrc recognizes as well), use
    <literal>linuxrc=nocmdline</literal>.
   </para>

   <para>
    Linuxrc will always look for and parse a file
    <filename>/linuxrc.config</filename>. Use this file to change default
    values if you need to. In general, it is better to use the
    <filename>info</filename> file instead. Note that
    <filename>/linuxrc.config</filename> is read before any
    <filename>info</filename> file, even in manual mode.
   </para>
  </sect1>
  <sect1 xml:id="info_file_format">
   <title><filename>info</filename> file format</title>

   <para>
    Lines starting with <literal>#</literal> are comments, valid entries are
    of the form:
   </para>

<screen>key: value</screen>

   <para>
    Note that <literal>value</literal> extends to the end of the line and
    therefore may contain spaces. <literal>key</literal> is matched
    case-insensitive.
   </para>

   <para>
    You can use the same key-value pairs on the kernel command line using
    the syntax <literal>key=value</literal>. Lines that do not have the form
    described above are ignored.
   </para>

   <para>
    The table below lists important keys and example values. For a complete
    list of linuxrc parameters refer to <link
    xlink:href="https://en.opensuse.org/SDB:Linuxrc"/>.
   </para>

   <table>
    <title></title>
    <tgroup cols="2">
     <colspec colnum="1" colname="1" colwidth="50*"/>
     <colspec colnum="2" colname="2" colwidth="50*"/>
     <thead>
      <row>
       <entry><para></para></entry>
       <entry><para></para></entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry><para></para></entry>
       <entry><para></para></entry>
      </row>
     </tbody>
    </tgroup>
   </table>


   <table>
    <title>Advanced linuxrc keywords</title>
    <tgroup cols="2">
     <colspec colnum="1" colname="1" colwidth="30*"/>
     <colspec colnum="2" colname="2" colwidth="70*"/>
     <thead>
      <row>
       <entry>
        <para>
         Keyword: Example Value
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>addswap: 0|3|/dev/sda5</literal>
        </para>
       </entry>
       <entry>
        <para>
         If 0, never ask for swap; if the argument is a positive number
         <literal>n</literal>, activate the <literal>n</literal>'th swap
         partition; if the argument is a partition name, activate this swap
         partition.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>autoyast:
         <replaceable>ftp://autoyastfile</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Location of the auto installation file; activates auto installation
         mode. See <xref linkend="Commandline.ay"/> for details.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>bootptimeout: 10</literal>
        </para>
       </entry>
       <entry>
        <para>
         10 seconds timeout for BOOTP requests.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>bootpwait: 5</literal>
        </para>
       </entry>
       <entry>
        <para>
         Sleep 5 seconds between network activation and starting bootp.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         <literal>dhcptimeout: 60</literal>
        </para>
       </entry>
       <entry>
        <para>
         60 seconds timeout for DHCP requests.
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>display: color|mono|alt</literal>
        </para>
       </entry>
       <entry>
        <para>
         Set the menu color scheme.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         <literal>dhcp: 0|1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Start the DHCP daemon now&gt;, but see <literal>UseDHCP</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>domain: &exampledomain;</literal>
        </para>
       </entry>
       <entry>
        <para>
         Set domain name (used for name server lookups)
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>exec: <replaceable>COMMAND</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Run <emphasis>command</emphasis>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>forceinsmod: 0|1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Use the <option>-f</option> option (force) when running
         <command>insmod</command> commands.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>forcerootimage: 0|1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Load the installation system into RAM disk.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         <literal>gateway: 10.10.0.1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Gateway
        </para>
       </entry>
      </row>
       <row>
       <entry>
        <para>
         <literal>hostip: 10.10.0.2</literal>
        </para>
       </entry>
       <entry>
        <para>
         The client ip address
        </para>
       </entry>
       </row>
      -->
      <row>
       <entry>
        <para>
         <literal>ifcfg:
         <replaceable>NETWORK_CONFIGURATION</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Set up and start the network. See <xref linkend="ay.adv_network"/> for
         more information.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>insmod: <replaceable>MODULE</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Load <replaceable>MODULE</replaceable>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>install: <replaceable>URL</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Install from the repository specified with
         <replaceable>URL</replaceable>. For the syntax of
         <replaceable>URL</replaceable> refer to <link
         xlink:href="https://en.opensuse.org/SDB:Linuxrc#url_descr"/>.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: Either not a linuxrc parameter or deprecated,
           commenting

      <row>
       <entry>
        <para>
         <literal>installdir: /suse/inst-sys</literal>
        </para>
       </entry>
       <entry>
        <para>
         Path to the installation system
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         InstMode: cd|hd|nfs|smb|ftp|http|tftp
        </para>
       </entry>
       <entry>
        <para>
         Set installation mode
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>keytable: de-lat1-nd</literal>
        </para>
       </entry>
       <entry>
        <para>
         Virtual console keyboard map to load.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>language: de_DE</literal>
        </para>
       </entry>
       <entry>
        <para>
         Language preselected for the installation.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>loghost: 10.10.0.22</literal>
        </para>
       </entry>
       <entry>
        <para>
         Enable remote logging via syslog.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>memloadimage: 50000</literal>
        </para>
       </entry>
       <entry>
        <para>
         Load installation system into RAM disk if free memory is above
         50000 KB.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>memlimit: 10000</literal>
        </para>
       </entry>
       <entry>
        <para>
         Ask for swap if free memory drops below 10000 KB.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>mem&yast;: 20000</literal>
        </para>
       </entry>
       <entry>
        <para>
         Run &yast; in text mode if free memory is below 20000 KB.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>mem&yast;Text: 10000</literal>
        </para>
       </entry>
       <entry>
        <para>
         Ask for swap before starting &yast; if free memory is below
         10000 KB.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         <literal>nameserver: 10.10.0.1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Name Server
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>netdevice: eth0</literal>
        </para>
       </entry>
       <entry>
        <para>
         Network interface to use
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>netmask: 255.255.0.0</literal>
        </para>
       </entry>
       <entry>
        <para>
         Network mask
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>proxy: 10.10.0.1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Proxy (either FTP or HTTP).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>rescue: 1|nfs://server/dir</literal>
        </para>
       </entry>
       <entry>
        <para>
         Load the rescue system; the URL variant specifies the location of the
         rescue image explicitly.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>rescueimage: /suse/images/rescue</literal>
        </para>
       </entry>
       <entry>
        <para>
         Location of the rescue system image.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>rootimage: /suse/images/root</literal>
        </para>
       </entry>
       <entry>
        <para>
         Location of the installation system image.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>textmode: 1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Start &yast; in text mode.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>usbwait: 4</literal>
        </para>
       </entry>
       <entry>
        <para>
         Wait 4 seconds after loading the USB modules.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         vlan: <replaceable>VLANID</replaceable>
        </para>
       </entry>
       <entry>
        <para>
         Set a <replaceable>VLANID</replaceable> to enable 802.1q tagged
         VLAN support
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>y2confirm</literal>
        </para>
       </entry>
       <entry>
        <para>
         Overrides the confirm parameter in a control file and requests
         confirmation of installation proposal.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
  </sect1>
  <sect1 xml:id="ay.adv_network">
   <title>Advanced Network Setup</title>

   <para>
    Even if parameters like <literal>hostip</literal>,
    <literal>nameserver</literal>, and <literal>gateway</literal> are passed to
    linuxrc, the network is only started when it is needed (for example, when
    installing via SSH or VNC). Since <literal>autoyast</literal> is not a linuxrc
    parameter (this parameter is ignored by linuxrc and only passed to &yast;),
    the network will <emphasis>not</emphasis> be started automatically when
    specifying a remote location for the &ay; profile.
   </para>
   <para>
    Therefore the network needs to be started explicitly. This used to be done
    with the linuxrc parameter <literal>netsetup</literal>. Starting with
    &productname; <phrase os="osuse">13.2</phrase><phrase
    os="sles;sled">12</phrase>, the parameter <literal>ifcfg</literal> is
    available. It offers more configuration options, for example configuring
    more than one interface. <literal>ifcfg</literal> directly controls the
    content of the <filename>/etc/sysconfig/network/ifcfg-*</filename> files.
   </para>
   <variablelist>
    <varlistentry>
     <term>DHCP Network Configuration</term>
     <listitem>
      <para>
       The general syntax to configure DHCP is
      </para>
      <screen> ifcfg=<replaceable>INTERFACE</replaceable>=<replaceable>DHCP*</replaceable>,<replaceable>OPTION1</replaceable>=<replaceable>value1</replaceable>,<replaceable>OPTION2</replaceable>=<replaceable>value</replaceable></screen>
      <para>
       where <replaceable>INTERFACE</replaceable> is the interface name, for
       example <literal>eth0</literal>, or <literal>eth*</literal> for all
       interfaces. <replaceable>dhcp*</replaceable> can either be
       <literal>dhcp</literal> (IPv4 and IPv6), <literal>dhcp4</literal>, or
       <literal>dhcp6</literal>.
      </para>
      <para>
       To set up DHCP for <literal>eth0</literal> use:
      </para>
      <screen>ifcfg=eth0=dhcp</screen>
      <para>
       To set up DHCP on all interfaces use:
      </para>
      <screen>ifcfg=eth*=dhcp</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Static Network Configuration</term>
     <listitem>
      <para>
       The general syntax to configure a static network is
      </para> <screen>ifcfg=<replaceable>INTERFACE</replaceable>=<replaceable>IP_LIST</replaceable>,<replaceable>GATEWAY_LIST</replaceable>,<replaceable>NAMESERVER_LIST</replaceable>,<replaceable>DOMAINSEARCH_LIST</replaceable>,\
<replaceable>OPTION1=value1</replaceable>,...</screen>
      <para>
       where <replaceable>INTERFACE</replaceable> is the interface name, for
       example <literal>eth0</literal>. If using <literal>eth*</literal>, the
       first device available will be used. The other parameters need to be
       replaced with the respective values in the given order. Example:
      </para>
      <screen>ifcfg=eth0=&wsIip;/24,&gateip;,&dnsip;,&exampledomain;</screen>
      <para>
       When specifying multiple addresses for a parameter, use spaces to separate
       them and quote the complete string. The following example uses two
       name servers and a search list containing two domains.
      </para>
      <screen>ifcfg="eth0=&wsIip;/24,&gateip;,&dnsip; &dnsip117;,&exampledomain; &exampledomain1;"</screen>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    For more information refer to <link
    xlink:href="https://en.opensuse.org/SDB:Linuxrc#Network_Configuration"/>.
   </para>
  </sect1>
 </appendix>
 <xi:include os="sles;sled" href="ay_docupdates.xml"/>
 <xi:include href="common_legal.xml"/>
</book>
