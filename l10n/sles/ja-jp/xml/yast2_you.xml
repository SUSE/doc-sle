<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_you.xml" version="5.0" xml:id="cha-onlineupdate-you">
 <title>YaSTオンラインアップデート</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  SUSEはお買い上げの製品に対し、継続的にソフトウェアセキュリティのアップデートを提供します。デフォルトでは、システムを最新の状態に維持するために更新アプレットが使用されます。アップデートアプレットの詳細については、<xref linkend="sec-updater"/>を参照してください。この章では、ソフトウェアパッケージをアップデートする代替ツールとして、YaSTオンラインアップデートを紹介します。
 </para>
 <para>
  <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>の現在のパッチは、アップデートソフトウェアリポジトリから入手できます。インストール時に製品を登録した場合、アップデートリポジトリはすでに設定されています。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>を登録していない場合は、YaSTで<guimenu>製品登録</guimenu>を起動して登録できます。または、信頼できるソースから、手動でアップデートリポジトリを追加することもできます。リポジトリを追加または削除するには、YaSTで、<menuchoice> <guimenu>ソフトウェア</guimenu>
  <guimenu>ソフトウェアリポジトリ</guimenu> </menuchoice>の順に選択して、リポジトリマネージャを起動します。リポジトリマネージャの詳細については、<xref linkend="sec-y2-sw-instsource"/>を参照してください。
 </para>
 <note os="sles;sled">
  <title>アップデートカタログのアクセス時のエラー</title>
  <para>
   
   アップデートカタログにアクセスできない場合、登録の期限が切れている場合があります。通常、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>には1年または3年の登録期間があり、この期間内はアップデートカタログにアクセスできます。このアクセスは登録期間が切れると拒否されます。
  </para>
  <para>
   アップデートカタログへのアクセスが拒否される場合は、SUSEカスタマセンターにアクセスして登録を確認することを推奨する警告メッセージが表示されます。SUSEカスタマーセンターには、<link xlink:href="https://scc.suse.com//"/>でアクセスできます。
  </para>
 </note>
 <para>
  SUSEは、各種の関連性レベルを持つアップデートを提供します。
 </para>
 <variablelist>
  <varlistentry>
   <term>セキュリティアップデート</term>
   <listitem>
    <para>
     セキュリティアップデートは、重大なセキュリティハザードを修復するので、必ずインストールする必要があります。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>推奨アップデート</term>
   <listitem>
    <para>
     コンピュータに損害を与える可能性のある問題を修復します。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>オプションアップデート</term>
   <listitem>
    <para>
     セキュリティに関連しない問題を修復したり、拡張機能を提供します。
    </para>
   </listitem>
  </varlistentry>
 </variablelist>
 <sect1 xml:id="sec-onlineupdate-you-overview">
  <title>オンライン更新ダイアログ</title>

  <para>
   <guimenu>オンライン更新</guimenu>ダイアログを開くには、YaSTを起動し、<menuchoice> <guimenu>ソフトウェア</guimenu> <guimenu>オンライン更新</guimenu> </menuchoice>の順に選択します。または、<command>yast2 online_update</command>で、コマンドラインからオンラインアップデートを開始します。
  </para>

  <para>
   <guimenu>オンラインアップデート</guimenu>ウィンドウは、4つのセクションから成り立っています。
  </para>

  <figure>
   <title>YaSTオンラインアップデート</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_you.png" width="75%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_you.png" width="75%"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   左側の<guimenu>概要</guimenu>セクションには、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>の使用可能なパッチが一覧にされます。パッチはセキュリティの関連性によってソートされます(<literal>security</literal>、<literal>recommended</literal>、および<literal>optional</literal>)。<guimenu>概要</guimenu>セクションのビューは、<guimenu>パッチのカテゴリを表示</guimenu>から、以下のオプションの1つを選択することによって変更できます。
  </para>

  <variablelist>
   <varlistentry>
    <term><guimenu>Needed Patches</guimenu>(デフォルトビュー)</term>
    <listitem>
     <para>
      システムにインストールされたパッケージに適用される、インストールされなかったパッチ。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>Unneeded Patches</guimenu>
    </term>
    <listitem>
     <para>
      システムにインストールされていないパッケージに適用されるパッチか、または(該当するセキュリティがすでに別のソースで更新されたので)要件がすでに満たされているパッチ。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>すべてのパッチ</guimenu>
    </term>
    <listitem>
     <para>
      <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>で使用可能なすべてのパッチ。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   <guimenu>概要</guimenu>セクションの各リストエントリは、記号とパッチ名で構成されています。可能な記号とそれらの意味の概要については、<keycombo> <keycap function="shift"/> <keycap>F1</keycap>
   </keycombo>を押してください。<literal>Security</literal>パッチおよび<literal>Recommended</literal>パッチで要求されるアクションは、自動的に設定されます。アクションは、<guimenu>自動インストール</guimenu>、<guimenu>自動更新</guimenu>、および<guimenu>自動削除</guimenu>です。
  </para>

  <para>
   アップデートリポジトリ以外のリポジトリから最新のパッケージをインストールする場合、そのパッケージのパッチ要件はそのインストールで満たされる場合があります。この場合、パッチ概要の前にチェックマークが表示されます。パッチは、インストール用にマークするまでリストに表示されます。これによってパッチは実際にはインストールされませんが(パッチはすでに最新であるため)、インストール済みとしてパッチをマークします。
  </para>

  <para>
   <guimenu>概要</guimenu>セクションでエントリを選択すると、ダイアログの左下隅に短い<guimenu>パッチの説明</guimenu>が表示されます。左上のセクションには、選択されたパッチに含まれているパッケージが一覧されます(パッチは複数のパッケージから成ることがあります)。右上のセクションでエントリをクリックすると、パッチに含まれている各パッケージの詳細が表示されます。
  </para>
 </sect1>
 <sect1 xml:id="sec-onlineupdate-you-install">
  <title>パッチのインストール</title>

  <para>
   YaSTオンラインアップデートのダイアログでは、すべての利用可能なパッチを一度にインストールしたり、システムに適用したいパッチを手動で選択したりできます。システムに適用済みのパッチを元に戻すこともできます。
  </para>

  <para>
   デフォルトでは、お使いのシステムで現在使用できる新しいパッチ(ただし、<literal>optional</literal>以外) はすべて、すでにインストール用にマークされています。<guimenu>受諾</guimenu>または<guimenu>適用</guimenu>をクリックすると、これらのパッチが自動的に適用されます。1つまたは複数のパッチでシステムの再起動が必要な場合、パッチのインストールが開始される前にその旨が通知されます。選択したパッチのインストールを続行し、再起動が必要なすべてのパッチのインストールをスキップしてして残りをインストールするか、パッチの手動選択に戻ることを決定できます。
  </para>

  <procedure>
   <title>YaSTオンラインアップデートによるパッチの適用</title>
   <step>
    <para>
     YaSTを起動して、<menuchoice> <guimenu>ソフトウェア</guimenu>
     <guimenu>オンライン更新</guimenu> </menuchoice>の順に選択します。
    </para>
   </step>
   <step>
    <para>
     システムで現在使用可能なすべての新しいパッチ(ただし、<literal>optional</literal>以外)を自動的に適用するには、<guimenu>適用</guimenu>または<guimenu>受諾</guimenu>を押します。
    </para>
   </step>
   <step>
    <para>
     まず、適用したいパッチの選択を変更します。
    </para>
    <substeps performance="required">
     <step>
      <para>
       インタフェースが提供する各フィルタとビューを使用します。詳細については、<xref linkend="sec-onlineupdate-you-overview"/>を参照してください。
      </para>
     </step>
     <step>
      <para>
       ニーズと好みに従ってパッチを選択または選択解除するには、パッチを右クリックしてコンテキストメニューから各アクションを選択します。
      </para>
      <important>
       <title>セキュリティアップデートは必ず適用する</title>
       <para>
        十分な理由がない限り、<literal>security</literal>関係のパッチは選択解除しないでください。これらのパッチは、重大なセキュリティハザードを修復し、システムの悪用を防ぎます。
       </para>
      </important>
     </step>
     <step>
      <para>
       大部分のパッチには、複数のパッケージのアップデートが含まれています。単一パッケージに対するアクションを変更する場合は、パッケージビューでパッケージを右クリックしてアクションを選択します。
      </para>
     </step>
     <step>
      <para>
       選択内容を確認し、選択したパッチを適用するには、<guimenu>適用</guimenu>または<guimenu>受諾</guimenu>をクリックして続行します。
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     インストールの完了後、<guimenu>完了</guimenu>をクリックして、YaSTの<guimenu>オンライン更新</guimenu>を終了します。これで、システムが最新の状態になりました。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-onlineupdate-you-automatically">
  <title>自動オンラインアップデート</title>

  <para>
   YaSTでは、毎日、毎週、または毎月のスケジュールで自動アップデートを設定することもできます。各モジュールを使用するには、まず、<systemitem class="resource">yast2-online-update-configuration</systemitem>パッケージをインストールする必要があります。
  </para>

  <para>
   デフォルトでは、アップデートは、デルタRPMとしてダウンロードされます。デルタRPMからのRPMパッケージの再構築は、メモリとプロセッサを集中的に使用するので、セットアップまたはハードウェア構成によっては、パフォーマンス上の理由によりデルタRPMの使用を無効にする必要があります。
  </para>

  <para>
   一部のパッチ(カーネルのアップデートやライセンス契約を必要とするパッケージなど)ではユーザによる操作が必要で、これによって自動アップデート手順が停止します。ユーザによる操作が必要なパッチをスキップするよう設定できます。
  </para>

  <procedure>
   <title>自動オンラインアップデートの設定</title>
   <step>
    <para>
     インストール後、YaSTを起動し、<menuchoice>
     <guimenu>ソフトウェア</guimenu> <guimenu>オンラインアップデートの設定</guimenu>
     </menuchoice>の順に選択します。
    </para>
    <para>
     または、コマンドラインから、<command>yast2 online_update_configuration</command>を使用してモジュールを起動します。
    </para>
   </step>
   <step>
    <para>
     <guimenu>自動オンラインアップデート</guimenu>を有効にします。
    </para>
   </step>
   <step>
    <para>
     更新間隔として<guimenu>毎日</guimenu>、<guimenu>毎週</guimenu>、または<guimenu>毎月</guimenu>を選択します。
    </para>
   </step>
   <step>
    <para>
     ライセンス契約に自動的に同意するには、<guimenu>ライセンスに同意する</guimenu>を有効にします。
    </para>
   </step>
   <step>
    <para>
     更新手順を完全に自動的に進行させたい場合は、<guimenu>インタラクティブパッチをスキップする</guimenu>を選択します。
    </para>
    <important>
     <title>パッチのスキップ</title>
     <para>
      介入を必要とするパッケージのスキップを選択した場合は、時折、<guimenu>オンライン更新</guimenu>を手動で実行して、それらのパッチもインストールしてください。さもないと、重要なパッチをインストールできないことがあります。
     </para>
    </important>
   </step>
   <step>
    <para>
     アップデートパッケージによって推奨されるすべてのパッケージを自動的にインストールするには、<guimenu>推奨パッケージを含む</guimenu>を有効にします。
    </para>
   </step>

   <step>
    <para>
     デルタRPMの使用を無効にするには(パフォーマンス上の理由)、<guimenu>delta rpmを使用する</guimenu>を無効にします。
    </para>
   </step>
   <step>
    <para>
     セキュリティや推奨など、カテゴリ別にパッチをフィルタリングするには、<guimenu>Filter by Category</guimenu>を有効にしてリストから適切なカテゴリを追加します。選択したカテゴリのパッチのみがインストールされます。それ以外はスキップされます。
    </para>
   </step>
   <step>
    <para>
     入力した設定を確認して、<guimenu>OK </guimenu>をクリックします。
    </para>
   </step>
  </procedure>

  <para>
   自動オンラインアップデートでは、システムは後で自動的には再起動されません。システムの再起動が必要なシステムの更新がある場合は、手動で再起動する必要があります。
  </para>
 </sect1>
</chapter>
