<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="libvirt_overview.xml" version="5.0" xml:id="cha-libvirt-overview">
 <title>启动和停止 <systemitem class="daemon">libvirtd</systemitem></title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker>
   </dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  虚拟化解决方案（KVM、Xen）与 libvirt API 之间的通讯由 <systemitem class="daemon">libvirtd</systemitem> 守护程序来管理。此守护程序需在 VM 主机服务器上运行。可能在远程计算机上运行的 libvirt 客户端应用程序（例如 virt-manager）会与 VM 主机服务器上运行的 <systemitem class="daemon">libvirtd</systemitem> 通讯。libvirtd 使用本机超级管理程序 API 来处理请求。使用以下命令可以启动和停止 <systemitem class="daemon">libvirtd</systemitem> 或检查其状态：
 </para>
 <screen><prompt>&gt; </prompt><command>sudo</command> systemctl start libvirtd

<prompt>&gt; </prompt><command>sudo</command> systemctl status libvirtd
libvirtd.service - Virtualization daemon
Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled)
Active: active (running) since Mon 2014-05-12 08:49:40 EDT; 2s ago
[...]

<prompt>&gt; </prompt><command>sudo</command> systemctl stop libvirtd

<prompt>&gt; </prompt><command>sudo</command> systemctl status libvirtd
[...]
Active: inactive (dead) since Mon 2014-05-12 08:51:11 EDT; 4s ago
[...]</screen>
 <para>
  要在系统引导时自动启动 <systemitem class="daemon">libvirtd</systemitem>，请使用 YaST <guimenu>服务管理器</guimenu>模块或输入以下命令将其激活：
 </para>
 <screen><prompt>&gt; </prompt><command>sudo</command> systemctl enable libvirtd</screen>

 <important>
  <title>有冲突的服务：<systemitem class="daemon">libvirtd</systemitem> 和 <systemitem class="daemon">xendomains</systemitem></title>
  <para>
   如果 <systemitem class="daemon">libvirtd</systemitem> 无法启动，请检查是否装载了 <systemitem class="daemon">xendomains</systemitem> 服务：
  </para>
  <screen><prompt>&gt; </prompt>systemctl is-active xendomains
active</screen>
  <para>
   如果该命令返回 <literal>active</literal>，您需要停止 <systemitem class="daemon">xendomains</systemitem>，然后才可以启动 <systemitem class="daemon">libvirtd</systemitem> 守护程序。如果您希望在重引导后也要启动 <systemitem class="daemon">libvirtd</systemitem>，另外还需禁止 <systemitem class="daemon">xendomains</systemitem> 自动启动。禁用该服务：
  </para>
  <screen><prompt>&gt; </prompt><command>sudo</command> systemctl stop xendomains
<prompt>&gt; </prompt><command>sudo</command> systemctl disable xendomains
<prompt>&gt; </prompt><command>sudo</command> systemctl start libvirtd</screen>
  <para>
   <systemitem class="daemon">xendomains</systemitem> 和 <systemitem class="daemon">libvirtd</systemitem> 提供的是相同的服务，如果同时使用，可能会互相干扰。例如，<systemitem class="daemon">xendomains</systemitem> 可能会尝试启动已由 <systemitem class="daemon">libvirtd</systemitem> 启动的 domU。
  </para>
 </important>



</chapter>
