<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="tuning_logfiles.xml" version="5.0" xml:id="cha-tuning-syslog">
 <title>系统日志文件</title>
 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker>
        </dm:bugtracker>
	<dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <para>
  系统日志文件分析是分析系统时最重要的任务之一。事实上，在对系统进行维护或查错时，第一件事就是要查看系统日志文件。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 会自动详细记录系统上发生的几乎一切事件。自从过渡到 <systemitem class="daemon">systemd</systemitem> 之后，内核消息以及已在 <systemitem class="daemon">systemd</systemitem> 中注册的系统服务的消息都将记录在 <systemitem class="daemon">systemd</systemitem> 日志中（请参见<xref linkend="cha-journalctl"/>）。其他日志文件（主要是系统应用程序的日志文件）将以纯文本格式写入，并可使用编辑器或分页器轻松阅读。还可以使用脚本来分析这些文件。这可让您过滤其内容。
 </para>
 <sect1 xml:id="sec-tuning-syslog-logs">
  <title><filename>/var/log/</filename> 中的系统日志文件</title>

  <para>
   系统日志文件始终位于 <filename>/var/log</filename> 目录下。以下列表提供了在完成默认安装后 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 中所有系统日志文件的概述。根据您的安装范围，<filename>/var/log</filename> 还会包含此处未列出的其他服务和应用程序中的日志文件。下面所述的某些文件和目录以<quote>占位符</quote>表示，仅当安装相应的应用程序时才会使用它们。大多数日志文件仅对 <systemitem class="username">root</systemitem> 用户可见。
  </para>

  <variablelist>

   <varlistentry>
    <term><filename>apparmor/</filename>
    </term>
    <listitem>
     <para>
      <phrase>AppArmor</phrase> 日志文件。有关 <phrase>AppArmor</phrase> 的详细信息，请参见<xref linkend="part-apparmor"/>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>audit/</filename>
    </term>
    <listitem>
     <para>
      来自审计框架的日志。有关详细信息，请参见<xref linkend="part-audit"/>。
     </para>
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><filename>ConsoleKit/</filename>
    </term>
    <listitem>
     <para>
      <systemitem class="daemon">ConsoleKit</systemitem> 守护程序（用于跟踪哪些用户已登录，以及他们如何与计算机交互的守护程序）的日志。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>cups/</filename>
    </term>
    <listitem>
     <para>
      通用 Unix 打印系统 (<systemitem class="daemon">cups</systemitem>) 的访问和错误日志。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>firewall</filename>
    </term>
    <listitem>
     <para>
      防火墙日志。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>gdm/</filename>
    </term>
    <listitem>
     <para>
      来自 GNOME 显示管理器的日志文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>krb5/</filename>
    </term>
    <listitem>
     <para>
      来自 Kerberos 网络身份验证系统的日志文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>lastlog</filename>
    </term>
    <listitem>
     <para>
      包含每个用户上次登录相关信息的数据库。可使用命令 <command>lastlog</command> 进行查看。有关更多信息，请参见<command>man 8
      lastlog</command>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>localmessages</filename>
    </term>
    <listitem>
     <para>
      某些引导脚本的日志消息，例如，DHCP 客户端的日志。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>mail*</filename>
    </term>
    <listitem>
     <para>
      邮件服务器（<systemitem class="service">sendmail</systemitem>、<systemitem class="service">postfix</systemitem>）日志。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>messages</filename>
    </term>
    <listitem>
     <para>
      这是所有内核和系统日志消息的默认保存位置，出现问题时应首先查看该位置（以及 <filename>/var/log/warn</filename>）。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>NetworkManager</filename>
    </term>
    <listitem>
     <para>
      NetworkManager 日志文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>news/</filename>
    </term>
    <listitem>
     <para>
      来自新闻服务器的日志消息。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>chrony/</filename>
    </term>
    <listitem>
     <para>
      来自网络时间协议守护程序 (<systemitem class="resource">chrony</systemitem>) 的日志。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>pk_backend_zypp*</filename>
    </term>
    <listitem>
     <para>
      PackageKit（使用 <systemitem class="library">libzypp</systemitem> 后端）日志文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>samba/</filename>
    </term>
    <listitem>
     <para>
      来自 Samba、Windows SMB/CIFS 文件服务器的日志文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>warn</filename>
    </term>
    <listitem>
     <para>
      所有系统警告和错误的日志。出现问题时，应首先查看此位置（以及 <systemitem class="daemon">systemd</systemitem> 日志的输出）。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>wtmp</filename>
    </term>
    <listitem>
     <para>
      所有登录/注销活动
      <remark>sknorr, 2014-08-21: why was "runlevel changes" commented out here?
Is this a systemd-related change? Should this then be removed entirely?</remark>
      和远程连接的数据库。可使用命令 <command>last</command> 进行查看。有关更多信息，请参见<command>man 1 last</command>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>Xorg.0.log</filename>
    </term>
    <listitem>
     <para>
      X.Org 启动日志文件。如果在启动 X.Org 时出现问题，请参考此文件。来自先前 X.Org 启动的日志文件副本的文件编号为 Xorg.<replaceable>?</replaceable>.log。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>YaST2/</filename>
    </term>
    <listitem>
     <para>
      所有 YaST 日志文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>zypp/</filename>
    </term>
    <listitem>
     <para>
      <systemitem class="library">libzypp</systemitem> 日志文件。可参考这些文件获取软件包安装历史。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>zypper.log</filename>
    </term>
    <listitem>
     <para>
      来自命令行安装程序 <command>zypper</command> 的日志。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="sec-tuning-syslog-view">
  <title>查看和分析日志文件</title>

  <para>
   要查看日志文件，可以使用任何文本编辑器。此外，还可以使用一个简单的 YaST 模块来查看 YaST 控制中心的<menuchoice> <guimenu>杂项</guimenu>
   <guimenu>系统日志</guimenu> </menuchoice>下提供的系统日志。
  </para>

  <para>
   要在文本控制台中查看日志文件，请使用命令 <command>less</command> 或 <command>more</command>。使用 <command>head</command> 和 <command>tail</command> 可查看日志文件的开头和结尾。要实时查看日志文件的追加项，请使用 <command>tail</command> <option>-f</option>。有关如何使用这些工具的信息，请查看它们的手册页。
  </para>

  <para>
   要在日志文件中搜索字符串或正则表达式，请使用 <command>grep</command>。<command>awk</command> 可用于分析和重新写入日志文件。
  </para>
 </sect1>
 <sect1 xml:id="sec-tuning-syslog-logrotate">
  <title>使用 <command>logrotate</command> 管理日志文件</title>

  <para>
   <filename>/var/log</filename> 下的日志文件每天增长，很快就会变得非常庞大。<command>logrotate</command> 工具可帮助您管理日志文件及其增长。使用此工具可以自动轮换、去除、压缩和通过邮件发送日志文件。可以定期（每日、每周或每月）或者在超过特定大小时处理日志文件。
  </para>

  <para>
   通常由 <systemitem class="daemon">systemd</systemitem> 每日运行 <command>logrotate</command>，因此只会每日修改一次日志文件。但存在一些例外情况：因超过大小限制而修改日志文件时、如果一天内多次运行 <command>logrotate</command>，或者如果启用 <option>--force</option>。使用 <filename>/var/lib/misc/logrotate.status</filename> 可确定上次轮换特定文件的时间。
  </para>

  <para>
   <command>logrotate</command> 的主配置文件为 <filename>/etc/logrotate.conf</filename>。生成日志文件的系统软件包和程序（例如 <systemitem class="resource">apache2</systemitem>）将其自身的配置文件放在 <filename>/etc/logrotate.d/</filename> 目录中。<filename>/etc/logrotate.d/</filename> 的内容是通过 <filename>/etc/logrotate.conf</filename> 包含的。
  </para>

  <example xml:id="ex-tuning-syslog-logrotate-config">
   <title><filename>/etc/logrotate.conf</filename> 的示例</title>
   <para>
    <remark>
     taroth 2017-12-14: for the sake of using the prompt entities
     (<prompt>&gt; </prompt> or <prompt role="root"># </prompt>) consistently in our docs:
     please do not mix several example commands within one screen
     and do not use '#' to refer to an example command - this makes
     it impossible to mark the individual commands with a proper
     prompt
    </remark>
   </para>
<screen># see "man logrotate" for details
# rotate log files weekly
weekly

# keep 4 weeks worth of backlogs
rotate 4

# create new (empty) log files after rotating old ones
create

# use date as a suffix of the rotated file
dateext

# uncomment this if you want your log files compressed
#compress

# comment these to switch compression to use gzip or another
# compression scheme
compresscmd /usr/bin/bzip2
uncompresscmd /usr/bin/bunzip2

# RPM packages drop log rotation information into this directory
include /etc/logrotate.d</screen>
  </example>

  <important>
   <title>避免权限冲突</title>
   <para>
    <systemitem>create</systemitem> 选项会关注 <filename>/etc/permissions*</filename> 中所指定文件的模式和所有权。如果您修改这些设置，请确保不会引发冲突。
   </para>
  </important>



 </sect1>
 <sect1 xml:id="sec-tuning-syslog-logwatch">
  <title>使用 <command>logwatch</command> 监视日志文件</title>

  <para>
   <command>logwatch</command> 是一个可自定义且可插入的日志监视脚本。它可以分析系统日志、提取重要信息，并以直观易懂的方式显示这些信息。要使用 <command>logwatch</command>，请安装 <systemitem>logwatch</systemitem> 软件包。
  </para>

  <para>
   可在命令行上使用 <command>logwatch</command> 来生成动态报告，或通过 <systemitem class="daemon">cron</systemitem> 来定期创建自定义报告。报告可在屏幕上列显、保存到文件，或通过邮件发送到指定的地址。通过 <systemitem class="daemon">cron</systemitem> 自动生成报告时，后一种做法特别有用。
  </para>

  <para>
   在命令行上，可以告知 <command>logwatch</command> 要针对哪个服务和时间范围生成报告，以及包含信息的详细程度：
  </para>
  
<screen><?dbsuse-fo font-size="7pt"?>
# Detailed report on all kernel messages from yesterday
logwatch --service kernel --detail High --range Yesterday --print

# Low detail report on all sshd events recorded (incl. archived logs)
logwatch --service sshd --detail Low --range All --archives --print

# Mail a report on all smartd messages from May 5th to May 7th to root@localhost
logwatch --service smartd --range 'between 5/5/2005 and 5/7/2005' \
--mailto root@localhost --print
</screen>

  <para>
   <option>--range</option> 选项的语法比较复杂 — 有关细节，请参见 <command>logwatch</command> <option>--range help</option>。使用以下命令获取可查询的所有服务的列表：
  </para>

<screen><prompt>&gt; </prompt>ls /usr/share/logwatch/default.conf/services/ | sed 's/\.conf//g'</screen>

  <para>
   <command>logwatch</command> 的可自定义程度很高。但通常默认配置便足以满足需求。默认配置文件位于 <filename>/usr/share/logwatch/default.conf/</filename> 下。切勿更改这些文件，因为下一次更新时会再次重写它们。应将自定义配置放入 <filename>/etc/logwatch/conf/</filename>（但您可以使用默认配置文件作为模板）。有关如何自定义 <command>logwatch</command> 的详细操作指南，请参见 <filename>/usr/share/doc/packages/logwatch/HOWTO-Customize-LogWatch</filename>。存在以下配置文件：
  </para>

  <variablelist>
   <varlistentry>
    <term><filename>logwatch.conf</filename>
    </term>
    <listitem>
     <para>
      主要配置文件。默认版本带有大量注释。可在命令行重写每个配置选项。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>ignore.conf</filename>
    </term>
    <listitem>
     <para>
      过滤掉 <command>logwatch</command> 应全局忽略的所有行。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>services/*.conf</filename>
    </term>
    <listitem>
     <para>
      该服务目录包含了可为其生成报告的每个服务的配置文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>logfiles/*.conf</filename>
    </term>
    <listitem>
     <para>
      有关应分析每个服务的哪些日志文件的规范。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="sec-tuning-syslog-forward">
  <title>为 <systemitem class="username">root</systemitem> 配置邮件转发</title>
  <para>
   系统守护程序、<systemitem class="daemon">cron</systemitem> 作业、<systemitem class="daemon">systemd</systemitem> 计时器和其他应用程序可以生成邮件并将其发送给系统的 <systemitem class="username">root</systemitem> 用户。默认情况下，每个用户帐户拥有一个本地邮箱，在登录后会收到有关新邮件的通知。
  </para>
  <para>
   这些邮件可能包含需要系统管理员快速做出响应的安全相关报告和事件。要及时收到有关这些邮件的通知，强烈建议将这些邮件转发到定期检查的专用远程电子邮件帐户。
  </para>
  <procedure xml:id="pro-tuning-syslog-forward">
   <title>为 <systemitem class="username">root</systemitem> 用户配置邮件转发</title>
   <para>
    要为 <systemitem class="username">root</systemitem> 用户转发邮件，请执行以下步骤：
   </para>
   <step>
    <para>
     安装 <package>yast2-mail</package> 软件包：
    </para>
    <screen><prompt role="root"># </prompt><command>zypper in yast2-mail</command></screen>
   </step>
   <step>
    <para>
     运行交互式 YaST 邮件配置：
    </para>
    <screen><prompt role="root"># </prompt><command>yast mail</command></screen>
   </step>
   <step>
    <para>
     选择<guimenu>永久</guimenu>作为<guimenu>连接类型</guimenu>，然后单击<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step>
    <para>
     输入<guimenu>外发邮件服务器</guimenu>的地址。根据需要配置<guimenu>身份验证</guimenu>。强烈建议<guimenu>强制实施 TLS 加密</guimenu>，以防通过网络发送未经加密的敏感系统数据。单击<guimenu>下一步</guimenu>继续。
    </para>
   </step>
   <step>
    <para>
     输入要<guimenu>将 root 用户的邮件转发到</guimenu>的电子邮件地址，然后<guimenu>完成</guimenu>配置。
    </para>
    <important>
     <title>不要接受远程 SMTP 连接</title>
     <para>
      <emphasis>不要</emphasis>启用<guimenu>接受远程 SMTP 连接</guimenu>，否则本地计算机将充当邮件中继。
     </para>
    </important>
   </step>
   <step>
    <para>
     发送一封邮件以测试邮件是否正常转发：
    </para>
<screen><prompt>&gt; </prompt><command>mail root</command>
subject: test
test
.</screen>
   </step>
   <step>
    <para>
     使用 <command>mailq</command> 命令校验是否已发送测试邮件。如果成功，则队列应该为空。该邮件应该已由事先配置的专用邮件地址接收。
    </para>
   </step>
  </procedure>
  <para>
   根据受管的计算机数和需要收到系统事件通知的人数，可以建立不同的电子邮件地址模型：
  </para>
  <itemizedlist>
   <listitem>
    <para>
     在只能由一个人访问的电子邮件帐户中收集来自不同系统的邮件。
    </para>
   </listitem>
   <listitem>
    <para>
     在可由所有相关人员访问的组电子邮件帐户（别名或邮件列表）中收集来自不同系统的邮件。
    </para>
   </listitem>
   <listitem>
    <para>
     为每个系统创建独立的电子邮件帐户。
    </para>
   </listitem>
  </itemizedlist>
  <para>
   管理员必须定期检查相关的电子邮件帐户，这一点至关重要。为了简化此项工作并识别重要事件，请避免发送不必要的信息。将应用程序配置为仅发送相关信息。
  </para>
 </sect1>
 <sect1 xml:id="sec-tuning-syslog-server">
  <title>将日志消息转发到中心系统日志服务器</title>
  <para>
   可将系统日志数据从各个系统转发到网络上的中心系统日志服务器。这样，管理员便可以大致了解所有主机上的事件，并防止成功攻克了系统的攻击者操控系统日志以掩盖其踪迹。
  </para>
  <para>
   设置中心系统日志服务器的过程由两个部分组成。首先配置中心日志服务器，然后配置客户端以进行远程日志记录。
  </para>
  <sect2 xml:id="sec-tuning-syslog-server-setup">
   <title>设置中心系统日志服务器</title>
   <procedure xml:id="pro-tuning-syslog-server">
    <title>配置中心 <systemitem>rsyslog</systemitem> 服务器</title>
    <para>
     要设置中心系统日志服务器，请执行以下步骤：
    </para>
    <step>
     <para>
      编辑配置文件 <filename>/etc/rsyslog.d/remote.conf</filename>。
     </para>
    </step>
    <step>
     <para>
      取消注释配置文件的 <literal>UDP Syslog Server</literal> 或 <literal>TCP Syslog Server</literal> 部分中的以下行。为 <systemitem class="daemon">rsyslogd</systemitem> 指派 IP 地址和端口。
     </para>
     <para>
      TCP 示例：
     </para>
     <screen>$ModLoad imtcp.so
$UDPServerAddress <replaceable>IP</replaceable><co xml:id="co-tuning-syslog-server-ip"/>
$InputTCPServerRun <replaceable>PORT</replaceable><co xml:id="co-tuning-syslog-server-port"/></screen>
     <para>
      UDP 示例：
     </para>
     <screen>$ModLoad imudp.so
$UDPServerAddress <replaceable>IP</replaceable><xref linkend="co-tuning-syslog-server-ip" xrefstyle="select:label nopage"/>
$UDPServerRun <replaceable>PORT</replaceable><xref linkend="co-tuning-syslog-server-port" xrefstyle="select:label nopage"/></screen>
     <calloutlist>
      <callout arearefs="co-tuning-syslog-server-ip">
       <para>
        要监听的 <systemitem class="daemon">rsyslogd</systemitem> 接口的 IP 地址。如果不指定地址，守护程序将监听所有接口。
       </para>
      </callout>
      <callout arearefs="co-tuning-syslog-server-port">
       <para>
        要监听的 <systemitem class="daemon">rsyslogd</systemitem> 端口。选择低于 1024 的特权端口。默认值为 514。
       </para>
      </callout>
     </calloutlist>
     <important>
      <title>TCP 与 UDP 协议</title>
      <para>
       在传统上，系统日志会使用 UDP 协议通过网络来传输日志消息。这种传输方式的开销较少，但可靠性不足。在负载较高的情况下，日志消息可能会丢失。
       
       
      </para>
      <para>
       TCP 协议更可靠，因此应该优先使用它而不是 UDP。
      </para>
     </important>
     <note>
      <title>将 <literal>UDPServerAddress</literal> 用于 TCP</title>
      <para>
       TCP 示例中的 <literal>$UDPServerAddress</literal> 配置参数并没有错误。尽管其名称包含 UDP，但它同时用于 TCP 和 UDP。
      </para>
     </note>
    </step>
    <step>
     <para>
      保存文件。
     </para>
    </step>
    <step>
     <para>
      重启动 <systemitem class="daemon">rsyslog</systemitem> 服务：
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> <command>systemctl restart rsyslog.service</command></screen>
    </step>
    <step>
     <para>在防火墙中打开相应的端口。对于与 TCP 配合使用的 <systemitem class="daemon">firewalld</systemitem>，请在端口 514 上运行：
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> <command>firewall-cmd --add-port <replaceable>514/tcp</replaceable> --permanent</command>
<prompt>&gt; </prompt><command>sudo</command> <command>firewall-cmd --reload</command></screen>
    </step>
   </procedure>
   <para>
    现在，您已配置中心系统日志服务器。接下来，请配置客户端以进行远程日志记录。
   </para>
  </sect2>
  <sect2 xml:id="sec-tuning-syslog-server-client">
   <title>设置客户端计算机</title>
   <procedure xml:id="pro-tuning-syslog-client">
    <title>配置一个 <guimenu>rsyslog</guimenu> 实例用于远程日志记录</title>
    <para>
     要配置计算机以将日志远程记录到中心系统日志服务器，请执行以下步骤：
    </para>
    <step>
     <para>
      编辑配置文件 <filename>/etc/rsyslog.d/remote.conf</filename>。
     </para>
    </step>
    <step>
     <para>
      取消注释相应的行（TCP 或 UDP），并将 <literal>remote-host</literal> 替换为在<xref linkend="sec-tuning-syslog-server-setup"/>中设置的中心系统日志服务器地址。
     </para>
     <para>
      TCP 示例：
     </para>
     <screen># Remote Logging using TCP for reliable delivery
# remote host is: name/ip:port, e.g. 192.168.0.1:514, port optional
*.* <replaceable>@@remote-host</replaceable></screen>
     <para>
      UDP 示例：
     </para>
     <screen># Remote Logging using UDP
# remote host is: name/ip:port, e.g. 192.168.0.1:514, port optional
*.* <replaceable>@remote-host</replaceable></screen>
    </step>
    <step>
     <para>
      保存文件。
     </para>
    </step>
    <step>
     <para>
      重启动 <systemitem class="daemon">rsyslog</systemitem> 服务：
     </para>
     <screen><prompt>&gt; </prompt><command>sudo</command> <command>systemctl restart rsyslog.service</command></screen>
    </step>
    <step>
     <para>
      校验系统日志转发是否可正常进行：
     </para>
     <screen><prompt>&gt; </prompt><command>logger "hello world"</command></screen>
     <para>
      中心系统日志服务器上现在应会出现日志消息 <literal>hello world</literal>。
     </para>
    </step>
   </procedure>
   <para>
    现在，您已配置一个系统以将日志远程记录到中心系统日志服务器。针对应该远程记录其日志的所有系统重复上述过程。
   </para>
  </sect2>
  <sect2 xml:id="sec-tuning-syslog-server-more">
   <title>更多信息</title>
   <para>
    此基本设置不包括加密，且仅适用于可信的内部网络。强烈建议使用 TLS 加密，但这需要一个证书基础架构。
   </para>
   <para>
    在此配置中，来自远程主机的所有消息的处理方式与在中心系统日志服务器上相同。请考虑按远程主机将消息过滤到单独的文件中，或者按消息类别将消息分类。
   </para>
   <para>
    有关加密、过滤和其他高级主题的详细信息，请查阅 <link xlink:href="https://www.rsyslog.com/doc/master/index.html#manual"/> 上的 <phrase role="productname">RSyslog</phrase> 文档。
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-tuning-syslog-logger">
  <title>使用 <command>logger</command> 创建系统日志项</title>

  <para>
   <command>logger</command> 是用于在系统日志中创建日志项的工具。它提供了 rsyslogd 系统日志模块的外壳命令接口。例如，下面一行命令会在 <filename>/var/log/messages</filename> 中或直接在日志中（如果未运行日志记录工具）输出其消息：
  </para>

<screen><prompt>&gt; </prompt>logger -t Test "This message comes from $USER"</screen>

  <para>
   根据当前用户和主机名，日志将包含如下一行：
  </para>

<screen>Sep 28 13:09:31 venus Test: This message comes from tux</screen>
 </sect1>
</chapter>
