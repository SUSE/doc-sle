<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="sle_update_offline.xml" version="5.0" xml:id="cha-upgrade-offline">
 <title>오프라인 업그레이드</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>예</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    이 장에서는 매체에서 부팅되는 YaST를 사용하여 기존 SUSE Linux Enterprise 설치를 업그레이드하는 방법을 설명합니다. 예를 들어 DVD에서, 네트워크를 통해 또는 시스템이 있는 하드 디스크에서 YaST 설치 프로그램을 시작할 수 있습니다.
   </para>
  </abstract>
 </info>
 <sect1 xml:id="sec-upgrade-offline-conceptual-overview">
  <title>개념 개요</title>
  <para>
   시스템을 업그레이드하기 전에 먼저 <xref linkend="cha-update-preparation"/>를 읽으십시오.
  </para>
  <para>
   시스템을 업그레이드하려면 새로 설치할 때처럼 설치 원본에서 부팅합니다. 그러나 부팅 화면이 나타나면 <guimenu>설치</guimenu> 대신 <guimenu>업그레이드</guimenu>를 선택해야 합니다. 다음에서 업그레이드를 시작할 수 있습니다.
  </para>

  <itemizedlist>
   <listitem>
    <formalpara>
     <title>이동식 미디어</title>
     <para>
      CD, DVD 또는 USB 대용량 장치 같은 미디어를 들 수 있습니다. 자세한 내용은 <xref linkend="sec-upgrade-offline-dvd"/>를 참조하십시오.
     </para>
    </formalpara>
   </listitem>
   <listitem>
    <formalpara>
     <title>네트워크 리소스</title>
     <para>
      로컬 미디어에서 부팅한 다음 해당하는 네트워크 설치 유형을 선택하거나 PXE를 통해 부팅할 수 있습니다. 자세한 내용은 <xref linkend="sec-upgrade-offline-network"/>를 참조하십시오.
     </para>
    </formalpara>
   </listitem>
  </itemizedlist>
 </sect1>


 <sect1 xml:id="sec-upgrade-offline-dvd">
  <title>설치 미디어에서 업그레이드 시작</title>
  
  <para>
   아래 절차에서는 DVD에서 부팅하는 방법을 설명하지만 USB 대용량 저장 장치의 ISO 이미지와 같은 다른 로컬 설치 미디어를 사용할 수도 있습니다. 시스템 아키텍처와 시스템에 기존 BIOS 또는 UEFI 중 무엇이 있는지에 따라 미디어와 부팅 방법을 선택합니다.
  </para>
  <procedure xml:id="pro-update-sle12-offline-dvd">
   <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP3</phrase></phrase>로 수동 업그레이드</title>
   <step>
    <para>
     부팅 매체를 선택하고 준비합니다(<xref linkend="part-prep"/> 참조).
    </para>
   </step>
   <step>
    <para>
     <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP3</phrase></phrase> 통합 설치 프로그램 DVD를 삽입하고 시스템을 부팅합니다. <guimenu>시작</guimenu> 화면이 표시된 다음 부팅 화면이 표시됩니다.
    </para>
   </step>
   <step>
    <para>
     선택 사항: 설치 프로그램이 네트워크 소스가 아닌 DVD에서 패키지만 강제로 설치하도록 하려면 부팅 옵션 <option>media_upgrade=1</option>을 추가하십시오.
    </para>
   </step>
   <step>
    <para>
     [부팅] 메뉴에서 <emphasis>업그레이드</emphasis>를 선택하여 시스템을 시작합니다.
    </para>
   </step>
   <step>
    <para>
     <xref linkend="sec-upgrade-offline-yast"/>에 설명된 대로 업그레이드 프로세스를 계속합니다.
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 xml:id="sec-upgrade-offline-network">
  <title>네트워크 원본에서 업그레이드 시작</title>
  <para>
   네트워크 설치 소스에서 업그레이드를 시작하려면 다음 요구사항을 충족해야 합니다.
  </para>
  <variablelist>
   <title>네트워크 설치 원본에서 업그레이드할 경우의 요구사항</title>
   <varlistentry>
    <term>네트워크 설치 원본</term>
    <listitem>
     <para>
      <xref linkend="cha-deployment-instserver"/>에 따라 설정된 네트워크 설치 원본이 설정됩니다.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>네트워크 연결 및 네트워크 서비스</term>
    <listitem>
     <para>
      설치 서버와 대상 시스템 모두에서 네트워크 연결이 작동 중이어야 합니다. 필요한 네트워크 서비스는 다음과 같습니다.
     </para>
     <itemizedlist>
      <listitem><para>도메인 네임 서비스</para></listitem>
      <listitem><para>DHCP(PXE를 통한 부팅에만 필요, IP는 설정 중 수동으로 설정할 수 있음)</para></listitem>
      <listitem><para>OpenSLP(선택 사항)</para></listitem>
     </itemizedlist>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>부팅 미디어</term>
    <listitem>
     <para>
      부팅 가능한 SUSE Linux Enterprise DVD, ISO 이미지 또는 작동하는 PXE 설정. PXE를 통한 부팅에 대한 자세한 내용은 <xref linkend="sec-deployment-prep-boot-pxeprep"/> 항목을 참조하십시오. 원격 서버에서 업그레이드 시작에 대한 자세한 내용은 <xref linkend="cha-remote-installation"/> 항목을 참조하십시오.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <sect2 xml:id="sec-update-sle-manual-network-boot-from-dvd">
   <title>네트워크 설치 원본을 통해 수동으로 업그레이드 - DVD에서 부팅</title>
  
   <para>
    이 절차에서는 DVD에서 부팅하는 방법을 예를 들어 설명하지만 USB 대용량 저장 장치의 ISO 이미지와 같은 다른 로컬 설치 미디어를 사용해도 됩니다. 부팅 방법을 선택하고 미디어에서 시스템을 시작하는 방법은 시스템 아키텍처와 시스템에서 기존 BIOS 또는 UEFI를 사용하는지 여부에 따라 다릅니다. 자세한 내용은 아래 링크를 참조하십시오.
   </para>

   <procedure xml:id="pro-update-sle-manual-network-boot-from-dvd">

    <step>
     <para>
      <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP3</phrase></phrase> 통합 설치 프로그램 DVD를 삽입하고 시스템을 부팅합니다. <guimenu>시작</guimenu> 화면이 표시된 다음 부팅 화면이 표시됩니다.
     </para>
    </step>
    <step>
     <para>
      사용할 네트워크 설치 원본 유형을 선택합니다(FTP, HTTP, NFS, SMB 또는 SLP). 일반적으로 <keycap>F4</keycap> 키를 눌러 선택하지만 시스템에 기존 BIOS 대신 UEFI가 포함된 경우 부팅 파라미터를 수동으로 조정해야 합니다. 자세한 내용은 <xref linkend="cha-boot-parameters"/> 및 <xref linkend="cha-install"/> 항목을 참조하십시오.
     </para>
    </step>
    <step>
     <para>
      <xref linkend="sec-upgrade-offline-yast"/>에 설명된 대로 업그레이드 프로세스를 계속합니다.
     </para>
    </step>
   </procedure>
  </sect2>
  <sect2 xml:id="sec-update-sle-manual-network-pxe-boot">
   <title>네트워크 설치 원본을 통해 수동으로 업그레이드 - PXE를 통해 부팅</title>
   <para>
    PXE 부팅을 사용하여 네트워크 설치 원본에서 업그레이드하려면 다음과 같이 하십시오.
   </para>
   <procedure xml:id="pro-update-sle-manual-network-pxe-boot">
    <step>
     <para>
      DHCP 서버의 설정을 조정하여 PXE를 통한 부팅에 필요한 주소 정보를 제공합니다. 자세한 내용은 <xref linkend="pro-deployment-dhcp-server"/>를 참조하십시오.
     </para>
    </step>
    <step>
     <para>
      PXE를 통한 부팅에 필요한 부팅 이미지를 저장하도록 TFTP 서버를 설정합니다. 이에 대해 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP3</phrase></phrase> 설치 프로그램 DVD를 사용하거나 <xref linkend="sec-deployment-tftp-server"/>의 지침을 따르십시오.
     </para>
    </step>
    <step>
     <para>
      대상 시스템에서 PXE 부팅 및 Wake-on-LAN을 준비합니다.
     </para>
    </step>
    <step>
     <para>
      대상 시스템의 부팅을 시작하고 VNC를 사용하여 이 시스템에서 실행 중인 설치 루틴에 원격으로 연결합니다. 자세한 내용은 <xref linkend="sec-remote-installation-monitor-vnc"/>를 참조하십시오.
     </para>
    </step>
    <step>
     <para>
      <xref linkend="sec-upgrade-offline-yast"/>에 설명된 대로 업그레이드 프로세스를 계속합니다.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-upgrade-offline-yast">
  <title>SUSE Linux Enterprise 업그레이드</title>
  <para>
   <remark>taroth 2014-11-13: argh, the following is terminology hell regarding
     the software strings: "upgrade"/"update" are used intermittently and
     without clear differentiation...</remark>
  </para>
  <para>
   시스템을 업그레이드하기 전에 먼저 <xref linkend="cha-update-preparation"/>를 읽어 보십시오. 자동 마이그레이션을 수행하려면 다음 단계를 수행하십시오.
  </para>
  <procedure>
   <note>
    <title>SUSE Customer Center 및 인터넷 연결</title>
    <para>
     업그레이드하려는 시스템이 SUSE Customer Center에 등록되어 있는 경우에는 다음 절차 중에 인터넷에 연결되어 있는지 확인하십시오.
    </para>
   </note>
   <step>
    <para>
     설치 미디어 또는 네트워크를 통해 부팅한 후 부팅 화면에서 <guimenu>업그레이드</guimenu> 항목을 선택합니다.
    </para>
    <warning>
     <title>잘못 선택하면 데이터가 손실될 수 있음</title>
     <para>
      이 시점에 <guimenu>업그레이드</guimenu>를 선택했는지 확인합니다. 실수로 <guimenu>설치</guimenu>를 선택한 경우에는 데이터 파티션이 신규 설치로 덮어쓰기 됩니다.
     </para>
    </warning>
    <para>
     설치 시스템이 시작됩니다.
    </para>
   </step>
   <step>
    <para>
     <guimenu>시작</guimenu> 화면에서 <guimenu>언어</guimenu> 및 <guimenu>키보드</guimenu>를 선택합니다. <guimenu>다음</guimenu>을 눌러 계속합니다.
    </para>
    <para>
     파티션에 이미 설치된 SUSE Linux Enterprise 시스템이 있는지 확인합니다.
    </para>
   </step>
   <step>
    <para>
     <guimenu>업그레이드를 위한 선택</guimenu> 화면에서 업그레이드할 파티션을 선택하고 <guimenu>다음</guimenu>을 클릭합니다.
    </para>
   </step>
   <step>
    <para>
     YaST는 선택한 파티션을 탑재하고 업그레이드한 제품의 사용권 계약을 표시합니다. 계속하려면 라이선스를 승인합니다.
    </para>
   </step>
   <step>
    <para>
     <guimenu>이전에 사용된 리포지토리</guimenu> 화면에서 리포지토리의 상태를 조정합니다. 기본적으로 모든 리포지토리가 제거되어 있습니다. 사용자 지정 리포지토리를 추가하지 않은 경우에는 설정을 변경하지 마십시오. 업그레이드용 패키지는 DVD에서 설치되며 선택 사항으로 다음 단계에서 기본 온라인 리포지토리를 활성화할 수 있습니다.
 </para>
 <para>
사용자 지정 리포지토리가 있는 경우에는 다음의 두 가지 중에 선택할 수 있습니다.
</para>
<itemizedlist>
    <listitem>
        <para>
    리포지토리 상태를 제거됨으로 유지합니다. 이 리포지토리에서 설치된 소프트웨어는 업그레이드 중에 제거됩니다. 새 릴리스와 일치하는 리포지토리 버전이 없는 경우 이 방법을 사용하십시오.
</para>
</listitem>
<listitem>
    <para>
    새 릴리스와 일치하는 경우에는 리포지토리를 업데이트 및 활성화합니다. 목록에서 리포지토리를 클릭하여 URL을 변경한 후 <guimenu>변경</guimenu>을 클릭합니다. <guimenu>활성화</guimenu>로 설정될 때까지 <guimenu>상태 토글</guimenu>을 확인하여 리포지토리를 활성화합니다.
</para>
</listitem>
</itemizedlist>
<para>
시스템이 불안정하거나 작동하지 않을 수 있으므로 리포지토리를 이전 릴리스로 유지하지 마십시오. 그리고 <guimenu>다음</guimenu>을 클릭하여 계속 진행합니다.
    </para>
   </step>
   <step>
    <para>
     다음 단계는 업그레이드한 시스템을 SUSE Customer Center에 등록했는지 여부에 따라 달라집니다.
    </para>
    <substeps>
     <step>
      <para>
       시스템을 SUSE Customer Center에 등록하지 않은 경우 YaST는 보조 설치 미디어인 SLE-15-SP3-Full-<replaceable>ARCH</replaceable>-GM-media1.iso 이미지를 사용하는 것을 추천하는 팝업 메시지를 표시합니다.
      </para>
      <para>
       이 미디어가 없는 경우에는 시스템을 등록 없이 업그레이드할 수 없습니다.
      </para>
     </step>
     <step>
      <para>
       시스템을 SUSE Customer Center에 등록한 경우 YaST는 가능한 마이그레이션 대상과 요약을 표시합니다.
      </para>
      <para>
       목록에서 마이그레이션 대상을 하나 선택하고 <guimenu>다음</guimenu>을 선택하여 계속 진행합니다.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     다음 대화 상자에서는 추가 설치 매체를 선택적으로 추가할 수 있습니다. 추가 설치 미디어가 있는 경우 <guimenu>추가 기능 제품을 설치하겠습니다</guimenu> 옵션을 활성화하고 미디어 유형을 지정합니다.
    </para>
   </step>
   <step>
    <para>
     업그레이드에 대한 <guimenu>설치 설정</guimenu>을 검토합니다.
    </para>
   </step>
   <step>
    <para>
     모든 설정을 원하는 대로 설정했으면 <guimenu>업데이트</guimenu>를 클릭하여 설치 및 제거 절차를 시작합니다.
    </para>
    <tip>
     <title>SMT 클라이언트의 업그레이드 오류</title>
     <para>
      업그레이드하려는 SMT 클라이언트 시스템을 업그레이드하지 못한 경우 <xref linkend="pro-sec-update-prep-smt-de-register"/> 항목을 참조하여 나중에 업그레이드 절차를 다시 시작하십시오.
     </para>
    </tip>
   </step>
   <step>
    <para>
     업그레이드 프로세스가 성공적으로 종료된 후에는 <xref linkend="sec-upgrade-postupgrade-checks"/>의 설명과 같이 업그레이드 후 점검을 수행합니다.
    </para>
   </step>
  </procedure>
  <remark>2021-03-11 jufa: considering removing sub-section as only 1 section</remark>
  <sect2 xml:id="sec-upgrade-postupgrade-checks">
   <title>업그레이드 후 점검</title>
   <itemizedlist>
    <listitem>
     <para>
      <quote>독립 패키지</quote>가 있는지 확인합니다. 업그레이드 절차 중 패키지의 이름이 변경되거나 패키지가 제거, 병합, 분할될 수 있습니다. 그 결과, 특정 패키지가 지원되지 않는 독립 패키지가 될 수 있습니다. 독립 패키지는 자동으로 제거되지 않습니다. 다음 명령으로 독립 패키지 목록을 볼 수 있습니다.
     </para>
<screen><prompt>tux &gt; </prompt>zypper packages --orphaned --unneeded</screen>
     <para>
      이 목록에서 아직 필요한 패키지와 제거해도 안전한 패키지를 판단할 수 있습니다.
     </para>
    </listitem>
    <listitem>
     <para>
      <filename>*.rpmnew</filename> 및 <filename>*.rpmsave</filename> 파일을 확인하고 해당 파일의 컨텐트를 검토하며 적합한 변경 사항을 병합합니다. 업그레이드에 구성 파일 덮어쓰기가 아닌 기본 구성 파일에 대한 변경 사항이 포함되는 경우, 패키지는 이러한 파일 유형 중 하나를 씁니다. <filename>*.rpmnew</filename>에는 새로운 기본 구성이 포함되고 원본 파일을 그대로 유지하지만, <filename>*.rpmsave</filename>는 새 기본 파일로 교체된 원본 구성의 사본입니다.
     </para>
     <para>
      전체 파일 시스템에서 <filename>*.rpmnew</filename> 및 <filename>*.rpmsave</filename> 파일을 검색할 필요는 없으며 가장 중요한 파일은 <filename>/etc</filename> 디렉토리에 저장되어 있습니다. 다음 명령을 사용하여 해당 파일을 나열합니다.
     </para>
<screen><prompt>tux &gt; </prompt>find /etc -print | egrep "rpmnew$|rpmsave$"</screen>
    </listitem>
   </itemizedlist>
  </sect2>

 </sect1>

 <sect1 xml:id="sec-upgrade-offline-automated" os="sles">
  <title>AutoYaST를 사용하여 업그레이드</title>
  <para>
   업그레이드 프로세스를 자동으로 실행할 수 있습니다. 자세한 내용은 <xref linkend="CreateProfile-upgrade"/>를 참조하십시오.
  </para>
 </sect1>

 <sect1 xml:id="sec-upgrade-offline-manager">
  <title>SUSE Manager를 사용하여 업그레이드</title>
  <para>
   SUSE Manager는 SUSE Linux Enterprise 클라이언트용 업데이트, 패치 및 보안 수정을 제공하기 위한 서버 솔루션입니다. 이 솔루션에는 관리 작업 도구 세트와 웹 기반 사용자 인터페이스가 함께 제공됩니다. SUSE Manager에 대한 자세한 내용은 <link xlink:href="https://www.suse.com/products/suse-manager/"/>를 참조하십시오.
  </para>
  <para>
   SUSE Manager를 사용하여 시스템 업그레이드를 수행할 수 있습니다. 통합된 AutoYaST 기술을 사용하여 한 개의 주 버전에서 다음 버전으로 업그레이드할 수 있습니다.
  </para>

  <para>
  SUSE Manager가 시스템을 관리하는 경우에는 SUSE Manager 설명서의 설명과 같이 업데이트합니다. <citetitle>클라이언트 마이그레이션</citetitle> 절차는 <link xlink:href="https://documentation.suse.com/suma/"/>에서 확인할 수 있는 <citetitle>SUSE Manager 업그레이드 가이드</citetitle>에 설명되어 있습니다.
 </para>
 </sect1>
 <sect1 xml:id="sec-update-reg-status-after-rollback">
  <title>롤백 후 등록 상태 업데이트</title>

  <para>
   서비스 팩 업그레이드를 수행할 때는 등록 서버의 구성을 변경하여 새 리포지토리에 대한 액세스를 제공해야 합니다. 업그레이드 프로세스가 중단되거나 복구된 경우(백업 또는 스냅샷에서 복원하여) 등록 서버의 정보가 시스템 상태와 일치하지 않습니다. 이로 인해 업데이트된 리포지토리에 액세스할 수 없거나 클라이언트에서 잘못된 리포지토리가 사용될 수 있습니다.
  </para>

  <para>
   스냅퍼를 통해 롤백이 이루어지는 경우 부팅 프로세스 중 올바른 리포지토리에 대한 액세스가 설정되도록 등록 서버에 알림이 전달됩니다. 다른 방법으로 시스템을 복구했거나 등록 서버와의 커뮤니케이션에 오류가 발생한 경우 클라이언트에서 수동으로 롤백을 트리거합니다. 수동 롤백 트리거의 예는 네트워크 문제로 인해 서버에 액세스할 수 없는 경우가 될 수 있습니다. 롤백을 수행하려면 다음을 실행합니다.
  </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> <command>snapper</command> rollback</screen>

  <para>
   특히 다음을 사용하여 서비스를 새로 고친 후에는 시스템에 올바른 리포지토리가 설정되었는지 항상 확인하는 것이 좋습니다.
  </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> <command>zypper</command> ref -s</screen>

  <para>
   이 기능은
   <package>rollback-helper</package>
   패키지에 있습니다.
  </para>
 </sect1>
 <sect1 xml:id="sec-update-registersystem">


  <title>시스템 등록</title>

  <para>
   업그레이드를 실행하기 전에 시스템을 등록하지 않은 경우 YaST에서 <guimenu>제품 등록</guimenu> 모듈을 사용하여 언제든지 시스템을 등록할 수 있습니다.
  </para>

  <para>
   시스템을 등록하면 다음과 같은 이점이 있습니다.
  </para>

  <itemizedlist>
   <listitem>
    <para>
     지원 자격
    </para>
   </listitem>
   <listitem>
    <para>
     보안 업데이트 및 버그 수정 가용성
    </para>
   </listitem>
   <listitem>
    <para>
     SUSE Customer Center에 액세스
    </para>
   </listitem>
  </itemizedlist>

  <procedure>
   <step>
    <para>
     YaST를 시작하고 <menuchoice> <guimenu> 소프트웨어</guimenu>
     <guimenu> 제품 등록</guimenu> </menuchoice> 을 선택하여 <guimenu>등록</guimenu> 대화 상자를 엽니다.
    </para>
   </step>
   <step>
    <para>
     사용자나 조직이 가입을 관리하는 데 사용하는 SUSE 계정과 연결된 <guimenu>전자 메일</guimenu> 주소를 입력하십시오. 아직 SUSE 계정이 없다면 SUSE Customer Center 홈 페이지(<link xlink:show="new" xlink:href="https://scc.suse.com/"/>)로 이동하여 계정을 생성하십시오.
    </para>
   </step>
   <step>
    <para>
     <guimenu>SUSE Linux Enterprise Server</guimenu>와 함께 받은 <phrase role="productname"><phrase os="sles">등록 코드</phrase></phrase>를 입력하십시오.
    </para>
   </step>
   <step>
     <para>
      네트워크에서 하나 이상의 로컬 등록 서버를 사용할 수 있으면 목록에서 로컬 등록 서버를 선택할 수 있습니다.
     </para>
   </step>
   <step xml:id="st-y2-register-final">
    <para>
     등록을 시작하려면 <guimenu>다음</guimenu>을 눌러 계속합니다.
    </para>
    <para>
     성공적으로 등록한 후 YaST에는 시스템에 사용할 수 있는 확장, 추가 기능 및 모듈이 나열됩니다. 이를 선택하고 설치하려면 <xref linkend="sec-add-ons-extensions"/>를 계속 진행합니다.
    </para>
   </step>
  </procedure>
 </sect1>

</chapter>
