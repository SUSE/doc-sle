<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="zypper.xml" version="5.0" xml:id="sec.zypper">
 <title>Verwenden von zypper</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>Ja</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  Zypper ist ein Kommandozeilen-Paketmanager für Installation, Aktualisierung und Löschung von Paketen sowie zum Verwalten von Repositorys. Damit können Sie Software per Fernzugriff oder mithilfe von Shell-Skripten verwalten.
 </para>

 <sect2 xml:id="sec.zypper.usage">
  <title>Allgemeine Verwendung</title>
  <para>
   Die allgemeine Syntax von Zypper sieht wie folgt aus:
  </para>
<screen>zypper <option>[--global-options]</option> <replaceable>COMMAND</replaceable> <option> [--command-options]</option> <option>[arguments]</option></screen>

  <para>
   Die Komponenten in Klammern sind nicht erforderlich. Eine Liste der allgemeinen Optionen und aller Befehle erhalten Sie mit <command>zypper help</command>. Wenn Sie Hilfe zu einem bestimmten Befehl abrufen möchten, geben Sie <command>zypper help</command>
   <replaceable>BEFEHL</replaceable> ein.
  </para>
  <variablelist>
   <varlistentry>
    <term>Zypper-Kommandos</term>
    <listitem>
     <para>
      Am einfachsten führen Sie Zypper aus, indem Sie seinen Namen gefolgt von einem Kommando eingeben. Geben Sie z. B. für das Anwenden aller erforderlichen Patches auf das System Folgendes ein:
     </para>
<screen>sudo zypper patch</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Globale Optionen</term>
    <listitem>
     <para>
      Zusätzlich können Sie aus einer oder mehreren globalen Optionen wählen, indem Sie sie direkt vor dem Kommando eingeben:
     </para>
<screen>sudo zypper --non-interactive patch</screen>
     <para>
      Im Beispiel oben bedeutet die Option <option>--non-interactive</option>, dass das Kommando ausgeführt wird, ohne nach Informationen zu fragen (die Standardantworten werden automatisch angewendet).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Kommandospezifische Optionen</term>
    <listitem>
     <para>
      Um die spezifischen Optionen für ein bestimmtes Kommando zu verwenden, geben Sie sie direkt nach dem Kommando ein.
     </para>
<screen>sudo zypper patch --auto-agree-with-licenses</screen>
     <para>
      Im Beispiel oben wird <option>--auto-agree-with-licenses</option> verwendet, um alle erforderlichen Patches auf ein System anzuwenden, ohne dass Sie aufgefordert werden, Lizenzen zu bestätigen. Stattdessen wird die Lizenz automatisch akzeptiert.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Argumente</term>
    <listitem>
     <para>
      Einige Kommandos erfordern ein oder mehrere Argumente. Wird beispielsweise das Kommando <command>install</command> verwendet, müssen Sie angeben, welches Paket oder welche Pakete Sie <emphasis>installieren</emphasis> möchten:
     </para>
<screen>sudo zypper install mplayer</screen>
     <para>
      Manche Optionen erfordern auch ein einzelnes Argument. Das folgende Kommando listet alle bekannten Muster auf:
     </para>
<screen>zypper search -t pattern</screen>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   Sie können alle obigen Optionen kombinieren. Beispielsweise werden durch das folgende Kommando die Pakete
   <package>aspell-de</package>
   und
   <package>aspell-fr</package>
   aus dem <literal>factory</literal>-Repository im Verbose-Modus installiert:
  </para>
<screen>sudo zypper -v install --from factory aspell-de aspell-fr</screen>
  <para>
   Mit der Option <option>--from</option> bleiben alle Repositorys aktiviert (damit alle Abhängigkeiten aufgelöst werden können), wenn das Paket aus dem angegebenen Repository abrufen wird.
  </para>
  <para>
   Die meisten Zypper-Kommandos besitzen eine <literal>dry-run</literal>-Option, die eine Simulation des angegebenen Kommandos ausführt. Sie kann für Tests verwendet werden.
  </para>
<screen>sudo zypper remove --dry-run MozillaFirefox</screen>
  <para>
   Zypper unterstützt die globale Option <option>--userdata <replaceable>ZEICHENKETTE</replaceable></option>. Bei dieser Option können Sie eine Zeichenkette angeben, die dann in die Protokolle und Plugins von Zypper geschrieben wird (z. B. in das Btrfs-Plugin). Hiermit können Sie Transaktionen in Protokolldateien kennzeichnen.
  </para>
<screen>sudo zypper --userdata <replaceable>STRING</replaceable> patch</screen>
 </sect2>

 <sect2 xml:id="sec.zypper.softman">
  <title>Installieren und Entfernen von Software mit zypper</title>
  <para>
   Verwenden Sie zur Installation oder Löschung von Paketen die folgenden Kommandos:
  </para>
<screen>sudo zypper install <replaceable>PACKAGE_NAME</replaceable>
sudo zypper remove <replaceable>PACKAGE_NAME</replaceable></screen>

  <warning>
   <title>Entfernen Sie keine obligatorischen Systempakete</title>
   <para>
    Entfernen Sie keine obligatorischen Systempakete, wie <package>glibc</package>, <package>zypper</package>, <package>kernel</package>. Werden diese Pakete entfernt, kann das System instabil werden oder aufhören zu funktionieren.
   </para>
  </warning>
  <sect3 xml:id="sec.zypper.selectpackage">
   <title>Auswählen, welche Pakete zu installieren oder zu entfernen sind</title>
   <para>
    Es gibt verschiedene Methoden, Pakete mit den Kommandos <command>zypper install</command> und <command>zypper remove</command> zu adressieren.
   </para>
   <variablelist>
    <varlistentry>
     <term>Nach dem exakten Paketnamen</term>
     <listitem>
<screen>sudo zypper install MozillaFirefox</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Nach dem genauen Namen und der Versionsnummer des Pakets</term>
     <listitem>
<screen>sudo zypper install MozillaFirefox-52.2</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Nach dem Repository-Alias und Paketnamen</term>
     <listitem>
<screen>sudo zypper install mozilla:MozillaFirefox</screen>
      <para>
       Dabei ist <literal>mozilla</literal> der Alias des Repositorys, aus dem installiert werden soll.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Nach dem Paketnamen mit Platzhaltern</term>
     <listitem>
      <para>
       Sie können alle Pakete mit Namen auswählen, die mit einer bestimmten Zeichenfolge anfangen oder enden. Verwenden Sie Platzhalter mit äußerster Umsicht, vor allem beim Entfernen von Paketen. Das folgende Kommando installiert alle Pakete, deren Name mit <quote>Moz</quote> beginnt:
      </para>
<screen>sudo zypper install 'Moz*'</screen>
      <tip>
       <title>Entfernen aller <filename>-debuginfo</filename> -Pakete</title>
       <para>
        Beim Debuggen eines Problems müssen Sie unter Umständen zahlreiche <filename>-debuginfo</filename>-Pakete temporär installieren, mit denen Sie weitere Informationen zu den ausgeführten Prozessen erhalten. Nach Abschluss der Debugging-Sitzung bereinigen Sie die Umgebung wie folgt:
       </para>
<screen>sudo zypper remove '*-debuginfo'</screen>
      </tip>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Nach Funktion</term>
     <listitem>
      <para>
       Wenn Sie beispielsweise ein Perl-Modul installieren möchten, ohne den Namen des Pakets zu kennen, sind Funktionen praktisch:
      </para>
<screen>sudo zypper install firefox</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Nach Funktion, Hardware-Architektur oder Version</term>
     <listitem>
      <para>
       Zusammen mit einer Funktion können Sie eine Hardware-Architektur und eine Version angeben:
      </para>
      <itemizedlist>
       <listitem>
        <para>
         Der Name der gewünschten Hardware-Architektur wird nach einem Punkt an die Funktion angefügt. Um beispielsweise die AMD64-/Intel-64-Architekturen anzugeben (die in Zypper <literal>x86_64</literal> heißen), verwenden Sie Folgendes:
        </para>
<screen>sudo zypper install 'firefox.x86_64'</screen>
       </listitem>
       <listitem>
        <para>
         Versionen müssen am Ende der Zeile angefügt werden und ein Operator muss vorangestellt sein: <literal>&lt;</literal> (kleiner als), <literal>&lt;=</literal> (kleiner oder gleich), <literal>=</literal> (gleich), <literal>&gt;=</literal> (größer oder gleich), <literal>&gt;</literal> (größer als).
        </para>
<screen>sudo zypper install 'firefox&gt;=52.1'</screen>
       </listitem>
       <listitem>
        <para>
         Sie können auch eine Hardware-Architektur und eine Versionsanforderung kombinieren:
        </para>
<screen>sudo zypper install 'firefox.x86_64&gt;=52.1'</screen>
       </listitem>
      </itemizedlist>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Nach dem Pfad der RPM-Datei</term>
     <listitem>
      <para>
       Sie können einen lokalen oder entfernten Pfad zu einem Paket angeben:
      </para>
<screen>sudo zypper install /tmp/install/MozillaFirefox.rpm
sudo zypper install http://download.opensuse.org/repositories/mozilla/openSUSE_Leap_42.3/x86_64/MozillaFirefox-52.2-2.11.x86_64.rpm</screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
  <sect3 xml:id="sec.zypper.combineinstall">
   <title>Kombinieren der Installation und der Entfernung von Paketen</title>
   <para>
    Zum gleichzeitigen Installieren und Entfernen von Paketen verwenden Sie die Modifikatoren <literal>+/-</literal>. Um
    <package>emacs</package>
    zu installieren und gleichzeitig
    <package>vim</package>
    zu entfernen, verwenden Sie Folgendes:
   </para>
<screen>sudo zypper install emacs -vim</screen>
   <para>
    Um
    <package>emacs</package>
    zu entfernen und gleichzeitig
    <package>vim</package>
    zu installieren, verwenden Sie Folgendes:
   </para>
<screen>sudo zypper remove emacs +vim</screen>
   <para>
    Um zu vermeiden, dass der mit <literal>-</literal> beginnende Paketname als Kommandooption interpretiert wird, verwenden Sie ihn stets als das zweite Argument. Falls dies nicht möglich ist, stellen Sie ihm <literal>--</literal> voran:
   </para>
<screen>sudo zypper install -emacs +vim       # Wrong
sudo zypper install vim -emacs        # Correct
sudo zypper install -- -emacs +vim    # same as above
sudo zypper remove emacs +vim         # same as above</screen>
  </sect3>
  <sect3 xml:id="sec.zypper.clean">
   <title>Bereinigen von Abhängigkeiten entfernter Pakete</title>
   <para>
    Wenn (zusammen mit einem bestimmten Paket) automatisch alle Pakete entfernt werden sollen, die nach dem Entfernen dieses Pakets nicht mehr erforderlich sind, verwenden Sie die Option <option>--clean-deps</option>:
   </para>
<screen>sudo zypper rm <replaceable>PACKAGE_NAME</replaceable> --clean-deps</screen>
  </sect3>
  <sect3 xml:id="sec.zypper.script">
   <title>Verwenden von Zypper in Skripten</title>
   <para>
    Standardmäßig verlangt Zypper eine Bestätigung, bevor ein ausgewähltes Paket installiert oder entfernt wird oder wenn ein Problem auftritt. Mit der Option <option>--non-interactive</option> können Sie dieses Verhalten deaktivieren. Die Option muss jedoch vor dem tatsächlich auszuführenden Kommando (<command>install</command>, <command>remove</command> oder <command>patch</command>) angegeben werden, wie im Folgenden erkennbar:
   </para>
<screen>sudo zypper <option>--non-interactive</option> install <replaceable>PACKAGE_NAME</replaceable></screen>
   <para>
    Mit dieser Option kann Zypper auch in Skripten und Cron-Aufträgen verwendet werden.
   </para>
  </sect3>
  <sect3 xml:id="sec.zypper.softman.sources">
   <title>Installieren und Herunterladen von Quellpaketen</title>
   <para>
    Wenn Sie das entsprechende Quellpaket eines Pakets installieren möchten, verwenden Sie:
   </para>
<screen>zypper source-install <replaceable>PACKAGE_NAME</replaceable></screen>
   <para>
    Wird das Kommando als <systemitem class="username">root</systemitem> ausgeführt, ist der Standardspeicherort der Quellpakete <filename>/usr/src/packages/</filename> und <filename>~/rpmbuild</filename>, wenn es als Benutzer ausgeführt wird. Diese Werte können in Ihrer lokalen <command>rpm</command>-Konfiguration geändert werden.
   </para>
   <para>
    Dieses Kommando installiert auch die Build-Abhängigkeiten des angegebenen Pakets. Wenn Sie dies nicht wünschen, fügen Sie den Schalter <literal>-D</literal> hinzu. Um nur die Build-Abhängigkeiten zu installieren, verwenden Sie <literal>-d</literal>.
   </para>
<screen>sudo zypper source-install -D <replaceable>PACKAGE_NAME</replaceable> # source package only
sudo zypper source-install -d <replaceable>PACKAGE_NAME</replaceable> # build dependencies only</screen>
   <para>
    Natürlich gelingt dies nur, wenn das Repository mit den Quellpaketen in Ihrer Repository-Liste aktiviert ist (es wird standardmäßig hinzugefügt, aber nicht aktiviert). Details zur Repository-Verwaltung finden Sie unter <xref linkend="sec.zypper.instrepo"/>.
   </para>
   <para>
    Eine Liste aller Quellpakete, die in Ihren Repositorys verfügbar sind, können Sie wie folgt abrufen:
   </para>
<screen>zypper search -t srcpackage</screen>
   <para>
    Wenn Sie möchten, können Sie die Quellpakete für alle installierten Pakete in ein lokales Verzeichnis herunterladen. Zum Herunterladen von Quellpaketen verwenden Sie:
   </para>
<screen>zypper source-download</screen>
   <para>
    Das Standardverzeichnis für heruntergeladene Dateien lautet <filename>/var/cache/zypper/source-download</filename>. Mit der Option <option>--directory</option> können Sie dieses Verzeichnis ändern. Sollen nur fehlende oder überzählige Pakete angezeigt werden, ohne Pakete herunterzuladen oder zu löschen, verwenden Sie die Option <option>--status</option>. Zum Löschen überzähliger Pakete verwenden Sie die Option <option>--delete</option>. Soll das Löschen deaktiviert werden, verwenden Sie die Option <option>--no-delete</option>.
   </para>
  </sect3>
  <sect3 xml:id="sec.zypper.softman.pluscontent">
   <title>Installieren von Paketen aus deaktivierten Repositorys</title>
   <para>
    In der Regel können Sie nur Pakete aus aktivierten Repositorys installieren oder aktualisieren. Mit der Option <option>--plus-content <replaceable>TAG</replaceable></option> können Sie bestimmte Repositorys aktualisieren, temporär während der aktuellen Zypper-Sitzung aktivieren und nach Abschluss der Sitzung wieder deaktivieren.
   </para>
   <para>
    Sollen beispielsweise Repositorys mit zusätzlichen <filename>-debuginfo</filename>- oder <filename>-debugsource</filename>-Paketen aktiviert werden, geben Sie <option>--plus-content debug</option> ein. Diese Option kann mehrfach angegeben werden.
   </para>
   <para>
    Sollen diese „Debug“-Repositorys vorübergehend aktiviert werden, damit Sie ein bestimmtes <filename>-debuginfo</filename>-Paket installieren können, geben Sie die Option wie folgt an:
   </para>
<screen>sudo zypper --plus-content debug install "debuginfo(build-id)=eb844a5c20c70a59fc693cd1061f851fb7d046f4"</screen>
   <para>
    Die Zeichenkette <literal>build-id</literal> wird von <command>gdb</command> für fehlende debuginfo-Pakete zurückgegeben.
   </para>
  </sect3>
  <sect3 xml:id="sec.zypper.softman.util">
   <title>Dienstprogramme</title>
   <para>
    Wenn Sie prüfen möchten, ob alle Abhängigkeiten noch erfüllt sind, und fehlende Abhängigkeiten reparieren möchten, verwenden Sie:
   </para>
<screen>zypper verify</screen>
   <para>
    Zusätzlich zu Abhängigkeiten, die erfüllt sein müssen, <quote>empfehlen</quote> einige Pakete andere Pakete. Diese empfohlenen Pakete werden installiert, wenn sie aktuell verfügbar und installierbar sind. Falls empfohlene Pakete erst nach der Installation des empfehlenden Pakets (durch Hinzufügen zusätzlicher Pakete oder zusätzlicher Hardware) zur Verfügung steht, verwenden Sie das folgende Kommando:
   </para>
<screen>sudo zypper install-new-recommends</screen>
   <para>
    Dieses Kommando ist nach dem Anschließen einer Webcam oder eines WLAN-Geräts äußerst nützlich. Hiermit werden Treiber für das Gerät und die zugehörige Software installiert, sofern verfügbar. Die Treiber und die zugehörige Software sind nur dann installierbar, wenn bestimmte Hardware-Abhängigkeiten erfüllt sind.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.zypper.softup">
  <title>Aktualisieren von Software mit zypper</title>
  <para>
   Es gibt drei verschiedene Möglichkeiten, Software mithilfe von Zypper zu
   installieren: durch Installation von Patches, durch Installation einer neuen
   Version eines Pakets oder durch Aktualisieren der kompletten
   Distribution. Letzteres wird mit <command>zypper dist-upgrade</command>
   erreicht. Die Aufrüstung von <phrase role="productname">openSUSE
   Leap</phrase> wird im Abschnitt <xref linkend="sec.update.zypper"/>
   erläutert.
  </para>
  <sect3 xml:id="sec.zypper.softup.patch">
   <title>Installieren aller erforderlichen Patches</title>
   <para>
    Um alle offiziell herausgegebenen Patches für Ihr System zu installieren, führen Sie Folgendes aus:
   </para>
<screen>sudo zypper patch</screen>
   <para>
    Alle verfügbaren Patches aus den auf Ihrem Computer konfigurierten Repositorys werden auf Relevanz für Ihre Installation überprüft. Sind sie relevant (und nicht als <literal>optional</literal> oder <literal>feature</literal> klassifiziert), werden sie sofort installiert. <phrase os="sles;sled">Beachten Sie, dass das offizielle Aktualisierungs-Repository erst verfügbar ist, nachdem Sie Ihre <phrase role="productname">openSUSE Leap</phrase>-Installation registriert haben.</phrase>
   </para>
   <para>
    Umfasst ein zu installierendes Patch Änderungen, die einen System-Reboot erfordern, werden Sie zuvor benachrichtigt.
   </para>
   <para>
    Mit dem einfachen Befehl <command>zypper patch</command> werden keine Patches aus Drittanbieter-Repositorys angewendet. Sollen auch die Drittanbieter-Repositorys aktualisiert werden, geben Sie die Befehlsoption <literal>with-update</literal> wie folgt an:
   </para>
<screen>sudo zypper patch --with update</screen>

   <para>
    Um auch optionale Patches zu installieren, verwenden Sie Folgendes:
   </para>
<screen>sudo zypper patch --with-optional</screen>
   <remark>
    The structure here is a bit unfortunate: We explain how to use the
    --cve/--bugzilla options in more detail below ("Listing Patches").
    However, the first bit people get is the very brief intro immediately below.
    Not sure whether to replicate all the information from "Listing Patches"
    here.
    - sknorr, 2016-04-25
   </remark>
   <para>
    Um alle Patches zu installieren, die zu einem bestimmten Bugzilla-Problem gehören, verwenden Sie Folgendes:
   </para>
<screen>sudo zypper patch --bugzilla=<replaceable>NUMBER</replaceable></screen>
   <para>
    Um alle Patches zu installieren, die zu einem bestimmten CVE-Datenbankeintrag gehören, verwenden Sie Folgendes:
   </para>
<screen>sudo zypper patch --cve=<replaceable>NUMBER</replaceable></screen>
   <para>
    Zum Installieren eines Sicherheits-Patches mit der CVE-Nummer <literal>CVE-2017-8890</literal> führen Sie beispielsweise Folgendes aus:
   </para>
<screen>sudo zypper patch --cve=CVE-2017-8890</screen>
   <para>
    Um nur Patches zu installieren, die Auswirkungen auf Zypper und die Paketverwaltung an sich haben, verwenden Sie Folgendes:
   </para>
<screen>sudo zypper patch --updatestack-only</screen>
   <para>
    Denken Sie daran, dass andere Befehlsoptionen, mit denen auch andere Repositorys aktualisiert werden sollten, außer Acht gelassen werden, wenn Sie die Befehlsoption <literal>updatestack-only</literal> angeben.
   </para>
  </sect3>
  <sect3 xml:id="sec.zypper.softup.listpatch">
   <title>Auflisten von Patches</title>
   <para>
    Um herauszufinden, ob Patches verfügbar sind, erlaubt Zypper das Anzeigen der folgenden Informationen:
   </para>
   <variablelist>
    <varlistentry>
     <term>Anzahl der erforderlichen Patches</term>
     <listitem>
      <para>
       Um die Anzahl der erforderlichen Patches aufzulisten (Patches, die für Ihr System gelten, aber noch nicht installiert sind), verwenden Sie <command>patch-check</command>:
      </para>
<screen>zypper patch-check
Loading repository data...
Reading installed packages...
5 patches needed (1 security patch)</screen>
      <para>
       Dieses Kommando kann mit der Option <option>--updatestack-only</option> kombiniert werden, um nur Patches aufzulisten, die Auswirkungen auf Zypper und die Paketverwaltung an sich haben.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Liste der erforderlichen Patches</term>
     <listitem>
      <para>
       Um alle erforderlichen Patches aufzulisten (Patches, die für Ihr System gelten, aber noch nicht installiert sind), verwenden Sie <command>list-patches</command>:
      </para>
<screen><?dbsuse-fo font-size="0.70em"?>

<prompt>tux &gt; </prompt>zypper list-patches
Loading repository data...
Reading installed packages...

Repository     | Name             | Kategorie | Schweregrad | Interaktiv ...
---------------+------------------+-----------+-------------+----------- ...
Hauptaktualisie| openSUSE-2017-21 | security  | low         | ---        ...
Hauptaktualisie| openSUSE-2017-22 | feature   | low         | ---        ...
[...]
8 anwendbare Patches gefunden:
2 Patches optional ('--with-optional' verwenden, um optionale Patches ...
6 Patches benötigt (1 Sicherheits-Patch)</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Liste aller Patches</term>
     <listitem>
      <para>
       Um alle für <phrase role="productname">openSUSE Leap</phrase> verfügbaren Patches aufzulisten, unabhängig davon, ob sie bereits installiert sind oder für Ihre Installation gelten, verwenden Sie <command>zypper patches</command>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Sie können auch Patches für bestimmte Probleme auflisten und installieren. Dazu geben Sie das Kommando <command>zypper list-patches</command> mit den folgenden Optionen ein:
   </para>
   <variablelist>
    <varlistentry>
     <term>Nach Bugzilla-Problemen</term>
     <listitem>
      <para>
       Um alle Patches mit Bezug zu Bugzilla-Problemen aufzulisten, verwenden Sie die Option <option>--bugzilla</option>.
      </para>
      <para>
       Um Patches für einen bestimmten Fehler aufzulisten, können Sie auch eine Fehlernummer angeben: <option>--bugzilla=<replaceable>NUMMER</replaceable></option>. Fügen Sie Kommas zwischen den Fehlernummern hinzu, um nach Patches mit Bezug zu mehreren Bugzilla-Problemen zu suchen, z. B.:
      </para>
<screen>zypper list-patches --bugzilla=972197,956917</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Nach CVE-Nummer</term>
     <listitem>
      <para>
       Um alle erforderlichen Patches aufzulisten, die Bezug zu einem Eintrag in der CVE-Datenbank (Common Vulnerabilities and Exposures) haben, verwenden Sie die Option <option>--cve</option>.
      </para>
      <para>
       Um Patches für einen bestimmten CVE-Datenbankeintrag aufzulisten, können Sie auch eine CVE-Nummer angeben: <option>--cve=<replaceable>NUMMER</replaceable></option>. Fügen Sie Kommas zwischen den CVE-Nummern hinzu, um nach Patches mit Bezug zu mehreren CVE-Datenbankeinträgen zu suchen, z. B.:
      </para>
<screen>zypper list-patches --bugzilla=CVE-2016-2315,CVE-2016-2324</screen>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Um alle Patches aufzulisten, unabhängig davon, ob sie erforderlich sind, verwenden Sie zusätzlich die Option <option>--all</option>. Um beispielsweise alle Patches aufzulisten, denen eine CVE-Nummer zugewiesen ist, verwenden Sie Folgendes:
   </para>
<screen><?dbsuse-fo font-size="0.70em"?>

<prompt>tux &gt; </prompt>zypper list-patches --all --cve
Eintrag | Nr.            | Patch              | Kategorie | Schweregrad ...
--------+----------------+--------------------+-----------+------------ ...
cve     | CVE-2017-10685 | openSUSE-2017-823  | security  | important   ...
cve     | CVE-2017-7507  | openSUSE-2017-824  | security  | moderate    ...
[...]</screen>
  </sect3>
  <sect3 xml:id="sec.zypper.softup.update">
   <title>Installieren neuer Paketversionen</title>
   <para>
    Wenn ein Repository neue Pakete enthält, aber keine Patches zur Verfügung stellt, zeigt <command>zypper patch</command> keinerlei Wirkung. Zum Aktualisieren aller installierten Pakete mit verfügbaren neuen Versionen (unter Beibehaltung der Systemintegrität) verwenden Sie Folgendes:
   </para>
<screen>sudo zypper update</screen>
   <para>
    Zum Aktualisieren einzelner Pakete geben Sie das Paket mit dem Aktualisierungs- oder Aktualisierungskommando an:
   </para>
<screen>sudo zypper update <replaceable>PACKAGE_NAME</replaceable>
sudo zypper install <replaceable>PACKAGE_NAME</replaceable></screen>
   <para>
    Mit dem Kommando kann eine Liste mit allen neuen installierbaren Paketen abgerufen werden.
   </para>
<screen>zypper list-updates</screen>
   <para>
    Dieses Kommando listet ausschließlich Pakete auf, die die folgenden Kriterien erfüllen:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      stammt von demselben Hersteller wie das bereits installierte Paket,
     </para>
    </listitem>
    <listitem>
     <para>
      umfasst Repositorys mit mindestens derselben Priorität wie das bereits installierte Paket,
     </para>
    </listitem>
    <listitem>
     <para>
      ist installierbar (alle Abhängigkeiten wurden erfüllt).
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Eine Liste <emphasis>aller</emphasis> neuen verfügbaren Pakete (unabhängig davon, ob diese Pakete installierbar sind oder nicht) erhalten Sie mit Folgendem:
   </para>
<screen>sudo zypper list-updates --all</screen>
   <para>
    Um festzustellen, warum ein neues Paket nicht installiert werden kann, verwenden Sie das Kommando <command>zypper install</command> oder <command>zypper update</command>, wie oben beschrieben.
   </para>
  </sect3>
  <sect3 xml:id="sec.zypper.softup.orphaned">
   <title>Ermitteln verwaister Pakete</title>
   <para>
    Immer, wenn Sie ein Repository aus Zypper entfernen oder Ihr System aktualisieren, erhalten manche Pakete den Status <quote>Verwaist</quote>. Diese <emphasis>verwaisten</emphasis> Pakete gehören zu keinem aktiven Repository mehr. Mit dem folgenden Kommando erhalten Sie eine entsprechende Liste:
   </para>
<screen>sudo zypper packages --orphaned</screen>
   <para>
    Anhand dieser Liste können Sie entscheiden, ob ein Paket noch benötigt wird oder sicher entfernt werden kann.
   </para>
  </sect3>

 </sect2>

 <sect2 xml:id="sec.zypper.ps">
  <title>Ermitteln von Prozessen und Diensten, die gelöschte Dateien verwenden</title>
  <para>
   Beim Anwenden von Patches, beim Aktualisieren oder beim Entfernen von Paketen können auf dem System Prozesse aktiv sein, die weiterhin Dateien verwenden, die durch die Aktualisierung oder das Entfernen gelöscht wurden. Verwenden Sie <command>zypper ps</command>, um Prozesse aufzulisten, die gelöschte Dateien verwenden. Falls der Prozess zu einem bekannten Dienst gehört, wird der Dienstname aufgelistet und der Dienst kann leicht neu gestartet werden. Standardmäßig zeigt <command>zypper ps</command> eine Tabelle an:
  </para>
<screen><?dbsuse-fo font-size="0.70em"
?>

<prompt>tux &gt; </prompt>zypper ps
PID   | PPID | UID | User  | Command      | Service      | Files
------+------+-----+-------+--------------+--------------+-------------------
814   | 1    | 481 | avahi | avahi-daemon | avahi-daemon | /lib64/ld-2.19.s-&gt;
      |      |     |       |              |              | /lib64/libdl-2.1-&gt;
      |      |     |       |              |              | /lib64/libpthrea-&gt;
      |      |     |       |              |              | /lib64/libc-2.19-&gt;
[...]</screen>
  <simplelist>
   <member><emphasis role="bold">PID</emphasis>: ID des Prozesses </member>
   <member><emphasis role="bold"> PPID</emphasis>: ID des übergeordneten Prozesses </member>
   <member><emphasis role="bold"> UID</emphasis>: ID des Benutzers, der den Prozess ausführt </member>
   <member><emphasis role="bold"> Login</emphasis>: Anmeldename des Benutzers, der den Prozess ausführt </member>
   <member><emphasis role="bold"> Command</emphasis>: Kommando, das zum Ausführen des Prozesses verwendet wird </member>
   <member><emphasis role="bold"> Service</emphasis>: Dienstname (nur, wenn das Kommando einem Systemdienst zugewiesen ist) </member>
   <member><emphasis role="bold"> Files</emphasis>: Liste der gelöschten Dateien </member>
  </simplelist>
  <para>
   Das Ausgabeformat von <command>zypper ps</command> kann wie folgt gesteuert werden:
  </para>
  <variablelist>
   <varlistentry>
    <term><command>zypper ps</command><option>-s</option>
    </term>
    <listitem>
     <para>
      Kurze Tabelle ohne gelöschte Dateien erstellen.
     </para>
<screen><?dbsuse-fo font-size="0.70em"
?>

<prompt>tux &gt; </prompt>zypper ps -s
PID   | PPID | UID  | User    | Command      | Service
------+------+------+---------+--------------+--------------
814   | 1    | 481  | avahi   | avahi-daemon | avahi-daemon
817   | 1    | 0    | root    | irqbalance   | irqbalance
1567  | 1    | 0    | root    | sshd         | sshd
1761  | 1    | 0    | root    | master       | postfix
1764  | 1761 | 51   | postfix | pickup       | postfix
1765  | 1761 | 51   | postfix | qmgr         | postfix
2031  | 2027 | 1000 | tux     | bash         |</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>zypper ps</command><option>-ss</option>
    </term>
    <listitem>
     <para>
      Nur Prozesse anzeigen, die einem Systemdienst zugewiesen sind.
     </para>
<screen>PID   | PPID | UID  | User    | Command      | Service
------+------+------+---------+--------------+--------------
814   | 1    | 481  | avahi   | avahi-daemon | avahi-daemon
817   | 1    | 0    | root    | irqbalance   | irqbalance
1567  | 1    | 0    | root    | sshd         | sshd
1761  | 1    | 0    | root    | master       | postfix
1764  | 1761 | 51   | postfix | pickup       | postfix
1765  | 1761 | 51   | postfix | qmgr         | postfix</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>zypper ps</command><option>-sss</option>
    </term>
    <listitem>
     <para>
      Nur Systemdienste anzeigen, die gelöschte Dateien verwenden.
     </para>
<screen>avahi-daemon
irqbalance
postfix
sshd</screen>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>zypper ps</command><option>--print "systemctl status %s"</option>
    </term>
    <listitem>
     <para>
      Kommandos zum Abrufen von Statusinformationen für Dienste anzeigen, die einen Neustart erfordern könnten.
     </para>
<screen>systemctl status avahi-daemon
systemctl status irqbalance
systemctl status postfix
systemctl status sshd</screen>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   Weitere Informationen zum Handhaben von Diensten finden Sie unter <link xlink:href="https://doc.opensuse.org/documentation/leap/reference/html/book.opensuse.reference/cha.systemd.html">The systemd Daemon</link>.
  </para>
 </sect2>





 <sect2 xml:id="sec.zypper.instrepo">
  <title>Verwalten von Repositorys mit Zypper</title>
  <para>
   Sämtliche Installations- und Patch-Kommandos von Zypper sind von der Liste der bekannten Repositorys abhängig. Um alle dem System bekannten Repositorys aufzulisten, verwenden Sie das Kommando:
  </para>
<screen>zypper repos</screen>
  <para>
   Das Ergebnis ist der folgenden Ausgabe ähnlich:
  </para>
  <example xml:id="ex.zypper.repos">
   <title>Zypper – Liste der bekannten Repositorys</title>
<screen><?dbsuse-fo font-size="0.60em"
?>

<prompt>tux &gt; </prompt>zypper repos
Die Repository-Prioritäten sind ohne Effekt. Alle aktivierten Repositorys ...

#  | Alias            | Name                   | Aktiviert | GPG-... | Aktu...
---+------------------+------------------------+-----------+---------+--------
 1 | download.open... | Haupt-Repository (OSS) | Ja        | (r ) Ja | Ja
 2 | download.open... | Hauptaktualisierun...  | Ja        | (r ) Ja | Ja
 3 | openSUSE-Leap... | openSUSE-Leap-42.3-0   | Ja        | (r ) Ja | Ja
 [...]
11 | repo-debug       | openSUSE-Leap-42.3-... | Nein      | ----    | ----

</screen>
  </example>
  <para>
   Bei der Angabe von Repositorys kann in verschiedenen Kommandos ein Alias, URI oder eine Repository-Nummber aus der Ausgabe des Kommandos <command>zypper repos</command> verwendet werden. Ein Repository-Alias ist eine Kurzform des Repository-Namens, der in Repository-Kommandos verwendet wird. Beachten Sie dabei, dass sich die Repository-Nummern nach dem Bearbeiten der Repository-Liste ändern können. Der Alias ändert sich nie von alleine.
  </para>
  <para>
   Standardmäßig werden Details wie URI oder Priorität des Repositorys nicht angezeigt. Verwenden Sie das folgende Kommando, um alle Details aufzulisten:
  </para>
<screen>zypper repos -d</screen>
  <sect3 xml:id="sec.zypper.instrepo.add">
   <title>Hinzufügen von Repositorys</title>
   <para>
    Zum Hinzufügen eines Repository, führen Sie Folgendes aus:
   </para>
<screen>sudo zypper addrepo <replaceable>URI</replaceable> <replaceable>ALIAS</replaceable></screen>
   <para>
    <replaceable>URI</replaceable> kann ein Internet-Repository, eine Netzwerkressource, ein Verzeichnis oder eine CD oder DVD sein (für Details siehe <link xlink:href="http://en.opensuse.org/openSUSE:Libzypp_URIs"/>). Der <replaceable>ALIAS</replaceable> ist ein Kürzel und eine eindeutige Kennung für das Repository. Sie können ihn frei wählen, vorausgesetzt, er ist eindeutig. Zypper gibt eine Warnung aus, wenn Sie einen Alias angeben, der bereits verwendet wird.
   </para>
  </sect3>
  <sect3 xml:id="sec.zypper.instrepo.refresh">
   <title>Aktualisieren von Repositorys</title>
   <para>
    Mit <command>Zypper</command> können Sie Änderungen in Paketen aus konfigurierten Repositorys abrufen. Rufen Sie die Änderungen wie folgt ab:
   </para>
<screen>sudo zypper refresh</screen>
   <note>
    <title>Standardverhalten von <command>Zypper</command></title>
    <para>
     Standardmäßig führen bestimmte Befehle <command>refresh</command> automatisch aus, sodass dieser Befehl nicht explizit aufgerufen werden muss.
    </para>
   </note>
   <para>
    Mit der Option <literal>--plus-content</literal> für <command>refresh</command> können Sie Änderungen auch in deaktivierten Repositorys abrufen:
   </para>
<screen>sudo zypper --plus-content refresh</screen>
   <para>
    Die Option ruft Änderungen in Repositorys ab und behält dabei den Zustand der deaktivierten Repositorys unverändert bei – also deaktiviert.
   </para>
  </sect3>
  <sect3 xml:id="sec.zypper.instrepo.rm">
   <title>Entfernen von Repositorys</title>
   <para>
    Wenn ein Repository von der Liste entfernt werden soll, verwenden Sie das Kommando <command>zypper removerepo</command> zusammen mit dem Alias oder der Nummer des zu löschenden Repositorys. Um beispielsweise das Repository <literal>repo-debug</literal> aus <xref linkend="ex.zypper.repos"/> zu entfernen, verwenden Sie eines der folgenden Kommandos:
   </para>
<screen>sudo zypper removerepo 11
sudo zypper removerepo "repo-debug"</screen>
  </sect3>
  <sect3 xml:id="sec.zypper.instrepo.mofify">
   <title>Ändern von Repositorys</title>
   <para>
    Aktivieren oder deaktivieren von Repositorys mit <command>zypper modifyrepo</command>. Mit diesem Kommando können Sie auch die Eigenschaften des Repositorys (z. B. Aktualisierungsverhalten, Name oder Priorität) ändern. Das folgende Kommando aktiviert das Repository mit dem Namen <literal>updates</literal>, aktiviert die automatische Aktualisierung und stellt seine Priorität auf 20 ein:
   </para>
<screen>sudo zypper modifyrepo -er -p 20 'download.opensuse.org-oss_1'</screen>
   <para>
    Das Ändern von Repositorys ist nicht auf ein einziges Repository beschränkt – Sie können auch Gruppen bearbeiten:
   </para>
   <simplelist>
    <member><option>-a</option>: alle Repositorys</member>
    <member><option> -l</option>: lokale Repositorys</member>
    <member><option> -t</option>: entfernte Repositorys</member>
    <member><option> -m <replaceable>TYPE</replaceable></option>: Repositorys eines bestimmten Typs (wobei <replaceable>TYPE</replaceable> eines der folgenden sein kann: <literal>http</literal>, <literal>https</literal>, <literal>ftp</literal>, <literal>cd</literal>, <literal>dvd</literal>, <literal>dir</literal>, <literal>file</literal>, <literal>cifs</literal>, <literal>smb</literal>, <literal>nfs</literal>, <literal>hd</literal>, <literal>iso</literal>) </member>
   </simplelist>
   <para>
    Zum Umbenennen eines Repository-Alias verwenden Sie das Kommando <literal>renamerepo</literal>. Das folgende Beispiel ändert den Alias von <literal>Mozilla Firefox</literal> in <literal>firefox</literal>:
   </para>
<screen>sudo zypper renamerepo 'Mozilla Firefox' firefox</screen>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.zypper.query">
  <title>Abfragen von Repositorys und Paketen mit Zypper</title>
  <para>
   Zypper bietet zahlreiche Methoden zur Abfrage von Repositorys oder Paketen. Verwenden Sie die folgenden Kommandos, um eine Liste aller verfügbaren Produkte, Muster, Pakete oder Patches zu erhalten:
  </para>
<screen>zypper products
zypper patterns
zypper packages
zypper patches</screen>
  <para>
   Zur Abfrage aller Repositorys auf bestimmte Pakete verwenden Sie <literal>search</literal>. Mit dem Befehl <literal>info</literal> erhalten Sie Informationen zu bestimmten Paketen.
  </para>
  <sect3 xml:id="zypper.search.usage">
   <title>Verwendung von <command>zypper search</command></title>
   <para>
    Der Befehl <command>zypper search</command> lässt sich auf Paketnamen oder optional auf Paketzusammenfassungen und -beschreibungen anwenden. Zeichenketten, die mit <literal>/</literal> umschlossen sind, werden als reguläre Ausdrücke behandelt. Standardmäßig unterscheidet der Suchvorgang keine Groß- und Kleinschreibung.
   </para>
   <variablelist>
    <varlistentry>
     <term>Einfache Suche nach einem Paketnamen mit dem Namensbestandteil <literal>fire</literal>
     </term>
     <listitem>
<screen>zypper search "fire"</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Einfache Suche nach dem genauen Paketnamen <literal>MozillaFirefox</literal>
     </term>
     <listitem>
<screen>zypper search --match-exact "MozillaFirefox"</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Suche auf Paketbeschreibungen und -zusammenfassungen ausdehnen</term>
     <listitem>
<screen>zypper search -d fire</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Nur Pakete anzeigen, die nicht bereits installiert sind</term>
     <listitem>
<screen>zypper search -u fire</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Pakete anzeigen, die die Zeichenkette <literal>fir</literal> enthalten, nicht gefolgt von <literal>e</literal>
     </term>
     <listitem>
<screen>zypper se "/fir[^e]/"</screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
  <sect3 xml:id="zypper.what-provides.usage">
   <title>Verwendung von <command>zypper what-provides</command></title>
   <para>
    Verwenden Sie zur Suche nach Paketen, die eine spezielle Funktion bieten, das Kommando <literal>what-provides</literal>. Wenn Sie beispielsweise wissen möchten, welches Paket das Perl-Modul <literal>SVN::Core</literal> bereitstellt, verwenden Sie das folgende Kommando:
   </para>
<screen>zypper what-provides 'perl(SVN::Core)'</screen>
   <para>
    <literal>what-provides<replaceable> -PAKETNAME</replaceable></literal> ähnelt dem Befehl <command>rpm -q --whatprovides</command>
    <replaceable> PAKETNAME</replaceable>; RPM kann jedoch nur Abfragen für die RPM-Datenbank (Datenbank mit allen installierten Paketen) durchführen. zypper informiert Sie auf der anderen Seite über Anbieter der Möglichkeit von einem beliebigen Repository, nicht nur von denen, die installiert sind.
   </para>
  </sect3>
  <sect3 xml:id="zypper.info.usage">
   <title>Verwendung von <command>zypper info</command></title>
   <para>
    Um einzelne Pakete abzufragen, verwenden Sie <command>info</command> mit einem exakten Paketnamen als Argument. Damit werden detaillierte Informationen zu einem Paket angezeigt. Falls der Paketname nicht mit einem Paketnamen aus den Repositorys übereinstimmt, gibt der Befehl ausführliche Informationen zu den fehlenden Pakettreffern aus. Wenn Sie einen bestimmten Typ festlegen (mit der Option <literal>-t</literal>) und dieser Typ nicht vorhanden ist, gibt der Befehl andere verfügbare Treffer aus, jedoch ohne ausführliche Informationen.
   </para>
   <para>
    Wenn Sie ein Quellpaket angeben, zeigt der Befehl die aus dem Quellpaket aufgebauten Binärpakete. Wenn Sie ein Binärpaket angeben, gibt der Befehl die Quellpakete aus, aus denen das Binärpaket aufgebaut wurde.
   </para>
   <para>
    Um auch die Elemente abzurufen, die für das Paket erforderlich/empfohlen sind, verwenden Sie die Optionen <option>--requires</option> und <option>--recommends</option>:
   </para>
<screen>zypper info --requires MozillaFirefox</screen>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.zypper.configure">
  <title>Konfigurieren von Zypper</title>
  <para>
   Zypper ist nunmehr mit einer Konfigurationsdatei ausgestattet, in der Sie die Arbeitsweise von Zypper dauerhaft verändern können (wahlweise systemweit oder benutzerspezifisch). Für systemweite Änderungen bearbeiten Sie <filename>/etc/zypp/zypper.conf</filename>. Für benutzerspezifische Änderungen bearbeiten Sie <filename>~/.zypper.conf</filename>. Falls <filename>~/.zypper.conf</filename> noch nicht vorhanden ist, können Sie <filename>/etc/zypp/zypper.conf</filename> als Schablone verwenden. Kopieren Sie diese Datei in <filename>~/.zypper.conf</filename>, und passen Sie sie nach Ihren Anforderungen an. Weitere Informationen zu den verfügbaren Optionen finden Sie in den Kommentaren in der Datei.
  </para>
 </sect2>

 <sect2 xml:id="sec.zypper.trouble">
  <title>Fehlersuche</title>
  <para>
   Falls Probleme beim Zugriff auf Pakete von konfigurierten Repositorys auftreten (beispielsweise kann Zypper ein bestimmtes Paket nicht finden, obwohl Sie wissen, dass sich dieses Paket in einem der Repositorys befindet), kann schon das Aktualisieren der Repositorys Abhilfe bringen:
  </para>
<screen>sudo zypper refresh</screen>
  <para>
   Falls das nicht wirkt, probieren Sie Folgendes:
  </para>
<screen>sudo zypper refresh -fdb</screen>
  <para>
   Damit wird eine vollständige Aktualisierung und ein kompletter Neuaufbau der Datenbank erzwungen, außerdem ein erzwungener Download von Roh-Metadaten.
  </para>
 </sect2>

 <sect2 xml:id="sec.zypper.rollback">
  <title>Zypper-Rollback-Funktion im Btrfs-Dateisystem</title>
  <para>
   Wenn das Btrfs-Dateisystem in der Stammpartition verwendet wird und
   <command>Snapper</command> installiert ist, ruft Zypper automatisch
   <command>Snapper</command> (über ein von <command>Snapper</command>
   installiertes Skript) auf, wenn an das Dateisystem Änderungen übermittelt
   werden, um entsprechende Dateisystem-Snapshots zu erstellen. Diese Snapshots
   können verwendet werden, um alle durch Zypper vorgenommenen Änderungen
   rückgängig zu machen. Weitere Informationen finden Sie in <link xlink:href="https://doc.opensuse.org/documentation/leap/reference/html/book.opensuse.reference/cha.snapper.html">System Recovery and Snapshot Management with Snapper</link>.
  </para>
 </sect2>

 <sect2 xml:id="sec.zypper.more">
  <title>Weiterführende Informationen</title>
  <para>
   Wenn Sie weitere Informationen zur Verwaltung von Software benötigen, geben Sie den Befehl <command>zypper help</command> in die Befehlszeile ein oder rufen Sie die man-Seite <command>zypper(8)</command> auf. Eine ausführliche Kommandoreferenz mit <literal>Tricks</literal> zu den wichtigsten Kommandos sowie Informationen zur Verwendung von Zypper in Skripten und Anwendungen finden Sie unter <link xlink:href="http://en.opensuse.org/SDB:Zypper_usage"/>. Eine Liste der Software-Änderungen in der aktuellen <phrase role="productname">openSUSE Leap</phrase>-Version finden Sie unter <link xlink:href="http://en.opensuse.org/openSUSE:Zypper versions"/>.
  </para>
 </sect2>
</sect1>
