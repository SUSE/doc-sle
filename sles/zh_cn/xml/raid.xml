<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="raid.xml" version="5.0" xml:id="sec.yast2.system.raid">
 <title>使用 YaST 配置软 RAID</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info><indexterm>

 <primary>YaST</primary>

 <secondary>RAID</secondary></indexterm><indexterm>

 <primary>RAID</primary>

 <secondary>YaST</secondary></indexterm><indexterm>

 <primary>软 RAID</primary>

 <see>RAID</see></indexterm>

 <para>
  本节介绍创建和配置各种类型的 RAID 所需执行的操作。<phrase os="sles">如果您需要有关 RAID 的背景信息，请参见<xref linkend="sec.raid.intro"/></phrase>。
 </para>









 <sect2 xml:id="sec.yast2.system.raid.conf">
  <title>使用 YaST 配置软 RAID</title>
  <para>
   YaST <guimenu>RAID</guimenu> 配置可以通过 YaST 专家分区程序完成，如<xref linkend="sec.yast2.i_y2_part_expert"/>中所述。此分区工具用于编辑和删除现有分区并创建要用于软 RAID 的新分区：
  </para>
  <procedure>
   <step>
    <para>
     从<guimenu>硬盘</guimenu>中选择一个硬盘。
    </para>
   </step>
   <step>
    <para>
     更改到<guimenu>分区</guimenu>选项卡。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>添加</guimenu>并输入此磁盘上需要的 raid 分区大小。
    </para>
   </step>
   <step>
    <para>
     使用<guimenu>不格式化分区</guimenu>并将<guimenu>文件系统 ID</guimenu> 更改为 <guimenu>0xFD Linux RAID</guimenu>。不要装入该分区。
    </para>
   </step>
   <step>
    <para>
     重复此过程，直到您在可用磁盘上定义了所有所需物理卷。
    </para>
   </step>
  </procedure>
  <para>
   对于 RAID 0 和 RAID 1，至少需要两个分区，而对于 RAID 1，通常只需要两个分区。如果使用 RAID 5，则至少需要三个分区；RAID 6 和 RAID 10 至少需要四个分区。建议仅使用大小相同的分区。RAID 分区应位于不同硬盘上，以降低由于某块硬盘（RAID 1 和 5）出现问题而导致数据丢失的风险，同时还可以优化 RAID 0 的性能。创建用于 RAID 的所有分区之后，单击 <menuchoice><guimenu>RAID</guimenu><guimenu>添加 RAID</guimenu></menuchoice> 以启动 RAID 配置。
  </para>
  <para>
   在下一个对话框中选择 RAID 级别 0、1、5、6 和 10。然后，选择应由 RAID 系统使用的，类型为 <quote>Linux RAID</quote> 或 <quote>Linux native</quote> 的所有分区。未显示交换分区或 DOS 分区。
  </para>
  <tip>
   <title>对磁盘进行分类</title>
   <para>
    对于磁盘添加顺序对其而言比较重要的 RAID 类型，您可以使用 A 到 E 的任何一个字母来标记单个磁盘。单击<guimenu>分类</guimenu>按钮，选择磁盘，并单击其中一个<guimenu>类 X</guimenu> 按钮（X 表示您想指派给磁盘的字母）。以这种方式指派所有可用的 RAID 磁盘，然后单击<guimenu>确定</guimenu>进行确认。您可以使用<guimenu>排序</guimenu>或<guimenu>交错</guimenu>按钮轻松地对已分类的磁盘进行排序，或者使用<guimenu>模式文件</guimenu>从某个文本文件中添加排序模式。
   </para>
  </tip>
  <figure xml:id="fig.yast2.system.raid.conf">
   <title>RAID 分区</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_raid4.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_raid4.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   要将以前未指派的分区添加到所选的 RAID 卷中，请先单击该分区，然后单击<guimenu>添加</guimenu>。指派所有为 RAID 保留的分区。否则，分区中的空间仍处于未使用状态。指派所有分区之后，单击<guimenu>下一步</guimenu>选择可用的 <guimenu>RAID 选项</guimenu>。
  </para>
  <para>
   在最后一步中，设置要使用的文件系统、RAID 卷的加密方法和安装点。单击<guimenu>完成</guimenu>完成配置后，请查看 <filename>/dev/md0</filename> 设备和专家分区工具中指示为 <emphasis>RAID</emphasis> 的其他设备。
  </para>
 </sect2>

 <sect2 xml:id="sec.yast2.system.raid.trouble">
  <title>查错</title>
  <para>
   查看文件 <filename>/proc/mdstat</filename> 以确定 RAID 分区是否受损。如果系统出现故障，请关闭 Linux 系统并用以同样方式分区的新硬盘替换出现问题的硬盘。然后重启动您的系统并输入命令 <command>mdadm /dev/mdX --add /dev/sdX</command>。将“X”替换为您的特定设备标识符。此命令会自动将该硬盘集成到 RAID 系统并进行完全重构建。
  </para>
  <para>
   请注意，尽管可以在重构建期间访问所有数据，但在 RAID 完全重构建之前，仍然可能遇到一些性能问题。
  </para>
 </sect2>

 <sect2 xml:id="sec.yast2.system.raid.information">
  <title>更多信息</title>
  <para>
   位于下列位置的 HOWTO 文档提供了软 RAID 的配置说明和详细信息：
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <filename>/usr/share/doc/packages/mdadm/Software-RAID.HOWTO.html</filename>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="http://raid.wiki.kernel.org"/>
    </para>
   </listitem>
  </itemizedlist>
  <para>
   此外还提供有 Linux RAID 邮件列表，例如 <link xlink:href="http://marc.info/?l=linux-raid"/>。
  </para>
 </sect2>
</sect1>
