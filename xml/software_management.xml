<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>

<chapter version="5.0" role="General"
  xml:id="sec-sec-software-management"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Software management</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

    <sect1 xml:id="sec-sec-prot-general-remove-packs">
   <title>Removing unnecessary software packages (RPMs)</title>

   <para>
    A very important step in securing a Linux system is to determine the
    primary function(s) or role(s) of the Linux server. Otherwise, it can be
    difficult to understand what needs to be secured and securing these Linux
    systems can prove ineffective. Therefore, it is critical to look at the
    default list of software packages and remove any unnecessary packages or
    packages that do not comply with your defined security policies.
   </para>

   <para>
    Generally, an RPM software package consists of the following:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      The package's meta data that is written to the RPM database upon
      installation.
     </para>
    </listitem>
    <listitem>
     <para>
      The package's files and directories.
     </para>
    </listitem>
    <listitem>
     <para>
      Scripts that are being executed before and after installation and removal.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Packages generally do not impose any security risk to
    the system <emphasis>unless</emphasis> they contain:
   </para>
   <orderedlist spacing="normal">
    <listitem>
     <para>
      setuid or setgid bits on any of the installed files
     </para>
    </listitem>
    <listitem>
     <para>
      group- or world-writable files or directories
     </para>
    </listitem>
    <listitem>
     <para>
      a service that is activated upon installation, or by default
     </para>
    </listitem>
   </orderedlist>
   <para>
    Assuming that none of the three conditions above apply, a package is merely
    a collection of files. Neither installation nor uninstallation of such
    packages has any influence on the security value of the system.
   </para>

   <para>
    Nevertheless, it is useful to restrict the installed packages in your system
    to a minimum. Doing this will result in fewer packages that require updates and will
    simplify maintenance efforts when security alerts and patches are
    released. It is a best practice not to install, among others, development
    packages or desktop software packages (for example, an X Server) on
    production servers. If you do not need them, you should also not install,
    for example, the Apache Web server or Samba file sharing server.
   </para>

   <important>
    <title>Requirements of third-party installers</title>
    <para>
     Many third-party vendors like Oracle and IBM require a desktop
     environment and development libraries to run installers. To prevent this
     from having an impact on the security of their production servers, many
     organizations work around this by creating a silent installation
     (response file) in a development lab.
    </para>
   </important>

   <para>
    Also, other packages like FTP and Telnet daemons should not be installed
    unless there is a justified business reason for it.
    <command>ssh</command>, <command>scp</command> or <command>sftp</command>
    should be used as replacements.
   </para>

   <para>
    One of the first action items should be to create a Linux image that
    <emphasis>only</emphasis> contains RPMs needed by the system and
    applications, and those needed for maintenance and troubleshooting
    purposes. A good approach is to start with a minimum list of RPMs and then
    add packages as needed.
   </para>

   <tip>
    <title>&slsa; &minvm;</title>
    <para>
     The &sls; download page offers pre-configured and ready-to-run &slsa; &minvm; virtual machine images. &slsa; &minvm; has a small footprint and can be customized to fit specific needs of a system developer. &minvm; is designed for use in virtual machines and for virtual software appliance development. The key benefits of &slsa; &minvm; are efficiency and simplified management. More information about &minvm; is available in the dedicated guide. If &slsa; &minvm; does not meet your requirements, consider the minimal installation pattern.
    </para>
   </tip>

   <para>
    To generate a list of all installed packages, use the following command:
   </para>

<screen>&prompt.root;zypper packages -i</screen>

   <para>
    To retrieve details about a particular package, run:
   </para>

<screen>&prompt.root;zypper info <replaceable>PACKAGE_NAME</replaceable></screen>

   <para>
    To check for and report potential conflicts and dependencies when deleting
    a package, run:
   </para>

<screen>&prompt.root;zypper rm -D <replaceable>PACKAGE_NAME</replaceable></screen>

   <para>
    This can be very useful, as running the removal command without a test can
    often yield a lot of complaints and require manual recursive dependency
    hunting.
   </para>

   <important>
    <title>Removal of essential system packages</title>
    <para>
     When removing packages, be careful not to remove any essential system
     packages. This could put your system into a broken state in which it can
     no longer be booted or repaired. If you are uncertain about this, then it
     is best to do a complete backup of your system before you start to
     remove any packages.
    </para>
   </important>

   <para>
    For the final removal of one or more packages use the following
    <command>zypper</command> command with the added <quote>-u</quote>
    switch, which removes any unused dependencies:
   </para>

   <screen>&prompt.root;zypper rm -u <replaceable>PACKAGE_NAME</replaceable></screen>

  </sect1>
  <sect1 xml:id="sec-sec-prot-general-patching">
   <title>Patching Linux systems</title>

   <para>
    Building an infrastructure for patch management is another very important
    part of a proactive and secure Linux production environment.
   </para>

   <para>
    It is recommended to have a written security policy and procedure to
    handle Linux security updates and issues. For example, a security policy
    should detail the time frame for assessment, testing, and roll out of
    patches. Network related security vulnerabilities should get the highest
    priority and should be addressed immediately within a short time frame.
    The assessment phase should occur within a testing lab, and initial
    rollout should occur on development systems first.
   </para>

   <para>
    A separate security log file should contain details on which Linux
    security announcements have been received, which patches have been
    researched and assessed, when patches were applied, and so on.
   </para>

   <para>
    &suse; releases patches in three categories: security, recommended,
    and optional. There are a few options that can be used to keep systems
    patched, up to date, and secure. Each system can register and then retrieve
    updates via the &suse; Update Web site using the included &yast;
    tool&mdash;&yast; Online Update. &suse; has also created the &rmtool;
    (&rmt;), an efficient way to maintain a local repository of
    available/released patches/updates/fixes that systems can then pull from
    (reducing Internet traffic). &suse; also offers &susemgr; for the
    maintenance, patching, reporting, and centralized management of Linux
    systems, not only &suse;, but other distributions as well.
   </para>

   <sect2 xml:id="sec-sec-prot-general-patching-you">
    <title>&yast; Online Update</title>
    <para>
     On a per-server basis, installation of important updates and improvements
     is possible using the &yast; Online Update tool. Current updates for the
     &sle; family are available from the product specific update catalogs
     containing patches. Installation of updates and improvements is
     accomplished using &yast; and selecting <guimenu>Online Update</guimenu>
     in the <guimenu>Software</guimenu> group. All new patches (except the
     optional ones) that are currently available for your system will already
     be marked for installation. Clicking <guimenu>Accept</guimenu> will then
     automatically install these patches.
    </para>
   </sect2>

   <sect2 xml:id="sec-sec-prot-general-patching-auto">
    <title>Automatic Online Update</title>
    <para>
     &yast; also offers the possibility to set up an automatic update. Select
     <menuchoice> <guimenu>Software</guimenu> <guimenu> Automatic Online
     Update</guimenu></menuchoice>. Configure a Daily or a Weekly update. Some
     patches, such as kernel updates, require user interaction, which would
     cause the automatic update procedure to stop. Check <guimenu>Skip
     Interactive Patches</guimenu> for the update procedure to proceed
     automatically.
    </para>
    <para>
     In this case, run a manual Online Update from time to install patches
     that require interaction.
    </para>
    <para>
     When <guimenu>Only Download Patches</guimenu> is checked, the patches are
     downloaded at the specified time but not installed. They must be
     installed manually using <command>rpm</command>or
     <command>zypper</command>.
    </para>
   </sect2>

   <sect2 xml:id="sec-sec-prot-general-patching-smt">
    <title>&rmtool;&mdash;&rmt;</title>
    <para>
     The &rmtool; for &sle; goes one step further than the Online Update
     process by establishing a proxy system with repository and registration
     targets. This helps customers centrally manage software updates within
     the firewall on a per-system basis, while maintaining their corporate
     security policies and regulatory compliance.
    </para>
    <para>
     The &rmt;
     (<link xlink:href="https://documentation.suse.com/sles/15-SP4/html/SLES-all/book-rmt.html"/>)
     is integrated with &scc; (<link xlink:href="&sccurl;"/>) and provides a
     repository and registration target that is synchronized with it. This can
     be very helpful in tracking entitlements in large deployments. The &rmt;
     maintains all the capabilities of &scc;, while allowing a more secure
     centralized deployment. It is included with every &sle; subscription and
     is therefore fully supported.
    </para>
    <para>
     The &rmt; provides an alternative to the default configuration, which
     requires opening the firewall to outbound connections for each device to
     receive updates. That requirement often violates corporate security
     policies and can be seen as a threat to regulatory compliance by some
     organizations. Through its integration with &scc;, the &rmt; ensures that
     each device can receive its appropriate updates without the need to open
     the firewall, and without any redundant bandwidth requirements.
    </para>
    <para>
     The &rmt; also enables customers to locally track their &sle; devices
     (that is, servers, desktops, or Point of Service terminals) throughout
     their enterprise. Now they can easily determine how many entitlements are
     in need of renewal at the end of a billing cycle without having to
     physically walk through the data center to manually update spreadsheets.
    </para>
    <para>
     The &rmt; informs the &sle; devices of any available software updates.
     Each device then obtains the required software updates from the &rmt;.
     The introduction of the &rmt; improves the interaction among &sle;
     devices within the network and simplifies how they receive their system
     updates. The &rmt; enables an infrastructure for several hundred &sle;
     devices per instance of each installation (depending on the specific
     usage profile). This offers more accurate and efficient server tracking.
    </para>
    <para>
     In a nutshell, the &rmtool; for &sle; provides customers with:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Assurance of firewall and regulatory compliance
      </para>
     </listitem>
     <listitem>
      <para>
       Reduced bandwidth usage during software updates
      </para>
     </listitem>
     <listitem>
      <para>
       Full support under active subscription from &suse;
      </para>
     </listitem>
     <listitem>
      <para>
       Maintenance of existing customer interface with &scc;
      </para>
     </listitem>
     <listitem>
      <para>
       Accurate server entitlement tracking and effective measurement of
       subscription usage
      </para>
     </listitem>
     <listitem>
      <para>
       Automated process to easily tally entitlement totals (no more
       spreadsheets!)
      </para>
     </listitem>
     <listitem>
      <para>
       Simple installation process that automatically synchronizes server
       entitlement with &scc;
      </para>
     </listitem>
    </itemizedlist>
   </sect2>

   <sect2 xml:id="sec-sec-prot-general-patching-suma">
    <title>&susemgr;</title>
    <para>
     &susemgr; automates Linux server management, allowing you to provision
     and maintain your servers faster and more accurately. It monitors the
     health of each Linux server from a single console so you can identify
     server performance issues before they impact your business. And it lets
     you comprehensively manage your Linux servers across physical, virtual,
     and cloud environments while improving data center efficiency. &susemgr;
     delivers complete lifecycle management for Linux:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Asset management
      </para>
     </listitem>
     <listitem>
      <para>
       Provisioning
      </para>
     </listitem>
     <listitem>
      <para>
       Package management
      </para>
     </listitem>
     <listitem>
      <para>
       Patch management
      </para>
     </listitem>
     <listitem>
      <para>
       Configuration management
      </para>
     </listitem>
     <listitem>
      <para>
       Redeployment
      </para>
     </listitem>
    </itemizedlist>
    <para>
     For more information on &susemgr;, refer to
     <link
     xlink:href="https://www.suse.com/products/suse-manager/"/>.
    </para>
   </sect2>
  </sect1>
</chapter>
