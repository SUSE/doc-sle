<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<!-- Converted by suse-upgrade version 1.1 -->
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="cha.update">
 <title>Systemupgrade und Änderungen</title>
 <info>
  <abstract>
   <para>
    Sie können eine bestehende &productname;-Installation aktualisieren,
    ohne den Rechner komplett neu installieren zu müssen. Grundsätzlich
    unterscheidet man beim Upgrade zwischen dem <emphasis>Aktualisieren
    einzelner Pakete</emphasis> und dem <emphasis>Aktualisieren des ganzen
    Systems</emphasis>. <xref linkend="cha.y2.sw"/> und
    <xref linkend="cha.onlineupdate.you"/> zeigen, wie Sie ein Update einzelner
    Pakete durchführen. Die folgenden Abschnitte
    (<xref linkend="sec.upgrade.yast"/> und
    <xref linkend="sec.update.zypper"/>) erklären dagegen, wie Sie das ganze
    System aktualisieren.
   </para>
  </abstract>
 </info>
 <sect1 xml:id="sec.update.suselinux">
  <title>Das System aktualisieren</title>

  <important>
   <title>&productname; &productnumber; steht nur als 64-Bit-Version zur Verfügung.</title>
   <para>
    Beachten Sie, dass &productname; &productnumber; nur als 64-Bit-Version
    erhältlich ist. Das heißt, dass eine Aktualisierung von einer
    32-Bit-Ausgabe nicht möglich ist. Sofern die CPU Ihres Rechners dies
    unterstützt, können Sie &productname; neu installieren (siehe <xref
    linkend="art.osuse.installquick"/> und <link
    xlink:href="https://doc.opensuse.org/documentation/leap/startup/html/book.opensuse.startup/cha.inst.html">Installation
    with YaST</link>).  Alternativ können Sie auf einer 32-Bit-Architektur auch
    <link xlink:href="https://de.opensuse.org/Portal:Tumbleweed">&opensuse;
    Tumbleweed</link> ausprobieren.
   </para>
  </important>

  <para>
   Von Version zu Version scheint die Software zu <quote>wachsen</quote>. Daher
   sollten Sie vor dem Aktualisieren mit dem Kommando <command>df</command>
   überprüfen, ob ausreichend freier Platz auf der Partition zur Verfügung
   steht. Falls dieser knapp wird, erstellen Sie ein Backup und teilen Sie den
   Festplattenplatz neu auf. Eine allgemeingültige Regel, wie viel Platz jede
   Partition haben sollte, gibt es nicht &mdash; das richtet sich unter
   anderem nach Ihrem Setup, nach den ausgewählten Programmen und deren
   Versionsnummern.
  </para>

  <sect2 xml:id="sec.update.prep">
   <title>Vorbereitungen</title>
   <para>
    Bevor Sie mit dem Upgrade beginnen, sichern Sie die aktuellen
    Konfigurationsdateien auf einem separaten Medium, beispielsweise auf einer
    externen Festplatte oder auf einem USB-Stick. Dazu gehören vor allem die
    Dateien im Verzeichnis <filename>/etc</filename> und einige Dateien und
    Verzeichnisse aus <filename>/var</filename>. Darüber hinaus sollten Sie
    ein Backup von <filename>/home</filename> (den
    <envar>HOME</envar>-Verzeichnissen) erstellen. Arbeiten Sie in jedem Fall
    als <systemitem class="username">root</systemitem>, denn nur der
    Systemverwalter hat die nötigen Leserechte.
   </para>
   <para>
    Notieren Sie außerdem den Namen der Root-Partition. Dazu können Sie den
    Befehl <command>df&nbsp;/</command> (<quote>disk free</quote>)
    verwenden; das Kommando listet die Namen der Partitionen, ihren
    Platzverbrauch und Füllstand sowie den Einhängepunkt auf. In
    <xref linkend="aus.update.df"/>, ist <filename>/dev/sda3</filename> der
    Name der Root-Partition; sie ist unter <filename>/</filename> eingehängt
    (gemountet).
   </para>
   <example xml:id="aus.update.df">
    <title>Partitionen mit <command>df -h</command> auflisten</title>
<screen>
Dateisystem    Größe Benutzt Verf. Verw% Eingehängt auf
/dev/sda3        74G     22G   53G   29% /
udev            252M    124K  252M    1% /dev
/dev/sda5       116G    5.8G  111G    5% /home
/dev/sda1        39G    1.6G   37G    4% /windows/C
/dev/sda2       4.6G    2.6G  2.1G   57% /windows/D</screen>
   </example>
  </sect2>

  <sect2>
   <title>Mögliche Probleme</title><indexterm>
   <primary>Upgrade</primary>
   <secondary>Probleme</secondary></indexterm>
   <para>
    Wenn Sie eine Standard-Installation auf die nächsthöhere Version
    aktualisieren, kümmert sich &yast; um alles: Das Programm schaut nach,
    was sich geändert hat, und bringt das System auf den neuesten Stand. Haben
    Sie eigene Anpassungen vorgenommen, kann es passieren, dass einzelne
    Schritte oder das ganze Upgrade fehlschlägt. In dem Fall installieren Sie
    den Rechner neu und spielen Ihr Backup ein. Überprüfen Sie die folgenden
    Punkte, bevor Sie mit der Aktualisierung beginnen.
   </para>
   <sect3>
    <title>/etc/passwd- und /etc/group-Dateien</title><indexterm>
    <primary>Update</primary>
    <secondary>passwd und group</secondary></indexterm><indexterm>
    <primary>Konfigurationsdateien</primary>
    <secondary>passwd</secondary></indexterm><indexterm>
    <primary>Konfigurationsdateien</primary>
    <secondary>group</secondary></indexterm>
    <para>
     Stellen Sie sicher, dass die beiden Dateien
     <filename>/etc/passwd</filename> und <filename>/etc/group</filename> keine
     Syntaxfehler enthalten. Dazu können Sie die beiden Werkzeuge
     <command>pwck</command> und <command>grpck</command> zu Hilfe nehmen;
     beide erfordern <systemitem class="username">root</systemitem>-Rechte.
    </para>
   </sect3>
   <sect3>
    <title>Virtuelle Machinen beenden</title>
    <para>
     Wenn Ihr Rechner als &vmhost; für &kvm; oder &xen; dient, fahren
     Sie vor dem Upgrade alle Gastsysteme herunter. Andernfalls kann es sein,
     dass Sie nach der Aktualisierung keinen Zugriff mehr auf die virtuellen
     Maschinen haben.
    </para>
   </sect3>
   <sect3>
    <title>PostgreSQL</title><indexterm>
    <primary>PostgreSQL</primary>
    <secondary>aktualisieren</secondary></indexterm>
    <para>
     Wenn Ihr Rechner als
     <phrase role="productname">PostgreSQL</phrase>-Datenbankserver dient, dann
     erstellen Sie von allen Datenbanken einen Dump (siehe Manpage zu
     <command>pg_dump</command>).
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="sec.upgrade.yast">
   <title>Upgrade mit YaST</title><indexterm>
   <primary>YaST</primary>
   <secondary>Upgrade</secondary></indexterm><indexterm>
   <primary>Update</primary>
   <secondary>YaST</secondary></indexterm><indexterm>
   <primary>Upgrade</primary>
   <secondary>YaST</secondary></indexterm>
   <para>
    Nachdem die Vorarbeiten (siehe <xref linkend="sec.update.prep"/>)
    abgeschlossen sind, können Sie das Upgrade durchführen:
   </para>
   <procedure>
    <step os="sles;sled">
     <para>
      Alternativ bereiten Sie den Installations-Server vor. Weitere
      Informationen dazu finden Sie unter
      <xref linkend="sec.deployment.remoteinst.instserver.sles9"/>.
     </para>
    </step>
    <step>
     <para>
      Legen Sie die &productname;-DVD ins Laufwerk und starten Sie den
      Rechner neu. Auf Maschinen mit traditionellem BIOS sehen Sie einen
      Boot-Bildschirm wie in der nächsten Abbildung; Rechner mit UEFI zeigen
      einen leicht abgewandelten Bootscreen. &productname; unterstützt
      Secure Boot auf UEFI-Maschinen.
     </para>
     <para>
      Drücken Sie die Taste <keycap>F2</keycap>, um die Sprache des
      Installationsprogramms zu ändern. Dabei wird automatisch auf die
      entsprechende Tastaturbelegung umgestellt.
      <link xlink:href="https://doc.opensuse.org/documentation/leap/startup/html/book.opensuse.startup/cha.inst.html#sec.i.yast2.start-up">System Start-up for Installation</link> erklärt, wie Sie weitere
      Bootoptionen anpassen.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="i_y2_boot_osuse.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="i_y2_boot_osuse.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Wählen Sie anstelle von <guimenu>Installation</guimenu>
      (Neuinstallation!) den Eintrag <guimenu>Upgrade</guimenu> im
      Boot-Bildschirm aus und betätigen Sie <keycap function="enter"/>. Der
      Rechner bootet und lädt den &productname;-Installer.
     </para>
    </step>
    <step>
     <para>
      Die Dropdown-Menüs <guimenu>Sprache</guimenu> und
      <guimenu>Tastaturbelegung</guimenu> zeigen automatisch die vorher
      ausgewählte Sprache an. Gegebenenfalls können Sie hier beide
      Einstellungen ändern.
     </para>
     <para>
      Lesen Sie die Lizenzvereinbarung; auch sie erscheint automatisch in der
      richtigen Sprache. Über die Schaltfläche <guimenu>Übersetzungen der
      Lizenz</guimenu> rufen Sie einen Dialog mit Übersetzungen auf. Mit
      <guimenu>Weiter</guimenu> geht es zum nächsten Schritt.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="i_y2_welcome_osuse.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="i_y2_welcome_osuse.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      &yast; ermittelt nun die Root-Partition(en). Gibt es mehr als eine,
      dann wählen Sie die richtige aus, bevor Sie auf
      <guimenu>Weiter</guimenu> klicken. <xref linkend="sec.update.prep"/>
      erklärt, wie Sie den Namen der Root-Partition herausfinden
      (<filename>/dev/sda3</filename> im Beispiel). &yast; liest die Datei
      <filename>fstab</filename> auf dieser Partition ein, um vorhandene
      Dateisysteme zu analysieren und zu mounten.
     </para>
<!-- cwickert 2016-03-23: This seems no longer necessary or possible -->
<!-- <warning>
      <title>Persistent Device Names</title>
      <para>
       All entries in <filename>/etc/fstab</filename> that specify
       partitions to be mounted using the kernel-device name must be changed
       to any of the other supported methods prior to performing an update.
       Kernel-device names are not persistent and are therefore unreliable
       for use during the update process. This can be done using the &yast;
       System Partitioner by changing the method used in the fstab options
       settings.
       </para>
      </warning> -->
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="i_y2_upgr_partition_osuse.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="i_y2_upgr_partition_osuse.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
     <tip>
      <title>Release Notes</title>
      <para>
       Die Schaltfläche <guimenu>Hinweise zur Version</guimenu> unten links
       blendet jederzeit einen Dialog mit den Veröffentlichungs-Hinweisen ein.
       Wenn Sie weiter nach unten blättern, finden Sie auch einen Abschnitt
       zur System-Aktualisierung, der unter anderem gelöschte und neue Pakete
       auflistet.
      </para>
     </tip>
    </step>
    <step>
     <para>
      &yast; blendet im nächsten Dialog <guimenu>Zuvor verwendete
      Repositories</guimenu> ein. Aktivieren Sie nun alle Quellen, die Sie
      weiterhin benutzen möchten. Diese berücksichtigt der Installer auch
      während der Aktualisierung. Um ein Repository zu aktivieren, klicken Sie
      den Eintrag in der Liste an und dann auf die Schaltfläche
      <guimenu>Status wechseln</guimenu>.
     </para>
     <para>
      Wenn Sie in diesem Schritt keine der Quellen aktivieren, sondern die
      Voreinstellung <guimenu>Entfernt</guimenu> übernehmen, werden die
      Standard-Repositories zu einem späteren Zeitpunkt aktiviert.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="i_y2_upgr_oldrepos_osuse.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="i_y2_upgr_oldrepos_osuse.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Sofern Sie eine oder mehrere Onlinequellen aktiviert haben, benötigt der
      Rechner eine Internetverbindung. Sollte die Einrichtung nicht automatisch
      per DHCP geschehen, konfigurieren Sie den Zugang manuell über
      <guimenu>Netzwerkeinstellungen</guimenu>. Beachten Sie, dass dieser
      Konfigurationsdialog nur erscheint, wenn eine automatische
      Netzwerkkonfiguration über DHCP nicht möglich ist.
     </para>
     <para>
      Es ist möglich, diesen Schritt zu überspringen und &productname;
      ohne Netzwerkverbindung zu aktualisieren &mdash; es ist aber ratsam,
      das nicht zu tun, denn nur so gelangen während des Upgrades auch ganz
      aktuelle Versionen und Sicherheits-Aktualisierungen auf den Rechner. Eine
      funktionierende Internetverbindun erlaubt Ihnen zudem, weitere
      Onlinequellen einzubinden.
     </para>
     <para>
      Um das Netzwerk zu konfigurieren, wählen Sie eine Schnittstelle aus der
      Liste aus und klicken Sie auf <guimenu>Bearbeiten</guimenu>. Über die
      gleichnamigen Reiter richten Sie DNS und Routing ein. Weitere
      Informationen dazu finden Sie in <link xlink:href="https://doc.opensuse.org/documentation/leap/reference/html/book.opensuse.reference/cha.basicnet.html#sec.basicnet.yast">Configuring a Network Connection with YaST</link>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="i_y2_network_osuse.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="i_y2_network_osuse.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Wenn Sie wie empfohlen Repositories hinzugefügt haben, können Sie diese
      im nächsten Schritt aktivieren. Stellen Sie sicher, dass Sie alle
      Quellen mit einem Häkchen versehen, die vorher auch aktiviert waren, um
      alle installierten Pakete zu aktualisieren.
     </para>
<!-- FIXME
     <para>
Weitere Informationen erhalten Sie in <xref linkend="sec.i.yast2.online_repos"/>.
</para>
-->
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="i_y2_onlinerepos_osuse.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="i_y2_onlinerepos_osuse.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
     <para>
      Nach einem Klick auf <guimenu>Weiter</guimenu> nicken Sie die
      Lizenzbedingungen für die Onlinequellen ab.
     </para>
    </step>
    <step>
     <para>
      Der Dialog <guimenu>Installationseinstellungen</guimenu> zeigt eine
      Zusammenfassung der Einstellungen an. Hier haben Sie noch einmal die
      Möglichkeit, Entscheidungen zu korrigieren. Dazu klicken Sie auf die
      hervorgehobenen Überschriften.
     </para>
     <variablelist>
      <varlistentry>
       <term><guimenu>System</guimenu>
       </term>
       <listitem>
        <para>
         Hier finden Sie detaillierte Informationen zur Hardware des Rechners.
         Im folgenden Dialog können Sie über die gleichnamige Schaltfläche die
         <guimenu>Kernel-Einstellungen</guimenu> verändern (siehe <link
         xlink:href="https://doc.opensuse.org/documentation/leap/startup/html/book.opensuse.startup/cha.inst.html#sec.i.yast2.proposal.system">System</link>).
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Optionen für die Aktualisierung</guimenu>
       </term>
       <listitem>
        <para>
         In der Voreinstellung führt &yast; ein vollständiges Upgrade
         (<guimenu>Aktualisierung mit Installation neuer Software und neuer
         Funktionen auf Basis der Auswahl</guimenu>) durch. Jedes Schema
         enthält mehrere Pakete einer Kategorie, beispielsweise verschiedene
         Desktopumgebungen, Druckserver, Webserver usw.
        </para>
        <para>
         Sie können die Schemata an eigene Wünsche anpassen oder den
         <guimenu>Aktualisierungs-Modus</guimenu> auf <guimenu>Nur installierte
         Pakete aktualisieren</guimenu> ändern.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Pakete</guimenu>
       </term>
       <listitem>
        <para>
         Hier nehmen Sie Feinjustierungen an der Paketauswahl vor. Sie können
         nicht nur fertig zusammengestellte Schemata auswählen, sondern auch
         deren Inhalte einsehen sowie nach einzelnen Paketen suchen (siehe
         <xref linkend="cha.y2.sw"/>).
        </para>
        <para>
         Wenn Sie Ihre Installation erweitern möchten, ist jedoch eine gute
         Idee, erst das Upgrade abzuschließen und dann zusätzliche Software
         zu installieren.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Sicherungskopie</guimenu>
       </term>
       <listitem>
        <para>
         Sollten Sie bisher kein Backup angelegt haben, ist hier die letzte
         Gelegenheit dazu. Beachten Sie, dass diese Funktion die Aktualisierung
         in die Länge zieht.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Sprache</guimenu>
       </term>
       <listitem>
        <para>
         In dieser Abteilung können Sie die Primärsprache ändern und
         zusätzliche Sprachpakete einspielen. Optional passen Sie die
         Tastaturbelegung und die Zeitzone für die Primärsprache an.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Tastaturbelegung</guimenu>
       </term>
       <listitem>
        <para>
         Hier passen Sie die Tastaturbelegung an, und unter
         <guimenu>Einstellungen für Experten</guimenu> konfigurieren Sie
         Feinheiten, wie Wiederholungsrate, Feststelltaste usw.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><guimenu>Systemstart</guimenu>
       </term>
       <listitem>
        <para>
         Diese Abteilung zeigt die Bootloader-Einstellungen. Die
         Voreinstellungen sollten Sie nur verändern, wenn es wirklich
         erforderlich ist. Mehr zu GRUB lesen Sie in <link
         xlink:href="https://doc.opensuse.org/documentation/leap/reference/html/book.opensuse.reference/cha.grub2.html">The Boot Loader GRUB 2</link>.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="i_y2_upgr_summary_osuse.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="i_y2_upgr_summary_osuse.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Nachdem Sie alle <guimenu>Installationseinstellungen</guimenu>
      überprüft haben, stoßen Sie das Upgrade mit einem Klick auf
      <guimenu>Aktualisierung</guimenu> an. Abhängig von der Paketauswahl
      müssen Sie eventuell noch einige weitere Lizenzbestimmungen abnicken.
      Danach bestätigen Sie im folgenden Dialog das Upgrade ein letztes Mal.
      Bis zu diesem Punkt befindet sich Ihr System noch im Originalzustand
      &mdash; erst wenn Sie auf <guimenu>Aktualisierung starten</guimenu>
      klicken, startet das Upgrade.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="i_y2_upgr_confirm_osuse.png" width="75%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="i_y2_upgr_confirm_osuse.png" width="100%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
   </procedure>
   <para>
    Nachdem &yast; die Hauptkomponenten der Distribution aktualisiert hat,
    bootet der Rechner neu. Jetzt kümmert sich die Updateroutine um die
    restlichen Pakete und zeigt die Veröffentlichungshinweise an, falls
    gewünscht.
   </para>
   <para os="sles;sled">
    Mehr Informationen zu &ncc; finden Sie in
    <xref linkend="sec.i.yast2.conf.manual.cc"/>
   </para>
  </sect2>

  <xi:include href="zypper_upgrade.xml" parse="xml"/>

  <sect2 xml:id="sec.update.packages" os="osuse">
   <title>Einzelne Pakete aktualisieren</title>
   <para>
    Unabhängig von der Distribution als Gesamtpaket können Sie jederzeit
    einzelne Pakete aktualisieren. Beachten Sie stets eventuelle
    Abhängigkeiten zu anderen Komponenten, damit das System konsistent bleibt.
   </para>
   <para>
    Verwenden Sie das &yast;-Modul <guimenu>Software installieren oder
    löschen</guimenu>, um Pakete zu aktualisieren (siehe
    <xref linkend="cha.y2.sw"/>). Wählen Sie die gewünschten Komponenten aus.
    Wenn es von einem Paket eine neuere Version gibt, erscheinen die
    Versionsnummern in der Spalte <guimenu>Installiert (Verfügbar)</guimenu>
    in blauer Schrift. &yast; kümmert sich um Abhängigkeiten zu anderen
    Paketen und warnt Sie vor Aktionen, welche die Konsistenz des Systems
    gefährden &mdash; beispielsweise bei Bibliotheken und anderen
    Kernkomponenten. In dem Fall ist es besser, ein vollständiges Upgrade
    durchzuführen.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.update.version" os="osuse">
  <title>Weitere Informationen</title>

  <para>
   Hinweise auf mögliche Probleme und Fehler finden Sie stets online (siehe
   die Links im nächsten Abschnitt). Wichtige Aktualisierungen einzelner
   Pakete können Sie auch über das &yast;-Modul
   <guimenu>Online-Aktualisierung</guimenu> durchführen (siehe
   <xref linkend="cha.onlineupdate.you"/>).
  </para>

  <para>
<!-- bitte die deutschen Links kontrollieren, ob ich die richtigen Seiten ausgewählt habe; die lästigsten Fehler gibt es nur auf Englisch. hej, 20.10.2016 -->
   Weitere Informationen zu den Features und Bugs finden Sie im
   &opensuse;-Wiki unter
   <link xlink:href="https://de.opensuse.org/Features"/> und
   <link xlink:href="http://en.opensuse.org/openSUSE:Most_annoying_bugs"/>.
  </para>
 </sect1>
</chapter>
