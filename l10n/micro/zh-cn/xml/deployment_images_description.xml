<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_images_description.xml" version="5.0" xml:id="cha-images-description">
 <title>Raw 映像的说明</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  SLE Micro raw 映像适用于 AMD64/Intel 64 体系结构（提供含 RT 内核的映像）、IBM Z ZSeries（KVM 主机映像，与 FBA 或 DASD 设备搭配使用的映像）以及 AArch64。这些映像可在首次引导时使用 Ignition 或 Combustion 进行配置。引导加载器会检测首次引导，详细信息请参见<xref linkend="sec-first-boot"/>。每个映像都有默认挂载的子卷（如<xref linkend="sec-default-partitioning"/>中所述）。<xref linkend="cha-images-procedure"/> 中介绍了这些映像的部署过程。
 </para>
 <important>
  <title>不要将防火墙与 Podman 搭配使用</title>
  <para>
   将防火墙与 Podman 搭配使用可能会导致与 Podman 相关的防火墙规则在 <literal>firewalld</literal> 服务重新装载后丢失。因此，如果您要使用 Podman，建议将防火墙保持禁用状态。
  </para>
 </important>
 <sect1 xml:id="sec-default-partitioning">
  <title>默认分区</title>

  <para>
   Raw 映像使用默认的分区方案，您可使用 Ignition 或 Combustion 在首次引导期间进行更改。有关将系统重新分区的过程，请参见<xref linkend="sec-ignition-configuration"/>或<xref linkend="sec-combustion-script"/>。
  </para>

  <important>
   <title>根文件系统必须使用 Btrfs</title>
   <para>
    如果您要对默认分区方案进行任何更改，根文件系统必须是 btrfs。
   </para>
  </important>

  <para>
   每个映像都具有以下子卷：
  </para>

<screen>
 /home
 /root
 /opt
 /srv 
 /usr/local
 /var
 </screen>

  <para>
   映像还挂载了默认用于引导的子卷。具体挂载的子卷视体系结构而定。
  </para>

  <para>
   您可以通过 <filename>/etc/fstab</filename> 中的选项 <literal>x-initrd.mount</literal> 来识别默认挂载的子卷。其他子卷或分区必须通过 Ignition 或 Combustion 进行配置。
  </para>
 </sect1>
 <sect1 xml:id="sec-first-boot">
  <title>首次引导检测</title>

  <para>
   配置仅在首次引导时运行。为了区分首次引导和后续引导，系统会在首次引导后创建标志文件 <filename>/boot/firstboot_happened</filename>。如果文件系统中不存在该文件，系统会将属性 <literal>ignition.firstboot</literal> 传递给内核命令行，这会触发创建 <filename>initramfs</filename>（如果使用的是 Ignition）或运行 dracut 模块（如果使用的是 Combustion）。完成首次引导后，系统便会创建 <filename>/boot/firstboot_happened</filename> 标志文件。
  </para>

  <note>
   <title>系统始终会创建该标志文件</title>
   <para>
    即使由于配置文件错误或缺失导致配置失败，系统也会创建 <filename>/boot/firstboot_happened</filename> 标志文件。
   </para>
   
   <para>
    您可以通过将 <literal>ignition.firstboot</literal> 属性传递给内核命令行或删除 <filename>/boot/firstboot_happened</filename> 标志文件，来强制在后续引导时进行首次引导配置。
   </para>
  </note>
 </sect1>
</chapter>
