<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="suse_l10n.xml" version="5.0" xml:id="sec-suse-l10n"> <title>言語および国固有の設定</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker/>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <para>
  本システムは、非常に広い範囲で国際化されており、現地の状況に合わせて柔軟に変更できます。国際化(<emphasis/>「I18N」)が特定のローカライズ(<emphasis/>「L10N」)を可能にします。I18NとL10Nという略語は、語の最初と最後の文字の間に、省略されている文字数を挟み込んだ表記です。
 </para>

 <para>
  設定は、ファイル<systemitem>/etc/sysconfig/language</systemitem>の変数<filename>LC_</filename>で定義します。これは、単なる<emphasis>現地語サポート</emphasis>だけでなく、<emphasis>Messages</emphasis>(メッセージ) (言語)、<emphasis>Character Set</emphasis>(文字セット)、<emphasis>Sort Order</emphasis>(ソート順)、<emphasis>Time and Date</emphasis>(時刻と日付)、<emphasis>Numbers</emphasis>(数字)および<emphasis>Money</emphasis>(通貨)の各カテゴリも指します。これらのカテゴリはそれぞれ、独自の変数を使用して直接定義することも、ファイル<filename>language</filename>にあるマスタ変数を使用して間接的に定義することも可能です(<command>locale</command>コマンドでmanページを参照)。
 </para>

 <variablelist xml:id="vl-suse-l10n-variables">
  <title>変数のリスト</title>
  <varlistentry>
   <term><systemitem>RC_LC_MESSAGES</systemitem>, <systemitem>RC_LC_CTYPE</systemitem>, <systemitem>RC_LC_COLLATE</systemitem>, <systemitem>RC_LC_TIME</systemitem>, <systemitem>RC_LC_NUMERIC</systemitem>, <systemitem>RC_LC_MONETARY</systemitem>
   </term>
   <listitem>
    <para>
     これらの変数は、プレフィクス<systemitem>RC_</systemitem>を付けずにシェルに渡され、前述のカテゴリを表します。関連するシェルプロファイルについては後で説明します。現在の設定は、コマンド<command>locale</command>を使用して表示できます。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LC_ALL</systemitem>
   </term>
   <listitem>
    <para>
     この変数は、すでに参照された変数の値を上書きします。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LANG</systemitem>
   </term>
   <listitem>
    <para>
     前述の変数がまったく設定されていない場合、これがフォールバックとなります。デフォルトでは、<systemitem>RC_LANG</systemitem>だけが設定されます。これにより、ユーザが独自の変数を入力しやすくなります。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>ROOT_USES_LANG</systemitem>
   </term>
   <listitem>
    <para>
     この変数は<literal>yes</literal>または<literal>ctype</literal> (デフォルト)に設定できます。<literal>yes</literal>に設定される場合、<systemitem class="username">root</systemitem>は言語および国固有の設定を使用します。設定されていない場合、システム管理者は常にPOSIX環境で作業します。
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <para>
  変数は、YaSTのsysconfigエディタで設定できます。このような変数の値には、言語コード、国コード、エンコーディング、および修飾子が入っています。個々のコンポーネントは特殊文字で結合されます。
 </para>

<screen>LANG=&lt;language&gt;[[_&lt;COUNTRY&gt;].&lt;Encoding&gt;[@&lt;Modifier&gt;]]</screen>

 <sect2 xml:id="sec-suse-l10n-settings">
  <title>システム全体のロケール設定</title>
  <para>
   <systemitem class="daemon">systemd</systemitem>は初期起動時に<filename>/etc/locale.conf</filename>を読み込みます。このファイルで設定されたロケール設定は、個別の設定がない限り、すべてのサービスまたはユーザによって継承されます。
  </para>
  <note>
   <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> での古い設定ファイルの動作</title>
   <para>
    以前のバージョンの<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>はロケール設定を<filename>/etc/sysconfig/language</filename>、<filename>/etc/sysconfig/keyboard</filename>および<filename>/etc/sysconfig/console</filename>から読み込んでいました。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>
    <phrase os="sles;sled">15 GA</phrase>以降、これらのファイルは廃止されたものとみなされています。<systemitem class="daemon">systemd</systemitem>では、これらのファイルから設定を読み込まなくなりました。代わりに、<systemitem class="daemon">systemd</systemitem>では、<filename>/etc/locale.conf</filename>を読み込みます。
   </para>
   <para>
    ただし、<filename>/etc/sysconfig/language</filename>で定義されている変数は引き続き使用されます。これらの変数はシステム全体のロケールを上書きし、ユーザシェルの異なるロケール設定を定義するために使用することができます(<xref linkend="sec-suse-l10n-examples"/>を参照)。
   </para>
  </note>

  <para>システム全体のロケールを設定するには、次のいずれかを実行できます。</para>
  <itemizedlist>
   <listitem>
    <para>
     <filename>/etc/locale.conf</filename>に設定を書き込む。各行は環境に似た変数割り当てです(変数のリストについては、<command>man 5 locale.conf</command>を参照してください):
    </para>
    <screen>LANG=de_DE.UTF-8</screen>
    <para>
     設定を微調整するには、1行に1つ変数を追加することができます。
    </para>
   </listitem>
   <listitem>
    <para>
     <command>localectl</command>コマンドを使用する:
    </para>
<screen><prompt role="root">root # </prompt><command>localectl</command> set-locale LANG=de_DE.UTF-8</screen>
    <para>ここでも、<command>localectl set-locale</command>コマンドの後に追加の変数を指定することもできます。</para>
   </listitem>
  </itemizedlist>

  <para>
   systemdパッケージの更新中に古いシステムとの後方互換性を維持するために、言及されているすべての変数は、まだ定義されていない場合は、sysconfigから最終的な宛先にマイグレートされます。
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-examples">
  <title>例</title>
  <remark>toms 2019-05-21: This section should be restructured as
  it not completely deals with generating locales.
  Postponed to a later point.
  </remark>
  <para>
   言語コードと国コードは必ず一緒に設定する必要があります。言語の設定は、<link xlink:href="http://www.evertype.com/standards/iso639/iso639-en.html"/>および<link xlink:href="http://www.loc.gov/standards/iso639-2/"/>で入手できる、ISO 639規格に従います。国コードはISO 3166に一覧にされています(<link xlink:href="http://en.wikipedia.org/wiki/ISO_3166"/>を参照)。
  </para>
  <para>
   使用可能な説明ファイルが<filename>/usr/lib/locale</filename>に存在する場合のみ、値を設定する意味があります。追加の記述ファイルは、<filename>/usr/share/i18n</filename> のファイルを使用し、コマンド <command>localedef</command> を実行して作成できます。記述ファイルは、<systemitem>glibc-i18ndata</systemitem>パッケージに含まれています。<literal>en_US.UTF-8</literal>の説明ファイル(英語および米国)は以下のように作成します。
  </para>

  <remark role="trans">Change the description file in the previous para and the
   following screen to something appropriate for your language.</remark>
<screen>localedef -i en_US -f UTF-8 en_US.UTF-8</screen>
  <variablelist>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.UTF-8</systemitem>
    </term>
    <listitem>
     <para>
      インストール時にAmerican Englishを選択すると、これがデフォルトの設定になります。他の言語を選択した場合、その言語が有効になりますが、文字コードはUTF-8が使用されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.ISO-8859-1</systemitem>
    </term>
    <listitem>
     <para>
      これにより、言語が英語、国が米国、文字セットが<literal>ISO-8859-1</literal>に設定されます。この文字セットは、ユーロ記号をサポートしませんが、<literal>UTF-8</literal>がサポートされていない、更新前のプログラムを使用する方が便利なこともあります。文字セット(この状況では<literal>ISO-8859-1</literal>)を定義する文字列は、Emacsのようなプログラムによって評価されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term><systemitem>LANG=en_IE@euro</systemitem>
    </term>
    <listitem>
     <para>
      上記の例では、ユーロ記号が言語設定に明示的に組み込まれています。この設定は今では廃止され、UTF-8もユーロ記号を表現します。アプリケーションがISO-8859-15をサポートし、UTF-8をサポートしない場合にのみ役に立ちます。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   <filename>/etc/sysconfig/language</filename>への変更は、次のプロセスチェーンで有効になります。
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Bashの場合は、<filename>/etc/profile</filename>によって読み込まれた<filename>/etc/profile.d/lang.sh</filename>が、<filename>/etc/sysconfig/language</filename>を解析します。
    </para>
   </listitem>
   <listitem>
    <para>
     tcshの場合は、ログイン時に<filename>/etc/csh.login</filename>によって読み込まれた<filename>/etc/profile.d/lang.csh</filename>が、<filename>/etc/sysconfig/language</filename>を解析します。
    </para>
   </listitem>
  </itemizedlist>
  <para>
   これによって、<filename>/etc/sysconfig/language</filename>に加えられたすべての変更が、これらを手動で有効にしなくても、各シェルへの次回ログイン時に使用可能になります。
  </para>
  <para>
   ユーザは、同様に<filename>~/.bashrc</filename>ファイルを編集して、システムのデフォルトを上書きすることができます。たとえば、システム設定の<literal>en_US</literal>をプログラムメッセージに使用しない場合は、<systemitem>LC_MESSAGES=es_ES</systemitem>を指定してメッセージが英語の代わりにスペイン語で表示されるようにします。
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-dot-i18n">
  <title><filename>~/.i18n</filename>でのロケール設定</title>
  <para>
   ロケールシステムのデフォルトが不十分な場合、Bashスクリプトの構文に従って<filename>~/.i18n</filename>の設定を変更してください。<filename>~/.i18n</filename>内のエントリは、<filename>/etc/sysconfig/language</filename>のシステムデフォルトを上書きします。同じ変数名を使用しますが、<literal>RC_</literal>ネームスペースプレフィクスは付けません。たとえば、<literal>RC_LANG</literal>ではなく、<literal>LANG</literal>を使用します。
  </para>
<screen>LANG=cs_CZ.UTF-8
LC_COLLATE=C</screen>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-fallback">
  <title>言語サポートの設定</title>
  <para>
   カテゴリ<emphasis>Messages</emphasis>のファイルは、フォールバックを確保するため、対応する言語ディレクトリ(たとえば、<filename>en</filename>)にのみ格納されることになっています。たとえば<systemitem>LANG</systemitem>を<literal>en_US</literal>に設定したが、messageファイルが<filename>/usr/share/locale/en_US/LC_MESSAGES</filename>に存在しない場合は、<filename>/usr/share/locale/en/LC_MESSAGES</filename>にフォールバックされます。
  </para>
  <para>
   フォールバックチェーンも定義できます。たとえば、ブルターニュ語、次いでフランス語、またはガリシア語、次いでスペイン語、次いでポルトガル語の順にフォールバックするには、次のように設定します。
  </para>
  <para>
   <systemitem>LANGUAGE="br_FR:fr_FR"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="gl_ES:es_ES:pt_PT"</systemitem>
  </para>
  <para>
   必要に応じて、次のようにノルウェー語の方言であるニーノシクやブークモールをノルウェー語の代わりに使用できます(<literal>no</literal>へのフォールバックを追加します)。
  </para>
  <para>
   <systemitem>LANG="nn_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nn_NO:nb_NO:no"</systemitem>
  </para>
  <para>
   あるいは、
  </para>
  <para>
   <systemitem>LANG="nb_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nb_NO:nn_NO:no"</systemitem>
  </para>
  <para>
   ノルウェー語では、<systemitem>LC_TIME</systemitem>の扱いも違うので注意してください。
  </para>
  <remark>The following example does not make sense  for 'en'; that's why I
   use 'de' as an example here. -ke- </remark>

  <para>
   生じる可能性のある1つの問題は、数字の桁を区切るための文字が正しく認識されないことです。このことは、<systemitem>LANG</systemitem>が<literal>de</literal>のような2文字の言語コードにのみ設定されているのに、glibcが使用している定義ファイル<filename>/usr/share/lib/de_DE/LC_NUMERIC</filename>に存在している場合に生じます。それで、区切り文字の定義がシステムに認識されるようにするには、<systemitem>LC_NUMERIC</systemitem>を<literal>de_DE</literal>に設定する必要があります。
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-info">
  <title>詳細情報</title>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <emphasis>『The GNU C Library Reference Manual』</emphasis>の<quote>Locales and Internationalization</quote>の章。パッケージ<package>glibc-info</package>に含まれています。
    </para>
   </listitem>
   <listitem>
    <para>
     『<emphasis>UTF-8 and Unicode FAQ for Unix/Linux</emphasis>』、Markus Kuhn著。Webページ<link xlink:href="https://www.cl.cam.ac.uk/~mgk25/unicode.html"/> (現在のアドレス)を参照してください。
    </para>
   </listitem>
  </itemizedlist>
 </sect2>
</sect1>
