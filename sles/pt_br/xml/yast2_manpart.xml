<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_manpart.xml" version="5.0" xml:id="sec.yast2.i_y2_part_expert">
 <title>Usando o particionador do YaST</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes (sim)</dm:translation>
  </dm:docmanager>
 </info><indexterm> <primary>YaST</primary> <secondary>particionamento</secondary> </indexterm> <indexterm> <primary>partições</primary> <secondary>criando</secondary> </indexterm>

 <para>
  Com o particionador técnico, mostrado na <xref linkend="fig.yast2.i_y2_disk_part"/>, modifique manualmente o particionamento de um ou vários discos rígidos. É possível adicionar, apagar, redimensionar e editar partições ou acessar a configuração do LVM e do softRAID.
 </para>

 <warning>
  <title>Reparticionando o sistema em execução</title>
  <para>
   Embora seja possível reparticionar o sistema durante sua execução, o risco de cometer um erro que cause perda de dados é muito alto. Tente evitar o reparticionamento de seu sistema instalado e sempre faça um backup completo dos dados antes de tentar fazer isso.
  </para>
 </warning>

 <figure xml:id="fig.yast2.i_y2_disk_part">
  <title>Particionador do YaST</title>
  <mediaobject>
   <imageobject role="fo">
    <imagedata fileref="install_partitioner_expert.png" width="75%" format="PNG"/>
   </imageobject>
   <imageobject role="html">
    <imagedata fileref="install_partitioner_expert.png" width="75%" format="PNG"/>
   </imageobject>
  </mediaobject>
 </figure>

 <tip arch="zseries" os="sles">
  <title>IBM z Systems: Nomes de dispositivos</title>
  <para>
   O IBM z Systems reconhece apenas discos rígidos DASD e SCSI.  Os discos rígidos IDE não são suportados. Por isso, esses dispositivos aparecem na tabela de partição como <filename>dasda</filename> ou <filename>sda</filename> para o primeiro dispositivo reconhecido.
  </para>
 </tip>

 <para>
  Todas as partições existentes ou sugeridas em todos os discos rígidos conectados são exibidas na lista de <guimenu>armazenamentos disponíveis</guimenu> na caixa de diálogo <guimenu>Particionador Técnico</guimenu> do YaST. Discos rígidos inteiros são listados como dispositivos sem números, como <filename>/dev/sda</filename><phrase arch="zseries" os="sles"> (ou <filename>/dev/dasda</filename>)</phrase>. As partições são listadas como partes desses dispositivos, como <filename>/dev/sda1</filename><phrase arch="zseries" os="sles"> (ou <filename>/dev/dasda1</filename>, respectivamente)</phrase>. O tamanho, tipo, status da criptografia, sistema de arquivos e ponto de montagem dos discos rígidos e suas partições também são exibidos. O ponto de montagem descreve onde a partição aparece na árvore do sistema de arquivos do Linux.
 </para>

 <para>
  Várias telas funcionais estão disponíveis na <guimenu>Visão do Sistema</guimenu> à esquerda. Use essas telas para coletar informações sobre as configurações de armazenamento existentes ou para configurar funções, como <literal>RAID</literal>, <literal>Gerenciamento de Volumes</literal>, <literal>Arquivos Crypt</literal>, ou veja os sistemas de arquivos com recursos adicionais, como Btrfs, NFS ou <literal>TMPFS</literal>.
 </para>

 <para>
  Se a caixa de diálogo de especialista for executada durante a instalação, os espaços livres no disco rígido também serão listados e selecionados automaticamente. Para oferecer mais espaço em disco ao <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>, libere o espaço necessário começando do fim para o início da lista (começando da última partição de um disco rígido em direção à primeira).
 </para>

 <sect2 xml:id="sec.IB.part.typen">
  <title>Tipos de partição</title><indexterm> <primary>partições</primary> <secondary>tipos</secondary> </indexterm>
  <tip arch="zseries" os="sles">
   <title>IBM z Systems: Discos rígidos</title>
   <para>
    Nas plataformas IBM z Systems, o SUSE Linux Enterprise Server suporta discos rígidos SCSI e DASDs (dispositivos de armazenamento de acesso direto). Embora seja possível particionar os discos SCSI da maneira descrita a seguir, os DASDs não podem ter mais de três entradas de partição em suas tabelas de partições.
   </para>
  </tip>
  <para>
   Cada disco rígido possui uma tabela de partições com espaço para quatro entradas. Cada entrada da tabela de partições pode corresponder a uma partição primária ou estendida. No entanto, somente uma entrada de partição estendida é permitida.
  </para>
  <para>
   Uma partição primária consiste simplesmente em uma faixa contínua de cilindros (áreas de disco físico) atribuídas a um determinado sistema operacional. Com as partições primárias, você fica limitado a quatro partições por disco rígido, mais que isso não cabe na tabela de partição. Esta é a razão pela qual partições estendidas são usadas. As partições estendidas também são faixas contínuas dos cilindros de disco, mas a própria partição estendida pode ser dividida em <emphasis>partições lógicas</emphasis>. Partições lógicas não requerem entradas na tabela de partições. Em outras palavras, uma partição estendida é um recipiente para partições lógicas.
  </para>
  <para>
   Se precisar de mais de quatro partições, crie uma partição estendida como a quarta partição (ou uma partição anterior). Essa partição estendida deve ocupar toda a faixa livre restante do cilindro. Em seguida, crie várias partições lógicas dentro da partição estendida. O número máximo de partições lógicas é 63, independentemente do tipo de disco. Não importa o tipo de partição usada para Linux. As partições primária e lógica funcionam normalmente.
  </para>
  <tip os="sles;osuse">
   <title>Tabela de partição GPT</title>
   <para>
    Se você precisa criar mais de 4 partições primárias em um disco rígido, use o tipo de partição GPT. Esse tipo remove a restrição de número de partições primárias e também suporta partições maiores que 2 TB.
   </para>
   <para>
    Para usar GPT, execute o Particionador do YaST, clique no nome do disco relevante na <guimenu>Tela do Sistema</guimenu> e escolha <menuchoice><guimenu>Especialista</guimenu> <guimenu>Criar Nova Tabela de Partição</guimenu> <guimenu>GPT</guimenu></menuchoice>.
   </para>
  </tip>
 </sect2>



 <sect2 xml:id="sec.yast2.i_y2_part_expert.newpart">
  <title>Criando uma partição</title><indexterm> <primary>partições</primary> <secondary>criando</secondary> </indexterm>
  <para>
   Para criar uma partição do zero, selecione <guimenu>Discos Rígidos</guimenu> e, em seguida, um disco rígido com espaço livre. A modificação real pode ser feita na guia <guimenu>Partições</guimenu>:
  </para>
  <procedure>
   <step>
    <para>
     Selecione <guimenu>Adicionar</guimenu> e especifique o tipo de partição (primário ou estendido). Crie até quatro partições primárias ou até três partições primárias e uma estendida. Dentro da partição estendida, crie várias partições lógicas (consulte a <xref linkend="sec.IB.part.typen"/>).
    </para>
   </step>
   <step>
    <para>
     Especifique o tamanho da nova partição. É possível ocupar todo o espaço livre não particionado ou digitar um tamanho personalizado.
    </para>
   </step>
   <step>
    <para>
     Selecione o sistema de arquivos a ser usado e um ponto de montagem. O YaST sugere um ponto de montagem para cada partição criada. Para usar um método de montagem diferente, como montagem por rótulo, selecione <guimenu>Opções do Fstab</guimenu>. Para obter mais informações sobre os sistemas de arquivos suportados, consulte <systemitem class="username">root</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Especifique opções de sistema de arquivos adicionais se sua configuração exigi-las. Isso será necessário, por exemplo, se você precisar de nomes de dispositivos persistentes. Para obter mais informações sobre as opções disponíveis, consulte a <xref linkend="sec.yast2.i_y2_part_expert.options"/>.
    </para>
   </step>
   <step>
    <para>
     Clique em <guimenu>   Concluir</guimenu>  para aplicar sua configuração de particionamento e sair desse módulo.
    </para>
    <para>
     Se tiver criado a partição durante a instalação, você retornará à tela de visão geral da instalação.
    </para>
   </step>
  </procedure>
  <sect3 xml:id="yast2.btrfs">
   <title>Particionamento Btrfs</title>
   <para>
    O sistema de arquivos padrão da partição raiz é o Btrfs (consulte o <xref linkend="cha.snapper"/><phrase os="sles"> e o <xref linkend="cha.filesystems"/></phrase> para obter mais informações sobre Btrfs). O sistema de arquivos raiz é o subvolume padrão e não aparece na lista de subvolumes criados. Sendo um subvolume Btrfs padrão, ele pode ser montado como um sistema de arquivos normal.
   </para>
   <important>
    <title>Btrfs em uma partição raiz criptografada</title>
    <para>
     A configuração de particionamento padrão sugere a partição raiz como Btrfs, com o diretório <filename>/boot</filename>. Se você precisa que a partição raiz seja criptografada nessa configuração, use o tipo de tabela de partição GPT em vez do tipo MSDOS padrão. Do contrário, o carregador de boot GRUB2 talvez não tenha espaço suficiente para o carregador de segundo estágio.
    </para>
   </important>
   <para>
    É possível criar instantâneos dos subvolumes Btrfs, manualmente ou automaticamente, com base nos eventos do sistema. Por exemplo, ao fazer mudanças no sistema de arquivos, o <command>zypper</command> invoca o comando <command>snapper</command> para criar instantâneos antes e após a mudança. Isso é útil quando você não está satisfeito com a mudança que o <command>zypper</command> fez e deseja restaurar para o estado anterior. Como o <command>snapper</command> invocado pelo <command>zypper</command> por padrão cria instantâneos do sistema de arquivos <emphasis>raiz</emphasis>, convém excluir diretórios específicos da criação de instantâneo, dependendo da natureza de dados que eles contêm. É por essa razão que o YaST sugere criar os seguintes subvolumes separados.
   </para>
   <xi:include href="snapshot_excludes_i.xml"/>
   <tip>
    <title>Tamanho da partição Btrfs</title>
    <para>
     Como os instantâneos gravados exigem mais espaço em disco, é recomendado reservar mais espaço para a partição Btrfs do que para uma partição que não tenha a funcionalidade de criação de instantâneo (como Ext3). O tamanho recomendado para uma partição raiz Btrfs com subvolumes sugeridos é de 20 GB.
    </para>
   </tip>
   <sect4 xml:id="yast2.btrfs.yast">
    <title>Gerenciando subvolumes Btrfs usando o YaST</title>
    <para>
     Agora é possível gerenciar subvolumes da partição Btrfs com o módulo <guimenu>Particionador Técnico</guimenu> do YaST. É possível adicionar novos subvolumes ou remover os existentes.
    </para>
    <procedure>
     <title>Subvolumes Btrfs com o YaST</title>
     <step>
      <para>
       Inicie o <guimenu>Particionador Técnico</guimenu> do YaST em <menuchoice><guimenu>Sistema</guimenu><guimenu>Particionador</guimenu></menuchoice>.
      </para>
     </step>
     <step>
      <para>
       Escolha <guimenu>Btrfs</guimenu> no painel esquerdo <guimenu>Tela do Sistema</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Selecione a partição Btrfs com os subvolumes que você precisa gerenciar e clique em <guimenu>Editar</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Clique em <guimenu>Gerenciamento de Subvolumes</guimenu>. Você vê uma lista de todos os subvolumes existentes da partição Btrfs selecionada. Observe que há várias entradas <literal>@/.snapshots/xyz/snapshot</literal>; cada um desses subvolumes pertence a um instantâneo existente.
      </para>
     </step>
     <step>
      <para>
       Dependendo se você deseja adicionar ou remover subvolumes, faça o seguinte:
      </para>
      <substeps performance="required">
       <step>
        <para>
         Para remover um subvolume, selecione-o na lista <guimenu>Subvolumes Existentes</guimenu> e clique em <guimenu>Remover</guimenu>.
        </para>
       </step>
       <step>
        <para>
         Para adicionar um novo subvolume, digite o nome dele na caixa de texto <guimenu>Novo Subvolume</guimenu> e clique em <guimenu>Adicionar novo</guimenu>.
        </para>
        <figure xml:id="fig.yast2.btrfs.subvolumes">
         <title>Subvolumes Btrfs no particionador do YaST</title>
         <mediaobject>

          <imageobject role="fo">
           <imagedata fileref="yast2_btrfs_subvolumes.png" width="75%" format="PNG"/>
          </imageobject>
          <imageobject role="html">
           <imagedata fileref="yast2_btrfs_subvolumes.png" width="75%" format="PNG"/>
          </imageobject>
         </mediaobject>
        </figure>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       Confirme com <guimenu>OK</guimenu> e <guimenu>Concluir</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Saia do particionador clicando em <guimenu>Concluir</guimenu>.
      </para>
     </step>
    </procedure>
   </sect4>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.options">
  <title>Editando uma partição</title><indexterm> <primary>partições</primary> <secondary>parâmetros</secondary> </indexterm>
  <para>
   Ao criar uma nova partição ou modificar uma partição existente, você pode definir diversos parâmetros. Para novas partições, os parâmetros padrão definidos pelo YaST geralmente são suficientes e não requerem nenhuma modificação. Para editar sua configuração de partição manualmente, faça o seguinte:
  </para>
  <procedure>
   <step>
    <para>
     Selecione a partição.
    </para>
   </step>
   <step>
    <para>
     Clique em <guimenu>Editar</guimenu> para editar a partição e definir os parâmetros:
    </para>
    <variablelist>
     <varlistentry>
      <term>ID de Sistema de Arquivos</term>
      <listitem>
       <para>
        <indexterm> <primary>partições</primary> <secondary>LVM</secondary> </indexterm> <phrase os="sles"> </phrase> <indexterm> <primary>partições</primary> <secondary>RAID</secondary> </indexterm> Mesmo se você não quiser formatar a partição neste estágio, atribua a ela um ID de sistema de arquivos para garantir que a partição seja registrada corretamente. Os valores comuns são <guimenu>Linux</guimenu>, <guimenu>Linux swap</guimenu>, <guimenu>Linux LVM</guimenu> e <guimenu>Linux RAID</guimenu>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Sistema de arquivos
      </term>
      <listitem>
       <para>
        <indexterm> <primary>sistemas de arquivos</primary> <secondary>mudando</secondary> </indexterm> <indexterm> <primary>partições</primary> <secondary>reformatando</secondary> </indexterm>Para mudar o sistema de arquivos de partição, clique em <guimenu>Formatar a partição</guimenu> e selecione o tipo de sistema de arquivos na lista <guimenu>Sistema de arquivos</guimenu>.
       </para>
       <para>
        O <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> suporta vários tipos de sistemas de arquivos. O Btrfs é o sistema de arquivos preferido do Linux para a partição raiz, por causa de seus recursos avançados. Ele suporta a funcionalidade copy-on-write, a criação de instantâneos, a segmentação de vários dispositivos, subvolumes e outras técnicas úteis. XFS, Ext3 e JFS são sistemas JFS. Esses sistemas de arquivos podem restaurar o sistema muito rapidamente após uma falha, usando os processos de gravação registrados durante a operação. O Ext2 não é um sistema de arquivos de registro em diário, mas é adequado para partições menores, pois ele não requer muito espaço em disco para gerenciamento.
       </para>
       <para>
        O sistema de arquivos padrão para a partição raiz é o Btrfs. O sistema de arquivos padrão para outras partições é o XFS.
       </para>
       <para>
        Troca (Swap) é um formato especial que permite usar a partição como uma memória virtual. Crie uma partição de troca (swap) de pelo menos 256 MB. No entanto, se você consumir todo o espaço de troca (swap), convém adicionar mais memória ao sistema, em vez de adicionar mais espaço de troca.
       </para>
       <warning>
        <title>Mudando o sistema de arquivos</title>
        <para>
         A mudança do sistema de arquivos e a reformatação das partições apagam de forma irreversível todos os dados da partição.
        </para>
       </warning>
       <para>
        Para ver detalhes sobre os diversos sistemas de arquivos, consulte o <citetitle>Storage Administration Guide</citetitle> (Guia de Administração de Armazenamento).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Criptografar Dispositivo
      </term>
      <listitem>
       <para>
        Se a criptografia for ativada, todos os dados serão gravados no disco rígido de forma criptografada. Aumenta a segurança dos dados confidenciais, mas reduz a velocidade do sistema, já que a criptografia leva algum tempo para processar. Mais informações sobre a criptografia de sistemas de arquivos são fornecidas em <xref linkend="cha.security.cryptofs"/>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Ponto de Montagem
      </term>
      <listitem>
       <para>
        Especifique o diretório em que a partição deve ser montada na árvore do sistema de arquivos. Selecione dentre as sugestões do YaST ou digite qualquer outro nome.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Opções de Fstab
      </term>
      <listitem>
       <para>
        Especifique vários parâmetros contidos no arquivo de administração do sistema de arquivos global (<filename>/etc/fstab</filename>). As configurações padrão devem ser suficientes para a maioria das configurações. Por exemplo, você pode mudar a identificação do sistema de arquivos com base no nome do dispositivo para uma etiqueta de volume. Na etiqueta de volume, você pode usar todos os caracteres, exceto <literal>/</literal> e espaço.
       </para>
       <para>
        Para obter nomes de dispositivos persistentes, use a opção de montagem <guimenu>por ID de Dispositivo</guimenu>, <guimenu>por UUID</guimenu> ou <guimenu>por ETIQUETA</guimenu>. No <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, os nomes de dispositivos persistentes estão habilitados por padrão.
       </para>
       <note os="sles" arch="zseries">
        <title>IBM z Systems: Montando por caminho</title>
        <para>
         Como a montagem por ID causa problemas no IBM z Systems quando se usa a cópia de disco para disco para fins de clonagem, por padrão, os dispositivos são montados por caminho em <filename>/etc/fstab</filename> no IBM z Systems.
        </para>
       </note>
       <para>
        Se você preferir montar a partição por etiqueta, precisará definir uma na entrada de texto <guimenu>Etiqueta do volume</guimenu>. Por exemplo, você pode usar o rótulo de partição <literal>HOME</literal> para uma partição a ser montada em <filename>/home</filename>.
       </para>
       <para>
        Se você pretende usar quotas no sistema de arquivos, use a opção de montagem <guimenu>Habilitar Suporte a Cotas</guimenu>. Faça isso antes de definir cotas para usuários no módulo <guimenu>Gerenciamento de Usuário</guimenu> do YaST. Para obter mais informações sobre como configurar cotas de usuários, consulte a <xref linkend="sec.y2.userman.adv.quota"/>.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     Selecione <guimenu>Concluir</guimenu> para gravar as mudanças.
    </para>
   </step>
  </procedure>
  <note>
   <title>Redimensionar sistemas de arquivos</title>
   <para>
    Para redimensionar um sistema de arquivos existente, selecione a partição e use <guimenu>Redimensionar</guimenu>. Observe que não é possível redimensionar as partições que estiverem sendo montadas. Para redimensionar as partições, desmonte a partição relevante antes de executar o particionador.
   </para>
  </note>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.options2">
  <title>Opções de Especialista</title>
  <para>
   Após selecionar um dispositivo de disco rígido (como <guimenu>sda</guimenu>) no painel <guimenu>Tela do Sistema</guimenu>, você poderá acessar o menu <guimenu>Especialista</guimenu> na parte inferior direita da janela <guimenu>Particionador Técnico</guimenu>. O menu inclui os seguintes comandos:
  </para>
  <variablelist>
   <varlistentry>
    <term>Criar Nova Tabela de Partição</term>
    <listitem>
     <para>
      Essa opção ajuda a criar uma nova tabela de partição no dispositivo selecionado.
     </para>
     <warning>
      <title>Criando uma Nova Tabela de Partição</title>
      <para>
       Criar uma nova tabela de partição no dispositivo remove de forma irreversível todas as partições e seus dados do dispositivo.
      </para>
     </warning>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Clonar este Disco</term>
    <listitem>
     <para>
      Essa opção permite clonar o layout da partição do dispositivo (mas não os dados) em outros dispositivos de disco disponíveis.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.configure_options">
  <title>Opções Avançadas</title>
  <para>
   Após selecionar o nome de host do computador (o nível superior da árvore no painel <guimenu>Tela do Sistema</guimenu>), você poderá acessar o menu <guimenu>Configurar</guimenu> na parte inferior direita da janela <guimenu>Particionador Técnico</guimenu>. O menu inclui os seguintes comandos:
  </para>
  <variablelist>
   <varlistentry>
    <term>Configurar iSCSI</term>
    <listitem>
     <para>
      Para acessar a SCSI pelos dispositivos de blocos IP, primeiro configure a iSCSI. O resultado são dispositivos adicionalmente disponíveis na lista de partições principal.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Configurar Multipath</term>
    <listitem>
     <para>
      A seleção dessa opção ajuda a configurar o aperfeiçoamento de multipath nos dispositivos de armazenamento em massa suportados.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.info">
  <title>Mais dicas sobre particionamento</title>
  <para>
   A seção a seguir inclui algumas dicas e truques de particionamento que o ajudarão a tomar as decisões certas quando configurar o sistema.
  </para>
  <tip>
   <title>Números de cilindros</title>
   <para>
    Observe que diferentes ferramentas de particionamento podem começar a contar os cilindros de uma partição a partir de <literal>0</literal> ou de <literal>1</literal>. Ao calcular o número de cilindros, use sempre a diferença entre o último e o primeiro número de cilindro e adicione um.
   </para>
  </tip>
  <sect3 xml:id="sec.yast2.i_y2_part_expert.info.swap">
   <title>Usando <literal>troca (swap)</literal></title>
   <para>
    A troca é usada para estender a memória física disponível. É possível então usar mais memória que a RAM física disponível. O sistema de kernels de gerenciamento de memória anterior a 2.4.10 precisava de troca (swap) como medida de segurança. Antes, se você não tinha o dobro do tamanho da sua  RAM em troca, o desempenho do sistema era afetado. Essas limitações não existem mais.
   </para>
   <para>
    O Linux usa uma página denominada <quote>Usado Menos Recentemente</quote> (LRU) para selecionar as páginas que podem ser movidas da memória para o disco. Portanto, os aplicativos em execução têm mais memória disponível e os trabalhos de armazenamento em cache são mais fáceis.
   </para>
   <para>
    Se um aplicativo tentar alocar a memória máxima permitida, poderão surgir problemas com a troca. Há três cenários principais para avaliar:
   </para>
   <variablelist>
    <varlistentry>
     <term>Sistema sem troca (swap)</term>
     <listitem>
      <para>
       O aplicativo obtém a memória máxima permitida. Todos os caches são liberados e, portanto, todos os outros aplicativos em execução ficam mais lentos. Após alguns minutos, o mecanismo de exclusão de memória vazia do kernel ativa e elimina o processo.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Sistema com troca (swap) de tamanho médio (128 MB a 512 MB)</term>
     <listitem>
      <para>
       A princípio, o sistema fica mais lento como um sistema sem troca. Após a alocação de toda a RAM física, o espaço de troca também é usado. Nesse ponto, o sistema começa a ficar lento e fica impossível executar comandos remotamente. Dependendo da velocidade dos discos rígidos que executam o espaço de troca, o sistema fica nessa condição por cerca de 10 a 15 minutos até o mecanismo de exclusão de memória vazia resolver o problema. Observe que você precisará de certa quantidade de troca se o computador tiver que realizar uma <quote>suspensão para o disco</quote>. Neste caso, o tamanho da troca deve ser grande o suficiente para incluir os dados necessários da memória (512 MB – 1GB).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Sistema com inúmeras trocas (swap) (vários GB)</term>
     <listitem>
      <para>
       Nesse caso, é melhor não ter um aplicativo que esteja fora de controle e com troca excessiva. Se usar um aplicativo assim, o sistema precisará de muitas horas para se recuperar. No processamento, é provável que outros processos esgotem o tempo de espera e obtenham falhas, deixando o sistema em estado indefinido, mesmo depois de terminar o processo com falha. Nesse caso, faça uma reinicialização da máquina física e tente colocá-la em execução de novo. O grande número de trocas (swaps) só será útil se você tiver um aplicativo que dependa desse recurso. Esses aplicativos (como bancos de dados ou programas de manipulação de gráficos) normalmente têm uma opção para usar diretamente o espaço do disco rígido para suas necessidades. Convém usar essa opção em vez de muitos espaços de troca (swap).
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Se o sistema não está fora de controle, porém precisar de mais  troca após algum tempo, é possível estender o espaço de troca online. Se você preparou uma partição para um espaço de troca, adicione-a com o YaST. Se você não tiver uma partição disponível, também poderá usar um arquivo de troca para estender a troca. Os arquivos de troca são geralmente mais lentos que as partições, mas comparados à RAM física, ambos são extremamente lentos, logo a diferença real é insignificante.
   </para>
   <procedure>
    <title>Adicionando um arquivo de troca (swap) manualmente</title>
    <para>
     Para adicionar um arquivo de troca (swap) no sistema em execução, faça o seguinte:
    </para>
    <step>
     <para>
      Crie um arquivo vazio no sistema. Por exemplo, para adicionar um arquivo de troca (swap) com quantidade de troca (swap) de 128 MB em <filename>/var/lib/swap/swapfile</filename>, use os comandos:
     </para>
<screen>mkdir -p /var/lib/swap
dd if=/dev/zero of=/var/lib/swap/swapfile bs=1M count=128</screen>
    </step>
    <step>
     <para>
      Inicialize o arquivo de troca (swap) com o comando
     </para>
<screen>mkswap /var/lib/swap/swapfile</screen>
      <note>
  <title>UUID modificado para partições de troca (swap) ao formatar com <command>mkswap</command></title>
  <para>Não reformate as partições de troca (swap) existentes com <command>mkswap</command>, se possível. A reformatação com <command>mkswap</command> muda o valor do UUID da partição de troca (swap). Reformate usando o YaST (o que atualiza o <filename>/etc/fstab</filename>) ou ajuste o <filename>/etc/fstab</filename> manualmente.
  </para>
</note>
    </step>
    <step>
     <para>
      Ative a troca (swap) com o comando
     </para>
<screen>swapon /var/lib/swap/swapfile</screen>
     <para>
      Para desabilitar esse arquivo de troca (swap), use o comando
     </para>
<screen>swapoff /var/lib/swap/swapfile</screen>
    </step>
    <step>
     <para>
      Verifique os espaços de troca (swap) atuais disponíveis com o comando
     </para>
<screen>cat /proc/swaps</screen>
     <para>
      Observe que neste ponto, é apenas um espaço de troca temporário. Após a próxima reinicialização, ele não será mais usado.
     </para>
    </step>
    <step>
     <para>
      Para habilitar esse arquivo de troca (swap) permanentemente, adicione a seguinte linha a <filename>/etc/fstab</filename>:
     </para>
<screen>/var/lib/swap/swapfile swap swap defaults 0 0</screen>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.lvm">
  <title>Particionamento e LVM</title>
  <para>
   No <guimenu>Particionador Técnico</guimenu>, acesse a configuração do LVM clicando no item <guimenu>Gerenciamento de Volumes</guimenu> no painel <guimenu>Visão do Sistema</guimenu>. No entanto, se já existir uma configuração do LVM de trabalho no sistema, ela será automaticamente ativada após inserir a configuração do LVM inicial de uma sessão. Nesse caso, todos os discos com uma partição (pertencentes a um grupo de volume ativado) não podem ser reparticionados. O kernel do Linux não pode ler novamente a tabela de partição modificada do disco rígido quando há alguma partição desse disco em uso. Se você já tem uma configuração de LVM funcionando no sistema, não será necessário o reparticionamento físico. Em vez disso, mude a configuração dos volumes lógicos.
  </para>
  <para>
   No início dos volumes físicos (PVs), as informações sobre o volume são gravadas na partição. Para reutilizar tal partição para outros propósitos não relacionados ao LVM, é aconselhável apagar o início desse volume. Por exemplo, no <literal>system</literal> do VG e em <filename>/dev/sda2</filename> do PV, faça o seguinte com o comando <command>dd</command> <option>if=/dev/zero of=/dev/sda2 bs=512 count=1</option>.
  </para>
  <warning>
   <title>Sistema de arquivos para inicialização</title>
   <para>
    O sistema de arquivos usado para inicialização (sistema de arquivos raiz ou <filename>/boot</filename>) não deve ser armazenado em um volume lógico do LVM. Em vez disso, armazene-o em uma partição física normal.
   </para>
  </warning>
  <para>
   Para mudar <filename>/usr</filename> ou <systemitem>swap</systemitem>, consulte <xref linkend="pro.boot.linuxrc.lvm"/>.
  </para>
  <para os="sles">
   Para obter mais detalhes sobre LVM, consulte o <xref linkend="stor_admin"/>.
  </para>
 </sect2>
</sect1>
