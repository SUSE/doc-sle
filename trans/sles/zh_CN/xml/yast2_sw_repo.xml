<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="yast2_sw_repo.xml" id="sec.y2.sw.instsource">
 <title>管理软件安装源和服务</title>

 <para>
  如果要安装第三方软件，请向系统添加其他软件安装源。默认情况下，系统注册后会自动配置产品储存库（例如 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-DVD <phrase role="productname"><phrase os="sles;sled;slerte">12</phrase></phrase>）和匹配的更新储存库。有关注册的更多信息，请参见<xref linkend="sec.i.yast2.conf.manual.cc"/>或<xref linkend="sec.add-ons.register"/>。根据最初所选的产品，可能还会配置带有翻译、字典等的独立语言外接式附件安装源。
 </para>

 <para>
  要管理储存库，请启动 YaST，并选择<menuchoice><guimenu>软件</guimenu> <guimenu>软件储存库</guimenu></menuchoice>。将打开<guimenu>已配置软件安装源</guimenu>对话框。在此，还可以通过将对话框右角的<guimenu>视图</guimenu>更改为<guimenu>所有服务</guimenu>来管理所谓的<guimenu>服务</guimenu>订阅。此环境中的服务是一种<guimenu>安装源索引服务</guimenu> (RIS)，它能提供一个或多个软件安装源。此类服务可通过其管理员或供应商手动更改。
 </para>

 <para>
  每个安装源都提供描述安装源内容（包名称和版本等）的文件。这些储存库描述文件将下载到 YaST 使用的本地超速缓存中。为了确保完整性，可使用安装源维护人员的 GPG 密钥来为软件安装源签名。每当您添加新的储存库时，YaST 都可让您导入其密钥。
 </para>

 <warning>
  <title>信任外部软件源</title>
  <para>
   将外部软件安装源添加到您的安装源列表前，请先确保此安装源可信。对因安装第三方软件储存库中的软件而引起的任何潜在问题，<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 不承担任何责任。
  </para>
 </warning>

 <sect2 id="sec.y2.sw.instsource.add">
  <title>添加软件安装源</title>
  <para>
   您可以从 DVD/CD、USB 大容量储存设备（例如 USB 闪存盘）、本地目录或 ISO 映像添加储存库。
  </para>
  <para>
   要通过 YaST 的<guimenu>已配置的软件储存库</guimenu>对话框添加储存库，请执行以下步骤：
  </para>
  <procedure>
   <step performance="required">
    <para>
     单击<guimenu>添加</guimenu>。
    </para>
   </step>
   <step performance="required">
    <para>
     选择对话框中列出的选项之一：
    </para>
    <figure id="fig.y2.sw.repo.new">
     <title>添加软件储存库</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_addon_new.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_addon_new.png" width="65%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       要通过 SLP 在网络中扫描宣告了其服务的安装服务器，请选择<guimenu>使用 SLP 扫描</guimenu>，然后单击<guimenu>下一步</guimenu>。
      </para>
     </listitem>
     <listitem>
      <para>
       要从可卸媒体添加安装源，请选择相关选项，并在计算机中插入媒体或连接 USB 设备。单击<guimenu>下一步</guimenu>开始安装。
      </para>
     </listitem>
     <listitem>
      <para>
       对于大多数储存库，在选择相应的选项并单击<guimenu>下一步</guimenu>后，系统会提示您指定媒体的路径（或 URL）。可以选择性地指定<guimenu>储存库名称</guimenu>。如果不指定任何储存库名称，YaST 将使用产品的名称或 URL 作为储存库名称。
      </para>
     </listitem>
    </itemizedlist>
    <para>
     默认情况下已激活<guimenu>下载储存库说明文件</guimenu>选项。如果停用该选项，YaST 稍后会根据需要自动下载这些文件。
    </para>
   </step>
   <step performance="required">
    <para>
     根据您添加的安装源，可能会询问您是否要导入为安装源签名的 GPG 密钥，或者要求同意接受某个许可证。
    </para>
    <para>
     确认这些消息后，YaST 将下载并分析元数据。它会将储存库添加到<guimenu>已配置储存库</guimenu>列表。
    </para>
   </step>
   <step performance="required">
    <para>
     如果需要，请根据<xref linkend="sec.y2.sw.instsource.manage"/>中所述调整储存库的<guimenu>属性</guimenu>。
    </para>
   </step>
   <step performance="required">
    <para>
     单击<guimenu>确定</guimenu>确认所做的更改，并关闭配置对话框。
    </para>
   </step>
   <step performance="required">
    <para>
     成功添加储存库之后，会启动软件管理器，您可以从此储存库安装包。有关详细信息，请参见<xref linkend="cha.y2.sw"/>。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 id="sec.y2.sw.instsource.manage">
  <title>管理安装源属性</title>
  <para>
   通过<guimenu>软件安装源</guimenu>的<guimenu>已配置的软件安装源</guimenu>概述，可以更改以下安装源属性：
  </para>
  <variablelist>
   <varlistentry>
    <term>状态</term>
    <listitem>
     <para>
      安装源状态可以为<guimenu>已启用</guimenu>或<guimenu>已禁用</guimenu>。您只能从已启用的安装源安装包。要暂时关闭某个储存库，请将它选中并停用<guimenu>启用</guimenu>。您还可以双击某个安装源名称来切换其状态。如果希望完全删除安装源，可以单击<guimenu>删除</guimenu>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>刷新</term>
    <listitem>
     <para>
      刷新安装源时，它的内容描述（包名称、版本等）将由 YaST 下载到本地超速缓存中。对于诸如 CD 或 DVD 之类的静态安装源，该操作执行一次就已足够，而对于内容经常改变的安装源，应经常进行刷新。让安装源的缓存保持最新的最简单方式是选择<guimenu>自动刷新</guimenu>。要执行手动刷新，请单击<guimenu>刷新</guimenu>并选择一个选项。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>保留已下载的包</guimenu>
    </term>
    <listitem>
     <para>
      安装前从远程安装源下载包。默认情况下，安装成功后即删除这些包。激活<guimenu>保留已下载的包</guimenu>可防止删除已下载的包。下载位置在 <filename>/etc/zypp/zypp.conf</filename> 中配置，默认为 <filename>/var/cache/zypp/packages</filename>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>优先级</guimenu>
    </term>
    <listitem>
     <para>
      安装源<guimenu>优先级</guimenu>是一个介于 <literal>1</literal> 和 <literal>200</literal> 之间的值，<literal>1</literal> 是最高优先级，<literal>200</literal> 是最低优先级。默认情况下，通过 YaST 添加的任何新储存库的优先级都是 <literal>99</literal>。如果您不在意某个安装源的优先级值，还可以将值设置为 <literal>0</literal>，表示对该安装源应用默认优先级 (<literal>99</literal>)。如果有多个安装源都提供了某个包，那么将优先使用优先级最高的安装源。如果要通过为本地安装源（如 DVD）指定较高优先级来避免不必要地从因特网下载包，则该设置很有用。
     </para>
     <important>
      <title>优先级与版本 </title>
      <para>
       在任何情况下，优先级最高的安装源都是优先的。因此，请确保更新储存库总是具有最高优先级，否则您可能会安装过时的版本，直到下一次联机更新时才会更新该版本。
      </para>
     </important>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>名称和 URL</term>
    <listitem>
     <para>
      要更改安装源名称或其 URL，可以从列表中单击选择它，然后单击<guimenu>编辑</guimenu>。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 id="sec.y2.sw.repo.gpg-keys">
  <title>管理安装源密钥</title>
  <para>
   为了确保完整性，可使用安装源维护人员的 GPG 密钥来为软件安装源签名。每当您要添加新的储存库时，YaST 都可让您导入其密钥。像校验任何其他 GPG 密钥一样对它进行校验，并确保它未更改。如果检测到密钥更改，则说明安装源可能存在错误。禁用它作为安装源，直到知道密钥更改原因为止。
  </para>
  <para>
   要管理所有导入的密钥，请在<guimenu>已配置的软件储存库</guimenu>对话框中单击 <guimenu>GPG 密钥</guimenu>。用鼠标选择一个项以在窗口底部显示密钥属性。单击相应按钮可<guimenu>添加</guimenu>、<guimenu>编辑</guimenu>或<guimenu>删除</guimenu>密钥。
  </para>
 </sect2>
</sect1>
