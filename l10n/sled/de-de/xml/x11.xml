<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="x11.xml" version="5.0" xml:id="cha-gui-desktop">
 <title>Über die grafische Benutzeroberfläche</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> umfasst den X.org-Server<phrase os="sled;osuse">, Wayland</phrase> und den GNOME-Desktop. In diesem Kapitel wird die Konfiguration der grafischen Benutzeroberfläche für alle Benutzer beschrieben.
   </para>
  </abstract>
 </info>
 <sect1 xml:id="sec-gui-desktop-xorg">
  <title>X Window System</title>
  <para>
   Der X.org-Server ist die allgemeine Norm für die Implementierung des X11-Protokolls. X ist netzwerkbasiert und ermöglicht es, auf einem Host gestartete Anwendungen auf einem anderen, über eine beliebige Art von Netzwerk (LAN oder Internet) verbundenen Host anzuzeigen. 
  </para>
  <para>
   In der Regel muss das X Window System nicht konfiguriert werden. Die Hardware wird beim Starten von X dynamisch erkannt. Die Nutzung von <filename>xorg.conf</filename> ist daher überholt. Wenn Sie die Funktionsweise von X dennoch mit benutzerdefinierten Optionen ändern möchten, können Sie die Konfigurationsdateien unter <filename>/etc/X11/xorg.conf.d/</filename> entsprechend bearbeiten.
  </para>
  <para os="sled;osuse">
   In <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP4</phrase></phrase> ist Wayland als Alternative zum X.org-Server enthalten. Dies kann während der Installation ausgewählt werden.
  </para>
  
  <para>
   Installieren Sie das <systemitem class="resource">xorg-docs</systemitem>-Paket, um detailliertere Informationen zu X11 zu erhalten. Auf der man-Seite <command>man 5 xorg.conf</command> finden Sie weitere Informationen zum Format der manuellen Konfiguration (falls erforderlich). Weitere Informationen zur X11-Entwicklung finden Sie auf der Startseite des Projekts unter <link xlink:href="http://www.x.org"/>.
  </para>

  <para>
   Die Treiber befinden sich in <systemitem>xf86-video-*</systemitem>-Paketen, beispielsweise <systemitem>xf86-video-ati</systemitem>. Viele der Treiber, die mit diesen Paketen geliefert werden, sind ausführlich in der zugehörigen man-Seite beschrieben. Wenn Sie beispielsweise den <literal>ati</literal>-Treiber verwenden, erhalten Sie weitere Informationen auf der man-Seite <command>man 4 ati</command>.
  </para>

  <para>
   Informationen über Treiber von anderen Herstellern stehen in <filename>/usr/share/doc/packages/&lt;paketname&gt;</filename> zur Verfügung. Beispielsweise ist die Dokumentation von <systemitem class="resource">x11-video-nvidiaG03</systemitem>04 nach der Installation des Pakets in <filename>/usr/share/doc/packages/x11-video-nvidiaG</filename> verfügbar.
  </para>
   
  <para>
   Installieren Sie das Paket <systemitem class="resource">xrdp</systemitem> auf einem Server und greifen Sie mithilfe einer RDP-Client-Software über das Remote-Desktop-Protokoll auf den Server zu.
  </para>

 </sect1>
 <xi:include href="x11_fonts.xml"/>
 <sect1 xml:id="sec-gui-desktop-gnome">
  <title>GNOME-Konfiguration für Administratoren</title>

  <sect2 xml:id="sec-gui-desktop-gnome-dconf">
   <title>Das <literal>dconf</literal>-System</title>

   <para>
    Die Konfiguration des GNOME-Desktops wird mit <literal>dconf</literal> verwaltet. Dabei handelt es sich um eine hierarchisch strukturierte Datenbank oder eine Registrierung, über die Benutzer persönliche Einstellungen bearbeiten können. Administratoren können darüber standardmäßige oder obligatorische Werte für alle Benutzer festlegen. <literal>dconf</literal> ersetzt das <literal>gconf</literal>-System von GNOME 2.
   </para>

   <para>
    Mit <command>dconf-editor</command> werden die dconf-Optionen in einer grafischen Benutzeroberfläche angezeigt. <literal></literal> Mit <command>dconf</command> können Sie über die Kommandozeile auf die Konfigurationsoptionen zugreifen und diese Optionen bearbeiten.
   </para>

   <para>
    Das GNOME-Tool <literal>Tweaks</literal> bietet eine unkomplizierte Benutzeroberfläche mit zusätzlichen Konfigurationsoptionen, die über die normale GNOME-Konfiguration hinausgehen. Das Werkzeug lässt sich wahlweise über das GNOME-Anwendungsmenü oder auch über die Befehlszeile mit dem Befehl <command>gnome-tweak-tool</command> starten.
   </para>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-gnome-global">
   <title>Systemweite Konfiguration</title>
   <para>
    Im Verzeichnis <filename>/etc/dconf/db/</filename> können globale <literal>dconf</literal>-Konfigurationsparameter festgelegt werden. Hierzu gehört beispielsweise die Konfiguration für GDM oder das Sperren bestimmter Konfigurationsoptionen für die Benutzer.
   </para>
   <para>
    So erstellen Sie eine systemweite Konfiguration (Beispiel):
   </para>
   <procedure>
    <step>
     <para>
      Erstellen Sie unter <filename>/etc/dconf/db/</filename> ein neues Verzeichnis, das auf <literal>.d</literal> endet. Dieses Verzeichnis kann beliebig viele Textdateien mit Konfigurationsoptionen enthalten. Für dieses Beispiel erstellen Sie die Datei <filename>/etc/dconf/db/network/00-proxy</filename> mit dem folgenden Inhalt:
     </para>
     <screen># This is a comment
[system/proxy/http]
host='10.0.0.1'
enabled=true</screen>
    </step>
    <step>
     <para>
      Parsen Sie die neuen Konfigurationsdirektiven in das dconf-Datenbankformat:
     </para>
     <screen><prompt>&gt; </prompt><command>sudo</command> <command>dconf update</command></screen>
    </step>
    <step>
     <para>
      Tragen Sie die neue <literal>network</literal>-Konfigurationsdatenbank in das Standard-Benutzerprofil ein. Erstellen Sie hierzu die Datei <filename>/etc/dconf/profiles/user</filename>. Fügen Sie dann den folgenden Inhalt ein:
     </para>
     <screen>system-db:network</screen>
     <para>
      Die Datei <filename>/etc/dconf/profiles/user</filename> fungiert als GNOME-Standard. Andere Profile können in der Umgebungsvariablen <literal>DCONF_PROFILE</literal> definiert werden.
     </para>
    </step>
    <step>
     <para>
      Optional: Wenn die Proxy-Konfiguration für die Benutzer gesperrt werden soll, erstellen Sie die Datei <filename>/etc/dconf/db/network/locks/proxy</filename>. Fügen Sie dann eine Zeile mit den Schlüsseln, die nicht geändert werden dürfen, in diese Datei ein:
     </para>
     <screen>/system/proxy/http/host
/system/proxy/http/enabled</screen>
    </step>
   </procedure>
   <para>
    Mit dem grafischen <command>dconf-editor</command> können Sie ein Profil mit einem einzelnen Benutzer erstellen und dann mit <command>dconf dump /</command> eine Liste aller Konfigurationsoptionen abrufen. Die Konfigurationsoptionen können dann in einem globalen Profil gespeichert werden.
   </para>
   <para>
    Eine ausführliche Beschreibung der globalen Konfiguration finden Sie unter <link xlink:href="https://wiki.gnome.org/Projects/dconf/SystemAdministrators"/>
   </para>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-gnome-more-info">
   <title>Weitere Informationen</title>
   <para>
    Weitere Informationen finden Sie im <link xlink:href="http://help.gnome.org/admin/"/>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-gui-desktop-suse-prime">
  <title>Umschalten zwischen Intel- und NVIDIA Optimus-GPUs mit SUSE Prime</title>
  <para>
   SUSE Prime ist ein Werkzeug zum Umschalten zwischen Intel-On-Board-Grafikprozessoren (GPUs) und NVIDIA-GPUs mit der Optimus-Technologie von NVIDIA für „umschaltbare Grafik“. Optimus bietet einen Mechanismus für das einfache Umschalten zwischen einer On-Board-Intel-GPU und einer separaten NVIDIA-GPU. Damit kann ein Laptop wahlweise im Energiesparmodus oder mit maximaler Leistung genutzt werden: Die Intel-GPU spart Strom, die NVIDIA-GPU erweckt 3D-Anwendungen zum Leben.
  </para>

  <para os="sled">
   SUSE Prime ist in der SUSE Linux Enterprise Workstation-Erweiterung für SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP4</phrase></phrase> enthalten.
  </para>

  <para>
   SUSE Prime ist nur auf Systemen mit X11 nutzbar, nicht auf Systemen mit Wayland. Wenn auf Ihrem System Wayland ausgeführt wird, müssen Sie dieses deaktivieren und ein Fallback auf X11 vornehmen, wenn Sie SUSE Prime nutzen möchten (siehe <xref linkend="sec-gui-desktop-suse-prime-prereqs"/>).
  </para>

  <sect2 xml:id="sec-gui-desktop-suse-prime-prereqs">
   <title>Voraussetzungen</title>
    
   
   <para os="sle;sled">
    Sie benötigen einen konfigurierten und funktionierenden NVIDIA Optimus-Grafikprozessor, der die in SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP4</phrase></phrase> enthaltenen NVIDIA-Treiber verwendet (weitere Informationen finden Sie in <xref linkend="sec-gui-desktop-install-nvidia"/>), sowie einen integrierten Intel-Grafikprozessor. Bumblebee, das ältere Umschaltprogramm für NVIDIA Optimus, darf nicht installiert werden.
   </para>
   
   <para>
    Es dürfen keine Datei <filename>/etc/X11/xorg.conf</filename> und keine Konfigurationsdateien mit aktiven Abschnitten „ServerLayout“, „Device“ oder „Screen“ im Verzeichnis <filename>/etc/X11/xorg.conf.d</filename> vorhanden sein.
   </para>
   <para>
    SUSE Prime ist nur unter X11 nutzbar. Prüfen Sie mit dem Kommando <command>loginctl</command>, ob Ihr System X11 oder Wayland verwendet:
   </para>
<screen><prompt>&gt; </prompt>loginctl
   SESSION        UID USER             SEAT             TTY             
         2       1000 tux             seat0               
<prompt>&gt; </prompt>loginctl show-session 2|grep Type
Type=x11
</screen>
   <para>
    Wenn Ihr System Wayland verwendet, deaktivieren Sie Wayland. Bearbeiten Sie hierzu die Datei <filename>/etc/gdm/custom.conf</filename> und entfernen Sie den Kommentar <literal>WaylandEnable=false</literal>. Starten Sie dann neu.
   </para>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-suse-prime-install">
   <title>Installieren und Verwenden von SUSE Prime</title>

    <para>
      Ihre NVIDIA-Grafikkarte sollte bereits installiert und funktionsfähig sein. Andernfalls finden Sie weitere Informationen hierzu unter <xref linkend="sec-gui-desktop-install-nvidia"/>. 
    </para>

   <para>
       Installieren Sie das Paket <package>suse-prime</package>:
   </para>
       <screen><prompt>&gt; </prompt><command>sudo</command> zypper install suse-prime</screen>
     
   <para>
    Zum Umschalten Ihrer GPU führen Sie einen der folgenden Kommandos aus; melden Sie sich dann ab und wieder an:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> prime-select intel
<prompt>&gt; </prompt><command>sudo</command> prime-select intel2
<prompt>&gt; </prompt><command>sudo</command> prime-select nvidia
</screen>
   <para>
    Verwenden Sie den <command>intel</command>-Treiber, wenn dies der Modesetting-Treiber ist. <command>intel2</command> ist für Systeme gedacht, die den <package>xf86-video-intel</package>-Treiber verwenden. Diese Informationen erhalten Sie durch Installieren und Ausführen von <package>inxi</package>:
   </para>
<screen><prompt>&gt; </prompt>inxi -G
Graphics: Device-1: Intel Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics Controller
          Display Server: x11(X.org 1.20.1 ) drivers: modesetting (unloaded: fbdev, vesa)
          Resolution: 1920x1080@60.00hz
          OpenGL: renderer: Mesa DRI Intel Haswell Desktop version: 4.5 Mesa 18.2.8
      </screen>
   <para>
    Welche GPU ist derzeit aktiv?
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> /usr/sbin/prime-select get-current
Driver configured: intel
</screen>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-install-nvidia">
   <title>Installieren von NVIDIA-Treibern</title>
   <para>
    Wenn Sie Ihre NVIDIA-Karte identifizieren müssen, damit Sie den zu verwendenden Treiber ermitteln können, führen Sie folgendes Kommando aus:
</para>
   
<screen><prompt>&gt; </prompt>/sbin/lspci | grep VGA  
</screen>
   
      <para os="sles;sled">
    Installieren Sie die Treiber anhand dieser Schritte mit Zypper.
   </para>

   

   <para>
    Listen Sie die verfügbaren Treiberpakete auf:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> zypper se nvidia
</screen>
   <para>
    Installieren Sie dann die Treiber für Ihre NVIDIA-Grafikkarte:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> zypper se <replaceable>packagename</replaceable>
</screen>
  </sect2>
 </sect1>
</chapter>
