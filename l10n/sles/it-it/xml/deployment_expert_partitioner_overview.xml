<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_expert_partitioner_overview.xml" version="5.0" xml:id="sec-expert-partitioner">
 <title>Utilizzo di <guimenu>Partitioner avanzato</guimenu></title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  <guimenu>Partitioner avanzato</guimenu>, illustrato nella <xref linkend="fig-expert-partitioner-overview"/>, consente di modificare manualmente il partizionamento di uno o più dischi rigidi. È possibile aggiungere, eliminare, ridimensionare e modificare le partizioni, nonché accedere al RAID software e alla configurazione LVM.
 </para>

 <warning>
  <title>creazione di nuove partizioni su un sistema in esecuzione</title>
  <para>
   Benché sia possibile creare nuove partizioni sul sistema mentre è in esecuzione, il rischio di commettere un errore tale da provocare la perdita dei dati è molto alto. Pertanto, è opportuno evitare di creare nuove partizioni sul sistema installato ed eseguire sempre un backup completo dei dati prima di effettuare questa operazione.
  </para>
 </warning>

 <figure xml:id="fig-expert-partitioner-overview">
  <title>YaST Partitioner</title>
  <mediaobject>
   <imageobject role="fo">
    <imagedata fileref="install_partitioner_expert.png" width="75%"/>
   </imageobject>
   <imageobject role="html">
    <imagedata fileref="install_partitioner_expert.png" width="75%"/>
   </imageobject>
  </mediaobject>
 </figure>

 <tip arch="zseries" os="sles">
  <title>IBM Z: nomi dei dispositivi</title>
  <para>
   IBM Z riconosce solo i dischi rigidi DASD e SCSI. I dischi rigidi IDE non sono supportati. Per questo motivo tali dispositivi appaiono nella tabella delle partizioni come <filename>dasda</filename> o <filename>sda</filename> per il primo dispositivo riconosciuto.
  </para>
 </tip>

 <para>
  Tutte le partizioni esistenti o suggerite di tutti i dischi rigidi connessi sono visualizzate nell&apos;elenco <guimenu>Spazio disponibile</guimenu> della finestra di dialogo <guimenu>Partitioner avanzato</guimenu> di YaST. I dischi rigidi completi vengono elencati come dispositivi senza numero; ad esempio <filename>/dev/sda</filename><phrase arch="zseries" os="sles"> (o <filename>/dev/dasda</filename>)</phrase>. Le partizioni vengono elencate come parte di questi dispositivi; ad esempio <filename>/dev/sda1</filename><phrase arch="zseries" os="sles"> (o <filename>/dev/dasda1</filename>, rispettivamente)</phrase>. Vengono visualizzati anche le dimensioni, lo stato della cifratura, il file system e il punto di montaggio dei dischi rigidi e delle loro partizioni. Il punto di montaggio descrive il punto in cui viene visualizzata la partizione nella struttura ad albero del file system Linux.
 </para>

 <para>
  A sinistra nella <guimenu>Vista sistema</guimenu> sono disponibili numerose viste funzionali. È possibile utilizzare tali viste per raccogliere informazioni sulle configurazioni di memorizzazione esistenti o configurare funzioni (come <literal>RAID</literal>, <literal>Gestione volume</literal>, <literal>File cifrati</literal>) e visualizzare i file system con funzioni aggiuntive, ad esempio Btrfs, NFS o <literal>TMPFS</literal>.
 </para>

 <para>
  Se durante l&apos;installazione si seleziona la finestra di dialogo per esperti, verrà anche indicato e selezionato automaticamente lo spazio libero sul disco rigido. Per fornire più spazio su disco a <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, liberare lo spazio necessario dal basso verso l&apos;alto nell&apos;elenco delle partizioni.
 </para>

 <sect2 xml:id="sec-expert-partitioner-tables">
  <title>Tabella delle partizioni</title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> consente di utilizzare e creare <emphasis>tabelle delle partizioni</emphasis> diverse. In alcuni casi la tabella delle partizioni è denominata <emphasis>etichetta disco</emphasis>. La tabella delle partizioni è importante per il processo di avvio del computer. Per avviare il computer da una partizione in una tabella delle partizioni appena creata, assicurarsi che il formato della tabella sia supportato dal firmware.
  </para>
  <para>
   Per modificare la tabella delle partizioni, fare clic sul nome del disco pertinente in <guimenu>Vista sistema</guimenu> e scegliere <menuchoice><guimenu>Esperto</guimenu> <guimenu> Crea nuova tabella delle partizioni</guimenu></menuchoice>.
  </para>
  <sect3 xml:id="sec-expert-partitioner-tables-msdos">
   <title>Master boot record</title>
   <para>
    <emphasis>MBR (Master Boot Record)</emphasis> è la tabella delle partizioni legacy utilizzata nei PC IBM. Talvolta è denominata anche tabella delle partizioni <emphasis>MS-DOS</emphasis>. MBR supporta solo quattro partizioni primarie. Se nel disco è già presente un MBR, <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> consente di creare al suo interno partizioni aggiuntive che è possibile utilizzare come destinazione di installazione.
   </para>
   <para>
    Il limite di quattro partizioni può essere superato mediante la creazione di una <emphasis>partizione estesa</emphasis>. La partizione estesa è di per sé una partizione primaria e può contenere altre <emphasis>partizioni logiche</emphasis>.
   </para>
   <para>
    Di norma il firmware UEFI supporta l&apos;avvio da MBR nella modalità legacy.
   </para>
  </sect3>
  <sect3 xml:id="sec-expert-partitioner-tables-gpt">
   <title>Tabella delle partizioni GPT</title>
   <para>
    I computer UEFI utilizzano per default una <emphasis>tabella delle partizioni GUID</emphasis> (GPT). In mancanza di altre tabelle delle partizioni, <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> crea una GPT su un disco.
   </para>
   <para>
    Il firmware BIOS precedente non supporta l&apos;avvio da partizioni GPT.
   </para>
   <para>
    È necessaria una tabella delle partizioni GPT per utilizzare una delle seguenti funzioni:
   </para>
   <itemizedlist>
    <listitem>
     <para>Più di quattro partizioni primarie</para>
    </listitem>
    <listitem>
     <para>
      Avvio sicuro UEFI
     </para>
    </listitem>
    <listitem>
     <para>
      Usa dischi più grandi di 2 TB
     </para>
    </listitem>
   </itemizedlist>
   <note>
    <title>partizioni create con <productname>Parted</productname> 3.1 o versioni precedenti etichettate in modo errato</title>
    <para>
     Le partizioni GPT create con Parted 3.1 o versioni precedenti utilizzavano il tipo di partizione Microsoft Basic Data al posto della più recente GPT GUID specifica per Linux. Nelle versioni più recenti di Parted tali partizioni vengono contrassegnate con il flag <literal>msftdata</literal> fuorviante. Ciò comporterà anche l&apos;etichettatura delle partizioni da parte di vari strumenti del disco come <emphasis>Partizione dati Windows</emphasis> o simile.
    </para>
    <para>
     Per rimuovere il flag, eseguire:
    </para>
    <screen><prompt role="root"># </prompt>parted <replaceable>DEVICE</replaceable> set <replaceable>PARTITION_NUMBER</replaceable> msftdata off</screen>
   </note>
  </sect3>
  <sect3 xml:id="sec-expert-partitioner-tables-zsystems" os="sles" arch="zseries">
   <title>Tabella delle partizioni su IBM Z</title>
   <para>
    Nelle piattaforme IBM Z, SUSE Linux Enterprise Server supporta <emphasis>dischi rigidi SCSI</emphasis> e <emphasis>dispositivi di memorizzazione ad accesso diretto</emphasis> (DASD). Mentre i dischi SCSI possono essere partizionati come descritto sopra, i dischi DASD possono avere un massimo di 3 partizioni nelle relative tabelle delle partizioni.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-partition">
  <title>Partizioni</title>
  <para>
   YaST Partitioner è in grado di creare e formattare partizioni con diversi file system. Il file system di default utilizzato da <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> è <literal>Btrfs</literal>. Per informazioni, vedere <xref linkend="sec-yast-btrfs"/>.
  </para>
  <para>
   Sono disponibili altri file system comunemente utilizzati: <literal>Ext2</literal>, <literal>Ext3</literal>, <literal>Ext4</literal>, <literal>FAT</literal>, <literal>XFS</literal>, <literal>Swap</literal> e <literal>UDF</literal>.
  </para>
  <sect3 xml:id="sec-expert-partitioner-partition-create">
   <title>Creazione di una partizione</title>
   <para>
    Per creare una partizione, selezionare <guimenu>Dischi rigidi</guimenu>, quindi scegliere un disco rigido con spazio libero. Le effettive modifiche possono essere effettuate tramite la scheda <guimenu>Partizioni</guimenu>:
   </para>
   <procedure>
    <step>
     <para>
      Fare clic su <guimenu>Aggiungi</guimenu> per creare una nuova partizione. Quando si utilizza <emphasis>MBR</emphasis>, specificare se si desidera creare una partizione primaria o estesa. Nella partizione estesa, è possibile creare diverse partizioni logiche. Per informazioni, vedere <xref linkend="sec-expert-partitioner-tables"/>.
     </para>
    </step>
    <step>
     <para>
      Specificare la dimensione della nuova partizione. È possibile scegliere di occupare tutto lo spazio libero non partizionato oppure specificare una dimensione personalizzata.
     </para>
    </step>
    <step>
     <para>
      Selezionare il file system da utilizzare e un punto di montaggio. YaST suggerisce un punto di montaggio per ogni partizione creata. Per utilizzare un metodo di montaggio diverso, come il montaggio per etichetta, selezionare <guimenu>Opzioni Fstab</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Specificare le ulteriori opzioni per il file system, se il programma di installazione lo richiede. Questa operazione è necessaria, ad esempio, se si ha l&apos;esigenza di usare nomi di dispositivi permanenti. Per dettagli sulle opzioni disponibili, vedere <xref linkend="sec-expert-partitioner-options"/>.
     </para>
    </step>
    <step>
     <para>
      Fare clic su <guimenu>Fine</guimenu> per applicare la configurazione del partizionamento e uscire dal modulo.
     </para>
     <para>
      Se la partizione è stata creata durante l&apos;installazione, viene nuovamente visualizzata la schermata panoramica di installazione.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec-yast-btrfs">
   <title>Partizionamento Btrfs</title>
   <remark>The Btrfs is not only default but mandatory.</remark>
   <para>
    Il file system di default per la partizione radice è Btrfs. Per ulteriori dettagli, consultare <xref os="sles" linkend="cha-snapper"/><phrase os="sles"> e <xref linkend="cha-filesystems"/></phrase>. Il file system radice è il sottovolume di default e non è elencato tra i volumi creati. In quanto sottovolume Btrfs di default, è possibile montarlo come file system normale.
   </para>
   <important>
    <title>Btrfs in una partizione radice cifrata</title>
    <para>
     La configurazione di partizionamento di default suggerisce la partizione radice come Btrfs con <filename>/boot</filename> come directory. Per cifrare la partizione radice, assicurarsi di utilizzare il tipo di tabella delle partizioni GPT al posto del tipo MSDOS di default. In caso contrario, nel boot loader GRUB2 potrebbe non essere disponibile spazio sufficiente per il loader della seconda fase.
    </para>
   </important>
   <para>
    È possibile creare snapshot dei sottovolumi Btrfs, sia manualmente che automaticamente, in base agli eventi di sistema. Ad esempio, quando si apportano modifiche al file system, <command>zypper</command> richiama il comando <command>snapper</command> per creare snapshot prima e dopo la modifica. Questo metodo è utile se non si è soddisfatti con la modifica effettuata da <command>zypper</command> e si desidera ripristinare lo stato precedente. Poiché il comando <command>snapper</command> richiamato da <command>zypper</command> crea per default snapshot del file system <emphasis>root</emphasis>, ha senso escludere directory specifiche dagli snapshot. Per questo motivo YaST suggerisce la creazione dei seguenti sottovolumi separati:
   </para>
   <xi:include href="snapshot_excludes_i.xml"/>
   <tip>
    <title>dimensioni della partizione Btrfs</title>
    <para>
     Poiché per gli snapshot salvati è richiesto più spazio su disco, si consiglia di riservare spazio sufficiente per Btrfs. Sebbene le dimensioni minime di una partizione Btrfs root con istantanee e sottovolumi predefiniti siano pari a 16 GB, SUSE consiglia almeno 32 GB o più se <filename>/home</filename> non si trova in una partizione distinta.
    </para>
   </tip>
  </sect3>
  <sect3 xml:id="sec-yast-btrfs-subvolumes">
   <title>Gestione dei sottovolumi Btrfs con YaST</title>
   <para>
    È ora possibile gestire una partizione Btrfs con il modulo <guimenu>Partitioner avanzato</guimenu> di YaST. È possibile aggiungere sottovolumi nuovi o rimuovere quelli esistenti.
   </para>
   <procedure xml:id="pro-yast-btrfs-subvolumes">
    <title>Sottovolumi Btrfs con YaST</title>
    
    
    <step>
     <para>
      Scegliere <guimenu>Btrfs</guimenu> nel riquadro laterale sinistro.
     </para>
    </step>
    <step>
     <para>
      Selezionare la partizione Btrfs di cui si devono gestire i sottovolumi.
     </para>
    </step>
    
    
    <step>
     <para>
      A seconda che si desideri modificare, aggiungere o rimuovere sottovolumi, procedere come indicato di seguito:
     </para>
     <substeps performance="required">
      <step>
       <para>
        Per modificare un sottovolume, selezionarne il nome nell&apos;elenco e fare clic su <guimenu>Modifica</guimenu>. È quindi possibile disabilitare <literal>copy-on-write</literal> (selezionare <guimenu>noCoW</guimenu>) per il volume o limitarne le dimensioni. Fare clic su <guimenu>Accetta</guimenu> per terminare.
       </para>
      </step>
      <step>
       <para>
        Per aggiungere un nuovo sottovolume, fare clic su <guimenu>Aggiungi sottovolume</guimenu> e immetterne il percorso. Facoltativamente, è possibile disabilitare <literal>copy-on-write</literal> (selezionare <guimenu>noCoW</guimenu>) per il volume o limitarne le dimensioni. Fare clic su <guimenu>Accetta</guimenu> per terminare.
       </para>
      </step>
      <step>
       <para>
        Per rimuovere un sottovolume, selezionarne il nome nell&apos;elenco e fare clic su <guimenu>Elimina</guimenu>. Per confermare l&apos;eliminazione, fare clic su <guimenu>Sì</guimenu>.
       </para>
      </step>
      <step>
       <para>
       </para>
       <figure xml:id="fig-yast2-btrfs-subvolumes">
        <title>Sottovolumi Btrfs nel partitioner di YaST</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="install_partitioner_btrfs_subvolumes.png" width="75%"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="install_partitioner_btrfs_subvolumes.png" width="75%"/>
         </imageobject>
        </mediaobject>
       </figure>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      Abbandonare il partitioner facendo clic su <guimenu>Fine</guimenu>.
     </para>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-options">
  <title>Modifica di una partizione</title>
  <para>
   Quando si crea una nuova partizione o si modifica una partizione esistente, è possibile impostare vari parametri. I parametri di default impostati da YaST per le nuove partizioni sono generalmente sufficienti e non richiedono alcuna modifica. Per modificare manualmente la configurazione della partizione, procedere come segue:
  </para>
  <procedure>
   <step>
    <para>
     Scegliere la partizione.
    </para>
   </step>
   <step>
    <para>
     Fare clic su <guimenu>Modifica</guimenu> per modificare la partizione e impostare i parametri:
    </para>
    <variablelist>
     <varlistentry>
      <term>ID file system</term>
      <listitem>
       <para>
        Anche se non si intende ancora formattare la partizione, assegnarle un ID file system per garantire che la partizione sia registrata correttamente. I valori che è possibile utilizzare sono <guimenu>Linux</guimenu>, <guimenu>Linux swap</guimenu>, <guimenu>Linux LVM</guimenu> e <guimenu>Linux RAID</guimenu>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       File system
      </term>
      <listitem>
       <para>
        Per modificare il file system della partizione, fare clic su <guimenu>Formatta partizione</guimenu> e selezionare il tipo di file system dall&apos;elenco <guimenu>File system</guimenu>.
       </para>
       <para>
        <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> supporta diversi tipi di file system. Btrfs è il file system Linux scelto per la partizione radice in quanto presenta funzionalità avanzate. Tale file system supporta la funzionalità copy-on-write, la creazione di snapshot, il frazionamento in più dispositivi, i sottovolumi e altre funzionalità utili. XFS, Ext3 ed Ext4 sono file system con journaling. Tali file system sono in grado di ripristinare il sistema molto velocemente dopo un&apos;interruzione, avvalendosi di processi di scrittura registrati durante il funzionamento. Ext2 non è un file system con journaling, tuttavia risulta particolarmente appropriato per partizioni di dimensioni ridotte in quanto per la sua gestione non è richiesto molto spazio su disco.
       </para>
       <para>
        Il file system di default per la partizione radice è Btrfs. Il file system di default per le altre partizioni è XFS.
       </para>
       <para>
        È possibile utilizzare il file system UDF su supporti ottici riscrivibili e non, unità flash USB e dischi fissi. È supportato da più sistemi operativi.
       </para>
       <para>
        Swap è un formato speciale che consente l&apos;utilizzo della partizione come memoria virtuale. Creare una partizione swap di almeno 256 MB. Se tuttavia si utilizza tutto lo spazio di scambio, considerare di aggiungere memoria al sistema anziché lo spazio di scambio.
       </para>
       <warning>
        <title>modifica del file system</title>
        <para>
         La modifica del file system e la riformattazione delle partizioni provoca la cancellazione definitiva di tutti i dati dalla partizione.
        </para>
       </warning>
       <para>
        Per informazioni dettagliate sui vari file system, fare riferimento alla <citetitle>Storage Administration Guide</citetitle> (Guida all&apos;amministrazione della memorizzazione).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Dispositivo cifrato
      </term>
      <listitem>
       <para>
        Se si attiva la cifratura, tutti i dati scritti sul disco rigido saranno cifrati. Questa operazione incrementa la sicurezza dei dati sensibili, ma riduce la velocità del sistema poiché l&apos;elaborazione dei dati cifrati richiede più tempo. <phrase os="sles">Per ulteriori informazioni sulla cifratura dei file system, vedere il <xref linkend="cha-security-cryptofs"/>&#x002E;</phrase>
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Punto di montaggio
      </term>
      <listitem>
       <para>
        Specificare la directory in cui installare la partizione all&apos;interno dell&apos;albero del file system. Selezionare uno dei suggerimenti di YaST oppure immettere un altro nome.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Opzioni Fstab
      </term>
      <listitem>
       <para>
        Impostare i vari parametri contenuti nel file di amministrazione del file system globale (<filename>/etc/fstab</filename>). Le impostazioni di default sono generalmente adatte alla maggior parte delle configurazioni. Ad esempio è possibile modificare l&apos;ID del file system, modificandolo dal nome del dispositivo all&apos;etichetta di volume. Nell&apos;etichetta di volume è possibile utilizzare tutti i caratteri eccetto <literal>/</literal> e spazio.
       </para>
       <para>
        Per ottenere nomi di dispositivi permanenti, utilizzare l&apos;opzione di montaggio <guimenu>ID dispositivo</guimenu>, <guimenu>UUID</guimenu> o <guimenu>ETICHETTA</guimenu>. In <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> i nomi dei dispositivi permanenti sono abilitati per default.
       </para>
       <note os="sles" arch="zseries">
        <title>IBM Z: montaggio in base al percorso</title>
        <para>
         Poiché il montaggio per ID genera problemi sui dischi IBM Z quando si utilizza la funzione di copia da disco a disco a scopo di clonazione, per default i dispositivi vengono montati per percorso in <filename>/etc/fstab</filename> sui dischi IBM Z.
        </para>
       </note>
       <para>
        Se si preferisce montare la partizione in base all&apos;etichetta, è necessario definirne una nel campo <guimenu>Etichetta volume</guimenu>. Ad esempio è possibile usare l&apos;etichetta della partizione <literal>HOME</literal> per una partizione che deve essere montata in <filename>/home</filename>.
       </para>
       <para>
        Per usare quote per il file system, usare l&apos;opzione di installazione <guimenu>Abilita supporto quota</guimenu>. Questa operazione deve essere effettuata prima delle definizione delle quote per gli utenti nel modulo <guimenu>Gestione utenti</guimenu> di YaST.<phrase os="sles"> Per ulteriori informazioni su come configurare le quote per gli utenti, vedere il <xref linkend="sec-yast-userman-adv-quota"/>&#x002E;</phrase>
       </para>
       <para os="sles">
        Ulteriori informazioni su come specificare quote per sottovolumi Btrfs sono disponibili qui: <xref linkend="sec-filesystems-major-btrfs-quota"/>.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     Fare clic su <guimenu>Fine</guimenu> per salvare le modifiche.
    </para>
   </step>
  </procedure>
  <note>
   <title>ridimensionamento dei file system</title>
   <para>
    Per ridimensionare un file system esistente, selezionare la partizione e utilizzare <guimenu>Ridimensiona</guimenu>. Si noti che non è possibile ridimensionare le partizioni montate. Per ridimensionare le partizioni, disinstallare la partizione interessata prima di eseguire il partitioner.
   </para>
  </note>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-options2">
  <title>Opzioni di Esperto</title>
  <para>
   Dopo aver selezionato un dispositivo disco rigido (ad esempio <guimenu>sda</guimenu>) nel riquadro <guimenu>Vista sistema</guimenu>, è possibile accedere al menu <guimenu>Esperto</guimenu> dal lato inferiore destro della finestra <guimenu>Partitioner avanzato</guimenu>. Il menu presenta i seguenti comandi:
  </para>
  <variablelist>
   <varlistentry>
    <term>Crea nuova tabella delle partizioni</term>
    <listitem>
     <para>
      Utilizzare questa opzione per creare una nuova tabella delle partizioni sul dispositivo selezionato.
     </para>
     <warning>
      <title>creazione di una nuova tabella delle partizioni</title>
      <para>
       La creazione di una nuova tabella delle partizioni sul dispositivo provoca la cancellazione definitiva di tutte le partizioni e dei relativi dati da tale dispositivo.
      </para>
     </warning>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Clona questo disco</term>
    <listitem>
     <para>
      Utilizzare questa opzione per clonare il layout delle partizioni di un dispositivo (senza i rispettivi dati) negli altri dispositivi disco disponibili.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-configure-options">
  <title>Opzioni avanzate</title>
  <para>
   Dopo aver selezionato il nome host del computer (il livello superiore dell&apos;albero nel riquadro <guimenu>Vista sistema</guimenu>), è possibile accedere al menu <guimenu>Configura</guimenu> dal lato inferiore destro della finestra <guimenu>Partitioner avanzato</guimenu>. Il menu presenta i seguenti comandi:
  </para>
  <variablelist>
   <varlistentry>
    <term>Configura dischi iSCSI</term>
    <listitem>
     <para>
      Per accedere a SCSI tramite i dispositivi di blocco IP, è innanzitutto necessario configurare iSCSI. Questa operazione rende disponibili ulteriori periferiche nell&apos;elenco delle partizioni principali.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Configura Multipath</term>
    <listitem>
     <para>
      Selezionare questa opzione per configurare il miglioramento multipath per i dispositivi di storage di massa supportati.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-info">
  <title>Altri suggerimenti per il partizionamento</title>
  <para>
   Nella sezione che segue vengono forniti alcuni suggerimenti relativi al partizionamento che possono risultare utili in fase di configurazione del sistema.
  </para>
  <sect3 xml:id="sec-expert-partitioner-info-cylinders">
   <title>Numeri di cilindri</title>
   <para>
    Si noti che strumenti di partizionamento diversi possono iniziare il conteggio dei cilindri di una partizione da <literal>0</literal> o <literal>1</literal>. Quando si calcola il numero di cilindri, è sempre necessario utilizzare la differenza tra i numeri dell&apos;ultimo e primo cilindro e aggiungere uno.
   </para>
  </sect3>
  <sect3 xml:id="sec-expert-partitioner-info-swap">
   <title>Utilizzo dello <literal>scambio</literal></title>
   <para>
    Lo scambio permette di estendere la memoria fisica disponibile e poter utilizzare quindi più memoria rispetto alla memoria RAM disponibile. Il sistema di gestione della memoria dei kernel anteriore alla versione 2.4.10 utilizzava lo scambio come misura di sicurezza. Quindi, le prestazioni del sistema risultavano inferiori se nel spazio di scambio non era disponibile una memoria pari al doppio della memoria RAM. Queste limitazioni sono più applicabili.
   </para>
   <para>
    Linux utilizza una pagina <quote>Least Recently Used</quote> (Ultimi utilizzati meno di recente) (LRU) per selezionare pagine che possono essere state spostate dalla memoria al disco. Ciò rende disponibile più memoria alle applicazioni in esecuzione e rende più efficientemente l&apos;operazione di memorizzazione nella cache.
   </para>
   <para>
    Se un&apos;applicazione tenta di allocare la memoria massima consentita, è possibile che si verifichino problemi con lo scambio. I tre principali scenari a cui fare riferimento sono:
   </para>
   <variablelist>
    <varlistentry>
     <term>Sistema senza scambio</term>
     <listitem>
      <para>
       L&apos;applicazione ottiene la quantità massima di memoria disponibile. Poiché tutte le cache vengono cancellate, tutte le altre applicazioni in esecuzione risultano rallentate. Dopo qualche minuto si attiva il meccanismo di terminazione per l&apos;esaurimento della memoria del kernel che termina il processo.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Sistema con scambio di medie dimensioni (128 - 512 MB)</term>
     <listitem>
      <para>
       Inizialmente, il sistema diventa lento come se si trattasse di un sistema senza scambio. Dopo l&apos;allocazione di tutta la RAM fisica, viene utilizzato anche lo spazio di scambio. A questo punto il sistema diventa molto lento ed è impossibile eseguire i comandi in remoto. A seconda della velocità dei dischi rigidi che eseguono lo spazio di scambio, il sistema permane in questa condizione per circa 10-15 minuti fino a che il meccanismo di terminazione per l&apos;esaurimento della memoria non risolve il problema. Si noti che è necessario disporre di un determinato spazio di scambio se si desidera che il computer esegua una <quote>sospensione su disco</quote>. In questo caso, le dimensioni dello spazio di scambio devono essere tali da contenere tutti i dati necessari della memoria (512 MB - 1 GB).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Sistema con numerosi scambi (molti GB)</term>
     <listitem>
      <para>
       È preferibile evitare che l&apos;applicazione sia fuori controllo ed effettui un numero eccessivo di scambi. Se si utilizza un&apos;applicazione di questo tipo, il ripristino del sistema potrebbe richiedere molte ore. Durante il processo, è possibile che si verifichino timeout e guasti negli altri processi e che il sistema rimanga in uno stato non definito anche dopo l&apos;interruzione del processo guasto. In questo caso, è necessario effettuare un riavvio hardware del computer e provare a mettere il computer nuovamente in funzione. Una grande quantità di scambio è utile solo se si dispone di un&apos;applicazione che fa affidamento su questa funzione. Queste applicazioni (come i database o i programmi di manipolazione della grafica) hanno spesso un&apos;opzione che consente di utilizzare direttamente lo spazio su disco rigido per le loro necessità. È consigliabile utilizzare questa opzione anziché usare molto spazio di scambio.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Se il sistema non è fuori controllo, ma necessita di una maggiore quantità di scambio dopo un po&apos; di tempo, è possibile ampliare lo spazio di scambio online. Se è stata preparata una partizione per lo spazio di scambio, aggiungerla con YaST. Se non è disponibile alcuna partizione, è anche possibile utilizzare un file di scambio per ampliare lo spazio di scambio. I file di scambio sono generalmente più lenti delle partizioni. Tale differenza è trascurabile, perché sia i file di scambio che le partizioni sono entrambi estremamente lenti rispetto alla RAM fisica.
   </para>
   <procedure>
    <title>Aggiunta manuale di un file di scambio</title>
    <para>
     Per aggiungere un file di scambio al sistema in esecuzione, procedere come segue:
    </para>
    <step>
     <para>
      Creare un file vuoto nel sistema. Ad esempio per aggiungere un file di scambio con uno scambio di 128 MB in <filename>/var/lib/swap/swapfile</filename>, utilizzare i comandi:
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkdir -p /var/lib/swap
<prompt>&gt; </prompt><command>sudo</command> dd if=/dev/zero of=/var/lib/swap/swapfile bs=1M count=128</screen>
    </step>
    <step>
     <para>
      Inizializzare questo file di scambio utilizzando il comando
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkswap /var/lib/swap/swapfile</screen>
      <note>
  <title>modifica dello UUID delle partizioni di scambio durante la formattazione tramite <command>mkswap</command></title>
  <para>Se possibile, evitare di utilizzare <command>mkswap</command> per riformattare le partizioni di scambio esistenti. La riformattazione tramite <command>mkswap</command> determina la modifica del valore UUID della partizione di scambio. Eseguire la riformattazione tramite YaST (che aggiorna <filename>/etc/fstab</filename>) oppure modificare <filename>/etc/fstab</filename> manualmente.
  </para>
</note>
    </step>
    <step>
     <para>
      Attivare lo scambio utilizzando il comando
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> swapon /var/lib/swap/swapfile</screen>
     <para>
      Per disabilitare il file di scambio, utilizzare il comando
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> swapoff /var/lib/swap/swapfile</screen>
    </step>
    <step>
     <para>
      Controllare gli spazi di scambio attualmente disponibili utilizzando il comando
     </para>
<screen><prompt>&gt; </prompt>cat /proc/swaps</screen>
     <para>
      Si noti che a questo punto si tratta solo di uno spazio di scambio temporaneo. Dopo il riavvio successivo, non verrà più utilizzato.
     </para>
    </step>
    <step>
     <para>
      Per abilitare permanentemente il file di scambio, aggiungere la seguente riga a <filename>/etc/fstab</filename>:
     </para>
<screen>/var/lib/swap/swapfile swap swap defaults 0 0</screen>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-lvm">
  <title>Partizionamento e LVM</title>
  <para>
   Da <guimenu>Partitioner avanzato</guimenu> accedere alla configurazione LVM facendo clic sulla voce <guimenu>Gestione volume</guimenu> nel riquadro <guimenu>Vista sistema</guimenu>. Tuttavia, se è già presente una configurazione LVM funzionante nel sistema, viene automaticamente attivata al momento in cui si accede alla configurazione LVM iniziale di una sessione. In questo caso non è possibile suddividere nuovamente in partizioni tutti i dischi che contengono una partizione appartenente a un gruppo di volumi attivato. Il kernel Linux non è in grado di leggere nuovamente la tabella delle partizioni modificate di un disco rigido se una delle sue partizioni è in uso. Se nel sistema è già presente una configurazione LVM funzionante, non è generalmente necessario effettuare una nuova operazione di suddivisione in partizioni fisica. Modificare invece la configurazione dei volumi logici.
  </para>
  <para>
   Le informazioni relative al volume vengono scritte nella partizione all&apos;inizio dei volumi fisici (physical volume, PV) Per riutilizzare tale partizione per altri scopi non LVM, è consigliabile eliminare l&apos;inizio del volume. Ad esempio, nel <literal>sistema</literal> VG e nel PV <filename>/dev/sda2</filename>, eseguire l&apos;operazione con il comando:
  </para>
<screen><command>dd</command> <option>if=/dev/zero of=/dev/sda2 bs=512 count=1</option></screen>
  <warning>
   <title>file system per l&apos;avvio</title>
   <para>
    Il file system utilizzato per l&apos;avvio (il file system radice o <filename>/boot</filename>) non deve essere memorizzato su un volume logico LVM. Memorizzarlo invece su una normale partizione fisica.
   </para>
  </warning>
  <para os="sles">
   Per ulteriori dettagli su LVM, vedere <xref linkend="book-storage"/>.
  </para>
 </sect2>
</sect1>
