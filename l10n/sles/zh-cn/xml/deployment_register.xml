<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_register.xml" version="5.0" xml:id="cha-register-sle">
 <title>注册 SUSE Linux Enterprise 和管理模块/扩展</title>
 <info>
  <abstract>
   <para>
    要获取技术支持和产品更新，需要在 SUSE Customer Center 中注册并激活 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。建议您在安装期间注册，因为这样可以随系统一起安装最新的可用更新和补丁。不过，如果您处于脱机状态或者想跳过注册步骤，以后随时可以从安装的系统注册。
   </para>
   <para>
    模块和扩展可为系统添加功能，并可让您根据需要自定义系统。这些组件也需要注册，可以使用 YaST 或命令行工具对其进行管理。有关更多细节，请参见<xref linkend="article-modules"/>。
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>是</dm:translation>
  </dm:docmanager>
 </info>

 <note>
  <title>SUSE 帐户</title>
  <para>
   需有一个 SUSE 帐户才能在 SUSE Customer Center 中注册。如果您没有 SUSE 帐户，请转到 SUSE Customer Center 主页 (<link xlink:href="https://scc.suse.com/"/>) 创建一个帐户。
  </para>
 </note>

 <tip>
  <title>取消注册系统</title>
  <para>
   要完全取消注册某个系统（包括所有模块和扩展），请使用命令行工具 <command>SUSEConnect</command>。取消注册某个系统会去除其在注册服务器中的项，并去除模块、扩展和产品本身的所有储存库。
  </para>
  <screen><prompt>tux &gt; </prompt>sudo SUSEConnect -d</screen>
 </tip>

 <sect1 xml:id="sec-register-sle-installation">
  <title>在安装期间注册</title>
  <para>
   最方便的注册方法是在安装期间注册，这也是建议的方法。这样，您不仅可以安装最新的 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 补丁，而且还能访问所有模块和扩展，而无需提供附加的安装媒体。此方法同样适用于所要安装的所有模块或扩展。有关注册过程的细节，请参见<xref linkend="sec-yast-install-scc-registration"/>。
  </para>
  <para>
   如果在安装期间成功注册了系统，则 YaST 将会添加 SUSE Customer Center 提供的联机储存库。这可以防止本地安装源不再可用时出现问题，并确保您始终从联机储存库获取最新更新。
  </para>
 </sect1>

 <sect1 os="sles" xml:id="sec-register-sle-ay">
  <title>在自动部署期间注册</title>
  <para>
   如果您使用 AutoYaST 自动部署实例，可以在安装期间注册系统，只需在 AutoYaST 控制文件中提供相关的信息即可。有关细节，请参考<xref linkend="CreateProfile-Register"/>。
  </para>
 </sect1>
 <sect1 xml:id="sec-register-sle-system">
  <title>从安装的系统注册</title>
  <para>
   如果您在安装期间跳过了注册或者想要重新注册系统，随时可以使用 YaST 模块<guimenu>产品注册</guimenu>或命令行工具 <command>SUSEConnect</command> 进行注册。
  </para>

  <sect2 xml:id="sec-register-sle-system-yast">
   <title>使用 YaST 注册</title>
   <para>
    要注册系统，请启动 <menuchoice><guimenu>YaST</guimenu>
    <guimenu>软件</guimenu> <guimenu>产品注册</guimenu></menuchoice>。首先注册 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>，然后选择您要启用的模块和扩展。
   </para>

   <important>
    <title>模块和扩展</title>
    <para>
     如果您在安装系统时跳过了注册，并且系统是从 SLE-15-SP3-Full-<replaceable>ARCH</replaceable>-GM-media1.iso 媒体安装的，请务必注册您在安装期间选择的所有模块和扩展。您只会收到已注册模块和扩展的安全更新与补丁。
    </para>
   </important>

   <procedure>
    <title>使用 YaST 注册产品</title>
    <step>
     <para>
      启动 <menuchoice><guimenu>YaST</guimenu>
      <guimenu>软件</guimenu> <guimenu>产品注册</guimenu></menuchoice>。
     </para>
     <informalfigure>
      <mediaobject>
       <textobject role="description">
        <phrase><guimenu>注册</guimenu>对话框</phrase>
       </textobject>
       <imageobject role="fo">
        <imagedata os="sles" fileref="yast2_register_sles.png" width="75%" format="png"/>
        
       </imageobject>
       <imageobject role="html">
        <imagedata os="sles" fileref="yast2_register_sles.png" width="100%" format="png"/>
        
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      提供与您或您的组织管理订阅时所用的 SUSE 帐户关联的<guimenu/>电子邮件地址。此外，请输入随 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 副本一起提供给您的<guimenu>注册码</guimenu>。
     </para>
    </step>
    <step>
     <para>
      系统默认会在 SUSE Customer Center 中注册。转到下一步骤以开始注册。
     </para>
     <para>
      如果您的组织提供了本地注册服务器，您可以从自动检测到的服务器列表中选择一个服务器，或者在<guimenu>通过本地 SMT 服务器注册系统</guimenu>中提供 URL。
     </para>
    </step>
    <step>
     <para>
      选择<guimenu>下一步</guimenu>启动注册过程。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 将注册到所选的服务器，关联的储存库将添加到您的系统。此时会打开<guimenu>扩展和模块选择</guimenu>对话框。
     </para>
     <informalfigure>
      <mediaobject>
       <textobject role="description">
        <phrase><guimenu>扩展和模块选择</guimenu>对话框</phrase>
       </textobject>
       <imageobject role="fo">
        <imagedata os="sles" fileref="yast2_extension_list_sles.png" width="75%" format="png"/>
        
       </imageobject>
       <imageobject role="html">
        <imagedata os="sles" fileref="yast2_extension_list_sles.png" width="100%" format="png"/>
        
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      选择您要在系统中启用的所有模块和扩展。至少应该选择列表中已预先选择的模块（<guimenu>Basesystem Module</guimenu> <phrase os="sles"> 和 <guimenu>Server Applications Module</guimenu></phrase>）。另外，请务必选择您在安装期间添加的任何附加模块或扩展。请注意，需要为所有扩展提供付费购买的附加注册码。单击<guimenu>下一步</guimenu>继续。
     </para>
    </step>
    <step>
     <para>
      根据所做的选择，您现在可能需要接受一个或多个许可协议。所有组件将注册到所选的服务器，关联的储存库将添加到您的系统。
     </para>
    </step>
    <step>
     <para>
      YaST 软件包安装程序将会打开，以安装每个模块的发行软件包；根据所选的模块和扩展，它还会安装其他的软件包。强烈建议<emphasis>不要取消选择</emphasis>系统预先选择的任何软件包；不过，您可以添加其他的软件包。
     </para>
     <informalfigure>
      <mediaobject>
       <textobject role="description">
        <phrase><guimenu>安装摘要</guimenu>屏幕</phrase>
       </textobject>
       <imageobject role="fo">
        <imagedata os="sles" fileref="yast2_extension_install_sles.png" width="75%" format="png"/>
        
       </imageobject>
       <imageobject role="html">
        <imagedata os="sles" fileref="yast2_extension_install_sles.png" width="100%" format="png"/>
        
       </imageobject>
      </mediaobject>
     </informalfigure>
     <para>
      依次选择<guimenu>接受</guimenu>和<guimenu>完成</guimenu>以完成注册过程。
     </para>
    </step>
   </procedure>
   </sect2>

  <sect2 xml:id="sec-register-sle-system-suseconnect">
   <title>使用 SUSEConnect 注册</title>
   <para>
    也可以使用 <command>SUSEConnect</command> 通过命令行注册系统以及模块和扩展。如果所需的信息超出了本节的范畴，请使用 <command>man 8 SUSEConnect</command> 查看随附的文档。
   </para>
   <procedure>
    <title>使用 SUSEConnect 注册产品</title>
    <step>
     <para>
      要将 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 注册到 SUSE Customer Center，请如下所示运行 <command>SUSEConnect</command>：
     </para>
     <screen><prompt>tux &gt; </prompt>sudo SUSEConnect -r <replaceable>REGISTRATION_CODE</replaceable> -e <replaceable>EMAIL_ADDRESS</replaceable></screen>
     <para>
      要在本地注册服务器中注册，另请提供该服务器的 URL：
     </para>
     <screen><prompt>tux &gt; </prompt>sudo SUSEConnect -r <replaceable>REGISTRATION_CODE</replaceable> -e <replaceable>EMAIL_ADDRESS</replaceable> \
--url "https://suse_register.example.com/"</screen>
     <para>
      将 <replaceable>REGISTRATION_CODE</replaceable> 替换为与 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 副本一同收到的注册码。将 <replaceable>EMAIL_ADDRESS</replaceable> 替换为与您或您的组织管理订阅时所用的 SUSE 帐户关联的电子邮件地址。
     </para>
     <para>
      此过程将会注册 <guimenu>Basesystem Module</guimenu>
      <phrase os="sles"> 和 <guimenu>Server Applications Module</guimenu></phrase>，并将关联的储存库添加到您的系统。
     </para>
    </step>
    <step>
     <para>
      现已注册包括两个默认储存库的 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。如果您想要注册更多的模块或扩展，请根据<xref linkend="sec-register-sle-add-modules"/>中所述继续注册。
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-register-sle-add-modules">
  <title>在正在运行的系统中管理模块和扩展</title>
  <para>
   即使是在安装和注册系统之后，也仍可以添加和去除模块与扩展。可以使用 YaST 或 <command>SUSEConnect</command> 来完成此任务。有关更多细节，请参见<xref linkend="article-modules"/>。
  </para>
  <sect2 xml:id="sec-register-sle-add-modules-yast">
   <title>使用 YaST 添加模块和扩展</title>
   <procedure>
    <step>
     <para>
      启动 <menuchoice><guimenu>YaST</guimenu>
      <guimenu>软件</guimenu> <guimenu>系统扩展</guimenu></menuchoice>。
     </para>
     <informalfigure>
      <mediaobject>
       <textobject role="description">
        <phrase><guimenu>扩展和模块选择</guimenu>对话框</phrase>
       </textobject>
       <imageobject role="fo">
        <imagedata os="sles" fileref="yast2_extension_list_sles.png" width="75%" format="png"/>
        
       </imageobject>
       <imageobject role="html">
        <imagedata os="sles" fileref="yast2_extension_list_sles.png" width="100%" format="png"/>
        

       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      要添加模块或扩展，请选择您要安装的所有组件。请注意，需要为所有扩展提供付费购买的附加注册码。
     </para>
    </step>
    <step>
     <para>
      所有附加组件将注册到注册服务器，关联的储存库将添加到您的系统。
     </para>
    </step>
    <step>
     <para>
      YaST 软件包安装程序将会打开，以安装每个模块的发行软件包；根据所选的模块和扩展，它还会安装其他的软件包。强烈建议<emphasis>不要取消选择</emphasis>系统预先选择的任何软件包；不过，您可以添加其他的软件包。
     </para>
     <para>
      依次选择<guimenu>接受</guimenu>和<guimenu>完成</guimenu>以完成该过程。
     </para>
    </step>
   </procedure>
   <tip>
    <title>模块依赖项</title>
    <para>
     软件包可能需要依赖其他软件包才能正常运行，而模块与此类似，它们也可能依赖于其他模块。如果存在这种情况，系统会自动选择安装所依赖的模块。
    </para>
   </tip>

  </sect2>

  <sect2 xml:id="sec-register-sle-delete-modules-yast">
   <title>使用 YaST 删除模块和扩展</title>
   <procedure>
    <step>
     <para>
      启动 <menuchoice><guimenu>YaST</guimenu>
      <guimenu>软件</guimenu> <guimenu>附加产品</guimenu></menuchoice>。
     </para>
     <informalfigure>
      <mediaobject>
       <textobject role="description">
        <phrase><guimenu>已安装的附加产品</guimenu>对话框</phrase>
       </textobject>
       <imageobject role="fo">
        <imagedata os="sles" fileref="yast2_addon_installed_sles.png" width="75%" format="png"/>
        
       </imageobject>
       <imageobject role="html">
        <imagedata os="sles" fileref="yast2_addon_installed_sles.png" width="100%" format="png"/>
        
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      选择要去除的模块或扩展，然后单击<guimenu>删除</guimenu>。当有警告指出将要去除选定组件中的所有软件包时，请确认删除。
     </para>
    </step>
    <step>
     <para>
      YaST 软件管理器此时将会打开，并列出已删除的模块或扩展中所有已安装的软件包。单击<guimenu>接受</guimenu>以去除所有这些软件包。强烈建议您去除不想要的软件包，因为对于已删除的模块或扩展中的软件包，系统不再提供其更新。如果您保留软件包，请务必至少去除每个已删除的模块或扩展的 <literal>*-release</literal> 软件包。
     </para>
     <para>
      依次单击<guimenu>接受</guimenu>和<guimenu>确定</guimenu>以继续。
     </para>
    </step>
   </procedure>
   <warning>
    <title>删除模块</title>
    <para>
     请注意，切勿删除 <guimenu>Basesystem Module</guimenu>。另外，建议不要删除 <phrase os="sles"><guimenu>Server Applications Module</guimenu></phrase>。
    </para>
   </warning>

   <warning>
    <title>系统不会为已删除的模块和扩展中的软件包提供更新</title>
    <para>
     如果您选择保留已删除模块或扩展中的软件包，将不再会收到这些软件包的更新。因为这些更新包括安全修复，保留此类软件包可能会给系统带来安全风险。
    </para>
   </warning>

  </sect2>

  <sect2 xml:id="sec-register-sle-add-modules-cmd">
   <title>使用 SUSEConnect 添加/删除模块和扩展</title>
   <procedure>
    <step>
     <para>
      运行 <command>SUSEConnect -list-extensions</command> 获取可用扩展的概览：
     </para>
     <screen os="sles"><prompt>tux &gt; </prompt>sudo SUSEConnect -list-extensions
AVAILABLE EXTENSIONS AND MODULES

  Basesystem Module 15 SP3 x86_64 (Installed)
  Deactivate with: SUSEConnect -d -p sle-module-basesystem/15.3/x86_64

    Containers Module 15 SP3 x86_64
    Activate with: SUSEConnect -p sle-module-containers/15.3/x86_64

    Desktop Applications Module 15 SP3 x86_64
    Activate with: SUSEConnect -p sle-module-desktop-applications/15.3/x86_64

      Development Tools Module 15 SP3 x86_64
      Activate with: SUSEConnect -p sle-module-development-tools/15.3/x86_64

      SUSE Linux Enterprise Workstation Extension 15 SP3 x86_64
      Activate with: SUSEConnect -p sle-we/15.3/x86_64 -r <replaceable>ADDITIONAL REGCODE</replaceable>

    SUSE Cloud Application Platform Tools Module 15 SP3 x86_64
    Activate with: SUSEConnect -p sle-module-cap-tools/15.3/x86_64

    SUSE Linux Enterprise Live Patching 15 SP3 x86_64
    Activate with:
      SUSEConnect -p sle-module-live-patching/15.3/x86_64 -r <replaceable>ADDITIONAL REGCODE</replaceable>

    SUSE Package Hub 15 SP3 x86_64
    Activate with: SUSEConnect -p PackageHub/15.3/x86_64

    Server Applications Module 15 SP3 x86_64 (Installed)
    Deactivate with: SUSEConnect -d -p sle-module-server-applications/15.3/x86_64

      Legacy Module 15 SP3 x86_64
      Activate with: SUSEConnect -p sle-module-legacy/15.3/x86_64

      Public Cloud Module 15 SP3 x86_64
      Activate with: SUSEConnect -p sle-module-public-cloud/15.3/x86_64

      SUSE Enterprise Storage 6 x86_64
      Activate with: SUSEConnect -p ses/6/x86_64 -r <replaceable>ADDITIONAL REGCODE</replaceable>

      SUSE Linux Enterprise High Availability Extension 15 SP3 x86_64
      Activate with: SUSEConnect -p sle-ha/15.3/x86_64 -r <replaceable>ADDITIONAL REGCODE</replaceable>

      Web and Scripting Module 15 SP3 x86_64
      Activate with: SUSEConnect -p sle-module-web-scripting/15.3/x86_64

MORE INFORMATION

You can find more information about available modules here:
https://www.suse.com/products/server/features/modules.html</screen>


    </step>
    <step>
     <para>
      运行用于激活/停用模块或扩展的命令列表中的命令，以添加或删除组件。请注意，添加扩展需要提供付费购买的附加注册码。
     </para>
    </step>
   </procedure>

   <warning>
    <title>删除模块</title>
    <para>
     请注意，切勿删除 <guimenu>Basesystem Module</guimenu>。另外，建议不要删除 <phrase os="sles"><guimenu>Server Applications Module</guimenu></phrase>。
    </para>
   </warning>

   <important>
    <title>不会自动安装/去除软件包</title>
    <para>
     使用 <command>SUSEConnect</command> 添加或删除模块和扩展时，相应组件将会取消注册，相关的储存库或服务将从系统中去除。此时不会安装或去除软件包。如果您想要自动完成此类操作，请使用 YaST 添加或删除模块和扩展。
    </para>
    <para>
     添加模块或扩展并不意味着会自动安装默认的软件包或模式。您需要在命令行中使用 Zypper，或者运行 <menuchoice><guimenu>YaST</guimenu> <guimenu>软件管理</guimenu></menuchoice>来手动完成此操作。
    </para>
    <para>
     删除某个模块或扩展并不意味着会自动进行清理。属于该模块或扩展的所有软件包仍会安装在系统上，但不再与某个储存库相关联，因此，不再会收到更新。要去除这些所谓的<quote>孤立</quote>软件包，请在命令行中使用 Zypper。<command>zypper packages --orphaned</command> 可列出这些软件包，<command>zypper remove</command> 可删除一个或多个软件包。或者，可以使用 <menuchoice><guimenu>YaST</guimenu> <guimenu>软件管理</guimenu></menuchoice>列出和删除孤立的软件包。
    </para>
   </important>

   <warning>
    <title>系统不会为已删除的模块和扩展中的软件包提供更新</title>
    <para>
     如果您选择保留已删除模块或扩展中的软件包，将不再会收到这些软件包的更新。因为这些更新包括安全修复，保留此类软件包可能会给系统带来安全风险。
    </para>
   </warning>

  </sect2>
 </sect1>
</chapter>
