<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<!--
 toms 2009-09-15 (openSUSE 11.2):
 Migrated wlan.xml from sect1 into a chapter as this time only wlan.xml
 is available in wireless.xml (discussed with Frank).
 This is a bit too less for a single sect1.
 In case, we support/have more time for the other files in the next
 release, enable the corresponding files in wireless.xml and migrate this
 chapter into a section again (or decide otherwise).
-->
<!--
 Links

* HOWTO: Wireless Security - WPA1, WPA2, LEAP, etc.
  Although for Ubuntu, the principles may still apply
  http://ubuntuforums.org/showthread.php?t=202834

* Linux links wirelessly
  (needs registration)
  http://www.ibm.com/developerworks/wireless/edu/wi-dw-wilinux-i.html

* Linux Wireless Networking
  http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_:_Ch13_:_Linux_Wireless_Networking
-->
<chapter id="cha.wireless.wlan">
 <title>Wireless LAN</title><indexterm>
 <primary>WLAN</primary></indexterm><indexterm>
 <primary>Wireless LAN</primary></indexterm>
 <abstract>
  <para>
   Wireless LANs, or Wireless Local Area Network (WLANs), have become an
   indispensable aspect of mobile computing. Today, most laptops have
   built-in WLAN cards. This chapter describes how to set up a WLAN card
   with &yast;, encrypt transmissions, and use tips and tricks.
   <phrase
    os="osuse;sled">Alternatively, you can configure and manage
   WLAN access with &nm;. For details, refer to
   <xref linkend="cha.nm"/>.</phrase>
  </para>
 </abstract>
 <sect1 id="sec.wireless.wlan.standards">
  <title>WLAN Standards</title>

  <para>
   WLAN cards communicate using the 802.11 standard, prepared by the IEEE
   organization. Originally, this standard provided for a maximum
   transmission rate of 2&nbsp;Mbit/s. Meanwhile, several supplements have
   been added to increase the data rate. These supplements define details
   such as the modulation, transmission output, and transmission rates (see
   <xref
    linkend="tab.wireless.std.overview"/>). Additionally, many
   companies implement hardware with proprietary or draft features.
  </para>

  <table id="tab.wireless.std.overview">
   <title>Overview of Various WLAN Standards</title>
   <tgroup cols="4">
    <thead>
     <row>
      <entry>
       <para>
        Name (802.11)
       </para>
      </entry>
      <entry>
       <para>
        Frequency (GHz)
       </para>
      </entry>
      <entry>
       <para>
        Maximum Transmission Rate (Mbit/s)
       </para>
      </entry>
      <entry>
       <para>
        Note
       </para>
      </entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>
       <para>
        a
       </para>
      </entry>
      <entry>
       <para>
        5
       </para>
      </entry>
      <entry>
       <para>
        54
       </para>
      </entry>
      <entry>
       <para>
        Less interference-prone
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para> b </para>
      </entry>
      <entry>
       <para>
        2.4
       </para>
      </entry>
      <entry>
       <para>
        11
       </para>
      </entry>
      <entry>
       <para>
        Less common
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        g
       </para>
      </entry>
      <entry>
       <para>
        2.4
       </para>
      </entry>
      <entry>
       <para>
        54
       </para>
      </entry>
      <entry>
       <para>
        Widespread, backwards-compatible with 11b
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        n
       </para>
      </entry>
      <entry>
       <para>
        2.4 and/or 5
       </para>
      </entry>
      <entry>
       <para>
        300
        <remark>Kofler: 540</remark>
        <remark>Others: 600, depending on the
        channel</remark>
       </para>
      </entry>
      <entry>
       <para>
        Common
       </para>
      </entry>
     </row>
     <row>
       <entry>
         <para>ac</para>
       </entry>
       <entry>
         <para>5</para>
       </entry>
       <entry>
         <para>up to ~865</para>
       </entry>
       <entry>
         <para>Expected to be common in 2015</para>
       </entry>
     </row>
      <row>
      <entry>
       <para>
        ad
       </para>
      </entry>
      <entry>
       <para>
        60
       </para>
      </entry>
      <entry>
       <para>
        up to appr. 7000
       </para>
      </entry>
      <entry>
       <para>
        Released 2012, currently less common
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>

  <para>
   802.11 Legacy cards are not supported by &productnamereg;. Most cards
   using 802.11a, 802.11b, 802.11g and 802.11n are supported. New cards
   usually comply with the 802.11n standard, but cards using 802.11g are
   still available.
  </para>
 </sect1>
 <sect1 id="sec.wireless.wlan.modes">
  <title>Operating Modes</title>

  <para>
   In wireless networking, various techniques and configurations are used to
   ensure fast, high-quality, and secure connections. Different operating
   types suit different setups. It can be difficult to choose the right
   authentication method. The available encryption methods have different
   advantages and pitfalls.
  </para>

  <para>
   Basically, wireless networks can be classified into three network modes:
  </para>

  <variablelist>
   <varlistentry>
    <term>Managed Mode (Infrastructure Mode), via Access Point </term>
    <listitem>
     <para>
      Managed networks have a managing element: the access point. In this
      mode (also referred to as infrastructure mode), all connections of the
      WLAN stations in the network run through the access point, which may
      also serve as a connection to an ethernet. To make sure only
      authorized stations can connect, various authentication mechanisms
      (WPA, etc) are used.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Ad-hoc Mode (Peer-to-Peer Network)</term>
    <listitem>
     <para>
      Ad-hoc networks do not have an access point. The stations communicate
      directly with each other, therefore an ad-hoc network is usually
      faster than a managed network. However, the transmission range and
      number of participating stations are greatly limited in ad-hoc
      networks. They also do not support WPA authentication. If you intend
      to use WPA security, you should not use Ad-Hoc_Mode.
      Be aware, not all cards support ad-hoc mode reliably.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Master Mode</term>
    <listitem>
     <para>
      In master mode your network card is used as the access point. It works
      only if your WLAN card supports this mode. Find out the details of
      your WLAN card on <ulink
       url="http://linux-wless.passys.nl"/>.
      <remark>More info please! :)</remark>
     </para>
    </listitem>
   </varlistentry>    
    <varlistentry>
      <term>Mesh Mode</term>
      <listitem>
        <para>Wireless mesh networks are organized in a <emphasis>mesh topology</emphasis>. 
          A wireless mesh network's connection is spread among all wireless mesh 
          <emphasis>nodes</emphasis>. Each node belonging to this network is conntected to 
          other nodes to share the connection, possibly through a large area.
          </para>
      </listitem>
    </varlistentry>
  </variablelist>
 </sect1>
 <sect1 id="sec.wireless.wlan.func.auth">
  <title>Authentication</title>

  <para>
   Because a wireless network is much easier to intercept and compromise
   than a wired network, the various standards include authentication and
   encryption methods. In the original version of the IEEE 802.11 standard,
   these are described under the term WEP (Wired Equivalent Privacy).
   However, because WEP has proven to be insecure (see
   <xref
    linkend="sec.wireless.wlan.tant.sec"/>), the WLAN industry
   (joined under the name <emphasis>Wi-Fi Alliance</emphasis>) has defined
   an extension called WPA, which is supposed to eliminate the weaknesses of
   WEP. The later IEEE 802.11i standard includes WPA and some other
   authentication and encryption methods. IEEE 802.11i is also referred to
   as WPA2, because WPA is based on a draft version of 802.11i.
  </para>

  <para>
   To make sure that only authorized stations can connect, various
   authentication mechanisms are used in managed networks:
  </para>

  <variablelist>
   <varlistentry>
    <term>None (Open)</term>
    <listitem>
     <para>
      An open system is a system that does not require authentication. Any
      station can join the network. Nevertheless, WEP encryption can be
      used, see <xref linkend="sec.wireless.wlan.func.encr"/>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Shared Key (according to IEEE 802.11)</term>
    <listitem>
     <para>
      In this procedure, the WEP key is used for the authentication.
      However, this procedure is not recommended, because it makes the WEP
      key more susceptible to attacks. All an attacker needs to do is to
      listen long enough to the communication between the station and the
      access point. During the authentication process, both sides exchange
      the same information, once in encrypted form and once in unencrypted
      form. This makes it possible for the key to be reconstructed with
      suitable tools. Because this method makes use of the WEP key for the
      authentication and for the encryption, it does not enhance the
      security of the network. A station that has the correct WEP key can
      authenticate, encrypt, and decrypt. A station that does not have the
      key cannot decrypt received packets. Accordingly, it cannot
      communicate, regardless of whether it had to authenticate itself.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>WPA-PSK (or WPA-Personal, according to IEEE 802.1x)</term>
    <listitem>
     <para>
      WPA-PSK (PSK stands for preshared key) works similarly to the Shared
      Key procedure. All participating stations as well as the access point
      need the same key. The key is 256 bits in length and is usually
      entered as a passphrase. This system does not need a complex key
      management like WPA-EAP and is more suitable for private use.
      Therefore, WPA-PSK is sometimes referred to as WPA
      <quote>Home</quote>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>WPA-EAP (or WPA-Enterprise, according to IEEE 802.1x)</term>
    <listitem>
     <para>
      Actually, WPA-EAP (Extensible Authentication Protocol) is not an
      authentication system but a protocol for transporting authentication
      information. WPA-EAP is used to protect wireless networks in
      enterprises. In private networks, it is scarcely used. For this
      reason, WPA-EAP is sometimes referred to as WPA
      <quote>Enterprise</quote>.
     </para>
     <para>
      WPA-EAP needs a Radius server to authenticate users. EAP offers three
      different methods for connecting and authenticating to the server:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        Transport Layer Security (EAP-TLS): TLS authentication relies on the
        mutual exchange of certificates for both server and client. First,
        the server presents its certificate to the client where it is
        evaluated. If the certificate is considered valid, the client in
        turn presents its certificate to the server. While TLS is secure, it
        requires a working certification management infrastructure in your
        network. This infrastructure is rarely found in private networks.
       </para>
      </listitem>
      <listitem>
       <para>
        Tunneled Transport Layer Security (EAP-TTSL)
       </para>
      </listitem>
      <listitem>
       <para>
        Protected Extensible Authentication Protocol (EAP-PEAP): Both TTLS
        and PEAP are two-stage protocols. In the first stage, a secure
        connection is established and in the second the client
        authentication data is exchanged. They require far less
        certification management overhead than TLS, if any.
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 id="sec.wireless.wlan.func.encr">
  <title>Encryption</title>

  <para>
   There are various encryption methods to ensure that no unauthorized
   person can read the data packets that are exchanged in a wireless network
   or gain access to the network:
  </para>

  <variablelist>
   <varlistentry>
    <term>WEP (defined in IEEE 802.11)</term>
    <listitem>
     <para>
      This standard makes use of the RC4 encryption algorithm, originally
      with a key length of 40&nbsp;bits, later also with 104&nbsp;bits.
      Often, the length is declared as 64&nbsp;bits or 128&nbsp;bits,
      depending on whether the 24&nbsp;bits of the initialization vector are
      included. However, this standard has some weaknesses. Attacks against
      the keys generated by this system may be successful. Nevertheless, it
      is better to use WEP than to not encrypt the network at all.
     </para>
     <para>
      Some vendors have implemented the non-standard <quote>Dynamic
      WEP</quote>. It works exactly as WEP and shares the same weaknesses,
      except that the key is periodically changed by a key management
      service.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>TKIP (defined in WPA/IEEE 802.11i)</term>
    <listitem>
     <para>
      This key management protocol defined in the WPA standard uses the same
      encryption algorithm as WEP, but eliminates its weakness. Because a
      new key is generated for every data packet, attacks against these keys
      are fruitless. TKIP is used together with WPA-PSK.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>CCMP (defined in IEEE 802.11i)</term>
    <listitem>
     <para>
      CCMP describes the key management. Usually, it is used in connection
      with WPA-EAP, but it can also be used with WPA-PSK. The encryption
      takes place according to AES and is stronger than the RC4 encryption
      of the WEP standard.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 id="sec.wireless.wlan.yast2">
  <title>Configuration with &yast;</title>

  <important>
   <title>Security Risks in Wireless Networks</title>
   <para>
    Unencrypted WLAN connections allow third parties to intercept all
    network data. Be sure to protect your network traffic by using one of
    the supported authentication and encryption methods.
   </para>
   <para>
    Use the best possible encryption method your hardware allows. However,
    to use a certain encryption method, all devices in the network must
    support this method, otherwise they cannot communicate with each other.
    For example, if your router supports both WEP and WPA but the driver for
    your WLAN card only supports WEP, WEP is the least common denominator
    you can use. But even a weak encryption with WEP is better than none at
    all. Refer to <xref linkend="sec.wireless.wlan.func.encr"/> and
    <xref
     linkend="sec.wireless.wlan.tant.sec"/> for information.
   </para>
  </important>

  <para>
   To configure a wireless LAN with &yast;, you need to define the following
   parameters:
  </para>

  <variablelist>
   <varlistentry>
    <term>IP Address</term>
    <listitem>
     <para>
      Use either a static IP address or let a DHCP server dynamically assign
      an IP address to the interface.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Operating Mode</term>
    <listitem>
     <para>
      Defines how to integrate your machine into a WLAN, depending on the
      network topology. For background information, refer to
      <xref
       linkend="sec.wireless.wlan.modes"/>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Network Name (ESSID)</term>
    <listitem>
     <para>
      Unique string identifying a network.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Authentication and Encryption Details</term>
    <listitem>
     <para>
      Depending on the authentication and encryption method your network
      uses, you need to enter one or more keys and/or certificates.
     </para>
     <para>
      Several input options are available for entering the respective keys:
      <guimenu>Passphrase</guimenu>, <guimenu>ASCII</guimenu> (only
      available for WEP authentication methods), and
      <guimenu>Hexadecimal</guimenu>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <sect2 id="sec.wireless.wlan.yast2.nm">
   <title>Deactivating &nm;</title>
   <para>
    A WLAN card is usually detected during installation. If your machine is
    a mobile computer, &nm; is usually activated by default. If instead you
    want to configure your WLAN card with &yast;, you need to deactivate
    &nm; first:
   </para>
   <procedure>
    <step id="st.wireless.wlan.start">
     <para>
      Start &yast; as user &rootuser;.
     </para>
    </step>
    <step>
     <para>
      In the &yastcc;, select <menuchoice> <guimenu>Network
      Devices</guimenu> <guimenu>Network Settings</guimenu> </menuchoice> to
      open the <guimenu>Network Settings</guimenu> dialog.
     </para>
     <para>
      If your network is currently controlled by &nm;, you see a warning
      message that the network settings cannot be edited by &yast;.
     </para>
    </step>
    <step>
     <para>
      To enable editing with &yast;, leave the message with
      <guimenu>OK</guimenu> and on the <guimenu>Global Options</guimenu>
      tab, activate <guimenu>Traditional Method with ifup</guimenu>.
     </para>
    </step>
    <step>
     <para>
      For further configuration, proceed with
      <xref
     linkend="sec.wireless.wlan.yast2.accesspoint"/> or
      <xref
      linkend="sec.wireless.wlan.yast2.adhocnet"/>.
     </para>
     <para>
      Otherwise confirm your changes with <guimenu>OK</guimenu> to write the
      network configuration.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.wireless.wlan.yast2.accesspoint">
   <title>Configuration for Access Points</title>
   <para>
    In this section, learn how to configure your WLAN card to connect to an
    (external) access point or how to use your WLAN card as access point if
    your WLAN card supports this. For configuration of networks without an
    access point, refer to
    <xref linkend="sec.wireless.wlan.yast2.adhocnet"/>.
   </para>
   <procedure id="pro.wlan.yast2.accesspoint">
    <title>Configuring Your WLAN Card for Using an Access Point</title>
    <step>
     <para>
      Start &yast; and open the <guimenu>Network Settings</guimenu> dialog.
     </para>
    </step>
    <step>
     <para>
      Switch to the <guimenu>Overview</guimenu> tab where all network cards
      are listed that have been detected by the system. If you need more
      information about general network configuration, refer to
      <xref
      linkend="sec.basicnet.yast"/>.
     </para>
    </step>
    <step id="st.wireless.wlan.card">
     <para>
      Choose your wireless card from the list and click
      <guimenu>Edit</guimenu> to open the <guimenu>Network Card
      Setup</guimenu> dialog.
     </para>
    </step>
    <step>
     <para>
      On the <guimenu>Address</guimenu> tab, configure whether to use a
      dynamic or a static IP address for the machine. Usually
      <guimenu>Dynamic Address</guimenu> with <guimenu>DHCP</guimenu> is
      fine.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>Next</guimenu> to proceed to the <guimenu>Wireless
      Network Card Configuration</guimenu> dialog.
     </para>
    </step>
    <step>
     <para>
      To use your WLAN card to connect to an access point, set the
      <guimenu>Operating Mode</guimenu> to <guimenu>Managed</guimenu>.
     </para>
     <para>
      If however you want to use your WLAN card as access point, set the
      <guimenu>Operating Mode</guimenu> to <guimenu>Master</guimenu>. Note
      that not all WLAN cards support this mode.
     </para>
     <note>
      <title>Using WPA-PSK or WPA-EAP</title>
      <para>
       If you want to use WPA-PSK or WPA-EAP authentication modes, the
       operating mode must be set to <guimenu>Managed</guimenu>.
      </para>
     </note>
    </step>
    <step>
     <para>
      To connect to a certain network, enter the <guimenu>Network Name
      (ESSID)</guimenu>. Alternatively, click <guimenu>Scan
      Network</guimenu> and select a network from the list of available
      wireless networks.
     </para>
     <para>
      All stations in a wireless network need the same ESSID for
      communicating with each other. If no ESSID is specified, your WLAN
      card automatically associates with the access point that has the best
      signal strength.
     </para>
     <note>
      <title>WPA Authentication Requires an ESSID</title>
      <para>
       If you select <guimenu>WPA</guimenu> authentication, a network name
       (ESSID) must be set.
      </para>
     </note>
    </step>
    <step>
     <para>
      Select an <guimenu>Authentication Mode</guimenu> for your network.
      Which mode is suitable, depends on your WLAN card's driver and the
      ability of the other devices in the network.
     </para>
    </step>
    <step>
     <para>
      If you have chosen to set the <guimenu>Authentication Mode</guimenu>
      to <guimenu>No Encryption</guimenu>, finish the configuration by
      clicking <guimenu>Next</guimenu>. Confirm the message about this
      potential security risk and leave the <guimenu>Overview</guimenu> tab
      (showing the newly configured WLAN card) with <guimenu>OK</guimenu>.
     </para>
     <para>
      If you haven chosen any of the other authentication modes, proceed
      with <xref linkend="pro.wlan.yast2.enryption"/>.
     </para>
    </step>
   </procedure>
   <figure id="fig.wireless.wlan.yast">
    <title>&yast;: Configuring the Wireless Network Card</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata width="75%" fileref="yast2_wlan.png" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata width="55%" fileref="yast2_wlan.png" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <procedure id="pro.wlan.yast2.enryption">
    <title>Entering the Encryption Details</title>
    <para>
     The following authentication methods require an encryption key:
     <guimenu>WEP - Open</guimenu>, <guimenu>WEP - Shared Key</guimenu>, and
     <guimenu>WPA-PSK</guimenu>.
    </para>
    <para>
     For WEP, usually only key is needed&mdash;however, up to 4 different
     WEP keys can be defined for your station. One of them needs to be set
     as the default key and is used for encryption. The others are used for
     decryption. Per default, a key length of 128-bit is used, but you can
     also choose to set the length to 64-bit.
    </para>
    <para>
     For higher security, WPA-EAP uses a RADIUS server to authenticate
     users. For authentication at the server, three different methods are
     available: TLS, TTLS and PEAP. The credentials and certificates you
     need for WPA-EAP depend on the authentication method used for the
     RADIUS server. Ask your system administrator to provide the needed
     information and credentials. &yast; searches for any certificate under
     <filename>/etc/cert</filename>. Therefore, save the certificates given
     to you to this location and restrict access to these files to
     <literal>0600</literal> (owner read and write).
    </para>
    <step>
     <para>
      To enter the key for <guimenu>WEP - Open</guimenu> or <guimenu>WEP -
      Shared Key</guimenu>:
     </para>
     <substeps>
      <step>
       <para>
        Set the <guimenu>Key Input Type</guimenu> either to
        <guimenu>Passphrase</guimenu>, <guimenu>ASCII</guimenu> or
        <guimenu>Hexadecimal</guimenu>.
       </para>
      </step>
      <step>
       <para>
        Enter the respective <guimenu>Encryption Key</guimenu> (usually only
        one key is used):
       </para>
       <para>
        If you have selected <guimenu>Passphrase</guimenu>, enter a word or
        a character string from which a key is generated according to the
        specified key length (per default, 128-bit) .
       </para>
       <para>
        <guimenu>ASCII</guimenu> requests an input of 5 characters for a
        64-bit key and 13 characters for a 128-bit key.
       </para>
       <para>
        For <guimenu>Hexadecimal</guimenu>, enter 10 characters for a 64-bit
        key or 26 characters for a 128-bit key in hexadecimal notation.
       </para>
      </step>
      <step>
       <para>
        To adjust the key length to a lower bit rate (which might be
        necessary for older hardware), click <guimenu>WEP Keys</guimenu> and
        set the <guimenu>Key Length</guimenu> to <guimenu>64</guimenu> bit.
        The <guimenu>WEP Keys</guimenu> dialog also shows the WEP keys that
        have been entered so far. Unless another key is explicitly set as
        default, &yast; always uses the first key as default key.
       </para>
      </step>
      <step>
       <para>
        To enter more keys for WEP or to modify one of the keys, select the
        respective entry and click <guimenu>Edit</guimenu>. Select the
        <guimenu>Key Input Type</guimenu> and enter the key.
       </para>
      </step>
      <step>
       <para>
        Confirm your changes with <guimenu>OK</guimenu>.
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      To enter a key for <guimenu>WPA-PSK</guimenu>:
     </para>
     <substeps>
      <step>
       <para>
        Select the input method <guimenu>Passphrase</guimenu> or
        <guimenu>Hexadecimal</guimenu>.
       </para>
      </step>
      <step>
       <para>
        Enter the respective <guimenu>Encryption Key</guimenu>.
       </para>
       <para>
        In the <guimenu>Passphrase</guimenu> mode, the input must be 8 to 63
        characters. In the <guimenu>Hexadecimal</guimenu> mode, enter 64
        characters.
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      If you have chosen <guimenu>WPA-EAP</guimenu> authentication, click
      <guimenu>Next</guimenu> to switch to the <guimenu>WPA-EAP</guimenu>
      dialog, where you enter the credentials and certificates you have been
      given by your network administrator.
     </para>
     <substeps>
      <step>
       <para>
        Select the <guimenu>EAP Mode</guimenu> the RADIUS server uses for
        authentication. The details you need to enter in the following
        depend on the selected <guimenu>EAP Mode</guimenu>.
       </para>
      </step>
      <step>
       <para>
        For TLS, provide <guimenu>Identity</guimenu>, <guimenu>Client
        Certificate</guimenu>, <guimenu>Client Key</guimenu>, and
        <guimenu>Client Key Password</guimenu>. To increase security, you
        can also configure a <guimenu>Server Certificate</guimenu> used to
        validate the server's authenticity.
       </para>
       <para>
        TTLS and PEAP require <guimenu>Identity</guimenu> and
        <guimenu>Password</guimenu>, whereas <guimenu>Server
        Certificate</guimenu> and <guimenu>Anonymous Identity</guimenu> are
        optional.
       </para>
      </step>
      <step>
       <para>
        To enter the advanced authentication dialog for your WPA-EAP setup,
        click <guimenu>Details</guimenu>.
       </para>
      </step>
      <step>
       <para>
        Select the <guimenu>Authentication Method</guimenu> for the second
        stage of EAP-TTLS or EAP-PEAP communication (inner authentication).
        The choice of methods depends on the authentication method for the
        RADIUS server you selected in the previous dialog.
       </para>
      </step>
      <step>
       <para>
        If the automatically-determined setting does not work for you,
        choose a specific <guimenu>PEAP Version</guimenu> to force the use
        of a certain PEAP implementation.
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      Confirm your changes with <guimenu>OK</guimenu>. The <guimenu>Overview
      </guimenu> tab shows the details of your newly configured WLAN card.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>OK</guimenu> to finalize the configuration and to leave
      the dialog.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.wireless.wlan.yast2.adhocnet">
   <title>Establishing an Ad-Hoc Network</title>
   <para>
    In some cases it is useful to connect two computers equipped with a WLAN
    card. To establish an ad-hoc network with &yast;, do the following:
   </para>
   <procedure>
    <step>
     <para>
      Start &yast; and open the <guimenu>Network Settings</guimenu> dialog.
     </para>
    </step>
    <step>
     <para>
      Switch to the <guimenu>Overview</guimenu> tab, choose your wireless
      card from the list and click <guimenu>Edit</guimenu> to open the
      <guimenu>Network Card Setup</guimenu> dialog.
     </para>
    </step>
    <step>
     <para>
      Choose <guimenu>Statically assigned IP Address</guimenu> and enter the
      following data:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        <guimenu>IP Address</guimenu>:
        <systemitem class="ipaddress"
         >&exampledomain1ip;.1</systemitem>.
        Change this address on the second computer to
        <systemitem class="ipaddress"
         >&exampledomain1ip;.2</systemitem>,
        for example.
       </para>
      </listitem>
      <listitem>
       <para>
        <guimenu>Subnet Mask</guimenu>:
        <systemitem class="ipaddress"
         >/24</systemitem>
       </para>
      </listitem>
      <listitem>
       <para>
        <guimenu>Hostname</guimenu>: Choose any name you like.
       </para>
      </listitem>
     </itemizedlist>
    </step>
    <step>
     <para>
      Proceed with <guimenu>Next</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Set the <guimenu>Operating Mode</guimenu> to
      <guimenu>Ad-hoc</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Choose a <guimenu>Network Name (ESSID)</guimenu>. This can be any
      name, but it has to be used on every computer in the ad-hoc network.
     </para>
    </step>
    <step>
     <para>
      Select an <guimenu>Authentication Mode</guimenu> for your network.
      Which mode is suitable, depends on your WLAN card's driver and the
      ability of the other devices in the network.
     </para>
    </step>
    <step>
     <para>
      If you have chosen to set the <guimenu>Authentication Mode</guimenu>
      to <guimenu>No Encryption</guimenu>, finish the configuration by
      clicking <guimenu>Next</guimenu>. Confirm the message about this
      potential security risk and leave the <guimenu>Overview</guimenu> tab
      showing the newly configured WLAN card with <guimenu>OK</guimenu>.
     </para>
     <para>
      If you haven chosen any of the other authentication modes, proceed
      with <xref linkend="pro.wlan.yast2.enryption"/>.
     </para>
    </step>
    <step>
     <para>
      If you do not have <systemitem class="resource">smpppd</systemitem>
      installed, &yast; asks you to do so.
     </para>
    </step>
    <step>
     <para>
      Configure the other WLAN cards in the network accordingly, using the
      same <guimenu>Network Name (ESSID)</guimenu>, the same
      <guimenu>Authentication Mode</guimenu> but different IP addresses.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.wireless.wlan.yast2.advanced">
   <title>Setting Additional Configuration Parameters</title>
   <para>
    Usually there is no need to change the pre-configured settings when
    configuring your WLAN card. However, if you need detailed configuration
    of your WLAN connection, &yast; allows you to tweak the following
    settings:
   </para>
   <variablelist>
    <varlistentry>
     <term>Channel</term>
     <listitem>
      <para>
       The specification of a channel on which the WLAN station should work.
       This is only needed in <guimenu>Ad-hoc</guimenu> and
       <guimenu>Master</guimenu> modes. In <guimenu>Managed</guimenu> mode,
       the card automatically searches the available channels for access
       points.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Bit Rate</term>
     <listitem>
      <para>
       Depending on the performance of your network, you may want to set a
       certain bit rate for the transmission from one point to another. In
       the default setting <guimenu>Auto</guimenu>, the system tries to use
       the highest possible data transmission rate. Some WLAN cards do not
       support the setting of bit rates.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Access Point</term>
     <listitem>
      <para>
       In an environment with several access points, one of them can be
       preselected by specifying the MAC address.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Power Management</term>
     <listitem>
      <para>
       When you are on the road, power saving technologies can help to
       maximize the operating time of your battery.
       <phrase os="sles;sled">More information about power management is
       available in <xref
         linkend="cha.pmanage"/>.</phrase> Using
       power management may affect the connection quality and increase the
       network latency.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <procedure>
    <para>
     To access the advanced options:
    </para>
    <step>
     <para>
      Start &yast; and open the <guimenu>Network Settings</guimenu> dialog.
     </para>
    </step>
    <step>
     <para>
      Switch to the <guimenu>Overview</guimenu> tab, choose your wireless
      card from the list and click <guimenu>Edit</guimenu> to open the
      <guimenu>Network Card Setup</guimenu> dialog.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>Next</guimenu> to proceed to the <guimenu>Wireless
      Network Card Configuration</guimenu> dialog.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>Expert Settings</guimenu>.
     </para>
    </step>
    <step>
     <para>
      In <guimenu>Ad-hoc</guimenu> mode, select one of the offered channels
      (11 to 14, depending on your country) for the communication of your
      station with the other stations. In <guimenu>Master</guimenu> mode,
      determine on which <guimenu>Channel</guimenu> your card should offer
      access point functionality. The default setting for this option is
      <guimenu>Auto</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Select the <guimenu>Bit Rate</guimenu> to use.
     </para>
    </step>
    <step>
     <para>
      Enter the MAC address of the <guimenu>Access Point</guimenu> you want
      to connect to.
     </para>
    </step>
    <step>
     <para>
      Choose if to <guimenu>Use Power Management</guimenu> or not.
     </para>
    </step>
    <step>
     <para>
      Confirm your changes with <guimenu>OK</guimenu> and click
      <guimenu>Next</guimenu> and <guimenu>OK</guimenu> to finish the
      configuration.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 id="sec.wireless.wlan.tant">
  <title>Tips and Tricks for Setting Up a WLAN</title>

  <para>
   The following tools and tips can help to monitor and improve speed and
   stability as well as security aspects of your WLAN.
  </para>

  <sect2 id="sec.wireless.wlan.tant.tools">
   <title>Utilities</title>
<!--
    # iwlist wlan0 scanning
    # iwconfig
   -->
   <para>
    The package <systemitem class="resource">wireless-tools</systemitem>
    contains utilities that allow to set wireless LAN specific parameters
    and get statistics. See
    <ulink url="http://www.hpl.hp.com/personal/Jean_Tourrilhes/Linux/Tools.html"/>
    for more information.
   </para>
   <para os="osuse">
    kismet (package <systemitem class="resource">kismet</systemitem>) is a
    network diagnosis tool with which to listen to the WLAN packet traffic.
    In this way, you can also detect any intrusion attempts in your network.
    More information is available at
    <ulink
     url="http://www.kismetwireless.net/"/> and in the manual
    page.
   </para>
  </sect2>

  <sect2 id="sec.wireless.wlan.tant.stab">
   <title>Stability and Speed</title>
   <para>
    The performance and reliability of a wireless network mainly depend on
    whether the participating stations receive a clear signal from the other
    stations. Obstructions like walls greatly weaken the signal. The more the
    signal strength sinks, the more the transmission slows down. During
    operation, check the signal strength with the <command>iwconfig</command>
    utility on the command line (<literal>Link Quality</literal> field) or
    with the &nm; applets provided by GNOME. If you have problems with the
    signal quality, try to set up the devices somewhere else or adjust the
    position of the antennas of your access points. Auxiliary antennas that
    substantially improve the reception are available for a number of PCMCIA
    WLAN cards. The rate specified by the manufacturer, such as
    54&nbsp;Mbit/s, is a nominal value that represents the theoretical
    maximum. In practice, the maximum data throughout is no more than half
    this value.
   </para>
   <para>
    The <command>iwspy</command> command can displays WLAN statistics:
   </para>
<screen>iwspy wlan0
wlan0      Statistics collected:
    00:AA:BB:CC:DD:EE : Quality:0  Signal level:0  Noise level:0
    Link/Cell/AP      : Quality:60/94  Signal level:-50 dBm   Noise level:-140 dBm (updated)
    Typical/Reference : Quality:26/94  Signal level:-60 dBm   Noise level:-90 dBm</screen>
  </sect2>

  <sect2 id="sec.wireless.wlan.tant.sec">
   <title>Security</title>
   <para>
    If you want to set up a wireless network, remember that anybody within
    the transmission range can easily access it if no security measures are
    implemented. Therefore, be sure to activate an encryption method. All
    WLAN cards and access points support WEP encryption. Although this is
    not entirely safe, it does present an obstacle for a potential attacker.
   </para>
   <para>
    For private use, use WPA-PSK if available. Although Linux supports WPA
    on most hardware components, some drivers do not offer WPA support. It
    may also not be available on older access points and routers with WLAN
    functionality. For such devices, check if WPA can be implemented by
    means of a firmware update. If WPA is not available, WEP is better than
    no encryption. In enterprises with advanced security requirements,
    wireless networks should only be operated with WPA.
   </para>
   <para>
    Use strong passwords for your authentication method. For example, the
    Web page <ulink
     url="https://www.grc.com/passwords.htm"/> generates
    random 64 character passwords.
   </para>
  </sect2>
 </sect1>
 <sect1 id="sec.wireless.wlan.probs">
  <title>Troubleshooting</title>

  <para os="osuse">
   If your WLAN card is not automatically detected, check whether it is
   supported by &productname;. A list of supported WLAN network cards is
   available under
   <ulink
    url="http://en.opensuse.org/HCL:Network_(Wireless)"/>. If your
   card is not supported, it may be possible to make it work using the
   Microsoft Windows drivers with Ndiswrapper. Please refer to
   <ulink url="http://en.opensuse.org/SDB:Ndiswrapper"/> for detailed
   information.
  </para>

  <para>
   If your WLAN card fails to respond, check the following prerequisites:
  </para>

  <orderedlist>
   <listitem>
    <para>
     Do you know the device name of the WLAN card? Usually it is
     <systemitem>wlan0</systemitem>. Check with the tool
     <command>ifconfig</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     Have you checked your needed firmware? Refer to
     <filename>/usr/share/doc/packages/wireless-tools/README.firmware</filename>
     for more information.
    </para>
   </listitem>
   <listitem>
    <para>
     Is the ESSID of your router broadcasted and visible (not hidden)?
    </para>
   </listitem>
  </orderedlist>

  <sect2 id="sec.wireless.wlan.probs.iwconfi">
   <title>Check the Network Status</title>
   <para>
    The command <command>iwconfig</command> can give you important
    information about your wireless connection. For example, the following
    line displays the ESSID, the wireless mode, frequency, if you signal is
    encrypted, the link quality, and much more:
   </para>
<screen><command>iwconfig</command> wlan0
wlan0  IEEE 802.11abg  ESSID:"guest"
       Mode:Managed   Frequency:5.22GHz  Access Point: 00:11:22:33:44:55
       Bit Rate:54 Mb/s   Tx-Power=13 dBm
       Retry min limit:7   RTS thr:off   Fragment thr:off
       Encryption key:off
       Power Management:off
       Link Quality:62/92   Signal level:-48 dBm  Noise level:-127 dBm
       Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
       Tx excessive retries:10  Invalid misc:0   Missed beacon:0</screen>
   <para>
    You can also get the previous information with the
    <command>iwlist</command> command. For example, the following line
    displays the current bit rate:
   </para>
<screen><command>iwlist</command> wlan0 rate
wlan0    unknown bit-rate information.
         Current Bit Rate=54 Mb/s</screen>
   <para>
    If you want an overview how many access points are available, it can
    also be done with the <command>iwlist</command> command. It gives you a
    list of <quote>cells</quote> which looks like this:
   </para>
<screen><command>iwlist</command> wlan0 scanning
wlan0   Scan completed:
   Cell 01 - Address: 00:11:22:33:44:55
             Channel:40
             Frequency:5.2 GHz (Channel 40)
             Quality=67/70  Signal level=-43 dBm
             Encryption key: off
             ESSID:"Guest"
             Bit Rates: 6 Mb/s; 9 Mb/s; 12 Mb/s; 18 Mb/s;
                        24 Mb/s; 36 Mb/s; 48 Mb/s
             Mode: Master
             Extra:tsf=0000111122223333
             Extra: Last beacon: 179ms ago
             IE: Unknown: ...</screen>
  </sect2>

  <sect2 id="sec.wireless.wlan.probs.multi">
   <title>Multiple Network Devices</title>
   <para>
    Modern laptops usually have a network card and a WLAN card. If you
    configured both devices with DHCP (automatic address assignment), you
    may encounter problems with the name resolution and the default gateway.
    This is evident from the fact that you can ping the router but cannot
    surf the Internet. The Support Database features an article on this
    subject at
    <ulink
     url="http://old-en.opensuse.org/SDB:Name_Resolution_Does_Not_Work_with_Several_Concurrent_DHCP_Clients"
    />.
   </para>
  </sect2>

 </sect1>
 <sect1 id="sec.wireless.wlan.info">
  <title>For More Information</title>

  <para>
   More information can be found on the following pages:
  </para>

  <variablelist>
   <varlistentry>
    <term><ulink
      url="http://www.hpl.hp.com/personal/Jean_Tourrilhes/Linux/Wireless.html"/>
    </term>
    <listitem>
     <para>
      The Internet pages of Jean Tourrilhes, who developed the
      <emphasis>Wireless Tools</emphasis> for Linux, present a wealth of
      useful information about wireless networks.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><ulink url="http://tuxmobil.org"/>
    </term>
    <listitem>
     <para>
      Useful hands-on information about mobile computers under Linux.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><ulink url="http://www.linux-on-laptops.com"/>
    </term>
    <listitem>
     <para>
      More information about Linux on laptops.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry os="osuse">
    <term><ulink
     url="http://en.opensuse.org/HCL:Network_(Wireless)"/>
    </term>
    <listitem>
     <para>
      Lists supported WLAN network cards.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry os="osuse">
    <term><ulink url="http://en.opensuse.org/SDB:Ndiswrapper"/>
    </term>
    <listitem>
     <para>
      Offers a work-around for running unsupported WLAN cards with the
      Microsoft Windows using Ndiswrapper.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
