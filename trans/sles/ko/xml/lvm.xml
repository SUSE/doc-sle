<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="lvm.xml" id="sec.yast2.system.lvm">
 <title>LVM 구성</title><indexterm> <primary>YaST</primary> <secondary>LVM</secondary></indexterm><indexterm> <primary>LVM</primary> <secondary>YaST</secondary></indexterm><indexterm> <primary>논리적 볼륨 관리자</primary> <see>LVM</see></indexterm>

 <para>
  이 절에서는 논리적 볼륨 관리자(LVM)의 원칙과 여러 기능에 대해 간략하게 설명합니다. <xref linkend="sec.yast2.system.lvm.yast"/>에서는 YaST로 LVM을 설정하는 방법을 알아봅니다.
 </para>

 <warning>
  <title>데이터 백업</title>
  <para>
   LVM 사용은 데이터 손실 등의 높은 위험과 관련될 수 있습니다. 위험에는 응용 프로그램 충돌, 정전 및 결함이 있는 명령도 포함됩니다. LVM을 구현하거나 볼륨을 재구성하기 전에 데이터를 저장하십시오. 작업할 때는 항상 백업하십시오.
  </para>
 </warning>

 <sect2 id="sec.yast2.system.lvm.explained">
  <title>논리적 볼륨 관리자(LVM)</title>
  <para>
   LVM을 사용하면 여러 파일 시스템에 하드 디스크 공간을 유연하게 배포할 수 있습니다. LVM이 개발된 이유는 초기 파티셔닝이 이미 완료된 후에만 하드 디스크 공간의 세그먼트를 변경해야 하는 경우가 있기 때문입니다. 실행 중인 시스템에서 파티션을 수정하기는 어렵기 때문에 LVM은 필요에 따라 논리적 볼륨(LV)을 생성할 수 있는 메모리 공간의 가상 풀(볼륨 그룹, 약어로 VG)을 제공합니다. 운영 체제는 물리적 파티션 대신 이러한 LV에 액세스합니다. 볼륨 그룹은 여러 디스크 또는 이 디스크의 일부가 단일 VG를 구성할 수 있도록 둘 이상의 디스크에만 적용할 수 있습니다. 이러한 방식으로, LVM은 물리적 재분할 작업보다 세그먼트 분할 작업을 훨씬 쉽고 안전하게 변경할 수 있는 물리적 디스크 공간으로부터 일종의 추상적인 그림을 제공합니다. 물리적 파티셔닝에 대한 배경 정보는 <xref linkend="sec.IB.part.typen"/> 및 <xref linkend="sec.yast2.i_y2_part_expert"/>을 참조하십시오.
  </para>
  <figure id="fig.lvm.explained.schematic">
   <title>물리적 파티셔닝과 LVM 비교</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="lvm.svg" width="75%" format="SVG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="lvm.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   <xref linkend="fig.lvm.explained.schematic"/>는 물리적 파티셔닝(왼쪽)과 LVM 세그멘테이션(오른쪽)을 비교합니다. 왼쪽 그림에서 한 개의 단일 디스크는 세 개의 물리적 파티션(PART)으로 나누어졌으며 각 파티션에는 운영 체제에서 액세스할 수 있도록 탑재 지점(MP)이 한 개씩 지정되어 있습니다. 오른쪽 그림에서 두 개의 디스크는 두 개와 세 개의 물리적 파티션으로 각각 나누어졌습니다. 두 개의 LVM 볼륨 그룹(VG 1 및 VG 2)이 정의되었습니다. VG 1에는 DISK 1에서 두 개의 파티션이, DISK 2에서 한 개의 파티션이 포함됩니다. VG 2에는 DISK 2에서 나머지 두 개의 파티션이 포함됩니다. LVM에서 볼륨 그룹에 통합된 물리적 디스크 파티션은 물리적 볼륨(PV)이라고 합니다. 볼륨 그룹 내에서 네 개의 LV(LV 1 ~ LV 4)가 정의되었습니다. LV는 연관된 탑재 지점을 통해 운영 체제에서 사용할 수 있습니다. 다른 LV 간의 경계를 파티션 경계에 맞추어 정렬할 필요가 없습니다. 이 예에서 LV 1과 LV 2 간의 경계를 참조하십시오.
  </para>
  <para>
   LVM 기능:
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     여러 하드 디스크나 파티션은 한 개의 대규모 논리적 볼륨으로 결합할 수 있습니다.
    </para>
   </listitem>
   <listitem>
    <para>
     구성이 적합한 경우 사용 가능한 공간이 없으면 LV(예: <filename>/usr</filename>)를 확장할 수 있습니다.
    </para>
   </listitem>
   <listitem>
    <para>
     LVM을 사용하여 실행 중인 시스템에서 하드 디스크 또는 LV를 추가할 수 있습니다. 그러나 이렇게 하려면 핫 플러그 가능한 하드웨어가 필요합니다.
    </para>
   </listitem>
   <listitem>
    <para>
     여러 PV에 걸쳐 LV의 데이터 스트림을 배포하는 "스트라이핑 모드"를 활성화할 수 있습니다. 이러한 PV가 다른 디스크에 있는 경우 RAID 0에서와 같이 읽기 및 쓰기 성능이 향상됩니다.
    </para>
   </listitem>
   <listitem>
    <para>
     스냅샷 기능은 실행 중인 시스템에서 일관된 백업(특히 서버의 경우)을 활성화합니다.
    </para>
   </listitem>
  </itemizedlist>
  <para>
   이 기능을 사용하여 LVM은 자주 사용하는 홈 PC 또는 소형 서버를 준비합니다. LVM은 데이터베이스, 뮤직 아카이브 또는 사용자 디렉토리와 같은 데이터 재고가 많아지는 사용자에게 적합합니다. LVM은 물리적 하드 디스크보다 용량이 큰 파일 시스템을 허용합니다. LVM의 또 다른 장점은 LV를 최대 256개까지 추가할 수 있다는 것입니다. 그러나 LVM 작업은 기존 파티션 작업과 다릅니다. LVM 구성에 대한 지침과 자세한 내용은 <ulink url="http://tldp.org/HOWTO/LVM-HOWTO/"/>의 공식 LVM HOWTO를 참조하십시오.
  </para>
  <para>
   커널 버전 2.6에서 시작하여 LVM 버전 2를 사용할 수 있으므로, LVM의 이전 버전과 호환되고 기존 볼륨 그룹을 지속적으로 관리할 수 있습니다. 새 볼륨 그룹을 생성할 경우 새로운 형식을 사용할지 아니면 이전 버전과 호환되는 버전을 사용할지 여부를 결정하십시오. LVM 2에는 커널 패치가 필요 없고 커널 2.6에서 통합된 장치 매퍼를 이용합니다. 이 커널은 LVM 버전 2만 지원합니다. 따라서 LVM을 언급할 경우 이 절에서는 항상 LVM 버전 2를 참조합니다.
  </para>
  <sect3 id="sec.yast2.system.lvm.explained.thin">
   <title>씬 프로비저닝</title>
   <para>
    커널 버전 3.4에서 시작할 경우 LVM에서 씬 프로비저닝을 지원합니다. 씬 프로비저닝된 볼륨에는 가상 용량과 실제 용량이 있습니다. <emphasis>가상</emphasis> 용량은 호스트에서 사용 가능한 볼륨 저장소 용량입니다. <emphasis>실제</emphasis> 용량은 저장소 풀에서 볼륨 사본에 할당된 저장소 용량입니다. 전체 할당된 볼륨에서는 가상 용량과 실제 용량이 동일합니다. 그러나 씬 프로비저닝된 볼륨에서는 가상 용량이 실제 용량보다 훨씬 클 수 있습니다. 씬 프로비저닝된 볼륨에 쓰기 작업을 수행할 수 있는 실제 용량이 없는 경우 볼륨이 오프라인이 되고 오류가 로깅됩니다.
   </para>
   <para>
    자세한 내용은 <ulink url="http://wikibon.org/wiki/v/Thin_provisioning"/> 항목을 참조하십시오.
   </para>
  </sect3>
 </sect2>

 <sect2 id="sec.yast2.system.lvm.yast">
  <title>YaST로 LVM 구성</title>
  <para>
   <guimenu>시스템 보기</guimenu> 창의 <guimenu>볼륨 관리</guimenu> 항목에 있는 YaST 고급 파티션 도구(<xref linkend="sec.yast2.i_y2_part_expert"/> 참조)에서 YaST LVM 구성에 액세스할 수 있습니다. 고급 파티션 도구를 사용하면 기존 파티션을 편집하고 삭제할 뿐만 아니라 LVM과 함께 사용해야 할 새 파티션을 생성할 수도 있습니다. 첫 번째 작업은 볼륨 그룹에 공간을 제공하는 PV를 생성하는 것입니다.
  </para>
  <procedure>
   <step performance="required">
    <para>
     <guimenu>하드 디스크</guimenu>에서 하드 디스크를 선택합니다.
    </para>
   </step>
   <step performance="required">
    <para>
     <guimenu>파티션</guimenu> 탭으로 변경합니다.
    </para>
   </step>
   <step performance="required">
    <para>
     <guimenu>추가</guimenu>를 클릭하고 이 디스크에서 원하는 PV 크기를 입력합니다.
    </para>
   </step>
   <step performance="required">
    <para>
     <guimenu>파티션 포맷 안 함</guimenu>을 사용하고 <guimenu>파일 시스템 ID</guimenu>를 <guimenu>0x8E Linux LVM</guimenu>으로 변경합니다. 이 파티션을 탑재하지 않음
    </para>
   </step>
   <step performance="required">
    <para>
     사용 가능한 디스크에 원하는 물리적 볼륨을 모두 정의할 때까지 이 절차를 반복합니다.
    </para>
   </step>
  </procedure>
  <sect3 id="sec.yast2.system.lvm.yast.volume_groups">
   <title>볼륨 그룹 생성</title>
   <para>
    시스템에 볼륨 그룹이 없는 경우 볼륨 그룹을 추가해야 합니다(<xref linkend="fig.lvm.yast.volgrp"/> 참조). <guimenu>시스템 보기</guimenu> 창에서 <guimenu>볼륨 관리</guimenu>를 클릭한 다음 <guimenu>볼륨 그룹 추가</guimenu>를 클릭하여 추가 그룹을 생성할 수 있습니다. 일반적으로 한 개의 볼륨 그룹이면 충분합니다.
   </para>
   <procedure>
    <step performance="required">
     <para>
      VG의 이름을 입력합니다(예: <literal>system</literal>).
     </para>
    </step>
    <step performance="required">
     <para>
      원하는 <guimenu>물리적 확장 크기</guimenu>를 선택합니다. 이 값은 볼륨 그룹에서 물리적 블록의 크기를 정의합니다. 볼륨 그룹의 모든 디스크 공간은 이 크기의 블록으로 처리됩니다.
     </para>
    </step>
    <step performance="required">
     <para>
      장치를 선택하고 <guimenu>추가</guimenu>를 클릭하여 준비된 PV를 VG에 추가합니다. 장치를 선택하는 동안 <keycap function="control"/> 키를 누르고 있으면 여러 개의 장치를 선택할 수 있습니다.
     </para>
    </step>
    <step performance="required">
     <para>
      VG를 추가 구성 단계에 사용할 수 있도록 하려면 <guimenu>완료</guimenu>를 선택합니다.
     </para>
    </step>
   </procedure>
   <figure id="fig.lvm.yast.volgrp">
    <title>볼륨 그룹 생성</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_lvm4.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_lvm4.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    여러 개의 볼륨 그룹이 정의되고 PV를 추가하거나 제거할 경우 <guimenu>볼륨 관리</guimenu> 목록에서 볼륨 그룹을 선택하고 <guimenu>크기 조정</guimenu>을 클릭합니다. 다음 창에서 선택한 볼륨 그룹에 PV를 추가하거나 제거할 수 있습니다.
   </para>
  </sect3>
  <sect3 id="sec.yast2.system.lvm.yast.logical_vol">
   <title>논리적 볼륨 구성</title>
   <para>
    볼륨 그룹을 PV로 채운 후에 다음 대화 상자에서 운영 체제를 사용할 LV를 정의합니다. 현재 볼륨 그룹을 선택하고 <guimenu>논리적 볼륨</guimenu> 탭으로 변경합니다. 볼륨 그룹의 모든 공간이 남지 않을 때까지 필요에 따라 LV를 <guimenu>추가</guimenu>, <guimenu>편집</guimenu>, <guimenu>크기 조정</guimenu> 및 <guimenu>삭제</guimenu>합니다. 각 볼륨 그룹에 하나 이상의 LV를 지정합니다.
   </para>
   <figure id="fig.lvm.yast.mgmt">
    <title>논리적 볼륨 관리</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_lvm6.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_lvm6.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    <guimenu>추가</guimenu>를 클릭한 후 열려 있는 마법사 모양의 팝업으로 이동합니다. 
   </para>
   <orderedlist spacing="normal">
    <listitem>
     <para>
      LV의 이름을 입력합니다. <filename>/home</filename>에 탑재해야 할 파티션의 경우 <literal>HOME</literal>과 같은 이름을 사용할 수 있습니다.
     </para>
    </listitem>
    <listitem>
     <para>
      LV 유형을 선택합니다. 이 유형은 <guimenu>일반 볼륨</guimenu>, <guimenu>씬 풀</guimenu> 또는 <guimenu>씬 볼륨</guimenu>일 수 있습니다. 개별 씬 볼륨을 저장할 수 있는 씬 풀을 먼저 만들어야 합니다.
     </para>
    </listitem>
    <listitem>
     <para>
      LV의 스트라이프 수와 크기를 선택합니다. PV가 한 개만 있는 경우 둘 이상의 스트라이프를 선택하는 것은 아무 소용이 없습니다.
     </para>
     <tip>
      <para>
       씬 프로비저닝의 큰 장점은 씬 풀에 저장된 모든 씬 볼륨의 합계가 풀 자체의 크기를 초과할 수 있다는 점입니다.
      </para>
     </tip>
    </listitem>
    <listitem>
     <para>
      마운트 포인트뿐만 아니라 LV에서 사용할 파일 시스템도 선택합니다.
     </para>
    </listitem>
   </orderedlist>
   <para>
    스트라이프를 사용하여 여러 PV(스트라이핑)에서 LV의 데이터 스트림을 배포할 수 있습니다. 그러나 볼륨 스트라이핑은 여러 PV에서만 수행될 수 있으며, 각 PV는 해당 볼륨 공간 이상을 제공합니다. 최대 스트라이프 수는 PV 수와 같고, 여기서 스트라이프 "1"은 "스트라이핑 없음"을 의미합니다. 스트라이핑은 PV가 여러 하드 디스크에 있을 경우에만 해당되며, 그렇지 않은 경우 성능이 저하됩니다.
   </para>
   <warning>
    <title>스트라이핑</title>
    <para>
     이때 YaST는 스트라이핑과 관련된 항목의 정확성을 확인할 수 없습니다. 여기서 발생한 모든 오류는 LVM이 디스크에서 구현된 경우에만 나중에 나타납니다.
    </para>
   </warning>
   <para>
    시스템에서 LVM을 이미 구성한 경우 기존 논리적 볼륨도 사용할 수 있습니다. 계속하기 전에 해당 LV에도 적합한 탑재 지점을 지정하십시오. <guimenu>완료</guimenu>를 눌러 YaST 고급 파티션 도구로 돌아간 다음 작업을 완료하십시오.
   </para>
  </sect3>
 </sect2>


</sect1>
