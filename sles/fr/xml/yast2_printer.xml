<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_printer.xml" version="5.0" xml:id="sec.y2.hw.print">
 <title>Configuration d'une imprimante</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>oui</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  YaST peut être utilisé pour configurer une imprimante locale directement reliée à votre machine via un port USB et pour configurer les impressions avec des imprimantes réseau. Il est également possible de partager des imprimantes sur le réseau. Pour plus d'informations sur l'impression (informations générales, détails techniques et dépannage), reportez-vous au <xref linkend="cha.p"/>.
 </para>

 <para>
  Dans YaST, cliquez sur <menuchoice> <guimenu>Matériel</guimenu> <guimenu>Imprimante</guimenu> </menuchoice> pour lancer le module relatif aux imprimantes. La vue <guimenu>Configurations d'imprimantes</guimenu> s'ouvre par défaut en affichant la liste de toutes les imprimantes disponibles et configurées. Cette vue est particulièrement utile en cas d'accès à un grand nombre d'imprimantes via le réseau. Elle permet également d'<guimenu>imprimer une page de test</guimenu> et de configurer des imprimantes.
 </para>

 <note>
  <title>démarrage de CUPS</title>
  <para>
   Pour pouvoir imprimer à partir de votre système, CUPS doit être en cours d'exécution. S'il ne l'est pas, vous êtes invité à le démarrer. Répondez <guimenu>Oui</guimenu>, faute de quoi vous ne pourrez pas configurer l'impression. Si CUPS n'est pas lancé au moment du démarrage, vous serez également invité à activer cette fonction. Il est recommandé de répondre <guimenu>Oui</guimenu>, faute de quoi vous devrez démarrer CUPS manuellement après chaque redémarrage.
  </para>
 </note>

 <sect2 xml:id="sec.y2.hw.print.local">
  <title>Configuration des imprimantes</title>
  <para>
   En général, une imprimante USB est détectée automatiquement. Si ce n'est pas le cas, deux explications sont possibles :
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     L'imprimante USB est hors tension.
    </para>
   </listitem>
   <listitem>
    <para>
     La communication entre l'imprimante et l'ordinateur est impossible. Vérifiez le câblage et les fiches pour vous assurer que l'imprimante est correctement connectée. Si tel est le cas, le problème n'est peut-être pas lié à l'imprimante, mais plutôt au port USB.
    </para>
   </listitem>
  </itemizedlist>
  <para>
   La configuration d'une imprimante s'effectue en trois étapes. Commencez par spécifier le type de connexion, puis choisissez un pilote et nommez la file d'attente d'impression pour cette configuration.
  </para>
  <para>
   Pour de nombreux modèles d'imprimantes, plusieurs pilotes sont disponibles. Lors de la configuration de l'imprimante, YaST utilise par défaut les pilotes marqués comme <literal>recommandés</literal>. Il n'est généralement pas nécessaire de modifier le pilote. Toutefois, si vous souhaitez qu'une imprimante couleur imprime uniquement en noir et blanc, il est recommandé d'utiliser un pilote qui ne prend pas en charge l'impression couleur, par exemple. Si vous rencontrez des problèmes de performances avec une imprimante PostScript lors de l'impression de graphiques, il peut s'avérer utile de passer d'un pilote PostScript à un pilote PCL (si votre imprimante prend en charge PCL).
  </para>
  <para>
   Si aucun pilote n'est répertorié pour votre imprimante, essayez de sélectionner un pilote générique avec une langue standard appropriée dans la liste. Reportez-vous à la documentation de votre imprimante pour déterminer le langage (ensemble de commandes contrôlant l'imprimante) pris en charge par votre imprimante. Si cela ne fonctionne pas, reportez-vous à la <xref linkend="sec.y2.hw.print.local.get_ppd"/> pour trouver une autre solution.
  </para>
  <para>
   Une imprimante n'est jamais utilisée directement, mais toujours via une file d'attente d'impression. Cette file d'attente garantit que les travaux simultanés peuvent être mis en attente et traités les uns après les autres. Chaque file d'attente d'impression est assignée à un pilote spécifique et l'imprimante peut comporter plusieurs files d'attente. Cela permet de configurer une seconde file d'attente sur une imprimante couleur qui imprime uniquement en noir et blanc, par exemple. Pour plus d'informations sur les files d'attente d'impression, reportez-vous au <xref linkend="sec.p.workflow"/>.
  </para>
  <procedure xml:id="pro.y2.hw.print.local.config">
   <title>Ajout d'une nouvelle imprimante</title>
   <step>
    <para>
     Démarrez le module YaST relatif aux imprimantes en cliquant sur <menuchoice> <guimenu>Matériel</guimenu> <guimenu>Imprimante</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Cliquez sur <guimenu>Ajouter</guimenu> dans l'écran <guimenu>Configurations d'imprimantes </guimenu>.
    </para>
   </step>
   <step>
    <para>
     Si votre imprimante figure déjà sous <literal>Spécifier la connexion</literal>, passez à l'étape suivante. Sinon, sélectionnez <guimenu>Détecter plus d'éléments</guimenu> ou lancez l'<guimenu>assistant de connexion</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Entrez le nom du fournisseur et du modèle dans la zone de texte située sous <literal>Rechercher et assigner un pilote</literal>, puis cliquez sur <guimenu>Rechercher</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez un pilote qui correspond à votre imprimante. Il est recommandé de sélectionner le premier pilote de la liste. Si aucun pilote approprié n'est affiché :
    </para>
    <substeps performance="required">
     <step>
      <para>
       Vérifiez votre terme de recherche.
      </para>
     </step>
     <step>
      <para>
       Élargissez votre recherche en cliquant sur <guimenu>Trouver plus d'éléments</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Ajoutez un pilote selon la procédure décrite dans la <xref linkend="sec.y2.hw.print.local.get_ppd"/>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Spécifiez le paramètre <literal>Taille du papier par défaut</literal>.
    </para>
   </step>
   <step>
    <para>
     Dans le champ <guimenu>Définir un nom arbitraire</guimenu>, entrez un nom unique pour la file d'attente d'impression.
    </para>
   </step>
   <step>
    <para>
     L'imprimante est désormais configurée avec les paramètres par défaut et prête à l'emploi. Cliquez sur <guimenu>OK</guimenu> pour revenir à la vue <guimenu>Configurations d'imprimantes</guimenu>. L'imprimante qui vient d'être configurée apparaît désormais dans la liste des imprimantes.
    </para>
   </step>
  </procedure>
  <sect3 xml:id="sec.y2.hw.print.local.get_ppd">
   <title>Ajout de pilotes avec YaST</title>
   <para>
    Tous les pilotes d'imprimante disponibles pour <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> ne sont pas installés par défaut. Si lors de l'ajout d'une nouvelle imprimante, aucun pilote approprié n'est disponible dans la boîte de dialogue <guimenu>Rechercher et assigner un pilote</guimenu>, installez un paquetage de pilotes pour vos imprimantes :
   </para>
   <procedure>
    <title>Installation de paquetages de pilotes supplémentaires</title>
    <step>
     <para>
      Démarrez le module YaST relatif aux imprimantes en cliquant sur <menuchoice> <guimenu>Matériel</guimenu> <guimenu>Imprimante</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Cliquez sur <guimenu>Ajouter</guimenu> dans l'écran <guimenu>Configurations d'imprimantes</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Cliquez sur <literal>Driver Packages</literal> (Paquetages de pilote) dans la section <guimenu>Find and Assign a Driver</guimenu> (Trouver et assigner un pilote).
     </para>
    </step>
    <step>
     <para>
      Sélectionnez un ou plusieurs paquetages de pilotes appropriés dans la liste. Ne spécifiez <emphasis>pas</emphasis> le chemin d'un fichier de description d'imprimante.
     </para>
    </step>
    <step>
     <para>
      Cliquez sur <guimenu>OK</guimenu> et confirmez l'installation du paquetage.
     </para>
    </step>
    <step>
     <para>
      Pour utiliser ces pilotes directement, suivez la <xref linkend="pro.y2.hw.print.local.config"/>.
     </para>
    </step>
   </procedure>
   <para>
    Les imprimantes PostScript ne nécessitent pas de logiciel de pilote d'imprimante. Elles ont uniquement besoin d'un fichier PPD (PostScript Printer Description) qui correspond au modèle particulier. Les fichiers PPD sont fournis par le fabricant de l'imprimante.
   </para>
   <para>
    Si lors de l'ajout d'une imprimante PostScript, aucun fichier PPD approprié n'est disponible dans la boîte de dialogue <guimenu>Rechercher et assigner un pilote</guimenu>, installez un fichier PPD pour votre imprimante :
   </para>
   <para>
    Plusieurs sources de fichiers PPD sont disponibles. Essayez d'abord les paquetages de pilotes supplémentaires fournis avec <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, mais qui ne sont pas installés par défaut (voir les instructions d'installation ci-dessous). S'ils ne contiennent pas de pilotes appropriés pour votre imprimante, procurez-vous les fichiers PPD directement auprès de votre fournisseur d'imprimantes ou sur le CD de pilotes d'une imprimante PostScript. Pour plus de détails, reportez-vous au <xref linkend="sec.drucken.prob.ppd"/>. Vous pouvez également accéder aux fichiers PPD à l'adresse <link xlink:href="http://www.linuxfoundation.org/collaborate/workgroups/openprinting/database/databaseintro"/>, la <quote>base de données d'imprimantes OpenPrinting.org</quote>. Lorsque vous téléchargez des fichiers PPD à partir du site OpenPrinting, n'oubliez pas qu'ils affichent toujours l'état du dernier support Linux, qui ne correspond pas forcément à celui de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
   </para>
   <procedure>
    <title>Ajout d'un fichier PPD pour les imprimantes PostScript</title>
    <step>
     <para>
      Démarrez le module YaST relatif aux imprimantes en cliquant sur <menuchoice> <guimenu>Matériel</guimenu> <guimenu>Imprimante</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Cliquez sur <guimenu>Ajouter</guimenu> dans l'écran <guimenu>Configurations d'imprimantes</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Cliquez sur <literal>Driver Packages</literal> (Paquetages de pilote) dans la section <guimenu>Find and Assign a Driver</guimenu> (Trouver et assigner un pilote).
     </para>
    </step>
    <step>
     <para>
      Entrez le chemin complet du fichier PPD dans la zone de texte située sous <literal>Rendre un fichier de description d'imprimante disponible</literal>.
     </para>
    </step>
    <step>
     <para>
      Cliquez sur <guimenu>OK</guimenu> pour revenir à l'écran <literal>Ajouter une nouvelle imprimante</literal>.
     </para>
    </step>
    <step>
     <para>
      Pour utiliser directement ce fichier PPD, suivez la <xref linkend="pro.y2.hw.print.local.config"/>.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec.y2.hw.print.local.tune">
   <title>Modification d'une configuration d'imprimante locale</title>
   <para>
    En éditant la configuration existante d'une imprimante, vous pouvez modifier des paramètres de base  tels que le type de connexion et le pilote. Il est également possible d'ajuster les paramètres par défaut tels que le format du papier, la résolution, la source du média, etc. Vous pouvez modifier les identifiants de l'imprimante en changeant la description ou l'emplacement de l'imprimante.
   </para>
   <procedure>
    <step>
     <para>
      Démarrez le module YaST relatif aux imprimantes en cliquant sur <menuchoice> <guimenu>Matériel</guimenu> <guimenu>Imprimante</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Dans l'écran <guimenu>Configurations d'imprimantes</guimenu>, sélectionnez une configuration d'imprimante locale dans la liste, puis cliquez sur <guimenu>Modifier</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Modifiez le type de connexion ou le pilote, conformément à la <xref linkend="pro.y2.hw.print.local.config"/>. Cela ne devrait être nécessaire que si vous rencontrez des problèmes avec la configuration actuelle.
     </para>
    </step>
    <step>
     <para>
      Vous pouvez également définir cette imprimante comme celle par défaut en cochant la case <guimenu>Imprimante par défaut</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Modifiez les paramètres par défaut en cliquant sur <guimenu>Toutes les options du pilote actuel</guimenu>. Pour modifier un paramètre, développez la liste des options en cliquant sur le signe <literal>+</literal>. Modifiez le paramètre par défaut en cliquant sur une option. Cliquez sur <guimenu>OK</guimenu> pour appliquer vos modifications.
     </para>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.y2.hw.print.network">
  <title>Configuration de l'impression via le réseau avec YaST</title>
  <para>
   Les imprimantes réseau ne sont pas détectées automatiquement. Elles doivent être configurées manuellement à l'aide du module YaST relatif aux imprimantes. En fonction de votre configuration réseau, vous pouvez imprimer sur un serveur d'impression (CUPS, LPD, SMB ou IPX) ou directement sur une imprimante réseau (via TCP de préférence). Accédez à la vue de configuration réseau en sélectionnant <guimenu>Imprimer par le réseau</guimenu> dans le volet gauche du module YaST relatif aux imprimantes.
  </para>
  <sect3 xml:id="sec.y2.hw.print.network.cups">
   <title>Utilisation de CUPS</title>
   <para>
    Dans un environnement Linux, CUPS est généralement utilisé pour imprimer via le réseau. La configuration la plus simple consiste à imprimer via un seul serveur CUPS auquel tous les clients peuvent accéder directement. L'impression via plusieurs serveurs CUPS nécessite l'exécution du daemon CUPS local qui communique avec les serveurs CUPS distants.
   </para>
   <important>
    <title>navigation dans les files d'attente d'impression réseau</title>
    <para>
     Les serveurs CUPS publient leurs files d'attente d'impression sur le réseau via le protocole de navigation traditionnel CUPS ou Bonjour/DND-SD. Les clients doivent pouvoir parcourir ces listes afin que les utilisateurs puissent sélectionner des imprimantes spécifiques auxquelles envoyer leurs travaux d'impression. Pour pouvoir naviguer dans les files d'attente d'impression réseau, le service <systemitem class="daemon">cups-browsed</systemitem> fournit par le paquetage <systemitem class="resource">cups-filters-cups-browsed</systemitem> doit s'exécuter sur tous les clients qui impriment via les serveurs CUPS.<systemitem class="daemon">cups-browsed</systemitem> est démarré automatiquement lors de la configuration de l'impression réseau avec YaST.
    </para>
    <para>
     Si la navigation ne fonctionne pas après avoir démarré <systemitem class="daemon">cups-browsed</systemitem>, les serveurs CUPS annoncent probablement les files d'attente d'impression réseau via Bonjour/DND-SD. Dans ce cas, vous devez également installer le paquetage <systemitem class="resource">avahi</systemitem> et démarrer le service associé en exécutant la commande <command>sudo systemctl start avahi-daemon</command> sur tous les clients.
    </para>
   </important>
   <procedure>
    <title>Impression via un seul serveur CUPS</title>
    <step>
     <para>
      Démarrez le module YaST relatif aux imprimantes en cliquant sur <menuchoice> <guimenu>Matériel</guimenu> <guimenu>Imprimante</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Ouvrez l'écran <guimenu>Imprimer via le réseau</guimenu> à partir du volet gauche.
     </para>
    </step>
    <step>
     <para>
      Sélectionnez <guimenu>Do All Your Printing Directly via One Single CUPS Server</guimenu> (Tout imprimer directement via un seul serveur CUPS) et spécifiez le nom ou l'adresse IP du serveur.
     </para>
    </step>
    <step>
     <para>
      Cliquez sur <guimenu>Tester le serveur</guimenu> pour vous assurer que vous avez sélectionné le nom ou l'adresse IP appropriée.
     </para>
    </step>
    <step>
     <para>
      Cliquez sur OK pour revenir à l'écran <guimenu>Configurations d'imprimantes</guimenu>. Toutes les imprimantes disponibles via le serveur CUPS sont désormais répertoriées.
     </para>
    </step>
   </procedure>
   <procedure>
    <title>Impression via plusieurs serveurs CUPS</title>
    <step>
     <para>
      Démarrez le module YaST relatif aux imprimantes en cliquant sur <menuchoice> <guimenu>Matériel</guimenu> <guimenu>Imprimante</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Ouvrez l'écran <guimenu>Imprimer via le réseau</guimenu> à partir du volet gauche.
     </para>
    </step>
    <step>
     <para>
      Cochez la case <guimenu>Accepter les annonces d'imprimantes depuis les serveurs CUPS</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Spécifiez les serveurs que vous souhaitez utiliser sous <literal>Paramètres généraux</literal>. Vous pouvez accepter les connexions de tous les réseaux disponibles ou de certains hôtes spécifiques. Si vous choisissez la dernière option, vous devez spécifier les noms d'hôte ou les adresses IP.
     </para>
    </step>
    <step>
     <para>
      Confirmez en cliquant sur <guimenu>OK</guimenu>, puis sur <guimenu>Oui</guimenu> lorsque vous êtes invité à démarrer un serveur CUPS local. Une fois le serveur démarré, YaST revient à l'écran <guimenu>Configurations d'imprimantes</guimenu>. Cliquez sur <guimenu>Rafraîchir la liste</guimenu> pour afficher les imprimantes détectées à partir de maintenant. Cliquez de nouveau sur ce bouton si d'autres imprimantes supplémentaires sont disponibles.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec.y2.hw.print.network.other">
   <title>Utilisation de serveurs d'impression autres que CUPS</title>
   <para>
    Si votre réseau offre des services d'impression via des serveurs autres que CUPS, lancez le module YaST relatif aux imprimantes en cliquant sur <menuchoice> <guimenu>Matériel</guimenu><guimenu>Imprimante</guimenu></menuchoice>, puis ouvrez l'écran <guimenu>Imprimer par le réseau</guimenu> à partir du volet gauche. Démarrez l'<guimenu>Assistant de connexion</guimenu> et sélectionnez le <guimenu>Type de connexion</guimenu> approprié. Demandez à votre administrateur réseau des détails sur la configuration d'une imprimante réseau dans votre environnement.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.y2.hw.print.share">
  <title>Partage des imprimantes sur le réseau</title>
  <para>
   Les imprimantes gérées par un daemon CUPS local peuvent être partagées sur le réseau, transformant ainsi votre machine en serveur CUPS. Généralement, vous partagez une imprimante en activant le <quote>mode de navigation</quote> CUPS. Si la navigation est activée, les files d'attente d'impression locale sont mises à disposition sur le réseau pour écouter les daemons CUPS distants. Il est également possible de configurer un serveur CUPS dédié qui gère toutes les files d'attente d'impression et auquel les clients distants peuvent accéder directement. Dans ce cas, il n'est pas nécessaire d'activer la navigation.
  </para>
  <procedure>
   <title>Partage des imprimantes</title>
   <step>
    <para>
     Démarrez le module YaST relatif aux imprimantes en cliquant sur <menuchoice> <guimenu>Matériel</guimenu> <guimenu>Imprimante</guimenu> </menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Ouvrez l'écran <guimenu>Partager les imprimantes</guimenu> dans le volet gauche.
    </para>
   </step>
   <step>
    <para>
     Sélectionnez <guimenu>Autoriser l'accès distant</guimenu>. Sélectionnez également <guimenu>Pour les ordinateurs dans le réseau local</guimenu> et activez le mode de navigation en sélectionnant également <guimenu>Publier les imprimantes par défaut dans le réseau local</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Cliquez sur <guimenu>OK</guimenu> pour redémarrer le serveur CUPS et revenir à l'écran <guimenu>Configurations d'imprimantes</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Pour plus d'informations sur les paramètres de CUPS et du pare-feu, visitez le site <link xlink:href="http://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings"/>.
    </para>
   </step>
  </procedure>
 </sect2>
</sect1>
