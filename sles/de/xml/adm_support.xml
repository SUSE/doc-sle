<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="adm_support.xml" version="5.0" xml:id="cha.adm.support">


 <title>Erfassen der Systeminformationen für den Support</title>
 <info>
  <abstract>
   <para>
    Das Paket <systemitem class="systemname">hostinfo</systemitem> in <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> ermöglicht einen raschen Überblick über alle relevanten Systeminformationen eines Computers. Hier können die Systemadministratoren außerdem ermitteln, ob ein Computer unbrauchbare (nicht unterstützte) Kernels enthält oder ob Drittanbieterpakete installiert sind.
   </para>

   <para>
    Bei Problemen wird ein detaillierter Systembericht mit dem Kommandozeilenwerkzeug <command>supportconfig</command> oder mit dem YaST-<guimenu>Support</guimenu>-Modul erzeugt. Beide Werkzeuge sammeln Informationen zum System, beispielsweise aktuelle Kernel-Version, Hardware, installierte Pakete, Partitionseinrichtung und einiges mehr. Hierbei wird ein TAR-Archiv mit Dateien ausgegeben. Wenn Sie eine Service-Anforderung öffnen, können Sie das TAR-Archiv für den globalen technischen Support heraufladen. Der Support hilft Ihnen, das gemeldete Problem zu lokalisieren und zu beheben.
   </para>

   <para>
    Darüber hinaus können Sie die <command>supportconfig</command>-Ausgabe auf bekannte Probleme hin analysieren und so die Fehlerbehebung noch beschleunigen. <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> bietet hierzu eine Anwendung und ein Kommandozeilenwerkzeug für die <literal>supportconfig-Analyse</literal> (SCA).
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>Ja</dm:translation>
  </dm:docmanager>
 </info>
<indexterm> <primary>Support</primary> </indexterm> <indexterm> <primary>Systeminformationen</primary> </indexterm>
 <sect1 xml:id="sec.admsupport.hostinfo">
  <title>Anzeigen aktueller Systeminformationen</title>



  <para>
   Mit dem Paket <systemitem class="systemname">hostinfo</systemitem> erhalten Sie schnell und einfach eine Übersicht über alle relevanten Systeminformationen, sobald Sie sich bei einem Server anmelden. Nach der Installation auf einem Computer zeigt die Konsole die folgenden Informationen für jeden <systemitem class="username">root</systemitem>-Benutzer an, der sich bei diesem Computer anmeldet:
  </para>

  <example xml:id="ex.support.hostinfo">
   <title>Ausgabe von <command>hostinfo</command> beim Anmelden als <systemitem class="username">root</systemitem></title>
<screen>Hostname:                 earth
Current As Of:            Wed 12 Mar 2014 03:57:05 PM CET
Distribution:             SUSE Linux Enterprise Server 12
 -Service Pack:           0
Architecture:             x86_64
Kernel Version:           3.12.12-3-default
 -Installed:              Mon 10 Mar 2014 03:15:05 PM CET
 -Status:                 Not Tainted
Last Updated Package:     Wed 12 Mar 2014 03:56:43 PM CET
 -Patches Needed:         0
 -Security:               0
 -3rd Party Packages:     0
IPv4 Address:             ens3 192.168.1.1
Total/Free/+Cache Memory: 983/95/383 MB (38% Free)
Hard Disk:                /dev/sda 10 GB</screen>
  </example>

  <para>
   Wenn die Ausgabe auf einen <literal>unbrauchbaren</literal> Kernel-Status hinweist, finden Sie weitere Details in <xref linkend="sec.admsupport.kernel"/>.
  </para>
 </sect1>
 <sect1 xml:id="sec.admsupport.supportconfig">
  <title>Erfassen von Systeminformationen mit supportconfig</title>

  <para>
   Zum Erstellen eines TAR-Archivs mit detaillierten Systeminformationen, die Sie an den globalen technischen Support übertragen können, verwenden Sie entweder direkt das Kommandozeilenwerkzeug <command>supportconfig</command> oder das YaST-<guimenu>Support</guimenu>-Modul. Das Kommandozeilenwerkzeug wird im Paket <systemitem>supportutils</systemitem> bereitgestellt, das standardmäßig installiert ist. Das YaST-<guimenu>Support</guimenu>-Modul baut zudem auf dem Kommandozeilenwerkzeug auf.
  </para>

  <sect2 xml:id="sec.admsupport.supportconfig.sr">
   <title>Erstellen einer Serviceanforderungsnummer</title>
   <para>
    supportconfig-Archive können jederzeit erzeugt werden. Wenn Sie die supportconfig-Daten an den globalen technischen Support übertragen möchten, müssen Sie jedoch zunächst eine Service-Anforderungs-Nummer erstellen. Diese Nummer benötigen Sie, um das Archiv an den Support heraufladen zu können.
   </para>
   <para>
    Zum Erstellen einer Service-Anforderung wechseln Sie zu <link xlink:href="http://www.novell.com/center/eservice"/>, und befolgen Sie die Anweisungen auf dem Bildschirm. Schreiben Sie sich die 11-stellige Service-Anforderungs-Nummer auf.
   </para>
   <note>
    <title>Datenschutzerklärung </title>
    <para>
     SUSE und Novell behandeln die Systemberichte als vertraulich. Weitere Informationen zum Datenschutz finden Sie unter <link xlink:href="http://www.novell.com/company/legal/privacy/"/>.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="sec.admsupport.supportconfig.upload">
   <title>Upload-Ziele</title>
   <para>
    Sobald Sie eine Service-Anforderungs-Nummer erstellt haben, können Sie Ihre supportconfig-Archive gemäß den Anweisungen in <xref linkend="pro.admsupport.submit.yast"/> oder <xref linkend="pro.admsupport.submit.cli"/> an den globalen technischen Support heraufladen. Verwenden Sie eines der folgenden Upload-Ziele:
   </para>


   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Kunden in den USA: <link xlink:href="ftp://ftp.novell.com/incoming"/>
     </para>
    </listitem>
    <listitem>
     <para>
      EMEA (Europa, Nahost und Afrika): <link xlink:href="ftp://support-ftp.suse.com/in"/>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Alternativ können Sie das TAR-Archiv auch an Ihre Service-Anforderung anhängen und die URL für Service-Anforderungen verwenden: <link xlink:href="http://www.novell.com/center/eservice"/>.
   </para>
  </sect2>

  <sect2 xml:id="sec.admsupport.yast">
   <title>Erstellen eines supportconfig-Archivs mit YaST</title>
   <para>
    Gehen Sie wie folgt vor, wenn Sie Ihre Systeminformationen mithilfe von YaST erfassen möchten: <remark>2008-11-20 toms: YaST asks the user to open a URL as
     root(!). This happens when the users clicks on "Open" (Open
     Support Center/ This will start a browser with
     Support Center Portal). I do not think we should describe this
     and only *use* the above URL as a normal user for security
     reasons.</remark>
   </para>
   <procedure>
    <step>
     <para>
      Starten Sie YaST, und öffnen Sie das <guimenu>Support</guimenu>-Modul.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2-support-main.png" width="70%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2-support-main.png" width="60%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Klicken Sie auf <guimenu>Berichts-Tarball erstellen</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Wählen Sie im nächsten Fenster eine der supportconfig-Optionen in der Optionsliste aus. Die Option <guimenu>Benutzerdefinierte Einstellungen (für Experten) verwenden</guimenu> ist standardmäßig aktiviert. Wenn Sie die Berichtfunktion zuerst testen möchten, verwenden Sie <guimenu>Nur eine minimale Anzahl von Informationen sammeln</guimenu>. Weitere Hintergrundoptionen zu den weiteren Optionen finden Sie auf der man-Seite zu <command>supportconfig</command>.
     </para>
     <para>
      Fahren Sie mit <guimenu>Weiter</guimenu> fort.
     </para>
    </step>
    <step xml:id="step.supportconfig.contact">
     <para>
      Geben Sie Ihre Kontaktdaten ein. Die Daten werden in die Datei <filename>basic-environment.txt</filename> geschrieben und in das zu erstellende Archiv aufgenommen.
     </para>
    </step>
    <step xml:id="step.supportconfig.upload.target">
     <para>
      Soll das Archiv nach Abschluss der Datenerfassung an den globalen technischen Support gesendet werden, müssen Sie <guimenu>Upload-Informationen</guimenu> angeben. YaST schlägt automatisch einen Upload-Server vor. Wenn Sie diesen Server ändern möchten, erfahren Sie in <xref linkend="sec.admsupport.supportconfig.upload"/>, welche Upload-Server verfügbar sind.
     </para>
     <para>
      Soll das Archiv erst später gesendet werden, können Sie die <guimenu>Upload-Informationen</guimenu> leer lassen.
     </para>
    </step>
    <step>
     <para>
      Fahren Sie mit <guimenu>Weiter</guimenu> fort.
     </para>
    </step>
    <step>
     <para>
      Es wird nun mit dem Sammeln der Informationen begonnen. 
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2-support-conf.png" width="90%" format="PNG"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2-support-conf.png" width="80%" format="PNG"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
     <para>
      Fahren Sie nach Ende des Vorgangs mit <guimenu>Weiter</guimenu> fort.
     </para>
    </step>
    <step>
     <para>
      Prüfen der Datensammlung: Wählen Sie den <guimenu>Dateinamen</guimenu> einer Protokolldatei aus. Der Inhalt dieser Datei wird in YaST angezeigt. Entfernen Sie bei Bedarf die Dateien, die nicht in das TAR-Archiv aufgenommen werden sollen, mit <guimenu>Aus Daten entfernen</guimenu>. Fahren Sie mit <guimenu>Weiter</guimenu> fort.
     </para>
    </step>
    <step>
     <para>
      Speichern Sie das TAR-Archiv. Wenn Sie das YaST-Modul als <systemitem class="username">root</systemitem>-Benutzer gestartet hatten, schlägt YaST standardmäßig den Ordner <filename>/var/log</filename> als Speicherort für das Archiv vor (ansonsten Ihr Benutzerverzeichnis). Das Format des Dateinamens lautet <filename>nts_<replaceable>HOST</replaceable>_<replaceable>DATUM</replaceable>_<replaceable>UHRZEIT</replaceable>.tbz</filename>.
     </para>
    </step>
    <step>
     <para>
      Soll das Archiv direkt an den Support heraufgeladen werden, muss die Aktion <guimenu>Protokolldatei-Tarball an URL heraufladen</guimenu> aktiviert sein. Hier ist das <guimenu>Upload-Ziel</guimenu> angegeben, das YaST in <xref linkend="step.supportconfig.upload.target"/> vorgeschlagen hat. Wenn Sie das Upload-Ziel ändern möchten, erfahren Sie in <xref linkend="sec.admsupport.supportconfig.upload"/>, welche Upload-Server verfügbar sind.
     </para>
    </step>
    <step>
     <para>
      Um das Heraufladen zu überspringen, deaktivieren Sie die Option <guimenu>Protokolldatei-Tarball zu URL heraufladen</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Bestätigen Sie die Änderungen. Das YaST-Modul wird geschlossen.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.admsupport.cli">
   <title>Erstellen eines supportconfig-Archivs über die Kommandozeile</title>
   <para>
    Mit dem nachstehenden Verfahren erstellen Sie ein supportconfig-Archiv, ohne das Archiv direkt an den Support zu übertragen. Zum Heraufladen müssen Sie das entsprechende Kommando mit den zugehörigen Optionen ausführen (siehe <xref linkend="pro.admsupport.submit.cli"/>).
   </para>
   <procedure>
    <step>
     <para>
      Öffnen Sie eine Shell und melden Sie sich als <systemitem class="username">root</systemitem> an.
     </para>
    </step>
    <step>
     <para>
      Führen Sie <command>supportconfig</command> ohne Optionen aus. Damit werden die Standard-Systeminformationen gesammelt.
     </para>
    </step>
    <step>
     <para>
      Warten Sie, bis das Tool den Vorgang beendet hat.
     </para>
    </step>
    <step>
     <para>
      Der Standardspeicherort für das Archiv befindet sich unter <filename>/var/log</filename> und hat das Dateinamenformat <filename>nts_<replaceable>HOST</replaceable>_<replaceable>DATUM</replaceable>_<replaceable>UHRZEIT</replaceable>.tbz</filename>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.admsupport.options">
   <title>Allgemeine Optionen für Supportconfig</title>
   <para>
    Das Dienstprogramm <command>supportconfig</command> wird in der Regel ohne Optionen aufgerufen. Zeigen Sie mit eine Liste aller Optionen für <command>supportconfig</command> mit <option>-h</option> an oder lesen Sie die man-Seite. Die folgende Liste enthält eine kurze Übersicht einiger gängiger Fälle:
   </para>
   <variablelist>
    <varlistentry>
     <term>Vermindern des Umfangs der erfassten Informationen</term>
     <listitem>
      <para>
       Verwenden Sie die Minimal-Option (<option>-m</option>):
      </para>
<screen>supportconfig -m</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Begrenzen der Informationen auf ein bestimmtes Thema</term>
     <listitem>
      <para>
       Wenn Sie in der standardmäßigen <command>supportconfig</command>-Ausgabe bereits ein Problem festgestellt haben und dieses Problem auf einen bestimmten Bereich oder eine bestimmte Funktionsgruppe beschränkt ist, sollten Sie die erfassten Informationen beim nächsten Ausführen von <command>supportconfig</command> auf diesen Bereich begrenzen. Wenn Sie beispielsweise ein Problem mit LVM erkannt haben und daher eine Änderung testen möchten, die Sie vor Kurzem an der LVM-Konfiguration hatten, reicht es völlig aus, nur die minimalen supportconfig-Informationen zu LVM zu erfassen:
      </para>
<screen>supportconfig -i LVM</screen>
      <para>
       Eine vollständige Liste der Funktionsschlüsselwörter, mit denen Sie die erfassten Informationen auf einen bestimmten Bereich begrenzen, erhalten Sie mit dem
      </para>
<screen>supportconfig -F</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Aufnehmen zusätzlicher Kontaktinformationen in die Ausgabe:</term>
     <listitem>
<screen>supportconfig -E tux@example.org -N "Tux Penguin" -O "Penguin Inc." ...</screen>
      <para>
       (alle in einer Zeile)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Sammeln von bereits rotierten Protokolldateien</term>
     <listitem>
<screen>supportconfig -l</screen>
      <para>
       Dies ist insbesondere in Umgebungen mit hohem Protokollierungsaufkommen nützlich, und außerdem nach einem Kernel-Crash, wenn syslog die Protokolldateien nach dem Neubooten rotiert.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.admsupport.submit">
  <title>Übertragen von Informationen an den globalen technischen Support</title>

  <para>
   Zum Übertragen der Systeminformationen an den globalen technischen Support verwenden Sie das YaST-<guimenu>Support</guimenu>-Modul oder das Befehlszeilenprogramm <command>supportconfig</command>. Falls Serverprobleme auftreten und Sie Hilfe benötigen, müssen Sie zunächst eine Serviceanforderung öffnen. Weitere Informationen finden Sie unter <xref linkend="sec.admsupport.supportconfig.sr"/>.
  </para>

  <para>
   In den nachfolgenden Beispielen fungiert die Zahl <replaceable>12345678901</replaceable> als Platzhalter für die Service-Anforderungs-Nummer. Ersetzen Sie die Zahl <replaceable>12345678901</replaceable> durch die Service-Anforderungs-Nummer, die Sie in <xref linkend="sec.admsupport.supportconfig.sr"/> erstellt haben.
  </para>

  <procedure xml:id="pro.admsupport.submit.yast">
   <title>Übertragen von Informationen an den Support mithilfe von YaST</title>
   <para>
    Im nachfolgenden Verfahren wird angenommen, dass Sie bereits ein supportconfig-Archiv erstellt, jedoch noch nicht heraufgeladen haben. Nehmen Sie in jedem Fall Ihre Kontaktdaten in das Archiv auf (siehe <xref linkend="sec.admsupport.yast"/>, <xref linkend="step.supportconfig.contact" xrefstyle="select:label nopage"/>). Weitere Anweisungen zum Erzeugen und Übertragen eines supportconfig-Archivs in einem einzigen Arbeitsgang finden Sie in <xref linkend="sec.admsupport.yast"/>.
   </para>
   <step>
    <para>
     Starten Sie YaST, und öffnen Sie das <guimenu>Support</guimenu>-Modul.
    </para>
   </step>
   <step>
    <para>
     Klicken Sie auf <guimenu>Heraufladen</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Geben Sie unter <guimenu>Paket mit Protokolldateien</guimenu> den Pfad zum vorhandenen supportconfig-Archiv ein, oder klicken Sie auf <guimenu>Durchsuchen</guimenu>, und wechseln Sie zu dem Ordner, in dem sich das Archiv befindet.
    </para>
   </step>
   <step xml:id="step.supportcfg.submit.upltarget">
    <para>
     YaST schlägt automatisch einen Upload-Server vor. Wenn Sie diesen Server ändern möchten, erfahren Sie in <xref linkend="sec.admsupport.supportconfig.upload"/>, welche Upload-Server verfügbar sind.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2-support-conf-upload.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2-support-conf-upload.png" width="60%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
    <para>
     <remark>taroth 2014-04-11: this does not make sense to me - why does the
      YaST module *not* ask for the SR number now? and lets you continue after
      specifying an upload target (but no RC or customer info)? I would
      expect it to *check* if an SR has been entered and otherwise show an error
      message - filed http://bugzilla.suse.com/show_bug.cgi?id=880943 for this, unfortunately it
      was rejected for technical reasons</remark> Fahren Sie mit <guimenu>Weiter</guimenu> fort.
    </para>
   </step>
   <step>
    <para>
     Klicken Sie auf <guimenu>Fertig stellen</guimenu>.
    </para>
   </step>
  </procedure>

  <procedure xml:id="pro.admsupport.submit.cli">
   <title>Übertragen von Informationen an den Support über die Kommandozeile</title>
   <para>
    Im nachfolgenden Verfahren wird angenommen, dass Sie bereits ein supportconfig-Archiv erstellt, jedoch noch nicht heraufgeladen haben. Weitere Anweisungen zum Erzeugen und Übertragen eines supportconfig-Archivs in einem einzigen Arbeitsgang finden Sie in <xref linkend="sec.admsupport.yast"/>.
   </para>
   <step>
    <para>
     Server mit Internetkonnektivität:
    </para>
    <substeps performance="required">
     <step>
      <para>
       Führen Sie das folgende Kommando aus, um das Standard-Uploadziel zu verwenden:
      </para>
<screen>supportconfig -ur <replaceable>12345678901</replaceable></screen>
     </step>
     <step>
      <para>
       Verwenden Sie das folgende sichere Upload-Ziel:
      </para>

<screen>supportconfig -ar <replaceable>12345678901</replaceable></screen>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Server <emphasis>ohne</emphasis> Internetkonnektivität
    </para>
    <substeps performance="required">
     <step>
      <para>
       Führen Sie Folgendes aus:
      </para>
<screen>supportconfig -r <replaceable>12345678901</replaceable></screen>
     </step>
     <step>
      <para>
       Laden Sie das Archiv <filename>/var/log/nts_<replaceable>SR12345678901</replaceable>*tbz</filename> manuell auf einen unserer FTP-Server herauf. Der richtige Server ist abhängig von Ihrem Standort. Einen Überblick finden Sie unter <xref linkend="sec.admsupport.supportconfig.upload"/>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Sobald das TAR-Archiv im Eingangsverzeichnis unseres FTP-Servers eingeht, wird es automatisch an Ihre Service-Anforderung angehängt.
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 xml:id="sec.admsupport.sca">
  <title>Analysieren von Systeminformationen</title>

  <para>
   Die mit <command>supportconfig</command> erstellten Systemberichte können auf bekannte Probleme hin analysiert werden, so dass die Fehlerbehebung noch beschleunigt wird. <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> bietet hierzu eine Anwendung und ein Kommandozeilenwerkzeug für die <literal>supportconfig-Analyse</literal> (SCA). Die SCA-Appliance ist ein serverseitiges, nicht interaktives Werkzeug. Das SCA-Werkzeug (<command>scatool</command>) wird auf der Client-Seite über die Kommandozeile ausgeführt. Beide Werkzeuge analysieren die supportconfig-Archive von betroffenen Servern. Die erste Serveranalyse erfolgt in der SCA-Appliance oder auf dem Arbeitsplatzrechner, auf dem scatool ausgeführt wird. Auf dem Produktionsserver werden keine Analysezyklen durchgeführt.
  </para>

  <para>
   Sowohl für die Appliance als auch für das Kommandozeilenwerkzeug sind zusätzliche produktspezifische Schemata erforderlich, damit die supportconfig-Ausgabe für die entsprechenden Produkte analysiert werden kann. Jedes Schema ist ein Skript, mit dem ein supportconfig-Archiv auf genau ein bekanntes Problem hin analysiert und ausgewertet wird. Die Schemata stehen als RPM-Pakete zur Verfügung.
  </para>

  <para>
   Wenn Sie beispielsweise supportconfig-Archive analysieren möchten, die auf einem Computer mit SUSE Linux Enterprise 11 erzeugt wurden, müssen Sie dort das Paket <systemitem class="resource">sca-patterns-sle11</systemitem> zusammen mit dem SCA-Werkzeug installieren (oder auf dem Computer, der als SCA-Appliance-Server dienen soll). Zum Analysieren von supportconfig-Archiven, die auf einem Rechner mit SUSE Linux Enterprise 10 erzeugt wurden, benötigen Sie das Paket <systemitem class="resource">sca-patterns-sle10</systemitem>.
  </para>

  <para>
   Sie können außerdem eigene Schemata entwickeln (kurze Beschreibung siehe <xref linkend="sec.admsupport.sca.patterns"/>).
  </para>

  <sect2 xml:id="sec.admsupport.sca.tool">
   <title>SCA-Kommandozeilenwerkzeug</title>
   <para>
    Mithilfe des SCA-Kommandozeilenwerkzeugs können Sie einen lokalen Rechner sowohl mit <command>supportconfig</command> als auch mit den auf dem lokalen Rechner installierten Analyseschemata analysieren. Das Werkzeug erstellt einen HTML-Bericht mit den Analyseergebnissen. Ein Beispiel finden Sie in <xref linkend="fig.scatool.html"/>.
   </para>
   <figure xml:id="fig.scatool.html">
    <title>Mit dem SCA-Werkzeug erstellter HTML-Bericht</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="sca_tool_report_html.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="sca_tool_report_html.png" width="100%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Das Kommando <command>scatool</command>wird mit dem Paket <systemitem class="resource">sca-server-report</systemitem> bereitgestellt. Die Installation erfolgt nicht standardmäßig. Darüber hinaus benötigen Sie das Paket <systemitem class="resource">sca-patterns-base</systemitem> sowie alle produktspezifischen Pakete <systemitem class="resource">sca-patterns-*</systemitem> für das Produkt, das auf dem Rechner installiert ist, auf dem das Kommando <command>scatool</command> ausgeführt werden soll.
   </para>
   <para>
    Führen Sie das Kommando <command>scatool</command> als <systemitem class="username">root</systemitem>-Benutzer oder mit <command>sudo</command> aus. Beim Aufrufen des SCA-Werkzeugs können Sie wahlweise ein vorhandenes <command>supportconfig</command>-TAR-Archiv analysieren oder auch ein neues Archiv erzeugen und im gleichen Arbeitsgang analysieren. Das Werkzeug bietet zudem eine interaktive Konsole (mit automatischer Ausfüllung der Karteireiter) sowie die Möglichkeit, <command>supportconfig</command> auf einem externen Rechner auszuführen und die anschließende Analyse auf dem lokalen Rechner vorzunehmen.
   </para>
   <para>
    Einige Kommandobeispiele:
   </para>
   <variablelist>
    <varlistentry>
     <term><command>sudo scatool </command><option>-s</option>
     </term>
     <listitem>
      <para>
       Ruft <command>supportconfig</command> auf und erzeugt ein neues supportconfig-Archiv auf dem lokalen Rechner. Analysiert das Archiv auf bekannte Probleme mithilfe der passenden SCA-Analyseschemata für das installierte Produkt. Zeigt den Pfad zum HTML-Bericht an, der aus den Analyseergebnissen erzeugt wird. Der Bericht wird in der Regel in dasselbe Verzeichnis geschrieben wie das supportconfig-Archiv.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-s</option> <option>-o</option> <replaceable>/opt/sca/reports/</replaceable> 
     </term>
     <listitem>
      <para>
       Wie <command>sudo scatool </command><option>-s</option>, mit dem Unterschied, dass der HTML-Bericht in den mit der Option <option>-o</option> angegebenen Pfad geschrieben wird.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-a</option> <replaceable>PFAD_ZU_TARBALL_ODER_VERZEICHNIS</replaceable> 
     </term>
     <listitem>
      <para>
       Analysiert die angegebene supportconfig-Archivdatei (oder das angegebene Verzeichnis, in das das supportconfig-Archiv extrahiert wurde). Der erzeugte HTML-Bericht wird an demselben Speicherort gespeichert wie das supportconfig-Archiv oder -Verzeichnis.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-a</option> <replaceable>sles_server.company.com</replaceable> 
     </term>
     <listitem>
      <para>
       Stellt eine SSH-Verbindung zu einem externen Server <replaceable>sles_server.company.com</replaceable> her und führt <command>supportconfig</command> auf dem Server aus. Das supportconfig-Archiv wird dann auf den lokalen Rechner zurückkopiert und dort analysiert. Der erzeugte HTML-Bericht wird standardmäßig in das Verzeichnis <filename>/var/log</filename> gespeichert. (Auf dem Server <replaceable>sles_server.company.com</replaceable> wird ausschließlich das supportconfig-Archiv erstellt.)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-c</option>
     </term>
     <listitem>
      <para>
       Startet die interaktive Konsole für <command>scatool</command>. Zum Abrufen der verfügbaren Kommandos drücken Sie zweimal <keycap function="tab"/>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Weitere Optionen und Informationen erhalten Sie mit dem Kommando <command>sudo scatool -h</command> und auf der man-Seite zu <command>scatool</command>.
   </para>
  </sect2>

  <sect2 xml:id="sec.admsupport.sca.appliance">
   <title>SCA-Appliance</title>
   <para>
    Wenn Sie die supportconfig-Archive mit der SCA-Appliance analysieren, müssen Sie einen dedizierten Server (oder einen dedizierten virtuellen Computer) als SCA-Appliance-Server konfigurieren. Auf dem SCA-Appliance-Server können Sie dann supportconfig-Archive von allen Rechnern im Unternehmen analysieren, auf denen SUSE Linux Enterprise Server oder SUSE Linux Enterprise Desktop ausgeführt wird. Zum Analysieren laden Sie die gewünschten supportconfig-Archive einfach auf den Appliance-Server herauf. Ein weiterer Eingriff Ihrerseits ist nicht erforderlich. In einer MariaDB-Datenbank verfolgt die SCA-Appliance alle bereits analysierten supportconfig-Archive. Sie können die SCA-Berichte direkt über die Webschnittstelle der Appliance lesen. Alternativ können Sie in der Appliance angeben, dass der HTML-Bericht per E-Mail an einen verwaltungsbefugten Benutzer gesendet werden soll. Weitere Informationen finden Sie unter <xref linkend="sec.admsupport.sca.appliance.config.mail"/>.
   </para>
   <sect3 xml:id="sec.admsupport.sca.appliance.installquick">
    <title>Schnelleinführung zur Installation</title>
    <para>
     Zum raschen Installieren und Einrichten der SCA-Appliance über die Kommandozeile gehen Sie nach den folgenden Anweisungen vor. Das Verfahren richtet sich an fortgeschrittene Benutzer und umfasst lediglich die reinen Installations- und Einrichtungskommandos. Weitere Informationen finden Sie in der detaillierteren Beschreibung in <xref linkend="sec.admsupport.sca.appliance.pre"/> bis <xref linkend="sec.admsupport.sca.appliance.install"/>.
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <title>Voraussetzungen</title>
     <listitem>
      <para>
       Web- und LAMP-Schema
      </para>
     </listitem>
     <listitem>
      <para>
       Web- und Skripterstellungsmodul (zur Auswahl dieses Moduls muss der Rechner registriert sein).
      </para>
     </listitem>
    </itemizedlist>
    <note>
     <title>Erforderliche <systemitem class="username">root</systemitem>-Berechtigungen</title>
     <para>
      Alle Befehle im folgenden Vorgang müssen als <systemitem class="username">root</systemitem> ausgeführt werden.
     </para>
    </note>
    <procedure>
     <title>Installation mit Heraufladen über anonymen FTP-Zugang</title>
     <para>
      Sobald die Appliance eingerichtet ist und ausgeführt wird, sind keine weiteren manuellen Eingriffe mehr erforderlich. Diese Methode zur Einrichtung der Appliance eignet sich daher ideal für das Erstellen und Heraufladen von supportconfig-Archiven mithilfe von Cron-Aufträgen.
     </para>
     <step>
      <para>
       Melden Sie sich auf dem Rechner, auf dem die Appliance installiert werden soll, bei einer Konsole an, und führen Sie folgende Kommandos aus:
      </para>
<screen>zypper install sca-appliance-* sca-patterns-* vsftpd
systemctl enable apache2
systemctl start apache2
systemctl enable vsftpd
systemctl start vsftpd
yast ftp-server</screen>
     </step>
     <step>
      <para>
       Wählen Sie im YaST-FTP-Server-Modul Folgendes: <menuchoice><guimenu>Authentifizierung</guimenu> <guimenu>Heraufladen aktivieren</guimenu> <guimenu>Anonyme Benutzer dürfen hochladen</guimenu> <guimenu>Beenden</guimenu> <guimenu>Ja</guimenu></menuchoice>. Der Ordner <guimenu>/srv/ftp/upload</guimenu> wird erstellt.
      </para>
     </step>
     <step>
      <para>
       Führen Sie folgende Befehle aus:
      </para>
<screen>systemctl enable mysql
systemctl start mysql
mysql_secure_installation
setup-sca -f</screen>
      <para>
       Bei der sicheren MySQL-Erstellung (mysql_secure_installation) wird ein <systemitem class="username">root</systemitem>-Passwort für MariaDB erstellt.
      </para>
     </step>
    </procedure>
    <procedure>
     <title>Installation mit Heraufladen über SCP/tmp</title>
     <para>
      Bei dieser Methode zum Einrichten der Appliance ist ein manueller Eingriff erforderlich (das SSH-Passwort muss eingegeben werden).
     </para>
     <step>
      <para>
       Melden Sie sich auf dem Rechner, auf dem die Appliance installiert werden soll, bei einer Konsole an:
      </para>
     </step>
     <step>
      <para>
       Führen Sie folgende Befehle aus:
      </para>
<screen>zypper install sca-appliance-* sca-patterns-*
systemctl enable apache2
systemctl start apache2
sudo systemctl enable mysql
systemctl start mysql
mysql_secure_installation
setup-sca</screen>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="sec.admsupport.sca.appliance.pre">
    <title>Voraussetzungen</title>
    <para>
     Zum Ausführen eines Appliance-Servers müssen folgende Voraussetzungen erfüllt sein:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Alle Pakete <systemitem>sca-appliance-*</systemitem>.
      </para>
     </listitem>
     <listitem>
      <para>
       Paket <systemitem class="resource">sca-patterns-base</systemitem>. Zusätzlich alle produktspezifischen Pakete <systemitem class="resource">sca-patterns-*</systemitem> für den Typ der supportconfig-Archive, die mit der Appliance analysiert werden sollen.
      </para>
     </listitem>
     <listitem>
      <para>
       Apache
      </para>
     </listitem>
     <listitem>
      <para>
       PHP
      </para>
     </listitem>
     <listitem>
      <para>
       MariaDB
      </para>
     </listitem>
     <listitem>
      <para>
       Anonymer FTP-Server (optional)
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 xml:id="sec.admsupport.sca.appliance.install">
    <title>Installation und grundlegende Einrichtung</title>
    <para>
     Wie in <xref linkend="sec.admsupport.sca.appliance.pre"/> beschrieben, bestehen mehrere Abhängigkeiten der SCA-Appliance von anderen Paketen. Aus diesem Grund sind einige Vorbereitungsmaßnahmen erforderlich, bevor Sie den SCA-Appliance-Server installieren und einrichten können:
    </para>
    <procedure>
     <step>
      <para>
       Für Apache und MariaDB installieren Sie die Installationsschemata <systemitem>Web</systemitem> und <systemitem>LAMP</systemitem>.
      </para>
     </step>
     <step>
      <para>
       Richten Sie Apache und MariaDB ein (und optional einen anonymen FTP-Server). <phrase os="sles"> Weitere Informationen hierzu finden Sie unter <xref linkend="cha.apache2"/> und <xref linkend="cha.ftp"/>.</phrase>
      </para>
     </step>
     <step>
      <para>
       Konfigurieren Sie Apache und MariaDB für das Starten beim Systemstart:
      </para>
<screen>sudo systemctl enable apache2 mysql</screen>
     </step>
     <step>
      <para>
       Starten Sie beide Services:
      </para>
<screen>sudo systemctl start apache2 mysql</screen>
     </step>
    </procedure>
    <para>
     Sie können nun die SCA-Appliance gemäß den Anweisungen in <xref linkend="pro.sca.appl.install"/> installieren und einrichten.
    </para>
    <procedure xml:id="pro.sca.appl.install">
     <title>Installieren und Konfigurieren der SCA-Appliance</title>
     <para>
      Nach dem Installieren der Pakete nehmen Sie mit dem Skript <command>setup-sca</command> die grundlegende Konfiguration der MariaDB-Administrations-/Berichtdatenbank vor, die von der SCA-Appliance genutzt wird.
     </para>
     <para>
      Hiermit können Sie die folgenden Optionen für das Heraufladen der supportconfig-Archive von den Rechnern in die SCA-Appliance konfigurieren:
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        <command>scp</command>
       </para>
      </listitem>
      <listitem>
       <para>
        Anonymer FTP-Server
       </para>
      </listitem>
     </itemizedlist>
     <step>
      <para>
       Installieren Sie die Appliance und die SCA-Basisschema-Bibliothek:
      </para>
<screen>sudo zypper install sca-appliance-* sca-patterns-base</screen>
     </step>
     <step>
      <para>
       Installieren Sie außerdem die Schemapakete für die zu analysierenden supportconfig-Archive. Wenn sich beispielsweise Server mit SUSE Linux Enterprise Server 11 und SUSE Linux Enterprise 12 in Ihrer Umgebung befinden, installieren Sie sowohl das Paket <systemitem>sca-patterns-sle11</systemitem> als auch das Paket <systemitem>sca-patterns-sle12</systemitem>.
      </para>
      <para>
       So installieren Sie alle verfügbaren Pakete:
      </para>
<screen>zypper install sca-patterns-*</screen>
     </step>
     <step>
      <para>
       Nehmen Sie mit dem Skript <command>setup-sca</command> die grundlegende Einrichtung der SCA-Appliance vor. Der Aufruf dieses Skripts ist abhängig davon, ob die supportconfig-Archive auf den SCA-Appliance-Server heraufgeladen werden sollen:
      </para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         Wenn Sie einen anonymen FTP-Server konfiguriert haben, bei dem das Verzeichnis <filename>/srv/ftp/upload</filename> genutzt wird, führen Sie das Einrichtungsskript mit der Option <option>-f</option> aus, und befolgen Sie die Anweisungen auf dem Bildschirm:
        </para>
<screen>setup-sca -f</screen>
        <note>
         <title>FTP-Server mit anderem Verzeichnis</title>
         <para>
          Wenn der FTP-Server ein anderes Verzeichnis verwendet (also nicht das Verzeichnis <filename>/srv/ftp/upload</filename>), passen Sie zunächst die folgenden Konfigurationsdateien so an, dass sie auf das richtige Verzeichnis verweisen: <filename>/etc/sca/sdagent.conf</filename> und <filename>/etc/sca/sdbroker.conf</filename>. 
         </para>
        </note>
       </listitem>
       <listitem>
        <para>
         Sollen supportconfig-Dateien mit <command>scp</command> in das Verzeichnis <filename>/tmp</filename> des SCA-Appliance-Servers heraufgeladen werden, rufen Sie das Einrichtungsskript ohne Parameter auf, und befolgen Sie die Anweisungen auf dem Bildschirm:
        </para>
<screen>setup-sca</screen>
       </listitem>
      </itemizedlist>
      <para>
       Das Einrichtungsskript überprüft, ob die Voraussetzungen erfüllt sind, und konfiguriert die erforderlichen Komponenten. Sie werden zur Eingabe von zwei Passwörtern aufgefordert: das MySQL-<systemitem class="username">root</systemitem>-Passwort für die eingerichtete MariaDB sowie ein Webbenutzer-Passwort, mit dem Sie sich bei der Webschnittstelle der SCA-Appliance anmelden.
      </para>
     </step>
     <step>
      <para>
       Geben Sie das vorhandene MariaDB-<systemitem class="username">root</systemitem>-Passwort ein. Damit kann die SCA-Appliance eine Verbindung zur MariaDB herstellen.
      </para>
     </step>
     <step>
      <para>
       Definieren Sie ein Passwort für den Webbenutzer. Dieses Passwort wird in die Datei <filename>/srv/www/htdocs/sca/web-config.php</filename> geschrieben und als Passwort für den Benutzer <systemitem class="username">scdiag</systemitem> eingerichtet. Sowohl der Benutzername als auch das Passwort können jederzeit geändert werden (siehe <xref linkend="sec.admsupport.sca.appliance.config.passwd"/>).
      </para>

     </step>
    </procedure>
    <para>
     Nach erfolgter Installation und Einrichtung ist die SCA-Appliance einsatzbereit (siehe <xref linkend="sec.admsupport.sca.appliance.use"/>). Sie sollten jedoch bestimmte Optionen noch bearbeiten, beispielsweise das Passwort für die Webschnittstelle oder die Quelle für die SCA-Schemaaktualisierungen ändern, den Archivierungsmodus aktivieren oder E-Mail-Benachrichtigungen konfigurieren. Weitere Informationen finden Sie in <xref linkend="sec.admsupport.sca.appliance.config"/>.
    </para>
    <warning>
     <title>Datenschutz</title>
     <para>
      Die Berichte auf dem SCA-Appliance-Server enthalten sicherheitsrelevante Daten zu den Rechnern, auf denen die supportconfig-Archive analysiert wurden. Schützen Sie daher die Daten auf dem SCA-Appliance-Server vor unbefugtem Zugriff.
     </para>
    </warning>
   </sect3>
   <sect3 xml:id="sec.admsupport.sca.appliance.use">
    <title>Verwenden der SCA-Appliance</title>
    <para>
     Sie können vorhandene supportconfig-Archive manuell in die SCA-Appliance heraufladen oder neue supportconfig-Archive erstellen und im gleichen Arbeitsgang in die SCA-Appliance heraufladen. Das Heraufladen kann über FTP oder SCP erfolgen. In beiden Fällen benötigen Sie die URL, unter der sich die SCA-Appliance befindet. Zum Heraufladen über FTP muss ein FTP-Server für die SCA-Appliance installiert sein (siehe <xref linkend="pro.sca.appl.install"/>).
    </para>
    <sect4 xml:id="sec.admsupport.sca.appliance.use.upload">
     <title>Heraufladen von supportconfig-Archiven an die SCA-Appliance</title>
     <para/>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        So können Sie ein supportconfig-Archiv erstellen und über einen (anonymen) FTP-Zugang heraufladen:
       </para>
<screen>sudo supportconfig -U “ftp://<replaceable>sca-appliance.company.com</replaceable>/upload”</screen>
      </listitem>
      <listitem>
       <para>
        So können Sie ein supportconfig-Archiv erstellen und über SCP heraufladen:
       </para>
<screen>sudo supportconfig -U “scp://<replaceable>sca-appliance.company.com</replaceable>/tmp”</screen>
       <para>
        Sie werden aufgefordert, das <systemitem class="username">root</systemitem>-Benutzerpasswort für den Server einzugeben, auf dem die SCA-Appliance ausgeführt wird.
       </para>
      </listitem>
      <listitem>
       <para>
        Zum manuellen Heraufladen von einem oder mehreren Archiven kopieren Sie die vorhandenen Archivdateien (in der Regel unter <filename>/var/log/nts_*.tbz</filename>) in die SCA-Appliance. Als Ziel verwenden Sie entweder das Verzeichnis <filename>/tmp</filename> oder das Verzeichnis <filename>/srv/ftp/upload</filename> des Appliance-Servers (wenn FTP für den SCA-Appliance-Server konfiguriert ist).
       </para>
      </listitem>
     </itemizedlist>
    </sect4>
    <sect4 xml:id="sec.admsupport.sca.appliance.use.view">
     <title>Anzeigen von SCA-Berichten</title>
     <para>
      Die SCA-Berichte können auf jedem Rechner angezeigt werden, auf dem ein Browser installiert ist und der auf die Berichtindexseite der SCA-Appliance zugreifen kann.
     </para>
     <procedure>
      <step>
       <para>
        Starten Sie einen Webbrowser, und aktivieren Sie JavaScript und Cookies.
       </para>
      </step>
      <step>
       <para>
        Als URL geben Sie die Berichtindexseite der SCA-Appliance ein.
       </para>
<screen>https://sca-appliance.company.com/sca</screen>
       <para>
        Fragen Sie im Zweifelsfall Ihren Systemadministrator.
       </para>
      </step>
      <step>
       <para>
        Sie werden aufgefordert, einen Benutzernamen und ein Passwort für die Anmeldung einzugeben.
       </para>
       <figure xml:id="fig.sca.appl.html">
        <title>Mit der SCA-Appliance erstellter HTML-Bericht</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="sca_appl_report_html.png" width="100%"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="sca_appl_report_html.png" width="100%"/>
         </imageobject>
        </mediaobject>
       </figure>
      </step>
      <step>
       <para>
        Nach erfolgter Anmeldung klicken Sie auf das Datum des gewünschten Berichts.
       </para>
      </step>
      <step>
       <para>
        Klicken Sie zunächst auf die Kategorie <guimenu>Grundstatus</guimenu>.
       </para>
      </step>
      <step>
       <para>
        Klicken Sie in der Spalte <guimenu>Nachricht</guimenu> auf einen Eintrag. Der entsprechende Artikel in der SUSE Knowledgebase wird geöffnet. Lesen Sie die vorgeschlagene Lösung, und befolgen Sie die Anweisungen.
       </para>
      </step>
      <step>
       <para>
        Wenn die Spalte <guimenu>Lösungen</guimenu> im <guimenu>Supportconfig-Analysebericht</guimenu> weitere Einträge enthält, klicken Sie auf diese Einträge. Lesen Sie die vorgeschlagene Lösung, und befolgen Sie die Anweisungen.
       </para>
      </step>
      <step>
       <para>
        Suchen Sie in der SUSE Knowledgebase (<link xlink:href="http://www.suse.com/support/kb/"/>) nach Ergebnissen, die direkt mit dem für SCA erkannten Problem zusammenhängen. Bearbeiten Sie die Probleme.
       </para>
      </step>
      <step>
       <para>
        Suchen Sie nach Ergebnissen, die proaktiv bearbeitet werden können, damit künftige Probleme vermieden werden.
       </para>
      </step>
     </procedure>
    </sect4>
   </sect3>
   <sect3 xml:id="sec.admsupport.sca.appliance.config">
    <title>Anpassen der SCA-Appliance</title>
    <para>
     In den nachfolgenden Abschnitten erfahren Sie, wie Sie das Passwort für die Webschnittstelle und die Quelle für die SCA-Schemaaktualisierungen ändern, den Archivierungsmodus aktivieren und E-Mail-Benachrichtigungen archivieren.
    </para>
    <sect4 xml:id="sec.admsupport.sca.appliance.config.passwd">
     <title>Passwort für die Webschnittstelle</title>
     <para>
      Zur Anmeldung bei der Webschnittstelle der SCA-Appliance benötigen Sie einen Benutzernamen und ein Passwort. Der Standard-Benutzername lautet <literal>scdiag</literal> und das Standardpasswort ist <literal>linux</literal> (sofern nicht anders festgelegt, siehe <xref linkend="pro.sca.appl.install"/>). Ändern Sie das Standard-Passwort so bald wie möglich in ein sicheres Passwort. Auch den Benutzernamen können Sie bearbeiten.
     </para>
     <procedure xml:id="pro.sca.passwd.change">
      <title>Ändern des Benutzernamens oder des Passworts für die Webschnittstelle</title>
      <step>
       <para>
        Melden Sie sich an der Systemkonsole des SCA-Appliance-Servers als <systemitem class="username">root</systemitem>-Benutzer an.
       </para>
      </step>
      <step>
       <para>
        Öffnen Sie die Datei <filename>/srv/www/htdocs/sca/web-config.php</filename> in einem Editor.
       </para>
      </step>
      <step>
       <para>
        Ändern Sie die Werte für <literal>$username</literal> und <literal>$password</literal>.
       </para>
      </step>
      <step>
       <para>
        Speichern und schließen Sie die Datei.
       </para>
      </step>
     </procedure>
    </sect4>
    <sect4 xml:id="sec.admsupport.sca.appliance.config.upd">
     <title>Aktualisierungen der SCA-Schemata</title>
     <para>
      Standardmäßig werden alle Pakete <systemitem class="resource">sca-patterns-*</systemitem> regelmäßig mit einem <systemitem class="username">root</systemitem>Cron-Auftrag aktualisiert, mit dem jeden Abend das Skript <filename>sdagent-patterns</filename> ausgeführt wird, das wiederum <command>zypper update sca-patterns-*</command> startet. Bei einer normalen Systemaktualisierung werden alle SCA-Appliance- und Schemapakete aktualisiert. So aktualisieren Sie die SCA-Appliance und die Schemata manuell:
     </para>
<screen>sudo zypper update sca-*</screen>
     <para>
      Die Aktualisierungen werden standardmäßig aus dem Aktualisierungs-Respository für SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled;slerte">12 SP2</phrase></phrase> installiert. Bei Bedarf können Sie die Quelle der Aktualisierungen in einen SMT-Server ändern. Beim Ausführen von <command>zypper update sca-patterns-*</command> durch <filename>sdagent-patterns</filename> werden die Aktualisierungen über den derzeit konfigurierten Aktualisierungskanal abgerufen. Wenn sich dieser Kanal auf einem SMT-Server befindet, werden die Pakete von diesem Server abgerufen.
     </para>
     <procedure>
      <title>Deaktivieren der automatischen Aktualisierung der SCA-Schemata</title>
      <step>
       <para>
        Melden Sie sich an der Systemkonsole des SCA-Appliance-Servers als <systemitem class="username">root</systemitem>-Benutzer an.
       </para>
      </step>
      <step>
       <para>

        Öffnen Sie die Datei <filename>/etc/sca/sdagent-patterns.conf</filename> in einem Editor.
       </para>
      </step>
      <step>
       <para>
        Ändern Sie den Eintrag
       </para>
<screen>UPDATE_FROM_PATTERN_REPO=1</screen>
       <para>
        in
       </para>
<screen>UPDATE_FROM_PATTERN_REPO=0</screen>
      </step>
      <step>
       <para>
        Speichern und schließen Sie die Datei. Die Änderung tritt ohne Neustart des Rechners in Kraft.
       </para>
      </step>
     </procedure>
    </sect4>
    <sect4 xml:id="sec.admsupport.sca.appliance.config.archive">
     <title>Archivierungsmodus</title>
     <para>
      Alle supportconfig-Archive werden aus der SCA-Appliance gelöscht, sobald sie analysiert und die zugehörigen Ergebnisse in der MariaDB-Datenbank gespeichert wurden. Wenn Sie Kopien der supportconfig-Archive eines Rechners aufheben, kann dies allerdings ggf. eine spätere Fehlerbehebung erleichtern. Standardmäßig ist der Archivierungsmodus deaktiviert.
     </para>
     <procedure>
      <title>Aktivieren des Archivierungsmodus in der SCA-Appliance</title>
      <step>
       <para>
        Melden Sie sich an der Systemkonsole des SCA-Appliance-Servers als <systemitem class="username">root</systemitem>-Benutzer an.
       </para>
      </step>
      <step>
       <para>
        Öffnen Sie die Datei <filename>/etc/sca/sdagent.conf</filename> in einem Editor.
       </para>
      </step>
      <step>
       <para>
        Ändern Sie den Eintrag
       </para>
<screen>ARCHIVE_MODE=0</screen>
       <para>
        in
       </para>
<screen>ARCHIVE_MODE=1</screen>
      </step>
      <step>
       <para>
        Speichern und schließen Sie die Datei. Die Änderung tritt ohne Neustart des Rechners in Kraft.
       </para>
      </step>
     </procedure>
     <para>
      Sobald der Archivierungsmodus aktiviert ist, werden die supportconfig-Dateien nicht mehr von der SCA-Appliance gelöscht, sondern im Verzeichnis <filename>/var/log/archives/saved</filename> gespeichert.
     </para>
    </sect4>
    <sect4 xml:id="sec.admsupport.sca.appliance.config.mail">
     <title>Senden von SCA-Berichten per E-Mail</title>
     <para>
      Die SCA-Appliance kann für jede analysierte supportconfig-Datei einen HTML-Bericht per Email schicken. Diese Funktion ist standardmäßig deaktiviert. Wenn Sie sie aktivieren, können Sie eine Liste von E-Mail-Adressen definieren, an die die Berichte gesendet werden sollen, sowie die Statusnachrichtenebene festlegen, die das Versenden der Berichte auslöst (<literal>STATUS_NOTIFY_LEVEL</literal>).
     </para>
     <variablelist xml:id="vl.sca.mails.notify.level">
      <title>Mögliche Werte für <literal>STATUS_NOTIFY_LEVEL</literal></title>
      <varlistentry>
       <term>$STATUS_OFF</term>
       <listitem>
        <para>
         Deaktiviert das Senden von HTML-Berichten.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_CRITICAL</term>
       <listitem>
        <para>
         Sendet nur SCA-Berichte, die den Status CRITICAL enthalten.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_WARNING </term>
       <listitem>
        <para>
         Sendet nur SCA-Berichte, die den Status WARNING oder CRITICAL enthalten.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_RECOMMEND</term>
       <listitem>
        <para>
         Sendet nur SCA-Berichte, die den Status RECOMMEND, WARNING oder CRITICAL enthalten.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_SUCCESS</term>
       <listitem>
        <para>
         Sendet SCA-Berichte, die den Status SUCCESS, RECOMMEND, WARNING oder CRITICAL enthalten.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <procedure>
      <title>Konfigurieren von Email-Benachrichtigungen für SCA-Berichte</title>
      <step>
       <para>
        Melden Sie sich an der Systemkonsole des SCA-Appliance-Servers als <systemitem class="username">root</systemitem>-Benutzer an.
       </para>
      </step>
      <step>
       <para>
        Öffnen Sie die Datei <filename>/etc/sca/sdagent.conf</filename> in einem Editor.
       </para>
      </step>
      <step>
       <para>
        Wechseln Sie zum Eintrag <systemitem>STATUS_NOTIFY_LEVEL</systemitem>. Standardmäßig ist hier <literal>$STATUS_OFF</literal> festgelegt (Email-Benachrichtigungen sind deaktiviert).
       </para>
      </step>
      <step>
       <para>
        Zum Aktivieren der Email-Benachrichtigungen ändern Sie <literal>$STATUS_OFF</literal> in die Statusebene, ab der die Email-Berichte gesendet werden sollen, beispielsweise:
       </para>
<screen>STATUS_NOTIFY_LEVEL=$STATUS_SUCCESS</screen>
       <para>
        Weitere Informationen finden Sie unter <xref linkend="vl.sca.mails.notify.level"/>.
       </para>
      </step>
      <step>
       <para>
        So definieren Sie die Liste der Empfänger, an die die Berichte gesendet werden sollen:
       </para>
       <substeps performance="required">
        <step>
         <para>
          Wechseln Sie zum Eintrag <literal>EMAIL_REPORT='root'</literal>.
         </para>
        </step>
        <step>
         <para>
          Ersetzen Sie <literal>root</literal> durch eine Liste der E-Mail-Adressen, an die die SCA-Berichte gesendet werden sollen. Die E-Mail-Adressen müssen jeweils durch ein Komma getrennt werden. Beispiel:
         </para>
<screen>EMAIL_REPORT='tux@my.company.com wilber@your.company.com'</screen>
        </step>
       </substeps>
      </step>
      <step>
       <para>
        Speichern und schließen Sie die Datei. Die Änderungen treten ohne Neustart des Rechners in Kraft. Alle künftigen SCA-Berichte werden an die angegebenen Adressen gesendet.
       </para>
      </step>
     </procedure>
    </sect4>
   </sect3>
   <sect3 xml:id="sec.admsupport.sca.appliance.backup">
    <title>Sichern und Wiederherstellen der Datenbank</title>
    <para>
     Mit dem Kommando <command>scadb</command> können Sie die MariaDB-Datenbank, in der die SCA-Berichte gespeichert werden, sichern und wiederherstellen.
    </para>
    <procedure>
     <title>Sichern der Datenbank</title>
     <step>
      <para>
       Melden Sie sich an der Systemkonsole des Servers, auf dem die SCA-Appliance ausgeführt wird, als <systemitem class="username">root</systemitem>-Benutzer an.
      </para>
     </step>
     <step>
      <para>
       Versetzen Sie die Appliance mit dem folgenden Kommando in den Wartungsmodus:
      </para>
<screen>scadb maint</screen>
     </step>
     <step>
      <para>
       Starten Sie die Sicherung mit:
      </para>
<screen>scadb backup</screen>
      <para>
       Die Daten werden in einem TAR-Archiv gespeichert: <filename>sca-backup-*sql.gz</filename>.
      </para>
     </step>
     <step>
      <para>
       Wenn Sie mit der Schemaerstellungsdatenbank eigene Schemata entwickelt haben (siehe <xref linkend="sec.admsupport.sca.patterns"/>), sichern Sie diese Daten ebenfalls:
      </para>
<screen>sdpdb backup</screen>
      <para>
       Die Daten werden in einem TAR-Archiv gespeichert: <filename>sdp-backup-*sql.gz</filename>.
      </para>
     </step>
     <step>
      <para>
       Kopieren Sie die folgenden Daten auf einen anderen Rechner oder auf ein externes Speichermedium:
      </para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         <filename>sca-backup-*sql.gz</filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>sdp-backup-*sql.gz</filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>/usr/lib/sca/patterns/local</filename> (nur wenn Sie benutzerdefinierte Schemata erstellt haben)
        </para>
       </listitem>
      </itemizedlist>
     </step>
     <step>
      <para>
       Reaktivieren Sie die SCA-Appliance mit:
      </para>
<screen>scadb reset agents</screen>
     </step>
    </procedure>
    <procedure>
     <title>Wiederherstellen der Datenbank</title>
     <para>
      Zum Wiederherstellen der Datenbank aus der Sicherung gehen Sie wie folgt vor:
     </para>
     <step>
      <para>
       Melden Sie sich an der Systemkonsole des Servers, auf dem die SCA-Appliance ausgeführt wird, als <systemitem class="username">root</systemitem>-Benutzer an.
      </para>
     </step>
     <step>
      <para>
       Kopieren Sie die jüngsten TAR-Archive mit der Bezeichnung <filename>sca-backup-*sql.gz</filename> und <filename>sdp-backup-*sql.gz</filename> auf den SCA-Appliance-Server.
      </para>
     </step>
     <step>
      <para>
       Dekomprimieren Sie die Dateien mit:
      </para>
<screen>gzip -d *-backup-*sql.gz</screen>
     </step>
     <step>
      <para>
       Importieren Sie die Daten mit dem folgenden Kommando in die Datenbank:
      </para>
<screen>scadb import sca-backup-*sql</screen>
     </step>
     <step>
      <para>
       Wenn Sie mit der Schemaerstellungsdatenbank eigene Schemata entwickelt haben, importieren Sie außerdem die nachfolgenden Daten mit:
      </para>
<screen>sdpdb import sdp-backup-*sql</screen>
     </step>
     <step>
      <para>
       Wenn Sie benutzerdefinierte Schemata verwenden, stellen Sie außerdem die Datei <filename>/usr/lib/sca/patterns/local</filename> aus den Sicherungsdaten wieder her.
      </para>
     </step>
     <step>
      <para>
       Reaktivieren Sie die SCA-Appliance mit:
      </para>
<screen>scadb reset agents</screen>
     </step>
     <step>
      <para>
       Aktualisieren Sie die Schemamodule in der Datenbank mit:
      </para>
<screen>sdagent-patterns -u</screen>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 xml:id="sec.admsupport.sca.patterns">
   <title>Entwickeln von benutzerdefinierten Analyseschemata</title>
   <para>
    Die SCA-Appliance bietet eine umfangreiche Schemaentwicklungsumgebung (die SCA-Schemadatenbank), mit der Sie eigene, benutzerdefinierte Schemata erstellen können. Schemata können in jeder beliebigen Programmiersprache geschrieben sein. Damit sie für das supportconfig-Analyseverfahren zur Verfügung stehen, müssen sie im Verzeichnis <filename>/usr/lib/sca/patterns/local</filename> gespeichert und ausführbar gemacht werden. Die benutzerdefinierten Schemata werden dann im Rahmen des Analyseberichts sowohl von der SCA-Appliance als auch vom SCA-Werkzeug für neue supportconfig-Archive ausgeführt. Weitere Anweisungen zum Erstellen (und Testen) der benutzerdefinierten Schemata finden Sie unter <link xlink:href="http://www.suse.com/communities/conversations/sca-pattern-development/"/>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec.admsupport.install">
  <title>Sammeln von Informationen bei der Installation</title>
  <para>
   Während der Installation ist <command>supportconfig</command> nicht verfügbar. Sie können Protokolldateien von YaST jedoch mithilfe von <command>save_y2logs</command> sammeln. Dieses Kommando erstellt ein <filename>.tar.xz</filename>-Archiv im Verzeichnis <filename>/tmp</filename>.
  </para>
  
  <para>
   Wenn bereits früh Probleme bei der Installation auftreten, können Sie möglicherweise Informationen aus der durch <command>linuxrc</command> erstellten Protokolldatei sammeln. <command>linuxrc</command> ist ein kleines Kommando, das vor dem Start von YaST ausgeführt wird. Diese Protokolldatei finden Sie unter <filename>/var/log/linuxrc.log</filename>.
  </para>
  <important>
   <title>Installationsprotokolldateien sind im installierten System nicht verfügbar</title>
   <para>
    Die während der Installation verfügbaren Protokolldateien sind im installierten System nicht mehr verfügbar. Speichern Sie die Installationsprotokolldateien ordnungsgemäß, während das Installationsprogramm noch ausgeführt wird.
   </para>
  </important>
 </sect1>

 <sect1 xml:id="sec.admsupport.kernel">
  <title>Unterstützung für Kernelmodule</title>

  <para>
   Eine wichtige Anforderung für jedes Enterprise-Betriebssystem ist der Grad der Unterstützung für die jeweilige Umgebung. Kernelmodule sind die wichtigsten Bindeglieder zwischen der Hardware (<quote>Controller</quote>) und dem Betriebssystem. Die Kernelmodule in SUSE Linux Enterprise umfassen jeweils das Flag <literal>supported</literal>, das drei mögliche Werte annehmen kann:
  </para>

  <itemizedlist mark="bullet" spacing="normal">

   <listitem>
    <para>
     <quote>Ja</quote>, daher <literal>supported</literal>
    </para>
   </listitem>
   <listitem>
    <para>
     <quote>Extern</quote>, daher <literal>supported</literal>
    </para>
   </listitem>
   <listitem>
    <para>
     <quote/> (leer, nicht festgelegt), daher <literal>unsupported</literal>
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Es gelten die folgenden Regeln:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Alle Module eines selbst rückkompilierten Kernels sind standardmäßig als nicht unterstützt gekennzeichnet.
    </para>
   </listitem>
   <listitem>
    <para>
     Kernelmodule, die von den SUSE-Partnern unterstützt und über das <literal>SUSE SolidDriver-Programm</literal> bereitgestellt, sind als <quote>extern</quote> gekennzeichnet.
    </para>
   </listitem>
   <listitem>
    <para>
     Wenn das Flag <literal>supported</literal> nicht gesetzt ist, wird der Kernel beim Laden dieses Moduls unbrauchbar. Unbrauchbare Kernel werden nicht unterstützt. Nicht unterstützte Kernel-Module befinden sich in einem separaten RPM-Paket (<systemitem>kernel-<replaceable>FLAVOR</replaceable>-extra</systemitem>), das lediglich für SUSE Linux Enterprise Desktop und für die Arbeitsplatzrechnererweiterung für SUSE Linux Enterprise zur Verfügung steht. Diese Kernel werden standardmäßig nicht geladen (<replaceable>FLAVOR</replaceable>=<literal>default</literal>|<literal>xen</literal>|...). Darüber hinaus sind diese nicht unterstützten Module im Installationsprogramm nicht verfügbar, und das Kernelpaket <systemitem class="resource">kernel-<replaceable>FLAVOR</replaceable>-extra</systemitem>ist kein Bestandteil der SUSE Linux Enterprise-Medien.
    </para>
   </listitem>
   <listitem>
    <para>
     Kernelmodule, die nicht unter einer zur Lizenz des Linux-Kernels kompatiblen Lizenz bereitgestellt werden, machen den Kernel ebenfalls unbrauchbar. Weitere Informationen finden Sie unter <filename>/usr/src/linux/Documentation/sysctl/kernel.txt</filename> und dem Status <filename>/proc/sys/kernel/tainted</filename>.
    </para>
   </listitem>
  </itemizedlist>

  <sect2 xml:id="sec.admsupport.kernel.background">
   <title>Technischer Hintergrund</title>
   <para/>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Linux-Kernel: Der Standardwert für <filename>/proc/sys/kernel/unsupported</filename> bei SUSE Linux Enterprise <literal/>12 SP2<phrase role="productnumber"><phrase os="sles;sled;slerte"> lautet </phrase>2</phrase> (<literal>do not warn in syslog when loading unsupported modules</literal>; keine Warnung im Syslog, wenn nicht unterstützte Module geladen werden). Dieser Standardwert wird im Installationsprogramm und im installierten System verwendet. Weitere Informationen finden Sie unter <filename>/usr/src/linux/Documentation/sysctl/kernel.txt</filename>.
     </para>
    </listitem>
    <listitem>
     <para>
      <command>modprobe</command>: Das Dienstprogramm <command>modprobe</command> zum Prüfen der Modulabhängigkeiten und zum Laden der Module prüft den Wert des Flags <literal>supported</literal>. Beim Wert <quote>Ja</quote> oder <quote>Extern</quote> wird das Modul geladen, ansonsten nicht. Weitere Informationen, wie Sie dieses Verhalten außer Kraft setzen, finden Sie in <xref linkend="sec.admsupport.kernel.unsupported"/>.
     </para>
     <note>
      <title>Support</title>
      <para>
       SUSE bietet im Allgemeinen keine Unterstützung für das Entfernen von Speichermodulen mit <command>modprobe -r</command>.
      </para>
     </note>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec.admsupport.kernel.unsupported">
   <title>Arbeiten mit nicht unterstützten Modulen</title>
   <para>
    Die allgemeine Unterstützung ist wichtig. Dennoch können Situationen eintreten, in denen ein nicht unterstütztes Modul erforderlich ist (beispielsweise zu Testzwecken, für die Fehlersuche oder wenn der Hardware-Hersteller ein HotFix bereitstellt).
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Zum Überschreiben des Standardwerts bearbeiten Sie die Datei <filename>/etc/modprobe.d/10-unsupported-modules.conf</filename>, und ändern Sie den Wert der Variablen
      <varname>allow_unsupported_modules</varname> in <literal>1</literal>. Falls in der initrd ein nicht unterstütztes Modul erforderlich ist, müssen Sie zur Aktualisierung der initrd auch <command>dracut </command><option>-f</option> ausführen.
     </para>
     <para>
      Falls Sie nur einmalig versuchen möchten, ein Modul zu laden, verwenden Sie die Option <option>--allow-unsupported-modules</option> für <command>modprobe</command>. Weitere Informationen finden Sie auf der man-Seite zu <command>modprobe</command>.
     </para>
    </listitem>
    <listitem>
     <para>
      Während der Installation werden nicht unterstützte Module u. U. über Treiberaktualisierungs-Datenträger hinzugefügt und entsprechend geladen. Soll das Laden von nicht unterstützten Modulen beim Booten und zu späteren Zeitpunkten erzwungen werden, verwenden Sie die Kernel-Kommandozeile <option>oem-modules</option>. Beim Installieren und Initialisieren des Pakets <systemitem class="resource">suse-module-tools</systemitem> wird das Kernel-Flag <literal>TAINT_NO_SUPPORT</literal> (<filename>/proc/sys/kernel/tainted</filename>) ausgewertet. Ist das Kernel bereits unbrauchbar, wird <literal>allow_unsupported_modules</literal> aktiviert. Damit wird verhindert, dass nicht unterstützte Module im zu installierenden System zu Fehlern führen. Wenn während der Installation keine nicht unterstützten Module vorhanden sind und die andere spezielle Kernel-Kommandozeilenoption (<option>oem-modules=1</option>) nicht verwendet wird, so werden die nicht unterstützten Module dennoch standardmäßig nicht zugelassen.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Beachten Sie, dass der Kernel und das gesamte System nicht mehr durch SUSE unterstützt werden, sobald nicht unterstützte Module geladen und ausgeführt werden.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.admsupport.moreinfo">
  <title>Weiterführende Informationen</title>

  <para/>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <command>man supportconfig</command> – man-Seite zu <command>supportconfig</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man supportconfig.conf</command> – man-Seite zur supportconfig-Konfigurationsdatei.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man scatool</command> – man-Seite zu <command>scatool</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man scadb</command> – man-Seite zu <command>scadb</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man setup-sca</command> – man-Seite zu <command>setup-sca</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://mariadb.com/kb/en/"/> – Dokumentation zur MariaDB.
    </para>
   </listitem>
   <listitem os="sles">
    <para>
     <link xlink:href="http://httpd.apache.org/docs/"/> und <xref linkend="cha.apache2"/> – Dokumentation zum Apache-Webserver.
    </para>
   </listitem>
   <listitem os="sles">
    <para>
     <xref linkend="cha.ftp"/> – Dokumentation zum Einrichten eines FTP-Servers.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="http://www.suse.com/communities/conversations/sca-pattern-development/"/> – Anweisungen zum Erstellen (und Testen) benutzerdefinierter SCA-Schemata.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="http://www.suse.com/communities/conversations/basic-server-health-check-supportconfig/"/> – Grundlegende Server-Integritätsprüfung mit supportconfig.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://www.novell.com/communities/coolsolutions/cool_tools/create-your-own-supportconfig-plugin/"/> – Erstellen eines eigenen supportconfig-Plug-ins.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="http://www.suse.com/communities/conversations/creating-a-central-supportconfig-repository/"/> – Erstellen eines zentralen supportconfig-Repositorys.
    </para>
    <para>
     <remark>taroth 2014-04-25: jrecord, should we still refer to the three articles above? </remark>
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
</chapter>
