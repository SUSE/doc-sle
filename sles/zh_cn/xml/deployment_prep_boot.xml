<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_prep_boot.xml" version="5.0" role="General" xml:id="cha.deployment.prep_boot">
 <title>准备目标系统的引导</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  可以用多种不同的方法安装 <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>。除了<xref linkend="cha.inst"/>中介绍的常用媒体安装方式之外，还可以选择多种基于网络的方式，甚至可以用完全无人值守的方式来安装 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。
 </para>
 <para>
  两种方法各通过两个简短的核对清单进行介绍：一个列出此方法的先决条件，另一个则说明基本过程。随后，将会就这些安装方案用到的所有技术提供更详细的信息。
 </para>
 <note>
  <title>术语</title>
  <para>
   以下几节中将要存放新安装的 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 的系统称为<emphasis>目标系统</emphasis>或<emphasis>安装目标</emphasis>。术语<emphasis>安装源</emphasis>（repository，以前称为 <quote>installation source</quote>）用于所有的安装数据源。这包括物理媒体（如 CD 和 DVD）以及在网络中分发安装数据的网络服务器。
  </para>
 </note>
 <para>
  此部分讨论复杂引导场景中需要的配置任务。其中包含了 DHCP、PXE 引导、TFTP 和网络唤醒的“准备应用”配置示例。
 </para>
 <sect1 xml:id="sec.deployment.prep_boot.dhcp">
  <title>设置 DHCP 服务</title>

  <para>
   有两种方法设置 DHCP 服务器。YaST 为 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 提供了图形界面用于完成该过程。用户也可以手动编辑配置文件。<phrase os="sles">关于 DHCP 服务器的更多信息，另请参见<xref linkend="cha.dhcp"/>。</phrase>
  </para>

  <sect2 xml:id="sec.deployment.prep_boot.dhcp.yast">
   <title>用 YaST 设置 DHCP 服务器</title>
   <para>
    要宣布到网络用户机的 TFTP 服务器位置并指定安装目标应该使用的引导映像文件，请向 DHCP 服务器配置添加两个声明。
   </para>
   <procedure xml:id="proc.deployment.prep_boot.dhcp.yast">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 登录到主管 DHCP 服务器的计算机。
     </para>
    </step>
    <step>
     <para>
      启动 <menuchoice><guimenu>YaST</guimenu> <guimenu>网络服务</guimenu> <guimenu>DHCP 服务器</guimenu></menuchoice>。
     </para>
    </step>
    <step>
     <para>
      完成基本 DHCP 服务器安装的安装向导。
     </para>
    </step>
    <step xml:id="st.deployment.prep_boot.dhcp.yast.expert">
     <para>
      当遇到退出启动对话框的警告时，选择<guimenu>专家设置</guimenu>并选择<guimenu>是</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>配置声明</guimenu>对话框中，选择新系统所在的子网并单击<guimenu>编辑</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>子网配置</guimenu>对话框中，选择<guimenu>添加</guimenu>来向子网配置添加新选项。
     </para>
    </step>
    <step>
     <para>
      选择 <option>filename</option> 并输入 <literal>pxelinux.0</literal> 作为值。
     </para>
    </step>
    <step>
     <para>
      添加另一选项 (<option>next-server</option>) 并设置 TFTP 服务器地址的值。
     </para>
    </step>
    <step>
     <para>
      选择<guimenu>确定</guimenu>和<guimenu>完成</guimenu>以完成 DHCP 服务器配置。
     </para>
    </step>
   </procedure>
   <para>
    要配置 DHCP 以向特定主机提供静态 IP 地址，请输入 DHCP 服务器配置模块（<guimenu>）的</guimenu>专家设置<xref linkend="st.deployment.prep_boot.dhcp.yast.expert" xrefstyle="StepOnPage"/>并添加主机类型的新声明。将选项 <option>hardware</option> 和 <option>fixed-address</option> 添加到此主机声明并提供适当的值。
   </para>
  </sect2>

  <sect2 xml:id="sec.deployment.prep_boot.dhcp.man">
   <title>手动设置 DHCP 服务器</title>
   <para>
    除了向网络客户端提供自动地址分配外，所有 DHCP 服务器还需要就 TFTP 服务器 IP 地址和需要由目标计算机上的安装例程导入的文件发布通告。
   </para>
   <procedure xml:id="proc.deployment.prep_boot.dhcp.man">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 登录到主管 DHCP 服务器的计算机。
     </para>
    </step>
    <step>
     <para>
      向位于 <filename>/etc/dhcpd.conf</filename> 的 DHCP 服务器配置文件中的子网配置追加以下几行：
     </para>
<screen>subnet 192.168.1.0 netmask 255.255.255.0 {
  range dynamic-bootp 192.168.1.200 192.168.1.228;
  # PXE related settings
  #
  # "next-server" defines the TFTP server that will be used
  next-server <replaceable>ip_tftp_server</replaceable>;
  #
  # "filename" specifies the pxelinux image on the TFTP server
  # the server runs in chroot under /srv/tftpboot
  filename  "pxelinux.0";
}</screen>
     <para>
      将 <replaceable>ip_of_the_tftp_server</replaceable> 替换为 TFTP 服务器的实际 IP 地址。关于 <filename>dhcpd.conf</filename> 中可用选项的更多信息，请参见 <systemitem>dhcpd.conf</systemitem> 手册页。
     </para>
    </step>
    <step>
     <para>
      执行 <command>systemctl restart dhcpd</command> 重启动 DHCP 服务器。
     </para>
    </step>
   </procedure>
   <para>
    如果打算或正在将 SSH 用于 PXE 和网络唤醒安装的远程控制，请专门指定 DHCP 应提供给安装目标的 IP 地址。要实现此设置，请根据以下示例修改上述的 DHCP 配置：
   </para>
<screen>group {
  # PXE related settings
  #
  # "next-server" defines the TFTP server that will be used
  next-server <replaceable>ip_tftp_server</replaceable>:
  #
  # "filename" specifies the pxelinux image on the TFTP server
  # the server runs in chroot under /srv/tftpboot
  filename "pxelinux.0";
  host test {
    hardware ethernet <replaceable>mac_address</replaceable>;
    fixed-address <replaceable>some_ip_address</replaceable>;
    }
}
</screen>
   <para>
    host 语句引入了安装目标的主机名。要将主机名和 IP 地址与特定主机绑定，则必须了解系统的硬件 (NAC) 地址并指定它。请将本例中使用的所有变量替换为符合您环境的实际值。
   </para>
   <para>
    在重启动 DHCP 服务器之后，它将向所指定的主机提供一个静态 IP，从而使您能够通过 SSH 连接到该系统。
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.deployment.prep_boot.tftp">
  <title>设置 TFTP 服务器</title>

  <para>
   如果使用基于 SUSE 的安装，您可以使用 YaST 来设置 TFTP 服务器。另外，还可以手动设置。目标系统成功引导并发出请求后，FTP 服务器就会将引导映像发送到该目标系统。
  </para>

  <sect2 xml:id="sec.deployment.prep_boot.tftp.yast">
   <title>使用 YaST 设置 TFTP 服务器</title>
   <procedure xml:id="proc.deployment.prep_boot.tftp.yast">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身份登录。
     </para>
    </step>
    <step>
     <para>
      启动 <menuchoice><guimenu>YaST</guimenu><guimenu>网络服务</guimenu><guimenu>TFTP 服务器</guimenu></menuchoice>，并安装请求的包。
     </para>
    </step>
    <step>
     <para>
      单击<guimenu>启用</guimenu>以确保服务器启动并包含在引导例程中。之后您就无需为此再进行任何操作。xinetd 将在引导时启动。
     </para>
    </step>
    <step>
     <para>
      单击<guimenu>打开防火墙中的端口</guimenu>以在您计算机上运行的防火墙中打开相应的端口。如果您的服务器上未运行任何防火墙，则该选项不可用。
     </para>
    </step>
    <step>
     <para>
      单击<guimenu>浏览</guimenu>以查找引导映像目录。默认目录 <filename>/tftpboot</filename> 是自动创建并选定的。
     </para>
    </step>
    <step>
     <para>
      单击<guimenu>完成</guimenu>以应用设置并启动服务器。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.deployment.prep_boot.tftp.man">
   <title>手动设置 TFTP 服务器</title>
   <procedure xml:id="proc.deployment.prep_boot.tftp.man">
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 登录，然后安装 <systemitem>tftp</systemitem> 包和 <systemitem>xinetd</systemitem> 包。
     </para>
    </step>
    <step>
     <para>
      如果这两个包不可用，请创建 <filename>/srv/tftpboot</filename> 目录和 <filename>/srv/tftpboot/pxelinux.cfg</filename> 目录。
     </para>
    </step>
    <step>
     <para>
      按<xref linkend="sec.deployment.prep_boot.pxe"/>中所述添加引导映像所需的相应文件。
     </para>
    </step>
    <step>
     <para>
      修改位于 <filename>/etc/xinetd.d</filename> 下的 xinetd 的配置，以确保 TFTP 服务器在引导时启动：
     </para>
     <substeps performance="required">
      <step>
       <para>
        如果该配置文件不存在，请使用 <filename>touch tftp</filename> 命令在该目录下创建一个名为 <command>tftp</command> 的文件。然后运行 <command>chmod 755 tftp</command>。
       </para>
      </step>
      <step>
       <para>
        打开文件 <filename>tftp</filename>，添加以下几行：
       </para>
<screen>service tftp
{
        socket_type            = dgram
        protocol               = udp
        wait                   = yes
        user                   = root
        server                 = /usr/sbin/in.tftpd
        server_args            = -s /srv/tftpboot
        disable                = no
}
</screen>
      </step>
      <step>
       <para>
        保存该文件，然后使用 <command>systemctl restart xinetd</command> 命令重启动 xinetd。
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.deployment.prep_boot.pxe">
  <title>使用 PXE 引导</title>

  <para>
   预引导执行环境 (PXE) 规范 (<link xlink:href="http://www.pix.net/software/pxeboot/archive/pxespec.pdf"/>) 中提供了一些技术背景信息以及 PXE 的完整规范。
  </para>

  <procedure xml:id="proc.deployment.prep_boot.pxe">
   <step>
    <para>
     切换到储存库所在目录 <filename>boot/&lt;architecture&gt;/loader</filename>，然后输入以下命令将 <filename>linux</filename>、<filename>initrd</filename>、<filename>message</filename>、<filename>biostest</filename> 和 <filename>memtest</filename> 文件复制到 <filename>/srv/tftpboot</filename> 目录：
    </para>
<screen>cp -a linux initrd message biostest memtest /srv/tftpboot</screen>
   </step>
   <step>
    <para>
     通过 YaST 直接从安装 DVD 安装 <systemitem>syslinux</systemitem> 包。
    </para>
   </step>
   <step>
    <para>
     输入以下命令来将 <filename>/usr/share/syslinux/pxelinux.0</filename> 文件复制到 <filename>/srv/tftpboot</filename> 目录中：
    </para>
<screen>cp -a /usr/share/syslinux/pxelinux.0 /srv/tftpboot
     </screen>
   </step>
   <step>
    <para>
     切换到储存库所在目录，然后输入以下命令，将 <filename>isolinux.cfg</filename> 文件复制到 <filename>/srv/tftpboot/pxelinux.cfg/default</filename>：
    </para>
<screen>cp -a boot/&lt;architecture&gt;/loader/isolinux.cfg /srv/tftpboot/pxelinux.cfg/default
     </screen>
   </step>
   <step>
    <para>
     编辑 <filename>/srv/tftpboot/pxelinux.cfg/default</filename> 文件，并删除以 <literal>readinfo</literal> 和 <literal>framebuffer</literal> 开头的行。
    </para>
   </step>
   <step>
    <para>

     在默认的 <option>failsafe</option> 和 <option>apic</option> 标签的追加行中插入以下条目：
    </para>
    <variablelist>
     <varlistentry>
      <term><option>insmod=<replaceable>kernel module</replaceable></option>
      </term>
      <listitem>
       <para>
        通过此命令项，输入所需的网络内核模块以支持 PXE 客户端上的网络安装。用您的网络设备的适当模块名替代 <replaceable>kernel module</replaceable>。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><option>netdevice=<replaceable>interface</replaceable></option>
      </term>
      <listitem>
       <para>
        此条目定义了必须用于网络安装的客户端网络接口。它只在客户端配备了多块网卡的情况下才需要，且必须根据具体情况采用相应的值。如果客户端安装了一块网卡，则该条目可以省略。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
<option>install=nfs://<replaceable>ip_instserver</replaceable>/<replaceable>path_to_repository</replaceable>/DVD1</option>
      </term>
      <listitem>
       <para>
        该条目定义了用于客户端安装的 NFS 服务器和储存库。将 <replaceable>ip_instserver</replaceable> 替换为安装服务器的实际 IP 地址。<replaceable>path_to_repository</replaceable> 应替换为储存库的实际路径。对于 HTTP、FTP 或 SMB 储存库，除了应将协议前缀分别替换为 <literal>http</literal>、<literal>ftp</literal> 或 <literal>smb</literal>，其他操作都是相似的。
       </para>
       <important>
        <title>添加引导选项</title>
        <para>
         如果需要向安装例程指定其他引导选项，如 SSH 或 VNC 引导参数，请将它们追加到 <option>install</option> 条目中。在 <xref linkend="sec.deployment.remoteinst.bootinst"/> 提供了参数的概述和一些例子。
        </para>
       </important>
      </listitem>
     </varlistentry>
    </variablelist>
    <tip>
     <title>更改内核和 initrd 文件名</title>
     <para>
      可以对内核和 initrd 映像使用不同文件名。如果要从同一引导服务器提供不同操作系统，则此功能非常有用。但是，应注意 TFTP 提供的用于 PXE 引导的文件名中仅允许使用一个点。
     </para>
    </tip>
    <para>
     以下是一个 <option>/srv/tftpboot/pxelinux.cfg/default</option> 文件示例。请根据自己的网络设置调整储存库的协议前缀，并通过在 <literal>install</literal> 条目中添加 <literal>vnc</literal> 和 <literal>VNCPassword</literal> 选项，或者添加 <literal>ssh</literal> 和 <literal>ssh.password</literal> 选项来指定要用于连接到安装程序的首选方法。由 <literal>\</literal> 分隔的多个行必须分别作为一个连续的行输入，其中不能有换行符，也不能有 <literal>\</literal>。
    </para>
<screen>default harddisk

# default
label linux
  kernel linux
  append initrd=initrd ramdisk_size=65536 \
     install=nfs://<replaceable>ip_instserver</replaceable>/<replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable>/DVD1

# repair
label repair
  kernel linux
  append initrd=initrd splash=silent repair=1 showopts

# rescue
label rescue
  kernel linux
  append initrd=initrd ramdisk_size=65536 rescue=1

# bios test
label firmware
  kernel linux
  append initrd=biostest,initrd splash=silent install=exec:/bin/run_biostest showopts

#  memory test
label memtest
  kernel memtest

#  hard disk
label harddisk
  localboot 0

implicit     0
display      message
prompt       1
timeout      100</screen>
   </step>
   <step>
    <para>
     将 <replaceable>ip_instserver</replaceable> 和 <replaceable>path_to_repository</replaceable> 替换为您安装中使用的值。
    </para>
    <para>
     以下一节简要介绍了在此设置中使用的 PXELINUX 选项。关于可用选项的更多信息，在位于 <filename>/usr/share/doc/packages/syslinux/</filename> 下的 <systemitem>syslinux</systemitem> 包中。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.deployment.prep_boot.pxeopts">
  <title>PXELINUX 配置选项</title>

  <para>
   此处列出的选项是 PXELINUX 配置文件中所有可用选项中的一部分。
  </para>

  <variablelist>
   <varlistentry>
    <term><option>APPEND <replaceable>options... </replaceable></option>
    </term>
    <listitem>
     <para>
      用于向内核命令行添加一个或多个选项。添加的这些选项对自动引导和手动引导都适用。这些选项添加在内核命令行的最前面，通常允许用显式输入的内核选项覆盖它们。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>APPEND -</option>
    </term>
    <listitem>
     <para>
      表示不追加任何内容。在 <option>LABEL</option> 段中用一个连字符作为参数的 <option>APPEND</option> 可用于覆盖全局 <option>APPEND</option>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>DEFAULT <replaceable>kernel options</replaceable>...</option>
    </term>
    <listitem>
     <para>
      用于设置默认内核命令行。如果 PXELINUX 自动引导，则该选项的作用相当于已在引导提示符处输入了在 DEFAULT 后输入的所有内容（表示自动引导的 auto 选项除外，它是自动添加的）。
     </para>
     <para>
      如果配置文件不存在或其中未定义 DEFAULT 项，则默认使用内核名称<quote>linux</quote>且不带任何选项。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term><option>IFAPPEND <replaceable>标志</replaceable></option>
    </term>
    <listitem>
     <para>
      根据<replaceable>标志</replaceable>值将特定项添加到内核命令行。只有 PXELINUX 提供 <option>IFAPPEND</option> 项。<replaceable>标志</replaceable>需赋一个值，具体如<xref linkend="tab.deployment.boot.pxeopts.ifappend"/>所述：
     </para>
     <table xml:id="tab.deployment.boot.pxeopts.ifappend">
      <title>从 <option>IFAPPEND</option> 中生成并添加内核命令行选项。</title>
      <tgroup cols="2">
       <colspec colwidth="1*"/>
       <colspec colwidth="4*"/>
       <thead>
        <row>
         <entry valign="middle">
          <para>
           自变量
          </para>
         </entry>
         <entry>
          <para>
           生成内核命令行/说明
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <option>1</option>
          </para>
         </entry>
         <entry>
<screen>ip=<replaceable>CLIENT_IP</replaceable>:<replaceable>BOOT_SERVER_IP</replaceable>:<replaceable>GW_IP</replaceable>:<replaceable>NETMASK</replaceable></screen>
          <para>
           根据从 DHCP//BOOTP 或 PXE 引导服务器输入的内容替换占位符。
          </para>
          <para>
           注，此选项不可替换为在引导系统中运行 DHCP 客户端。若不定期更新，PXE BIOS 所获得的租用将失效，致使 DHCP 服务器可重新使用该 IP 地址。
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <option>2</option>
          </para>
         </entry>
         <entry>
<screen>BOOTIF=<replaceable>MAC_ADDRESS_OF_BOOT_INTERFACE</replaceable></screen>
          <para>
           当安装服务器在探测一个又一个的 LAN 接口直至收到 DHCP 服务器答复时，在这段期间若要有效避免超时现象，可使用该选项。使用此选项可允许 initrd 程序确定从哪个接口引导系统。linuxrc 会读取此选项并使用该网络接口。
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <option>4</option>
          </para>
         </entry>
         <entry>
<screen>SYSUUID=<replaceable>SYSTEM_UUID</replaceable></screen>
          <para>
           以小写十六进制添加 UUIDs，具体请参见 <filename>/usr/share/doc/packages/syslinux/pxelinux.txt</filename>
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>LABEL <replaceable>label</replaceable> KERNEL <replaceable>image</replaceable> APPEND <replaceable>options</replaceable>...</option>
    </term>
    <listitem>
     <para>
      表示如果将<replaceable>标签</replaceable>输入为要引导的内核，则 PXELINUX 将取代引导<replaceable>映像</replaceable>，并且将使用指定的 <option>APPEND</option> 选项代替文件的全局部分中指定的选项（在首个 <option>LABEL</option> 命令之前）。<replaceable>image</replaceable> 的默认值与 <replaceable>label</replaceable> 的相同，如果未指定 <option>APPEND</option>，则默认情况下使用全局条目（如果有）。最多允许 128 个 <option>LABEL</option> 条目。
     </para>

     <para>
      PXELINUX 使用以下语法：
     </para>
<screen>label <replaceable>mylabel</replaceable>
  kernel <replaceable>mykernel</replaceable>
  append <replaceable>myoptions</replaceable></screen>
     <para>
      标签的数据报处理如同文件名一样，它们在数据报处理之后必须唯一。例如，<quote>v2.6.30</quote>和<quote>v2.6.31</quote>这两个标签在 PXELINUX 下是无法区分的，因为它们在数据报处理之后的 DOS 文件名相同。
     </para>
     <para>
      该内核不必是 Linux 内核，它可以是引导扇区或 COMBOOT 文件。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>LOCALBOOT <replaceable>type</replaceable></option>
    </term>
    <listitem>
     <para>
      在 PXELINUX 上，指定 <option>LOCALBOOT 0</option> 而非 <option>KERNEL</option> 选项表示调用该特定标签，这样就会从本地磁盘引导而不是从内核引导。
     </para>
     <informaltable frame="topbot" rowsep="0">
      <tgroup cols="2">

       <thead>
        <row>
         <entry colname="1">
          <para>
           自变量
          </para>
         </entry>
         <entry colname="2">
          <para>
           描述
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry colname="1">
          <para>
           <literal>0</literal>
          </para>
         </entry>
         <entry colname="2">
          <para>
           执行正常引导
          </para>
         </entry>
        </row>
        <row>
         <entry colname="1">
          <para>
           <literal>4</literal>
          </para>
         </entry>
         <entry colname="2">
          <para>
           在“通用网络驱动程序接口”（UNDI）驱动程序仍然驻留在内存中的情况下执行本地引导
          </para>
         </entry>
        </row>
        <row>
         <entry colname="1">
          <para>
           <literal>5</literal>
          </para>
         </entry>
         <entry colname="2">
          <para>
           在整个 PXE 堆栈（包括 UNDI 驱动程序）仍然驻留于内存中的情况下执行本地引导
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </informaltable>
     <para>
      不定义所有其他的值。如果对 UNDI 或 PXE 堆栈不甚了解，请指定 <literal>0</literal>。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>TIMEOUT <replaceable>time-out</replaceable></option>
    </term>
    <listitem>
     <para>
      表示在自动引导之前在引导提示符下等待的时间（以 1/10 秒为单位）。用户按了键盘上的任意键后，超时将会取消（假设从用户完成命令开始）。如果超时值为零，则将完全禁用超时（这也是默认值）。允许的最大超时值为 35996（即小于一小时）。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><option>PROMPT<replaceable> flag_val</replaceable></option>
    </term>
    <listitem>
     <para>
      如果 <option>flag_val</option> 为 0，则仅当按下 <keycap function="shift"/> 或 <keycap function="alt"/> 键，或者在 <keycap>Caps Lock</keycap> 或 <keycap>Scroll Lock</keycap> 状态下，才显示引导提示符（这是默认设置）。如果 <option>flag_val</option> 为 1，则始终显示引导提示符。
     </para>
<screen>F2  <replaceable>filename</replaceable>
F1  <replaceable>filename</replaceable>
..etc...
F9  <replaceable>filename</replaceable>
F10 <replaceable>filename</replaceable></screen>
     <para>
      当在引导提示符下按下功能键时，将显示指定的文件。这可以用于实施预引导联机帮助（大致是关于内核命令行选项）。为了向后兼容先前的发行版，<keycap>F10</keycap> 也可以输入为 <literal>F0</literal>。请注意目前尚无法将文件名与 <keycap>F11</keycap> 和 <keycap>F12</keycap> 绑定。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="sec.deployment.prep_boot.pxeprep">
  <title>准备目标系统的 PXE 引导</title>

  <para>
   请将 PXE 选项包含在 BIOS 引导序列中来为系统 BIOS 的 PXE 引导作准备。
  </para>

  <warning>
   <title>BIOS 引导顺序</title>
   <para>
    在 BIOS 中，不要将 PXE 选项置于硬盘引导选项的前面。否则，每次引导系统时，系统都会尝试重新自我安装。
   </para>
  </warning>
 </sect1>
 <sect1 xml:id="sec.deployment.prep_boot.wolprep">
  <title>准备目标系统的网络唤醒</title>

  <para>
   网络唤醒 (WOL) 要求在安装之前启用相应的 BIOS 选项。此外，请记下目标系统的 MAC 地址。该数据是启动网络唤醒所需要的。
  </para>
 </sect1>
 <sect1 xml:id="sec.deployment.prep_boot.wol">
  <title>局域网唤醒</title>

  <para>
   “网络唤醒”允许通过一个发送时包含计算机 MAC 地址的特定网络包来打开该计算机的电源。由于全球的每台计算机都有一个唯一的 MAC 标识，所以无需担心会意外地错开计算机的电源。
  </para>

  <important>
   <title>不同网段的“网络唤醒”</title>
   <para>
    如果控制计算机与要唤醒的安装目标不在同一网段，请将要发送的 WOL 请求配置为多点广播，或远程控制该网段上的某台计算机充当这些请求的发送方。
   </para>
  </important>

  <para>
   SUSE Linux Enterprise Server 的用户可以使用名为 WOL 的 YaST 模块来方便地配置网络唤醒。基于 SUSE Linux 操作系统的其他版本的用户可以使用命令行工具。
  </para>
 </sect1>
 <sect1 xml:id="sec.deployment.prep_boot.wolyast">
  <title>使用 YaST 的“网络唤醒”</title>

  <procedure xml:id="proc.deployment.prep_boot.wolyast">
   <step>
    <para>
     以 <systemitem class="username">root</systemitem> 身份登录。
    </para>
   </step>
   <step>
    <para>
     启动 <menuchoice><guimenu>YaST</guimenu> <guimenu>网络服务</guimenu> <guimenu>WOL</guimenu></menuchoice>。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>添加</guimenu>并输入目标系统的主机名和 MAC 地址。
    </para>
   </step>
   <step>
    <para>
     要打开此计算机，请选择适当的输入框并单击<guimenu>唤醒</guimenu>。
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
