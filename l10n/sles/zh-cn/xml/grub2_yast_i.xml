<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="grub2_yast_i.xml" version="5.0" xml:id="sec-grub2-yast2-config">
 <title>使用 YaST 配置引导加载程序</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 系统中，配置引导加载程序一般选项最简单的方式就是使用 YaST 模块。在 <guimenu>YaST 控制中心</guimenu>，选择<menuchoice> <guimenu>系统</guimenu> <guimenu> 引导加载程序</guimenu></menuchoice>。该模块会显示您系统的当前引导加载程序配置，并允许您进行更改。
 </para>

 <para>
  使用<guimenu>引导代码选项</guimenu>选项卡可查看和更改类型、位置和高级加载程序设置的相关设置。您可以选择要在标准模式还是 EFI 模式下使用 GRUB 2。
 </para>

 <figure xml:id="fig-grub2-yast-boot-code-options0">
  <title>引导代码选项</title>
  <mediaobject>
   <imageobject role="fo">
    <imagedata fileref="yast2_bootloader_boot_code.png" width="75%" format="PNG"/>
   </imageobject>
   <imageobject role="html">
    <imagedata fileref="yast2_bootloader_boot_code.png" width="75%" format="PNG"/>
   </imageobject>
  </mediaobject>
 </figure>

 <important>
  <title>EFI 系统要求使用 GRUB2-EFI</title>
  <para>
   如果您使用的是 EFI 系统，则只能安装 GRUB2-EFI，否则您的系统不再能够引导。
  </para>
 </important>

 <important>
  <title>重新安装引导加载程序</title>
  <para>
   要重新安装引导加载程序，请务必在 YaST 中更改设置，然后再将其改回来。例如，要重新安装 GRUB2-EFI，请先选择 <guimenu>GRUB2</guimenu>，然后立即将其切换回 <guimenu>GRUB2-EFI</guimenu>。
  </para>
  <para>
   否则，可能只会重新安装引导加载程序的一部分。
  </para>
 </important>

 <note>
  <title>自定义引导加载程序</title>
  <para>
   要使用此处未列出的引导加载程序，请选择<guimenu>不要安装任何引导加载程序</guimenu>。在选择该选项之前，请仔细阅读您的引导加载程序文档。
  </para>
 </note>

 <sect2 xml:id="sec-grub2-yast2-location">
  <title>引导加载程序位置和引导代码选项</title>
  <para>
   引导加载程序的默认位置为主引导记录 (MBR) 或 <filename>/</filename> 分区的引导扇区，具体视分区设置而定。要修改引导加载程序的位置，请遵循以下步骤：
  </para>
  <procedure xml:id="pro-sec-grub2-yast2-location">
   <title>更改引导加载程序位置</title>
   <step>
    <para>
     选择<guimenu>引导代码选项</guimenu>选项卡，然后为<guimenu>引导加载程序位置</guimenu>选择以下某个选项：
    </para>
    <variablelist>
     <varlistentry>
      <term><guimenu>从主引导记录引导</guimenu>
      </term>
      <listitem>
       <para>
        选择此选项将在包含 <filename>/boot</filename> 目录的磁盘 MBR 中安装引导加载程序。通常，这将是装入到 <filename>/</filename> 的磁盘，但如果 <filename>/boot</filename> 装入到其他磁盘上的独立分区中，则将会使用该磁盘的 MBR。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>从根分区引导</guimenu>
      </term>
      <listitem>
       <para>
        这将在 <filename>/</filename> 分区的引导扇区安装引导加载程序。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>自定义引导分区</guimenu>
      </term>
      <listitem>
       <para>
        手动使用此选项来指定引导加载程序的位置。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     单击<guimenu>确定</guimenu>以应用您的更改。
    </para>
   </step>
  </procedure>
  <figure xml:id="fig-grub2-yast-boot-code-options">
   <title>代码选项</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_bootloader_boot_code.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_bootloader_boot_code.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   <guimenu>引导代码选项</guimenu>选项卡包含以下额外的选项：
  </para>
   <variablelist>
    <varlistentry>
     <term><guimenu>在分区表中设置活动标志，以引导分区</guimenu>
     </term>
     <listitem>
      <para>
       激活<phrase arch="x86_64">包含 <filename>/boot</filename> 目录的分区</phrase><phrase arch="power">（PReP 分区）</phrase>。此选项用于具有旧 BIOS 的系统和/或旧式操作系统，因为它们可能无法从非活动的分区引导。您可以放心地启用此选项。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>将通用引导代码写入 MBR 中</guimenu>
     </term>
     <listitem>
      <para>
       如果 MBR 包含自定义的“非 GRUB”代码，此选项会用不受操作系统限制的通用代码替换该代码。如果您停用此选项，系统可能变得无法引导。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>启用可信引导支持</guimenu>
     </term>
     <listitem>
      <para>
       启动支持可信计算功能（可信平台模块 (TPM)）的 TrustedGRUB2。有关详细信息，请参见 <link xlink:href="https://github.com/Sirrix-AG/TrustedGRUB2"/>。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
 </sect2>

 <sect2 xml:id="sec-grub2-yast2-config-order">
  <title>调整磁盘顺序</title>
  <para>
   如果您的计算机有多个硬盘，您可以指定磁盘的引导顺序。如果从 MBR 引导，将在列表中的第一个磁盘中安装 GRUB 2。默认在该磁盘中安装 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。列表的其余部分是有关 GRUB 2 的设备映射程序的提示（请参见<xref linkend="sec-grub2-map"/>）。
  </para>
  <warning>
   <title>无法引导的系统</title>
   <para>
    通常情况下，默认值几乎对所有部署都有效。如果您错误地更改了磁盘的引导顺序，系统下次重引导时可能无法引导。例如，如果列表中的第一个磁盘不在 BIOS 引导序列中，并且列表中的其他磁盘有空 MBR，系统将无法引导。
   </para>
  </warning>
  <procedure xml:id="pro-sec-grub2-yast2-config-order">
   <title>设置磁盘顺序</title>
   <step>
    <para>
     打开<guimenu>引导代码选项</guimenu>选项卡。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>编辑磁盘引导顺序</guimenu>。
    </para>
   </step>
   <step>
    <para>
     如果列出了多个磁盘，请选择一个，然后单击<guimenu>向上</guimenu>或<guimenu>向下</guimenu>来对显示的磁盘重新排序。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>确定</guimenu>两次以保存更改。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-grub2-yast2-config-advanced">
  <title>配置高级选项</title>
  <para>
   高级引导选项可以通过<guimenu>引导加载程序选项</guimenu>选项卡来配置。
  </para>
  <sect3 xml:id="sec-grub2-yast2-config-advanced-tab1">
   <title><guimenu>引导加载程序选项</guimenu>选项卡</title>
   <figure xml:id="fig-grub2-yast-bootloader-options">
    <title>引导加载程序选项</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_options.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_options.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term><guimenu>引导加载程序超时</guimenu>
     </term>
     <listitem>
      <para>
       通过键入新值或者用鼠标单击相应的方向键来更改<guimenu>超时（以秒为单位）</guimenu>的值。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>探测外来操作系统</guimenu>
     </term>
     <listitem>
      <para>
       如果选择该选项，引导加载程序将会搜索其他系统（例如 Windows）或其他 Linux 安装。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>引导时隐藏菜单</guimenu>
     </term>
     <listitem>
      <para>
       隐藏引导菜单并引导默认项。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>调整默认引导项</guimenu>
     </term>
     <listitem>
      <para>
       从<quote>默认引导部分</quote>列表中选择所需的项。请注意，引导项名称中的<quote>&gt;</quote>符号用于分隔引导部分及其子部分。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-grub2-yast2-boot-password">
     <term><guimenu>使用口令保护引导加载程序</guimenu>
     </term>
     <listitem>
      <para>
       使用一个附加的口令保护引导加载程序和系统。有关详细信息，请参见 <xref linkend="sec-grub2-password"/>。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
  <sect3 xml:id="sec-grub2-yast2-config-advanced-tab2">
   <title><guimenu>内核参数</guimenu>选项卡</title>
   <figure xml:id="fig-grub2-yast-kernel-parameters">
    <title>内核参数</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_kernel_parameters.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_kernel_parameters.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term><guimenu>控制台分辨率</guimenu>
     </term>
     <listitem>
      <para>
       <guimenu>控制台分辨率</guimenu>选项指定引导过程中的默认屏幕分辨率。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>内核命令行参数</guimenu>
     </term>
     <listitem>
     <para>
       可选内核参数添加在默认参数的末尾。有关所有可用参数的列表，请参见 <link xlink:href="http://en.opensuse.org/Linuxrc"/>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-grub2-yast2-cpu-mitigations">
     
     <term><guimenu>CPU 缓解措施</guimenu></term>
     <listitem>
      <para>
       SUSE 针对为防御 CPU 边信道攻击而部署的所有软件缓解措施发布了一个或多个内核引导命令行参数。其中一些参数可能会导致性能损失。请根据您的设置选择以下其中一个选项，在安全性和性能之间取得平衡：
      </para>
     <formalpara>
       <title><guimenu>自动</guimenu></title>
        <para>
   启用您的 CPU 型号所需的全部缓解措施，但不防范跨 CPU 线程的攻击。此设置可能会在一定程度上影响性能，具体视工作负载而定。
  </para>
       </formalpara>
       <formalpara>
       <title><guimenu>自动 + 禁用 SMT</guimenu></title>
        <para>
    提供整套可用的安全缓解措施。启用您的 CPU 型号所需的全部缓解措施。此外，它还会禁用同步多线程 (SMT)，以免受到跨多个 CPU 线程发起的边信道攻击。此设置可能会进一步影响性能，具体取决于工作负载。
    </para>
       </formalpara>
       <formalpara>
       <title><guimenu>关</guimenu></title>
         <para>
    禁用所有缓解措施。CPU 可能会遭到边信道攻击，具体取决于 CPU 型号。此设置不会对性能造成任何影响。
   </para>
      </formalpara>
       <formalpara>
       <title><guimenu>手动</guimenu></title>
        <para>
    不设置任何缓解措施级别。请使用内核命令行选项手动指定 CPU 缓解措施。
   </para>
       </formalpara>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>使用图形控制台</guimenu>
     </term>
     <listitem>
      <para>
       如果选中该选项，引导菜单会显示在图形启动屏幕中，而不是以文本模式显示。此时，您可以通过<guimenu>控制台分辨率</guimenu>列表设置引导屏幕的分辨率，并使用<guimenu>控制台主题</guimenu>文件选择器指定图形主题定义文件。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>使用串行控制台</guimenu>
     </term>
     <listitem>
      <para>
       如果您的计算机是通过串行控制台控制的，则可激活此选项并指定要使用的 COM 端口及其运行速度。请参见 <command>info grub</command> 或 <link xlink:href="http://www.gnu.org/software/grub/manual/grub.html#Serial-terminal"/>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
 </sect2>
</sect1>
