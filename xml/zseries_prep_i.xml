<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<!--
   fs 02/28/2006: 
     Do not change the following words/phrases (except in URls, 
     packagenames etc.)in all zSeries documents, because they are trademarks:
      - Redbook, Redpiece, Redpaper
      - developerWorks
      - ESCON
      - HiperSockets
-->
<sect1 id="sec.zseries.prep">
 <title>Preparing for Installation</title>

 <para>
  In this section, learn how to make the data accessible for installation,
  install &productname; using different methods, and prepare and use the IPL
  of the &productname; installation system. Also find out about network
  configuration and network installation.
 </para>

 <sect2 id="sec.prep.makeavail">
  <title>Making the Installation Data Available</title><indexterm>
  <primary>preparing</primary>
  <secondary>making the installation data available</secondary></indexterm><indexterm>
  <primary>making the installation data available</primary></indexterm>
  <para>
   This section provides detailed information about making the &productname;
   IBM &zseries; installation data accessible for installation. Depending on
   your computer and system environment, choose between NFS or FTP
   installation. If you are running Microsoft Windows workstations in your
   environment, you can also use the Windows network (including the SMB
   protocol) to install &productname; on your IBM &zseries; system.
  </para>
  <tip>
   <title>IPL from DVD</title>
   <para>
    Since Service Pack 1 of SUSE Linux Enterprise Server Version 10, it is
    possible to IPL from DVD and use the DVD as the installation medium.
    This is very convenient if you have restrictions setting up an
    installation server providing installation media over your network. The
    prerequisite is an FCP-attached SCSI DVD Drive.
   </para>
  </tip>
  <note>
   <title>No Installation <quote>From Hard Disk</quote></title>
   <para>
    It is not possible to install from hard disk by putting the content of
    the DVD to a partition on a DASD.
   </para>
  </note>
  <sect3 id="sec.prep.makeavail.linuxws">
   <title>Using a Linux Workstation or &productname; DVD</title><indexterm>
   <primary>making the installation data available</primary>
   <secondary>Linux workstation</secondary></indexterm>
   <para>
    If you have a Linux workstation running in your computer environment,
    use the workstation to provide the installation data to the IBM
    &zseries; installation process by NFS or FTP. If the Linux workstation
    runs under &productname;, you can set up an installation server (NFS or
    FTP) using the &yast; <guimenu>Installation Server</guimenu> module as
    described in
    <xref linkend="sec.deployment.remoteinst.instserver.sles9"/>.
   </para>
   <sect4 id="sec.prep.makeavail.linuxws.nfs">
    <title>Over NFS</title>
    <para>
     Use NFS (network file system) to make the installation media available.
    </para>
    <important>
     <title>Exporting Mounted Devices with NFS</title>
     <para>
      Exporting the file system root (<filename>/</filename>) does not imply
      the export of mounted devices, such as DVD. Explicitly name the mount
      point in <filename>/etc/exports</filename>:
     </para>
<screen>/media/dvd  *(ro)</screen>
     <para>
      After changing this file, restart the NFS server with the command
      <command>sudo systemctl restart nfsserver.service</command>.
     </para>
    </important>
   </sect4>
   <sect4 id="sec.prep.makeavail.linuxws.ftp">
    <title>Over FTP</title>
    <para>
     Setting up an FTP server on a Linux system involves the installation of
     the server software itself, such as wuftpd or proftpd, as well as other
     possible configuration tasks. Using &yast;, the installation step is
     straightforward: select the package to install and start the
     installation. Skip the configuration of the FTP server if no anonymous
     FTP should be used for the installation. Instead, use an FTP login with
     a valid username and password. You might want to create a user account
     for this task only. The FTP daemon does not need to be started by hand.
     It can be started by inetd if an FTP connection is requested. To
     activate the new settings, enter
     <command>rcinetd</command>&nbsp;<option>restart</option> or
     <command>rcxinetd</command>&nbsp;<option>restart</option>. 
     <!--taroth 2014-03-19: according to fcrozat, xinetd is *not* managed by
      systemd, I guess neither is inetd, so let's keep those rc* commands for
      now...
     <command>sudo systemctl restart inetd.service</command> or
     <command>sudo systemctl restart xinetd.service</command>.-->
    </para>
   </sect4>
   <sect4 id="sec.prep.makeavail.linuxws.oncd">
    <title>&productname; on DVD</title>
    <para>
     DVD1 of the &productname; for IBM &zseries; contains a bootable Linux
     image for Intel-based workstations as well as an image for &zseries;.
    </para>
    <para>
     For Intel-based workstations, boot from this DVD, answer the questions
     regarding your language and keyboard layout, and select <guimenu>Start
     rescue system</guimenu>. You need at least 64&nbsp;MB RAM for this. No
     disk space is needed because the entire rescue system resides in the
     workstation's RAM. This approach takes some Linux and networking
     experience, because you need to set up the networking of the
     workstation manually.
    </para>
    <para>
     For System z, IPL your LPAR/VM guest from this DVD as described in
     <xref linkend="sec.prep.ipling.lpar.dvd"/>. After entering your network
     parameters, the installation system treats the DVD as the source of
     installation data. Because &zseries; cannot have an X11-capable
     terminal attached directly, choose between VNC or SSH installation. SSH
     also provides a graphical installation by tunneling the X connection
     through SSH with <command>ssh -X</command>.
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.makeavail.windowsws">
   <title>Using a Microsoft Windows Workstation</title><indexterm>
   <primary>making the installation data available</primary>
   <secondary>Windows workstation</secondary></indexterm>
   <para>
    If there is a Microsoft Windows workstation available in your network,
    use this computer to make the installation media available. The easiest
    way to do this is to use the SMB protocol, already included in the
    Windows operating system. Be sure to activate <guimenu>SMB over
    TCP/IP</guimenu> as this enables the encapsulation of SMB packages into
    TCP/IP packages. Find details in the Windows online help or other
    Windows-related documentation that covers networking. Another option is
    to use FTP. This also requires some third-party software for Windows.
   </para>
   <sect4 id="sec.prep.makeavail.windowsws.smb">
    <title>With SMB</title>
    <para>
     To make the installation media available with SMB, just insert the
     &productname; DVD&nbsp;1 into the DVD drive of the Windows workstation.
     Then create a new share using the DVD-ROM drive's letter and make it
     available for everyone in the network.
    </para>
<!-- bnc#803514 
         http://lists.samba.org/archive/samba-technical/2001-April/013007.html
    -->
    <para>
     The installation path in &yast; can be:
    </para>
<screen>smb://<replaceable
      >DOMAIN</replaceable>;<replaceable
      >USER</replaceable>:<replaceable
      >PW</replaceable>@<replaceable
      >SERVERNAME</replaceable>/<replaceable
      >SHAREPATH</replaceable></screen>
    <para>
     Where the placeholders mean:
    </para>
    <variablelist>
     <varlistentry>
      <term><replaceable>DOMAIN</replaceable>
      </term>
      <listitem>
       <para>
        Optional workgroup or active directory domain.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>USER</replaceable>
      </term>
      <term><replaceable>PW</replaceable>
      </term>
      <listitem>
       <para>
        Optional username and password of a user who can access this server
        and its share.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>SERVERNAME</replaceable>
      </term>
      <listitem>
       <para>
        The name of the server that hosts the share(s).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>SHAREPATH</replaceable>
      </term>
      <listitem>
       <para>
        The path to the share(s).
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
<!-- syntax with ?workgroup=... seems not to work according to
       Martin Pluskal
     -->
<!--<screen>smb://<replaceable
      >USER</replaceable>:<replaceable
      >PW</replaceable>@<replaceable
      >SERVERNAME</replaceable>/<replaceable
      >SHAREPATH</replaceable>?workgroup=<replaceable
      >WORKGROUP</replaceable>;</screen>-->
    <para></para>
<!--<tip>
     <title>SMB Installation Path for &yast;</title>
     <para>
      Consult the <filename>README</filename> from the highest directory of
      DVD&nbsp;1 for detailed information about the syntax of the
      installation path for &yast;.
     </para>
    </tip>-->
   </sect4>
   <sect4 id="sec.prep.makeavail.windowsws.nfs">
    <title>With NFS</title>
    <para>
     Refer to the documentation provided with the third party product that
     enables NFS server services for your Windows workstation. The DVD-ROM
     drive containing the &productname; DVDs must be in the available NFS
     path.
    </para>
   </sect4>
   <sect4 id="sec.prep.makeavail.windowsws.ftp">
    <title>With FTP</title>
    <para>
     Refer to the documentation provided with the third party product that
     is enabling FTP server services on your Windows workstation. The
     DVD-ROM drive containing the &productname; DVDs must be in the
     available FTP path.
    </para>
    <para>
     The FTP server that is bundled with some Microsoft Windows releases
     implements only a subset of the FTP command set and is not suitable for
     providing the installation data. However, other products (such as the
     FTP server that is part of Hummingbird Exceed or WAR-FTPD) have been
     reported as functional.
    </para>
   </sect4>
   <sect4>
    <title>Using an FCP-Attached SCSI DVD Drive</title>
    <para>
     After you IPLed from the SCSI DVD as described in
     <xref
      linkend="sec.info.iplopt.dvd"/>, the installation system
     uses the DVD as the installation medium. In that case, you do not need
     the installation media on an FTP, NFS, or SMB server. However, you need
     the network configuration data for your &productname;, because you must
     set up the network during the installation to perform a graphical
     installation by VNC or by X tunneled through SSH.
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.makeavail.zpxe_cobbler">
   <title>Using a Cobbler Server for zPXE</title>
   <para>
    IPLing from the network requires a Cobbler server, to provide the
    kernel, initrd, and the installation data. Preparing the Cobbler server
    requires four steps:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Importing the Installation Data
     </para>
    </listitem>
    <listitem>
     <para>
      Adding a Distribution
     </para>
    </listitem>
    <listitem>
     <para>
      Adding Profiles
     </para>
    </listitem>
    <listitem>
     <para>
      Adding Systems
     </para>
    </listitem>
   </itemizedlist>
   <sect4 id="sec.prep.makeavail.zpxe_cobbler.import">
    <title>Importing the Installation Data</title>
    <para>
     Importing the media requires the installation source to be available on
     the Cobbler server&mdash;either from DVD or from a network source. Run
     the following command to import the data:
    </para>
<screen>cobbler import --path=<replaceable>PATH</replaceable><co id="cobbler.import.path"/> --name=<replaceable>IDENTIFIER</replaceable><co id="cobbler.import.dirname"/> --arch=s390x</screen>
    <calloutlist>
     <callout arearefs="cobbler.import.path">
      <para>
       Mount point of the installation data.
      </para>
     </callout>
     <callout arearefs="cobbler.import.dirname">
      <para>
       A string identifying the imported product, for example
       <quote>sles11_sp3_s390x</quote>. This string is used as the name for
       the subdirectory where the installation data is copied to. On a
       Cobbler server running on &sle; this is
       <filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable></filename>.
       This path may be different if Cobbler runs on another operating
       system.
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 id="sec.prep.makeavail.zpxe_cobbler.add_distro">
    <title>Adding a Distribution</title>
    <para>
     By adding a distribution, you tell Cobbler to provide the kernel and
     the initrd required to IPL via zPXE. Run the following command on the
     Cobbler server to add &productname; for IBM &zseries;:
    </para>
<screen>cobbler distro add --arch=s390x --breed=suse --name="<replaceable>IDENTIFIER</replaceable>"<co id="cobbler.add.identifier"/> \
  --os-version=sles10<co id="cobbler.add.os"/> \
  --initrd=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/initrd<co id="cobbler.add.initrd"/> \
  --kernel=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/vmrdr.ikr<co
id="cobbler.add.kernel"/> \
  --kopts="install=http://cobbler.&exampledomain;/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co id="cobbler.add.server"/>
    </screen>
    <calloutlist>
     <callout arearefs="cobbler.add.identifier">
      <para>
       Custom identifier for the distribution, for example <quote>&slsa;
       &productnumber; &zseries;</quote>. Must be unique.
      </para>
     </callout>
     <callout arearefs="cobbler.add.os">
      <para>
       Operating system identifier. Use <literal>sles10</literal>.
      </para>
     </callout>
     <callout arearefs="cobbler.add.initrd">
      <para>
       Path to the initrd. The first part of the path
       (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>)
       depends on the location where Cobbler imported the data and the
       subdirectory name you chose when importing the installation data.
      </para>
     </callout>
     <callout arearefs="cobbler.add.kernel">
      <para>
       Path to the kernel. The first part of the path
       (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/</filename>)
       depends on the location where Cobbler imported the data and the
       subdirectory name you chose when importing the installation data.
      </para>
     </callout>
     <callout arearefs="cobbler.add.server">
      <para>
       URl to the installation directory on the Cobbler server.
      </para>
     </callout>
    </calloutlist>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.makeavail.zpxe_cobbler.profile">
   <title>Adding Profiles</title>
   <para>
    With a profile you can add additional options to a
    distribution&mdash;for example adding an &ay; file for an automated
    installation. You can specify multiple profiles per distribution; at
    least one must be created.
   </para>
<screen>cobbler profile add
   --name=<replaceable>PROFILENAME</replaceable><co
   id="cobbler.profile.name"/> --distro=<replaceable>DISTRIBUTION</replaceable><co id="cobbler.profile.distro"/> --kickstart=<replaceable>PATH_TO_AUTOYAST_FILE</replaceable><co id="cobbler.profile.kickstart"/></screen>
   <calloutlist>
    <callout arearefs="cobbler.profile.name">
     <para>
      Unique name for the profile.
     </para>
    </callout>
    <callout arearefs="cobbler.profile.distro">
     <para>
      Distribution to which the profile should apply. You must use the
      string specified with
      <option>--name=<replaceable>IDENTIFIER</replaceable></option> in the
      importing step here.
     </para>
    </callout>
    <callout arearefs="cobbler.profile.kickstart">
     <para>
      Specify the path to an &ay; file for an automated installation here.
      This parameter is optional.
     </para>
    </callout>
   </calloutlist>
  </sect3>
  <sect3 id="sec.prep.makeavail.zpxe_cobbler.system">
   <title>Adding Systems</title>
   <para>
    The last step that is required is to add systems to the Cobbler server.
    A system addition needs to be done for every &zseries; guest that should
    boot via zPXE. Guests are identified via their z/VM user ID (in the
    following example, an ID called <quote>LINUX01</quote> is assumed). To
    add a system, run the following command:
   </para>
<screen>cobbler system add --name=LINUX01 --hostname=linux01.example.com \
--ip=&wsIVip; --subnet=&subnetII;.255 --netmask=&subnetmask; \
--name-servers=&dnsip; --name-servers-search=&exampledomain; \
--gateway=&routerintipII; --kopts="<replaceable>KERNEL_OPTIONS</replaceable>"</screen>
   <para>
    With the <option>--kopts</option> option you can specify the kernel and
    installation parameters you would normally specify in the parmfile. The
    parameters are entered as a space-separated list in the form of
    <replaceable>PARAMETER1=VALUE1 PARAMETER2=VALUE2</replaceable>. The
    installer will prompt you for missing parameters. For a completely
    automated installation you need to specify all parameters for
    networking, DASDs and provide an &ay; file. The following shows an
    example for a guest equipped with an OSA interface using the same
    network parameters as above.
   </para>
<screen>--kopts=" \
AutoYaST=http://&exampledomainip;.5/autoinst.xml \
Hostname=linux01.example.com \
Domain=&exampledomain; \
HostIP=&wsIVip; \
Gateway=&routerintipII; \
Nameserver=&dnsip; \
Searchdns=&exampledomain; \
InstNetDev=osa; \
Netmask=&subnetmask; \
Broadcast=&subnetII;.255 \
OsaInterface=qdio \
Layer2=0 \
PortNo=0 \
ReadChannel=0.0.0600 \
WriteChannel=0.0601 \
DataChannel=0.0.0602 \
Portname=DT70 \
DASD=600"</screen>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.inst_types">
  <title>Installation Types</title><indexterm>
  <primary>installation</primary>
  <secondary>LPAR</secondary></indexterm><indexterm>
  <primary>installation</primary>
  <secondary>z/VM</secondary></indexterm>
  <para>
   This section provides information about which steps must be performed to
   install &productname; for each of the installation modes and where to
   find the appropriate information. After the preparations mentioned in the
   previous chapters have been accomplished, follow the installation
   overview of the desired installation mode to install &productname; on
   your system.
  </para>
  <para>
   As described in <xref linkend="sec.prep.makeavail"/>, there are two
   different installation modes for Linux on IBM &zseries;:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     LPAR Installation
    </para>
   </listitem>
   <listitem>
    <para>
     z/VM Installation
    </para>
   </listitem>
  </itemizedlist>
  <procedure id="pro.prep.inst_types.lpar">
   <title>Overview of LPAR Installation</title><indexterm>
   <primary>LPAR installation</primary>
   <secondary>overview</secondary></indexterm>
   <step>
    <para>
     Prepare the devices needed for installation. See
     <xref
       linkend="sec.prep.prep_ipl.natlpar"/>.
    </para>
   </step>
   <step>
    <para>
     IPL the installation system. See
     <xref 
      linkend="sec.prep.ipling.lpar"/>.
    </para>
   </step>
   <step>
    <para>
     Configure the network. See <xref linkend="sec.prep.netcfg"/>.
    </para>
   </step>
   <step>
    <para>
     Connect to the &productname; installation system. See
     <xref  linkend="sec.prep.connect"/>.
    </para>
   </step>
   <step>
    <para>
     Start the installation using &yast; and IPL the installed system. See
     <xref linkend="cha.inst"/>.
    </para>
   </step>
  </procedure>
  <procedure id="pro.prep.inst_types.vm">
   <title>Installation Overview of z/VM Installation</title><indexterm>
   <primary>z/VM installation</primary>
   <secondary>overview</secondary></indexterm>
   <step>
    <para>
     Prepare the devices needed for installation. See
     <xref
       linkend="sec.prep.prep_ipl.vm"/>.
    </para>
   </step>
   <step>
    <para>
     IPL the installation system. See <xref linkend="sec.prep.ipling.vm"/>.
    </para>
   </step>
   <step>
    <para>
     Configure the network. See <xref 
      linkend="sec.prep.netcfg.vm"/>.
    </para>
   </step>
   <step>
    <para>
     Connect to the &productname; installation system. See
     <xref  linkend="sec.prep.connect"/>.
    </para>
   </step>
   <step>
    <para>
     Start the installation using &yast; and IPL the installed system. See
     <xref linkend="cha.inst"/>.
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 id="sec.prep.prep_ipl">
  <title>Preparing the IPL of the &productname; Installation System</title>
  <para></para>
  <sect3 id="sec.prep.prep_ipl.natlpar">
   <title>LPAR Installation</title><indexterm>
   <primary>LPAR installation</primary>
   <secondary>preparing the IPL</secondary></indexterm><indexterm>
   <primary>preparing the IPL</primary>
   <secondary>LPAR installation</secondary></indexterm>
   <para>
    Configure your IBM &zseries; system to start in ESA/S390 or LINUX-only
    mode with an appropriate activation profile and IOCDS. Consult IBM
    documentation for more on how to achieve this.
   </para>
   <sect4 id="sec.prep.prep_ipl.natlpar.iocds">
    <title>IOCDS: Attaching and Configuring Devices</title>
    <para>
     A &productname; installation needs at least two devices: a DASD and a
     network connection device. For an IPL from tape, a tape device should
     also be accessible. Devices are configured and attached to an LPAR in
     the IOCDS (input output configuration data set). This example defines
     one DASD, one OSA-2 network device, and a tape device for LPAR Z1. For
     further information about how to set up the IOCDS for Linux, refer to
     your machine's IBM hardware documentation.
    </para>
    <example id="ex.prep.prep_ipl.natlpar.iocds">
     <title>An Example IOCDS</title>
<screen>CHPID PATH=(CSS(0),FD),PCHID=120,TYPE=FC
CHPID PATH=(CSS(0),FE),PCHID=320,TYPE=OSD
CHPID PATH=(CSS(0),10),PCHID=3A0,TYPE=CNC

CNTLUNIT CUNUMBR=FD00,PATH=((CSS(0),FD)),UNITADD=((00,1)),UNIT=2105
IODEVICE ADDRESS=(FD00,1),CUNUMBR=(FD00),UNIT=3390B,UNITADD=00

CNTLUNIT CUNUMBR=FE20,PATH=((CSS(0),FE)),UNIT=OSA
IODEVICE ADDRESS=(FE20,1),CUNUMBR=(FE20),UNIT=OSA
IODEVICE ADDRESS=(FEFE,1),CUNUMBR=(FE20),UNIT=OSAD

CNTLUNIT CUNUMBR=100A,PATH=((CSS(0),10)),UNIT=3480,UNITADD=((0A,1))
IODEVICE ADDRESS=(100A,1),CUNUMBR=(100A),UNIT=3480,UNITADD=00</screen>
    </example>
    <para>
     Proceed with <xref linkend="sec.prep.ipling.lpar"/>.
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.prep_ipl.vm">
   <title>z/VM Installation</title><indexterm>
   <primary>z/VM installation</primary>
   <secondary>preparing the IPL</secondary></indexterm><indexterm>
   <primary>preparing the IPL</primary>
   <secondary>z/VM installation</secondary></indexterm>
   <sect4 id="sec.prep.prep_ipl.vm.linux_guest">
    <title>Adding a Linux Guest</title><indexterm>
    <primary>z/VM installation</primary>
    <secondary>Linux guest</secondary></indexterm>
    <para>
     The first step is to attach and format one or multiple DASDs in the
     system to be used by the Linux guest in z/VM. Next, create a new user
     in z/VM. The example shows the directory for a user
     <literal>LINUX1</literal> with the password <literal>LINPWD</literal>,
     256&nbsp;MB of memory (extendable up to 1024&nbsp;MB), 32&nbsp;MB of
     expanded RAM (XSTORE), some minidisks (MDISK), two CPUs and an OSA QDIO
     device.
    </para>
    <tip>
     <title>Assigning Memory to z/VM guests</title>
     <para>
      When assigning memory to a z/VM guest, make sure that the memory size
      suits the needs of your preferred installation type. See
      <xref
      linkend="sec.info_sysreq.sysreq.hw.mem"/>. To set the
      memory size to 512 MB, use the command <command>CP DEFINE STORAGE
      512M</command>. After the installation has finished, reset the memory
      size to the desired value.
     </para>
    </tip>
    <example id="ex.prep.prep_ipl.vm.linux_guest.config">
     <title>Configuration of a z/VM Directory</title>
<screen>USER LINUX1 LINPWD 256M 1024M G 
*____________________________________________
* LINUX1 
*____________________________________________
* This VM Linux guest has two CPUs defined.

CPU 01 CPUID 111111 
CPU 02 CPUID 111222 
IPL CMS PARM AUTOCR 
IUCV ANY 
IUCV ALLOW 
MACH ESA 10 
OPTION MAINTCCW RMCHINFO 
SHARE RELATIVE 2000 
XSTORE 32M 
CONSOLE 01C0 3270 A 
SPOOL 000C 2540 READER * 
SPOOL 000D 2540 PUNCH A 
SPOOL 000E 3203 A 
* OSA QDIO DEVICE DEFINITIONS 
DEDICATE 9A0 9A0 
DEDICATE 9A1 9A1 
DEDICATE 9A2 9A2 
* 
LINK MAINT 0190 0190 RR 
LINK MAINT 019E 019E RR 
LINK MAINT 019D 019D RR 
* MINIDISK DEFINITIONS 
MDISK 201 3390 0001 0050 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 150 3390 0052 0200 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 151 3390 0253 2800 DASD40 MR ONE4ME TWO4ME THR4ME</screen>
    </example>
    <para>
     This example uses minidisk 201 as the guest's home disk. Minidisk 150
     with 200 cylinders is the Linux swap device. Disk 151 with 2800
     cylinders holds the Linux installation.
    </para>
    <para>
     Now add (as the user <systemitem class="username">MAINT</systemitem>)
     the guest to the user directory with <command>DIRM FOR LINUX1
     ADD</command>. Enter the name of the guest (<literal>LINUX1</literal>)
     and press <keycap>F5</keycap>. Set up the environment of the user with:
    </para>
<screen>DIRM DIRECT 
DIRM USER WITHPASS</screen>
    <para>
     The last command returns a reader file number. This number is needed
     for the next command:
    </para>
<screen>RECEIVE &lt;number&gt; USER DIRECT A (REPL)</screen>
    <para>
     Assign the directories to the guest with <command>DISKMAP USER DIRECT
     A</command>. You can now log in on the guest as user
     <systemitem
      class="username">LINUX1</systemitem>.
    </para>
    <para>
     If you do not have the <literal>dirmaint</literal> option available,
     refer to the IBM documentation to set up this user.
    </para>
    <para>
     Proceed with <xref linkend="sec.prep.ipling.vm"/>.
    </para>
   </sect4>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.ipling">
  <title>IPLing the &productname; Installation System</title>
  <para></para>
  <sect3 id="sec.prep.ipling.lpar">
   <title>LPAR Installation</title><indexterm>
   <primary>LPAR installation</primary>
   <secondary>IPL installation system</secondary></indexterm><indexterm>
   <primary>IPL</primary>
   <secondary>LPAR installation</secondary></indexterm>
   <para>
    There are different ways to IPL &productname; into an LPAR. The
    preferred way is to use the <guimenu>Load from CD-ROM or
    server</guimenu> feature of the SE or HMC.
   </para>
   <sect4 id="sec.prep.ipling.lpar.cdrom">
    <title>IPL from DVD-ROM</title>
    <para>
     Mark the LPAR to install and select <guimenu>Load from CD-ROM or
     server</guimenu>. Leave the field for the file location blank or enter
     the path to the root directory of the first DVD-ROM and select
     continue. In the list of options that appears, choose the default
     selection. <guimenu>Operating system messages</guimenu> should now show
     the kernel boot messages.
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.lpar.dvd">
    <title>IPL from FCP-Attached SCSI DVD</title>
    <para>
     You can use the <guimenu>Load</guimenu> procedure by selecting
     <guimenu>SCSI</guimenu> as <guimenu>Load type</guimenu> to IPL from
     SCSI. Enter the WWPN (Worldwide port name) and LUN Logical unit number)
     provided by your SCSI bridge or storage (16 digits&mdash;do not omit
     the trailing 0s). The boot program selector must be 2. Use your FCP
     adapter as <guimenu>Load address</guimenu> and perform an IPL.
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.lpar.tape">
    <title>IPL from ESCON or FICON Attached Tape</title>
    <para>
     If you cannot IPL from DVD, create a channel attached tape from which
     to IPL the &productname; installation image. Use the
     <guimenu>LOAD</guimenu> button in the SE or HMC with the tape device
     address as the load address to IPL the &productname; installation
     system.
    </para>
    <para>
     There are many ways to create an IPLable tape. One is to copy the
     files:
    </para>
<screen>/boot/s390x/tapeipl.ikr
/boot/s390x/parmfile
/boot/s390x/initrd</screen>
    <para>
     as binary files from DVD&nbsp;1 (for example, using FTP from a Linux
     workstation).
    </para>
    <para>
     Name them
    </para>
<screen>SLES11 IMAGE
SLES11 PARM
SLES11 INITRD</screen>
    <para>
     and write them onto a tape with the REXX from the example.
    </para>
    <important>
     <title>Transferring Binaries using FTP</title>
     <para>
      Do not upload the files as <literal>fixed 80</literal>. Store them as
      <literal>fixed 1024</literal>. Use the FTP command <command>locsite
      fix 1024</command>.
     </para>
    </important>
    <example id="sec.prep.ipling.lpar.tape.create">
     <title>REXX Script to Create an IPLable Tape</title>
<screen>'REWIND 181'
'FILEDEF IN1 DISK' SLES11 IMAGE A
'FILEDEF IN2 DISK' SLES11 PARM A
'FILEDEF IN3 DISK' SLES11 INITRD A
'FILEDEF OUT TAP1 (RECFM F BLOCK 1024 LRECL 1024 PERM'
say 'Writing: ' left(file1,23)
'MOVEFILE IN1 OUT'
say 'Writing: ' left(file2,23)
'MOVEFILE IN2 OUT'
say 'Writing: ' left(file3,23)
'MOVEFILE IN3 OUT'
say 'Done.'
'REWIND 181'
 exit</screen>
    </example>
    <para>
     The tape in this script is attached as 181. Adjust the script to your
     needs.
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.ipling.vm">
   <title>z/VM Installation</title><indexterm>
   <primary>z/VM installation</primary>
   <secondary>IPL installation system</secondary></indexterm><indexterm>
   <primary>IPL</primary>
   <secondary>z/VM installation</secondary></indexterm>
   <para>
    This section is about IPLing the installation system to install
    &productname; for IBM &zseries; on a z/VM system.
   </para>
   <sect4 id="sec.prep.ipling.vm.reader">
    <title>IPL from the z/VM Reader</title>
    <para>
     You need a working TCP/IP connection and an FTP client program within
     your newly defined z/VM guest to transfer the installation system via
     FTP. Setting up TCP/IP for z/VM is beyond the scope of this manual.
     Refer to the appropriate IBM documentation.
    </para>
    <para>
     Log in as the z/VM Linux guest to IPL. Make the content of the
     directory <filename>/boot/s390x</filename> on DVD&nbsp;1 of the
     &productname; for IBM &zseries; available by FTP within your network.
     From this directory, get the files <filename>vmrdr.ikr</filename>,
     <filename>initrd</filename>, <filename>parmfile</filename>, and
     <filename>sles11.exec</filename>. Transfer the files with a fixed block
     size of 80 characters. Specify it with the FTP command <command>locsite
     fix 80</command>. It is important to copy
     <filename>vmrdr.ikr</filename> (the Linux kernel) and
     <filename>initrd</filename> (the installation image) as binary files,
     so use the <literal>binary</literal> transfer mode.
     <filename>parmfile</filename> and <filename>sles11.exec</filename> need
     to be transferred in ASCII mode.
    </para>
    <para>
     The example shows the steps necessary. In this example, the required
     files are accessible from an FTP server at the IP address
     <literal>192.168.0.3</literal> and the login is
     <systemitem
      class="username">lininst</systemitem>. It may differ
     for your network.
    </para>
    <example id="ex.prep.ipling.vm.reader.ftp.ftptrans">
     <title>Transferring the Binaries via FTP</title>
<screen>FTP 192.168.0.3
VM TCP/IP FTP Level 530
Connecting to 192.168.0.3, port 21
220 ftpserver FTP server (Version wu-2.4.2-academ[BETA-18](1)
Thu Feb 11 16:09:02 GMT 2010) ready.
USER
lininst
331 Password required for lininst
PASS
******
230 User lininst logged in.
Command:
binary
200 Type set to I
Command:
locsite fix 80
Command:
get /media/dvd1/boot/s390x/vmrdr.ikr sles11.image
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/vmrdr.ikr
(6757376 bytes)
226 Transfer complete.
6757376 bytes transferred in 8.826 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/initrd sles11.initrd
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/initrd
(12654815 bytes)
226 Transfer complete.
12194534 bytes transferred in 16.520 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
ascii
200 Type set to A
Command:
get /media/dvd1/boot/s390x/parmfile sles11.parmfile
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/parmfile
(71 bytes)
226 Transfer complete.
71 bytes transferred in 0.092 seconds.
Transfer rate 0.71 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/sles11.exec sles11.exec
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/sles11.exec
(891 bytes)
226 Transfer complete.
891 bytes transferred in 0.097 seconds.
Transfer rate 0.89 Kbytes/sec.
Command:
quit</screen>
    </example>
    <para>
     Use the REXX script sles11.exec you just downloaded to IPL the Linux
     installation system. This script loads the kernel, parmfile, and the
     initial RAM disk into the reader for IPL.
    </para>
    <example id="sex.prep.ipling.vm.reader.startscript.slesexec">
     <title>SLES11 EXEC</title>
<screen>/* REXX LOAD EXEC FOR SUSE LINUX S/390 VM GUESTS       */
/* LOADS SUSE LINUX S/390 FILES INTO READER            */
SAY ''
SAY 'LOADING SLES11 FILES INTO READER...'
'CP CLOSE RDR'
'PURGE RDR ALL'
'SPOOL PUNCH * RDR'
'PUNCH SLES11 IMAGE A (NOH'
'PUNCH SLES11 PARMFILE A (NOH'
'PUNCH SLES11 INITRD A (NOH'
'I 00C'</screen>
    </example>
    <para>
     With this script you can IPL the &productname; installation system with
     the command <command>sles11</command>. The Linux kernel then starts and
     prints its boot messages.
    </para>
    <para>
     To continue the installation, proceed to
     <xref
      linkend="sec.prep.netcfg.vm"/>.
    </para>
   </sect4>
   <sect4>
    <title>IPL from FCP-Attached SCSI DVD</title>
    <para>
     To IPL in z/VM, prepare the SCSI IPL process by using the SET LOADDEV
     parameter:
    </para>
<screen>SET LOADDEV PORTNAME 200400E8 00D74E00 LUN 00020000 00000000 BOOT 2</screen>
    <para>
     After setting the LOADDEV parameter with the appropriate values, IPL
     your FCP adapter, for example:
    </para>
<screen>IPL FC00</screen>
    <para>
     To continue the installation, proceed with
     <xref
      linkend="sec.prep.netcfg.vm"/>.
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.vm.tape">
    <title>IPL from ESCON or FICON Attached tape</title>
    <para>
     If you cannot IPL from a z/VM reader, create a channel attached tape
     from which to IPL the &productname; installation image. For
     instructions, refer to <xref linkend="sec.prep.ipling.lpar.tape"/>.
    </para>
    <para>
     To continue the installation, proceed with
     <xref
       linkend="sec.prep.netcfg.vm"/>.
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.vm.zpxe">
    <title>IPL from a Cobbler Server with zPXE</title>
    <para>
     To IPL from a Cobbler server with zPXE you need to transfer the
     <filename>zpxe.exec</filename> script via FTP from the Cobbler server
     to your z/VM guest. The z/VM guest needs a working TCP/IP connection
     and an FTP client program.
    </para>
    <para>
     Log in as the z/VM Linux guest to IPL and transfer the script with a
     fixed size of 80 characters in ASCII mode (see
     <xref
     linkend="ex.prep.ipling.vm.reader.ftp.ftptrans"/> for an
     example). The <filename>zpxe.exec</filename> script is available on the
     Cobbler server at
     ftp://<replaceable>IP_OF_COBBLER_SERVER</replaceable>/<replaceable>zSERIES_INSTALLATION_DIRECTORY</replaceable>/boot/s390x/zpxe.exec.
     The exact location of
     <replaceable>zSERIES_INSTALLATION_DIRECTORY</replaceable> depends on
     where you imported the installation data on the Cobbler server (see
     <xref
     linkend="sec.prep.makeavail.zpxe_cobbler.import"/> for
     details).
    </para>
    <para>
     <filename>zpxe.exec</filename> is supposed to replace the
     <filename>PROFILE EXEC</filename> of your guest. Make a backup copy of
     the existing <filename>PROFILE EXEC</filename> and rename
     <filename>ZPXE EXEC</filename> to <filename>PROFILE EXEC</filename>.
     Alternatively call <filename>ZPXE EXEC</filename> from the existing
     <filename>PROFILE EXEC</filename> by using a new line with the
     following content: <literal>'ZPXE EXEC'</literal>.
    </para>
    <para>
     The last step is to create a configuration file, <filename>ZPXE
     CONF</filename>, telling <filename>ZPXE EXEC</filename> which Cobbler
     server to contact and which disk to IPL. Run <command>xedit zpxe conf
     a</command> and create <filename>ZPXE CONF</filename> with the
     following content (replace the example data accordingly):
    </para>
<screen>HOST cobbler.&exampledomain;
IPLDISK 600</screen>
    <para>
     On the next log in to your z/VM guest, the Cobbler server will be
     connected. If an installation is scheduled on the Cobbler server, it
     will be executed. To schedule the installation, run the following
     command on the Cobbler server:
    </para>
<screen>cobbler system edit --name <replaceable>ID</replaceable><co id="cobbler.sysedit.id"/> --netboot-enabled 1<co id="cobbler.sysedit.netboot"/> --profile <replaceable>PROFILENAME</replaceable><co id="cobbler.sysedit.profile"/></screen>
    <calloutlist>
     <callout arearefs="cobbler.sysedit.id">
      <para>
       z/VM user ID.
      </para>
     </callout>
     <callout arearefs="cobbler.sysedit.netboot">
      <para>
       Enable IPLing from the network.
      </para>
     </callout>
     <callout arearefs="cobbler.sysedit.profile">
      <para>
       Name of an existing profile, see
       <xref
       linkend="sec.prep.makeavail.zpxe_cobbler.profile"/>.
      </para>
     </callout>
    </calloutlist>
   </sect4>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.netcfg">
  <title>Network Configuration</title>
  <para></para><indexterm>
  <primary>LPAR installation</primary>
  <secondary>network configuration</secondary></indexterm><indexterm>
  <primary>network configuration</primary>
  <secondary>LPAR installation</secondary></indexterm>
  <para>
   Wait until the kernel has completed its start-up routines. If you are
   installing in basic mode or in an LPAR, open the <guimenu>Operating
   System Messages</guimenu> on the HMC or SE.
  </para>
  <para>
   First, choose <guimenu>Start Installation</guimenu> in the
   linuxrc main menu then <guimenu>Start Installation or Update</guimenu> to
   start the installation process. Select <guimenu>Network</guimenu> as your
   installation medium then select the type of network protocol you will be
   utilizing for the installation. <xref
   linkend="sec.prep.makeavail"/>
   describes how to make the installation data available for the various
   types of network connections. Currently, <guimenu>FTP</guimenu>,
   <guimenu>HTTP</guimenu>, <guimenu>NFS</guimenu>, and
   <guimenu>SMB/CIFS</guimenu> (Windows file sharing) are supported.
  </para>
  <para>
   Now set up the network device over which to receive the installation
   data: <guimenu>OSA-2 or OSA Express</guimenu> or
   <guimenu>HiperSockets</guimenu>. The following network adapters are still
   available and usable, but no longer supported: CTC, ESCON, IUCV. Next,
   choose the CCW bus interface and the physical medium
   (<guimenu>Ethernet</guimenu>). As a result, the respective driver is
   installed and you see the corresponding kernel messages.
  </para>
  <para>
   Proceeding with the installation, linuxrc displays a list of potential
   usable read, write, and, if applicable, data channels. After entering the
   addresses for each channel, you may also need to enter additional
   information, such as the port name for OSA ethernet cards.
  </para>
  <para>
   Next, decide whether to use DHCP autoconfiguration for setting up the
   network interface parameters. Because DHCP only works on a few devices
   and requires special hardware configuration settings, you probably want
   to say <guimenu>NO</guimenu> here. When you do so, you are prompted for
   the networking parameters of your installation network device:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     The IP address of the system to install
    </para>
   </listitem>
   <listitem>
    <para>
     The corresponding netmask
    </para>
   </listitem>
   <listitem>
    <para>
     The IP address of a gateway to reach the server
    </para>
   </listitem>
   <listitem>
    <para>
     The IP address of your domain name server (DNS)
    </para>
   </listitem>
  </itemizedlist>
  <para>
   When using an OSA Express Network Card you are now prompted for a
   <guimenu>relative port number</guimenu>. This was added to support the
   new 2 port OSA Express 3 Network devices. If you are not using an OSA
   Express 3 device, please enter <literal>0</literal>. OSA Express cards
   also have the option of running in an <quote>OSI layer 2 support</quote>
   mode or using the older more common <quote>layer 3</quote> mode. The card
   mode affects all systems that share the device including systems on other
   LPARs. If in doubt, please specify <literal>2</literal> for compatibility
   with the default mode used by other operating systems such as z/VM and
   z/OS. Consult with your hardware administrator for further information on
   these options.
  </para>
  <sect3 id="sec.prep.netcfg.vm">
   <title>z/VM Installation</title><indexterm>
   <primary>z/VM installation</primary>
   <secondary>network configuration</secondary></indexterm><indexterm>
   <primary>network configuration</primary>
   <secondary>z/VM installation</secondary></indexterm>
   <para>
    After the kernel has completed its start-up routines, answer a few
    questions regarding the network setup. First, select the type of network
    connection to use: OSA Express or HiperSockets. In this example
    installation, OSA Express is used.
   </para>
   <para>
    The system now displays a possible OSA configuration. Choose first
    whether to use QDIO or LCS OSA. Next, choose the physical medium to use
    and enter the device addresses. If you prefer another setup, enter the
    device address of the OSA read channel (0.0.0700 in this example) then
    the one of the OSA write channel (0.0.0701) and the OSA control channel
    (0.0.0702). After entering the channels, insert the name of the port to
    which the OSA card is connected.
   </para>
   <para>
    &productname; now tries to load the network module by building a
    parameter line with the information provided and displaying all loaded
    modules. Loading was successful if you get an output like:
   </para>
   <example id="ex.prep.netcfg.vm.param">
    <title>Network Device Driver Parameters</title>
<screen>(portname YSW2)
(Port 0)
qdio: 0.0.0702 OSA on SC 3 using AI:1 QEBSM:0 PCI:1 TDD:1 SIGA:RW AO
qeth.736dae: 0.0.0700: Device is a Guest LAN QDIO card (level: V540)
with link type GuestLAN QDIO (portname: YSW2)
qeth.47953b: 0.0.0700: Hardware IP fragmentation not supported on eth0
qeth.066069: 0.0.0700: Inbound source MAC-address not supported on eth0
qeth.d7fdb4: 0.0.0700: VLAN enabled
qeth.e90c78: 0.0.0700: Multicast enabled
qeth.5a9d02: 0.0.0700: IPV6 enabled
qeth.184d8a: 0.0.0700: Broadcast enabled
qeth.dac2aa: 0.0.0700: Using SW checksumming on eth0.
qeth.9c4c89: 0.0.0700: Outbound TSO not supported on eth0
</screen>
   </example>
   <para>
    Next, enter your IP address, netmask, and default gateway. To install
    over iucv or ctc, enter additional information, like the the peer
    address (for a point-to-point adapter) or the port name.
   </para>
   <para>
    Finally, the IP address of the DNS server and the MTU size are
    requested. The MTU size should always match the one used by the network
    to which you are connecting.
   </para>
   <para>
    Now a summary is displayed. Confirm if your input is correct. Before the
    network is started, enter a password that is valid only during the
    installation. After having IPLed the installed system, enter the
    <emphasis>real</emphasis> root password.
   </para>
   <para>
    <remark>2014-05-26, ke: replace with 'ip addr' or 'ip link'</remark>
    With all basic parameters set up, the network is started. Check the
    output of ifconfig, which should contain two entries: a loopback (lo)
    connection and one connection (eth0, ctc0, escon0, iucv0, or hsi0) with
    correct settings.
   </para>
   <example id="ex.prep.netcfg.vm.ifconfig">
    <title>Example ifconfig</title>
<screen>/sbin/ifconfig eth0 : 
	Link encap:Ethernet  HWaddr 02:00:01:00:00:27  
        inet addr:192.168.0.1  Bcast:192.168.0.255  Mask:255.255.255.0
        inet6 addr: fe80::200:100:100:27/64 Scope:Link
        UP BROADCAST RUNNING MULTICAST  MTU:1492  Metric:1
        RX packets:0 errors:0 dropped:0 overruns:0 frame:0
        TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
        collisions:0 txqueuelen:1000 
        RX bytes:0 (0.0 Mb)  TX bytes:0 (0.0 Mb)</screen>
   </example>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.connect">
  <title>Connecting to the &productname; Installation System</title><indexterm>
  <primary>LPAR installation</primary>
  <secondary>connecting to the installation system</secondary></indexterm><indexterm>
  <primary>connecting to the installation system</primary>
  <secondary>LPAR Installation</secondary></indexterm><indexterm>
  <primary>z/VM installation</primary>
  <secondary>connecting to the installation system</secondary></indexterm><indexterm>
  <primary>connecting to the installation system</primary>
  <secondary>z/VM Installation</secondary></indexterm>
  <para>
   After setting up your network connection, linuxrc prompts for the details
   of the installation source chosen earlier in the process, for example,
   the server IP address and the directory in which the data is located.
  </para>
  <para>
   Finally, linuxrc wants to know what type of display you want to use to
   control the installation procedure. Possible choices are
   <literal>X11</literal> (X Window System), <literal>VNC</literal> (Virtual
   Network Computing protocol), <literal>SSH</literal> (text mode or X11
   installation via Secure Shell), or <literal>ASCII Console</literal>.
  </para>
  <para>
   When choosing the latter (<literal>ASCII Console</literal>), &yast; will
   be started in text mode and you can perform the installation directly
   within your terminal. See <xref linkend="cha.yast.text"/> for usage
   instructions.
  </para>
  <note>
   <title>Terminal Emulation for ASCII Console</title>
   <para>
    In order to be able to work with &yast; in text mode, it needs to run in
    a terminal with VT220/Linux emulation (also referred to as
    <literal>ASCII console</literal>). You will not be able to use &yast; in
    a 3270 terminal, for example.
   </para>
  </note>
  <sect3 id="sec.inst.connect.vnc_inst">
   <title>Initiating the Installation for VNC</title><indexterm>
   <primary>VNC</primary>
   <secondary>initiating the installation</secondary></indexterm>
   <procedure>
    <step>
     <para>
      After the installation option <literal>VNC</literal> has been chosen,
      the VNC server starts. A short note displayed in the console provides
      information about which IP address and display number is needed for a
      connection with vncviewer. Alternatively, a URL is given here for
      entry into your Java-enabled browser to connect to the installation
      system.
     </para>
    </step>
    <step>
     <para>
      Start a VNC client application on your client system. Either use
      vncviewer or the VNC Java client and a Java-enabled Web browser.
     </para>
    </step>
    <step>
     <para>
      Enter the IP address and the display number of the &productname;
      installation system when prompted to do so.
     </para>
     <para>
      If you connect via a Java-enabled browser, enter a URL containing the
      IP address of the installation system and the appropriate port number
      in the format:
     </para>
<screen>http://&lt;IP address of installation system&gt;:5801/</screen>
    </step>
    <step>
     <para>
      After the connection has been established, start installing
      &productname; with &yast;.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 id="sec.inst.connect.x">
   <title>Initiating the Installation for the X Window System</title><indexterm>
   <primary>X</primary>
   <secondary>initiating the installation</secondary></indexterm>
   <important>
    <title>X Authentication Mechanism</title>
    <para>
     The direct installation with the X Window System relies on a primitive
     authentication mechanism based on hostnames. This mechanism is disabled
     on current &productname; versions. Installation with SSH or VNC is
     preferred.
    </para>
   </important>
   <procedure>
    <step>
     <para>
      Make sure that the X server allows the client (the system that is
      installed) to connect. Set the variable
      <command>DISPLAYMANAGER_XSERVER_TCP_PORT_6000_OPEN="yes"</command> in
      the file <filename>/etc/sysconfig/displaymanager</filename>. Then
      restart the X server and allow client binding to the server using
      <command>xhost &lt;client IP address&gt;</command>.
     </para>
    </step>
    <step>
     <para>
      When prompted at the installation system, enter the IP address of the
      machine running the X server.
     </para>
    </step>
    <step>
     <para>
      Wait until &yast; opens then start the installation.
     </para>
    </step>
   </procedure>
  </sect3>
<?dbfo-need height="20em"?>
  <sect3 id="sec.inst.connect.ssh">
   <title>Initiating the Installation for SSH</title><indexterm>
   <primary>ssh</primary>
   <secondary>initiating the installation</secondary></indexterm>
   <para>
    To connect to an installation system with the name &exampleclient; using
    SSH, execute <command>ssh -X &exampleclient;</command>. If your
    workstation runs on Microsoft Windows, use the ssh and telnet client and
    terminal emulator putty, which is available from
    <ulink
     url="http://www.chiark.greenend.org.uk/~sgtatham/putty/"/>.
    Set <guimenu>Enable X11 forwarding</guimenu> in putty under <menuchoice>
    <guimenu>Connection</guimenu> <guimenu>SSH</guimenu>
    <guimenu>X11</guimenu> </menuchoice>.
   </para>
   <para>
    A login prompt appears. Enter <literal>root</literal> and log in with
    your password. Enter <command>yast2</command> to start &yast;.
   </para>
   <para>
    Proceed with the detailed description of the installation procedure that
    can be found in <xref linkend="cha.inst"/>.
   </para>
  </sect3>
 </sect2>
</sect1>
