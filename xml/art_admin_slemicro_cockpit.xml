<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
                 type="text/xml"
                 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>
<article version="5.2" xml:id="article-cockpit-slemicro" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Cockpit Guide</title>
 <info>
  <productnumber>&productnumber;</productnumber>
  <productname>&productname;</productname>
  <date><?dbtimestamp format="B d, Y"?></date>
  <meta name="task" its:translate="no">
   <phrase>Administration</phrase>
  </meta>
  <meta name="series" its:translate="no">Product Documentation</meta>

  <abstract>
   <para>
    This guide describes the administration of &slem; using Cockpit.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <section xml:id="sec-about-cockpit">
  <title>About Cockpit</title>
  <para>
   Cockpit is a web-based graphical interface that enables you to manage most
   of the administration tasks from one place by using plugins. You do not need
   to create credentials for Cockpit as, by default, Cockpit uses the same
   credentials that you use to log in to your server. Cockpit uses APIs that
   already exist on the system without adding a layer to the system.
  </para>
  <para>
   Cockpit enables you to perform the following tasks:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     download container images and run containers
    </para>
   </listitem>
   <listitem>
    <para>
     update the server
    </para>
   </listitem>
   <listitem>
    <para>
     manage the server storage
    </para>
   </listitem>
   <listitem>
    <para>
     inspect and change network settings
    </para>
   </listitem>
   <listitem>
    <para>
     manage user accounts
    </para>
   </listitem>
   <listitem>
    <para>
     view system logs
    </para>
   </listitem>
   <listitem>
    <para>
     create and administer virtual machines
    </para>
   </listitem>
   <listitem>
    <para>
     inspect and interact with &systemd; services
    </para>
   </listitem>
   <listitem>
    <para>
     switch between SELinux modes
    </para>
   </listitem>
   <listitem>
    <para>
     use a terminal on a remote server in your web browser
    </para>
   </listitem>
  </itemizedlist>
 </section>
 <section xml:id="sec-admin-cockpit">
  <title>Getting Cockpit</title>
  <para>
   Cockpit is included in the delivered pre-built images, or can be installed
   if you are installing your own instances manually. For details regarding the
   manual installation, refer to <xref linkend="sec-settings-software"/>.
  </para>
  <para>
   Though Cockpit is present in the pre-built images by default, the plugin for
   administration of virtual machines needs to be installed manually. You can
   do so by installing the <literal>microos-cockpit</literal> pattern as
   described below. You can also use the following command in case Cockpit is not
   installed on your system.
  </para>
<screen>&prompt.root;transactional-update pkg install -t pattern microos-cockpit</screen>
  <para>
   Reboot your machine to switch to the latest snapshot.
  </para>
  <note>
   <title>Cockpit's plugins installed from the <literal>microos-cockpit</literal> pattern may differ according to technologies installed on your system</title>
   <para>
    The plugin <literal>Podman containers</literal> is installed only if the
    <emphasis>Containers Runtime for non-clustered systems</emphasis> patterns
    are installed on your system. Similarly, the <literal>Virtual
    Machines</literal> plugin is installed only if the <emphasis>KVM
    Virtualization Host</emphasis> pattern is installed on your system.
   </para>
  </note>
  <para>
   If the Cockpit instance is intended to serve as a primary one, you need to
   enable the Cockpit socket in &systemd; by running:
  </para>
<screen>&prompt.root;systemctl enable --now cockpit.socket</screen>
  <para>
   After running the command, the server will expose the default
   <emphasis>9090</emphasis> port. &systemd; will start the
   <literal>cockpit-ws</literal> service that listens on the 9090 port.
  </para>
  <para>
   In case you have enabled the firewall, you must also open the firewall for
   Cockpit as follows:
  </para>
<screen>&prompt.root;firewall-cmd --permanent --zone=public --add-service=cockpit</screen>
  <para>
   And then reload the firewall configuration by running:
  </para>
<screen>&prompt.root;firewall-cmd --reload</screen>
  <para>
   Now you can access the Cockpit web interface by opening the following
   address in your web browser:
  </para>
<screen>https://<replaceable>IP_ADDRESS_OF_MACHINE</replaceable>:9090</screen>
 </section>
 <section xml:id="sec-cockpit-authentication">
  <title>Cockpit authentication</title>
  <section xml:id="sec-authentication-login">
   <title>Authentication</title>
   <para>
    Cockpit enables you to log in directly to each machine that can expose the
    9090 port. If the port cannot be accessed on the particular machine, you
    can still use Cockpit to administer the machine by using it as a secondary
    server. For a procedure of adding a server as secondary, refer to
    <xref linkend="sec-adding-servers"/>.
   </para>
   <note>
    <title>A limited number of secondary servers</title>
    <para>
     The number of secondary servers that you can administer from one primary
     server is limited to 20. If you need to administer more servers, add
     other primary servers or use another tool for cluster administration.
    </para>
   </note>
   <para>
    To log in to the primary server, enter your credentials on the Cockpit
    login page. To log in to secondary servers, there are two options. You can
    access secondary machines after logging in to the primary server, or you can
    access a secondary machine using the <guimenu>Connect to</guimenu> field on
    the login page.
   </para>
   <section xml:id="sec-adding-servers">
    <title>Adding secondary servers</title>
    <para>
     To add a server as secondary, proceed as follows:
    </para>
    <procedure>
     <step>
      <para>
       Log in to the primary server using the account with the <emphasis>system
       administrator</emphasis> role.
      </para>
     </step>
     <step>
      <para>
       Click on the
       <replaceable>USERNAME</replaceable>@<replaceable>HOSTNAME</replaceable>
       in the upper-left corner.
      </para>
     </step>
     <step>
      <para>
       Click <guimenu>Add new host</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Fill in the host identification and optionally user name that will be
       used to log in to the server. You can assign a color to the machine.
       When the details are complete, click <guimenu>Add</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Verify a fingerprint on the server you want to add. If the fingerprint
       matches or if you have not set up the SSH connection, click
       <guimenu>Accept and connect</guimenu> to proceed.
      </para>
     </step>
     <step>
      <para>
       Fill in the password and, if needed, check <guimenu>Automatic
       login</guimenu>. Cockpit will generate a new SSH key for the user and
       next time you will be logged in automatically.
      </para>
     </step>
    </procedure>
   </section>
   <section xml:id="sec-secondary-direct">
    <title>Logging into secondary servers directly</title>
    <para>
     You can log in to any secondary server without logging in to the primary
     server first. This solution can be useful when you do not have credentials
     for the primary server. The primary server will be used as a bridge, and
     you will be connected to the secondary server using SSH.
    </para>
    <para>
     To connect to the secondary server, expand <guimenu>Other
     options</guimenu> on the login screen of the primary server. Fill in you
     user name, password and the IP address of the secondary server. If you are
     trying to log in for the first time, you are asked to verify the
     fingerprint. After this, click <guimenu>Accept and connect</guimenu>.
    </para>
   </section>
  </section>
 </section>
 <section xml:id="sec-overview">
  <title>System overview</title>
  <para>
   The <guimenu>Overview</guimenu> page provides information about the health
   of your server, CPU and memory usage and also hardware details. On this page,
   you can also change the host name, configure the system time and view SSH
   keys.
  </para>
  <figure xml:id="fig-cockpit-overview">
   <title>System overview</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_overview.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_overview.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>Cockpit overview</phrase>
    </textobject>
   </mediaobject>
  </figure>
  <para>
   The <guimenu>Health</guimenu> part displays if your system is up to date or
   if there are any updates to install. Clicking the displayed statement takes
   you to <guimenu>Software Updates</guimenu>. For details, refer to
   <xref linkend="sec-cockpit-updates"/>.
  </para>
  <para>
   The <guimenu>Usage</guimenu> part displays CPU and memory usage. For detailed
   performance metrics, click <guimenu>View details and history</guimenu>.
   Clicking on mount points in <guimenu>Disks</guimenu> takes you to
   <xref linkend="sec-cockpit-storage" xrefstyle="template:Storage"/>.
   Clicking on a particular service opens the service details under
   <xref linkend="sec-cockpit-services" xrefstyle="template:Services"/>.
  </para>
  <para>
   In the <guimenu>Configuration</guimenu> part, you can perform the following
   tasks:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     change the host name by clicking <guimenu>edit</guimenu> and entering the
     required host name
    </para>
   </listitem>
   <listitem>
    <para>
     change the system time by clicking on the date and time value. In the
     popup window, select a time zone or set the time, either manually or by
     synchronizing it with an NTP server.
    </para>
   </listitem>
   <listitem>
    <para>
     view your SSH keys by clicking <guimenu>Show fingerprints</guimenu>
    </para>
   </listitem>
  </itemizedlist>
 </section>
 <section xml:id="sec-cockpit-logs">
  <title>&slema; logs</title>
  <para>
   After clicking <guimenu>Logs</guimenu>, Cockpit enables you to view logs on
   your system. You can filter the logs according to the following criteria:
  </para>
  <variablelist>
   <varlistentry>
    <term>Time</term>
    <listitem>
     <para>
      to filter the logs according to a specific time, you can choose from the
      following values:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        <emphasis>Current boot</emphasis>
       </para>
      </listitem>
      <listitem>
       <para>
        <emphasis>Previous boot</emphasis>
       </para>
      </listitem>
      <listitem>
       <para>
        <emphasis>Last 24 hours</emphasis>
       </para>
      </listitem>
      <listitem>
       <para>
        <emphasis>Last 7 days</emphasis>
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Priority</term>
    <listitem>
     <para>
      The standard <command>syslog</command> severity levels are used (sorted
      from most to least severe):
     </para>
     <variablelist>
      <varlistentry>
       <term>Only emergency</term>
       <listitem>
        <para>
         The system is unusable. This is a panic condition.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Alert and above</term>
       <listitem>
        <para>
         This log requires your immediate action.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Critical and above</term>
       <listitem>
        <para>
         Failures in primary systems. You should correct the problem
         immediately.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Error and above</term>
       <listitem>
        <para>
         Not an urgent error but should be handled within a specific time.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Warning and above</term>
       <listitem>
        <para>
         Not an error but indicates that an error might occur if no action is
         taken.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Notice and above</term>
       <listitem>
        <para>
         Unusual events that are not errors. No immediate actions are required.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Info and above</term>
       <listitem>
        <para>
         Normal operational messages that serve as a confirmation that the
         system is working properly.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Debug and above</term>
       <listitem>
        <para>
         These messages are used just to debug the system.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Identifier</term>
    <listitem>
     <para>
      You can filter logs for a particular service, daemon or process.
      Available identifiers are parsed from the logs currently displayed
      according to the set filters.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Filters</term>
    <listitem>
     <para>
      You can refine the logs view here according to the following criteria:
     </para>
     <variablelist>
      <varlistentry>
       <term>Since</term>
       <listitem>
        <para>
         Logs on the specified date or newer will be displayed. You can specify
         the time the following way:
        </para>
        <itemizedlist>
         <listitem>
          <para>
           using the absolute date in the format
           <emphasis>YYYY-MM-DD</emphasis>
          </para>
         </listitem>
         <listitem>
          <para>
           using any of the terms: <literal>yesterday</literal>,
           <literal>today</literal>, <literal>tomorrow</literal> and
           <literal>now</literal>
          </para>
         </listitem>
         <listitem>
          <para>
           using relative time by prefixing the value with - or + and
           specifying units. You can use the following units:
           <literal>seconds</literal> or <literal>s</literal>,
           <literal>minutes</literal> or <literal>min</literal>,
           <literal>hours</literal> or <literal>h</literal>,
           <literal>days</literal> or <literal>d</literal>,
           <literal>weeks</literal> or <literal>w</literal>,
           <literal>months</literal> or <literal>m</literal>, and
           <literal>years</literal> or <literal>y</literal>.
          </para>
         </listitem>
        </itemizedlist>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Until</term>
       <listitem>
        <para>
         Logs on the specified date or older will be displayed. You can specify
         the time the following way:
        </para>
        <itemizedlist>
         <listitem>
          <para>
           using the absolute date in the format
           <emphasis>YYYY-MM-DD</emphasis>
          </para>
         </listitem>
         <listitem>
          <para>
           using any of the terms: <literal>yesterday</literal>,
           <literal>today</literal>, <literal>tomorrow</literal> and
           <literal>now</literal>
          </para>
         </listitem>
         <listitem>
          <para>
           using relative time by prefixing the value with - or + and
           specifying units. You can use the following units:
           <literal>seconds</literal> or <literal>s</literal>,
           <literal>minutes</literal> or <literal>min</literal>,
           <literal>hours</literal> or <literal>h</literal>,
           <literal>days</literal> or <literal>d</literal>,
           <literal>weeks</literal> or <literal>w</literal>,
           <literal>months</literal> or <literal>m</literal>, and
           <literal>years</literal> or <literal>y</literal>.
          </para>
         </listitem>
        </itemizedlist>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Boot</term>
       <listitem>
        <para>
         Enter an integer: 0 means the current boot, -1 is for the previous
         boot, 1 for the first boot, 2 for the second, etc.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Unit</term>
       <listitem>
        <para>
         Specify a &systemd; unit which logs you want to display. Use one of
         the formats:
        </para>
        <itemizedlist>
         <listitem>
          <para>
           <literal>_SYSTEMD_UNIT=<replaceable>NAME</replaceable>.service</literal>
          </para>
         </listitem>
         <listitem>
          <para>
           <literal>COREDUMP_UNIT=<replaceable>NAME</replaceable>.service</literal>
          </para>
         </listitem>
         <listitem>
          <para>
           <literal>UNIT=<replaceable>NAME</replaceable>.service</literal>
          </para>
         </listitem>
        </itemizedlist>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>Free-form search</term>
       <listitem>
        <para>
         Enter a string that you want to find in the log messages. You can also
         use
         <link xlink:href="https://www.freedesktop.org/software/systemd/man/journalctl.html#-g">PERL-compatible
         regular expressions</link>. Alternatively, you can filter messages
         according to message log fields in the format
         <replaceable>FIELD=VALUE</replaceable>, for example,
         <literal>CODE_LINE=349</literal> displays logs with this value.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </listitem>
   </varlistentry>
  </variablelist>
 </section>
 <section xml:id="sec-cockpit-storage">
  <title>Managing storage</title>
  <para>
   The <guimenu>Storage</guimenu> page enables you to monitor traffic on your
   drives, repartition your system, view storage logs and create RAIDs or LVM.
  </para>
  <figure xml:id="fig-storage">
   <title>Storage view</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_storage_view.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_storage_view.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>Cockpit storage</phrase>
    </textobject>
   </mediaobject>
  </figure>
  <section xml:id="sec-dataflow-monitoring">
   <title>Monitoring data flow on disks</title>
   <para>
    The graphs on the <guimenu>Storage</guimenu> page display reading and
    writing data flow to devices. Each device in the graph has a different
    color. Hover over the displayed data flow peak to identify the device name.
   </para>
   <figure xml:id="fig-storage-dataflow">
    <title>Data flow view</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_dataflow_view.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_dataflow_view.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Cockpit storage</phrase>
     </textobject>
    </mediaobject>
   </figure>
  </section>
  <section xml:id="sec-disk-formatting">
   <title>Managing file systems</title>
   <para>
    The <guimenu>Filesystems</guimenu> view enables you to create a partition
    table and to format or mount file systems. You can sort the mounted
    partition according to <guimenu>Name</guimenu> or <guimenu>Mount
    point</guimenu>. Click on the particular file system to open the details
    window.
   </para>
   <figure xml:id="fig-storage-filesystems">
    <title>File systems details</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_filesystems.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_filesystems.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Cockpit storage</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <para>
    To format the partition, click <guimenu>Format</guimenu> next to the
    particular partition description to open the format window.
   </para>
   <figure xml:id="fig-formatting-partitions">
    <title>Formatting partitions</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_format_partitions.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_format_partitions.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Format partition</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <para>
    You can specify the following details:
   </para>
   <variablelist xml:id="list-format-partition">
    <title>Formatting partitions parameters</title>
    <varlistentry>
     <term>Name</term>
     <listitem>
      <para>
       Enter a unique name of the partition.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Type</term>
     <listitem>
      <para>
       Select the file system. BTRFS is mandatory for the <literal>/</literal>
       partition.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Mount point</term>
     <listitem>
      <para>
       This is a mandatory option. Specify to which directory the partition
       will be mounted.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Mount options</term>
     <listitem>
      <para>
       In the <guimenu>Custom mount options</guimenu> text field, you can enter
       a comma-separated list of options. For common options, refer to
       <link xlink:href="https://linux.die.net/man/8/mount">File system
       Independent Mount Options</link>. Those options are used in the
       <literal>options</literal> part of the <filename>/etc/fstab</filename>
       file.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Encryption</term>
     <listitem>
      <para>
       Select the encryption method or do not encrypt the partition. If you
       choose any of the encryption methods, the following fields appear:
      </para>
      <variablelist>
       <varlistentry>
        <term>Passphrase and Confirm</term>
        <listitem>
         <para>
          Enter a passphrase to unlock the encrypted partition.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>Store passphrase</term>
        <listitem>
         <para>
          The passphrase is stored in <filename>/etc/luks-keys</filename> and
          you are not asked for the passphrase on next boot.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>Custom encryption options</term>
        <listitem>
         <para>
          You can pass a list of options described in
          <link xlink:href="https://www.man7.org/linux/man-pages/man5/crypttab.5.html#SUPPORTED_OPTIONS">supported
          encrypted options</link>.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    After you specify all required details, click <guimenu>Format</guimenu> to
    proceed.
   </para>
   <para>
    If a partition is already formatted, you can mount it by clicking
    <guimenu>Mount</guimenu>. Here you can change the mount point and mount
    options. To proceed, click <guimenu>Mount</guimenu>.
   </para>
  </section>
  <section xml:id="sec-managing-nffs">
    <title>Managing NFS mount points</title>
    <para>
      Use the <guimenu>Storage</guimenu> view to add, edit or delete NFS mounts.
    </para>
    <para>
      To add an NFS mount point, after clicking on the plus icon, specify the following details:
      </para>
    <variablelist xml:id="var-nfs-mount-details">
      <title>NFS mount details</title>
      <varlistentry>
      <term>Server address</term>
      <listitem>
        <para>
          Provide the IP address or name of the NFS server.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>Path on server</term>
      <listitem>
        <para>
          Select the available path on the NFS server that can be mounted.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>Local mount point</term>
      <listitem>
        <para>
          Specify a directory on the local system where the path will be mounted to.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>Mount options</term>
      <listitem>
        <para>
          Check any of the options:
        </para>
        <itemizedlist>
          <listitem>
            <para>
              <guimenu>Mount at boot</guimenu> &ndash; to mount the path automatically after each system start or restart.
            </para>
          </listitem>
          <listitem>
            <para>
              <guimenu>Mount read only</guimenu> &ndash; you will not be able to perform changes to the data on the NFS path.
            </para>
          </listitem>
          <listitem>
            <para>
              <guimenu>Custom mount options</guimenu> is a comma-separated list of the <command>mount</command> command options.
            </para>
          </listitem>
        </itemizedlist>
      </listitem>
    </varlistentry>
    </variablelist>
  
  <para>
    To edit an NFS mount, click on the particular NFS mount. On the next screen, click <guimenu>Edit</guimenu> and specify the details described in <xref linkend="var-nfs-mount-details"/>.
  </para>
  </section>
  <section xml:id="sec-cockpit-devices">
   <title>Software RAID management</title>
   <para>
    The <guimenu>Devices</guimenu> view enables you to add or manage RAIDs.
   </para>
   <section xml:id="sec-raid-creating">
    <title>Creating RAIDs</title>
    <para>
     You can create RAIDs of different levels on your system from the
     <guimenu>Devices</guimenu> part by selecting the <guimenu>Create RAID
     device</guimenu> option in the hamburger menu.
    </para>
    <figure xml:id="fig-creating-raid">
     <title>Creating RAID device</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata  fileref="cockpit_creating_raid.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_creating_raid.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>Cockpit storage</phrase>
      </textobject>
     </mediaobject>
    </figure>
    <para>
     Enter the following parameters of the RAID:
    </para>
    <variablelist>
     <varlistentry>
      <term>Name</term>
      <listitem>
       <para>
        Enter a unique name of the RAID.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>RAID level</term>
      <listitem>
       <para>
        Select one of the following RAID levels:
       </para>
       <variablelist>
        <varlistentry>
         <term>RAID 0</term>
         <listitem>
          <para>
           has the data split evenly to two or more disks. Such a solution
           provides higher performance because you can read data from several
           disks simultaneously, but does not provide any fault tolerance. You
           need to have at least 2 disks.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>RAID 1</term>
         <listitem>
          <para>
           is a mirror. Data are kept in exact copies on several disks. If
           there is a failure on one disk, you can use data on another disk.
           Typically, this RAID level uses 2 disks.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>RAID 4</term>
         <listitem>
          <para>
           provides striping and a dedicated disk for parity. You need to have
           at least 3 disks.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>RAID 5</term>
         <listitem>
          <para>
           provides striping, the parity data are distributed on all disks. The
           minimum number of disks is 3.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>RAID 6</term>
         <listitem>
          <para>
           provides striping and two parity blocks distributed across disks.
           The minimum number of disks is 4.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>RAID 10</term>
         <listitem>
          <para>
           is a combination of striping and mirroring. Each stripe is mirrored
           to another disk. The minimum number of disks is 4.
          </para>
         </listitem>
        </varlistentry>
       </variablelist>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Chunk size</term>
      <listitem>
       <para>
        The size of chunks. A chunk is the minimum amount of data read or
        written to each data disk in the array during a single read/write
        operation.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Disks</term>
      <listitem>
       <para>
        Select the disks that should be included in the RAID. The required
        number of disks depends on the selected RAID level.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>
     Confirm the parameters by clicking <guimenu>Create</guimenu>. The RAID
     then appears in the <guimenu>Devices</guimenu> part.
    </para>
   </section>
   <section xml:id="sec-modifying-raids">
    <title>Modifying RAIDS</title>
    <para>
     Click the RAID in <guimenu>Devices</guimenu> to open the RAID details
     view. In the detailed view, you can stop or delete the RAID, add or remove
     disks and format the device.
    </para>
    <figure xml:id="fig-raid-details">
     <title>RAID details</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata  fileref="cockpit_raid_details.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_raid_details.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>RAID details</phrase>
      </textobject>
     </mediaobject>
    </figure>
    <para>
     With some RAID levels, you can switch on the <guimenu>Bitmap</guimenu>
     option that enables you to synchronize only the changes after a disk is
     temporarily disconnected. If the <guimenu>Bitmap</guimenu> is off, all
     data on the disk will be synchronized.
    </para>
    <para>
     You can remove and add disks in the <guimenu>Disks</guimenu> part. After
     any change to the array, the system undergoes resynchronization that
     might take some time. Keep in mind that each RAID level requires a
     minimum number of disks, therefore, Cockpit does not allow removing
     the disks that are required by the particular RAID level.
    </para>
    <para>
     The <guimenu>Content</guimenu> view enables you to create a partition
     table (either MBR or GPT), format the disks and mount the RAID.
    </para>
   </section>
  </section>
  <section xml:id="sec-volume-group">
   <title>Logical volume management</title>
   <para>
    Using Cockpit, you can create thinly provisioned logical volumes or
    logical block devices. To do so, create a volume group of disks by
    selecting <guimenu>Create volume group</guimenu> in the hamburger menu in
    <guimenu>Devices</guimenu>.
   </para>
   <figure xml:id="fig-volume-groups">
    <title>Creating a volume group</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_volume_groups.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_volume_groups.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Volume group</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <para>
    Enter the volume group name and select disks that will be part of the
    volume group. Confirm the data with <guimenu>Create</guimenu>. The volume
    group appears in the <guimenu>Devices</guimenu> view. Now you can create a
    logical volume (either a block device or a pool of thinly provisioned
    volumes). To create a logical volume, proceed as follows:
   </para>
   <procedure xml:id="proc-cockpit-block">
    <title>Creating a logical volume</title>
    <step>
     <para>
      Click on the volume group in <guimenu>Devices</guimenu>.
     </para>
    </step>
    <step>
     <para>
      In the volume group details, click <guimenu>Create new logical
      volume</guimenu>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata  fileref="cockpit_logical_volume.png" width="100%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="cockpit_logical_volume.png" width="100%"/>
       </imageobject>
       <textobject role="description"><phrase>Cockpit logical volume</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Specify a logical volume name, select either a block device or a pool of
      thinly provisioned volumes and select the size to use.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>Create</guimenu> to confirm the details.
     </para>
    </step>
   </procedure>
   <para>
    If you created a block logical volume, you need to format the volume by
    clicking <guimenu>Format</guimenu> and filling the details as described in
    <xref linkend="list-format-partition"/>.
   </para>
   <para>
    If you created a pool of thinly provisioned volumes, you can create a thin
    volume by clicking <guimenu>Create thin volume</guimenu>.
   </para>
   <figure xml:id="fig-thinly-volumes">
    <title>Creating a thinly provisioned volume</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_thin_volumes.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_thin_volumes.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Volume thin</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <para>
    Enter a unique name, select the size of the volume, and confirm by clicking
    <guimenu>Create</guimenu>. You can create several volumes of the particular
    volume group by clicking <guimenu>Create thin volume</guimenu> again.
    Format the volumes by clicking <guimenu>Format</guimenu> and filling the
    details as described in <xref linkend="list-format-partition"/>.
   </para>
   <para>
    Other actions on a particular volume are available in the three dots menu:
    <guimenu>Deactivate</guimenu>, <guimenu>Create snapshot</guimenu> or
    <guimenu>Delete</guimenu>.
   </para>
   <para>
    Shrinking or growing a volume is available by clicking on
    <guimenu>Shrink</guimenu> or <guimenu>Grow</guimenu> in the particular
    volume details. These features are not available for all file systems and
    volume types.
   </para>
  </section>
 </section>
 <section xml:id="sec-cockpit-networking">
  <title>Managing networking</title>
  <para>
   After clicking <guimenu>Networking</guimenu>, you can view traffic on your
   system, manage firewall, manage network interfaces or view network logs.
  </para>
  <figure xml:id="fig-networking">
   <title>Networking</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_networking_plugin.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_networking_plugin.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>Cockpit networking</phrase>
    </textobject>
   </mediaobject>
  </figure>
  <section xml:id="sec-networking-firewall">
   <title>Firewall</title>
   <important>
    <title>Firewall and Podman</title>
    <para>
     Using firewall along with Podman may result in missing Podman-related
     firewall rules after reloading the firewalld service. Therefore, it is
     recommended to keep the firewall in its default setting (disabled) if you
     intend to use Podman.
    </para>
   </important>
   <note>
    <title>The <literal>cockpit</literal> service is not included in the <guimenu>public zone</guimenu></title>
    <para>
     If you turn on the firewall, add the <literal>cockpit</literal> service to
     the <guimenu>public zone</guimenu>, otherwise the Cockpit web UI might get
     disconnected.
    </para>
   </note>
   <para>
    The <guimenu>Firewall</guimenu> view enables you turn on the firewall,
    which is off by default. After turning it on, you can edit firewall rules
    and zones by clicking <guimenu>Edit rules and zones</guimenu>.
   </para>
   <figure xml:id="fig-firewall">
    <title>Firewall settings</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_firewall_settings.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_firewall_settings.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Cockpit firewall</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <para>
    To add a service to an existing zone, click <guimenu>Add
    services</guimenu>. Then select a service from the list and confirm with
    <guimenu>Add services</guimenu>.
   </para>
   <para>
    If you need to define a zone on top of the currently available zones, click
    <guimenu>Add zone</guimenu>. In the <guimenu>Add zone</guimenu> window,
    select <guimenu>Trust level</guimenu>. Each trust level of network
    connections has a predefined set of included services (the Cockpit service
    is included in all trust levels). You can also allow addresses from the
    entire subnet within the particular trust level, or you can define a
    specific range of allowed IP addresses as a comma-separated list.
   </para>
   <figure xml:id="fig-firewall-zones">
    <title>Add firewall zone</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_firewall_zones.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_firewall_zones.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Cockpit firewall</phrase>
     </textobject>
    </mediaobject>
   </figure>
  </section>
  <section xml:id="sec-networking-interfaces">
   <title>Interfaces</title>
   <para>
    In the <guimenu>Interfaces</guimenu> part, you can add, modify or delete
    VLANs, bridges or bond interfaces.
   </para>
   <section xml:id="sec-networking-bridges">
    <title>Managing bonds</title>
    <para>
     A bond interface is a combination of several network interfaces into one
     bond. Depending on the <guimenu>Mode</guimenu> (described further),
     network bonding can increase performance by increasing the network
     throughput and bandwidth. Network bonding can also increase fault
     tolerance by keeping overall connectivity even if some of the bonded
     interfaces stopped working. To add a bond interface, click <guimenu>Add
     bond</guimenu>.
    </para>
    <figure xml:id="fig-adding-bond">
     <title>Adding a bond</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata  fileref="cockpit_adding_bond.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_adding_bond.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>Cockpit adding bond</phrase>
      </textobject>
     </mediaobject>
    </figure>
    <para>
     Specify the following parameters of the bond interface:
    </para>
    <variablelist>
     <varlistentry>
      <term>Name</term>
      <listitem>
       <para>
        Enter a unique name of the interface.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Interfaces</term>
      <listitem>
       <para>
        Select which network interfaces should be grouped in the bond.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>MAC</term>
      <listitem>
       <para>
        You can either select a specific MAC address of the underlying
        interface, or you can use any of the following options:
       </para>
       <variablelist>
        <varlistentry>
         <term>Permanent</term>
         <listitem>
          <para>
           Use the permanent hardware address if the device has a MAC address.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>Preserve</term>
         <listitem>
          <para>
           During the bond activation, the MAC address is not changed.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>Random</term>
         <listitem>
          <para>
           A random MAC address is created on each connection attempt.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>Stable</term>
         <listitem>
          <para>
           Creates a hashed MAC address.
          </para>
         </listitem>
        </varlistentry>
       </variablelist>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Mode</term>
      <listitem>
       <para>
        Keep the default mode or select any of the following modes:
       </para>
       <variablelist>
        <varlistentry>
         <term>Round Robin</term>
         <listitem>
          <para>
           Transfers packets from the first available interface to the last.
           The mode offers fault tolerance and load balancing.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>Active Backup</term>
         <listitem>
          <para>
           Only one interface in the bonding is active. If the active interface
           fails, the backup will be activated.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>Balance XOR</term>
         <listitem>
          <para>
           Balancing using a transmit hash policy. The default is a modulo
           device count. To select a different policy, specify the
           <literal>xmit_hash_policy</literal> option in the
           <guimenu>Option</guimenu> field.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>Broadcast</term>
         <listitem>
          <para>
           Everything is transmitted on all interfaces.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>802.3ad Dynamic Link Aggregation</term>
         <listitem>
          <para>
           Creates aggregation groups that share the same speed and duplex
           settings.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>Adaptive Transmit Load Balancing</term>
         <listitem>
          <para>
           A channel bonding that does not require any special switch
           support. The outgoing traffic is distributed according to the
           current load on each interface.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>Adaptive Load Balancing</term>
         <listitem>
          <para>
           Includes adaptive transmit load balancing and receive load
           balancing, no special switch support is required.
          </para>
         </listitem>
        </varlistentry>
       </variablelist>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Primary</term>
      <listitem>
       <para>
        This selection is available only for the <emphasis>Active
        Backup</emphasis> mode. You can select a particular interface that will
        be used as primary, while other interfaces in the bond are used as
        secondary.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Link monitoring</term>
      <listitem>
       <para>
        Select the type of link monitoring.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Monitoring interval</term>
      <listitem>
       <para>
        Specifies the intervals at which the particular link monitor performs
        checks. The value is in ms.
       </para>
      </listitem>
     </varlistentry>
     <!--
      <para>
      The following items depend on the selected link monitor.
      </para>
      -->
     <varlistentry>
      <term>Link up delay</term>
      <listitem>
       <para>
        Define the time in ms for how long the bond is disabled after a link has
        been activated. The value should be a multiple of the
        <guimenu>Monitoring interval</guimenu> value, otherwise it will be
        rounded to the nearest value. Available only for the MII link monitor.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Link down delay</term>
      <listitem>
       <para>
        Define the time in ms for how long the bond is disabled if a link failure
        has been detected. The value should be a multiple of the
        <guimenu>Monitoring interval</guimenu> value, otherwise it will be
        rounded to the nearest value. Available only for the MII link monitor.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Monitoring targets</term>
      <listitem>
       <para>
        Specify the list of host IP addresses that you want to monitor. Available
        only for the ARP link monitor.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>
     To modify or delete a bond interface, click on the particular bond name to
     open the details. There you can change the parameters of the bond
     described below.
    </para>
    <figure xml:id="fig-modifying-bond">
     <title>Modifying a bond</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata  fileref="cockpit_modifying_bond.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_modifying_bond.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>Cockpit modifying bond</phrase>
      </textobject>
     </mediaobject>
    </figure>
    <variablelist>
     <varlistentry>
      <term>Bond</term>
      <listitem>
       <para>
        Select a MAC address from the list.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Connect automatically</term>
      <listitem>
       <para>
        The bond connects automatically by default. Uncheck the box to disable
        the automatic connection.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>IPv4 and IPv6</term>
      <listitem>
       <para>
        After clicking <guimenu>edit</guimenu>, you can set an IP address and
        configure a specific DNS, DNS search domain and Routes.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>MTU</term>
      <listitem>
       <para>
        After clicking <guimenu>edit</guimenu>, you can specify a particular
        value of the maximum transmission unit in bytes.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Bond</term>
      <listitem>
       <para>
        After clicking <guimenu>edit</guimenu>, you can edit the same
        parameters as when you were creating the bond interface.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </section>
   <section xml:id="sec-managing-bridge">
    <title>Managing bridges</title>
    <para>
     A network bridge is a device that creates a single aggregated network from
     multiple networks. To create a bridge, click <guimenu>Add bridge</guimenu>.
    </para>
    <figure xml:id="fig-adding-bridge">
     <title>Adding a bridge</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata  fileref="cockpit_adding_bridge.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_adding_bridge.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>Cockpit adding bridge</phrase>
      </textobject>
     </mediaobject>
    </figure>
    <para>
     Specify the following:
    </para>
    <variablelist>
     <varlistentry>
      <term>Name</term>
      <listitem>
       <para>
        Specify a unique name of the bridge.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Ports</term>
      <listitem>
       <para>
        Select interfaces to be included in the bridge.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Spanning tree protocol (STP)</term>
      <listitem>
       <para>
        STP is a network protocol used for Ethernet networks that prevents
        bridge loops by setting a preferred link whenever network switches are
        connected with several links. This preferred link is used for all
        Ethernet traffic unless it fails. In that case, a redundant link is used
        instead. For details regarding STP, see
        <link xlink:href="https://en.wikipedia.org/wiki/Spanning_Tree_Protocol">STP</link>.
       </para>
       <para>
        If you enable the STP protocol, you can edit the following
        settings:
       </para>
       <variablelist>
        <varlistentry>
         <term>STP priority</term>
         <listitem>
          <para>
           the lower the priority, the higher the probability of the switch to
           become the root switch.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>STP forward delay</term>
         <listitem>
          <para>
           Specify the time spent in the listening and learning state (in
           seconds). The default value is 15&nbsp;s, but you can use any value
           between 4 and 30&nbsp;s.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>STP hello time</term>
         <listitem>
          <para>
           Specify the time between each bridge protocol data unit (BDPU) that
           is sent on a port (in seconds). The default value is 2&nbsp;s, but
           the recommended range is 1 to 10&nbsp;s.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term>STP maximum message age</term>
         <listitem>
          <para>
           Specify the maximum length of time that passes before a bridge port
           saves its configuration BPDU information.
          </para>
         </listitem>
        </varlistentry>
       </variablelist>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>
     To modify or delete a bridge, click the bridge name to open the details.
    </para>
    <figure xml:id="fig-modifying-bridge">
     <title>Modifying a bridge</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata  fileref="cockpit_modifying_bridge.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_modifying_bridge.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>Cockpit modifying bridge</phrase>
      </textobject>
     </mediaobject>
    </figure>
    <para>
     There you can edit the following details:
    </para>
    <variablelist>
     <varlistentry>
      <term>General</term>
      <listitem>
       <para>
        The bridge connects automatically by default. To disable the automatic
        connection, uncheck the option.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>IPv4 and IPv6</term>
      <listitem>
       <para>
        After clicking <guimenu>edit</guimenu>, you can set the IP address and
        configure a specific DNS, DNS search domain and Routes.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Bridge</term>
      <listitem>
       <para>
        By clicking <guimenu>edit</guimenu>, you can edit all parameters of the
        bridge.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </section>
   <section xml:id="sec-managing-vlan">
    <title>Managing VLANs</title>
    <para>
     A virtual local area network is a logical subnetwork that groups devices
     from different physical LANs.
    </para>
    <para>
     To create a VLAN, click <guimenu>Add VLAN</guimenu> and select the parent
     interface, assign an ID number and provide a name for the VLAN.
    </para>
    <figure xml:id="fig-adding-vlan">
     <title>Adding VLAN</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata  fileref="cockpit_adding_vlan.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_adding_vlan.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>Cockpit adding VLAN</phrase>
      </textobject>
     </mediaobject>
    </figure>
    <para>
     To modify or delete a VLAN, click the VLAN name.
    </para>
    <figure xml:id="fig-modifying-vlan">
     <title>Adding VLAN</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata  fileref="cockpit_modifying_vlan.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="cockpit_modifying_vlan.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>Cockpit adding VLAN</phrase>
      </textobject>
     </mediaobject>
    </figure>
   </section>
   <!-- Currently not available in 5.3
    <section xml:id="sec-networking-management">
    <title>Managing interfaces</title>
    <para>
    By default, the interfaces are started on boot and use DHCP to assign an IP address. However, you can configure an interface to start on other occasions and/or use a static IP address.
    </para>
    <para>
    The <guimenu>Interfaces</guimenu> view also enables you to delete an interface or disable it.
    </para>
    </section>
    </section>
    <section xml:id="sec-networking-routing">
    <title>Routing</title>
    <para>
    TBD
    </para>
    </section>
    <section xml:id="sec-networking-dns">
    <title>DNS</title>
    <para>
    TBD
    </para>
    </section>
    -->
  </section>
 </section>
 <section xml:id="sec-cockpit-containers">
  <title>Working with containers</title>
  <para>
   After the first login to Cockpit, you need to start Podman. Keep the default
   check box selected to start Podman automatically on each boot.
  </para>
  <para>
   The <guimenu>Podman containers</guimenu> page enables you to pull images
   from registries and manage your container. You can also filter the view by
   entering a filter criterion into the filter field.
  </para>
  <figure xml:id="fig-containers-view">
   <title>Containers</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata  fileref="cockpit_containers_view.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_containers_view.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>Cockpit containers</phrase>
    </textobject>
   </mediaobject>
  </figure>
  <section xml:id="sec-pulling-images">
   <title>Getting container images</title>
   <para>
    To start a container, you need a container image. Click <guimenu>Get new
    image</guimenu> to open a search box for images.
   </para>
   <para>
    In the search box:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      choose a preferred image registry or proceed with <literal>All
      registries</literal>
     </para>
    </listitem>
    <listitem>
     <para>
      define the <guimenu>Tag</guimenu>. The default value is
      <literal>latest</literal>
     </para>
    </listitem>
    <listitem>
     <para>
      fill in the image name or description
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Cockpit suggests possible images according to the entered name, registry
    and tag. Select the desired image and click <guimenu>Download</guimenu>.
   </para>
   <figure xml:id="fig-getting-images">
    <title>Getting images</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_getting_images.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_getting_images.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Podman getting images</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <note>
    <title>Adding custom registry</title>
    <para>
     &slema; comes with a predefined set of registries. If you need to use a
     custom registry, configure Cockpit to display them. Add the custom
     registry to the file <filename>/etc/containers/registries.conf</filename>
     to the <literal>registries</literal> list. For example, you can add
     <emphasis>registry.example</emphasis> to the list as follows:
    </para>
<screen>registries = ["registry.opensuse.org", "docker.io", "registry.example"]</screen>
   </note>
   <tip>
    <title>Pulling images using Podman</title>
    <para>
     You can also get container images using Podman by running the
     <command>podman pull</command> command. For details, refer to
     <xref linkend="article-podman"/>.
    </para>
   </tip>
  </section>
  <section xml:id="sec-running-containers">
   <title>Managing containers</title>
   <para>
    After you get an image, you can start a container based on that image by
    clicking the button next to the image information.
   </para>
   <figure xml:id="fig-running-images">
    <title>Running a container</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_running_images.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_running_images.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Podman running images</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <para>
    In the <guimenu>Run image</guimenu> window, enter the container details as
    described below.
   </para>
   <figure xml:id="fig-running-containers">
    <title>Container details</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata  fileref="cockpit_container_details.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_container_details.png" width="100%"/>
     </imageobject>
     <textobject role="description"><phrase>Podman running containers</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term>Name</term>
     <listitem>
      <para>
       You can define a custom name for the container. If not specified, the
       generated value is used.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Command</term>
     <listitem>
      <para>
       Defines a command that is run inside the container, for example,
       <filename>/usr/lib/systemd/systemd</filename> or
       <filename>/bin/bash</filename>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Memory limit</term>
     <listitem>
      <para>
       You can limit maximum memory consumption of the container by checking
       the box and specifying the limit.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>With terminal</term>
     <listitem>
      <para>
       The container will not run in the detached mode.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>CPU shares</term>
     <listitem>
      <para>
       specify the weight of the container to use CPU time. The default weight
       is 1024. The weight applies only if containers are under high load. If
       tasks in one container are idle, other containers may use its CPU time.
      </para>
      <para>
       If you have four containers, two of them have CPU shares of 512 and the
       other two have 1024. Thus, under high load the containers with lower CPU
       shares get only 16,5% of CPU time, while those with 1024 CPU shares get
       33% of CPU time.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Ports</term>
     <listitem>
      <para>
       You can publish ports of the container to the host. If you do not
       provide the host IP address, the port will be bound to all host IP
       addresses. If you omit the host port number, a random port is assigned.
      </para>
      <para>
       To publish a port for both protocols (TCP and UDP), enter the same port
       number twice, just select different protocols.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Volumes</term>
     <listitem>
      <para>
       Maps the volumes on the host system to the paths in the container. The
       <literal>Container path</literal> must be an absolute path inside the
       container. If it does not exist, the directory will be created.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Environment</term>
     <listitem>
      <para>
       Enables passing environment variables to the container.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    After expanding the container details, you can perform the following tasks:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      access a terminal of the container in the <guimenu>Console</guimenu> tab
     </para>
    </listitem>
    <listitem>
     <para>
      view the container logs in the <guimenu>Logs</guimenu> tab
     </para>
    </listitem>
    <listitem>
     <para>
      delete the container by clicking the trash bin button
     </para>
    </listitem>
    <listitem>
     <para>
      commit changes performed to the container, for example, installing
      packages to the container
     </para>
    </listitem>
    <listitem>
     <para>
      start the container by clicking <guimenu>Start</guimenu>
     </para>
    </listitem>
    <listitem>
     <para>
      restart the container, either by regular <guimenu>Restart</guimenu>,
      where processes running inside the container are stopped, or by
      <guimenu>Force restart</guimenu>, where the processes are killed, and you
      might lose data
     </para>
    </listitem>
    <listitem>
     <para>
      stop the container, either by regular <guimenu>Stop</guimenu>,
      <guimenu>Force stop</guimenu> or <guimenu>Checkpoint</guimenu>. When
      using <guimenu>Checkpoint</guimenu>, the state of all processes in the
      container is written to the disk and after the next start, the container
      is restored to the same point before stopping.
     </para>
    </listitem>
   </itemizedlist>
  </section>
 </section>
 <!--
  <section xml:id="sec-cockpit-vm">
  <title>Virtual machines management</title>
  <para>
  TBD
  </para>
  <section xml:id="sec-adding-pools">
  <title>Creating storage pools</title>
  <para>
  TBD
  </para>
  </section>
  <section xml:id="sec-creating-network">
  <title>Creating virtual networks</title>
  <para>
  TBD
  </para>
  </section>
  <section xml:id="sec-vm-management">
  <title>Managing virtual machines</title>
  <para>
  TBD
  </para>
  </section>
  </section>
  -->
 <section xml:id="sec-users-cockpit">
  <title>Users administration</title>
  <note>
   <title>Users administration only for server administrators</title>
   <para>
    Only users with the <guimenu>Server administrator</guimenu> role can edit
    other users.
   </para>
  </note>
  <para>
   Cockpit enables you to manage the users of your system. Click
   <guimenu>Accounts</guimenu> to open the user administration page. Here you
   can create a new account by clicking <guimenu>Create new account</guimenu>
   or manage already existing accounts by clicking on the particular account.
  </para>
  <figure>
   <title>The <guimenu>Accounts</guimenu> screen</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cockpit_accounts_screen.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_accounts_screen.png" width="100%"/>
    </imageobject>
   </mediaobject>
  </figure>
  <section xml:id="sec-adding-users">
   <title>Creating new accounts</title>
   <para>
    Click <guimenu>Create new account</guimenu> to open the window that enables
    you to add a new user. Fill in the user's login and/or full name and
    password, then confirm the form by clicking <guimenu>Create</guimenu>.
   </para>
   <para>
    To add authorized SSH keys for the new user or set the <guimenu>Server
    administrator</guimenu> role, edit the already created account by clicking
    on it. For details, refer to <xref linkend="sec-modifying-users"/>.
   </para>
  </section>
  <section xml:id="sec-modifying-users">
   <title>Modifying accounts</title>
   <para>
    After clicking the user icon in the <guimenu>Accounts</guimenu> page, the
    user details view opens, and you can edit the user.
   </para>
   <figure>
    <title>User details</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cockpit_user_details.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_user_details.png" width="100%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    In the user's details view, you can perform the following actions.
   </para>
   <variablelist>
    <varlistentry>
     <term>Delete the user</term>
     <listitem>
      <para>
       Click <guimenu>Delete</guimenu> to remove the user from the system.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Terminate user's session</term>
     <listitem>
      <para>
       By clicking <guimenu>Terminate session</guimenu>, you can log a
       particular user out of the system.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Change user's role</term>
     <listitem>
      <para>
       By checking/unchecking the <guimenu>Server administrator</guimenu> check
       box, you can assign or remove the administrator role from the user.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Manage access to the account</term>
     <listitem>
      <para>
       You can lock the account, or you can set a date when the account will
       expire.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Manage the user's password</term>
     <listitem>
      <para>
       Click <guimenu>Set password</guimenu> to set a new password for the
       account.
      </para>
      <para>
       By clicking <guimenu>Force change</guimenu>, the user will have to
       change the password on the next login.
      </para>
      <para>
       Click <guimenu>edit</guimenu> to set whether or when the password
       expires.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Add SSH key</term>
     <listitem>
      <para>
       You can add an SSH key for passwordless authentication via SSH. Click
       <guimenu>Add key</guimenu>, paste the contents of the public SSH key and
       confirm it by clicking <guimenu>Add</guimenu>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </section>
 </section>
 <section xml:id="sec-cockpit-services">
  <title>Managing services</title>
  <para>
   In the <guimenu>Services</guimenu> view, you can view the status of &systemd;
   units, start or stop particular units and create &systemd; timers.
  </para>
  <figure>
   <title>Services management</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cockpit_services_details.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_services_details.png" width="100%"/>
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   To manage a &systemd; unit, select the appropriate tab, then click on the
   particular unit. In the unit details, you can view relations to other
   &systemd; units, the status of the unit, or you can perform the following
   actions that can be found in the three dots menu:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     <guimenu>Start</guimenu> if the unit is not running
    </para>
   </listitem>
   <listitem>
    <para>
     <guimenu>Restart</guimenu> the running unit
    </para>
   </listitem>
   <listitem>
    <para>
     <guimenu>Stop</guimenu> the running unit
    </para>
   </listitem>
   <listitem>
    <para>
     <guimenu>Disallow running</guimenu>&mdash;that will stop the service
     permanently including all its dependencies. Keep in mind that the
     dependent service can be used by other units, and disallowing the unit
     might cause serious troubles for the system.
    </para>
   </listitem>
  </itemizedlist>
  <section xml:id="sec-creating-timers">
   <title>Creating new timers</title>
   <para>
    To create a new timer, click <guimenu>Create timer</guimenu> in the
    <guimenu>Timers</guimenu> tab. Fill in the details described below in the
    opened <guimenu>Create timer</guimenu> window.
   </para>
   <figure>
    <title>Creating timers</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="cockpit_creating_timers.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="cockpit_creating_timers.png" width="100%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term>Name</term>
     <listitem>
      <para>
       The name of the timer that will be used in the unit name and in the
       service unit name as well. For example, specifying the name
       <emphasis>example</emphasis> will create the following unit files:
       <filename>/etc/systemd/system/example.timer</filename> and
       <filename>/etc/systemd/system/example.service</filename>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Description</term>
     <listitem>
      <para>
       You can provide a short description of the timer.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Command</term>
     <listitem>
      <para>
       The command to be invoked when the timer is triggered
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Trigger</term>
     <listitem>
      <para>
       the timer can be triggered each time you reboot your machine or at a
       specific time. For the <guimenu>After system boot</guimenu> option, you
       can define the delay of the service invocation. For the <guimenu>At specific
       time</guimenu> option, specify when the service should be invoked.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <note>
    <title>Overriding existing timers</title>
    <para>
     The default set of &systemd; timers is stored in
     <filename>/usr/lib/systemd</filename>. If you create a timer with already
     existing names, the default unit file is not overwritten, but a new one is
     created in <filename>/etc/systemd/system/</filename> that overrides the
     default unit file. If you want to restore the timer to the default one,
     delete the timer unit file in <filename>/etc/systemd/system/</filename>.
    </para>
    <para>
     If you try to create a timer that already exists in the
     <filename>/etc/systemd/system/</filename> directory, the unit file will be
     overwritten, and the previous changes are lost.
    </para>
   </note>
  </section>
 </section>
 <section xml:id="sec-selinux-plugin">
  <title>Managing SELinux mode and policy</title>
  <para>
   The SELinux tool enables you to switch between SELinux modes and view
   current modifications of the SELinux policy.
  </para>
  <figure>
   <title>SELinux tool</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cockpit_selinux_tool.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_selinux_tool.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>SELinux tool</phrase>
    </textobject>
   </mediaobject>
  </figure>
  <para>
   On &slema;, SELinux is in the enforcing mode by default. To temporarily
   switch to the permissive mode, click the button with the
   <literal>Enforcing</literal> label. Bear in mind that the change persists
   only until the next boot. If you need to perform a persistent change of the mode,
   edit the configuration file <filename>/etc/selinux/config</filename> as
   described in <xref linkend="sec-switching-modes"/>.
  </para>
  <para>
   The <guimenu>System modifications</guimenu> lists all modifications
   performed on the default SELinux policy. If you want to export the
   modifications and reuse them on different servers, click <guimenu>View
   automation script</guimenu>. In the new window, you can copy a shell script
   or the ansible configuration file that can be applied on other servers.
  </para>
 </section>
 <section xml:id="sec-cockpit-updates">
  <title>Managing &slema; updates and snapshots</title>
  <important>
   <title>No system updates without registering your system</title>
   <para>
    If your system is not registered, the updates are not available and the
    check for updates fails. Therefore, register your system to view available
    updates. For details, refer to
    <xref linkend="cha-postintall-registration"/>.
   </para>
  </important>
  <note>
   <title>Snapshots and updates management only for system administrators</title>
   <para>
    Only users with the <guimenu>Server administrator</guimenu> role can update
    the system or perform a rollback to another snapshot.
   </para>
  </note>
  <para>
   Cockpit enables you to update your &slema; instance or perform a rollback
   from the <literal>Software Updates</literal> menu.
  </para>
  <figure>
   <title>Software Updates</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="cockpit_software_updates.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="cockpit_software_updates.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>Software Updates view</phrase>
    </textobject>
   </mediaobject>
  </figure>
  <section xml:id="sec-cockpit-updates-procedure">
   <title>Managing updates</title>
   <para>
    Click <guimenu>Check for Updates</guimenu> to get a list of new package
    updates and patches available for your system. You can view each package
    update or patch information by clicking the blue icon next to the package
    update/patch. It is recommended to install the patches marked as important
    as soon as possible.
   </para>
   <para>
    To apply the updates and patches, click <guimenu>Update and
    Reboot</guimenu>. The equivalent of the <command>transactional-update
    up</command> command is called, and a new snapshot of your system is
    created. After the update completes successfully, your system will be
    rebooted and the new snapshot set as default.
   </para>
   <para>
    You can postpone the reboot of your system after the update process by
    selecting <guimenu>Update without Reboot</guimenu> from the three dots
    menu. Bear in mind that you need to reboot the system to activate the
    snapshot with updates. If you perform further changes without rebooting the
    system beforehand, a new snapshot will be created from the same point as
    the snapshots with updates. Therefore, the new snapshot will not include
    the updates.
   </para>
   <para>
    You can also update &slema; using CLI. For details, refer to
    <xref linkend="sec-command-list"/>.
   </para>
  </section>
  <section xml:id="sec-cockpit-rollback">
   <title>Performing rollbacks</title>
   <para>
    In <literal>Snapshots &amp; Updates</literal> you can perform a rollback to
    one of older snapshots by clicking <guimenu>Rollback and Reboot</guimenu>,
    or <guimenu>Rollback without Reboot</guimenu> in the three dots menu.
   </para>
   <para>
    After rebooting the system, the snapshot you rolled back to will be set as
    active. Do not make any changes (install updates, packages, etc.) before
    rebooting your system, as the snapshot you rolled back to is not active.
    Any changes performed before you reboot your system will start from the
    currently active snapshot.
   </para>
   <para>
    For a system rollback procedure performed using CLI, refer to
    <xref linkend="sec-rollback-procedure"/>.
   </para>
  </section>
 </section>
</article>
