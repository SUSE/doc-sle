<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="sle_update_preparation.xml" version="5.0" xml:id="cha-update-preparation">
 <title>Préparation de la mise à niveau</title>
 <info>
  <abstract>
   <para>
    Avant de lancer la procédure de mise à niveau, assurez-vous que votre système est prêt. Cette préparation implique notamment la sauvegarde des données et la consultation des notes de version.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>oui</dm:translation>
  </dm:docmanager>
 </info>

 <sect1 xml:id="sec-update-preparation-update">
  <title>Assurez-vous que le système est à jour</title>
  <para>
   La mise à niveau du système est prise en charge uniquement à partir du niveau de correctif le plus récent. Assurez-vous que les dernières mises à jour système sont installées, en exécutant le <command>correctif zypper</command> ou en démarrant le module YaST <guimenu>Online Update</guimenu>.
  </para>
 </sect1>

 <sect1 xml:id="sec-update-preparation-relnotes">
  <title>Lecture des notes de version</title>
  <para>
   Les notes de version contiennent des informations supplémentaires sur les modifications apportées depuis la version précédente de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Consultez les notes de version pour vérifier les aspects suivants :
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Votre matériel doit tenir compte de certaines considérations spéciales;
    </para>
   </listitem>
   <listitem>
    <para>
     Les paquetages logiciels utilisés ont été considérablement modifiés;
    </para>
   </listitem>
   <listitem>
    <para>
     Des précautions spéciales sont nécessaires pour votre installation.
    </para>
   </listitem>
  </itemizedlist>
  <para>
   Les notes de version incluent également des informations de dernière minute qui, faute de temps, n'ont pas pu être intégrées au manuel. Elles contiennent également des notes concernant les problèmes connus.
  </para>
  <para os="sles">
   Si vous omettez d'installer un ou plusieurs Service Packs, consultez néanmoins les notes de version de ces Service Packs ignorés. Les notes de version contiennent généralement uniquement les changements effectués entre deux versions successives. Vous risquez de manquer des changements importants si vous lisez uniquement les notes de version actuelles.
  </para>
  <para>
   Retrouvez les notes de version actuelles en ligne à l'adresse <link xlink:href="https://www.suse.com/releasenotes/"/>.
  </para>
  <para>
   Vous pouvez également les consulter dans le répertoire <filename>docu</filename> du DVD d'installation.
  </para>
 </sect1>
 <sect1 xml:id="sec-update-preparation-backup">
  <title>Exécution d'une sauvegarde</title>
  <para>
   Avant de procéder à la mise à jour, copiez les fichiers de configuration existants sur un support distinct (comme un périphérique à bande, un disque dur amovible, etc.) pour sauvegarder les données. Cela concerne principalement les fichiers stockés dans le répertoire <filename>/etc</filename>, ainsi que certains répertoires et fichiers sous <filename>/var</filename> et <filename>/opt</filename>. Vous pouvez également écrire les données de l'utilisateur de <filename>/home</filename> (les répertoires <envar>HOME</envar>) dans un support de sauvegarde. Sauvegardez ces données en tant que <systemitem class="username">root</systemitem>. Seul l'utilisateur <systemitem class="username">root</systemitem> a des droits de lecture sur tous les fichiers locaux.
  </para>
  <para>
   Si vous avez sélectionné <guimenu>Mettre à jour un système existant</guimenu> comme mode d'installation dans YaST, vous pouvez choisir d'effectuer une sauvegarde (système) ultérieurement. Vous pouvez inclure tous les fichiers modifiés, ainsi que ceux issus du répertoire <filename>/etc/sysconfig</filename>. Il ne s'agit toutefois pas d'une sauvegarde complète, dans la mesure où il manque tous les autres répertoires importants mentionnés ci-dessus. Recherchez la sauvegarde dans le répertoire <filename>/var/adm/backup</filename>.
  </para>
 </sect1>
 <sect1 xml:id="sec-update-preparation-packagelist">
  <title>Liste des paquetages et dépôts installés</title>
  <para>
   Il est souvent utile de conserver une liste des paquetages installés, par exemple pour effectuer une nouvelle installation d'une nouvelle version majeure de SLE ou pour revenir à l'ancienne version.
  </para>
  <para>
   N'oubliez pas que les paquetages installés ou dépôts utilisés ne sont pas tous disponibles dans les versions plus récentes de SUSE Linux Enterprise. Certains ont parfois été renommés et d'autres remplacés. Il se peut aussi que certains paquetages restent disponibles pour des raisons d'héritage, mais qu'un autre paquetage soit utilisé par défaut. Par conséquent, une modification manuelle des fichiers peut s'avérer nécessaire. Elle peut être réalisée avec n'importe quel éditeur de texte.
  </para>
  <para>
   Créez un fichier nommé <filename>repositories.bak.repo</filename> contenant une liste de tous les dépôts utilisés :
  </para>
  <screen><prompt role="root">root # </prompt><command>zypper</command> lr -e repositories.bak</screen>
  <para>
   Créez un fichier nommé <filename>installed-software.bak</filename> contenant une liste de tous les paquetages utilisés :
  </para>
  <screen><prompt role="root">root # </prompt><command>rpm</command> -qa --queryformat '%{NAME}\n' &gt; installed-software.bak</screen>
  <para>
   Sauvegardez les fichiers. Les dépôts et paquetages installés peuvent être restaurés à l'aide des commandes suivantes :
  </para>
  <screen><prompt role="root">root # </prompt><command>zypper</command> ar repositories.bak.repo
<prompt role="root">root # </prompt><command>zypper</command> install $(cat installed-software.bak)</screen>

  <note xml:id="note-update-prep-backup-package-amount">
   <title>
    le nombre de paquetages augmente avec la mise à jour vers une nouvelle version majeure
   </title>
   <para>
    Un système mis à niveau vers une nouvelle version majeure (SLE <replaceable>X+1</replaceable>) peut contenir plus de paquetages que le système initial (SLE <replaceable>X</replaceable>). Il en contient aussi davantage qu'une nouvelle installation de SLE <replaceable>X+1</replaceable> avec la même sélection de modèle. Il existe plusieurs raisons à cela :
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Les paquetages ont été divisés pour permettre une sélection plus rigoureuse de l'ensemble. Par exemple, 37 paquetages <package>texlive</package> dans SLE 11 ont été divisés en 422 paquetages dans SLE 12.
     </para>
    </listitem>
    <listitem>
     <para>
      Lorsqu'un paquetage a été divisé en plusieurs autres, tous les nouveaux paquetages sont installés de manière à conserver les mêmes fonctionnalités que la version précédente en cas de mise à niveau. Toutefois, la nouvelle configuration par défaut pour une nouvelle installation de SLE <replaceable>X+1</replaceable> ne consiste pas forcément à installer tous les paquetages.
     </para>
    </listitem>
    <listitem>
     <para>
      Les paquetages hérités de SLE <replaceable>X</replaceable> peuvent être conservés pour des raisons de compatibilité.
     </para>
    </listitem>
    <listitem>
     <para>
      Les dépendances de paquetages et l'étendue des modèles peuvent avoir changé.
     </para>
    </listitem>
   </itemizedlist>
  </note>
 </sect1>

 <sect1 os="sles" xml:id="sec-update-preparation-sle11">
  <title>Mise à niveau à partir de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 11 SP4</title>
  <para>
   Si vous utilisez des certificats MySQL, PostgreSQL ou Java MD5 basés sur <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 11 SP4, préparez votre système, comme indiqué dans les sections suivantes.
  </para>
  <sect2 xml:id="sec-update-preparation-sle11-mariadb">
   <title>Migration de votre base de données MySQL</title>
   <remark>toms 2015-09-03: already reviewed by Ondrej and Kristýna.</remark>
   <para>
    À partir de la version 12 de SUSE Linux Enterprise, SUSE est passé de MySQL à MariaDB. Avant de lancer une mise à niveau, il est vivement recommandé de sauvegarder votre base de données.
   </para>
   <para>
    Pour effectuer la migration de la base de données, procédez comme suit :
   </para>
   <procedure>
    <step>
     <para>
      Connectez-vous à votre machine SUSE Linux Enterprise 11.
     </para>
    </step>
    <step>
     <para>
      Créer un fichier de vidage :
     </para>
     <screen><prompt role="root">root # </prompt><command>mysqldump</command> -u root -p --all-databases &gt; mysql_backup.sql</screen>
     <para>
      Par défaut, <command>mysqldump</command> ne vide pas la base de données <literal>INFORMATION_SCHEMA</literal> ni <literal>performance_schema</literal>. Pour plus d'informations, consultez la page <link xlink:href="https://dev.mysql.com/doc/refman/5.5/en/mysqldump.html"/>.
     </para>
    </step>
    <step>
     <para>
      Enregistrez votre fichier de vidage, le fichier de configuration <filename>/etc/my.cnf</filename> ainsi que le répertoire <filename>/etc/mysql/</filename> pour le consulter ultérieurement (<emphasis>PAS</emphasis> le répertoire d'installation) dans un endroit sûr.
     </para>
    </step>
    <step>
     <para>
      Effectuez la mise à niveau. Après la mise à niveau, votre ancien fichier de configuration <filename>/etc/my.cnf</filename> reste inchangé. La nouvelle configuration est disponible dans le fichier <filename>/etc/my.cnf.rpmnew</filename>.
     </para>
    </step>
    <step>
     <para>
      Configurez votre base de données MariaDB selon vos besoins. <emphasis>N'utilisez PAS</emphasis> les anciens répertoire et fichier de configuration. Vous pouvez toutefois les adapter et vous en servir ultérieurement comme références.
     </para>
    </step>
    <step>
     <para>
      Assurez-vous que vous démarrez le serveur MariaDB :
     </para>
     <screen><prompt role="root">root # </prompt><command>systemctl</command> start mysql</screen>
     <para>
      Si vous voulez lancer le serveur MariaDB à chaque démarrage, activez ce service :
     </para>
     <screen><prompt role="root">root # </prompt><command>systemctl</command> enable mysql</screen>
    </step>
    <step>
     <para>
      Vérifiez que MariaDB s'exécute correctement en vous connectant à la base de données :
     </para>
     <screen><prompt role="root">root # </prompt><command>mysql</command> -u root -p</screen>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-update-preparation-sle11-postgresql">
   <title>Migration de votre base de données PostgreSQL</title>
   <para>
    SLE 15 obtient une version plus récente de la base de données PostgreSQL. En raison du travail de migration requis pour la base de données, le processus de mise à niveau n'est pas automatique. De ce fait, le passage d'une version à l'autre doit être effectué manuellement.
   </para>
   <para>
    La migration est exécutée à l'aide de la commande <command>pg_upgrade</command>. Elle constitue une méthode qui diffère du vidage et du rechargement classique. Par rapport à la méthode de <quote>vidage et rechargement</quote>, la migration effectuée par le biais de la commande <command>pg_upgrade</command> est plus rapide.
   </para>
   <para>
    Chaque version de PostgreSQL stocke ses fichiers dans des répertoires différents selon la version. Après la mise à jour, les répertoires changent et passent de <filename>/usr/lib/postgresql96/</filename> à <filename>/usr/lib/postgresql10/</filename>.
   </para>
   <para>
    Pour effectuer la migration de la base de données, procédez comme suit :
   </para>
   <procedure>
    <step>
     <para>
      Assurez-vous que les conditions préalables suivantes sont remplies :
     </para>
     <itemizedlist>
      <listitem>
       <para>
        Si ce n'est déjà fait, mettez à niveau les paquetages de l'ancienne version de PostgreSQL vers la version la plus récente par le biais d'une mise à jour de maintenance.
       </para>
      </listitem>
      <listitem>
       <para>
        Créez une sauvegarde de votre base de données existante.
       </para>
      </listitem>
      <listitem>
       <para>
        Installez les paquetages de la nouvelle version majeure de PostgreSQL. Pour SLE15, cela implique d'installer
        <package>postgresql10-server</package>
        et tous les paquetages dont il dépend.
       </para>
      </listitem>
      <listitem>
       <para>
        Installez le paquetage
        <package>postgresql10-contrib</package>
        qui contient la commande <command>pg_upgrade</command>.
       </para>
      </listitem>
      <listitem>
       <para>
        Assurez-vous que vous disposez de suffisamment d'espace disponible dans la zone de stockage des données PostgreSQL, par défaut <filename>/var/lib/pgsql/data</filename>. Si l'espace risque d'être insuffisant, essayez de réduire la taille à l'aide de la commande SQL suivante sur chaque base de données (cette opération risque d'être très longue) :
       </para>
       <screen>VACUUM FULL</screen>
      </listitem>
     </itemizedlist>
    </step>
    <step>
     <para>
      Arrêtez le serveur PostgreSQL :
     </para>
     <screen><prompt role="root">root # </prompt>systemctl stop postgresql.service</screen>
    </step>
    <step>
     <para>
      Renommez votre ancien répertoire de données :
     </para>
     <screen><prompt role="root">root # </prompt><command>mv</command> /var/lib/pgsql/data /var/lib/pgsql/data.old</screen>
    </step>
    <step>
     <para>
      Créez un nouveau répertoire de données:
     </para>
     <screen><prompt role="root">root # </prompt><command>mkdir</command> -p /var/lib/pgsql/data</screen>
    </step>
    <step>
     <para>
      Si vous avez modifié les fichiers de configuration dans l'ancienne version, copiez les fichiers <filename>postgresql.conf</filename> <filename>pg_hba.conf</filename> dans votre nouveau répertoire de <filename>données</filename> :
     </para>
<screen><prompt role="root">root # </prompt><command>cp</command> /var/lib/pgsql/data.old/*.conf \
    /var/lib/pgsql/data</screen>
    </step>
    <step>
     <para>
      Initialisez votre nouvelle instance de base de données, soit manuellement avec <command>initdb</command>, soit en démarrant et arrêtant PostgreSQL, qui le fera automatiquement :
     </para>
<screen><prompt role="root">root # </prompt>systemctl start postgresql.service
<prompt role="root">root # </prompt>systemctl stop postgresql.service</screen>
    </step>
    <step>
     <para>
      Démarrez le processus de migration :
     </para>
<screen><prompt role="root">root # </prompt><command>pg_upgrade</command> \
  --old-datadir "/var/lib/pgsql/data.old" \
  --new-datadir "/var/lib/pgsql/data" \
  --old-bindir "/usr/lib/postgresqli96/bin/" \
  --new-bindir "/usr/lib/postgresql10/bin/"</screen>
    </step>
    <step>
     <para>
      Démarrez votre nouvelle instance de la base de données :
     </para>
     <screen><prompt role="root">root # </prompt>systemctl start postgresql.service</screen>
    </step>
    <step>
     <para>
      Vérifiez si la migration a réussi. Il n'existe pas d'outil général permettant d'automatiser cette étape. Le choix va dépendre de votre utilisation, de la quantité ainsi que du volume que vous souhaitez tester.
     </para>
    </step>
    <step>
     <para>
      Supprimez les anciens paquetages PostgreSQL et votre ancien répertoire de données :
     </para>
<screen><prompt role="root">root # </prompt><command>zypper</command> search -s postgresql94 | xargs zypper rm -u
<prompt role="root">root # </prompt><command>rm</command> -rf /var/lib/pgsql/data.old</screen>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-update-preparation-sle11-ssl">
   <title>Création de certificats de serveur non-MD5 pour les applications Java</title>
   <remark>toms 2016-07-27: from bsc#970153, c#24</remark>
   <para>
    Au cours de la mise à jour du SP1 vers SP2, les certificats basés sur MD5 ont été désactivés dans le cadre d'un correctif de sécurité. Si vous disposez de certificats créés à l'aide de l'algorithme MD5, recréez vos certificats en procédant comme suit :
   </para>

   <procedure>
    <step>
     <para>
      Ouvrez un terminal et connectez-vous en tant qu'utilisateur <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step>
     <para>
      Créez une clé privée :
     </para>
     <screen><prompt role="root">root # </prompt><command>openssl</command> genrsa -out server.key 1024</screen>
     <para>
      si vous souhaitez une clé renforcée, remplacez <literal>1024</literal> par un nombre plus élevé, par exemple <literal>4096</literal>.
     </para>
    </step>
    <step>
     <para>
      Créez une requête de signature de certificat (CSR) :
     </para>
     <screen><prompt role="root">root # </prompt><command>openssl</command> req -new -key server.key -out server.csr</screen>
    </step>
    <step>
     <para>
      Auto-signez le certificat :
     </para>
     <screen><prompt role="root">root # </prompt><command>openssl</command> x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</screen>
    </step>
    <step>
     <para>
      Créez le fichier PEM :
     </para>
     <screen><prompt role="root">root # </prompt><command>cat</command> server.key server.crt &gt; server.pem</screen>
    </step>
    <step>
     <para>Placez les fichiers <filename>server.crt</filename>, <filename>server.csr</filename>, <filename>server.key</filename> et <filename>server.pem</filename> dans les répertoires respectifs contenant les clés. Pour Tomcat, il s'agit par exemple du répertoire <filename>/etc/tomcat/ssl/</filename>.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-update-preparation-vms">
  <title>Arrêt des invités de machine virtuelle</title>
  <para>
   Si votre machine fait office de serveur hôte de machine virtuelle pour KVM ou Xen, veillez à arrêter correctement tous les invités de machine virtuelle actifs avant de procéder à la mise à jour. Dans le cas contraire, l'accès aux invités peut s'avérer impossible après la mise à jour.
  </para>
 </sect1>

 <sect1 xml:id="sec-update-preparation-rmt">
  <title>Vérification du script <command>clientSetup4SMT.sh</command> sur les clients RMT</title>
  <para>
   Si vous migrez votre système d'exploitation client enregistré sur un serveur RMT, vous devez vérifier si la version du script <command>clientSetup4SMT.sh</command> sur votre hôte est à jour. Le fichier <command>clientSetup4SMT.sh</command> des anciennes versions de RMT ne peut pas gérer les clients RMT 12. Si vous appliquez régulièrement des correctifs logiciels à votre serveur RMT, la dernière version du fichier <command>clientSetup4SMT.sh</command> est toujours disponible à l'emplacement <filename>&lt;NOM_HÔTE_SMT&gt;/repo/tools/clientSetup4SMT.sh</filename>.
  </para>
 </sect1>

 <sect1 xml:id="sec-update-preparation-disk">
  <title>Espace disque</title>

  <para>
   La taille des logiciels tend à augmenter de versions en versions. Il convient donc de vérifier l'espace disponible sur la partition avant d'effectuer la mise à jour. Si vous pensez que vous allez manquer d'espace disque, sauvegardez vos données avant d'augmenter l'espace disponible en redimensionnant des partitions, par exemple. Il n'existe pas de règle précise concernant l'espace de chaque partition. L'espace requis dépend de votre profil particulier de partitionnement et du logiciel sélectionné.
  </para>

  <note>
   <title>vérification automatique de l'espace dans YaST</title>
   <para>
    Au cours de la procédure de mise à jour, YaST vérifie la quantité d'espace disque disponible et affiche un avertissement si la taille de l'installation risque de dépasser la quantité d'espace disponible. Dans ce cas, la mise à jour risque de rendre le <emphasis>système inutilisable</emphasis> ! Si vous savez exactement ce que vous faites (en ayant effectué des tests au préalable), vous pouvez ignorer l'avertissement et poursuivre la mise à jour.
   </para>
  </note>

  <sect2 xml:id="sec-update-preparation-disk-space">
   <title>Vérification de l'espace disque sur des systèmes de fichiers racines non-Btrfs</title>
   <para>
    Utilisez la commande <command>df</command> pour obtenir une liste de l'espace disque disponible. Dans l'<xref linkend="ex-update-df"/>, la partition root à écrire est <filename>/dev/sda3</filename> (montée en tant que <filename>/</filename>).
   </para>
   <example xml:id="ex-update-df">
    <title>List with <command>df -h</command></title>

<screen os="sles">Filesystem     Size  Used Avail Use% Mounted on
/dev/sda3       74G   22G   53G  29% /
tmpfs          506M     0  506M   0% /dev/shm
/dev/sda5      116G  5.8G  111G   5% /home
/dev/sda1       44G    4G   40G   9% /data</screen>
   </example>
  </sect2>

  <sect2 xml:id="sec-update-preparation-disk-btrfs-on-root">
   <title>Vérification de l'espace disque sur des systèmes de fichiers racines Btrfs</title>
   <para>
    Si vous utilisez Btrfs en tant que systèmes de fichiers racines sur votre machine, assurez-vous qu'il dispose de suffisamment d'espace libre. Dans le pire des cas, une mise à niveau a besoin d'autant d'espace disque que le système de fichiers racine actuel (sans le répertoire <filename>/.snapshot</filename>) pour un nouvel instantané. Pour afficher l'espace disque disponible, utilisez la commande suivante :
   </para>
<screen><prompt role="root">root # </prompt><command>df</command> -h /</screen>
   <para>
    Vérifiez également l'espace disponible sur toutes les autres partitions montées. Les recommandations suivantes ont fait leurs preuves :
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Pour tous les systèmes de fichiers comprenant Btrfs, vous avez besoin de suffisamment d'espace disque disponible pour télécharger et installer des RPM volumineux. L'espace occupé par les anciens RPM n'est libéré qu'après l'installation des nouveaux RPM.
     </para>
    </listitem>
    <listitem>
     <para>
      Pour Btrfs avec des instantanés, vous avez au minimum besoin d'une quantité d'espace libre égale à celle occupée par votre installation actuelle. Il est recommandé de disposer de deux fois plus d'espace libre que celui occupé par l'installation actuelle.
     </para>
     <para>
      Si vous ne disposez pas de suffisamment d'espace, vous pouvez tenter de supprimer les anciens instantanés à l'aide de <command>snapper</command> :
     </para>
<screen><prompt role="root">root # </prompt><command>snapper</command> list
<prompt role="root">root # </prompt><command>snapper</command> delete NUMBER</screen>
     <para>
      Toutefois, cela ne fonctionne pas toujours. Avant la migration, la plupart des instantanés n'occupent pas tellement d'espace.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-update-preparation-smt-to-rmt" os="sles">
  <title>Mise à niveau d'un serveur SMT (Subscription Management Tool)</title>
  <para>
   Un serveur qui exécute SMT requiert une procédure de mise à niveau spéciale. Reportez-vous au <xref linkend="cha-rmt-migrate"/> du <citetitle>Repository Management Tool Guide</citetitle>.
  </para>
 </sect1>
 <sect1 xml:id="sec-update-preparation-multiversion">
  <title>Désactivation temporaire de la prise en charge de plusieurs versions du kernel</title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> (SLES) permet d'installer plusieurs versions de kernel en activant les paramètres correspondants sous <filename>/etc/zypp/zypp.conf</filename>. La prise en charge de cette fonctionnalité doit pourtant être désactivée temporairement pour effectuer une mise à niveau vers un Service Pack. Une fois la mise à jour terminée, la prise en charge de plusieurs versions peut être réactivée. Pour désactiver la prise en charge de plusieurs versions, commentez les lignes correspondantes sous <filename>/etc/zypp/zypp.conf</filename>. Le résultat doit ressembler à ceci :
  </para>
<screen>#multiversion = provides:multiversion(kernel)
#multiversion.kernels = latest,running</screen>
  <para>
   Pour réactiver cette fonction après une mise à jour réussie, supprimez les signes de commentaire. Pour plus d'informations sur la prise en charge de plusieurs versions, reportez-vous au <xref linkend="sec-tuning-multikernel-enable"/>.
  </para>
 </sect1>
 <sect1 xml:id="sec-update-preparation-zseries" os="sles">
  <title>Mise à niveau sur IBM Z</title>
  <para>La mise à niveau d'une installation SUSE Linux Enterprise sur IBM Z nécessite <command>Upgrade=1</command> comme paramètre de kernel, par exemple via le fichier parmfile. Reportez-vous au <xref linkend="sec-appdendix-parm" xrefstyle="HeadingOnPage"/>.
  </para>
 </sect1>
 <sect1 xml:id="sec-update-preparation-ppc" os="sles" arch="power">
  <title>IBM POWER : démarrage d'un serveur X</title>
  <para>
   Sous SLES 12 pour IBM POWER, le gestionnaire d'affichage est configuré pour ne pas démarrer un serveur X local par défaut. Ce paramètre a été annulé sous SLES 12 SP1. Le gestionnaire d'affichage démarre désormais un serveur X.
  </para>
  <para>
   Pour éviter des problèmes au cours de la mise à niveau, le paramètre <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> n'est pas modifié automatiquement. Si vous souhaitez que le gestionnaire d'affichage démarre un serveur X après la mise à niveau, modifiez le paramètre <envar>DISPLAYMANAGER_STARTS_XSERVER</envar> sous <filename>/etc/sysconfig/displaymanager</filename> comme suit :
  </para>
  <screen>DISPLAYMANAGER_STARTS_XSERVER="yes"</screen>
 </sect1>
</chapter>
