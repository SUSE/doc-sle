<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="x11.xml" version="5.0" xml:id="cha-gui-desktop">
 <title>Über die grafische Benutzeroberfläche</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> umfasst den X.org-Server<phrase os="sled;osuse">, Wayland</phrase> und den GNOME-Desktop. In diesem Kapitel wird die Konfiguration der grafischen Benutzeroberfläche für alle Benutzer beschrieben.
   </para>
  </abstract>
 </info>
 <sect1 xml:id="sec-gui-desktop-xorg">
  <title>X Window System</title>
  <para>
   Der X.org-Server ist die allgemeine Norm für die Implementierung des X11-Protokolls. X ist netzwerkbasiert und ermöglicht es, auf einem Host gestartete Anwendungen auf einem anderen, über eine beliebige Art von Netzwerk (LAN oder Internet) verbundenen Host anzuzeigen. 
  </para>
  <para>
   Das X Window System muss in den meisten Fällen nicht konfiguriert werden. Die Hardware wird beim Starten von X dynamisch erkannt. Die Nutzung von <filename>xorg.conf</filename> ist daher überholt. Wenn Sie die Funktionsweise von X dennoch mit benutzerdefinierten Optionen ändern möchten, können Sie die Konfigurationsdateien unter <filename>/etc/X11/xorg.conf.d/</filename> entsprechend bearbeiten.
  </para>
  <para os="sled;osuse">
   In <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP6</phrase></phrase> ist Wayland als Alternative zum X.org-Server enthalten. Dies kann während der Installation ausgewählt werden.
  </para>
  
  <para>
   Installieren Sie das <systemitem class="resource">xorg-docs</systemitem>-Paket, um detailliertere Informationen zu X11 zu erhalten. Auf der man-Seite <command>man 5 xorg.conf</command> finden Sie weitere Informationen zum Format der manuellen Konfiguration (falls erforderlich). Weitere Informationen zur X11-Entwicklung finden Sie auf der Startseite des Projekts unter <link xlink:href="https://www.x.org"/>.
  </para>

  <para>
   Die Treiber befinden sich in <systemitem>xf86-video-*</systemitem>-Paketen, beispielsweise <systemitem>xf86-video-ati</systemitem>. Viele der Treiber, die mit diesen Paketen geliefert werden, sind ausführlich in der zugehörigen man-Seite beschrieben. Wenn Sie beispielsweise den <literal>ati</literal>-Treiber verwenden, erhalten Sie weitere Informationen auf der man-Seite <command>man 4 ati</command>.
  </para>

  <para>
   Informationen über Treiber von Drittanbietern finden Sie unter <filename>/usr/share/doc/packages/&lt;package_name&gt;</filename>. Beispielsweise ist die Dokumentation von <systemitem class="resource">x11-video-nvidiaG03</systemitem> nach der Installation des Pakets in <filename>/usr/share/doc/packages/x11-video-nvidiaG04</filename> verfügbar.
  </para>

  <para>
   Installieren Sie das Paket <systemitem class="resource">xrdp</systemitem> auf einem Server und verwenden Sie die RDP-Clientsoftware, um über das Remote-Desktop-Protokoll auf den Server zuzugreifen.
  </para>

 </sect1>
 <xi:include href="x11_fonts.xml"/>
 <sect1 xml:id="sec-gui-desktop-gnome">
  <title>GNOME-Konfiguration für Administratoren</title>

  <sect2 xml:id="sec-gui-desktop-gnome-dconf">
   <title>Das <literal>dconf</literal>-System</title>

   <para>
    Die Konfiguration des GNOME-Desktops wird mit <literal>dconf</literal> verwaltet. Dabei handelt es sich um eine hierarchisch strukturierte Datenbank oder eine Registrierung, über die Benutzer persönliche Einstellungen bearbeiten können. Administratoren können darüber standardmäßige oder obligatorische Werte für alle Benutzer festlegen. <literal>dconf</literal> ersetzt das <literal>gconf</literal>-System von GNOME 2.
   </para>

   <para>
    Mit <command>dconf-editor</command> werden die <literal>dconf</literal>-Optionen in einer grafischen Benutzeroberfläche angezeigt. Mit <command>dconf</command> können Sie über die Befehlszeile auf die Konfigurationsoptionen zugreifen und diese Optionen bearbeiten.
   </para>

   <para>
    Das GNOME-Tool <literal>Tweaks</literal> bietet eine unkomplizierte Benutzeroberfläche mit zusätzlichen Konfigurationsoptionen, die über die normale GNOME-Konfiguration hinausgehen. Das Werkzeug lässt sich wahlweise über das GNOME-Anwendungsmenü oder auch über die Befehlszeile mit dem Befehl <command>gnome-tweak-tool</command> starten.
   </para>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-gnome-global">
   <title>Systemweite Konfiguration</title>
   <para>
    Globale <literal>dconf</literal>-Konfigurationsparameter können im Verzeichnis <filename>/etc/dconf/db/</filename> festgelegt werden. Hierzu gehört beispielsweise die Konfiguration für GDM oder das Sperren bestimmter Konfigurationsoptionen für die Benutzer.
   </para>
   <para>
    So erstellen Sie eine systemweite Konfiguration (Beispiel):
   </para>
   <procedure>
    <step>
     <para>
      Erstellen Sie unter <filename>/etc/dconf/db/</filename> ein neues Verzeichnis, das auf <literal>.d</literal> endet. Dieses Verzeichnis kann beliebig viele Textdateien mit Konfigurationsoptionen enthalten. Für dieses Beispiel erstellen Sie die Datei <filename>/etc/dconf/db/network.d/00-proxy</filename> mit dem folgenden Inhalt:
     </para>
     <screen># This is a comment
[system/proxy/http]
host='10.0.0.1'
enabled=true</screen>
    </step>
    <step>
     <para>
      Parsen Sie die neuen Konfigurationsdirektiven in das dconf-Datenbankformat:
     </para>
     <screen><prompt>&gt; </prompt><command>sudo</command> <command>dconf update</command></screen>
    </step>
    <step>
     <para>
      Tragen Sie die neue <literal>network</literal>-Konfigurationsdatenbank in das Standard-Benutzerprofil ein. Erstellen Sie hierzu die Datei <filename>/etc/dconf/profiles/user</filename>. Fügen Sie dann den folgenden Inhalt ein:
     </para>
     <screen>system-db:network</screen>
     <para>
      Die Datei <filename>/etc/dconf/profiles/user</filename> ist ein GNOME-Standard. Andere Profile können in der Umgebungsvariablen <literal>DCONF_PROFILE</literal> definiert werden.
     </para>
    </step>
    <step>
     <para>
      Optional: Wenn die Proxy-Konfiguration für die Benutzer gesperrt werden soll, erstellen Sie die Datei <filename>/etc/dconf/db/network/locks/proxy</filename>. Fügen Sie dann eine Zeile mit den Schlüsseln, die nicht geändert werden dürfen, in diese Datei ein:
     </para>
     <screen>/system/proxy/http/host
/system/proxy/http/enabled</screen>
    </step>
   </procedure>
   <para>
    Mit dem grafischen <command>dconf-editor</command> können Sie ein Profil mit einem einzelnen Benutzer erstellen und dann mit <command>dconf dump /</command> eine Liste aller Konfigurationsoptionen abrufen. Die Konfigurationsoptionen können dann in einem globalen Profil gespeichert werden.
   </para>
   <para>
    Eine ausführliche Beschreibung der globalen Konfiguration finden Sie unter <link xlink:href="https://wiki.gnome.org/Projects/dconf/SystemAdministrators"/>
   </para>
  </sect2>
  <sect2 xml:id="sec-gui-desktop-gnome-gtile" os="sled">
    <title>Verwalten von Kachelfenstern auf Wayland</title>
    <para>
      Wenn Sie den GNOME-Desktop auf Wayland ausführen und Ihre Fenster nebeneinander anordnen möchten, empfehlen wir die Verwendung der GNOME-Erweiterung <emphasis>gTile</emphasis>. Mit „gTile“ können Sie Fenster auf der Grundlage eines konfigurierbaren Rasterschemas neu anordnen. Sie können beispielsweise sechs Terminals starten und sie in 3 Zeilen und 2 Spalten anordnen, sodass sie den gesamten Desktop-Bereich nutzen.
    </para>
    <sect3>
      <title>Installieren von „gTile“</title>
      <important>
        <para>
          Um die GNOME-Erweiterung gTile verwenden zu können, müssen Sie den GNOME-Desktop ausführen und das Paket <package>chrome-gnome-shell</package> (für <phrase role="productname"><phrase os="sled"> SLED</phrase></phrase> 15 SP4 und älter) oder <package>gnome-browser-connector</package> (für <phrase role="productname"><phrase os="sled">SLED</phrase></phrase> 15 SP5 und neuer) installiert haben.
        </para>
      </important>
      <procedure>
        <step>
          <para>
            Geben Sie im Browser <link xlink:href="https://extensions.gnome.org/extension/28/gtile/"/> ein, um die Webseite der Erweiterung „gTile“ aufzurufen. Wenn Sie eine Warnung über eine fehlende Browsererweiterung sehen, klicken Sie auf den Link und befolgen Sie die Anweisungen Ihres Webbrowsers zum Installieren und Aktivieren der GNOME-Shell-Erweiterung.
          </para>
          <figure>
            <title>Warnung über eine fehlende GNOME-Shell-Erweiterung</title>
            <mediaobject>
              <imageobject role="fo">
                <imagedata fileref="gtile-browser-warning.png" width="75%"/>
              </imageobject>
              <imageobject role="html">
                <imagedata fileref="gtile-browser-warning.png" width="75%"/>
              </imageobject>
              <textobject role="description">
               <phrase>Warnung über eine fehlende GNOME-Shell-Erweiterung</phrase>
              </textobject>
            </mediaobject>
          </figure>
        </step>
        <step>
          <para>
            Nachdem die GNOME-Shell-Erweiterung in Ihrem Webbrowser installiert ist, sehen Sie oben rechts auf der gTile-Webseite die Schaltfläche <guimenu>OFF</guimenu> (AUS). Zum Aktivieren der Erweiterung „gTile“ klicken Sie auf diese Schaltfläche, damit sich der Status in <guimenu>ON</guimenu> (EIN) ändert.
          </para>
          <figure>
            <title>Aktivierte GNOME-Erweiterung „gTile“</title>
            <mediaobject>
              <imageobject role="fo">
                <imagedata fileref="gtile-extension-on.png" width="75%"/>
              </imageobject>
              <imageobject role="html">
                <imagedata fileref="gtile-extension-on.png" width="75%"/>
              </imageobject>
              <textobject role="description"><phrase>Aktivierte GNOME-Erweiterung „gTile“</phrase>
              </textobject>
            </mediaobject>
          </figure>
        </step>
        <step>
          <para>
            Ein gTile-Symbol wird im GNOME-Abschnitt auf der rechten Seite der GNOME-Kontrollleiste angezeigt. Damit können Sie gTile-Fensterlayouts aktivieren.
          </para>
          <figure>
            <title>gTile-Kontrollleistensymbol</title>
            <mediaobject>
              <imageobject role="fo">
                <imagedata fileref="gtile-tray-icon.png" width="75%"/>
              </imageobject>
              <imageobject role="html">
                <imagedata fileref="gtile-tray-icon.png" width="75%"/>
              </imageobject>
              <textobject role="description"><phrase>gTile-Kontrollleistensymbol</phrase>
              </textobject>
            </mediaobject>
          </figure>
        </step>
      </procedure>
    </sect3>
    <sect3>
      <title>Arbeiten mit der Erweiterung „gTile“</title>
      <procedure>
        <title>Anordnen der Fenster</title>
        <step>
          <para>
            Zum Öffnen von gTile für das aktuell fokussierte Fenster drücken Sie <keycombo><keycap function="meta"/><keycap function="enter"/></keycombo>.
          </para>
        </step>
        <step>
          <para>
            Zum Festlegen der Spaltenanzahl für die Anordnung der Fenster drücken Sie eine Zahlentaste.
          </para>
        </step>
        <step>
          <para>
            Um die Fenster automatisch entsprechend der Einstellung <guimenu>Automatische Kachelgrößen im Hauptfenster</guimenu> anzuordnen, drücken Sie die Taste <keycap>M</keycap>. Wenn Sie die Taste <keycap>M</keycap> zum ersten Mal drücken, wird das aktuelle Fenster standardmäßig auf der einen Hälfte des Bildschirms angezeigt und alle anderen Fenster als Kacheln in einer Spalte auf der anderen Hälfte des Bildschirms. Sie können die Taste <keycap>M</keycap> mehrmals drücken, um zwischen verschiedenen Varianten zu wechseln. Dies ist hilfreich, wenn Sie ein großes Hauptfenster und mehrere kleinere Nebenfenster nutzen möchten.
          </para>
        </step>
        <step>
          <para>
           Um das aktuelle Fenster innerhalb der vordefinierten Kachelanordnung des Bildschirms zu verschieben, verwenden Sie die Pfeiltasten.
          </para>
          <para>
            Um die Anzahl der Kacheln in dem Fenster zu verkleinern oder zu vergrößern, verwenden Sie <keycap function="shift"/> und eine Pfeiltaste.
          </para>
        </step>
        <step>
          <para>
            Um ein Fenster an den Rändern der benachbarten Fenster und des Desktops einzurasten, drücken Sie <keycombo><keycap function="control"/><keycap function="alt"/><keycap>S</keycap></keycombo>.
          </para>
        </step>
        <step>
          <para>
            Um das gTile-Fenster zu schließen, drücken Sie <keycap function="escape"/>.
          </para>
        </step>
      </procedure>
      <procedure>
        <title>Erweiterte Konfiguration</title>
        <step>
          <para>
            Um die gTile-Einstellungen zu öffnen, führen Sie folgendes Kommando aus: <command>gnome-extensions-app</command>.
          </para>
        </step>
        <step>
          <para>
            Wählen Sie gTile aus und klicken Sie auf <guimenu>Einstellungen</guimenu>.
          </para>
        </step>
        <step>
          <para>
           Definieren Sie eine Voreinstellung und eine Tastenkombination, um einfach zwischen häufig verwendeten Fensterlayouts zu wechseln.
          </para>
          <para>
            Details zur Konfiguration der Erweiterung „gTile“ finden Sie unter <link xlink:href="https://github.com/gTile/gTile"/>.
          </para>
        </step>
      </procedure>
    </sect3>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-gnome-more-info">
   <title>Weitere Informationen</title>
   <para>
    Weitere Informationen finden Sie im <link xlink:href="https://help.gnome.org/admin/"/>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-gui-desktop-suse-prime">
  <title>Umschalten zwischen Intel- und NVIDIA Optimus-GPUs mit SUSE Prime</title>
  <para>
   SUSE Prime ist ein Werkzeug zum Umschalten zwischen integrierten Intel-Grafikprozessoren (GPUs) und NVIDIA-GPUs, die mit der umschaltbaren Optimus-Grafiktechnologie von NVIDIA ausgestattet sind. Optimus bietet einen Mechanismus zum einfachen Umschalten zwischen einer integrierten Intel-GPU und einer diskreten NVIDIA-GPU. Dies ist für den Betrieb eines Laptops im Energiesparmodus oder mit maximaler Leistung ausgelegt: Verwenden Sie die Intel-GPU, um Energie zu sparen, und die NVIDIA-GPU für 3D-Anwendungen.
  </para>

  <para os="sled">
   SUSE Prime ist in der SUSE Linux Enterprise Workstation-Erweiterung für SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP6</phrase></phrase> enthalten.
  </para>

  <para>
   SUSE Prime ist nur auf Systemen mit X11 nutzbar, nicht auf Systemen mit Wayland. Wenn auf Ihrem System Wayland ausgeführt wird, müssen Sie es deaktivieren und auf X11 zurückgreifen, um SUSE Prime verwenden zu können (siehe <xref linkend="sec-gui-desktop-suse-prime-prereqs"/>).
  </para>

  <sect2 xml:id="sec-gui-desktop-suse-prime-prereqs">
   <title>Voraussetzungen</title>
    
   
   <para os="sle;sled">
    Sie müssen über eine konfigurierte und funktionierende NVIDIA Optimus-GPU verfügen, die die in SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP6</phrase></phrase> enthaltenen NVIDIA-Treiber verwendet (siehe <xref linkend="sec-gui-desktop-install-nvidia"/>), sowie über eine integrierte Intel-GPU. Bumblebee, das ältere Umschaltprogramm für NVIDIA Optimus, darf nicht installiert werden.
   </para>
   
   <para>
    Es dürfen keine Datei <filename>/etc/X11/xorg.conf</filename> und keine Konfigurationsdateien mit aktiven Abschnitten <literal>ServerLayout</literal>, <literal>Device</literal> oder <literal>Screen</literal> im Verzeichnis <filename>/etc/X11/xorg.conf.d</filename> vorhanden sein.
   </para>
   <para>
    SUSE Prime ist nur unter X11 nutzbar. Prüfen Sie mit dem Befehl <command>loginctl</command>, ob Ihr System X11 oder Wayland verwendet:
   </para>
<screen><prompt>&gt; </prompt>loginctl
   SESSION        UID USER             SEAT             TTY             
         2       1000 tux             seat0               
<prompt>&gt; </prompt>loginctl show-session 2|grep Type
Type=x11
</screen>
   <para>
    Wenn Ihr System Wayland verwendet, deaktivieren Sie es, indem Sie <filename>/etc/gdm/custom.conf</filename> bearbeiten und die Auskommentierung für <literal>WaylandEnable=false</literal> aufheben. Starten Sie dann neu.
   </para>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-suse-prime-install">
   <title>Installieren und Verwenden von SUSE Prime</title>

    <para>
      Ihre NVIDIA-Grafikkarte sollte bereits installiert und funktionsfähig sein. Andernfalls finden Sie weitere Informationen hierzu unter <xref linkend="sec-gui-desktop-install-nvidia"/>. 
    </para>

   <para>
       Installieren Sie das Paket <package>suse-prime</package>:
   </para>
       <screen><prompt>&gt; </prompt><command>sudo</command> zypper install suse-prime</screen>
     
   <para>
    Um die GPU zu wechseln, führen Sie einen der folgenden Befehle aus, melden Sie sich dann ab und wieder an:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> prime-select intel
<prompt>&gt; </prompt><command>sudo</command> prime-select intel2
<prompt>&gt; </prompt><command>sudo</command> prime-select nvidia
</screen>
   <para>
    Verwenden Sie den <command>intel</command>-Treiber, wenn dies der Modesetting-Treiber ist. <command>intel2</command> ist für Systeme gedacht, die den <package>xf86-video-intel</package>-Treiber verwenden. Sie können diese Informationen erhalten, indem Sie sie <package>inxi</package> installieren und ausführen.
   </para>
<screen><prompt>&gt; </prompt>inxi -G
Graphics: Device-1: Intel Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics Controller
          Display Server: x11(X.org 1.20.1 ) drivers: modesetting (unloaded: fbdev, vesa)
          Resolution: 1920x1080@60.00hz
          OpenGL: renderer: Mesa DRI Intel Haswell Desktop version: 4.5 Mesa 18.2.8
      </screen>
   <para>
    Welche GPU ist derzeit aktiv?
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> /usr/sbin/prime-select get-current
Driver configured: intel
</screen>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-install-nvidia">
   <title>Installieren von NVIDIA-Treibern</title>
   <para>
    Wenn Sie Ihre NVIDIA-Karte identifizieren müssen, damit Sie den zu verwendenden Treiber ermitteln können, führen Sie folgenden Befehl aus:
</para>
   
<screen><prompt>&gt; </prompt>/sbin/lspci | grep VGA  
</screen>
   
      <para os="sles;sled">
    Installieren Sie die Treiber anhand dieser Schritte mit Zypper.
   </para>

   

   <para>
    Listen Sie die verfügbaren Treiberpakete auf:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> zypper se nvidia
</screen>
   <para>
    Installieren Sie dann die Treiber für Ihre NVIDIA-Grafikkarte:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> zypper se <replaceable>packagename</replaceable>
</screen>
  </sect2>
 </sect1>
</chapter>
