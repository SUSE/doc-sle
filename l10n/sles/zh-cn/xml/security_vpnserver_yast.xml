<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="security_vpnserver_yast.xml" version="5.0" xml:id="sec-security-yastvpn">
 <info>
  <title>使用 YaST 设置 VPN 服务器或客户端</title>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  您还可以使用 YaST 来设置 VPN 服务器，但 YaST 模块不支持 OpenVPN，却提供对 IPsec 协议的支持（在软件 <phrase role="productname">StrongSwan</phrase> 中实现）。与 OpenVPN 一样，IPsec 是广受支持的 VPN 模式。
 </para>

 
 

  <procedure xml:id="pro-security-yastvpn-server">
   <title>设置 IPsec 服务器</title>
   <step>
    <para>
     要启动 YaST VPN 模块，请选择<menuchoice><guimenu>应用程序</guimenu>
     <guimenu>VPN 网关和客户端</guimenu></menuchoice>。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>全局配置</guimenu>下，选中<guimenu>启用 VPN 守护程序</guimenu>。
    </para>
   </step>
   <step>
    <para>
     要创建新 VPN，请单击<guimenu>新建 VPN</guimenu>，然后输入连接名称。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>类型</guimenu>下，选择<guimenu>网关（服务器）</guimenu>。
    </para>
   </step>
   <step>
    <para>
     然后选择方案：
    </para>
    <itemizedlist>
     <listitem>
      <para>
       <guimenu>使用预共享密钥的安全通讯</guimenu>和<guimenu>使用证书的安全通讯</guimenu>方案最适合 Linux 客户端设置。
      </para>
     </listitem>
     <listitem>
      <para>
       <guimenu>提供 Android、iOS、MacOS X 客户端的访问权</guimenu>方案会设置现代版本的 Android、iOS 和 macOS 原生支持的配置。此方案以使用附加用户名和口令身份验证的预共享密钥设置为基础。
      </para>
     </listitem>
     <listitem>
      <para>
       <guimenu>提供 Windows 7、Windows 8 客户端的访问权</guimenu>方案是 Windows 和 BlackBerry 设备原生支持的配置。此方案以使用附加用户名和口令身份验证的证书设置为基础。
      </para>
     </listitem>
    </itemizedlist>
    <para>
     对于本示例，请选择<guimenu>使用预共享密钥的安全通讯</guimenu>。
    </para>
   </step>
   <step>
    <para>
     要指定密钥，请单击<guimenu>编辑身份凭证</guimenu>。选中<guimenu>显示密钥</guimenu>，然后键入机密密钥。单击<guimenu>确定</guimenu>进行确认。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>提供以下项目的 VPN 客户端访问权</guimenu>下选择是否以及如何限制 VPN 内部的访问权限。要仅启用特定的 IP 范围，请在<guimenu>有限的 CIDR</guimenu> 中以 CIDR 格式指定这些范围并以逗号分隔。有关 CIDR 格式的详细信息，请参见 <link xlink:href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing"/>。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>客户端的地址池</guimenu>下，指定 VPN 应向其客户端提供的 IP 地址的格式。
    </para>
   </step>
   <step>
    <para>
     要完成该过程，请单击<guimenu>确定</guimenu>。现在，YaST VPN 模块会自动添加并启用防火墙规则，以允许客户端连接到新 VPN。
    </para>
    <para>
     要查看连接状态，请在随后的确认窗口中单击<guimenu>是</guimenu>。然后，您将看到对 VPN 运行 <command>systemctl status</command> 后的输出，并可在其中检查 VPN 是否正在运行且已正确配置。
    </para>
   </step>
  </procedure>
 
</sect1>
