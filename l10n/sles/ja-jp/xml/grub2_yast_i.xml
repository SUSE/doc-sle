<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="grub2_yast_i.xml" version="5.0" xml:id="sec-grub2-yast2-config">
 <title>YaSTによるブートローダの設定</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>システムでブートローダの汎用オプションを設定する最も簡単な方法は、YaSTモジュールを使用することです。<guimenu>YaSTコントロールセンター</guimenu>で、<menuchoice> <guimenu>システム</guimenu> <guimenu>ブートローダ</guimenu></menuchoice>の順に選択します。モジュールにシステムの現在のブートローダ設定が示され、変更を加えられます。
 </para>

 <para>
  <guimenu>ブートコードオプション</guimenu>タブで、タイプ、場所、および高度なローダ設定に関する設定を表示および変更できます。GRUB 2を標準モードとEFIモードのどちらで使用するかを選択することができます。
 </para>

 <important>
  <title>EFIシステムではGRUB2-EFIが必須</title>
  <para>
   EFIシステムがある場合は、GRUB2-EFIのみをインストールできます。それ以外をインストールすると、システムはブート不能になります。
  </para>
 </important>

 <important>
  <title>ブートローダの再インストール</title>
  <para>
   ブートローダを再インストールするには、必ずYaSTで設定を変更して、その後で元に戻すという操作を実行します。たとえば、GRUB2-EFIを再インストールするには、一度<guimenu>GRUB2</guimenu>を選択して、すぐに<guimenu>GRUB2-EFI</guimenu>に戻します。
  </para>
  <para>
   元に戻さない場合、ブートローダが完全には再インストールされない可能性があります。
  </para>
 </important>

 <note>
  <title>カスタムのブートローダ</title>
  <para>
   リストにないブートローダを使用する場合は、<guimenu>ブートローダはインストールしないでください</guimenu>を選択します。このオプションを選択する場合には、あらかじめ、ブートローダのドキュメントをよくお読みください。
  </para>
 </note>

 <sect2 xml:id="sec-grub2-yast2-location">
  <title>ブートローダの場所とブートコードオプション</title>

  <para>
   ブートローダのデフォルトの場所はパーティション設定によって異なり、マスタブートレコード(MBR)か、<filename>/</filename>パーティションのブートセクタです。ブートローダの場所を変更するには、次の手順に従います。
  </para>
  <procedure xml:id="pro-sec-grub2-yast2-location">
   <title>ブートローダの場所の変更</title>
   <step>
    <para>
     <guimenu>ブートコードオプション</guimenu>タブを選択し、<guimenu>ブートローダの場所</guimenu>で、次のいずれかのオプションを選択します。
    </para>
    <variablelist>
     <varlistentry>
      <term><guimenu>マスタブートレコードからブート</guimenu>
      </term>
      <listitem>
       <para>
        ディレクトリ<filename>/boot</filename>が含まれるディスクのMBRにブートローダをインストールします。通常は<filename>/</filename>にマウントされるディスクになりますが、<filename>/boot</filename>が異なるディスクの別個のパーティションにマウントされる場合は、そのディスクのMBRが使用されます。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>ルートパーティションからブート</guimenu>
      </term>
      <listitem>
       <para>
        <filename>/</filename>パーティションのブートセクタにブートローダがインストールされます。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>Custom Root Partition (カスタムルートパーティション)</guimenu>
      </term>
      <listitem>
       <para>
        このオプションを選択すると、手動でブートローダの場所を指定できます。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、変更内容を適用します。
    </para>
   </step>
   </procedure>
   <figure xml:id="fig-grub2-yast-boot-code-options0">
    <title>ブートコードオプション</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_boot_code.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_boot_code.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
  </figure>
  <para>
   <guimenu>ブートコードオプション</guimenu>タブには、以下の追加のオプションがあります。
  </para>
   <variablelist>
    <varlistentry>
     <term><guimenu>ブートパーティション用パーティションテーブルにアクティブフラグを設定</guimenu>
     </term>
     <listitem>
      <para>
       <filename>/boot</filename>ディレクトリを含むパーティションをアクティブにします。POWERシステムの場合、PRePパーティションをアクティブにします。古いBIOSおよび/またはレガシーオペレーティングシステムを使用しているシステムでは、非アクティブなパーティションからのブートに失敗する可能性があるため、このオプションを使用してください。このオプションをアクティブのままにしておくのが安全です。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>MBRに汎用ブートコードを書き込む</guimenu>
     </term>
     <listitem>
      <para>
       MBRにカスタムの「非GRUB」コードが含まれている場合、このコードは、このオプションにより、汎用の、オペレーティングシステムに依存しないコードに置き換えられます。このオプションを無効にすると、システムが起動できなくなる可能性があります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Enable Trusted Boot Support</guimenu>
     </term>
     <listitem>
      <para>
       信頼されたコンピューティング機能(TPM(Trusted Platform Module))をサポートするTrustedGRUB2を開始します。詳細については、<link xlink:href="https://github.com/Sirrix-AG/TrustedGRUB2"/>を参照してください。
      </para>
       </listitem>
    </varlistentry>    
    </variablelist>   
      <para>
      <guimenu>プロテクティブMBRフラグ</guimenu>セクションには、次のオプションが含まれています。
      </para>
    <variablelist>
    <varlistentry>
     <term><guimenu>set</guimenu>
     </term>
     <listitem>
      <para>
       これは、従来のレガシBIOSブートに適しています。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>remove</guimenu>
     </term>
     <listitem>
      <para>
       これは、UEFIブートに適しています。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>変更禁止</guimenu>
     </term>
     <listitem>
      <para>
       これは通常、すでに機能しているシステムがある場合の最適な選択肢です。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
    <para>
       多くの場合、YaSTがデフォルトで最適な選択肢となります。
    </para>         
       
 </sect2>
 <sect2 xml:id="sec-grub2-yast2-config-order">
  <title>ディスクの順序の変更</title>
  <para>
   コンピュータに複数のハードディスクがある場合、ディスクのブートシーケンスを指定できます。リストの最初のディスクは、MBRからブートする場合にGRUB 2がインストールされる場所です。これは、デフォルトで<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>がインストールされるディスクです。リストの残りは、GRUB 2のデバイスマッパのヒントです(<xref linkend="sec-grub2-map"/>を参照)。
  </para>
  <warning>
   <title>ブートできないシステム</title>
   <para>
    デフォルト値は、通常、ほぼすべての展開で有効です。ディスクのブート順序を正しく変更しないと、次回の再起動時にシステムをブートできなくなる可能性があります。たとえば、リスト内の最初のディスクがBIOSのブート順序の一部ではなく、リスト内の他のディスクに空のMBRがある場合などです。
   </para>
  </warning>
  <procedure xml:id="pro-sec-grub2-yast2-config-order">
   <title>ディスクの順序の設定</title>
   <step>
    <para>
     <guimenu>ブートコードオプション</guimenu>タブを開きます。
    </para>
   </step>
   <step>
    <para>
     <guimenu>ディスク順序の編集</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     複数のディスクが表示されている場合には、ディスクを選択してから<guimenu>上へ</guimenu>または<guimenu>下へ</guimenu>をクリックして、ディスクの表示順を変更します。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>を2回クリックして、変更内容を保存します。
    </para>
   </step>
  </procedure>
 </sect2>
 <sect2 xml:id="sec-grub2-yast2-config-advanced">
  <title>詳細オプションの設定</title>
  <para>
   詳細なブートパラメータを設定するには、<guimenu>Boot Loader Options (ブートローダオプション)</guimenu>タブを使用します。
  </para>
  <sect3 xml:id="sec-grub2-yast2-config-advanced-boot-loader">
   <title><guimenu>ブートローダオプション</guimenu>タブ</title>
   <figure xml:id="fig-grub2-yast-bootloader-options">
    <title>ブートローダオプション</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_options.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_options.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term><guimenu>ブートローダのタイムアウト</guimenu>
     </term>
     <listitem>
      <para>
       新しい値を入力するか、マウスで適切な矢印キーをクリックして、<guimenu>タイムアウト(秒)</guimenu>の値を変更します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>その他のOSの検知</guimenu>
     </term>
     <listitem>
      <para>
       選択すると、ブートローダはWindowsや他のLinuxインストールなど、インストール済みの他のシステムを検索します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>ブート時にメニューを隠す</guimenu>
     </term>
     <listitem>
      <para>
       ブートメニューを隠し、デフォルトエントリをブートします。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>デフォルトブートエントリの調整</guimenu>
     </term>
     <listitem>
      <para>
       <quote>デフォルトのブートセクション</quote>リストから目的のエントリを選択します。ブートエントリ名内の<quote>&gt;</quote>記号は、ブートセクションとそのサブセクションを区切っている点に注意してください。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-grub2-yast2-boot-password">
     <term><guimenu>パスワードでブートローダを保護する</guimenu>
     </term>
     <listitem>
      <para>
       ブートローダとシステムを追加のパスワードで保護します。手動による環境設定の詳細は、<xref linkend="sec-grub2-password"/>を参照してください。このオプションを有効にすると、ブートのたびにブートパスワードが必要になります。つまり、システムは自動的にはブートしません。ただし、GRUB 1の動作を希望する場合は、さらに<guimenu>項目の修正のみを保護する</guimenu>を有効にします。この設定では、誰でもブートエントリを選択してシステムをブートできますが、GRUB 2 <systemitem class="username">root</systemitem>ユーザのパスワードは、ブートエントリを変更する場合にのみ必要です。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
  <sect3 xml:id="sec-grub2-yast2-config-advanced-kernel-parameters">
   <title><guimenu>カーネルパラメータ</guimenu>タブ</title>
   
   <figure xml:id="fig-grub2-yast-kernel-parameters">
    <title>カーネルパラメータ</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_kernel_parameters.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_kernel_parameters.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term><guimenu>オプションのカーネルコマンドラインパラメータ</guimenu>
     </term>
     <listitem>
      <para>
       システム機能の有効化/無効化、ドライブの追加などを実行するには、ここでオプションのカーネルパラメータを指定します。 
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-grub2-yast2-cpu-mitigations">
     
     <term><guimenu>CPU緩和策</guimenu></term>
     <listitem>
      <para>
       SUSEでは、CPUサイドチャネル攻撃を防ぐために導入されているすべてのソフトウェア緩和策に対する1つ以上のカーネルブートコマンドラインパラメータをリリースしました。これらの一部により、性能の低下を招く場合があります。設定に応じて、セキュリティと性能とのバランスをとるために次のオプションのいずれかを選択してください。
      </para>
     <formalpara>
       <title><guimenu>自動</guimenu></title>
        <para>
   お使いのCPUモデルで必要なすべての緩和策を有効化しますが、CPUスレッドを跨いだ攻撃は保護できません。この設定による性能面への影響は、負荷内容によって異なります。
  </para>
       </formalpara>
       <formalpara>
       <title><guimenu>自動 + SMT無し</guimenu></title>
        <para>
    利用可能なセキュリティ面の緩和策をすべて実施することになります。お使いのCPUモデルで必要なすべての緩和策を有効化します。さらに、複数のCPUスレッドを跨いだサイドチャネル攻撃を防ぐため、同時マルチスレッディング(SMT)の機能も無効化します。これにより、負荷内容にもよりますが、［自動］よりも性能面への影響が増すことになります。
    </para>
       </formalpara>
       <formalpara>
       <title><guimenu>オフ</guimenu></title>
         <para>
    全ての緩和策を無効化します。CPUのモデルによってさまざまなサイドチャネル攻撃の可能性が高まることになります。この設定により性能面への影響はなくなります。
   </para>
      </formalpara>
       <formalpara>
       <title><guimenu>手動</guimenu></title>
        <para>
    緩和レベルを設定しません。カーネルのコマンドラインオプションを使用してCPU緩和策を手動で指定します。
   </para>
       </formalpara>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>グラフィカルコンソールを使用する</guimenu>
     </term>
     <listitem>
      <para>
       オンにすると、テキストモードではなくグラフィカルなスプラッシュスクリーンにブートメニューが表示されます。ブート画面の解像度はデフォルトで自動的に設定されますが、<guimenu>コンソールの解像度</guimenu>を介して手動で設定することもできます。グラフィカルテーマ定義ファイルは<guimenu>コンソールのテーマ</guimenu>ファイルチューザーで指定できます。これを変更するだけで、独自のカスタムメイドのテーマを適用できます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>シリアルコンソールの使用</guimenu>
     </term>
     <listitem>
      <para>
       コンピュータがシリアルコンソールで制御されている場合は、このオプションを有効にして、どのCOMポートをどの速度で使用するか指定します。<command>info grub</command>または<link xlink:href="http://www.gnu.org/software/grub/manual/grub.html#Serial-terminal"/>を参照してください。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
 </sect2>
</sect1>
