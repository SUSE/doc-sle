<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_prep_zseries_prep_i.xml" version="5.0" xml:id="sec-zseries-prep">
 <title>Preparación para la instalación</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>sí</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  Descubra cómo hacer que los datos estén disponibles para la instalación, cómo instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> mediante distintos métodos y cómo preparar y utilizar IPL en el sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server.</phrase></phrase> También encontrará información acerca de la configuración de la red y la instalación en red.
 </para>

 <sect2 xml:id="sec-prep-makeavail">
  <title>Cómo hacer que estén disponibles los datos de instalación</title>
  <para>
   En esta sección se proporciona información detallada sobre cómo hacer que los datos de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en IBM Z estén disponibles para la instalación. Dependiendo del equipo y el entorno del sistema, seleccione entre una instalación NFS o FTP. Si utiliza estaciones de trabajo con Microsoft Windows en su entorno, puede utilizar la red de Windows, incluido el protocolo SMB, para instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en su sistema IBM Z.
  </para>
  <tip>
   <title>IPL desde el DVD</title>
   <para>
    A partir del paquete de servicio 1 (SP1) de la versión 10 de SUSE Linux Enterprise Server, es posible realizar la IPL desde el DVD y emplear el DVD como medio de instalación, lo que resulta muy útil en el caso de que existan restricciones para configurar un servidor de instalación para proporcionar los medios de instalación a través de la red. El único requisito previo necesario es disponer de una unidad de DVD conectada SCSI.
   </para>
  </tip>
  <note>
   <title>sin instalación <quote>desde el disco duro</quote></title>
   <para>
    No es posible realizar la instalación desde el disco duro colocando el contenido del DVD en una partición de un DASD.
   </para>
  </note>
  <sect3 xml:id="sec-prep-makeavail-linuxws">
   <title>Uso de una estación de trabajo Linux o el DVD de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
   <para>
    Si dispone de una estación de trabajo Linux en el entorno informático, utilícela para proporcionar los datos de instalación al proceso de instalación de IBM Z desde NFS o FTP. Si la estación de trabajo Linux utiliza <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, puede configurar un servidor de instalación (NFS o FTP) mediante el módulo <guimenu>Servidor de instalación</guimenu> de YaST, tal y como se describe en la <xref linkend="sec-deployment-instserver-sles9"/>.
   </para>
   <sect4 xml:id="sec-prep-makeavail-linuxws-nfs">
    <title>A través de NFS</title>
    <para>
     Utilice NFS (sistema de archivos de red) para que el medio de instalación esté disponible.
    </para>
    <important>
     <title>exportación de dispositivos montados mediante NFS</title>
     <para>
      La exportación de la raíz del sistema de archivos (<filename>/</filename>) no implica la exportación de los dispositivos montados, como los DVD. Nombre explícitamente el punto de montaje en <filename>/etc/exports</filename>:
     </para>
<screen>/media/dvd  *(ro)</screen>
     <para>
      Después de modificar este archivo, reinicie el servidor NFS con el comando <command>sudo systemctl restart nfsserver</command>.
     </para>
    </important>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-linuxws-ftp">
    <title>A través de FTP</title>
    <para>
     Configurar un servidor FTP en un sistema Linux implica la instalación y la configuración de un software de servidor, como
     <package>vsftpd</package>. Si utiliza <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, consulte <xref linkend="cha-ftp"/> para obtener instrucciones de instalación. No se admite la descarga de datos de instalación a través de una entrada anónima; por lo tanto, deberá configurar el servidor FTP para admitir la autenticación de usuario.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-linuxws-oncd">
    <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en DVD</title>
    <para>
     El DVD1 de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> para IBM Z contiene una imagen arrancable de Linux para estaciones de trabajo basadas en Intel, así como una imagen para IBM Z.
    </para>
    <para>
     En el caso de las estaciones de trabajo basadas en Intel, arranque desde ese DVD, responda a las preguntas relativas al idioma y la distribución del teclado y seleccione <guimenu>Iniciar sistema de rescate.</guimenu> Necesitará al menos 64 MB de RAM para ello. No necesitará espacio en disco, dado que el sistema de rescate completo reside en la memoria RAM de la estación de trabajo. Este enfoque requiere una cierta experiencia con Linux y con las redes, dado que es necesario establecer la conexión en red de la estación de trabajo manualmente.
    </para>
    <para>
     En el caso de IBM Z, puede utilizar IPL en el invitado LPAR/VM desde este DVD, como se describe en la <xref linkend="sec-prep-ipling-lpar-dvd"/>. Después de introducir los parámetros de la red, el sistema de instalación trata el DVD como origen de los datos de instalación. Debido a que IBM Z no admite que los terminales habilitados para X11 se conecten directamente, debe elegir entre la instalación VNC o SSH. SSH proporciona además una instalación gráfica transfiriendo la conexión X a través de SSH con <command>ssh -X</command>.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-makeavail-windowsws">
   <title>Utilización de una estación de trabajo Microsoft Windows</title>
   <para>
    Si hay alguna estación de trabajo con Microsoft Windows disponible en la red, utilice este equipo para que el medio de instalación esté disponible. El modo más sencillo de hacerlo es utilizar el protocolo SMB, ya incluido en el sistema operativo Windows. Asegúrese de activar <guimenu>SMB sobre TCP/IP,</guimenu> dado que esta opción habilita el encapsulamiento de paquetes SMB en paquetes TCP/IP. Puede consultar información detallada en la ayuda en línea de Windows y en otros documentos de Windows que describan el funcionamiento de la red. Otra opción es utilizar el protocolo FTP. Esto también requiere software de otros fabricantes para Windows.
   </para>
   <sect4 xml:id="sec-prep-makeavail-windowsws-smb">
    <title>A través de SMB</title>
    <para>
     Para que los medios de instalación estén disponibles a través de SMB, inserte el DVD 1 de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en la unidad correspondiente de la estación de trabajo Windows. A continuación, cree un nuevo recurso compartido empleando la letra de la unidad de DVD-ROM y póngalo a disposición de todos los usuarios de la red.
    </para>

    <para>
     La vía de instalación en YaST puede ser:
    </para>
<screen>smb://<replaceable>DOMAIN</replaceable>;<replaceable>USER</replaceable>:<replaceable>PW</replaceable>@<replaceable>SERVERNAME</replaceable>/<replaceable>SHAREPATH</replaceable></screen>
    <para>
     Donde los espacios reservados significan:
    </para>
    <variablelist>
     <varlistentry>
      <term><replaceable>DOMAIN</replaceable>
      </term>
      <listitem>
       <para>
        Grupo de trabajo opcional o dominio de directorio activo.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>USER</replaceable>
      </term>
      <term><replaceable>PW</replaceable>
      </term>
      <listitem>
       <para>
        Nombre de usuario y contraseña opcionales de un usuario que puede acceder al servidor y a su recurso compartido.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>SERVERNAME</replaceable>
      </term>
      <listitem>
       <para>
        Nombre del servidor que aloja el recurso compartido.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>SHAREPATH</replaceable>
      </term>
      <listitem>
       <para>
        Vía al recurso compartido.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>


    <para/>

   </sect4>
   <sect4 xml:id="sec-prep-makeavail-windowsws-nfs">
    <title>A través de NFS</title>
    <para>
     Consulte la documentación proporcionada con el producto de otro fabricante que habilite los servicios del servidor NFS para la estación de trabajo Windows. La unidad de DVD-ROM que contenga los DVD de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> debe encontrarse en la vía NFS disponible.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-windowsws-ftp">
    <title>A través de FTP</title>
    <para>
     Consulte la documentación proporcionada con el producto de otro fabricante que habilite los servicios del servidor FTP para la estación de trabajo Windows. La unidad de DVD-ROM que contenga los DVD de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> debe encontrarse en la vía FTP disponible.
    </para>
    <para>
     El servidor FTP incluido con algunas versiones de Microsoft Windows solo implementa un subconjunto del conjunto de comandos FTP y no es válido para proporcionar los datos de instalación. Si esto se aplica a la estación de trabajo Windows, utilice un servidor FTP de otros fabricantes que proporcione las funciones necesarias.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-windowsws-scsi">
    <title>Uso de una unidad de DVD SCSI conectada a FCP</title>
    <para>
     Tras realizar la IPL desde el DVD SCSI, como se describe en la <xref linkend="sec-info-iplopt-dvd"/>, el sistema de instalación usa el DVD como medio de instalación. En ese caso, no serán necesarios los medios de instalación de un servidor FTP, NFS ni SMB. Sin embargo, sí debe conocer los datos de configuración de red de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, ya que debe configurar la red durante la instalación para realizar la instalación gráfica con VNC o con X.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-makeavail-zpxe-cobbler">
   <title>Uso de un servidor Cobbler para zPXE</title>
   <para>
    IPL desde la red requiere un servidor Cobbler que proporcione el núcleo, initrd y los datos de instalación. Para preparar el servidor Cobbler se deben llevar a cabo cuatro pasos:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Importar los datos de instalación
     </para>
    </listitem>
    <listitem>
     <para>
      Añadir una distribución
     </para>
    </listitem>
    <listitem>
     <para>
      Añadir perfiles
     </para>
    </listitem>
    <listitem>
     <para>
      Añadir sistemas
     </para>
    </listitem>
   </itemizedlist>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-import">
    <title>Importar los datos de instalación</title>
    <para>
     La importación de los medios requiere que el origen de instalación esté disponible en el servidor Cobbler, ya sea desde el DVD o desde un origen de red. Ejecute el siguiente comando para importar los datos:
    </para>
<screen>cobbler import --path=<replaceable>PATH</replaceable><co xml:id="cobbler-import-path"/> --name=<replaceable>IDENTIFIER</replaceable><co xml:id="cobbler-import-dirname"/> --arch=s390x</screen>
    <calloutlist>
     <callout arearefs="cobbler-import-path">
      <para>
       Punto de montaje de los datos de instalación.
      </para>
     </callout>
     <callout arearefs="cobbler-import-dirname">
      <para>
       Una cadena que identifica el producto importado, por ejemplo <quote>sles12_s390x</quote>. La cadena se utiliza como nombre del subdirectorio en el que se copian los datos de instalación. En un servidor Cobbler que se ejecute en SUSE Linux Enterprise Server es <filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFICADOR</replaceable></filename>. Esta vía puede ser diferente si Cobbler se ejecuta en otro sistema operativo.
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-add-distro">
    <title>Añadir una distribución</title>
    <para>
     Al añadir una distribución, está indicando a Cobbler que proporcione el núcleo y el initrd necesarios para IPL a través de zPXE. Ejecute el comando siguiente en el servidor Cobbler para añadir <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> para IBM Z:
    </para>
<screen>cobbler distro add --arch=s390 --breed=suse --name="<replaceable>IDENTIFIER</replaceable>"<co xml:id="cobbler-add-identifier"/> \
  --os-version=sles12<co xml:id="cobbler-add-os"/> \
  --initrd=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/initrd<co xml:id="cobbler-add-initrd"/> \
  --kernel=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/linux<co xml:id="cobbler-add-kernel"/> \
  --kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co xml:id="cobbler-add-server"/>
    </screen>
    <calloutlist>
     <callout arearefs="cobbler-add-identifier">
      <para>
       Identificador personalizado para la distribución; por ejemplo, <quote>SLES <phrase role="productnumber">12 SP5</phrase>  Z</quote>. Debe ser único.
      </para>
     </callout>
     <callout arearefs="cobbler-add-os">
      <para>
       Identificador del sistema operativo. Utilice <literal>sles12</literal>.
      </para>
     </callout>
     <callout arearefs="cobbler-add-initrd">
      <para>
       Vía a initrd. La primera parte de la vía (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFICADOR</replaceable>/</filename>) depende de la ubicación en la que Cobbler haya importado los datos y el nombre del subdirectorio elegido al importar los datos de instalación.
      </para>
     </callout>
     <callout arearefs="cobbler-add-kernel">
      <para>
       Vía al núcleo. La primera parte de la vía (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFICADOR</replaceable>/</filename>) depende de la ubicación en la que Cobbler haya importado los datos y el nombre del subdirectorio elegido al importar los datos de instalación.
      </para>
     </callout>
     <callout arearefs="cobbler-add-server">
      <para>
       URL al directorio de instalación en el servidor Cobbler.
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-profile">
    <title>Ajustar el perfil</title>
    <para>
     Al añadir una distribución (consulte la <xref linkend="sec-prep-makeavail-zpxe-cobbler-add-distro"/>), se crea automáticamente un perfil con el valor <replaceable>IDENTIFIER</replaceable> correspondiente. Use el comando siguiente para realizar una serie de ajustes necesarios:
    </para>
<screen>cobbler distro edit \
--name=<replaceable>IDENTIFIER</replaceable><co xml:id="cobbler-profile-name"/> --os-version=sles10<co xml:id="cobbler-profile-os"/> --ksmeta=""<co xml:id="cobbler-profile-meta"/>
--kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co xml:id="cobbler-profile-opts"/></screen>
    <calloutlist>
     <callout arearefs="cobbler-profile-name">
      <para>
       Identificador del perfil. Se debe usar la misma cadena que se especificó cuando se añadió la distribución.
      </para>
     </callout>
     <callout arearefs="cobbler-profile-os">
      <para>
       Versión del sistema operativo. Distribución a la que debe aplicarse el perfil. Debe usar la cadena especificada con <option>--name=<replaceable>IDENTIFIER</replaceable></option> en el paso de importación.
      </para>
     </callout>
     <callout arearefs="cobbler-profile-meta">
      <para>
       Opción necesaria para crear una plantilla de los archivos de KickStart. No se usa para SUSE, así que se debe definir un valor vacío como se especifica en el ejemplo.
      </para>
     </callout>
     <callout arearefs="cobbler-profile-opts">
      <para>
       Lista separada por espacios de los parámetros del núcleo. Debe incluir al menos el parámetro <literal>install</literal>, como se muestra en el ejemplo.
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-system">
    <title>Añadir sistemas</title>
    <para>
     El último paso necesario es añadir sistemas al servidor Cobbler. Es necesario añadir sistemas por cada invitado de IBM Z que deba arrancar mediante zPXE. Los invitados se identifican mediante su ID de usuario z/VM (en el siguiente ejemplo, se presupone un ID denominado <quote>linux01</quote>). Tenga en cuenta que este ID debe ser una cadena en minúsculas. Para añadir un sistema, ejecute el siguiente comando:
    </para>
<screen>cobbler system add --name=linux01 --hostname=linux01.example.com \
--profile=<replaceable>IDENTIFIER</replaceable> --interface=qdio \
--ip-address=192.168.2.103 --subnet=192.168.2.255 --netmask=255.255.255.0 \
--name-servers=192.168.1.116 --name-servers-search=example.com \
--gateway=192.168.2.1 --kopts="<replaceable>KERNEL_OPTIONS</replaceable>"</screen>
    <para>
     Con la opción <option>--kopts</option>, puede especificar los parámetros de instalación y del núcleo que normalmente especificaría en el archivo parmfile. Los parámetros se introducen como lista de elementos separados por espacios, con el formato <replaceable>PARÁMETRO1=VALOR1 PARÁMETRO2=VALOR2</replaceable>. El instalador solicitará los parámetros ausentes. Para una instalación totalmente automatizada, deberá especificar todos los parámetros de red, de DASD y proporcionar un archivo de AutoYaST. A continuación se muestra un ejemplo de invitado equipado con una interfaz OSA que emplea los mismos parámetros de red anteriores.
    </para>
<screen>--kopts=" \
AutoYaST=http://192.168.0.5/autoinst.xml \
Hostname=linux01.example.com \
Domain=example.com \
HostIP=192.168.2.103 \
Gateway=192.168.2.1 \
Nameserver=192.168.1.116 \
Searchdns=example.com \
InstNetDev=osa; \
Netmask=255.255.255.0 \
Broadcast=192.168.2.255 \
OsaInterface=qdio \
Layer2=0 \
PortNo=0 \
ReadChannel=0.0.0700 \
WriteChannel=0.0.0701 \
DataChannel=0.0.0702 \
DASD=600"</screen>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-makeavail-dvd-usb-hmc">
   <title>Instalación desde DVD o memoria USB de la HMC</title>
   <para>
    Para instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en servidores IBM Z, normalmente es necesario un origen de instalación de red. Sin embargo, en algunos entornos, este requisito podría ser imposible de cumplir. Con SUSE Linux Enterprise Server, puede usar el DVD existente o la memoria USB de la consola de gestión de Hardware (HMC) como origen para la instalación en una LPAR.
   </para>
   <para>
    Para instalar desde los medios en el DVD o la memoria USB de la HMC, siga estos pasos:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Añada
     </para>
     <para>
      <option>install=hmc:/</option>
     </para>
     <para>
      a <filename>parmfile</filename> (consulte la <xref linkend="sec-appdendix-parm"/>) o a las opciones del núcleo.
     </para>
     <para/>
    </listitem>
    <listitem>
     <para>
      Como alternativa, en el modo manual, en <filename>linuxrc</filename>, seleccione:
     </para>
     <para>
      <emphasis role="italic">Start Installation</emphasis> (Iniciar instalación), después
     </para>
     <para>
      <emphasis role="italic">Installation</emphasis> (Instalación) y después
     </para>
     <para>
      <emphasis role="italic">Hardware Management Console</emphasis> (Consola de gestión de hardware).
     </para>
     <para>
      El medio de instalación debe estar insertado en la HMC.
     </para>
    </listitem>
   </itemizedlist>
   <important>
    <title>configuración de red</title>
    <para>
     No olvide configurar la red en <filename>linuxrc</filename> antes de iniciar la instalación. No hay ninguna forma de transmitir parámetros de arranque más tarde, y es muy probable que se necesite acceso a la red. En <filename>linuxrc</filename>, diríjase a <emphasis role="italic">Start Installation</emphasis> (Iniciar instalación) y seleccione <emphasis role="italic">Network Setup</emphasis> (Configuración de red).
    </para>
   </important>
   <important>
    <title>el sistema Linux debe arrancar primero</title>
    <para>
     Antes de otorgar acceso a los medios del DVD o la memoria USB de la HMC, espere a que se arranque el sistema Linux. Al realizar una carga inicial del programa se puede interrumpir la conexión entre la HMC y la LPAR. Si falla el primer intento de usar el método descrito, puede otorgar acceso y volver a probar la opción <option>HMC</option>.
    </para>
   </important>
   <note>
    <title>repositorio de instalación</title>
    <para>
     Dada la naturaleza transitoria de la asignación, el DVD o los archivos de la memoria USB no se conservan como repositorio para la instalación. Si necesita un repositorio de instalación, registre y use el repositorio en línea.
    </para>
   </note>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-inst-types">
  <title>Tipos de instalación</title>
  <para>
   En esta sección se proporciona información acerca de los pasos necesarios para instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> con cada uno de los modos de instalación y dónde encontrar la información adecuada. Después de llevar a cabo los preparativos descritos en los capítulos anteriores, siga la descripción general del modo de instalación deseado para instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en el sistema.
  </para>
  <para>
   Tal y como se describe en la <xref linkend="sec-prep-makeavail"/>, existen tres modos de instalación para Linux en IBM Z:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Instalación en una LPAR
    </para>
   </listitem>
   <listitem>
    <para>
     Instalación en z/VM
    </para>
   </listitem>
   <listitem>
    <para>
     Instalación de invitado de KVM
    </para>
   </listitem>
  </itemizedlist>
  <procedure xml:id="pro-prep-inst-types-lpar">
   <title>Descripción general de la instalación en una LPAR</title>
   <step>
    <para>
     Prepare los dispositivos necesarios para la instalación. Consulte la <xref linkend="sec-prep-prep-ipl-natlpar"/>.
    </para>
   </step>
   <step>
    <para>
     Realice la carga inicial de programa (IPL) del sistema de instalación. Consulte la <xref linkend="sec-prep-ipling-lpar"/>.
    </para>
   </step>
   <step>
    <para>
     Configure la red. Consulte la <xref linkend="sec-prep-netcfg"/>.
    </para>
   </step>
   <step>
    <para>
     Conéctese al sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Consulte la <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Inicie la instalación mediante YaST y realice la carga de programa inicial (IPL) del sistema instalado. Consulte el <xref linkend="cha-inst"/>.
    </para>
   </step>
  </procedure>
  <procedure xml:id="pro-prep-inst-types-vm">
   <title>Descripción general de la instalación en z/VM</title>
   <step>
    <para>
     Prepare los dispositivos necesarios para la instalación. Consulte la <xref linkend="sec-prep-prep-ipl-vm"/>.
    </para>
   </step>
   <step>
    <para>
     Realice la carga inicial de programa (IPL) del sistema de instalación. Consulte la <xref linkend="sec-prep-ipling-vm"/>.
    </para>
   </step>
   <step>
    <para>
     Configure la red. Consulte la <xref linkend="sec-prep-netcfg"/>.
    </para>
   </step>
   <step>
    <para>
     Conéctese al sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Consulte la <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Inicie la instalación mediante YaST y realice la carga de programa inicial (IPL) del sistema instalado. Consulte el <xref linkend="cha-inst"/>.
    </para>
   </step>
  </procedure>
  <procedure xml:id="pro-prep-inst-types-kvm">
   <title>Descripción general de una instalación de invitado de KVM</title>
   <step>
    <para>
     Cree una imagen de disco virtual y escriba un archivo XML de dominio. Consulte la <xref linkend="sec-prep-prep-ipl-kvm"/>.
    </para>
   </step>
   <step>
    <para>
     Prepare el destino de instalación y realice la IPL en el invitado de máquina virtual. Consulte la <xref linkend="sec-prep-ipling-kvm"/>.
    </para>
   </step>
   <step>
    <para>
     <xref linkend="sec-prep-netcfg-data"/>.
    </para>
   </step>
   <step>
    <para>
     Conéctese al sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Consulte la <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Inicie la instalación mediante YaST y realice la carga de programa inicial (IPL) del sistema instalado. Consulte el <xref linkend="cha-inst"/>.
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-prep-prep-ipl">
  <title>Preparación de la IPL del sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para/>
  <sect3 xml:id="sec-prep-prep-ipl-natlpar">
   <title>Preparación de la IPL de una instalación de LPAR</title>
   <para>
    Configure el sistema IBM Z para que se inicie en el modo ESA/S390 o en el modo solo Linux con un perfil de activación adecuado e IOCDS. Consulte la documentación de IBM para obtener información sobre cómo hacerlo. Pase a la <xref linkend="sec-prep-ipling-lpar"/>.
   </para>
  </sect3>
  <sect3 xml:id="sec-prep-prep-ipl-vm">
   <title>Preparación de la IPL de una instalación de z/VM</title>
   <para/>
   <sect4 xml:id="sec-prep-prep-ipl-vm-linux-guest">
    <title>Adición de un sistema invitado Linux</title>
    <para>
     El primer paso consisten en conectar y formatear uno o varios DASD en el sistema que vaya a utilizar el sistema invitado Linux en z/VM. A continuación, cree un nuevo usuario en z/VM. El ejemplo muestra el directorio de un usuario <literal>LINUX1</literal> con la contraseña <literal>LINPWD</literal>, 1 GB de memoria (ampliables hasta 2 GB), 32 MB de memoria RAM expandida (XSTORE), varios minidiscos (MDISK), dos CPU y un dispositivo QDIO OSA.
    </para>
    <tip>
     <title>asignación de memoria a invitados de z/VM</title>
     <para>
      Al asignar memoria a un invitado de z/VM, asegúrese de que el tamaño de la memoria se ajusta a las necesidades del tipo de instalación deseado. Consulte la <xref linkend="sec-info-sysreq-sysreq-hw-mem"/>. Para definir el tamaño de memoria con el valor de 1 GB, utilice el comando <command>CP DEFINE STORAGE 1G</command>. Cuando haya finalizado la instalación, cambie el tamaño de la memoria al valor que desee.
     </para>
    </tip>
    <example xml:id="ex-prep-prep-ipl-vm-linux-guest-config">
     <title>Configuración de un directorio z/VM</title>
<screen>USER LINUX1 LINPWD 1024M 2048M G
*____________________________________________
* LINUX1
*____________________________________________
* This VM Linux guest has two CPUs defined.

CPU 01 CPUID 111111
CPU 02 CPUID 111222
IPL CMS PARM AUTOCR
IUCV ANY
IUCV ALLOW
MACH ESA 10
OPTION MAINTCCW RMCHINFO
SHARE RELATIVE 2000
CONSOLE 01C0 3270 A
SPOOL 000C 2540 READER *
SPOOL 000D 2540 PUNCH A
SPOOL 000E 3203 A
* OSA QDIO DEVICE DEFINITIONS
DEDICATE 9A0 9A0
DEDICATE 9A1 9A1
DEDICATE 9A2 9A2
*
LINK MAINT 0190 0190 RR
LINK MAINT 019E 019E RR
LINK MAINT 019D 019D RR
* MINIDISK DEFINITIONS
MDISK 201 3390 0001 0050 DASD40 MR ONE4ME TWO4ME THR4ME
MDISK 150 3390 0052 0200 DASD40 MR ONE4ME TWO4ME THR4ME
MDISK 151 3390 0253 2800 DASD40 MR ONE4ME TWO4ME THR4ME</screen>
    </example>
    <para>
     Este ejemplo utiliza el minidisco 201 como disco personal del invitado. El minidisco 150, con 200 cilindros, es el dispositivo swap de Linux. El disco 151, con 2800 cilindros, aloja la instalación de Linux.
    </para>
    <para>
     Ahora añada (como usuario <systemitem class="username">MAINT</systemitem>) el invitado al directorio de usuario con <command>DIRM FOR LINUX1 ADD</command>. Introduzca el nombre del invitado (<literal>LINUX1</literal>) y pulse <keycap>F5</keycap>. Configure el entorno del usuario mediante:
    </para>
<screen>DIRM DIRECT
DIRM USER WITHPASS</screen>
    <para>
     El último comando devuelve un número de archivo de lector. Necesitará este número para el siguiente comando:
    </para>
<screen>RECEIVE &lt;number&gt; USER DIRECT A (REPL)</screen>
    <para>
     A continuación podrá entrar en el sistema invitado como usuario <systemitem class="username">LINUX1</systemitem>.
    </para>
    <para>
     Si la opción <literal>dirmaint</literal> no está disponible, consulte la documentación de IBM para configurar este usuario.
    </para>
    <para>
     Pase a la <xref linkend="sec-prep-ipling-vm"/>.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-prep-ipl-kvm">
   <title>Preparación de la IPL de una instalación de invitado de KVM</title>
   <para>
    Una instalación de invitado de KVM requiere un archivo XML de dominio donde se defina la máquina virtual y al menos una imagen de disco virtual para la instalación.
   </para>
   <sect4 xml:id="sec-prep-prep-ipl-kvm-disk">
    <title>Creación de una imagen de disco virtual</title>
    <para>
     Por defecto, libvirt busca imágenes de disco en <filename>/var/lib/libvirt/images/</filename> en el servidor host de máquina virtual. Aunque las imágenes también se pueden almacenar en cualquier lugar del sistema de archivos, se recomienda almacenarlas todas en una única ubicación para facilitar el mantenimiento. En el ejemplo siguiente, se crea una imagen de qcow2 con un tamaño de 10 GB en <filename>/var/lib/libvirt/images/</filename>. Para obtener más información, consulte el <xref linkend="cha-qemu-guest-inst-qemu-img"/>.
    </para>
    <procedure>
     <step>
      <para>
       Entre en el servidor host de KVM.
      </para>
     </step>
     <step>
      <para>
       Ejecute el siguiente comando para crear la imagen:
      </para>
<screen>qemu-img create -f qcow2 /var/lib/libvirt/images/s12lin_qcow2.img 10G</screen>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec-prep-prep-ipl-kvm-domain">
    <title>Escritura de un archivo XML de dominio</title>
    <para>
     Para definir el invitado de máquina virtual se usa un archivo XML de dominio. Para crear el archivo XML de dominio, abra un archivo vacío <filename>s12-1.xml</filename> en un editor y cree un archivo como en el ejemplo siguiente.
    </para>
    <example>
     <title>Archivo XML de dominio de ejemplo</title>
     <para>
      En el ejemplo siguiente, se crea un invitado de máquina virtual con una sola CPU, 1 GB de RAM y la imagen de disco virtual creada en la sección anterior (<xref linkend="sec-prep-prep-ipl-kvm-disk"/>). Se presupone que la interfaz de red del host a la que se conecta el servidor virtual es <literal>bond0</literal>. Cambie el elemento de dispositivos de origen para que coincida con la configuración de la red.
     </para>
<screen>&lt;domain type="kvm"&gt;
 &lt;name&gt;s12-1&lt;/name&gt;
 &lt;description&gt;Guest-System SUSE Sles12&lt;/description&gt;
 &lt;memory&gt;1048576&lt;/memory&gt;
 &lt;vcpu&gt;1&lt;/vcpu&gt;
 &lt;os&gt;
  &lt;type arch="s390x" machine="s390-ccw-virtio"&gt;hvm&lt;/type&gt;
  &lt;!-- Boot kernel - remove 3 lines after successfull installation --&gt;
  &lt;kernel&gt;/var/lib/libvirt/images/s12-kernel.boot&lt;/kernel&gt;
  &lt;initrd&gt;/var/lib/libvirt/images/s12-initrd.boot&lt;/initrd&gt;
  &lt;cmdline&gt;linuxrcstderr=/dev/console&lt;/cmdline&gt;
 &lt;/os&gt;
 &lt;iothreads&gt;1&lt;/iothreads&gt;
 &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
 &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
 &lt;on_crash&gt;preserve&lt;/on_crash&gt;
 &lt;devices&gt;
  &lt;emulator&gt;/usr/bin/qemu-system-s390x&lt;/emulator&gt;
  &lt;disk type="file" device="disk"&gt;
   &lt;driver name="qemu" type="qcow2" cache="none" iothread="1" io="native"/&gt;
   &lt;source file="/var/lib/libvirt/images/s12lin_qcow2.img"/&gt;
   &lt;target dev="vda" bus="virtio"/&gt;
  &lt;/disk&gt;
  &lt;interface type="direct"&gt;
   &lt;source dev="bond0" mode="bridge"/&gt;
   &lt;model type="virtio"/&gt;
  &lt;/interface&gt;
  &lt;console type="pty"&gt;
   &lt;target type="sclp"/&gt;
  &lt;/console&gt;
 &lt;/devices&gt;
&lt;/domain&gt;</screen>
    </example>
   </sect4>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-ipling">
  <title>Carga inicial del programa del sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para/>
  <sect3 xml:id="sec-prep-ipling-lpar">
   <title>Carga de programa inicial de una instalación de LPAR</title>
   <para>
    Hay distintas formas de realizar la carga inicial del programa de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en una partición lógica. El método más adecuado consiste en utilizar la función de carga desde el CD-ROM o el servidor del SE o la HMC.
   </para>
   <sect4 xml:id="sec-prep-ipling-lpar-cdrom">
    <title>IPL desde el DVD-ROM</title>
    <para>
     Marque la LPAR en la que desee realizar la instalación y seleccione <guimenu>Load from CD-ROM or server</guimenu> (Cargar desde CD-ROM o servidor). Deje en blanco el campo de ubicación de archivos o introduzca la vía al directorio raíz de primer DVD-ROM y seleccione continuar. En la lista de opciones que aparece, elija la selección por defecto. <guimenu>Operating system messages</guimenu> (Mensajes del sistema operativo) debería empezar a mostrar los mensajes de arranque del núcleo.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-lpar-dvd">
    <title>IPL desde un DVD SCSI conectado a FCP</title>
    <para>
     Puede emplear el procedimiento <guimenu>Load</guimenu> (Cargar) seleccionando <guimenu>SCSI</guimenu> en <guimenu>Load type</guimenu> (Tipo de carga) para realizar la IPL desde SCSI. Escriba los valores WWPN (del inglés Worldwide Port Number, número de puerto universal) y LUN (del inglés Logical Unit Number, número de unidad lógica) que proporcione el puente o el dispositivo de almacenamiento SCSI (16 números, sin olvidar los ceros finales). El selector del programa de arranque debe ser 2. Utilice el adaptador FCP como <guimenu>dirección de carga</guimenu> y realice una IPL.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-ipling-vm">
   <title>Carga de programa inicial de una instalación de z/VM</title>
   <para>
    En esta sección se describe la carga inicial de programa (IPL) para instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> para IBM Z en un sistema z/VM.
   </para>
   <sect4 xml:id="sec-prep-ipling-vm-reader">
    <title>Carga inicial de programa (IPL) desde el lector de z/VM</title>
    <para>
     Necesitará una conexión TCP/IP que funcione y un programa cliente FTP dentro del invitado z/VM recién definido para transferir el sistema de instalación a través de FTP. La configuración de TCP/IP para z/VM escapa al alcance de este manual. Consulte la documentación pertinente de IBM.
    </para>
    <para>
     Entre como sistema invitado Linux de z/VM para realizar la IPL. Haga que el contenido del directorio <filename>/boot/s390x</filename> del DVD 1 de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> para IBM Z esté disponible dentro de la red a través de FTP. Obtenga los archivos <filename>linux</filename>, <filename>initrd</filename>, <filename>parmfile</filename> y <filename>sles12.exec</filename> de ese directorio. Transfiera los archivos con un tamaño de bloque fijo de 80 caracteres. Especifíquelo con el comando FTP <command>locsite fix 80</command>. Es importante copiar <filename>linux</filename> (el núcleo de Linux) e <filename>initrd</filename> (la imagen de instalación) como archivos binarios, por lo que debe utilizar el modo de transferencia <literal>binario</literal>. Se deben transferir <filename>parmfile</filename> y <filename>sles12.exec</filename> en modo ASCII.
    </para>
    <para>
     El ejemplo muestra los pasos necesarios. En este ejemplo, se puede acceder a los archivos necesarios desde un servidor FTP en la dirección IP <literal>192.168.0.3</literal> y el nombre de inicio de sesión es <systemitem class="username">lininst</systemitem>. Los datos pueden ser diferentes para su red.
    </para>
    <example xml:id="ex-prep-ipling-vm-reader-ftp-ftptrans">
     <title>Transferencia de archivos binarios mediante FTP</title>
<screen>FTP 192.168.0.3
VM TCP/IP FTP Level 530
Connecting to 192.168.0.3, port 21
220 ftpserver FTP server (Version wu-2.4.2-academ[BETA-18](1)
Thu Feb 11 16:09:02 GMT 2010) ready.
USER
lininst
331 Password required for lininst
PASS
******
230 User lininst logged in.
Command:
binary
200 Type set to I
Command:
locsite fix 80
Command:
get /media/dvd1/boot/s390x/linux sles12.linux
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/linux
(10664192 bytes)
226 Transfer complete.
10664192 bytes transferred in 13.91 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/initrd sles12.initrd
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/initrd
(21403276 bytes)
226 Transfer complete.
21403276 bytes transferred in 27.916 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
ascii
200 Type set to A
Command:
get /media/dvd1/boot/s390x/parmfile sles12.parmfile
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/parmfile
(5 bytes)
226 Transfer complete.
5 bytes transferred in 0.092 seconds.
Transfer rate 0.05 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/sles12.exec sles12.exec
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/sles12.exec
(891 bytes)
226 Transfer complete.
891 bytes transferred in 0.097 seconds.
Transfer rate 0.89 Kbytes/sec.
Command:
quit</screen>
    </example>
    <para>
     Utilice el guion REXX sles12.exec que ha descargado para realizar la IPL del sistema de instalación de Linux. Este guion cargará el núcleo, el archivo parm y el disco RAM inicial en el lector para realizar la carga inicial de programa (IPL):
    </para>
    <example xml:id="sex-prep-ipling-vm-reader-startscript-slesexec">
     <title>SLES12 EXEC</title>
<screen>/* REXX LOAD EXEC FOR SUSE LINUX S/390 VM GUESTS       */
/* LOADS SUSE LINUX S/390 FILES INTO READER            */
SAY ''
SAY 'LOADING SLES12 FILES INTO READER...'
'CP CLOSE RDR'
'PURGE RDR ALL'
'SPOOL PUNCH * RDR'
'PUNCH SLES12 LINUX A (NOH'
'PUNCH SLES12 PARMFILE A (NOH'
'PUNCH SLES12 INITRD A (NOH'
'IPL 00C'</screen>
    </example>
    <para>
     Este guion permite realizar la IPL del sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> con el comando <command>sles12</command>. El núcleo de Linux se iniciará e imprimirá sus mensajes de arranque.
    </para>
    <para>
     Para continuar con la instalación, diríjase a la <xref linkend="sec-prep-netcfg"/>.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-vm-dvd">
    <title>IPL desde un DVD SCSI conectado a FCP</title>
    <para>
     Para realizar la IPL en z/VM, prepare el proceso de IPL SCSI utilizando el parámetro SET LOADDEV:
    </para>
<screen>SET LOADDEV PORTNAME 200400E8 00D74E00 LUN 00020000 00000000 BOOT 2</screen>
    <para>
     Después de configurar el parámetro LOADDEV con los valores adecuados, realice la carga inicial de programa (IPL) en el adaptador FCP. Por ejemplo:
    </para>
<screen>IPL FC00</screen>
    <para>
     Para continuar con la instalación, diríjase a la <xref linkend="sec-prep-netcfg"/>.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-vm-zpxe">
    <title>IPL de un servidor Cobbler con zPXE</title>
    <para>
     Para realizar la IPL desde un servidor Cobbler con zPXE, deberá transferir el guion <filename>zpxe.rexx</filename> mediante FTP del servidor Cobbler al invitado z/VM. El invitado z/VM requiere una conexión TCP/IP en funcionamiento y un cliente de FTP.
    </para>
    <para>
     Entre a la sesión como invitado Linux de z/VM en IPL y transfiera el guion con un tamaño fijo de 80 caracteres en modo ASCII (consulte un ejemplo en <xref linkend="ex-prep-ipling-vm-reader-ftp-ftptrans"/>). El guion <filename>zpxe.rexx</filename> está disponible en el servidor Cobbler en<filename>/usr/share/doc/packages/s390-tools/</filename>.
    </para>
    <para>
     <filename>zpxe.rexx</filename> debe reemplazar al archivo <filename>PROFILE EXEC</filename> del invitado. Realice una copia del archivo <filename>PROFILE EXEC</filename> existente y cambie el nombre de <filename>ZPXE REXX</filename> a <filename>PROFILE EXEC</filename>. Si lo prefiere, puede invocar al archivo <filename>ZPXE EXEC</filename> desde <filename>PROFILE REXX</filename> mediante una nueva línea con el siguiente contenido: <literal>'ZPXE REXX'</literal>.
    </para>
    <para>
     El último paso es crear un archivo de configuración, <filename>ZPXE CONF</filename>, que indique a <filename>ZPXE REXX</filename> con qué servidor de Cobbler debe ponerse en contacto y a qué disco debe aplicarse IPL. Ejecute <command>xedit zpxe conf a</command> y cree <filename>ZPXE CONF</filename> con el siguiente contenido (sustituya los datos de ejemplo según sea preciso):
    </para>
<screen>HOST cobbler.example.com
IPLDISK 600</screen>
    <para>
     Durante la siguiente entrada a la sesión en el invitado de z/VM, se establecerá la conexión con el servidor Cobbler. Si hay una instalación programada en el servidor Cobbler, se ejecutará. Para programar la instalación, ejecute el siguiente comando en el servidor Cobbler:
    </para>
<screen>cobbler system edit --name <replaceable>ID</replaceable><co xml:id="cobbler-sysedit-id"/> --netboot-enabled 1<co xml:id="cobbler-sysedit-netboot"/> --profile <replaceable>PROFILENAME</replaceable><co xml:id="cobbler-sysedit-profile"/></screen>
    <calloutlist>
     <callout arearefs="cobbler-sysedit-id">
      <para>
       ID de usuario de z/VM.
      </para>
     </callout>
     <callout arearefs="cobbler-sysedit-netboot">
      <para>
       Habilite IPL desde la red.
      </para>
     </callout>
     <callout arearefs="cobbler-sysedit-profile">
      <para>
       Nombre de un perfil existente (consulte la <xref linkend="sec-prep-makeavail-zpxe-cobbler-profile"/>).
      </para>
     </callout>
    </calloutlist>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-ipling-kvm">
   <title>Carga de programa inicial de una instalación de invitado de KVM</title>
   <para>
    Para iniciar la instalación de invitado, primero debe iniciar el invitado de máquina virtual definido en <xref linkend="sec-prep-prep-ipl-kvm-disk"/>. Un requisito previo es procurar que estén disponibles el núcleo e initrd necesarios para que la IPL.
   </para>
   <sect4 xml:id="sec-prep-ipling-kvm-prep">
    <title>Preparación del origen de la instalación</title>
    <para>
     El núcleo y el elemento initrd del sistema de instalación deben copiarse en el servidor host de máquina virtual para poder realizar la IPL del invitado de máquina virtual en el sistema de instalación.
    </para>
    <procedure>
     <step>
      <para>
       Entre en el host de KVM y asegúrese de que puede conectar con el host remoto o el dispositivo al que presta servicios el origen de instalación.
      </para>
     </step>
     <step>
      <para>
       Copie los dos archivos siguientes desde el origen de instalación a <filename>/var/lib/libvirt/images/</filename>. Si los datos se entregan desde un host remoto, use <command>ftp</command>, <command>sftp</command> o <command>scp</command> para transferir los archivos:
      </para>
      <simplelist>
       <member><filename>/boot/s390x/initrd</filename>
       </member>
       <member><filename>/boot/s390x/cd.ikr</filename>
       </member>
      </simplelist>
     </step>
     <step>
      <para>
       Renombre los archivos en el host de KVM:
      </para>
<screen>cd /var/lib/libvirt/images/
mv initrd s12-initrd.boot
 mv cd.ikr s12-kernel.boot</screen>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-kvm-guest">
    <title>Carga de programa inicial del invitado de máquina virtual</title>
    <para>
     Para realizar la IPL en el invitado de máquina virtual, entre en el host de KVM y ejecute el comando siguiente:
    </para>
<screen>virsh  create s12-1.xml --console</screen>
    <para>
     Cuando se complete la configuración del invitado de máquina virtual, el sistema de instalación se inicia y verá el siguiente mensaje:
    </para>
<screen>Domain s12-1 started
Connected to domain s12-1
Escape character is ^]
Initializing cgroup subsys cpuset
Initializing cgroup subsys cpu
Initializing
cgroup subsys cpuacct
.
.
Please make sure your installation medium is available.
Retry?
0) &lt;-- Back &lt;--
1) Yes
2) No</screen>
    <para>
     Responda <guimenu>2) No</guimenu> y seleccione <guimenu>Installation</guimenu> (Instalación) en el paso siguiente. Proceda del modo descrito en la <xref linkend="sec-prep-netcfg-data"/>.
    </para>
   </sect4>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-netcfg">
  <title>Configuración de la red</title>
  <para>
   Espere hasta que el núcleo haya completado sus rutinas de arranque. Si está realizando la instalación en el modo básico en una LPAR, abra <guimenu>Operating System Messages</guimenu> (Mensajes del sistema operativo) en la HMC o el SE.
  </para>
  <para>
   En primer lugar, elija <guimenu>Iniciar instalación</guimenu> en el menú principal de linuxrc y después seleccione <guimenu>Iniciar instalación o actualización</guimenu> para comenzar el proceso de instalación. Seleccione <guimenu>Red</guimenu> como medio de instalación y seleccione el tipo de protocolo de red que utilizará para la instalación. En la <xref linkend="sec-prep-makeavail"/> se describe cómo hacer que los datos de instalación estén disponibles para los distintos tipos de conexiones de red. Actualmente, las conexiones compatibles son <guimenu>FTP,</guimenu> <guimenu>HTTP,</guimenu> <guimenu>NFS</guimenu> y <guimenu>SMB/CIFS</guimenu> (uso compartido de archivos de Windows).
  </para>
  <para>
   A continuación, seleccione un dispositivo de red OSA o hipersockets donde desee recibir los datos de instalación en la lista de dispositivos disponibles. La lista también podría incluir dispositivos CTC, ESCON o IUCV, pero ya no se admiten en <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
  </para>
  <sect3 xml:id="sec-prep-netcfg-hypersockets">
   <title>Configuración de una interfaz HiperSockets</title>
   <para>
    Seleccione un dispositivo HiperSocket en la lista de dispositivos de red. A continuación, introduzca los números de los canales de lectura, escritura y datos:
   </para>
   <example xml:id="ex-appdendix-inst-netcontypes-types">
    <title>Tipos de conexiones de red admitidos y parámetros de los controladores</title>
<screen>Choose the network device.

 1) IBM parallel CTC Adapter (0.0.0600)
 2) IBM parallel CTC Adapter (0.0.0601)
 3) IBM parallel CTC Adapter (0.0.0602)
 4) IBM Hipersocket (0.0.0800)
 5) IBM Hipersocket (0.0.0801)
 6) IBM Hipersocket (0.0.0802)
 7) IBM OSA Express Network card (0.0.0700)
 8) IBM OSA Express Network card (0.0.0701)
 9) IBM OSA Express Network card (0.0.0702)
10) IBM OSA Express Network card (0.0.f400)
11) IBM OSA Express Network card (0.0.f401)
12) IBM OSA Express Network card (0.0.f402)
13) IBM IUCV

&gt; 4

Device address for read channel. (Enter '+++' to abort).
[0.0.800]&gt; 0.0.800

Device address for write channel. (Enter '+++' to abort).
[0.0.801]&gt; 0.0.801

Device address for data channel. (Enter '+++' to abort).
[0.0.802]&gt; 0.0.802</screen>
   </example>
  </sect3>
  <sect3 xml:id="sec-prep-netcfg-osa">
   <title>Configuración de un dispositivo OSA Express</title>
   <para>
    Seleccione un dispositivo OSA Express en la lista de dispositivos de red y proporcione un número de puerto. A continuación, introduzca los números de los canales de lectura, escritura y datos y el número de puerto, si fuera aplicable. Elija si desea habilitar la compatibilidad con la capa 2 de OSI.
   </para>
   <para>
    El número de puerto se ha añadido para admitir los nuevos dispositivos de red de 2 puertos OSA Express 3. Si no utiliza un dispositivo OSA Express 3, introduzca el valor <literal>0</literal>. Las tarjetas OSA Express también ofrecen la opción de ejecutarse en un modo de <quote>compatibilidad con la capa 2 de OSI</quote> o de utilizar el modo de <quote>capa 3</quote> más antiguo y más habitual. El modo que se establezca en la tarjeta afectará a todos los sistemas que compartan el dispositivo, incluidos los sistemas que se encuentren en otras LPAR. Si no está seguro, especifique el valor <literal>2</literal> para asegurar la compatibilidad con el modo por defecto que utilizan otros sistemas operativos, como z/VM y z/OS. Consulte con el administrador del hardware si necesita más información acerca de estas opciones.
   </para>
   <example xml:id="ex-appdendix-inst-netcontypes-gigabit-param">
    <title>Parámetros del controlador del dispositivo de red</title>
<screen>Choose the network device.

 1) IBM parallel CTC Adapter (0.0.0600)
 2) IBM parallel CTC Adapter (0.0.0601)
 3) IBM parallel CTC Adapter (0.0.0602)
 4) IBM Hipersocket (0.0.0800)
 5) IBM Hipersocket (0.0.0801)
 6) IBM Hipersocket (0.0.0802)
 7) IBM OSA Express Network card (0.0.0700)
 8) IBM OSA Express Network card (0.0.0701)
 9) IBM OSA Express Network card (0.0.0702)
10) IBM OSA Express Network card (0.0.f400)
11) IBM OSA Express Network card (0.0.f401)
12) IBM OSA Express Network card (0.0.f402)
13) IBM IUCV

&gt; 7

Enter the relative port number. (Enter '+++' to abort).
&gt; 0

Device address for read channel. (Enter '+++' to abort).
[0.0.0700]&gt; 0.0.0700

Device address for write channel. (Enter '+++' to abort).
[0.0.0701]&gt; 0.0.0701

Device address for data channel. (Enter '+++' to abort).
[0.0.0702]&gt; 0.0.0702

Enable OSI Layer 2 support?

0) &lt;-- Back &lt;--
1) Yes
2) No

&gt; 1

MAC address. (Enter '+++' to abort).
&gt; +++</screen>
   </example>
  </sect3>
  <sect3 xml:id="sec-prep-netcfg-data">
   <title>Configuración de la red y selección del origen de instalación</title>
   <para>
    Después de introducir todos los parámetros del dispositivo de red, el controlador respectivo se instala y observará los mensajes correspondientes del núcleo.
   </para>
   <para>
    A continuación, deberá decidir si desea utilizar la configuración automática de DHCP para configurar los parámetros de la interfaz de red. Dado que DHCP solo funciona con algunos dispositivos y requiere ajustes especiales de hardware, lo más recomendable es responder <guimenu>NO.</guimenu> Cuando lo haga, se le pedirán los siguientes parámetros de red:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Dirección IP del sistema que se va a instalar
     </para>
    </listitem>
    <listitem>
     <para>
      La máscara de red correspondiente (si no se ha especificado con la dirección IP)
     </para>
    </listitem>
    <listitem>
     <para>
      Dirección IP de un gateway para acceder al servidor
     </para>
    </listitem>
    <listitem>
     <para>
      Una lista de dominios de búsqueda cubiertos por el servidor de nombres de dominio (DNS)
     </para>
    </listitem>
    <listitem>
     <para>
      Dirección IP del servidor de nombres de dominios
     </para>
    </listitem>
   </itemizedlist>
   <example xml:id="ex-prep-netcfg-vm-network-setup">
    <title>parámetros de red</title>
<screen>Automatic configuration via DHCP?

0) &lt;-- Back &lt;--
1) Yes
2) No

&gt; 2

Enter your IP address with network prefix.

You can enter more than one, separated by space, if necessary.
Leave empty for autoconfig.

Examples: 192.168.5.77/24 2001:db8:75:fff::3/64. (Enter '+++' to abort).
&gt; 192.168.0.20/24

Enter your name server IP address.

You can enter more than one, separated by space, if necessary.
Leave empty if you don't need one.

Examples: 192.168.5.77 2001:db8:75:fff::3. (Enter '+++' to abort).
&gt; 192.168.0.1

Enter your search domains, separated by a space:. (Enter '+++' to abort).
&gt; example.com

Enter the IP address of your name server. Leave empty if you do not need one. (En
ter '+++' to abort).
&gt; 192.168.0.1</screen>
   </example>
   <para>
    Por último, se le pedirán detalles del servidor de instalación, como la dirección IP, el directorio que contiene los datos de instalación y las credenciales de entrada a la sesión. Cuando se hayan introducido todos los datos, el sistema de instalación se carga.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-connect">
  <title>Conexión con el sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para>
   Después de cargar el sistema de instalación, linuxrc solicita el tipo de pantalla que desea utilizar para controlar el procedimiento de instalación. Las opciones posibles son <literal>X11</literal> (sistema X Window), <literal>VNC</literal> (protocolo de procesamiento en red virtual), <literal>SSH</literal> (modo de texto o instalación X11 mediante shell segura) o <literal>Consola ASCII.</literal> Se recomienda seleccionar <literal>VNC</literal> o <literal>SSH</literal>.
  </para>
  <para>
   Si se selecciona la última opción (<literal>Consola ASCII</literal>), YaST se iniciará en modo de texto y podrá realizar la instalación directamente desde el terminal. Consulte el <xref linkend="cha-yast-text"/> para obtener instrucciones sobre cómo usar YaST en el modo de texto. El uso de la <literal>Consola ASCII</literal> solo resulta de utilidad si se instala en LPAR.
  </para>
  <note>
   <title>emulación de terminal para la consola ASCII</title>
   <para>
    Para poder trabajar con YaST en modo de texto, se debe ejecutar en un terminal con simulación VT220/Linux (también denominado <literal>consola ASCII</literal>). No puede usar YaST en un terminal 3270, por ejemplo.
   </para>
  </note>
  <sect3 xml:id="sec-inst-connect-vnc-inst">
   <title>Inicio de la instalación en VNC</title>
   <procedure>
    <step>
     <para>
      Al seleccionar la opción de instalación <literal>VNC</literal> se inicia el servidor VNC. Una breve nota en la consola proporciona información acerca del número de pantalla y la dirección IP que se necesitan para establecer una conexión con vncviewer.
     </para>
    </step>
    <step>
     <para>
      Inicie una aplicación cliente VNC en el sistema cliente.
     </para>
    </step>
    <step>
     <para>
      Introduzca la dirección IP y el número de pantalla del sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> cuando se le solicite.
     </para>
    </step>
    <step>
     <para>
      Después de establecer la conexión, empiece a instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> con YaST.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec-inst-connect-x">
   <title>Inicio de la instalación para el sistema X Window</title>
   <important>
    <title>mecanismo de autenticación X</title>
    <para>
     La instalación directa con el sistema X Window depende de un primitivo mecanismo de autenticación basado en nombres de hosts. Este mecanismo está inhabilitado en las versiones actuales de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Es preferible realizar la instalación mediante SSH o VNC.
    </para>
   </important>
   <procedure>
    <step>
     <para>
      Asegúrese de que el servidor X permite conectarse al cliente (el sistema que se está instalando). Establezca la variable <command>DISPLAYMANAGER_XSERVER_TCP_PORT_6000_OPEN="yes"</command> en el archivo <filename>/etc/sysconfig/displaymanager</filename>. A continuación, reinicie el servidor X y permita al cliente asociarse al servidor con el comando<command>xhost &lt;dirección IP del cliente&gt;</command>.
     </para>
    </step>
    <step>
     <para>
      Cuando el sistema de instalación lo solicite, introduzca la dirección IP del equipo en el que se ejecute el servidor X.
     </para>
    </step>
    <step>
     <para>
      Espere a que YaST se abra e inicie la instalación.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec-inst-connect-ssh">
   <title>Inicio de la instalación en SSH</title>
   <para>
    Para establecer la conexión con un sistema de instalación con el nombre <literal>earth</literal> mediante SSH, ejecute <command>ssh -X earth</command>. Si la estación de trabajo utiliza Microsoft Windows, emplee el emulador de terminal y cliente de ssh y telnet Putty, que está disponible en <link xlink:href="http://www.chiark.greenend.org.uk/~sgtatham/putty/"/>. Defina <guimenu>Enable X11 forwarding</guimenu> (Habilitar reenvío de X11) en Putty, en <menuchoice> <guimenu>Connection</guimenu> <guimenu>SSH</guimenu> <guimenu>X11</guimenu> </menuchoice> (Conexión &gt; SSH &gt; X11). Si utiliza otro sistema operativo, ejecute <command>ssh -X earth</command> para conectarse a un sistema de instalación con el nombre <systemitem>earth</systemitem>. Se admite el reenvío X sobre SSH si dispone de un servidor X local disponible. En caso contrario, YaST proporciona una interfaz de texto a través de ncurses.
   </para>
   <para>
    Aparecerá un indicador de inicio de sesión. Introduzca <literal>root</literal> e inicie sesión con su contraseña. Introduzca <command>yast.ssh</command> para iniciar YaST. Recibirá indicaciones de YaST sobre los pasos que debe llevar a cabo durante la instalación.
   </para>
   <para>
    Continúe con el procedimiento de instalación que se describe de forma detallada en el <xref linkend="cha-inst"/>.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-boot-procedure">
  <title>Procedimiento de arranque de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en IBM Z</title>
  <para>
   El proceso de arranque de SLES 10 y 11 seguía el esquema indicado a continuación. Para obtener información detallada, consulte la documentación incluida en <link xlink:href="http://www.ibm.com/developerworks/linux/linux390/documentation_suse.html"/>.
  </para>
  <orderedlist>
   <listitem>
    <para>
     Proporcione el núcleo.
    </para>
   </listitem>
   <listitem>
    <para>
     Proporcione o cree un initrd para el núcleo indicado.
    </para>
   </listitem>
   <listitem>
    <para>
     Proporcione las vías correctas para el initrd y el núcleo en <filename>/etc/zipl.conf</filename>.
    </para>
   </listitem>
   <listitem>
    <para>
     Instale la configuración proporcionada por <filename>/etc/zipl.conf</filename> en el sistema.
    </para>
   </listitem>
  </orderedlist>
  <para>
   En SLES 12, la forma en la que se arranca <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en IBM Z ha cambiado. Este cambio se debe a diversos motivos:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Alineación con otras arquitecturas: desde un punto de vista administrativo, los sistemas SLES deben tener el mismo comportamiento en todas las arquitecturas.
    </para>
   </listitem>
   <listitem>
    <para>
     Btrfs: el cargador de arranque zipl es técnicamente incompatible con Btrfs, el nuevo sistema de archivos raíz por defecto para SLES (consulte el <xref linkend="sec-filesystems-major-btrfs"/> para obtener más información).
    </para>
   </listitem>
   <listitem>
    <para>
     Compatibilidad con reversión de cambios del sistema con Snapper: Snapper, junto con Btrfs, proporciona instantáneas del sistema arrancable que se pueden usar para la reversión de los cambios del sistema (consulte el <xref linkend="cha-snapper"/> para obtener más información).
    </para>
   </listitem>
  </itemizedlist>
  <para>
   Por estos motivos, a partir de SLES 12, GRUB 2 sustituye a zipl en <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> para IBM Z. GRUB 2 en la arquitectura AMD64/Intel 64 incluye controladores de dispositivo en el nivel del firmware para acceder al sistema de archivos. En el mainframe no hay firmware, y añadir <literal>ccw</literal> a GRUB 2 no solo supondría una tarea complicada, sino que sería necesario volver a implementar zipl en GRUB 2. Por lo tanto, <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> usa un enfoque de dos fases:
  </para>
  <variablelist>
   <varlistentry>
    <term>Fase uno:</term>
    <listitem>
     <para>
      Se monta una partición independiente que contiene el núcleo y un initrd en <filename>/boot/zipl</filename> (de forma parecida a <filename>/boot/efi</filename> en plataformas UEFI). Este núcleo y el initrd se cargan mediante zipl con la configuración de <filename>/boot/zipl/config</filename>.
     </para>
     <para>
      Esta configuración añade la palabra clave <literal>initgrub</literal> a la línea de comandos del núcleo. Después de que el núcleo e initrd se hayan cargado, el initrd activa los dispositivos necesarios para montar el sistema de archivos raíz (consulte <filename>/boot/zipl/active_devices.txt</filename>). A continuación, se inicia un programa de espacio de usuario de GRUB 2, que lee <filename>/boot/grub2/grub.cfg</filename>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Fase dos:</term>
    <listitem>
     <para>
      El núcleo y el initrd especificados en <filename>/boot/grub2/grub.cfg</filename> se inician mediante <command>kexec</command>. Se activarán los dispositivos que aparecen en <filename>/boot/zipl/active_devices.txt</filename> que son necesarios para iniciar el sistema en disco. También se permitirán otros dispositivos de esa lista, pero se ignorarán. El sistema de archivos raíz se monta y el procedimiento de arranque continúa como en las demás arquitecturas.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>
</sect1>
