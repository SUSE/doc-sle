<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="adm_wbem.xml" version="5.0" xml:id="cha-wbem"> <title>SFCBを使用したWebベースの企業管理</title>
 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker/>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <para/>
 <sect1 xml:id="sec-wbem-intro">
  <title>概要および基本概念</title>

  <para>
   SUSE® Linux Enterprise Server (SLES)は、異種コンピューティングシステムおよび環境を統合管理するためのオープンスタンダードベースのツールのコレクションを提供しています。弊社の企業ソリューションでは、Distributed Management Task Forceが提案する標準を実装しています。ここでは、基本コンポーネントについて説明します。
  </para>

  <para>
   Distributed Management Task Force, Inc (DMTF)は、企業およびインターネットの環境に対する管理標準の開発を推進する業界団体です。DMTFは、管理の標準とイニシアチブを統合し、管理ソリューションを、より高い統合性とコスト効果を持つ、より相互運用可能なものにすることを目的としています。DMTF標準は、制御および通信のための共通システム管理コンポーネントを提供します。こうしたソリューションは、プラットフォームや技術に依存しません。<emphasis/>「Webベースの企業管理」および<emphasis/>「共通情報モデル」は2つの重要な技術です。
  </para>

  <para>
   Webベースの企業管理(WBEM)は、管理およびインターネット標準技術群です。WBEMは、企業のコンピューティング環境の管理を統合するために開発されました。Webテクノロジを使用した統一管理ツールコレクションを作成する機能を業界に提供するものです。WBEMは、次の標準で構成されます。
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     データモデル: CIM(Common Information Model)標準
    </para>
   </listitem>
   <listitem>
    <para>
     符号化規格: CIM-XML符号化規格
    </para>
   </listitem>
   <listitem>
    <para>
     伝送メカニズム: CIM operations over HTTP
    </para>
   </listitem>
  </itemizedlist>

  <para>
   共通情報モデルは、システム管理について記述した概念的な情報モデルです。特別な実装は必要なく、管理システム、ネットワーク、サービス、およびアプリケーション間で管理情報を交換できます。CIMには、2つのパート(CIM仕様とCIMスキーマ)があります。
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <emphasis>CIM仕様</emphasis>は、言語、ネーミング、およびメタスキーマを記述します。メタスキーマは、モデルの公式な定義です。メタスキーマは、モデルの内容、使用方法、および意味の説明に使う用語を定義します。メタスキーマの要素は、<emphasis>クラス</emphasis>、<emphasis>プロパティ</emphasis>、および<emphasis>メソッド</emphasis>です。また、メタスキーマは、<emphasis>指示</emphasis>と<emphasis>関連付け</emphasis>を<emphasis>クラス</emphasis>のタイプとして、<emphasis>参照</emphasis>を<emphasis>プロパティ</emphasis>としてサポートします。
    </para>
   </listitem>
   <listitem>
    <para>
     <emphasis>CIMスキーマ</emphasis>は、実際のモデルを記述します。このスキーマは、管理対象環境について利用可能な情報を編成できる汎用の概念的なフレームを提供する、プロパティと関連を持つ一連の名前が付けられたクラスです。
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Common Information Model Object Manager (CIMOM)は、CIM標準に基づいてオブジェクトを管理するアプリケーションです(CIM Object Manager)。CIMOMは、CIMOMプロバイダと、管理者がシステムを管理するCIMクライアントの間の通信を管理します。
  </para>

  <para>
   <emphasis>CIMOMプロバイダ</emphasis>は、クライアントアプリケーションから要求された特定のタスクをCIMOM内で実行するソフトウェアです。各プロバイダは、CIMOMのスキーマの1つまたは複数の機能や役割を果たします。これらのプロバイダは、ハードウェアを直接操作します。
  </para>

  <para>
   <emphasis>SBLIM (Standards Based Linux Instrumentation for Manageability)</emphasis>は、Webベースの企業管理(WBEM)をサポートするために設計されたツールのコレクションです。SUSE® Linux Enterprise Serverは、<emphasis>Small Footprint CIM Broker</emphasis>と呼ばれるSBLIMプロジェクトのオープンソースCIMOM (またはCIMサーバ)を使用します。
  </para>

  <para>
   <emphasis>コンパクトなフットプリントのCIMブローカ</emphasis>は、リソースに制限のある環境または埋め込み環境での使用を対象としたCIMサーバです。このサーバは、モジュール性と軽量性を同時に備えた設計になっています。このサーバはオープンスタンダードをベースとし、CMPIプロバイダ、CIM-XMLエンコーディング、および<emphasis>管理オブジェクトフォーマット(MOF)</emphasis>をサポートします。これは高度に設定可能なサーバであり、プロバイダがクラッシュしても動作は安定しています。また、HTTP、HTTPS、Unixドメインソケット、サービスロケーションプロトコル(SLP)、Javaデータベース接続(JDBC)など、さまざまなトランスポートプロトコルがサポートされるために、簡単にアクセスできます。
  </para>
 </sect1>
 <sect1 xml:id="sec-wbem-setting">
  <title>SFCBの設定</title>

  <para>
   SFCB (Small Footprint CIM Broker)環境を設定するには、<guimenu>SUSE Linux Enterprise Server</guimenu>のインストール時にYaSTの<phrase role="productname"><phrase os="sles">Webベースの企業管理パターン</phrase></phrase>が選択されていることを確認します。また、すでに実行中のサーバにインストールするコンポーネントとしてこれを選択します。次のパッケージがシステムにインストールされていることを確認します。
  </para>

  <variablelist>
   <varlistentry>
    <term>cim-schema、CIM (Common Information Model)スキーマ</term>
    <listitem>
     <para>
      共通情報モデル(CIM)が含まれます。CIMは、ネットワーク/企業環境内の総合的な管理情報を記述するモデルです。CIMは仕様とスキーマで構成されます。仕様は、他の管理モデルとの統合に関する詳細を定義しています。スキーマは、実際のモデルを記述しています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>python2-pywbem</term>
    <listitem>
     <para>
      管理対象オブジェクトをクエリおよび更新するために、WBEMプロトコルを使用してCIM操作呼び出しを行うためのPythonモジュールが含まれます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>cmpi-provider-register、CIMOM中立プロバイダ登録ユーティリティ</term>
    <listitem>
     <para>
      システム上に存在するすべてのCIMOMをCMPIプロバイダパッケージに登録できるユーティリティが含まれます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>sblim-sfcb、コンパクトなフットプリントのCIMブローカ</term>
    <listitem>
     <para>
      コンパクトなフットプリントのCIMブローカが含まれます。これは、CIM Operations over HTTPプロトコルに準拠するCIMサーバです。堅牢でリソース消費が抑制されているために、埋め込み環境およびリソースが制約された環境に特に適しています。SFCBでは、Common Manageability Programming Interface (CMPI)に対して記述されたプロバイダがサポートされます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>sblim-sfcc</term>
    <listitem>
     <para>
      コンパクトなフットプリントのCIMクライアントライブラリのランタイムライブラリが含まれます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>sblim-wbemcli</term>
    <listitem>
     <para>
      WBEMコマンドラインインタフェースが含まれます。これは、特に基本的なシステム管理タスクに適したスタンドアロンコマンドラインWBEMクライアントです。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <sect2 xml:id="sec-wbem-setting-daemon">
   <title>SFCBの起動、終了、およびステータスの確認</title>
   <para>
    CIMサーバのsfcbdデーモンは、Webベースの企業管理ソフトウェアとともにインストールされ、システム起動時にデフォルトで開始されます。次の表で、sfcbdの起動、停止、および確認ステータスを説明します。
   </para>
   <table xml:id="tab-wbem-setting-daemon-1" frame="topbot" rowsep="0">
    <title>sfcbdの管理用コマンド</title>
    <tgroup cols="2">
     <colspec colnum="1" colname="1"/>
     <colspec colnum="2" colname="2"/>
     <thead>
      <row rowsep="1">
       <entry colname="1">
        <para>
         タスク
        </para>
       </entry>
       <entry colname="2">
        <para>
         Linuxコ\'83\'7dンド
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row rowsep="0">
       <entry colname="1">
        <para>
         Start sfcbd
        </para>
       </entry>
       <entry colname="2">
        <para>
         コマンドラインで<systemitem class="username">root</systemitem>として「<command>systemctl start sfcb</command>」と入力します。
        </para>
       </entry>
      </row>
      <row rowsep="0">
       <entry colname="1">
        <para>
         sfcbdの停止
        </para>
       </entry>
       <entry colname="2">
        <para>
         コマンドラインで<systemitem class="username">root</systemitem>として「<command>systemctl stop sfcb</command>」と入力します。
        </para>
       </entry>
      </row>
      <row rowsep="0">
       <entry colname="1">
        <para>
         sfcbdの状態の確認
        </para>
       </entry>
       <entry colname="2">
        <para>
         コマンドラインで<systemitem class="username">root</systemitem>として「<command>systemctl status sfcb</command>」と入力します。
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
  </sect2>

  <sect2 xml:id="sec-wbem-setting-secure">
   <title>セキュアアクセスの確保</title>
   <para>
    SFCBのデフォルトのセットアップは、比較的安全(セキュア)です。ただし、SFCBコンポーネントに対するアクセスが組織で必要とされる安全性を満たしていることを確認します。
   </para>
   <sect3 xml:id="sec-wbem-setting-secure-cert">
    <title>証明書</title>
    <para>
     安全にSSL (Secure Socket Layers)通信を行うには、証明書が必要になります。SFCBがインストールされている場合、自己署名付き証明書が生成されています。
    </para>
    <para>
     <filename>/etc/sfcb/sfcb.cfg</filename>の<literal>sslCertificateFilePath: <replaceable>PATH_FILENAME</replaceable>
     </literal>設定を変更することで、デフォルトの証明書のパスを商用証明書または自己署名付きの証明書のパスに置き換えることができます。ファイルは、PEMフォーマットであることが必要です。
    </para>
    <para>
     デフォルトでは、SFCBは次の場所にサーバ証明書を想定しています。
    </para>
<screen>/etc/sfcb/server.pem</screen>
    <para>
     新しい証明書を生成するには、次のコマンドを実行します。
    </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> sh /usr/share/sfcb/genSslCert.sh
Generating SSL certificates in .
Generating a 2048 bit RSA private key
...................................................................+++
.+++
writing new private key to '/var/tmp/sfcb.0Bjt69/key.pem'
-----</screen>
    <para>
     デフォルトでは、このスクリプトにより現在の作業ディレクトリに証明書<filename>client.pem</filename>、<filename>file.pem</filename>、および<filename>server.pem</filename>が生成されます。スクリプトにより<filename>/etc/sfcb</filename>ディレクトリに証明書を生成する場合は、コマンドにこのパスを追加する必要があります。これらのファイルがすでに存在する場合、警告メッセージが表示されます。古い証明書は上書きされません。
    </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> sh /usr/share/sfcb/genSslCert.sh /etc/sfcb
Generating SSL certificates in .
WARNING: server.pem SSL Certificate file already exists.
         old file will be kept intact.
WARNING: client.pem SSL Certificate trust store already exists.
         old file will be kept intact.</screen>
    <para>
     ファイルシステムから古い証明書を削除し、このコマンドを再実行する必要があります。
    </para>
    <para>
     SFCBが証明書を使用する方法を変更するには、<xref linkend="sec-wbem-setting-secure-auth"/>を参照してください。
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-setting-secure-ports">
    <title>ポート</title>
    <para>
     デフォルトでは、SFCBはセキュアなポート5989を使用するすべての通信を受け入れるように設定されます。ここでは、通信ポートのセットアップと推奨される設定について説明します。
    </para>
    <variablelist>
     <varlistentry>
      <term>ポート5989(セキュア)</term>
      <listitem>
       <para>
        SFCB通信がHTTPSサービスを介して使用するセキュアなポート。デフォルトの設定です。この設定で、CIMOMとクライアントアプリケーション間のすべての通信は、サーバとワークステーション間でインターネットを通じて送信されるときに暗号化されます。ユーザは、SFCBサーバにアクセスするためにクライアントアプリケーションで認証を受ける必要があります。この設定を記録しておくことをお勧めします。ルータやファイアウォールがクライアントアプリケーションとモニタリングされるノードとの間に存在する場合に、SFCB CIMOMが必要なアプリケーションと通信できるようにするには、このポートを開いておく必要があります。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>ポート5988(非セキュア)</term>
      <listitem>
       <para>
        SFCB通信がHTTPSサービスを介して使用する非セキュアなポート。デフォルトでは、この設定は無効にされています。この設定では、CIMOMとクライアントアプリケーション間のすべての通信は、サーバとワークステーション間でインターネットを通じて送信されるときに、だれでも認証なしで開き、レビューできます。この設定は、CIMOMの問題をデバッグするときのみに使用することをお勧めします。問題が解決されたら、セキュアでないポートオプションを無効にしてください。SFCB CIMOMがセキュアでないアクセスを要求する必要なアプリケーションと通信できるようにするには、クライアントアプリケーションとモニタリングされるノードとの間に存在するルータやファイアウォールでこのポートを開いておく必要があります。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>
     デフォルトのポートの割り当てを変更するには、<xref linkend="sec-wbem-setting-secure-ports"/>を参照してください。
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-setting-secure-auth">
    <title>認証</title>
    <para>
     SFCBでは、HTTP基本認証、およびクライアント証明書に基づく認証がサポートされます(HTTP over SSL接続)。基本HTTP認証は、SFCB環境設定ファイル(デフォルトでは<literal>/etc/sfcb/sfcb.cfg</literal>)で、<filename>doBasicAuth=true</filename>を指定することにより有効になります。SFCBのSUSE® Linux Enterprise Serverインストールでは、プラグ可能認証モジュール(PAM)アプローチがサポートされます。したがって、ローカルルートユーザは、ローカルルートユーザの資格情報によりSFCB CIMOMに対して認証を行うことができます。
    </para>
    <para>
     <literal>sslClientCertificate</literal>設定プロパティが<literal>accept</literal>または<literal>require</literal>に設定されている場合、SFCB HTTPアダプタは、HTTP　over SSL (HTTPS)で接続したときにクライアントに証明書を要求します。<literal>require</literal>が指定された場合、(<literal>sslClientTrustStore</literal>を介して指定されたクライアント信頼ストアに従って)クライアントは有効な証明書を提供する<emphasis role="bold">必要</emphasis>がありますクライアントが証明書を提供しない場合、接続はCIMサーバにより拒否されます。
    </para>
    <para>
     <literal>sslClientCertificate =accept</literal>という設定は、明確でないことがあります。基本認証およびクライアント証明書認証が両方許可されている場合に、この設定は非常に役立ちます。クライアントが有効な証明書を提供できれば、HTTPS接続が確立され、基本認証手順は実行されません。この機能で証明書を検証できない場合、HTTP基本認証が代わりに実行されます。
    </para>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-wbem-config">
  <title>SFCB CIMOM設定</title>

  <para>
   SFCBは、CIMサーバの軽量な実装ですが、高度に設定可能です。複数のオプションによりその動作を制御できます。SFCBサーバは次の3つの方法で制御できます。
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     適切な環境変数を設定する
    </para>
   </listitem>
   <listitem>
    <para>
     コマンドラインオプションを使用する
    </para>
   </listitem>
   <listitem>
    <para>
     環境設定ファイルを変更する
    </para>
   </listitem>
  </itemizedlist>

  <sect2 xml:id="sec-wbem-config-env">
   <title>環境変数</title>
   <para>
    いくつかの環境変数は、SFCBの動作に直接影響します。これらの環境変数の変更を有効にするには、<command>systemctl restart sfcb</command>でSFCBデーモンを再起動する必要があります。
   </para>
   <variablelist>
    <varlistentry>
     <term><literal>PATH</literal>
     </term>
     <listitem>
      <para>
       <systemitem>sfcbd</systemitem>デーモンおよびユーティリティへのパスを指定します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>LD_LIBRARY_PATH</literal>
     </term>
     <listitem>
      <para>
       sfcbランタイムライブラリへのパスを指定します。また、このパスをシステムワイドの動的ローダ設定ファイル<filename>/etc/ld.so.conf</filename>に追加できます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>SFCB_PAUSE_PROVIDER</literal>
     </term>
     <listitem>
      <para>
       プロバイダ名を指定します。SFCBサーバは、プロバイダが最初にロードされた後に一時停止します。その後、デバッグの目的でプロバイダのプロセスにランタイムデバッガを接続できます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>SFCB_PAUSE_CODEC</literal>
     </term>
     <listitem>
      <para>
       SFCBコーデックの名前を指定します(現在、<literal>http</literal>のみサポートしています)。SFCBサーバは、コーデックが最初にロードされた後に一時停止します。その後、プロセスにランタイムデバッガを接続できます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>SFCB_TRACE</literal>
     </term>
     <listitem>
      <para>
       SFCBのデバッグメッセージレベルを指定します。有効な値は、0(デバッグメッセージなし)、または1(重要なデバッグメッセージ)～4(すべてのデバッグメッセージ)です。デフォルトは1です。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>SFCB_TRACE_FILE</literal>
     </term>
     <listitem>
      <para>
       有効な値は、0 (デバッグメッセージなし)または1 (主要なデバッグメッセージ)～4 (すべてのデバッグメッセージ)です。この変数を設定すると、指定のファイルにデバッグメッセージが代わりに書き込まれます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>SBLIM_TRACE</literal>
     </term>
     <listitem>
      <para>
       SBLIMプロバイダのデバッグメッセージレベルを指定します。有効な値は、0(デバッグメッセージなし)、または1(重要なデバッグメッセージ)～4(すべてのデバッグメッセージ)です。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>SBLIM_TRACE_FILE</literal>
     </term>
     <listitem>
      <para>
       デフォルトでは、SBLIMプロバイダはトレースメッセージをSTDERRに出力します。この変数を設定すると、指定のファイルにトレースメッセージが代わりに書き込まれます。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="sec-wbem-config-cmdline">
   <title>コマンドラインオプション</title>
   <para>
    SFCBデーモン<systemitem>sfcbd</systemitem>には、特定のランタイム機能をオン/オフするためのコマンドラインオプションがあります。SFCBデーモンの開始時に、これらのオプションを入力します。
   </para>
   <variablelist>
    <varlistentry>
     <term><literal>-c, --config-file</literal>=<replaceable>FILE</replaceable>
     </term>
     <listitem>
      <para>
       SFCBデーモンの開始時に、デフォルトで<filename>/etc/sfcb/sfcb.cfg</filename>から設定が読み込まれます。このオプションでは、代替の環境設定ファイルを指定できます。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>-d, --daemon</literal>
     </term>
     <listitem>
      <para>
       バックグラウンドで実行するようにsfcbdとその子プロセスを強制します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>-s, --collect-stats</literal>
     </term>
     <listitem>
      <para>
       ランタイム統計情報の収集をオンにします。現在の作業ディレクトリの<filename>sfcbStat</filename>ファイルに、さまざまなsfcbdランタイム統計情報が書き込まれます。デフォルトでは、統計情報は収集されません。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>-l, --syslog-level</literal>=<replaceable>LOGLEVEL</replaceable>
     </term>
     <listitem>
      <para>
       システムログ機能の冗長性レベルを指定します。<replaceable>LOGLEVEL</replaceable>は、LOG_INFO、LOG_DEBUG、またはLOG_ERR (デフォルト)のいずれかになります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>-k, --color-trace</literal>=<replaceable>ログレベル</replaceable>
     </term>
     <listitem>
      <para>
       プロセスごとに異なる色でトレース出力を印刷して、デバッグを容易にします。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>-t, --trace-components</literal>=<replaceable>NUM</replaceable>
     </term>
     <listitem>
      <para>
       <replaceable>NUM</replaceable>がトレースするコンポーネントを定義するORビットマスク整数である場合に、コンポーネントレベルのトレースメッセージをアクティブにします。<option>-t ? </option>を指定した後すべてのコンポーネントおよび関連する整数ビットマスクが表示されます。
      </para>
<screen><prompt>tux &gt; </prompt>sfcbd -t ?
---   Traceable Components:     Int       Hex
---            providerMgr:          1  0x0000001
---            providerDrv:          2  0x0000002
---             cimxmlProc:          4  0x0000004
---             httpDaemon:          8  0x0000008
---                upCalls:         16  0x0000010
---               encCalls:         32  0x0000020
---        ProviderInstMgr:         64  0x0000040
---       providerAssocMgr:        128  0x0000080
---              providers:        256  0x0000100
---            indProvider:        512  0x0000200
---       internalProvider:       1024  0x0000400
---             objectImpl:       2048  0x0000800
---                  xmlIn:       4096  0x0001000
---                 xmlOut:       8192  0x0002000
---                sockets:      16384  0x0004000
---              memoryMgr:      32768  0x0008000
---               msgQueue:      65536  0x0010000
---             xmlParsing:     131072  0x0020000
---         responseTiming:     262144  0x0040000
---              dbpdaemon:     524288  0x0080000
---                    slp:    1048576  0x0100000</screen>
      <para>
       sfcbdの内部機能を表示し、メッセージを生成しすぎない有用な値は<option>-t</option>
       <replaceable> 2019</replaceable>です。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="sec-wbem-config-confile">
   <title>SFCB環境設定ファイル</title>
   <para>
    SFCBは、起動後に環境設定ファイル<filename>/etc/sfcb/sfcb.cfg</filename>からランタイム設定を読み込みます。この動作は、起動時に<option>-c</option>オプションを使用して上書きできます。
   </para>
   <para>
    環境設定ファイルには、<option>オプション</option> : <replaceable>VALUE</replaceable>のペアが1行に1つずつ含まれています。このファイルに変更を加える場合は、使用している環境にネイティブな形式でファイルを保存するどのテキストエディタでも使用できます。
   </para>
   <para>
    オプションがシャープ記号(#)でコメントアウトされている設定では、デフォルト設定が使用されます。
   </para>
   <para>
    次のオプションリストは、完全でない可能性があります。完全なリストについては、<filename>/etc/sfcb/sfcb.cfg</filename>と<filename>/usr/share/doc/packages/sblim-sfcb/README</filename>を参照してください。
   </para>
   <sect3 xml:id="sec-wbem-config-confile-1">
    <title>httpPort</title>
    <bridgehead>目的</bridgehead>
    <para>
     CIMクライアントからのHTTP(非セキュア)要求を受信するためにsfcbdがリスンするローカルポート値を指定します。デフォルトは<literal>5988</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>httpPort:</literal> <replaceable>PORT_NUMBER</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-2">
    <title>enableHttp</title>
    <bridgehead>目的</bridgehead>
    <para>
     SFCBがHTTPクライアント接続を受け入れるかどうかを指定します。デフォルトは<literal>false</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>enableHttp:</literal> <replaceable>OPTION</replaceable>
    </para>
    <informaltable frame="topbot" rowsep="1">
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          オプション
         </para>
        </entry>
        <entry>
         <para>
          説明
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          true
         </para>
        </entry>
        <entry>
         <para>
          HTTP接続を有効にします。
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          false
         </para>
        </entry>
        <entry>
         <para>
          HTTP接続を無効にします。
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-3">
    <title>httpProcs</title>
    <bridgehead>目的</bridgehead>
    <para>
     新しい着信HTTP要求を拒否するまでの同時HTTPクライアント接続の最大数を指定します。デフォルトは<literal>8</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>httpProcs:</literal>
     <replaceable>MAX_NUMBER_OF_CONNECTIONS</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-3-5">
    <title>httpUserSFCB、httpUser</title>
    <bridgehead>目的</bridgehead>
    <para>
     これらのオプションは、HTTPサーバを実行するユーザを管理します。<option>httpUserSFCB</option>が<literal>true</literal>の場合、HTTPは、SFCBメインプロセスと同じユーザで実行されます。<literal>false</literal>の場合は、<option>httpUser</option>で指定されたユーザ名が使用されます。この設定は、HTTPとHTTPSの両方のサーバに使用されます。<option>httpUserSFCB</option> <emphasis>を</emphasis>false<option>に設定する場合は、</option>httpUser<literal>を指定する必要があります</literal>。デフォルトは、<literal>true</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>httpUserSFCB: true</literal>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-3-8">
    <title>httpLocalOnly</title>
    <bridgehead>目的</bridgehead>
    <para>
     HTTP要求をローカルホストだけに制限するかどうか指定します。デフォルトは<literal>false</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>httpLocalOnly: false</literal>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-4">
    <title>httpsPort</title>
    <bridgehead>目的</bridgehead>
    <para>
     sfcbdがCIMクライアントからのHTTPS要求をリスンするローカルポート値を指定します。デフォルトは<literal>5989</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>httpsPort: port_number</literal>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-5">
    <title>enableHttps</title>
    <bridgehead>目的</bridgehead>
    <para>
     SFCBがHTTPSクライアント接続を受け入れるかどうかを指定します。デフォルトは<literal>true</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>enableHttps: option</literal>
    </para>
    <informaltable frame="topbot" rowsep="1">
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          オプション
         </para>
        </entry>
        <entry>
         <para>
          説明
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          true
         </para>
        </entry>
        <entry>
         <para>
          HTTPS接続を有効にします。
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          false
         </para>
        </entry>
        <entry>
         <para>
          HTTPS接続を無効にします。
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-7">
    <title>httpsProcs</title>
    <bridgehead>目的</bridgehead>
    <para>
     新しい着信HTTPS要求を拒否するまでの同時HTTPSクライアント接続の最大数を指定します。デフォルトは<literal>8</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>httpsProcs:</literal> <replaceable>MAX_NUMBER_OF_CONNECTIONS</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-8">
    <title>enableInterOp</title>
    <bridgehead>目的</bridgehead>
    <para>
     SFCBで表示サポートに<emphasis>interop</emphasis>名前空間を提供するかどうかを指定します。デフォルトは<literal>true</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>enableInterOp:</literal> <replaceable>OPTION</replaceable>
    </para>
    <informaltable frame="topbot" rowsep="1">
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          オプション
         </para>
        </entry>
        <entry>
         <para>
          説明
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          true
         </para>
        </entry>
        <entry>
         <para>
          interop名前空間を有効にします。
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          false
         </para>
        </entry>
        <entry>
         <para>
          interop名前空間を無効にします。
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-9">
    <title>provProcs</title>
    <bridgehead>目的</bridgehead>
    <para>
     同時プロバイダプロセスの最大数を指定します。この時点以降、新しい着信要求により新しいプロバイダのロードが必要になった場合は、既存のプロバイダのいずれかが最初に自動的にアンロードされます。デフォルトは<literal>32</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>provProcs:</literal> <replaceable>MAX_NUMBER_OF_PROCS</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-10">
    <title>doBasicAuth</title>
    <bridgehead>目的</bridgehead>
    <para>
     要求を受け入れる前に、クライアントユーザIDに基づいて基本認証のオンまたはオフを切り替えます。デフォルト値は<literal>true</literal>で、基本的なクライアント認証が実行されます。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>doBasicAuth:</literal> <replaceable>OPTION</replaceable>
    </para>
    <informaltable frame="topbot" rowsep="1">
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          オプション
         </para>
        </entry>
        <entry>
         <para>
          説明
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          true
         </para>
        </entry>
        <entry>
         <para>
          基本認証を有効にします。
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          false
         </para>
        </entry>
        <entry>
         <para>
          基本認証を無効にします。
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-11">
    <title>basicAuthLib</title>
    <bridgehead>目的</bridgehead>
    <para>
     ローカルライブラリ名を指定します。SFCBサーバは、クライアントユーザIDを認証するためにライブラリをロードします。デフォルトは<literal>sfcBasicPAMAuthentication</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>provProcs:</literal> <replaceable>MAX_NUMBER_OF_PROCS</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-12">
    <title>useChunking</title>
    <bridgehead>目的</bridgehead>
    <para>
     このオプションは、HTTP/HTTPSの<quote>チャンク</quote>使用のオンまたはオフを切り替えます。オンに切り替えた場合、サーバは大量の応答データを、バッファして1つの<quote>チャンク</quote>ですべてを返信するのではなく、小さなチャンクでクライアントに返信します。デフォルトは<literal>true</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>useChunking:</literal> <replaceable>OPTION</replaceable>
    </para>
    <informaltable frame="topbot" rowsep="1">
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          オプション
         </para>
        </entry>
        <entry>
         <para>
          説明
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          true
         </para>
        </entry>
        <entry>
         <para>
          HTTP/HTTPSデータチャンクを有効にします。
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          false
         </para>
        </entry>
        <entry>
         <para>
          HTTP/HTTPSデータチャンクを無効にします。
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-13">
    <title>keepaliveTimeout</title>
    <bridgehead>目的</bridgehead>
    <para>
     1つの接続で、2つの要求の間、要求がなされてから接続を閉じるまでSFCB HTTPプロセスが待機する最大時間を秒数で指定します。<literal>0</literal>に設定すると、HTTP keep-aliveが無効になります。デフォルトは<literal>0</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>keepaliveTimeout:</literal> <replaceable>SECS</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-14">
    <title>keepaliveMaxRequest</title>
    <bridgehead>目的</bridgehead>
    <para>
     1つの接続で連続して受け付ける要求の最大数を指定します。<literal>0</literal>に設定すると、HTTP keep-aliveが無効になります。デフォルト値は<literal>10</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>keepaliveMaxRequest:</literal> <replaceable>NUMBER_OF_CONNECTIONS</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-15">
    <title>registrationDir</title>
    <bridgehead>目的</bridgehead>
    <para>
     プロバイダの登録データ、ステージング領域、および静的リポジトリを含む登録ディレクトリを指定します。デフォルトは<filename>/var/lib/sfcb/registration</filename>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>registrationDir:</literal> <replaceable>DIR</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-16">
    <title>providerDirs</title>
    <bridgehead>目的</bridgehead>
    <para>
     SFCBがプロバイダライブラリを検索するディレクトリのリストをスペースで区切って指定します。デフォルトは<filename>/usr/lib64 /usr/lib64 /usr/lib64/cmpi</filename>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>providerDirs:</literal> <replaceable>DIR</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-17">
    <title>providerSampleInterval</title>
    <bridgehead>目的</bridgehead>
    <para>
     プロバイダマネージャが待機中のプロバイダをチェックする間隔を秒で指定します。デフォルトは<literal>30</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>providerSampleInterval:</literal> <replaceable>SECS</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-18">
    <title>providerTimeoutInterval</title>
    <bridgehead>目的</bridgehead>
    <para>
     待機中のプロバイダがプロバイダマネージャによりアンロードされるまでの間隔を秒で指定します。デフォルトは<literal>60</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>providerTimeoutInterval:</literal> <replaceable>SECS</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-19">
    <title>providerAutoGroup</title>
    <bridgehead>目的</bridgehead>
    <para>
     プロバイダ登録ファイルで他のグループを指定しておらず、このオプションを<literal>true</literal>に設定されている場合、同じ共有ライブラリのすべてのプロバイダが同じプロセス内で実行されます。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>providerAutoGroup:</literal> <replaceable>OPTION</replaceable>
    </para>
    <informaltable frame="topbot" rowsep="1">
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          オプション
         </para>
        </entry>
        <entry>
         <para>
          説明
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          true
         </para>
        </entry>
        <entry>
         <para>
          プロバイダのグループを有効にします。
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          false
         </para>
        </entry>
        <entry>
         <para>
          プロバイダのグループを無効にします。
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-20">
    <title>sslCertificateFilePath</title>
    <bridgehead>目的</bridgehead>
    <para>
     サーバ証明書を含むファイルの名前を指定します。ファイルは、PEM (Privacy Enhanced Mail、RFC 1421、およびRFC 1424)フォーマットであることが必要です。このファイルは、<literal>enableHttps</literal>が<literal>true</literal>に設定されている場合にのみ必要です。デフォルトは<filename>/etc/sfcb/server.pem</filename>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>sslCertificateFilePath:</literal> <replaceable>PATH</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-21">
    <title>sslKeyFilePath</title>
    <bridgehead>目的</bridgehead>
    <para>
     サーバ証明書の秘密鍵が含まれるファイルの名前を指定します。このファイルはPEMフォーマットであることが必要であり、パスフレーズによって保護できない場合があります。このファイルは、<literal>enableHttps</literal>が<literal>true</literal>に設定されている場合にのみ必要です。デフォルトは<filename>/etc/sfcb/file.pem</filename>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>sslKeyFilePath:</literal> <replaceable>PATH</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-22">
    <title>sslClientTrustStore</title>
    <bridgehead>目的</bridgehead>
    <para>
     CAまたはクライアントの自己署名付きの証明書のいずれかを含むファイルの名前を指定します。このファイルはPEMフォーマットであることが必要であり、<literal>sslClientCertificate</literal>が<literal>accept</literal>または<literal>require</literal>に設定されている場合にのみ必要になります。デフォルトは<filename>/etc/sfcb/client.pem</filename>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>sslClientTrustStore:</literal> <replaceable>PATH</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-23">
    <title>sslClientCertificate</title>
    <bridgehead>目的</bridgehead>
    <para>
     SFCBがクライアント証明書に基づく認証を処理する方法を指定します。<literal>ignore</literal>に設定した場合、クライアントに証明書は要求されません。<literal>accept</literal>に設定した場合、クライアントに証明書が要求されますが、クライアントが証明書を提示しなくとも失敗しません。<literal>require</literal>に設定した場合、クライアントが証明書を提示しないときは、クライアント接続が拒否されます。デフォルト値は<literal>ignore</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>sslClientCertificate:</literal> <replaceable>OPTION</replaceable>
    </para>
    <informaltable frame="topbot" rowsep="1">
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          オプション
         </para>
        </entry>
        <entry>
         <para>
          説明
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          ignore
         </para>
        </entry>
        <entry>
         <para>
          クライアント証明書の要求を無効にします。
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          accept
         </para>
        </entry>
        <entry>
         <para>
          クライアント証明書の要求を無効にします。
         </para>
         <para>
          証明書が存在しなくとも失敗しません。
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          require
         </para>
        </entry>
        <entry>
         <para>
          有効な証明書を持たないクライアント接続を拒否します。
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-24">
    <title>certificateAuthLib</title>
    <bridgehead>目的</bridgehead>
    <para>
     クライアント証明書に基づいてユーザ認証を要求するローカルライブラリの名前を指定します。この設定は、<literal>sslClientCertificate</literal>が<literal>ignore</literal>に設定されていない場合にのみ必要です。デフォルト値は<filename>sfcCertificateAuthentication</filename>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>certificateAuthLib:</literal> <replaceable>FILE</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-25">
    <title>traceLevel</title>
    <bridgehead>目的</bridgehead>
    <para>
     SFCBのトレースレベルを指定します。この設定は、環境変数<literal>SFCB_TRACE_LEVEL</literal>を設定することにより上書きできます。デフォルト値は<literal>0</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>traceLevel:</literal> <replaceable>NUM_LEVEL</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-26">
    <title>traceMask</title>
    <bridgehead>目的</bridgehead>
    <para>
     SFCBのトレースマスクを指定します。この設定は、コマンドラインオプション<option>--trace-components</option>で上書きできます。デフォルト値は<literal>0</literal>です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>traceMask:</literal> <replaceable>MASK</replaceable>
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-config-confile-27">
    <title>traceFile</title>
    <bridgehead>目的</bridgehead>
    <para>
     SFCBのトレースファイルを指定します。この設定は、環境変数<literal>SFCB_TRACE_LEVEL</literal>を設定することにより上書きできます。デフォルト値は、<literal>stderr</literal>(標準エラー出力)です。
    </para>
    <bridgehead>構文</bridgehead>
    <para>
     <literal>traceFile:</literal> <replaceable>OUTPUT</replaceable>
    </para>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-wbem-advanced">
  <title>高度なSFCBタスク</title>

  <para>
   この章では、SFCBの使用方法に関連するより高度なトピックを取り上げます。このトピックを理解するには、Linuxファイルシステムの基礎知識とLinuxコマンドラインの使用経験が必要です。この章には、次のタスクが含まれています。
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     CMPIプロバイダのインストール
    </para>
   </listitem>
   <listitem>
    <para>
     SFCBのテスト
    </para>
   </listitem>
   <listitem>
    <para>
     <command>wbemcli</command> CIMクライアントの使用
    </para>
   </listitem>
  </itemizedlist>

  <sect2 xml:id="sec-wbem-advanced-cmpinst">
   <title>CMPIプロバイダのインストール</title>
   <para>
    CMPIプロバイダをインストールするには、<literal>providerDirs</literal>設定オプションにより指定されたいずれかのディレクトリに共有ライブラリがコピーされていることを確認する必要があります。<xref linkend="sec-wbem-config-confile-16"/>を参照してください。プロバイダはまた、<command>sfcbstage</command>コマンドおよび<command>sfcbrepos</command>コマンドを使用して適切に登録されていることが必要です。
   </para>
   <para>
    プロバイダパッケージは通常、SFCB用に準備されます。したがって、インストールにより適切な登録が行われます。大半のSBLIMプロバイダは、SFCB用に準備されています。
   </para>
   <sect3 xml:id="sec-wbem-advanced-cmpinst-crep">
    <title>クラスリポジトリ</title>
    <para>
     <emphasis>クラスリポジトリ</emphasis>は、SFCBがCIMクラスに関する情報を保存する場所です。通常これは、名前空間コンポーネントが存在するディレクトリツリーから構成されます。一般的なCIM名前空間は<literal>root/cimv2</literal>または<literal>root/interop</literal>であり、ファイルシステム上のクラスリポジトリディレクトリパスにそれぞれ変換されます。
    </para>
    <para>
     <filename>/var/lib/sfcb/registration/repository/root/cimv2</filename>
    </para>
    <para>
     および
    </para>
    <para>
     <filename>/var/lib/sfcb/registration/repository/root/interop</filename>
    </para>
    <para>
     各名前空間ディレクトリには、ファイル<filename>classSchemas</filename>が含まれます。ファイルには、その名前空間の下に登録されたすべてのCIMクラスのコンパイル済みバイナリ表現があります。また、CIMスーパクラスに関して必要な情報も含まれます。
    </para>
    <para>
     さらに各名前空間ディレクトリには、名前空間のすべての修飾子を含むファイル<filename>修飾子</filename>が含まれます。sfcbdの再起動時に、クラスプロバイダはディレクトリ<filename>/var/lib/sfcb/registration/repository/</filename>およびそのすべてのサブディレクトリをスキャンして、登録済みの名前空間を決定します。次に、<filename>classSchemas</filename>ファイルがデコードされ、各名前空間のクラス階層が構築されます。
    </para>
   </sect3>
   <sect3 xml:id="sec-wbem-advanced-cmpinst-classadd">
    <title>新しいクラスの追加</title>
    <para>
     SFCBは、ライブCIMクラス操作を生成できません。クラスをオフラインで追加、変更、または削除し、<command>systemctl restart sfcb</command>でSFCBサービスを再開して変更内容を登録する必要があります。
    </para>
    <para>
     SFCBは、プロバイダクラスおよび登録情報を保存するために、<emphasis/>「ステージング領域」と呼ばれる場所を使用します。SUSE® Linux Enterprise Serverシステムでは、これは<filename>/var/lib/sfcb/stage/</filename>の下にあるディレクトリ構造です。
    </para>
    <para>
     新しいプロバイダを追加するには、次の操作が必要です。
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       プロバイダクラス定義ファイルを、ステージング領域ディレクトリの<filename>/mofs</filename>サブディレクトリ(<filename>/var/lib/sfcb/stage/mofs</filename>)にコピーします。
      </para>
     </listitem>
     <listitem>
      <para>
       クラス(複数可)の名前およびプロバイダタイプを含む登録ファイル、および実行可能なライブラリファイルの名前を<filename>/regs</filename>サブディレクトリにコピーします。
      </para>
     </listitem>
    </itemizedlist>
    <para>
     ステージングディレクトリには、2つのデフォルト<quote>mof</quote>(クラス定義)ファイル(<filename>indication.mof</filename>と<filename>interop.mof</filename>)があります。ルートステージングディレクトリ<filename>/var/lib/sfcb/stage/mofs</filename>の下にあるMOFのファイルは、<filename>sfcbrepos</filename>コマンドの実行後に各名前空間にコピーされます。<filename>interop.mof</filename>は、<emphasis>interop</emphasis>名前空間に対してのみコンパイルされます。
    </para>
    <para>
     ディレクトリレイアウトは、次の例のようになります。
    </para>
<screen><prompt>tux &gt; </prompt>ls /var/lib/sfcb/stage
default.reg  mofs  regs</screen>
<screen><prompt>tux &gt; </prompt>ls /var/lib/sfcb/stage/mofs
indication.mof  root</screen>
<screen><prompt>tux &gt; </prompt>ls /var/lib/sfcb/stage/mofs/root
cimv2  interop  suse  virt</screen>
<screen><prompt>tux &gt; </prompt>ls -1 /var/lib/sfcb/stage/mofs/root/cimv2 | less
Linux_ABIParameter.mof
Linux_BaseIndication.mof
Linux_Base.mof
Linux_DHCPElementConformsToProfile.mof
Linux_DHCPEntity.mof
[..]
OMC_StorageSettingWithHints.mof
OMC_StorageVolumeDevice.mof
OMC_StorageVolume.mof
OMC_StorageVolumeStorageSynchronized.mof
OMC_SystemStorageCapabilities.mof</screen>
<screen><prompt>tux &gt; </prompt>ls -1 /var/lib/sfcb/stage/mofs/root/interop
ComputerSystem.mof
ElementConformsToProfile.mof
HostSystem.mof
interop.mof
Linux_DHCPElementConformsToProfile.mof
[..]
OMC_SMIElementSoftwareIdentity.mof
OMC_SMISubProfileRequiresProfile.mof
OMC_SMIVolumeManagementSoftware.mof
ReferencedProfile.mof
RegisteredProfile.mof</screen>
<screen><prompt>tux &gt; </prompt>ls -1 /var/lib/sfcb/stage/regs
AllocationCapabilities.reg
Linux_ABIParameter.reg
Linux_BaseIndication.reg
Linux_DHCPGlobal.reg
Linux_DHCPRegisteredProfile.reg
[..]
OMC_Base.sfcb.reg
OMC_CopyServices.sfcb.reg
OMC_PowerManagement.sfcb.reg
OMC_Server.sfcb.reg
RegisteredProfile.reg</screen>
<screen><prompt>tux &gt; </prompt>cat /var/lib/sfcb/stage/regs/Linux_DHCPRegisteredProfile.reg
[Linux_DHCPRegisteredProfile]
   provider: Linux_DHCPRegisteredProfileProvider
   location: cmpiLinux_DHCPRegisteredProfile
   type: instance
   namespace: root/interop
#
[Linux_DHCPElementConformsToProfile]
   provider: Linux_DHCPElementConformsToProfileProvider
   location: cmpiLinux_DHCPElementConformsToProfile
   type: instance association
   namespace: root/cimv2
#
[Linux_DHCPElementConformsToProfile]
   provider: Linux_DHCPElementConformsToProfileProvider
   location: cmpiLinux_DHCPElementConformsToProfile
   type: instance association
   namespace: root/interop</screen>
    <para>
     SFCBは、各プロバイダについてカスタムプロバイダ登録ファイルを使用します。
    </para>
    <note>
     <title>SBLIMプロバイダ登録ファイル</title>
     <para>
      SBLIM Webサイト上のすべてのSBLIMプロバイダには、すでに、SFCB用の.regファイルを生成するための登録ファイルが含まれています。
     </para>
    </note>
    <para>
     SFCB登録ファイルのフォーマットは次のとおりです。
    </para>
<screen>
[&lt;class-name&gt;]
   provider: &lt;provide-name&gt;
   location: &lt;library-name&gt;
   type: [instance] [association] [method] [indication]
   group: &lt;group-name&gt;
   unload: never
   namespace: &lt;namespace-for-class&gt; ...
</screen>
    <para>
     ここで:
    </para>
    <variablelist>
     <varlistentry>
      <term><literal>&lt;class-name&gt;</literal>
      </term>
      <listitem>
       <para>
        CIMクラス名(必須)
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><literal>&lt;provider-name&gt;</literal>
      </term>
      <listitem>
       <para>
        CMPIプロバイダ名(必須)
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><literal>&lt;location-name&gt;</literal>
      </term>
      <listitem>
       <para>
        プロバイダライブラリ名(必須)
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><literal>type</literal>
      </term>
      <listitem>
       <para>
        プロバイダのタイプ(必須)。これは、<literal>instance</literal>、<literal>association</literal>、<literal>method</literal>、または<literal>indication</literal>の任意の組み合わせです。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><literal>&lt;group-name&gt;</literal>
      </term>
      <listitem>
       <para>
        複数のプロバイダをグループ化し、単一のプロセスの下で実行することで、さらにランタイムリソースを最小化できます。同じ&lt;group-name&gt;の下で登録されたすべてのプロバイダは、同じプロセスの下で実行します。デフォルトでは、各プロバイダは別個のプロセスとして実行します。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><literal>unload</literal>
      </term>
      <listitem>
       <para>
        プロバイダのアンロードポリシーを指定します。現在サポートされている唯一のオプションは<option>never</option>であり、これはプロバイダが待機時間について監視されず、決してアンロードされないことを指定します。デフォルトでは、待機時間が環境設定ファイルで指定された値を超えたときに各プロバイダがアンロードされます。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><literal>ネームスペース</literal>
      </term>
      <listitem>
       <para>
        このプロバイダが実行できる名前空間のリストです。この設定は必須ですが、大半のプロバイダで<literal>root/cimv2</literal>になります。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>
     すべてのクラス定義およびプロバイダ登録ファイルがステージング領域に保存されたら、コマンド<command>sfcbrepos </command> <option>-f</option>でSFCBクラスリポジトリを再構築する必要があります。
    </para>
    <para>
     このようにしてクラスの追加、変更、または削除を行うことができます。クラスリポジトリを再構築した後、コマンド<command>systemctl restart sfcb</command>でSFCBを再起動します。
    </para>
    <para>
     またSFCBパッケージには、プロバイダクラスmofファイルおよび登録ファイルを、ステージング領域の適切な場所にコピーするユーティリティが含まれています。
    </para>
    <para>
     <command>sfcbstage </command> <option>-r</option> <literal> [provider.reg] [class1.mof] [class2.mof] ...</literal>
    </para>
    <para>
     このコマンドを実行した後、さらにクラスリポジトリを再構築し、SFCBサービスを再起動する必要があります。
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="sec-wbem-advanced-testing">
   <title>SFCBのテスト</title>
   <para>
    SFCBパッケージには、2つのテストスクリプト(<command>wbemcat</command>と<command>xmltest</command>)が含まれます。
   </para>
   <para>
    <command>wbemcat</command>は、未加工のCIM-XMLデータをHTTPプロトコル経由で、ポート5988上でリスンする指定されたSFCBホスト(デフォルトではlocalhost)に送信します。次に、返された結果を表示します。次のファイルには、標準的なEnumerateClasses要求のCIM-XML表現が含まれます。
   </para>
<screen>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;CIM CIMVERSION="2.0" DTDVERSION="2.0"&gt;
  &lt;MESSAGE ID="4711" PROTOCOLVERSION="1.0"&gt;
    &lt;SIMPLEREQ&gt;
      &lt;IMETHODCALL NAME="EnumerateClasses"&gt;
        &lt;LOCALNAMESPACEPATH&gt;
          &lt;NAMESPACE NAME="root"/&gt;
          &lt;NAMESPACE NAME="cimv2"/&gt;
        &lt;/LOCALNAMESPACEPATH&gt;
        &lt;IPARAMVALUE NAME="ClassName"&gt;
          &lt;CLASSNAME NAME=""/&gt;
        &lt;/IPARAMVALUE&gt;
        &lt;IPARAMVALUE NAME="DeepInheritance"&gt;
          &lt;VALUE&gt;TRUE&lt;/VALUE&gt;
        &lt;/IPARAMVALUE&gt;
        &lt;IPARAMVALUE NAME="LocalOnly"&gt;
          &lt;VALUE&gt;FALSE&lt;/VALUE&gt;
        &lt;/IPARAMVALUE&gt;
        &lt;IPARAMVALUE NAME="IncludeQualifiers"&gt;
          &lt;VALUE&gt;FALSE&lt;/VALUE&gt;
        &lt;/IPARAMVALUE&gt;
        &lt;IPARAMVALUE NAME="IncludeClassOrigin"&gt;
          &lt;VALUE&gt;TRUE&lt;/VALUE&gt;
        &lt;/IPARAMVALUE&gt;
      &lt;/IMETHODCALL&gt;
    &lt;/SIMPLEREQ&gt;
  &lt;/MESSAGE&gt;
&lt;/CIM&gt;</screen>
   <para>
    SFCB CIMOMにこの要求を送信すると、登録済みのプロバイダが存在するすべてのサポートクラスのリストが返されます。ファイルを<filename>cim_xml_test.xml</filename>として保存した場合を考えます。
   </para>
<screen><prompt>tux &gt; </prompt>wbemcat cim_xml_test.xml | less
HTTP/1.1 200 OK
Content-Type: application/xml; charset="utf-8"
Content-Length: 337565
Cache-Control: no-cache
CIMOperation: MethodResponse

&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;CIM CIMVERSION="2.0" DTDVERSION="2.0"&gt;
&lt;MESSAGE ID="4711" PROTOCOLVERSION="1.0"&gt;
&lt;SIMPLERSP&gt;
&lt;IMETHODRESPONSE NAME="EnumerateClasses"&gt;
[..]
&lt;CLASS NAME="Linux_DHCPParamsForEntity" SUPERCLASS="CIM_Component"&gt;
&lt;PROPERTY.REFERENCE NAME="GroupComponent" REFERENCECLASS="Linux_DHCPEntity"&gt;
&lt;/PROPERTY.REFERENCE&gt;
&lt;PROPERTY.REFERENCE NAME="PartComponent" REFERENCECLASS="Linux_DHCPParams"&gt;
&lt;/PROPERTY.REFERENCE&gt;
&lt;/CLASS&gt;
&lt;/IRETURNVALUE&gt;
&lt;/IMETHODRESPONSE&gt;
&lt;/SIMPLERSP&gt;
&lt;/MESSAGE&gt;
&lt;/CIM&gt;</screen>
   <para>
    表示されるクラスは、システムにインストールされているプロバイダに応じて異なります。
   </para>
   <para>
    2番目のスクリプト<command>xmltest</command>もまた、未加工のCIM-XMLテストファイルをSFCB CIMOMに送信するために使用されます。次に、以前に保存された<quote>良好な</quote>結果ファイルに対して、返された結果を比較します。対応する<quote>良好な</quote>ファイルがまだ存在しない場合は、後から使用できるように作成されます。
   </para>
<screen><prompt>tux &gt; </prompt>xmltest cim_xml_test.xml
Running test cim_xml_test.xml ... OK
        Saving response as cim_xml_test.OK
<prompt role="root">root # </prompt>xmltest cim_xml_test.xml
Running test cim_xml_test.xml ... Passed</screen>
  </sect2>

  <sect2 xml:id="sec-wbem-advanced-wbemcli">
   <title>コマンドラインCIMクライアント: wbemcli</title>
   <para>
    SBLIMプロジェクトには、<command>wbemcat</command>および<command>xmltest</command>に加えて、より高度なコマンドラインCIMクライアントである<command>wbemcli</command>が含まれます。このクライアントは、SFCBサーバにCIM要求を送信し、返された結果を表示するために使用されます。これはCIMOMライブラリに依存せず、WBEMに準拠するすべての実装で使用できます。
   </para>
   <para>
    たとえば、SFCBに登録済みのSBLIMプロバイダにより実装されたすべてのクラスを表示する必要がある場合は、<quote>EnumerateClasses</quote>(ec)要求をSFCBに送信します。
   </para>
<screen><prompt>tux &gt; </prompt>wbemcli -dx ec http://localhost/root/cimv2
To server: &lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;CIM CIMVERSION="2.0" DTDVERSION="2.0"&gt;
&lt;MESSAGE ID="4711" PROTOCOLVERSION="1.0"&gt;&lt;SIMPLEREQ&gt;&lt;IMETHODCALL \
    NAME="EnumerateClasses"&gt;&lt;LOCALNAMESPACEPATH&gt;&lt;NAMESPACE NAME="root"&gt; \
    &lt;/NAMESPACE&gt;&lt;NAMESPACE NAME="cimv2"&gt;&lt;/NAMESPACE&gt; \
    &lt;/LOCALNAMESPACEPATH&gt;
&lt;IPARAMVALUE NAME="DeepInheritance"&gt;&lt;VALUE&gt;TRUE&lt;/VALUE&gt; \
    &lt;/IPARAMVALUE&gt;
&lt;IPARAMVALUE NAME="LocalOnly"&gt;&lt;VALUE&gt;FALSE&lt;/VALUE&gt;&lt;/IPARAMVALUE&gt;
&lt;IPARAMVALUE NAME="IncludeQualifiers"&gt;&lt;VALUE&gt;FALSE&lt;/VALUE&gt; \
    &lt;/IPARAMVALUE&gt;
&lt;IPARAMVALUE NAME="IncludeClassOrigin"&gt;&lt;VALUE&gt;TRUE&lt;/VALUE&gt; \
    &lt;/IPARAMVALUE&gt;
&lt;/IMETHODCALL&gt;&lt;/SIMPLEREQ&gt;
&lt;/MESSAGE&gt;&lt;/CIM&gt;
From server: Content-Type: application/xml; charset="utf-8"
From server: Content-Length: 337565
From server: Cache-Control: no-cache
From server: CIMOperation: MethodResponse
From server: &lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;CIM CIMVERSION="2.0" DTDVERSION="2.0"&gt;
&lt;MESSAGE ID="4711" PROTOCOLVERSION="1.0"&gt;
&lt;SIMPLERSP&gt;
&lt;IMETHODRESPONSE NAME="EnumerateClasses"&gt;
&lt;IRETURNVALUE&gt;
&lt;CLASS NAME="CIM_ResourcePool" SUPERCLASS="CIM_LogicalElement"&gt;
&lt;PROPERTY NAME="Generation" TYPE="uint64"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="ElementName" TYPE="string"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="Description" TYPE="string"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="Caption" TYPE="string"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="InstallDate" TYPE="datetime"&gt;
&lt;/PROPERTY&gt;
[..]
&lt;CLASS NAME="Linux_Ext4FileSystem" SUPERCLASS="CIM_UnixLocalFileSystem"&gt;
&lt;PROPERTY NAME="FSReservedCapacity" TYPE="uint64"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="TotalInodes" TYPE="uint64"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="FreeInodes" TYPE="uint64"&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="ResizeIncrement" TYPE="uint64"&gt;
&lt;VALUE&gt;0&lt;/VALUE&gt;
&lt;/PROPERTY&gt;
&lt;PROPERTY NAME="IsFixedSize" TYPE="uint16"&gt;
&lt;VALUE&gt;0&lt;/VALUE&gt;
&lt;/PROPERTY&gt;
[..]</screen>
   <para>
    <option>-dx</option>オプションでは、<command>wbemcli</command>でSFCBに送信された実際のXML、および受信した実際のXMLが表示されます。上記の例では、多数返されるクラスのうちの第1のクラスが<literal>CIM_ResourcePool</literal>、第2のクラスが<literal>Linux_Ext4FileSystem</literal>です。他の登録済みの全クラスでも、同様のエントリが表示されます。
   </para>
   <para>
    <option>-dx</option>オプションを省略した場合、<command>wbemcli</command>は返却されたデータのコンパクト表現のみを表示します。
   </para>
<screen><prompt>tux &gt; </prompt>wbemcli ec http://localhost/root/cimv2
localhost:5988/root/cimv2:CIM_ResourcePool Generation=,ElementName=, \
    Description=,Caption=,InstallDate=,Name=,OperationalStatus=, \
    StatusDescriptions=,Status=,HealthState=,PrimaryStatus=, \
    DetailedStatus=,OperatingStatus=,CommunicationStatus=,InstanceID=, \
    PoolID=,Primordial=,Capacity=,Reserved=,ResourceType=, \
    OtherResourceType=,ResourceSubType=, \AllocationUnits=
localhost:5988/root/cimv2:Linux_Ext4FileSystem FSReservedCapacity=, \
    TotalInodes=,FreeInodes=,ResizeIncrement=,IsFixedSize=,NumberOfFiles=, \
    OtherPersistenceType=,PersistenceType=,FileSystemType=,ClusterSize=, \
    MaxFileNameLength=,CodeSet=,CasePreserved=,CaseSensitive=, \
    CompressionMethod=,EncryptionMethod=,ReadOnly=,AvailableSpace=, \
    FileSystemSize=,BlockSize=,Root=,Name=,CreationClassName=,CSName=, \
    CSCreationClassName=,Generation=,ElementName=,Description=,Caption=, \
    InstanceID=,InstallDate=,OperationalStatus=,StatusDescriptions=, \
    Status=,HealthState=,PrimaryStatus=,DetailedStatus=,OperatingStatus= \
    ,CommunicationStatus=,EnabledState=,OtherEnabledState=,RequestedState= \
    ,EnabledDefault=,TimeOfLastStateChange=,AvailableRequestedStates=, \
    TransitioningToState=,PercentageSpaceUse=
    [..]</screen>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-wbem-moreinfo">
  <title>詳細情報</title>

  <variablelist>
   <title>WBEMおよびSFCBの詳細については、次の資料を参照してください。</title>
   <varlistentry>
    <term><link xlink:href="https://www.dmtf.org"/>
    </term>
    <listitem>
     <para>
      Distributed Management Task Force Webサイト
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><link xlink:href="https://www.dmtf.org/standards/wbem/"/>
    </term>
    <listitem>
     <para>
      Webベースの企業管理(WBEM) Webサイト
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><link xlink:href="https://www.dmtf.org/standards/cim/"/>
    </term>
    <listitem>
     <para>
      共通情報モデル(CIM) Webサイト
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><link xlink:href="http://sblim.sourceforge.net/wiki/index.php/Main_Page"/>
    </term>
    <listitem>
     <para>
      Standards Based Linux Instrumentation (SBLIM) Webサイト
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
