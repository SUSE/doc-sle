<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="suse_l10n.xml" version="5.0" xml:id="sec-suse-l10n">
 <title>Sprach- und länderspezifische Einstellungen</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  Das System wurde zu einem großen Teil internationalisiert und kann an lokale Gegebenheiten angepasst werden. Die Internationalisierung (<emphasis>I18N</emphasis>) ermöglicht eine spezielle Lokalisierung (<emphasis>L10N</emphasis>). Die Abkürzungen I18N und L10N wurden von den ersten und letzten Buchstaben der englischsprachigen Begriffe und der Anzahl der dazwischen stehenden ausgelassenen Buchstaben abgeleitet.
 </para>

 <para>
  Die Einstellungen werden mit <systemitem>LC_</systemitem>-Variablen vorgenommen, die in der Datei <filename>/etc/sysconfig/language</filename> definiert sind. Dies bezieht sich nicht nur auf die <emphasis>native Sprachunterstützung</emphasis>, sondern auch auf die Kategorien <emphasis>Meldungen</emphasis> (Sprache) <emphasis>Zeichensatz</emphasis>, <emphasis>Sortierreihenfolge</emphasis>, <emphasis>Uhrzeit und Datum</emphasis>, <emphasis>Zahlen</emphasis> und <emphasis>Währung</emphasis>. Diese Kategorien können direkt über eine eigene Variable oder indirekt mit einer Master-Variable in der Datei <filename>language</filename> festgelegt werden (weitere Informationen erhalten Sie auf der man-Seite zu <command>locale</command>).
 </para>

 <variablelist xml:id="vl-suse-l10n-variables">
  <title>Liste der Variablen</title>
  <varlistentry>
   <term><systemitem>RC_LC_MESSAGES</systemitem>, <systemitem>RC_LC_CTYPE</systemitem>, <systemitem>RC_LC_COLLATE</systemitem>, <systemitem>RC_LC_TIME</systemitem>, <systemitem>RC_LC_NUMERIC</systemitem>, <systemitem>RC_LC_MONETARY</systemitem>
   </term>
   <listitem>
    <para>
     Diese Variablen werden ohne das Präfix <systemitem>RC_</systemitem> an die Shell weitergegeben und stehen für die aufgelisteten Kategorien. Die betreffenden Shell-Profile werden unten aufgeführt. Die aktuelle Einstellung lässt sich mit dem Befehl <command>locale</command> anzeigen.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LC_ALL</systemitem>
   </term>
   <listitem>
    <para>
     Sofern diese Variable festgelegt ist, setzt Sie die Werte der bereits erwähnten Variablen außer Kraft.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LANG</systemitem>
   </term>
   <listitem>
    <para>
     Falls keine der zuvor genannten Variablen festgelegt ist, ist dies das Fallback. Standardmäßig wird nur <systemitem>RC_LANG</systemitem> festgelegt. Dadurch wird es für die Benutzer einfacher, eigene Werte einzugeben.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>ROOT_USES_LANG</systemitem>
   </term>
   <listitem>
    <para>
     Diese Variable kann auf <literal>yes</literal> oder <literal>ctype</literal> (Standardwert) festgelegt werden. Wenn sie auf <literal>yes</literal> festgelegt ist, verwendet <systemitem class="username">root</systemitem> Spracheinstellungen und länderspezifische Einstellungen. Andernfalls arbeitet der Systemadministrator immer in einer POSIX-Umgebung.
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <para>
  Die Variablen können über den sysconfig-Editor von YaST festgelegt werden. Der Wert einer solchen Variable enthält den Sprachcode, den Ländercode, die Codierung und einen Modifier. Die einzelnen Komponenten werden durch Sonderzeichen verbunden:
 </para>

<screen>LANG=&lt;language&gt;[[_&lt;COUNTRY&gt;].&lt;Encoding&gt;[@&lt;Modifier&gt;]]</screen>

 <sect2 xml:id="sec-suse-l10n-settings">
  <title>Systemweite Locale-Einstellungen</title>
  <para>
   <systemitem class="daemon">systemd</systemitem> liest <filename>/etc/locale.conf</filename> im frühen Bootvorgang aus. Die in dieser Datei konfigurierten Locale-Einstellungen werden von jedem Service oder Benutzer übernommen, falls keine individuellen Einstellungen vorgenommen wurden.
  </para>
  <note>
   <title>Verhalten älterer Konfigurationsdateien unter <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase></title>
   <para>
    In früheren Versionen las <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> die Einstellungen aus den Dateien <filename>/etc/sysconfig/language</filename>, <filename>/etc/sysconfig/keyboard</filename> und <filename>/etc/sysconfig/console</filename>. Ab <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>
    <phrase os="sles;sled">15 GA</phrase> gelten diese Dateien als veraltet. <systemitem class="daemon">systemd</systemitem> liest aus diesen Dateien keine Einstellungen mehr. <systemitem class="daemon">systemd</systemitem> liest stattdessen <filename>/etc/locale.conf</filename>.
   </para>
   <para>
    Die in <filename>/etc/sysconfig/language</filename> definierten Variablen werden jedoch weiterhin verwendet, um die systemweite Locale zu überschreiben, und können dazu verwendet werden, um andere Locale-Einstellungen für Benutzer-Shells zu definieren (Informationen hierzu finden Sie in <xref linkend="sec-suse-l10n-examples"/>).
   </para>
  </note>

  <para>Zum Festlegen der systemweiten Locale gehen Sie folgendermaßen vor:</para>
  <itemizedlist>
   <listitem>
    <para>
     Schreiben Sie die Einstellungen in <filename>/etc/locale.conf</filename>. Jede Zeile ist eine umgebungsartige Variablenzuweisung (eine Liste von Variablen finden Sie in <command>man 5 locale.conf</command>):
    </para>
    <screen>LANG=de_DE.UTF-8</screen>
    <para>
     Zur Feinabstimmung der Einstellungen können Sie weitere Variablen hinzufügen, jeweils eine Variable pro Zeile.
    </para>
   </listitem>
   <listitem>
    <para>
     Verwenden Sie das Kommando <command>localectl</command>:
    </para>
<screen><prompt role="root"># </prompt><command>localectl</command> set-locale LANG=de_DE.UTF-8</screen>
    <para>Auch hier können Sie nach dem Kommando <command>localectl set-locale</command> weitere Variablen angeben.</para>
   </listitem>
  </itemizedlist>

  <para>
   Zum Zweck der Rückwärtskompatibilität mit älteren Systemen bei der Aktualisierung des systemd-Pakets werden alle genannten Variablen von sysconfig zu den endgültigen Zielen migriert, falls sie dort nicht bereits definiert sind.
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-examples">
  <title>Einige Beispiele</title>
  <remark>toms 2019-05-21: This section should be restructured as
  it not completely deals with generating locales.
  Postponed to a later point.
  </remark>
  <para>
   Sprach- und Ländercode sollten immer gleichzeitig eingestellt werden. Die Spracheinstellungen entsprechen der Norm ISO 639, die unter <link xlink:href="http://www.evertype.com/standards/iso639/iso639-en.html"/> und <link xlink:href="http://www.loc.gov/standards/iso639-2/"/> verfügbar ist. Die Ländercodes sind in ISO 3166 aufgeführt (siehe <link xlink:href="http://en.wikipedia.org/wiki/ISO_3166"/>).
  </para>
  <para>
   Es ist nur sinnvoll, Werte festzulegen, für die verwendbare Beschreibungsdateien unter <filename>/usr/lib/locale</filename> zu finden sind. Anhand der Dateien in <filename>/usr/share/i18n</filename> können mit dem Befehl <command>localedef</command> zusätzliche Beschreibungsdateien erstellt werden. Die Beschreibungsdateien sind Bestandteil des Pakets <systemitem>glibc-i18ndata</systemitem>. Eine Beschreibungsdatei für <literal>en_US.UTF-8</literal> (für Englisch und USA) kann beispielsweise wie folgt erstellt werden:
  </para>

  <remark role="trans">Change the description file in the previous para and the
   following screen to something appropriate for your language.</remark>
<screen>localedef -i en_US -f UTF-8 en_US.UTF-8</screen>
  <variablelist>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.UTF-8</systemitem>
    </term>
    <listitem>
     <para>
      Dies ist die Standardeinstellung, wenn während der Installation US-Englisch ausgewählt wurde. Wenn Sie eine andere Sprache ausgewählt haben, wird diese Sprache ebenfalls mit der Zeichencodierung UTF-8 aktiviert.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.ISO-8859-1</systemitem>
    </term>
    <listitem>
     <para>
      Hiermit wird als Sprache Englisch, als Land die USA und als Zeichensatz <literal>ISO-8859-1 </literal> festgelegt. In diesem Zeichensatz wird das Eurozeichen nicht unterstützt, es kann jedoch gelegentlich in Programmen nützlich sein, die nicht für die <literal>UTF-8</literal>-Unterstützung aktualisiert wurden. Die Zeichenkette, mit der der Zeichensatz definiert wird (in diesem Fall <literal>ISO-8859-1</literal>), wird anschließend von Programmen, wie Emacs, ausgewertet.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term><systemitem>LANG=en_IE@euro</systemitem>
    </term>
    <listitem>
     <para>
      Im oben genannten Beispiel wird das Eurozeichen explizit in die Spracheinstellung aufgenommen. Diese Einstellung ist nun überflüssig, da UTF-8 auch das Eurosymbol enthält. Sie ist nur nützlich, wenn eine Anwendung ISO-8859-15 anstelle von UTF-8 unterstützt.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   Änderungen an <filename>/etc/sysconfig/language</filename> werden mit der folgenden Prozesskette aktiviert:
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Für die Bash: <filename>/etc/profile</filename> liest <filename>/etc/profile.d/lang.sh</filename>, die ihrerseits <filename>/etc/sysconfig/language</filename> analysiert.
    </para>
   </listitem>
   <listitem>
    <para>
     Für tcsh: <filename>/etc/profile</filename> liest <filename>/etc/profile.d/lang.csh</filename>, die ihrerseits <filename>/etc/sysconfig/language</filename> analysiert.
    </para>
   </listitem>
  </itemizedlist>
  <para>
   So wird sichergestellt, dass sämtliche Änderungen an <filename>/etc/sysconfig/language</filename> bei der nächsten Anmeldung in der entsprechenden Shell verfügbar sind, ohne dass sie manuell aktiviert werden müssen.
  </para>
  <para>
   Die Benutzer können die Standardeinstellungen des Systems außer Kraft setzen, indem Sie die Datei <filename>~/.bashrc</filename> entsprechend bearbeiten. Wenn Sie die systemübergreifende Einstellung <literal>en_US</literal> für Programmmeldungen beispielsweise nicht verwenden möchten, nehmen Sie z. B. <systemitem>LC_MESSAGES=es_ES</systemitem> auf, damit die Meldungen stattdessen auf Spanisch angezeigt werden.
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-dot-i18n">
  <title>Locale-Einstellungen in <filename>~/.i18n</filename></title>
  <para>
   Wenn Sie mit den Locale-Systemstandardwerten nicht zufrieden sind, können Sie die Einstellungen in <filename>~/.i18n</filename> ändern. Achten Sie dabei jedoch auf die Einhaltung der Bash-Scripting-Syntax. Die Einträge in <filename>~/.i18n</filename> setzen die Systemstandardwerte aus <filename>/etc/sysconfig/language</filename> außer Kraft. Verwenden Sie dieselben Variablennamen, jedoch ohne das Namespace-Präfix <literal>RC_</literal>. Nutzen Sie beispielsweise <literal>LANG</literal> anstatt <literal>RC_LANG</literal>:
  </para>
<screen>LANG=cs_CZ.UTF-8
LC_COLLATE=C</screen>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-fallback">
  <title>Einstellungen für die Sprachunterstützung</title>
  <para>
   Die Dateien in der Kategorie <emphasis>Meldungen</emphasis> werden generell im entsprechenden Sprachverzeichnis (wie beispielsweise <filename>en</filename>) gespeichert, damit ein Fallback vorhanden ist. Wenn Sie für <systemitem>LANG</systemitem> den Wert <literal>en_US</literal> festlegen und in <filename>/usr/share/locale/en_US/LC_MESSAGES</filename> keine Meldungsdatei vorhanden ist, wird ein Fallback auf <filename>/usr/share/locale/en/LC_MESSAGES</filename> ausgeführt.
  </para>
  <para>
   Darüber hinaus kann eine Fallback-Kette definiert werden, beispielsweise für Bretonisch zu Französisch oder für Galizisch zu Spanisch oder Portugiesisch:
  </para>
  <para>
   <systemitem>LANGUAGE="br_FR:fr_FR"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="gl_ES:es_ES:pt_PT"</systemitem>
  </para>
  <para>
   Wenn Sie möchten, können Sie die norwegischen Varianten Nynorsk und Bokmål (mit zusätzlichem Fallback auf <literal>no</literal>) verwenden:
  </para>
  <para>
   <systemitem>LANG="nn_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nn_NO:nb_NO:no"</systemitem>
  </para>
  <para>
   oder
  </para>
  <para>
   <systemitem>LANG="nb_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nb_NO:nn_NO:no"</systemitem>
  </para>
  <para>
   Beachten Sie, das bei Norwegisch auch <systemitem>LC_TIME</systemitem> anders behandelt wird.
  </para>
  <remark>The following example does not make sense  for 'en'; that's why I
   use 'de' as an example here. -ke- </remark>

  <para>
   Ein mögliches Problem ist, dass ein Trennzeichen, das zum Trennen von Zifferngruppen verwendet wird, nicht richtig erkannt wird. Dies passiert, wenn <systemitem>LANG</systemitem> auf einen aus zwei Buchstaben bestehenden Sprachcode wie <literal>de</literal> eingestellt ist, die Definitionsdatei, die glibc verwendet, jedoch in <filename>/usr/share/lib/de_DE/LC_NUMERIC</filename> gespeichert ist. Daher muss <systemitem>LC_NUMERIC</systemitem> auf <literal>de_DE</literal> gesetzt sein, damit das System die Trennzeichendefinition erkennen kann.
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-info">
  <title>Weitere Informationen</title>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <emphasis>The GNU C Library Reference Manual</emphasis>, Kapitel <quote>Locales and Internationalization</quote>. Es befindet sich im Paket <package>glibc-info</package>.
    </para>
   </listitem>
   <listitem>
    <para>
     Markus Kuhn, <emphasis>UTF-8 and Unicode FAQ for Unix/Linux</emphasis>, momentan verfügbar unter <link xlink:href="https://www.cl.cam.ac.uk/~mgk25/unicode.html"/>.
    </para>
   </listitem>
  </itemizedlist>
 </sect2>
</sect1>
