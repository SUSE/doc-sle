<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="deployment_remote.xml" role="General" id="cha.deployment.remoteinst">
 <title>Instalação remota</title>
 <para>
  O <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase> pode ser instalado de várias maneiras. Assim como na instalação comum de mídia descrita no <xref linkend="cha.inst"/>, você pode escolher uma das várias abordagens baseadas em rede ou até mesmo optar por uma abordagem totalmente sem intervenção para a instalação do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
 </para>
 <para>
  Cada método é apresentado em duas listas de verificação resumidas: uma que relaciona os pré-requisitos do método e outra que ilustra o procedimento básico. São fornecidos mais detalhes para todas as técnicas usadas nos cenários de instalação.
 </para>
 <note>
  <para>
   Nas seções a seguir, o sistema que vai armazenar a instalação do novo <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> é chamado de <emphasis>sistema de destino</emphasis> ou <emphasis>destino de instalação</emphasis>. O termo <emphasis>repositório</emphasis> (antes chamado de <quote>fonte de instalação</quote>) é usado para todas as fontes de dados de instalação. Isso inclui mídia física, como CD e DVD e servidores de rede que distribuem os dados de instalação na sua rede.
  </para>
 </note>
 <sect1 id="sec.deployment.remoteinst.scenario">
  <title>Cenários de instalação para instalação remota</title>

  <para>
   Esta seção apresenta os cenários de instalação mais comuns para instalações remotas. Para cada cenário, verifique cuidadosamente a lista de pré-requisitos e siga o procedimento descrito para este cenário. Se necessitar de instruções detalhadas para uma etapa específica, siga os links fornecidos para cada uma.
  </para>

  <sect2 id="sec.deployment.remoteinst.scenario.vncstat">
   <title>Instalação remota simples por VNC: configuração de rede estática</title>
   <para>
    Este tipo de instalação ainda requer algum grau de acesso físico ao sistema de destino para inicializar na instalação. A instalação em si é inteiramente controlada por uma estação de trabalho remota usando VNC para se conectar ao programa de instalação. A interação do usuário é necessária, como na instalação manual no <xref linkend="cha.inst"/>.
   </para>
   <para>
    Para este tipo de instalação, verifique se os seguintes requisitos foram atendidos:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Repositório remoto: NFS, HTTP, FTP ou SMB com conexão de rede de trabalho.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de destino com conexão de rede ativa.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de controle com conexão de rede de trabalho e software viewer do VNC ou browser habilitado para Java (Firefox, Chromium, Internet Explorer, Opera, etc.).
     </para>
    </listitem>
    <listitem>
     <para>
      Meio físico de boot (CD, DVD ou disco flash USB) para inicialização do sistema de destino.
     </para>
    </listitem>
    <listitem>
     <para>
      Endereços IP estáticos válidos já atribuídos ao repositório e ao sistema de controle.
     </para>
    </listitem>
    <listitem>
     <para>
      Endereços IP estático válidos para atribuir ao sistema de destino.
     </para>
    </listitem>
   </itemizedlist>
   <procedure id="proc.deployment.remoteinst.scenario.vncstat">
    <para>
     Para executar este tipo de instalação, proceda da seguinte maneira:
    </para>
    <step performance="required">
     <para>
      Configure o repositório conforme descrito na <xref linkend="sec.deployment.remoteinst.instserver"/>. Escolha um servidor de rede NFS, HTTP ou FTP. Para um repositório SMB, consulte a <xref linkend="sec.deployment.remoteinst.instserver.smb"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicialize o sistema de destino usando o kit de mídia do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
    </step>
    <step performance="required">
     <para>
      Quando aparecer a tela de boot do sistema de destino, use o prompt de opções de boot para definir as opções apropriadas do VNC e o endereço do repositório. Isso está descrito detalhadamente na <xref linkend="sec.deployment.remoteinst.bootinst"/>.
     </para>
     <para>
      O sistema de destino é inicializado em um ambiente baseado em texto, apresentando o endereço de rede e número de exibição sob o qual o ambiente de instalação gráfico pode ser endereçado por qualquer aplicativo visualizador VNC ou browser. As instalações do VNC se anunciam em OpenSLP e se as configurações de firewall permitirem. É possível encontrá-las usando <command>slptool</command> conforme descrito no <xref linkend="proc.deployment.remoteinst.monitor.vnc.prep"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Na estação de trabalho de controle, abra um aplicativo de visualização VNC ou browser da Web e conecte-se ao sistema de destino como descrito na <xref linkend="sec.deployment.remoteinst.monitor.vnc"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Execute a instalação como descrito no <xref linkend="cha.inst"/>. Reconecte-se ao sistema de destino depois que ele for reinicializado para concluir a parte final da instalação.
     </para>
    </step>
    <step performance="required">
     <para>
      Conclua a instalação.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.scenario.vncdyn">
   <title>Instalação remota simples por VNC: configuração de rede dinâmica</title>
   <para>
    Este tipo de instalação ainda requer algum grau de acesso físico ao sistema de destino para inicializar na instalação. A configuração de rede é feita com DHCP. A instalação em si é inteiramente controlada por uma estação de trabalho remota usando VNC para conectar-se ao instalador, mas ainda requer a interação do usuário no trabalho real de configuração.
   </para>
   <para>
    Para este tipo de instalação, verifique se os seguintes requisitos foram atendidos:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Repositório remoto: NFS, HTTP, FTP ou SMB com conexão de rede de trabalho.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de destino com conexão de rede ativa.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de controle com conexão de rede de trabalho e software viewer do VNC ou browser habilitado para Java (Firefox, Chromium, Internet Explorer ou Opera).
     </para>
    </listitem>
    <listitem>
     <para>
      Inicialize o sistema de destino usando o kit de mídia do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
    </listitem>
    <listitem>
     <para>
      Servidor DHCP em execução fornecendo endereços IP.
     </para>
    </listitem>
   </itemizedlist>
   <procedure id="proc.deployment.remoteinst.scenario.vncdyn">
    <para>
     Para executar este tipo de instalação, proceda da seguinte maneira:
    </para>
    <step performance="required">
     <para>
      Configure o repositório conforme descrito na <xref linkend="sec.deployment.remoteinst.instserver"/>. Escolha um servidor de rede NFS, HTTP ou FTP. Para um repositório SMB, consulte a <xref linkend="sec.deployment.remoteinst.instserver.smb"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicialize o sistema de destino usando o kit de mídia do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
    </step>
    <step performance="required">
     <para>
      Quando aparecer a tela de boot do sistema de destino, use o prompt de opções de boot para definir as opções apropriadas do VNC e o endereço do repositório. Isso está descrito detalhadamente na <xref linkend="sec.deployment.remoteinst.bootinst"/>.
     </para>
     <para>
      O sistema de destino é inicializado em um ambiente baseado em texto, apresentando o endereço de rede e número de exibição sob o qual o ambiente de instalação gráfico pode ser endereçado por qualquer aplicativo visualizador VNC ou browser. As instalações do VNC se anunciam em OpenSLP e se as configurações de firewall permitirem. É possível encontrá-las usando <command>slptool</command> conforme descrito no <xref linkend="proc.deployment.remoteinst.monitor.vnc.prep"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Na estação de trabalho de controle, abra um aplicativo de visualização VNC ou browser da Web e conecte-se ao sistema de destino como descrito na <xref linkend="sec.deployment.remoteinst.monitor.vnc"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Execute a instalação como descrito no <xref linkend="cha.inst"/>. Reconecte-se ao sistema de destino depois que ele for reinicializado para concluir a parte final da instalação.
     </para>
    </step>
    <step performance="required">
     <para>
      Conclua a instalação.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.scenario.vncpxe">
   <title>Instalação remota por VNC: inicialização PXE e Wake on LAN</title>
   <para>
    Este tipo de instalação ocorre totalmente sem intervenção. A máquina de destino é inicializada remotamente. A interação do usuário só é necessária para a instalação em si. Este método é adequado para implantações entre sites.
   </para>
   <para>
    Para executar este tipo de instalação, verifique se os seguintes requisitos foram atendidos:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Repositório remoto: NFS, HTTP, FTP ou SMB com conexão de rede de trabalho.
     </para>
    </listitem>
    <listitem>
     <para>
      Servidor TFTP.
     </para>
    </listitem>
    <listitem>
     <para>
      Servidor DHCP em execução para sua rede.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de destino com recurso de inicialização PXE, rede e Wake on LAN, conectado à rede.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de controle com conexão de rede de trabalho e software viewer do VNC ou browser habilitado para Java (Firefox, Chromium, Internet Explorer ou Opera).
     </para>
    </listitem>
   </itemizedlist>
   <procedure id="proc.deployment.remoteinst.scenario.vncpxe">
    <para>
     Para executar este tipo de instalação, proceda da seguinte maneira:
    </para>
    <step performance="required">
     <para>
      Configure o repositório conforme descrito na <xref linkend="sec.deployment.remoteinst.instserver"/>. Escolha um servidor de rede NFS, HTTP ou FTP ou configure um repositório SMB conforme descrito na <xref linkend="sec.deployment.remoteinst.instserver.smb"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Configure um servidor TFTP para manter uma imagem de inicialização que possa ser extraída pelo sistema de destino. Isso está descrito na <xref linkend="sec.deployment.remoteinst.boot.tftp"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Configure um servidor DHCP para fornecer endereços IP a todas as máquinas e revelar a localização do servidor TFTP para o sistema de destino. Isso está descrito na <xref linkend="sec.deployment.remoteinst.boot.dhcp"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Prepare o sistema de destino para a inicialização PXE. Isso está descrito detalhadamente na <xref linkend="sec.deployment.remoteinst.boot.pxeprep"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicie o processo de inicialização do sistema de destino usando Wake on LAN. Isso está descrito na <xref linkend="sec.deployment.remoteinst.boot.wol"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Na estação de trabalho de controle, abra um aplicativo de visualização VNC ou browser da Web e conecte-se ao sistema de destino como descrito na <xref linkend="sec.deployment.remoteinst.monitor.vnc"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Execute a instalação como descrito no <xref linkend="cha.inst"/>. Reconecte-se ao sistema de destino depois que ele for reinicializado para concluir a parte final da instalação.
     </para>
    </step>
    <step performance="required">
     <para>
      Conclua a instalação.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.scenario.sshstat">
   <title>Instalação remota simples por SSH: configuração de rede estática</title>
   <para>
    Este tipo de instalação ainda requer algum grau de acesso físico ao sistema de destino para a inicialização na instalação e para determinar o endereço IP do destino de instalação. A instalação em si é inteiramente controlada de uma estação de trabalho remota usando SSH para se conectar ao instalador. A interação do usuário é necessária, como na instalação comum descrita no <xref linkend="cha.inst"/>.
   </para>
   <para>
    Para este tipo de instalação, verifique se os seguintes requisitos foram atendidos:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Repositório remoto: NFS, HTTP, FTP ou SMB com conexão de rede de trabalho.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de destino com conexão de rede ativa.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de controle com conexão de rede ativa e software cliente SSH ativo.
     </para>
    </listitem>
    <listitem>
     <para>
      Inicialize o sistema de destino usando o kit de mídia do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
    </listitem>
    <listitem>
     <para>
      Endereços IP estáticos válidos já atribuídos ao repositório e ao sistema de controle.
     </para>
    </listitem>
    <listitem>
     <para>
      Endereços IP estático válidos para atribuir ao sistema de destino.
     </para>
    </listitem>
   </itemizedlist>
   <procedure id="proc.deployment.remoteinst.scenario.sshstat">
    <para>
     Para executar este tipo de instalação, proceda da seguinte maneira:
    </para>
    <step performance="required">
     <para>
      Configure o repositório conforme descrito na <xref linkend="sec.deployment.remoteinst.instserver"/>. Escolha um servidor de rede NFS, HTTP ou FTP. Para um repositório SMB, consulte a <xref linkend="sec.deployment.remoteinst.instserver.smb"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicialize o sistema de destino usando o kit de mídia do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
    </step>
    <step performance="required">
     <para>
      Quando aparecer a tela de boot do sistema de destino, use o prompt de opções de boot para definir os parâmetros apropriados à conexão de rede, o endereço do repositório e a habilitação SSH. Isso está descrito detalhadamente na <xref linkend="sec.deployment.remoteinst.bootinst.custom"/>.
     </para>
     <para>
      O sistema de destino é inicializado em um ambiente baseado em texto, apresentando o endereço de rede sob o qual o ambiente de instalação gráfica pode ser endereçado por qualquer cliente SSH.
     </para>
    </step>
    <step performance="required">
     <para>
      Na estação de trabalho de controle, abra uma janela de terminal e conecte-se ao sistema de destino como descrito na <xref linkend="sec.deployment.remoteinst.monitor.ssh.connect"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Execute a instalação como descrito no <xref linkend="cha.inst"/>. Reconecte-se ao sistema de destino depois que ele for reinicializado para concluir a parte final da instalação.
     </para>
    </step>
    <step performance="required">
     <para>
      Conclua a instalação.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.scenario.sshdyn">
   <title>Instalação remota simples por SSH: configuração de rede dinâmica</title>
   <para>
    Este tipo de instalação ainda requer algum grau de acesso físico ao sistema de destino para a inicialização na instalação e para determinar o endereço IP do destino de instalação. A instalação propriamente dita é toda controlada de uma estação de trabalho remota usando SSH para conectar-se ao instalador, mas ainda requer interação do usuário para a configuração real.
   </para>
   <note>
    <title>Evitar conexões perdidas após a segunda etapa (instalação)</title>
    <para>
     Na caixa de diálogo de configurações de rede, marque o <guimenu>Método Tradicional com ifup</guimenu> e evite o NetworkManager. Do contrário, a conexão SSH será perdida durante a instalação. Redefina as configurações para <guimenu>Controlado por Usuário com o NetworkManager</guimenu> após o término da instalação.
    </para>
   </note>
   <para>
    Para este tipo de instalação, verifique se os seguintes requisitos foram atendidos:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Repositório remoto: NFS, HTTP, FTP ou SMB com conexão de rede de trabalho.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de destino com conexão de rede ativa.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de controle com conexão de rede ativa e software cliente SSH ativo.
     </para>
    </listitem>
    <listitem>
     <para>
      Meio físico de boot (CD, DVD ou disco flash USB) para inicialização do sistema de destino.
     </para>
    </listitem>
    <listitem>
     <para>
      Servidor DHCP em execução fornecendo endereços IP.
     </para>
    </listitem>
   </itemizedlist>
   <procedure id="proc.deployment.remoteinst.scenario.sshdyn">
    <para>
     Para executar este tipo de instalação, proceda da seguinte maneira:
    </para>
    <step performance="required">
     <para>
      Configure a fonte do repositório conforme descrito na <xref linkend="sec.deployment.remoteinst.instserver"/>. Escolha um servidor de rede NFS, HTTP ou FTP. Para um repositório SMB, consulte a <xref linkend="sec.deployment.remoteinst.instserver.smb"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicialize o sistema de destino usando o kit de mídia do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
    </step>
    <step performance="required">
     <para>
      Quando a tela de boot do sistema de destino for exibida, use o prompt de opções de boot para passar os parâmetros apropriados de conexão de rede, a localização da fonte de instalação e a habilitação SSH. Consulte a <xref linkend="sec.deployment.remoteinst.bootinst.custom"/> para obter instruções detalhadas sobre o uso desses parâmetros.
     </para>
     <para>
      O sistema de destino é inicializado em um ambiente baseado em texto, apresentando o endereço de rede sob o qual o ambiente de instalação gráfica pode ser endereçado por qualquer cliente SSH.
     </para>
    </step>
    <step performance="required">
     <para>
      Na estação de trabalho de controle, abra uma janela de terminal e conecte-se ao sistema de destino como descrito na <xref linkend="sec.deployment.remoteinst.monitor.ssh.connect"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Execute a instalação como descrito no <xref linkend="cha.inst"/>. Reconecte-se ao sistema de destino depois que ele for reinicializado para concluir a parte final da instalação.
     </para>
    </step>
    <step performance="required">
     <para>
      Conclua a instalação.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.scenario.sshpxe">
   <title>Instalação remota por SSH: inicialização PXE e Wake on LAN</title>
   <para>
    Este tipo de instalação ocorre totalmente sem intervenção. A máquina de destino é inicializada remotamente.
   </para>
   <para>
    Para executar este tipo de instalação, verifique se os seguintes requisitos foram atendidos:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Repositório remoto: NFS, HTTP, FTP ou SMB com conexão de rede de trabalho.
     </para>
    </listitem>
    <listitem>
     <para>
      Servidor TFTP.
     </para>
    </listitem>
    <listitem>
     <para>
      Servidor DHCP em execução para sua rede, fornecendo um IP estático para o host a ser instalado.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de destino com recurso de inicialização PXE, rede e Wake on LAN, conectado à rede.
     </para>
    </listitem>
    <listitem>
     <para>
      Sistema de controle com conexão de rede ativa e software cliente SSH.
     </para>
    </listitem>
   </itemizedlist>
   <procedure id="proc.deployment.remoteinst.scenario.sshpxe">
    <para>
     Para executar este tipo de instalação, proceda da seguinte maneira:
    </para>
    <step performance="required">
     <para>
      Configure o repositório conforme descrito na <xref linkend="sec.deployment.remoteinst.instserver"/>. Escolha um servidor de rede NFS, HTTP ou FTP. Para ver a configuração de um repositório SMB, consulte a <xref linkend="sec.deployment.remoteinst.instserver.smb"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Configure um servidor TFTP para manter uma imagem de inicialização que possa ser extraída pelo sistema de destino. Isso está descrito na <xref linkend="sec.deployment.remoteinst.boot.tftp"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Configure um servidor DHCP para fornecer endereços IP a todas as máquinas e revelar a localização do servidor TFTP para o sistema de destino. Isso está descrito na <xref linkend="sec.deployment.remoteinst.boot.dhcp"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Prepare o sistema de destino para a inicialização PXE. Isso está descrito detalhadamente na <xref linkend="sec.deployment.remoteinst.boot.pxeprep"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicie o processo de inicialização do sistema de destino usando Wake on LAN. Isso está descrito na <xref linkend="sec.deployment.remoteinst.boot.wol"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Na estação de trabalho de controle, inicie um cliente SSH e conecte-se ao sistema de destino como descrito na <xref linkend="sec.deployment.remoteinst.monitor.ssh"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Execute a instalação como descrito no <xref linkend="cha.inst"/>. Reconecte-se ao sistema de destino depois que ele for reinicializado para concluir a parte final da instalação.
     </para>
    </step>
    <step performance="required">
     <para>
      Conclua a instalação.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 id="sec.deployment.remoteinst.instserver">
  <title>Configurando o servidor que mantém as fontes de instalação</title>

  <para>
   Dependendo do sistema operacional executado na máquina que vai ser usada como a fonte de instalação de rede para o <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, haverá várias opções para configuração do servidor. A maneira mais fácil de configurar um servidor de instalação é usar o YaST no SUSE Linux Enterprise Server 11/opensuse; 11.1 ou superior.
  </para>

  <tip>
   <para>
    É possível até usar uma máquina Microsoft Windows como o servidor de instalação para implantação do Linux. Consulte a <xref linkend="sec.deployment.remoteinst.instserver.smb"/> para obter os detalhes. 
   </para>
  </tip>

  <sect2 id="sec.deployment.remoteinst.instserver.sles9">
   <title>Configurando um servidor de instalação usando YaST</title>
   <para>
    O YaST oferece uma ferramenta gráfica para criação de repositórios de rede. Ele possui suporte a servidores de instalação em rede HTTP, FTP e NFS.
   </para>
   <procedure id="proc.deployment.remoteinst.instserver.sles9">
    <step performance="required">
     <para>
      Efetue login como <systemitem class="username">root</systemitem> na máquina que deverá ser usada como servidor de instalação.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicie <menuchoice><guimenu>YaST</guimenu><guimenu>Diversos</guimenu><guimenu>Servidor de Instalação</guimenu></menuchoice>.
     </para>
    </step>
    <step performance="required">
     <para>
      Selecione o tipo de repositório (HTTP, FTP ou NFS). O serviço selecionado é iniciado automaticamente sempre que o sistema é iniciado. Se um serviço do tipo selecionado já estiver em execução no seu sistema e você quiser configurá-lo manualmente para o servidor, desative a configuração automática do serviço de servidor com <guimenu>Não configure serviços de rede</guimenu>. Em ambos os casos, defina o diretório em que os dados da instalação devem estar disponíveis no servidor.
     </para>
    </step>
    <step performance="required">
     <para>
      Configure o tipo de repositório necessário. Esta etapa refere-se à configuração automática dos serviços de servidor. Ela é ignorada quando a configuração automática está desativada.
     </para>
     <para>

      Defina um álias para o diretório raiz do servidor FTP ou HTTP no qual os dados de instalação devem ser encontrados. O repositório será armazenado em <literal>ftp://<replaceable>IP-Servidor</replaceable>/<replaceable>Álias</replaceable>/<replaceable>Nome</replaceable></literal> (FTP) ou em <literal>http://<replaceable>IP-Servidor</replaceable>/<replaceable>Álias</replaceable>/<replaceable>Nome</replaceable></literal> (HTTP). <replaceable>Nome</replaceable> é o nome do repositório, definido na etapa a seguir. Se você tiver selecionado NFS na etapa anterior, defina caracteres curingas e opções de exportação. O servidor NFS estará disponível em <literal>nfs://<replaceable>IP do servidor</replaceable>/<replaceable>Nome</replaceable></literal>. Detalhes sobre NFS e exportações são encontrados no <xref linkend="cha.nfs"/>.
     </para>
     <tip>
      <title>Configurações de Firewall</title>
      <para>
       Verifique se as configurações de firewall de seu sistema de servidor permitem tráfego nas portas para HTTP, NFS e FTP. Se não for permitido, habilite <guimenu>Abrir Porta no Firewall</guimenu> ou marque primeiro <guimenu>Detalhes do Firewall</guimenu>.
      </para>
     </tip>
    </step>
    <step performance="required">
     <para>
      Configure o repositório. Antes de copiar as mídias de instalação para o destino, defina o nome do repositório (o ideal é uma abreviação do produto e da versão fácil de se lembrar). O YaST permite gerar imagens ISO das mídias, em vez de cópias dos DVDs de instalação. Se desejar, ative a caixa de seleção relevante e especifique o caminho de diretório no qual os arquivos ISO podem ser encontrados localmente. Dependendo do produto a ser distribuído usando este servidor de instalação, é possível que mais CDs complementares ou CDs de service pack sejam necessários e devam ser adicionados como repositórios extras. Para anunciar o servidor de instalação na rede por OpenSLP, ative a opção adequada.
     </para>
     <tip>
      <para>
       Considere anunciar seu repositório por OpenSLP, se a sua configuração de rede suportar essa opção. Isto o livra de digitar o caminho de instalação da rede em todas as máquinas de destino. Os sistemas de destino são inicializados usando a opção de boot SLP e encontram o repositório de rede sem nenhuma outra configuração. Para obter os detalhes sobre esta opção, consulte a <xref linkend="sec.deployment.remoteinst.bootinst"/>.
      </para>
     </tip>
    </step>
    <step performance="required">
     <para>
      Faça o upload dos dados de instalação. A etapa mais extensa da configuração do servidor de instalação é a cópia das mídias de instalação reais. Insira a mídia na sequência solicitada pelo YaST e aguarde o término do procedimento de cópia. Quando as fontes forem totalmente copiadas, retorne à visão geral dos repositórios existentes e feche a configuração selecionando <guimenu>Concluir</guimenu>.
     </para>
     <para>
      O seu servidor de instalação agora está totalmente configurado e pronto para serviço. Ele é inicializado automaticamente toda vez que o sistema é iniciado. Nenhuma outra intervenção é necessária. Você precisa apenas configurar e inicializar este serviço de forma correta e manualmente se tiver desativado a configuração automática do serviço de rede selecionado com YaST como etapa inicial.
     </para>
    </step>
   </procedure>
   <para>
    Para desativar um repositório, selecione o repositório que deseja remover e selecione <guimenu>Apagar</guimenu>. Os dados de instalação são removidos do sistema. Para desativar o serviço de rede, use o respectivo módulo do YaST.
   </para>
   <para>
    Se o servidor de instalação precisar fornecer os dados de instalação para mais de um produto da versão do produto, inicie o módulo do servidor de instalação do YaST e selecione <guimenu>Adicionar</guimenu> na visão geral dos repositórios existentes para configurar o novo repositório.
   </para>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.instserver.nfs">
   <title>Configurando um repositório NFS manualmente</title>
   
   <para>
    A configuração de uma fonte NFS para instalação é feita em duas etapas principais. Na primeira etapa, crie a estrutura de diretório que manterá os dados de instalação e copie a mídia de instalação nessa estrutura. Em seguida, exporte o diretório que manterá os dados de instalação para a rede.
   </para>
   <procedure id="proc.deployment.remoteinst.instserver.nfs.cdir">
    <para>
     Para criar um diretório para manter os dados de instalação, faça o seguinte:
    </para>
    <step performance="required">
     <para>
      Efetue login como <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step performance="required">
     <para>
      Crie um diretório que depois mantenha todos os dados de instalação e mude para esse diretório. Por exemplo:
     </para>
<screen>mkdir install/<replaceable>product</replaceable>/<replaceable>productversion</replaceable>
cd install/<replaceable>product</replaceable>/<replaceable>productversion</replaceable></screen>
     <para>
      Substitua <replaceable>produto</replaceable> por uma abreviação do nome do produto e <replaceable>versão_do_produto</replaceable> por uma string que contenha o nome e a versão do produto.
     </para>
    </step>
    <step performance="required">
     <para>
      Para cada DVD incluído no kit de mídias, execute os seguintes comandos:
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        Copie todo o conteúdo do DVD de instalação para o diretório do servidor de instalação:
       </para>
<screen>cp -a /media/<replaceable>path_to_your_DVD_drive .</replaceable></screen>
       <para>
        Substitua <replaceable>caminho_para_sua_unidade_de_DVD</replaceable> pelo caminho real onde está a unidade de DVD. Dependendo do tipo de unidade usado no seu sistema, as opções são <filename>cdrom</filename>, <filename>cdrecorder</filename>, <filename>dvd</filename> ou <filename>dvdrecorder</filename>.
       </para>
      </step>
      <step performance="required">
       <para>
        Renomeie o diretório com o número do DVD:
       </para>
<screen>mv <replaceable>path_to_your_DVD_drive</replaceable> DVD<replaceable>x</replaceable></screen>
       <para>
        Substitua <replaceable>x</replaceable> pelo número real do seu DVD.
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <procedure id="proc.deployment.remoteinst.instserver.nfs.export">
    <para>
     No <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, você pode exportar o repositório com NFS usando o YaST. Proceda da seguinte maneira:
    </para>
    <step performance="required">
     <para>
      Efetue login como <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicie <menuchoice><guimenu>YaST</guimenu><guimenu>Serviços de Rede</guimenu><guimenu>Servidor NFS</guimenu></menuchoice>.
     </para>
    </step>
    <step performance="required">
     <para>
      Selecione <guimenu>Iniciar</guimenu> e <guimenu>Abrir Porta no Firewall</guimenu> e clique em <guimenu>Avançar</guimenu>.
     </para>
    </step>
    <step performance="required">
     <para>
      Selecione <guimenu>Adicionar Diretório</guimenu> e procure o diretório contendo as fontes de instalação. Neste caso, o diretório é <filename><replaceable>versão_do_produto</replaceable></filename>.
     </para>
    </step>
    <step performance="required">
     <para>
      Selecione <guimenu>Adicionar Host</guimenu> e digite os nomes de host das máquinas para as quais exportar os dados de instalação. Em vez de especificar os nomes de host aqui, você também pode usar curingas, faixas de endereços de rede ou o nome de domínio da sua rede. Digite as opções de exportação adequadas ou mantenha o padrão, que funciona bem na maioria das configurações. Para obter mais informações sobre a sintaxe usada na exportação de compartilhamentos NFS, leia a página de manual sobre <systemitem>exports</systemitem>.
     </para>
    </step>
    <step performance="required">
     <para>
      Clique em <guimenu>Concluir</guimenu>. O servidor NFS que armazena o repositório do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> é iniciado automaticamente e integrado ao processo de boot.
     </para>
    </step>
   </procedure>
   <procedure id="proc.deployment.remoteinst.instserver.nfs.exportman">
    <para>
     Para exportar o repositório manualmente por meio do NFS, em vez de usar o módulo de Servidor NFS do YaST, faça o seguinte:
    </para>
    <step performance="required">
     <para>
      Efetue login como <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step performance="required">
     <para>
      Abra o arquivo <filename>/etc/exports</filename> e digite a seguinte linha:
     </para>
<screen>/<replaceable>productversion</replaceable> *(ro,root_squash,sync)</screen>
     <para>
      Isso exportará o diretório <filename>/<replaceable>versão_do_produto</replaceable></filename> para qualquer host que faça parte desta rede ou para qualquer host que possa se conectar a este servidor. Para limitar o acesso a este servidor, use máscaras de rede ou nomes de domínio em vez do curinga geral <literal>*</literal>. Consulte a página de manual sobre <systemitem>export</systemitem> para obter os detalhes. Grave e saia deste arquivo de configuração.
     </para>
    </step>
    <step performance="required">
     <para>
      Para adicionar o serviço NFS à lista de servidores iniciados durante a inicialização do sistema, execute os seguintes comandos:
     </para>
<screen>systemctl enable nfsserver.service</screen>
    </step>
    <step performance="required">
     <para>
      Inicie o servidor NFS com <command>systemctl start nfsserver.service</command>. Se você precisar mudar a configuração do servidor NFS posteriormente, modifique o arquivo de configuração e reinicie o daemon NFS com <command>systemctl restart nfsserver.service</command>.
     </para>
    </step>
   </procedure>
   <procedure id="proc.deployment.remoteinst.instserver.nfs.slpann">
    <para>
     Anunciar o servidor NFS por OpenSLP faz o seu endereço ser conhecido por todos os clientes da sua rede.
    </para>
    <step performance="required">
     <para>
      Efetue login como <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step performance="required">
     <para>
      Crie o arquivo de configuração <filename>/etc/slp.reg.d/install.suse.nfs.reg</filename> com as seguintes linhas:
     </para>
<screen><?dbsuse-fo font-size="7pt"?>

# Register the NFS Installation Server
service:install.suse:nfs://$HOSTNAME/<replaceable>path_to_repository</replaceable>/DVD1,en,65535 
description=NFS Repository</screen>
     <para>
      Substitua <replaceable>caminho_para_repositório</replaceable> pelo caminho real da fonte de instalação no servidor.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicie o daemon OpenSLP com <command>systemctl start slpd.service</command>.
     </para>
    </step>
   </procedure>
   <para os="sles">
    Para obter mais informações sobre OpenSLP, consulte a documentação do pacote localizada em <filename>/usr/share/doc/packages/openslp/</filename> ou consulte o <xref linkend="cha.slp"/>. Mais informações sobre NFS no <xref linkend="cha.nfs"/>.
   </para>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.instserver.ftp">
   <title>Configurando um repositório FTP manualmente</title>
   <para>
    A criação do repositório FTP é bem parecida com a do repositório NFS. O repositório FTP também pode ser anunciado pela rede usando OpenSLP.
   </para>
   <procedure id="proc.deployment.remoteinst.instserver.ftp">
    <step performance="required">
     <para>
      Crie um diretório que mantenha as fontes de instalação como descrito na <xref linkend="sec.deployment.remoteinst.instserver.nfs"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Configure o servidor FTP para distribuir o conteúdo do seu diretório de instalação:
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        Efetue login como <systemitem class="username">root</systemitem> e instale o pacote <systemitem>vsftpd</systemitem> usando o gerenciamento de software do YaST.
       </para>
      </step>
      <step performance="required">
       <para>
        Digite o diretório raiz do servidor FTP:
       </para>
<screen>cd <option>/srv/ftp</option></screen>
      </step>
      <step performance="required">
       <para>
        Crie um subdiretório que mantenha as fontes de instalação no diretório raiz do FTP:
       </para>
<screen>mkdir <replaceable>repository</replaceable></screen>
       <para>
        Substitua <replaceable>repositório</replaceable> pelo nome do produto.
       </para>
      </step>
      <step performance="required">
       <para>
        Monte o conteúdo do repositório de instalação no ambiente raiz de mudanças do servidor FTP:
       </para>
<screen>mount --bind <replaceable>path_to_repository</replaceable> /srv/ftp/<replaceable>repository</replaceable></screen>
       <para>
        Substitua <replaceable>caminho_para_repositório</replaceable> e <replaceable>repositório</replaceable> pelos valores correspondentes à sua configuração. Se precisar tornar os valores permanentes, adicione-os a <filename>/etc/fstab</filename>.
       </para>
      </step>
      <step performance="required">
       <para>
        Inicie vsftpd com <command>vsftpd</command>.
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      Anuncie o repositório por OpenSLP, se for suportado pela sua configuração de rede:
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        Crie o arquivo de configuração <filename>/etc/slp.reg.d/install.suse.ftp.reg</filename> com as seguintes linhas:
       </para>
<screen><?dbsuse-fo font-size="7pt"?>

# Register the FTP Installation Server
service:install.suse:ftp://$HOSTNAME/<replaceable>repository</replaceable>/DVD1,en,65535 
description=FTP Repository</screen>
       <para>
        Substitua <replaceable>repositório</replaceable> pelo nome real do diretório do repositório em seu servidor. A linha <literal>service:</literal> deve ser digitada como uma linha contínua.
       </para>
      </step>
      <step performance="required">
       <para>
        Inicie o daemon OpenSLP com <command>systemctl start slpd.service</command>.
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
   <tip os="sles">
    <title>Configurando um servidor FTP com o YaST</title>
    <para>
     Para usar o YaST configurando manualmente o servidor FTP de instalação, consulte o <xref linkend="cha.ftp"/> para obter mais informações sobre como usar o módulo do servidor FTP do YaST.
    </para>
   </tip>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.instserver.http">
   <title>Configurando um repositório HTTP manualmente</title>
   <para>
    A criação do repositório HTTP é bem parecida com a do repositório NFS. O repositório HTTP também pode ser anunciado pela rede usando OpenSLP.
   </para>
   <procedure id="proc.deployment.remoteinst.instserver.http">
    <step performance="required">
     <para>
      Crie um diretório que mantenha as fontes de instalação como descrito na <xref linkend="sec.deployment.remoteinst.instserver.nfs"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Configure o servidor HTTP para distribuir o conteúdo do seu diretório de instalação:
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        <phrase os="sles">Instale o servidor Web Apache como descrito na <xref linkend="sec.apache2.quickstart.installation"/></phrase>.
       </para>
      </step>
      <step performance="required">
       <para>
        Insira o diretório root do servidor HTTP (<filename>/srv/www/htdocs</filename>) e crie o subdiretório que armazenará as fontes de instalação:
       </para>
<screen>mkdir <replaceable>repository</replaceable></screen>
       <para>
        Substitua <replaceable>repositório</replaceable> pelo nome do produto.
       </para>
      </step>
      <step performance="required">
       <para>
        Crie um link simbólico do local das fontes de instalação para o diretório raiz do servidor Web (<filename>/srv/www/htdocs</filename>):
       </para>
<screen>ln -s <replaceable>/path_to_repository </replaceable>/srv/www/htdocs/<replaceable>repository</replaceable></screen>
      </step>
      <step performance="required">
       <para>
        Modifique o arquivo de configuração do servidor HTTP (<filename>/etc/apache2/default-server.conf</filename>) para fazê-lo seguir links simbólicos. Substitua a seguinte linha:
       </para>
<screen>Options None</screen>
       <para>
        por
       </para>
<screen>Options Indexes FollowSymLinks</screen>
      </step>
      <step performance="required">
       <para>
        Recarregue a configuração do servidor HTTP usando <command>systemctl reload apache2.service</command>.
       </para>
      </step>
     </substeps>
    </step>
    <step performance="required">
     <para>
      Anuncie o repositório por OpenSLP, se for suportado pela sua configuração de rede:
     </para>
     <substeps performance="required">
      <step performance="required">
       <para>
        Crie o arquivo de configuração <filename>/etc/slp.reg.d/install.suse.http.reg</filename> com as seguintes linhas:
       </para>
<screen><?dbsuse-fo font-size="6.5pt"?>

# Register the HTTP Installation Server
service:install.suse:http://$HOSTNAME/<replaceable>repository</replaceable>/DVD1/,en,65535 
description=HTTP Repository</screen>
       <para>
        Substitua <replaceable>repositório</replaceable> pelo caminho real do repositório no servidor. A linha <literal>service:</literal> deve ser digitada como uma linha contínua.
       </para>
      </step>
      <step performance="required">
       <para>
        Inicie o daemon OpenSLP usando <command>systemctl start slpd.service</command>.
       </para>
      </step>
     </substeps>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.instserver.smb">
   <title>Gerenciando um repositório SMB</title>
   <para>
    Com o SMB, é possível importar as fontes de instalação de um servidor Microsoft Windows e iniciar a implantação do Linux mesmo sem nenhuma máquina Linux.
   </para>
   <procedure id="proc.deployment.remoteinst.instserver.smb.export">
    <para>
     Para configurar um Compartilhamento do Windows exportado para armazenar o repositório do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, faça o seguinte:
    </para>
    <step performance="required">
     <para>
      Efetue login na sua máquina Windows.
     </para>
    </step>
    <step performance="required">
     <para>
      Crie um novo diretório para armazenar toda a árvore de instalação chamado <filename>INSTALL</filename>, por exemplo.
     </para>
    </step>
    <step performance="required">
     <para>
      Exporte este compartilhamento de acordo com o procedimento descrito na sua documentação do Windows.
     </para>
    </step>
    <step performance="required">
     <para>
      Entre nesse compartilhamento e crie um subdiretório chamado <filename><replaceable>produto</replaceable></filename>. Substitua <replaceable>produto</replaceable> pelo nome real do produto.
     </para>
    </step>
    <step performance="required">
     <para>
      Entre no diretório <filename>INSTALL/<replaceable>produto</replaceable></filename> e copie cada DVD em um diretório separado, como <literal>DVD1</literal> e <literal>DVD2</literal>.
     </para>
    </step>
   </procedure>
   <para>
    Para usar um compartilhamento SMB montado como repositório, faça o seguinte:
   </para>
   <procedure id="proc.deployment.remoteinst.instserver.smb.use">
    <step performance="required">
     <para>
      Inicialize o destino de instalação.
     </para>
    </step>
    <step performance="required">
     <para>
      Selecione <guimenu>Instalação</guimenu>.
     </para>
    </step>
    <step performance="required">
     <para>
      Pressione <keycap>F4</keycap> para a seleção do repositório.
     </para>
    </step>
    <step performance="required">
     <para>
      Escolha SMB e digite o nome ou endereço IP da máquina Windows, o nome do compartilhamento (<filename>INSTALL/<replaceable>produto</replaceable>/DVD1</filename>, neste exemplo), o nome de usuário e a senha. A sintaxe é parecida com esta:
     </para>
<screen>smb://workdomain;user:password@server/INSTALL/DVD1</screen>
     <para>
      Depois que você pressionar <keycap function="enter">Enter</keycap>, o YaST será iniciado e você poderá executar a instalação.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.iso">
   <title>Usando imagens ISO da mídia de instalação no servidor</title>
   <para>
    Em vez de copiar as mídias físicas no diretório de servidor manualmente, você pode também montar as imagens ISO das mídias de instalação em seu servidor de instalação e usá-las como repositório. Para configurar um servidor HTTP, NFS ou FTP que usa imagens ISO em vez de cópias de mídia, faça o seguinte:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Faça download das imagens ISO e grave-as na máquina a ser usada como servidor de instalação.
     </para>
    </step>
    <step performance="required">
     <para>
      Efetue login como <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step performance="required">
     <para>
      Escolha e crie um local apropriado para os dados de instalação, conforme descrito na <xref linkend="sec.deployment.remoteinst.instserver.nfs"/>, na <xref linkend="sec.deployment.remoteinst.instserver.ftp"/> ou na <xref linkend="sec.deployment.remoteinst.instserver.http"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Crie subdiretórios para cada DVD.
     </para>
    </step>
    <step performance="required">
     <para>
      Para montar e descompactar cada imagem ISO no local final, emita o seguinte comando:
     </para>
<screen>mount -o loop <replaceable>path_to_iso</replaceable><replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable>/<replaceable>mediumx</replaceable></screen>
     <para>
      Substitua <replaceable>caminho_para_iso</replaceable> pelo caminho da sua cópia local da imagem ISO, <replaceable>caminho_para_repositório</replaceable> pelo diretório de origem do servidor, <replaceable>produto</replaceable> pelo nome do produto e <replaceable>mídiax</replaceable> pelo tipo (CD ou DVD) e número de mídias que está usando.
     </para>
    </step>
    <step performance="required">
     <para>
      Repita a etapa anterior para montar todas as imagens ISO necessárias ao seu produto.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicie seu servidor de instalação normalmente, conforme descrito na <xref linkend="sec.deployment.remoteinst.instserver.nfs"/>, na <xref linkend="sec.deployment.remoteinst.instserver.ftp"/> ou na <xref linkend="sec.deployment.remoteinst.instserver.http"/>.
     </para>
    </step>
   </procedure>
   <para>
    Para montar as imagens ISO automaticamente no momento do boot, adicione as respectivas entradas de montagem a <filename>/etc/fstab</filename>. Uma entrada de acordo com o exemplo anterior seria semelhante a esta:
   </para>
<screen><replaceable>path_to_iso</replaceable> <replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable><replaceable>medium</replaceable> auto loop</screen>
  </sect2>
 </sect1>
 <sect1 id="sec.deployment.remoteinst.boot">
  <title>Preparando a inicialização do sistema de destino</title>

  <para>
   Esta seção aborda as tarefas de configuração necessárias em cenários complexos de inicialização. Contém exemplos de configurações prontas para aplicar referentes a DHCP, inicialização PXE, TFTP e Wake on LAN.
  </para>

  <sect2 id="sec.deployment.remoteinst.boot.dhcp">
   <title>Configurando um servidor DHCP</title>
   <para>
    Há duas maneiras de configurar um servidor DHCP. Para o <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, o YaST oferece uma interface gráfica para o processo. Os usuários podem editar os arquivos de configuração manualmente.<phrase os="sles"> Para obter mais informações sobre servidores DHCP, consulte também o <xref linkend="cha.dhcp"/>.</phrase>
   </para>
   <sect3 id="sec.deployment.remoteinst.boot.dhcp.yast">
    <title>Configurando um servidor DHCP com o YaST</title>
    <para>
     Para anunciar a localização do servidor TFTP aos clientes da rede e especificar o arquivo da imagem de boot que deve ser usado pelo destino de instalação, adicione duas declarações à configuração do servidor DHCP.
    </para>
    <procedure id="proc.deployment.remoteinst.boot.dhcp.yast">
     <step performance="required">
      <para>
       Efetue login como <systemitem class="username">root</systemitem> na máquina que hospeda o servidor DHCP.
      </para>
     </step>
     <step performance="required">
      <para>
       Inicie <menuchoice><guimenu>YaST</guimenu><guimenu>Serviços de Rede</guimenu><guimenu>Servidor DHCP</guimenu></menuchoice>.
      </para>
     </step>
     <step performance="required">
      <para>
       Execute o assistente de configuração para fazer a configuração básica do servidor DHCP.
      </para>
     </step>
     <step id="st.deployment.remoteinst.boot.dhcp.yast.expert" performance="required">
      <para>
       Selecione <guimenu>Configurações de Especialista</guimenu> e <guimenu>Sim</guimenu> quando for notificado para sair da caixa de diálogo de inicialização.
      </para>
     </step>
     <step performance="required">
      <para>
       Na caixa de diálogo <guimenu>Declarações Configuradas</guimenu>, selecione a sub-rede na qual o novo sistema deve estar localizado e clique em <guimenu>Editar</guimenu>.
      </para>
     </step>
     <step performance="required">
      <para>
       Na caixa de diálogo <guimenu>Configuração de Sub-rede</guimenu>, selecione <guimenu>Adicionar</guimenu> para adicionar uma nova opção à configuração da sub-rede.
      </para>
     </step>
     <step performance="required">
      <para>
       Selecione <option>nome_do_arquivo</option> e digite <literal>pxelinux.0</literal> como o valor.
      </para>
     </step>
     <step performance="required">
      <para>
       Adicione outra opção (<option>next-server</option>) e defina o valor como o endereço do servidor TFTP.
      </para>
     </step>
     <step performance="required">
      <para>
       Selecione <guimenu>OK</guimenu> e <guimenu>Finalizar</guimenu> para concluir a configuração do servidor DHCP.
      </para>
     </step>
    </procedure>
    <para>
     Para configurar o DHCP a fim de fornecer um endereço IP estático para um host específico, entre nas <guimenu>Configurações de Especialista</guimenu> do módulo de configuração do servidor DHCP (<xref linkend="st.deployment.remoteinst.boot.dhcp.yast.expert" xrefstyle="StepOnPage"/>) e adicione uma nova declaração do tipo de host. Adicione as opções <option>hardware</option> e <option>fixed-address</option> a essa declaração de host e forneça os valores apropriados.
    </para>
   </sect3>
   <sect3 id="sec.deployment.remoteinst.boot.dhcp.man">
    <title>Configurando um servidor DHCP manualmente</title>
    <para>
     O que todo servidor DHCP precisa fazer, além de fornecer alocação automática de endereço aos clientes de rede, é anunciar o endereço IP do servidor TFTP e o arquivo que deve ser transferido pelas rotinas de instalação para a máquina de destino.
    </para>
    <procedure id="proc.deployment.remoteinst.boot.dhcp.man">
     <step performance="required">
      <para>
       Efetue login como <systemitem class="username">root</systemitem> na máquina que hospeda o servidor DHCP.
      </para>
     </step>
     <step performance="required">
      <para>
       Anexe as linhas seguintes a uma configuração de sub-rede do arquivo de configuração de seu servidor DHCP localizado em <filename>/etc/dhcpd.conf</filename>:
      </para>
<screen>subnet 192.168.1.0 netmask 255.255.255.0 { 
  range dynamic-bootp 192.168.1.200 192.168.1.228;
  # PXE related settings
  #
  # "next-server" defines the TFTP server that will be used
  next-server <replaceable>ip_tftp_server</replaceable>;
  #
  # "filename" specifies the pxelinux image on the TFTP server
  # the server runs in chroot under /srv/tftpboot
  filename  "pxelinux.0";
}</screen>
      <para>
       Substitua <replaceable>ip_servidor_tftp</replaceable> pelo endereço IP real do servidor TFTP. Para obter mais informações sobre as opções disponíveis em <filename>dhcpd.conf</filename>, consulte a página de manual sobre <systemitem>dhcpd.conf</systemitem>.
      </para>
     </step>
     <step performance="required">
      <para>
       Reinicie o servidor DHCP executando <command>systemctl restart dhcpd.service</command>.
      </para>
     </step>
    </procedure>
    <para>
     Se você planeja usar SSH para controle remoto de uma instalação PXE e Wake on LAN, especifique explicitamente o endereço IP que o DHCP deve fornecer ao destino de instalação. Para isso, modifique a configuração DHCP mencionada acima de acordo com o exemplo a seguir:
    </para>
<screen>group {
  # PXE related settings
  # 
  # "next-server" defines the TFTP server that will be used 
  next-server <replaceable>ip_tftp_server</replaceable>:
  # 
  # "filename" specifies the pxelinux image on the TFTP server 
  # the server runs in chroot under /srv/tftpboot
  filename "pxelinux.0";
  host test {
    hardware ethernet <replaceable>mac_address</replaceable>; 
    fixed-address <replaceable>some_ip_address</replaceable>;
    }
}
</screen>
    <para>
     A declaração de host apresenta o nome de host do destino de instalação. Para vincular o nome de host e o endereço IP a um host específico, você deve saber e especificar o endereço de hardware (MAC) do sistema. Substitua todas as variáveis usadas neste exemplo pelos valores reais que correspondem ao seu ambiente.
    </para>
    <para>
     Após a reinicialização do servidor DHCP, ele fornece um IP estático para o host especificado, habilitando-o a conectar-se ao sistema por SSH.
    </para>
   </sect3>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.boot.tftp">
   <title>Configurando um servidor TFTP</title>
   <para>
    Se for usada a instalação baseada no SUSE, será possível usar o YaST para configurar um Servidor TFTP. Se preferir, configure-o manualmente. O servidor TFTP entrega a imagem de boot ao sistema de destino após a inicialização e envia uma solicitação para ele.
   </para>
   <sect3 id="sec.deployment.remoteinst.boot.tftp.yast">
    <title>Configurando um servidor TFTP usando YaST</title>
    <procedure id="proc.deployment.remoteinst.boot.tftp.yast">
     <step performance="required">
      <para>
       Efetue login como <systemitem class="username">root</systemitem>.
      </para>
     </step>
     <step performance="required">
      <para>
       Inicie <menuchoice><guimenu>YaST</guimenu><guimenu>Serviços de Rede</guimenu><guimenu>Servidor TFTP</guimenu></menuchoice> e instale o pacote solicitado.
      </para>
     </step>
     <step performance="required">
      <para>
       Clique em <guimenu>Habilitar</guimenu> para verificar se o servidor foi iniciado e incluído nas rotinas de inicialização. De sua parte, não é necessária nenhuma outra ação de proteção. O xinetd inicia o tftpd no momento de inicialização.
      </para>
     </step>
     <step performance="required">
      <para>
       Clique em <guimenu>Abrir Porta no Firewall</guimenu> para abrir a porta adequada no firewall em execução na sua máquina. Se nenhum firewall estiver em execução no seu servidor, esta opção não está disponível.
      </para>
     </step>
     <step performance="required">
      <para>
       Clique em <guimenu>Pesquisar</guimenu> para pesquisar o diretório de imagem de inicialização. O diretório padrão <filename>/tftpboot</filename> é criado e selecionado automaticamente.
      </para>
     </step>
     <step performance="required">
      <para>
       Clique em <guimenu>Concluir</guimenu> para aplicar as suas configurações e iniciar o servidor.
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 id="sec.deployment.remoteinst.boot.tftp.man">
    <title>Configurando um servidor TFTP manualmente</title>
    <procedure id="proc.deployment.remoteinst.boot.tftp.man">
     <step performance="required">
      <para>
       Efetue login como <systemitem class="username">root</systemitem> e instale os pacotes <systemitem>tftp</systemitem> e <systemitem>xinetd</systemitem>.
      </para>
     </step>
     <step performance="required">
      <para>
       Se indisponível, crie os diretórios <filename>/srv/tftpboot</filename> e <filename>/srv/tftpboot/pxelinux.cfg</filename>.
      </para>
     </step>
     <step performance="required">
      <para>
       Adicione os arquivos adequados para a imagem de boot como descrito na <xref linkend="sec.deployment.remoteinst.boot.pxe"/>.
      </para>
     </step>
     <step performance="required">
      <para>
       Modifique a configuração do xinetd localizado em <filename>/etc/xinetd.d</filename> para certificar-se de que o servidor TFTP seja iniciado no boot:
      </para>
      <substeps performance="required">
       <step performance="required">
        <para>
         Se não existir, crie um arquivo chamado <filename>tftp</filename> neste diretório com <command>touch tftp</command>. Em seguida, execute <command>chmod 755 tftp</command>.
        </para>
       </step>
       <step performance="required">
        <para>
         Abra o arquivo <filename>tftp</filename> e adicione as seguintes linhas:
        </para>
<screen>service tftp 
{ 
        socket_type            = dgram
        protocol               = udp 
        wait                   = yes 
        user                   = root 
        server                 = /usr/sbin/in.tftpd 
        server_args            = -s /srv/tftpboot 
        disable                = no 
}
</screen>
       </step>
       <step performance="required">
        <para>
         Grave o arquivo e reinicie xinetd com <command>rcxinetd restart</command>.

        </para>
       </step>
      </substeps>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.boot.pxe">
   <title>Usando a inicialização PXE</title>
   <para>
    Informações técnicas e especificações completas sobre PXE estão disponíveis no documento Preboot Execution Environment (PXE) <ulink url="http://www.pix.net/software/pxeboot/archive/pxespec.pdf"/>).
   </para>
   <procedure id="proc.deployment.remoteinst.boot.pxe">
    <step performance="required">
     <para>
      Mude para o diretório <filename>boot/&lt;arquitetura&gt;/loader</filename> do seu repositório de instalação e copie os arquivos <filename>linux</filename>, <filename>initrd</filename>, <filename>message</filename>, <filename>biostest</filename> e <filename>memtest</filename> para o diretório <filename>/srv/tftpboot</filename>, digitando o seguinte:
     </para>
<screen>cp -a linux initrd message biostest memtest /srv/tftpboot</screen>
    </step>
    <step performance="required">
     <para>
      Instale o pacote <systemitem>syslinux</systemitem> diretamente dos DVDs de instalação com o YaST.
     </para>
    </step>
    <step performance="required">
     <para>
      Copie o arquivo <filename>/usr/share/syslinux/pxelinux.0</filename> para o diretório <filename>/srv/tftpboot</filename> digitando o seguinte:
     </para>
<screen>cp -a /usr/share/syslinux/pxelinux.0 /srv/tftpboot
     </screen>
    </step>
    <step performance="required">
     <para>
      Mude para o diretório do seu repositório de instalação e copie o arquivo <filename>isolinux.cfg</filename> para <filename> /srv/tftpboot/pxelinux.cfg/default</filename>, digitando o seguinte:
     </para>
<screen>cp -a boot/&lt;architecture&gt;/loader/isolinux.cfg /srv/tftpboot/pxelinux.cfg/default
     </screen>
    </step>
    <step performance="required">
     <para>
      Edite o arquivo <filename>/srv/tftpboot/pxelinux.cfg/default</filename> e remova as linhas que começam com <literal>readinfo</literal> e <literal>framebuffer</literal>.
     </para>
    </step>
    <step performance="required">
     <para>

      Insira as seguintes entradas nas linhas anexas dos rótulos padrão <option>failsafe</option> e <option>apic</option>:
     </para>
     <variablelist>
      <varlistentry>
       <term><option>insmod=<replaceable>módulo_do_kernel</replaceable></option>
       </term>
       <listitem>
        <para>
         Por meio dessa entrada, digite o módulo do Kernel de rede necessário para suportar a instalação em rede no cliente PXE. Substitua <replaceable>módulo_do_kernel</replaceable> pelo nome do módulo apropriado para o seu dispositivo de rede.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><option>netdevice=<replaceable>interface</replaceable></option>
       </term>
       <listitem>
        <para>
         Esta entrada define a interface de rede do cliente que deve ser usada para a instalação da rede. Só será necessária se o cliente possuir várias placas de rede, devendo ser adaptada de acordo. No caso de uma única placa de rede, esta entrada pode ser omitida.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>
<option>install=nfs://<replaceable>ip_servidorinstal</replaceable>/<replaceable>caminho_para_repositório</replaceable>/DVD1</option>
       </term>
       <listitem>
        <para>
         Esta entrada define o servidor NFS e o repositório para a instalação do cliente. Substitua <replaceable>ip_servidorinstal</replaceable> pelo endereço IP real do servidor de instalação. <replaceable>caminho_para_repositório</replaceable> deve ser substituído pelo caminho real até o repositório. Os repositórios HTTP, FTP ou SMB são tratados de forma semelhante, exceto pelo prefixo de protocolo, que deve ser <literal>http</literal>, <literal>ftp</literal> ou <literal>smb</literal>.
        </para>
        <important>
         <title>Adicionando opções de boot</title>
         <para>
          Se precisar passar outras opções de boot para as rotinas de instalação, como parâmetros de boot SSH ou VNC, anexe-as à entrada <option>install</option>. Uma visão geral dos parâmetros e alguns exemplos são apresentados na <xref linkend="sec.deployment.remoteinst.bootinst"/>.
         </para>
        </important>
       </listitem>
      </varlistentry>
     </variablelist>
     <tip>
      <title>Mudando nomes de arquivo do kernel e do initrd</title>
      <para>
       É possível usar nomes de arquivo diferentes para imagens do Kernel e do initrd. Isso é útil para fornecer sistemas operacionais diferentes do mesmo servidor de boot. No entanto, saiba que apenas um ponto é permitido nos nomes de arquivo fornecidos pelo TFTP para boot PXE.
      </para>
     </tip>
     <para>
      A seguir, temos um exemplo de arquivo <option>/srv/tftpboot/pxelinux.cfg/default. </option> Ajuste o prefixo do protocolo do repositório para corresponder à sua configuração de rede e especifique o método de sua preferência para conexão com o instalador, adicionando as opções <literal>vnc</literal> e <literal>vncpassword</literal> ou <literal>usessh</literal> e <literal>sshpassword</literal> à entrada <literal>install</literal>. As linhas separadas por <literal>\</literal> devem ser digitadas como uma linha contínua sem quebra de linha e sem <literal>\</literal>.
     </para>
<screen>default harddisk 
        
# default
label linux 
  kernel linux 
  append initrd=initrd ramdisk_size=65536 \
     install=nfs://<replaceable>ip_instserver</replaceable>/<replaceable>path_to_repository</replaceable>/<replaceable>product</replaceable>/DVD1 
	    
# repair
label repair
  kernel linux
  append initrd=initrd splash=silent repair=1 showopts

# rescue 
label rescue 
  kernel linux 
  append initrd=initrd ramdisk_size=65536 rescue=1 

# bios test
label firmware
  kernel linux
  append initrd=biostest,initrd splash=silent install=exec:/bin/run_biostest showopts

#  memory test 
label memtest 
  kernel memtest 

#  hard disk 
label harddisk
  localboot 0

implicit     0 
display      message
prompt       1 
timeout      100</screen>
    </step>
    <step performance="required">
     <para>
      Substitua <replaceable>ip_servidorinstal</replaceable> e <replaceable>caminho_para_repositório</replaceable> pelos valores usados na sua configuração.
     </para>
     <para>
      A seção a seguir serve como breve referência às opções PXELINUX usadas nesta configuração. Para obter mais informações sobre as opções disponíveis, consulte a documentação do pacote <systemitem>syslinux</systemitem> localizada em <filename>/usr/share/doc/packages/syslinux/</filename>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.boot.pxeopts">
   <title>Opções de configuração PXELINUX</title>
   <para>
    As opções relacionadas aqui são um subconjunto de todas as opções disponíveis para o arquivo de configuração PXELINUX.
   </para>
   <variablelist>
    <varlistentry>
     <term><option>APPEND <replaceable>opções... </replaceable></option>
     </term>
     <listitem>
      <para>
       Adicione uma ou mais opções à linha de comando do Kernel. São adicionadas para inicializações manuais e automáticas. As opções são adicionadas no início da linha de comando do Kernel, normalmente permitindo que as opções de Kernel digitadas explicitamente as substituam.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>APPEND -</option>
     </term>
     <listitem>
      <para>
       Não anexa nada. <option>APPEND</option> com um único hífen como argumento em uma seção <option>LABEL</option> pode ser usado para anular um <option>APPEND</option> global.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>DEFAULT <replaceable>opções de kernel</replaceable>...</option>
     </term>
     <listitem>
      <para>
       Defina a linha de comando padrão do Kernel. Se PXELINUX é inicializado automaticamente, atua como se as entradas após DEFAULT tivessem sido digitadas no prompt de boot, exceto a opção auto, que é adicionada automaticamente, indicando uma inicialização automática.
      </para>
      <para>
       Se nenhum arquivo de configuração ou nenhuma entrada DEFAULT estiver presente no arquivo de configuração, o padrão será o nome de Kernel <quote>linux</quote> sem opções.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>

     <term><option>IFAPPEND <replaceable>FLAG</replaceable></option>
     </term>
     <listitem>
      <para>
       Adiciona uma opção específica à linha de comando do kernel de acordo com o valor <replaceable>FLAG</replaceable>. A opção <option>IFAPPEND</option> está disponível apenas no PXELINUX. <replaceable>FLAG</replaceable> espera um valor, descrito em <xref linkend="tab.deployment.boot.pxeopts.ifappend"/>:
      </para>
      <table id="tab.deployment.boot.pxeopts.ifappend">
       <title>Opções de linha de comando do kernel geradas e adicionadas do <option>IFAPPEND</option></title>
       <tgroup cols="2">
        <colspec colwidth="1*"/>
        <colspec colwidth="4*"/>
        <thead>
         <row>
          <entry valign="middle">
           <para>
            Argumento
           </para>
          </entry>
          <entry>
           <para>
            Linha de Comando do Kernel Gerada/Descrição
           </para>
          </entry>
         </row>
        </thead>
        <tbody>
         <row>
          <entry>
           <para>
            <option>1</option>
           </para>
          </entry>
          <entry>
<screen>ip=<replaceable>CLIENT_IP</replaceable>:<replaceable>BOOT_SERVER_IP</replaceable>:<replaceable>GW_IP</replaceable>:<replaceable>NETMASK</replaceable></screen>
           <para>
            Os marcadores são substituídos de acordo com a entrada do servidor DHCP/BOOTP ou boot PXE.
           </para>
           <para>
            Observe que essa opção não substitui a execução de um cliente DHCP no sistema inicializado. Sem as renovações regulares, o aluguel adquirido pelo BIOS PXE vai expirar, disponibilizando o endereço IP para reutilização do servidor DHCP.
           </para>
          </entry>
         </row>
         <row>
          <entry>
           <para>
            <option>2</option>
           </para>
          </entry>
          <entry>
<screen>BOOTIF=<replaceable>MAC_ADDRESS_OF_BOOT_INTERFACE</replaceable></screen>
           <para>
            Essa opção é útil para evitar tempos de espera quando o servidor de instalação investiga uma interface LAN em seguida da outra, até obter a resposta de um servidor DHCP. Usando essa opção, o programa initrd pode determinar de qual interface o sistema foi inicializado. O linuxrc lê essa opção e utiliza essa interface de rede.
           </para>
          </entry>
         </row>
         <row>
          <entry>
           <para>
            <option>4</option>
           </para>
          </entry>
          <entry>
<screen>SYSUUID=<replaceable>SYSTEM_UUID</replaceable></screen>
           <para>
            Adiciona UUIDs como hexadecimais em minúsculas, consulte <filename>/usr/share/doc/packages/syslinux/pxelinux.txt</filename>
           </para>
          </entry>
         </row>
        </tbody>
       </tgroup>
      </table>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>LABEL <replaceable>rótulo</replaceable> KERNEL <replaceable>imagem</replaceable> APPEND <replaceable>opções</replaceable>...</option>
     </term>
     <listitem>
      <para>
       Indica que, se for digitado <replaceable>label</replaceable> como o Kernel a ser inicializado, o PXELINUX deverá inicializar <replaceable>image</replaceable>, e as opções <option>APPEND</option> especificadas deverão ser usadas em vez das que estão especificadas na seção global do arquivo (antes do primeiro comando <option>LABEL</option>). O padrão para <replaceable>imagem</replaceable> é o mesmo de <replaceable>rótulo</replaceable> e, se não for fornecido nenhum <option>APPEND</option>, o padrão será usar a entrada global (se houver). Até 128 entradas <option>LABEL</option> são permitidas.
      </para>

      <para>
       E PXELINUX usa a seguinte sintaxe:
      </para>
<screen>label <replaceable>mylabel</replaceable> 
  kernel <replaceable>mykernel</replaceable> 
  append <replaceable>myoptions</replaceable></screen>
      <para>
       Os rótulos são desmembrados como se fossem nomes de arquivo e deverão ser exclusivos após o desmembramento. Por exemplo, não seria possível distinguir os dois rótulos <quote>v2.6.30</quote> e <quote>v2.6.31</quote> em PXELINUX, pois ambos são desmembrados em um mesmo nome de arquivo do DOS.
      </para>
      <para>
       O Kernel não precisa ser um Kernel do Linux, ele pode ser um setor de boot ou um arquivo COMBOOT.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>LOCALBOOT <replaceable>tipo</replaceable></option>
     </term>
     <listitem>
      <para>
       Em PXELINUX, especificar <option>LOCALBOOT 0</option> em vez de uma opção <option>KERNEL</option> significa chamar este rótulo específico, e causa uma inicialização de disco local em vez de uma inicialização de Kernel.
      </para>
      <informaltable frame="topbot" rowsep="0">
       <tgroup cols="2">

        <thead>
         <row>
          <entry colname="1">
           <para>
            Argumento
           </para>
          </entry>
          <entry colname="2">
           <para>
            Descrição
           </para>
          </entry>
         </row>
        </thead>
        <tbody>
         <row>
          <entry colname="1">
           <para>
            <literal>0</literal>
           </para>
          </entry>
          <entry colname="2">
           <para>
            Executa uma inicialização normal
           </para>
          </entry>
         </row>
         <row>
          <entry colname="1">
           <para>
            <literal>4</literal>
           </para>
          </entry>
          <entry colname="2">
           <para>
            Executa uma inicialização local com o driver UNDI (Universal Network Driver Interface) ainda residente na memória
           </para>
          </entry>
         </row>
         <row>
          <entry colname="1">
           <para>
            <literal>5</literal>
           </para>
          </entry>
          <entry colname="2">
           <para>
            Realiza uma inicialização local com toda a pilha PXE, incluindo o driver UNDI, ainda residente na memória
           </para>
          </entry>
         </row>
        </tbody>
       </tgroup>
      </informaltable>
      <para>
       Todos os outros valores são indefinidos. Se você não sabe quais são as pilhas UNDI ou PXE, especifique <literal>0</literal>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>TIMEOUT <replaceable>tempo_de_espera</replaceable></option>
     </term>
     <listitem>
      <para>
       Indica quanto tempo esperar no prompt de boot até inicializar automaticamente, em unidades de 1/10 de segundo. O tempo de espera é cancelado tão logo o usuário digite algo no teclado, considerando que o usuário conclua o comando iniciado. O tempo de espera zero desabilita completamente o tempo de espera (que é também o padrão). O valor do tempo de espera máximo possível é 35996 (pouco menos de uma hora).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><option>PROMPT<replaceable> val_flag</replaceable></option>
     </term>
     <listitem>
      <para>
       Se <option>val_flag</option> for 0, só exibirá o prompt de boot se <keycap function="shift">Shift</keycap> ou <keycap function="alt">Alt</keycap> estiver pressionado ou <keycap>Caps Lock</keycap> ou <keycap>Scroll Lock</keycap> estiver definido (que é o padrão). Se <option>val_flag</option> for 1, exibirá sempre o prompt de boot.
      </para>
<screen>F2  <replaceable>filename</replaceable>
F1  <replaceable>filename</replaceable> 
..etc... 
F9  <replaceable>filename</replaceable>
F10 <replaceable>filename</replaceable></screen>
      <para>
       Exibe o arquivo indicado na tela quando uma tecla de função é pressionada no prompt de boot. Isso pode ser usado para implementar a ajuda online de pré-inicialização (supostamente para as opções de linha do comando do Kernel). Para compatibilidade com versões anteriores, <keycap>F10</keycap> também pode ser digitado como <keycap>F0</keycap>. Observe que ainda não há um meio de vincular nomes de arquivo a <keycap>F11</keycap> e <keycap>F12</keycap>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.boot.pxeprep">
   <title>Preparando o sistema de destino para inicialização PXE</title>
   <para>
    Prepare o BIOS do sistema para a inicialização PXE incluindo a opção PXE na ordem de inicialização do BIOS.
   </para>
   <warning>
    <title>Ordem de inicialização do BIOS</title>
    <para>
     Não coloque a opção PXE na frente da opção de inicialização do disco rígido no BIOS. Do contrário, o sistema tentaria se reinstalar sempre que fosse inicializado.
    </para>
   </warning>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.boot.wolprep">
   <title>Preparando o sistema de destino para Wake on LAN</title>
   <para>
    Wake on LAN (WOL) requer que a opção de BIOS adequada seja habilitada antes da instalação. Além disso, anote o endereço MAC do sistema de destino. Esses dados são necessários para iniciar o Wake on LAN.
   </para>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.boot.wol">
   <title>Ativação na LAN</title>
   <para>
    Wake on LAN permite que a máquina seja ativada por um pacote de rede especial contendo o endereço MAC da máquina. Como toda máquina no mundo tem um identificador MAC exclusivo, não se preocupe caso ligue acidentalmente a máquina errada.
   </para>
   <important>
    <title>Wake on LAN em diferentes segmentos de rede</title>
    <para>
     Se a máquina controladora não estiver localizada no mesmo segmento de rede que o destino de instalação que deve ser desperto, configure as solicitações WOL para serem enviadas como multicasts ou controle remotamente uma máquina naquele segmento de rede para atuar como remetente das solicitações.
    </para>
   </important>
   <para>
    Os usuários do SUSE Linux Enterprise Server podem utilizar um módulo do YaST chamado WOL para configurar facilmente o Wake on LAN. Os usuários de outras versões de sistemas operacionais baseados no SUSE Linux podem usar uma ferramenta de linha de comando.
   </para>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.boot.wolyast">
   <title>Wake on LAN com o YaST</title>
   <procedure id="proc.deployment.remoteinst.boot.wolyast">
    <step performance="required">
     <para>
      Efetue login como <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step performance="required">
     <para>
      Inicie <menuchoice><guimenu>YaST</guimenu><guimenu>Serviços de Rede</guimenu><guimenu>WOL</guimenu></menuchoice>.
     </para>
    </step>
    <step performance="required">
     <para>
      Clique em <guimenu>Adicionar</guimenu> e digite o nome de host e o endereço MAC do sistema de destino.
     </para>
    </step>
    <step performance="required">
     <para>
      Para ativar essa máquina, selecione a entrada apropriada e clique em <guimenu>Wake up</guimenu>.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 id="sec.deployment.remoteinst.bootinst">
  <title>Inicializando o sistema de destino para instalação</title>

  <para>
   Há duas maneiras diferentes de personalizar o processo de boot para instalação, além das mencionadas na <xref linkend="sec.deployment.remoteinst.boot.wol"/> e na <xref linkend="sec.deployment.remoteinst.boot.pxe"/>. Você pode usar as opções de boot padrão e as teclas de função ou usar o prompt de opções de boot da tela de boot da instalação para passar quaisquer opções de boot que o Kernel de instalação possa precisar neste hardware específico.
  </para>

  <sect2 id="sec.deployment.remoteinst.bootinst.opts">
   <title>Usando as opções padrão de boot</title>
   <para>
    As opções de boot foram descritas detalhadamente no <xref linkend="cha.inst"/>. Em geral, basta selecionar <guimenu>Instalação</guimenu> para iniciar o processo de boot da instalação.
   </para>
   <para>
    Se problemas ocorrerem, use <guimenu>Instalação—ACPI Desabilitado</guimenu> ou <guimenu>Instalação—Configurações Seguras</guimenu>. Para obter mais informações sobre solução de problemas no processo de instalação, consulte a <xref linkend="sec.trouble.install"/>.
   </para>
   <para>
    A barra de menus na tela inferior oferece algumas funcionalidades avançadas necessárias em algumas configurações. Usando as teclas de função, você pode especificar opções adicionais para passar para as rotinas de instalação sem que precise saber a sintaxe detalhada desses parâmetros (consulte a <xref linkend="sec.deployment.remoteinst.bootinst.custom"/>). Uma descrição detalhada das teclas de função disponíveis pode ser obtida na <xref linkend="sec.i.yast2.bootscreen"/>.
   </para>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.bootinst.custom">
   <title>Usando opções de boot personalizadas</title>
   <para>
    O uso do conjunto apropriado de opções de boot simplifica o procedimento de instalação. Vários parâmetros também podem ser configurados posteriormente usando as rotinas linuxrc, mas usar as opções de boot é mais fácil. Em algumas configurações automatizadas, as opções de boot podem ser fornecidas com <filename>initrd</filename> ou um arquivo <filename>info</filename>.
   </para>
   <para>
    A tabela a seguir relaciona todos os cenários de instalação mencionados neste capítulo com os parâmetros necessários para inicialização e as opções de boot correspondentes. Anexe todos eles na ordem em que aparecem na tabela para obter uma string de opção de boot que é passada para as rotinas de instalação. Por exemplo (todos em uma linha):
   </para>
<screen>install=<replaceable>xxx</replaceable> netdevice<replaceable>=xxx</replaceable> hostip=<replaceable>xxx</replaceable> netmask=<replaceable>xxx</replaceable> vnc=<replaceable>xxx</replaceable> vncpassword=<replaceable>xxx</replaceable></screen>

   <para>
    Substitua todos os valores <replaceable>xxx</replaceable> desta string pelos valores apropriados à sua configuração.
   </para>
   <variablelist id="tab.deployment.remoteinst.bootinst.custom">
    <varlistentry>
     <term><xref linkend="cha.inst"/>
     </term>
     <listitem>
      <formalpara>
       <title>Parâmetros necessários para inicialização</title>
       <para>
        Nenhum
       </para>
      </formalpara>
      <formalpara>
       <title>Opções de Boot</title>
       <para>
        Nenhuma é necessária
       </para>
      </formalpara>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><xref linkend="sec.deployment.remoteinst.scenario.vncstat"/>
     </term>
     <listitem>
      <itemizedlist spacing="compact" mark="bullet">
       <title>Parâmetros necessários para inicialização</title>
       <listitem>
        <para>
         Localização do servidor de instalação
        </para>
       </listitem>
       <listitem>
        <para>
         Dispositivo de rede
        </para>
       </listitem>
       <listitem>
        <para>
         Endereço IP
        </para>
       </listitem>
       <listitem>
        <para>
         Máscara de rede
        </para>
       </listitem>
       <listitem>
        <para>
         Gateway
        </para>
       </listitem>
       <listitem>
        <para>
         Habilitação VNC
        </para>
       </listitem>
       <listitem>
        <para>
         Senha VNC
        </para>
       </listitem>
      </itemizedlist>
      <itemizedlist spacing="compact" mark="bullet">
       <title>Opções de Boot</title>
       <listitem>
        <para>
         <filename>install=(nfs,http, ftp,smb)://<replaceable>caminho_mídia_inst</replaceable></filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>netdevice=<replaceable>um_disp_rede</replaceable></filename> (necessário apenas se vários dispositivos de rede estiverem disponíveis)
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>hostip=<replaceable>um_ip</replaceable> </filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>netmask=<replaceable>uma_máscara_rede</replaceable> </filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>gateway=<replaceable>gateway_ip</replaceable> </filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>vnc=1</filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>vncpassword=<replaceable>uma_senha</replaceable> </filename>
        </para>
       </listitem>
      </itemizedlist>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><xref linkend="sec.deployment.remoteinst.scenario.vncdyn"/>
     </term>
     <listitem>
      <itemizedlist spacing="compact" mark="bullet">
       <title>Parâmetros necessários para inicialização</title>
       <listitem>
        <para>
         Localização do servidor de instalação
        </para>
       </listitem>
       <listitem>
        <para>
         Habilitação VNC
        </para>
       </listitem>
       <listitem>
        <para>
         Senha VNC
        </para>
       </listitem>
      </itemizedlist>
      <itemizedlist spacing="compact" mark="bullet">
       <title>Opções de Boot</title>
       <listitem>
        <para>
         <filename>install=(nfs,http, ftp,smb)://<replaceable>caminho_mídia_inst</replaceable></filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <literal>vnc=1</literal>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>vncpassword=<replaceable>uma_senha</replaceable> </filename>
        </para>
       </listitem>
      </itemizedlist>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><xref linkend="sec.deployment.remoteinst.scenario.vncpxe"/>
     </term>
     <listitem>
      <itemizedlist spacing="compact" mark="bullet">
       <title>Parâmetros necessários para inicialização</title>
       <listitem>
        <para>
         Localização do servidor de instalação
        </para>
       </listitem>
       <listitem>
        <para>
         Localização do servidor TFTP
        </para>
       </listitem>
       <listitem>
        <para>
         Habilitação VNC
        </para>
       </listitem>
       <listitem>
        <para>
         Senha VNC
        </para>
       </listitem>
      </itemizedlist>
      <formalpara>
       <title>Opções de Boot</title>
       <para>
        Não aplicável; processo gerenciado via PXE e DHCP
       </para>
      </formalpara>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><xref linkend="sec.deployment.remoteinst.scenario.sshstat"/>
     </term>
     <listitem>
      <itemizedlist spacing="compact" mark="bullet">
       <title>Parâmetros necessários para inicialização</title>
       <listitem>
        <para>
         Localização do servidor de instalação
        </para>
       </listitem>
       <listitem>
        <para>
         Dispositivo de rede
        </para>
       </listitem>
       <listitem>
        <para>
         Endereço IP
        </para>
       </listitem>
       <listitem>
        <para>
         Máscara de rede
        </para>
       </listitem>
       <listitem>
        <para>
         Gateway
        </para>
       </listitem>
       <listitem>
        <para>
         Habilitação SSH
        </para>
       </listitem>
       <listitem>
        <para>
         Senha SSH
        </para>
       </listitem>
      </itemizedlist>
      <itemizedlist spacing="compact" mark="bullet">
       <title>Opções de Boot</title>
       <listitem>
        <para>
         <filename>install=(nfs,http, ftp,smb)://<replaceable>caminho_mídia_inst</replaceable></filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>netdevice=<replaceable>um_disp_rede</replaceable></filename> (necessário apenas se vários dispositivos de rede estiverem disponíveis)
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>hostip=<replaceable>um_ip</replaceable> </filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>netmask=<replaceable>uma_máscara_rede</replaceable> </filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>gateway=<replaceable>gateway_ip</replaceable> </filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <literal>usessh=1</literal>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>sshpassword=<replaceable>uma_senha</replaceable> </filename>
        </para>
       </listitem>
      </itemizedlist>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><xref linkend="sec.deployment.remoteinst.scenario.sshdyn"/>
     </term>
     <listitem>
      <itemizedlist spacing="compact" mark="bullet">
       <title>Parâmetros necessários para inicialização</title>
       <listitem>
        <para>
         Localização do servidor de instalação
        </para>
       </listitem>
       <listitem>
        <para>
         Habilitação SSH
        </para>
       </listitem>
       <listitem>
        <para>
         Senha SSH
        </para>
       </listitem>
      </itemizedlist>
      <itemizedlist spacing="compact" mark="bullet">
       <title>Opções de Boot</title>
       <listitem>
        <para>
         <filename>install=(nfs,http, ftp,smb)://<replaceable>caminho_mídia_inst</replaceable></filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>usessh=1</filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>sshpassword=<replaceable>uma_senha</replaceable> </filename>
        </para>
       </listitem>
      </itemizedlist>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><xref linkend="sec.deployment.remoteinst.scenario.sshpxe"/>
     </term>
     <listitem>
      <itemizedlist spacing="compact" mark="bullet">
       <listitem>
        <para>
         Localização do servidor de instalação
        </para>
       </listitem>
       <listitem>
        <para>
         Localização do servidor TFTP
        </para>
       </listitem>
       <listitem>
        <para>
         Habilitação SSH
        </para>
       </listitem>
       <listitem>
        <para>
         Senha SSH
        </para>
       </listitem>
      </itemizedlist>
      <formalpara>
       <title>Opções de Boot</title>
       <para>
        Não aplicável; processo gerenciado via PXE e DHCP
       </para>
      </formalpara>
     </listitem>
    </varlistentry>
   </variablelist>
   <tip>
    <title>Mais informações sobre opções de boot do linuxrc</title>
    <para>
     Saiba mais sobre as opções de boot linuxrc usadas para inicializar um sistema Linux em <ulink url="http://en.opensuse.org/SDB:Linuxrc"/>.
    </para>
   </tip>
   <sect3 id="sec.deployment.remoteinst.bootinst.custom.addon">
    <title>Instalando produtos complementares e atualizações de driver</title>
    <para>
     O <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> suporta a instalação de produtos complementares com extensões (por exemplo, SUSE Linux Enterprise High Availability Extension), produtos e drivers de terceiros ou software adicional. Para instalar automaticamente um produto complementar durante a implantação remota do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, especifique o parâmetro <literal>addon=<replaceable>REPOSITÓRIO</replaceable></literal>.
    </para>
    <para>
     <replaceable>REPOSITÓRIO</replaceable> deve ser um repositório hospedado reconhecido pelo YaST (YaST2 ou YUM (rpm-md)). Não são suportadas imagens ISO no momento.
    </para>
    <tip>
     <title>Atualizações de driver</title>
     <para>
      Você encontra atualizações de driver em <ulink url="http://drivers.suse.com/"/>. Nem todas as atualizações de driver são fornecidas como repositórios; algumas só estão disponíveis como imagens ISO e, portanto, não podem ser instaladas com o parâmetro <literal>addon</literal>. Há instruções sobre como instalar atualizações de driver por imagem ISO disponíveis em <ulink url="http://drivers.suse.com/doc/SolidDriver/Driver_Kits.html"/>.
     </para>
    </tip>
   </sect3>
  </sect2>
 </sect1>
 <sect1 id="sec.deployment.remoteinst.monitor">
  <title>Monitorando o processo de instalação</title>

  <para>
   Há várias opções para monitorar o processo de instalação remotamente. Se as opções de boot adequadas tiverem sido especificadas ao inicializar para instalação, VNC ou SSH podem ser usados para controlar a instalação e a configuração do sistema de uma estação de trabalho remota.
  </para>

  <sect2 id="sec.deployment.remoteinst.monitor.vnc">
   <title>Instalação VNC</title>
   <para>
    Usando um software viewer de VNC, é possível controlar remotamente a instalação do <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> praticamente de qualquer sistema operacional. Esta seção apresenta a configuração usando um visualizador VNC ou um browser da Web.
   </para>
   <sect3 id="sec.deployment.remoteinst.monitor.vnc.prep">
    <title>Preparando para instalação VNC</title>
    <para>
     Tudo o que você precisa fazer no destino da instalação para preparar uma instalação VNC é fornecer as opções de boot adequadas na inicialização inicial para instalação (consulte a <xref linkend="sec.deployment.remoteinst.bootinst.custom"/>). O sistema de destino inicializa em um ambiente baseado em texto e espera que um cliente VNC conecte-se ao programa de instalação.
    </para>
    <para>
     O programa de instalação anuncia o endereço IP e exibe o número necessário para conexão para a instalação. Se você tiver acesso físico ao sistema de destino, essas informações são fornecidas logo depois do sistema ser inicializado para instalação. Digite esses dados quando eles forem solicitados pelo software cliente VNC e forneça a sua senha VNC.
    </para>
    <para>
     Como o destino da instalação se anuncia por OpenSLP, é possível recuperar as informações de endereço do destino da instalação por um browser SPL sem a necessidade de nenhum contato físico com a instalação propriamente dita, desde que a sua configuração de rede e todas as máquinas suportem OpenSLP:
    </para>
    <procedure id="proc.deployment.remoteinst.monitor.vnc.prep">
     <title>Localizando instalações do VNC via OpenSLP</title>
     <step performance="required">
      <para>
       Execute <command>slptool findsrvtypes | grep vnc</command> para ver uma lista de todos os serviços que oferecem VNC. Os destinos da instalação do VNC devem estar disponíveis em um serviço denominado <literal>YaST.installation.suse</literal>.
      </para>
     </step>
     <step performance="required">
      <para>
       Execute <command>slptool findsrvs <replaceable>YaST.installation.suse</replaceable></command> para ver uma lista das instalações disponíveis. Use o endereço IP e a porta (normalmente, <systemitem>5901</systemitem>) fornecidos pelo viewer do VNC.
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3 id="sec.deployment.remoteinst.monitor.vnc.connect">
    <title>Conectando-se ao programa de instalação</title>
    <para>
     Há duas formas de se conectar a um servidor VNC (neste caso, o destino da instalação). Você pode iniciar um visualizador VNC independente em qualquer sistema operacional ou conectar-se usando um browser da Web habilitado para Java.
    </para>
    <para>
     Com o VNC, é possível controlar a instalação de um sistema Linux de qualquer outro sistema operacional, incluindo outras variedades do Linux, Windows ou Mac OS.
    </para>
    <para>
     Em uma máquina Linux, verifique se o pacote <systemitem>tightvnc</systemitem> está instalado. Em uma máquina Windows, instale a porta Windows deste aplicativo, que pode ser obtida na home page do TightVNC (<ulink url="http://www.tightvnc.com/download.html"/>).
    </para>
    <procedure id="proc.deployment.remoteinst.monitor.vnc.connect.app">
     <para>
      Para conectar-se ao programa de instalação executado na máquina de destino, proceda da seguinte maneira:
     </para>
     <step performance="required">
      <para>
       Inicie o visualizador VNC.
      </para>
     </step>
     <step performance="required">
      <para>
       Digite o endereço IP e o número de exibição do destino de instalação como fornecidos pelo browser SLP ou pelo próprio programa de instalação:

      </para>
<screen><replaceable>ip_address</replaceable>:<replaceable>display_number</replaceable></screen>
      <para>
       Uma janela é aberta na área de trabalho, mostrando as telas do YaST como em uma instalação local normal.
      </para>
     </step>
    </procedure>
    <para>
     Ao usar um browser da Web para conectar-se ao programa de instalação, você fica totalmente independente de qualquer software VNC ou do sistema operacional subjacente. Desde que o aplicativo browser tenha o suporte Java habilitado, você poderá usar qualquer browser (Firefox, Internet Explorer, Chromium, Opera, etc.) para executar a instalação do sistema Linux.
    </para>
    <para>
     Para executar uma instalação VCN, proceda da seguinte maneira:
    </para>
    <procedure id="proc.deployment.remoteinst.monitor.vnc.connect.brow">
     <step performance="required">
      <para>
       Inicie o seu browser da Web favorito.
      </para>
     </step>
     <step performance="required">
      <para>
       Digite o seguinte no prompt de endereço:

      </para>
<screen>http://<replaceable>ip_address_of_target</replaceable>:5801</screen>
     </step>
     <step performance="required">
      <para>
       Digite sua senha VNC quando solicitado. A janela do browser agora exibe as telas do YaST como em uma instalação local normal.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 id="sec.deployment.remoteinst.monitor.ssh">
   <title>Instalação SSH</title>
   <para>
    Com o SSH, você pode controlar remotamente a instalação da sua máquina Linux usando qualquer software cliente SSH.
   </para>
   <sect3 id="sec.deployment.remoteinst.monitor.ssh.prep">
    <title>Preparando para instalação SSH</title>
    <para>
     Além de instalar o pacote de software apropriado (OpenSSH para Linux e PuTTY para Windows), você precisa passar as opções de boot corretas para habilitar o SSH para instalação. Consulte a <xref linkend="sec.deployment.remoteinst.bootinst.custom"/> para obter os detalhes. Por padrão, o OpenSSH é instalado em qualquer sistema operacional baseado no SUSE Linux.
    </para>
   </sect3>
   <sect3 id="sec.deployment.remoteinst.monitor.ssh.connect">
    <title>Conectando-se ao programa de instalação</title>
    <procedure id="proc.deployment.remoteinst.monitor.ssh.connect">
     <step performance="required">
      <para>
       Recupere o endereço IP do destino da instalação. Se você tiver acesso físico à máquina de destino, use o endereço IP fornecido pela rotina de instalação no console após a primeira inicialização. Caso contrário, use o endereço IP que foi atribuído a este host específico na configuração de servidor DHCP.
      </para>
     </step>
     <step performance="required">
      <para>
       Em uma linha de comando, digite o seguinte comando:
      </para>
<screen>ssh -X root@<replaceable>
ip_address_of_target</replaceable></screen>
      <para>
       Substitua <replaceable>endereço_ip_do_destino</replaceable> pelo endereço IP real do destino de instalação.
      </para>
     </step>
     <step performance="required">
      <para>
       Quando for solicitado um nome de usuário, digite <literal>root</literal>.
      </para>
     </step>
     <step performance="required">
      <para>
       Quando for solicitada uma senha, digite a que foi definida com a opção de inicialização do SSH. Depois que você autenticar com êxito, será exibido um prompt de linha de comando para o destino da instalação.
      </para>
     </step>
     <step performance="required">
      <para>
       Digite <command>yast</command> para iniciar o programa de instalação. Uma janela é aberta mostrando as telas normais do YaST como descrito no <xref linkend="cha.inst"/>.
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>
 </sect1>
</chapter>
