<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="zseries_prep_i.xml" id="sec.zseries.prep">
 <title>準備安裝</title>

 <para>
  在本節中，您將瞭解如何提供安裝所需資料、如何使用不同方法來安裝 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>、以及如何準備和使用 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝系統的 IPL。本文還提供網路組態與網路安裝的相關內容。
 </para>

 <sect2 id="sec.prep.makeavail">
  <title>提供使用安裝資料</title>
  <para>
   本節介紹如何提供安裝所需之 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> IBM System z 安裝資料的詳細資訊。請依據您的電腦和系統環境，選擇 NFS 或 FTP 安裝。如果您的環境中目前執行的是 Microsoft Windows 工作站，您也可以使用包含 SMB 通訊協定的 Windows 網路將 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝在 IBM System z 系統上。
  </para>
  <tip>
   <title>從 DVD 執行 IPL</title>
   <para>
    自 SUSE Linux Enterprise Server 10 的 Service Pack 1 開始，可以從 DVD 執行 IPL 並將 DVD 用做安裝媒體。若您在設定透過網路提供安裝媒體的安裝伺服器方面有限制，使用此方法將會很方便。先決條件是要有連接 FCP 的 SCSI DVD 光碟機。
   </para>
  </tip>
  <note>
   <title>無法<quote>透過硬體</quote>安裝</title>
   <para>
    無法透過將 DVD 內容放入 DASD 分割區的方式從硬體進行安裝。
   </para>
  </note>
  <sect3 id="sec.prep.makeavail.linuxws">
   <title>使用 Linux 工作站或 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> DVD</title>
   <para>
    如果您的電腦環境中有執行中的 Linux 工作站，請使用該工作站透過 NFS 或 FTP 來為 IBM System z 安裝程序提供安裝資料。如果該 Linux 工作站在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 下執行，您可以使用 YaST 的<guimenu>安裝伺服器</guimenu>模組來設定安裝伺服器 (NFS 或 FTP)，如<xref linkend="sec.deployment.remoteinst.instserver.sles9"/>中所述。
   </para>
   <sect4 id="sec.prep.makeavail.linuxws.nfs">
    <title>透過 NFS</title>
    <para>
     使用 NFS (網路檔案系統) 來啟用安裝媒體。
    </para>
    <important>
     <title>透過 NFS 輸出掛接的裝置</title>
     <para>
      輸出檔案系統根目錄 (<filename>/</filename>) 並不表示輸出掛接的裝置，例如 DVD。在 <filename>/etc/exports</filename> 中明確指名定點：
     </para>
<screen>/media/dvd  *(ro)</screen>
     <para>
      變更此檔案之後，使用指令 <command>sudo systemctl restart nfsserver.service</command> 重新啟動 NFS 伺服器。
     </para>
    </important>
   </sect4>
   <sect4 id="sec.prep.makeavail.linuxws.ftp">
    <title>透過 FTP</title>
    <para>
     在 Linux 系統上設定 FTP 伺服器需要安裝伺服器軟體本身 (例如 wuftpd 或 proftpd)，還需要執行其他可能的組態任務。若使用 YaST，安裝步驟就很簡單：選取要安裝的套件，然後開始安裝。如果安裝不使用匿名 FTP，請跳過 FTP 伺服器的組態設定。否則，請以有效的使用者名稱和密碼來設定 FTP 登入。您可能想要建立這個任務專用的使用者帳戶。FTP 精靈並不需要手動啟動。發生 FTP 連線請求時，inetd 便會啟動此精靈。若要啟用新設定，請輸入 <command>rcxinetd</command> <option>restart</option>。
     
    </para>
   </sect4>
   <sect4 id="sec.prep.makeavail.linuxws.oncd">
    <title>DVD 中的 <phrase role="productname"><phrase os="sles"/>SUSE Linux Enterprise Server</phrase></title>
    <para>
     <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> for IBM System z 的 DVD1 包含用於 Intel 工作站的可開機 Linux 影像，以及 System z 的影像。
    </para>
    <para>
     對於 Intel 式工作站，請從這個 DVD 開機，回答有關語言與鍵盤配置的問題，然後選取<guimenu>啟動救援系統</guimenu>。您至少需要 64 MB RAM 才能執行這個作業。由於整個救援系統都位於工作站的 RAM 中，因此無須提供磁碟空間。這項作業需要一些 Linux 與網路經驗，因為您必須手動設定工作站的網路。
    </para>
    <para>
     對於系統 z，請依據<xref linkend="sec.prep.ipling.lpar.dvd"/> 中的說明從此 DVD 對 LPAR/VM 訪客執行 IPL。輸入網路參數後，安裝系統會將 DVD 視為安裝資料的來源。因為 System z 無法直接連接具有 X11 功能的終端機，所以請選擇 VNC 或 SSH 安裝。SSH 也提供圖形安裝，方法是使用 <command>ssh -X</command> 打開 X 到 SSH 的通道。
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.makeavail.windowsws">
   <title>使用 Microsoft Windows 工作站</title>
   <para>
    如果網路中有 Microsoft Windows 工作站，請使用此電腦來提供安裝媒體。最簡單的方法就是使用 Windows 作業系統已經隨附的 SMB 通訊協定。請務必啟動<guimenu>SMB over TCP/IP</guimenu>，因為這會將 SMB 套件封裝至 TCP/IP 套件。如需詳細資訊，請參閱 Windows 線上說明或其他討論網路的 Windows 相關文件。另一個方法是使用 FTP。這也需要使用 Windows 的特定協力廠商軟體。
   </para>
   <sect4 id="sec.prep.makeavail.windowsws.smb">
    <title>使用 SMB</title>
    <para>
     若要使安裝媒體可用於 SMB，請將 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> DVD 1 插入 Windows 工作站的 DVD 光碟機。然後使用 DVD-ROM 光碟機的字母建立新共享，讓網路中的所有人員都可存取該共享。
    </para>

    <para>
     在 YaST 中，安裝路徑可能為：
    </para>
<screen>smb://<replaceable>DOMAIN</replaceable>;<replaceable>USER</replaceable>:<replaceable>PW</replaceable>@<replaceable>SERVERNAME</replaceable>/<replaceable>SHAREPATH</replaceable></screen>
    <para>
     其中預留位置表示：
    </para>
    <variablelist>
     <varlistentry>
      <term><replaceable>網域</replaceable>
      </term>
      <listitem>
       <para>
        選擇性的工作群組或使用中的目錄網域。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>使用者</replaceable>
      </term>
      <term><replaceable>密碼</replaceable>
      </term>
      <listitem>
       <para>
        可以存取此伺服器及其共享之使用者的選擇性使用者名稱及密碼。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>伺服器名稱</replaceable>
      </term>
      <listitem>
       <para>
        代管共享之伺服器的名稱。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>共享路徑</replaceable>
      </term>
      <listitem>
       <para>
        要共享的路徑。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>


    <para/>

   </sect4>
   <sect4 id="sec.prep.makeavail.windowsws.nfs">
    <title>使用 NFS</title>
    <para>
     請參閱啟用 Windows 工作站的 NFS 伺服器服務之協力廠商產品隨附的文件。插入了 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> DVD 的 DVD-ROM 光碟機必須位於可用的 NFS 路徑中。
    </para>
   </sect4>
   <sect4 id="sec.prep.makeavail.windowsws.ftp">
    <title>使用 FTP</title>
    <para>
     請參閱啟用 Windows 工作站的 FTP 伺服器服務之協力廠商產品隨附的文件。插入了 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> DVD 的 DVD-ROM 光碟機必須位於可用的 FTP 路徑中。
    </para>
    <para>
     某些 Microsoft Windows 版本中綁定的 FTP 伺服器只會執行 FTP 指令集的其中一部分，不適用於提供安裝資料。不過，據報告其他產品 (如 Hummingbird Exceed 或 WAR-FTPD 包含的 FTP 伺服器) 能正常運作。
    </para>
   </sect4>
   <sect4 id="sec.prep.makeavail.windowsws.scsi">
    <title>使用連接 FCP 的 SCSI DVD 光碟機</title>
    <para>
     依據<xref linkend="sec.info.iplopt.dvd"/> 中的說明從 SCSI DVD 執行 IPL 後，安裝系統會將 DVD 用做安裝媒體。在此情況下，就不需要 FTP、NFS 或 SMB 伺服器上的安裝媒體。但需要 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 的網路組態資料，因為在安裝期間必須設定網路以透過 VNC 或 X 執行圖形安裝。
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.makeavail.zpxe_cobbler">
   <title>使用適用於 zPXE 的 Cobbler 伺服器</title>
   <para>
    從網路進行 IPL 需要一個 Cobbler 伺服器，用以提供核心、initrd 與安裝資料。準備 Cobbler 伺服器需要四個步驟：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      輸入安裝資料
     </para>
    </listitem>
    <listitem>
     <para>
      新增套裝作業系統
     </para>
    </listitem>
    <listitem>
     <para>
      新增設定檔
     </para>
    </listitem>
    <listitem>
     <para>
      新增系統
     </para>
    </listitem>
   </itemizedlist>
   <sect4 id="sec.prep.makeavail.zpxe_cobbler.import">
    <title>輸入安裝資料</title>
    <para>
     若要輸入媒體，在 Cobbler 伺服器上必須可以使用安裝來源，不論該來源是 DVD 還是網路來源均如此。執行下列指令輸入資料：
    </para>
<screen>cobbler import --path=<replaceable>PATH</replaceable><co id="cobbler.import.path"/> --name=<replaceable>IDENTIFIER</replaceable><co id="cobbler.import.dirname"/> --arch=s390x</screen>
    <calloutlist>
     <callout arearefs="cobbler.import.path">
      <para>
       安裝資料的掛接點。
      </para>
     </callout>
     <callout arearefs="cobbler.import.dirname">
      <para>
       識別所匯入產品的字串，例如 <quote>sles12_s390x</quote>。此字串用做複製了安裝資料之子目錄的名稱。在執行於 SUSE Linux Enterprise 上的 Cobbler 伺服器中，該目錄為 <filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable></filename>。如果 Cobbler 在其他作業系統上執行，則此路徑可能有所不同。
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 id="sec.prep.makeavail.zpxe_cobbler.add_distro">
    <title>新增套裝作業系統</title>
    <para>
     新增套裝作業系統時，便會讓 Cobbler 提供透過 zPXE 進行 IPL 所需的核心和 initrd。在 Cobbler 伺服器上，執行下面的指令以新增 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> for IBM System z：
    </para>
<screen>cobbler distro add --arch=s390x --breed=suse --name="<replaceable>IDENTIFIER</replaceable>"<co id="cobbler.add.identifier"/> \
  --os-version=sles10<co id="cobbler.add.os"/> \
  --initrd=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/initrd<co id="cobbler.add.initrd"/> \
  --kernel=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/linux<co id="cobbler.add.kernel"/> \
  --kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co id="cobbler.add.server"/>
    </screen>
    <calloutlist>
     <callout arearefs="cobbler.add.identifier">
      <para>
       套裝作業系統的自定識別碼，例如<quote>SLES <phrase role="productname"><phrase os="sles;sled;slerte">12</phrase></phrase> System z</quote>。必須唯一。
      </para>
     </callout>
     <callout arearefs="cobbler.add.os">
      <para>
       作業系統識別碼。請使用 <literal>sles10</literal>。
      </para>
     </callout>
     <callout arearefs="cobbler.add.initrd">
      <para>
       initrd 的路徑。路徑的第一部分 (<filename>/srv/www/cobbler/ks_mirror/<replaceable>識別碼</replaceable>/</filename>) 取決於 Cobbler 輸入資料的位置以及輸入安裝資料時所選的子目錄名稱。
      </para>
     </callout>
     <callout arearefs="cobbler.add.kernel">
      <para>
       核心的路徑。路徑的第一部分 (<filename>/srv/www/cobbler/ks_mirror/<replaceable>識別碼</replaceable>/</filename>) 取決於 Cobbler 輸入資料的位置以及輸入安裝資料時所選的子目錄名稱。
      </para>
     </callout>
     <callout arearefs="cobbler.add.server">
      <para>
       Cobbler 伺服器上安裝目錄的 URL。
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 id="sec.prep.makeavail.zpxe_cobbler.profile">
    <title>新增設定檔</title>
    <para>
     透過設定檔，您可以將其他選項新增到套裝作業系統，例如新增 AutoYaST 檔案以進行自動化安裝。每個套裝作業系統可指定多個設定檔；至少必須建立一個設定檔。
    </para>
<screen>cobbler profile add
   --name=<replaceable>PROFILENAME</replaceable><co id="cobbler.profile.name"/> --distro=<replaceable>DISTRIBUTION</replaceable><co id="cobbler.profile.distro"/> --kickstart=<replaceable>PATH_TO_AUTOYAST_FILE</replaceable><co id="cobbler.profile.kickstart"/></screen>
    <calloutlist>
     <callout arearefs="cobbler.profile.name">
      <para>
       設定檔的唯一名稱。
      </para>
     </callout>
     <callout arearefs="cobbler.profile.distro">
      <para>
       應套用設定檔的套裝作業系統。在此處的輸入步驟中，您必須使用透過 <option>--name=<replaceable>識別碼</replaceable></option>所指定的字串。
      </para>
     </callout>
     <callout arearefs="cobbler.profile.kickstart">
      <para>
       在此處指定用於自動化安裝之 AutoYaST 檔案的路徑。此參數為依選項而定的功能。
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 id="sec.prep.makeavail.zpxe_cobbler.system">
    <title>新增系統</title>
    <para>
     必須執行的最後一步是將系統新增到 Cobbler 伺服器。需要針對應透過 zPXE 開機的每個 System z 客體作業系統執行系統新增。客體作業系統透過其 z/VM 使用者 ID 來識別 (在下面的範例中，假設 ID 為 <quote>LINUX01</quote>)。若要新增系統，請執行下列指令：
    </para>
<screen>cobbler system add --name=LINUX01 --hostname=linux01.example.com \
--ip=192.168.2.103 --subnet=192.168.2.255 --netmask=255.255.255.0 \
--name-servers=192.168.1.116 --name-servers-search=example.com \
--gateway=192.168.2.1 --kopts="<replaceable>KERNEL_OPTIONS</replaceable>"</screen>
    <para>
     透過 <option>--kopts</option> 選項，您可以指定通常會在 parmfile 中指定的核心和安裝參數。這些參數會輸入到以空格分隔的清單，格式為<replaceable>參數1=值1 參數2=值2</replaceable>。安裝程式將會提示您輸入缺少的參數。若要進行完全自動化的安裝，您需要指定網路連線與 DASD 的所有參數，並提供 AutoYaST 檔案。下面展示了配有 OSA 介面且使用上述相同之網路參數的客體作業系統範例。
    </para>
<screen>--kopts=" \
AutoYaST=http://192.168.0.5/autoinst.xml \
Hostname=linux01.example.com \
Domain=example.com \
HostIP=192.168.2.103 \
Gateway=192.168.2.1 \
Nameserver=192.168.1.116 \
Searchdns=example.com \
InstNetDev=osa; \
Netmask=255.255.255.0 \
Broadcast=192.168.2.255 \
OsaInterface=qdio \
Layer2=0 \
PortNo=0 \
ReadChannel=0.0.0700 \
WriteChannel=0.0701 \
DataChannel=0.0.0702 \
Portname=DT70 \
DASD=600"</screen>
   </sect4>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.inst_types">
  <title>安裝類型</title>
  <para>
   本節介紹採用各種安裝模式安裝 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 時所需執行的步驟，以及在何處可找到相應的資訊。完成前面的章節所述的準備工作之後，請遵循所需安裝模式的安裝綜覽，在您的系統上安裝 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。
  </para>
  <para>
   如<xref linkend="sec.prep.makeavail"/>所述，IBM System z 上的 Linux 有兩種不同的安裝模式：
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     LPAR 安裝
    </para>
   </listitem>
   <listitem>
    <para>
     z/VM 安裝
    </para>
   </listitem>
  </itemizedlist>
  <procedure id="pro.prep.inst_types.lpar">
   <title>LPAR 安裝的綜覽</title>
   <step performance="required">
    <para>
     準備安裝所需的裝置。請參閱<xref linkend="sec.prep.prep_ipl.natlpar"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     對安裝系統執行 IPL。請參閱<xref linkend="sec.prep.ipling.lpar"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     設定網路。請參閱<xref linkend="sec.prep.netcfg"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     連接到 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝系統。請參閱<xref linkend="sec.prep.connect"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     使用 YaST 啟動安裝，並對安裝好的系統執行 IPL。請參閱<xref linkend="cha.inst"/>。
    </para>
   </step>
  </procedure>
  <procedure id="pro.prep.inst_types.vm">
   <title>z/VM 安裝的安裝概觀</title>
   <step performance="required">
    <para>
     準備安裝所需的裝置。請參閱<xref linkend="sec.prep.prep_ipl.vm"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     對安裝系統執行 IPL。請參閱<xref linkend="sec.prep.ipling.vm"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     設定網路。請參閱<xref linkend="sec.prep.netcfg"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     連接到 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝系統。請參閱<xref linkend="sec.prep.connect"/>。
    </para>
   </step>
   <step performance="required">
    <para>
     使用 YaST 啟動安裝，並對安裝好的系統執行 IPL。請參閱<xref linkend="cha.inst"/>。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 id="sec.prep.prep_ipl">
  <title>準備對 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝系統執行 IPL</title>
  <para/>
  <sect3 id="sec.prep.prep_ipl.natlpar">
   <title>LPAR 安裝</title>
   <para>
    透過相應的啟用設定檔和 IOCDS，將 IBM System z 系統設定為以 ESA/S390 模式啟動或僅以 Linux 模式啟動。如需有關如何實現此目的的詳細資訊，請參閱 IBM 文件。繼續執行<xref linkend="sec.prep.ipling.lpar"/>。
   </para>
  </sect3>
  <sect3 id="sec.prep.prep_ipl.vm">
   <title>z/VM 安裝</title>
   <para/>
   <sect4 id="sec.prep.prep_ipl.vm.linux_guest">
    <title>新增 Linux 客體</title>
    <para>
     第一步是連接及格式化系統中的一或多個 DASD，以便用於 z/VM 中的 Linux 訪客。接著，在 z/VM 中建立新使用者。範例顯示使用者 <literal>LINUX1</literal> 的目錄，此使用者具有密碼 <literal>LINPWD</literal>、1 MB 的記憶體 (可擴充至 2 MB)、32 MB 的擴充 RAM (XSTORE)、一些迷你磁碟 (MDISK)、兩個 CPU 以及一個 OSA QDIO 裝置。
    </para>
    <tip>
     <title>指派記憶體給 z/VM 客體</title>
     <para>
      指派記憶體給 z/VM 訪客時，請確認記憶體大小符合所需安裝類型的要求。請參閱<xref linkend="sec.info_sysreq.sysreq.hw.mem"/>。 若要將記憶體大小設定為 1 GB，請使用指令 <command>CP DEFINE STORAGE 1G</command>。完成安裝後，請將記憶體大小重設為所需值。
     </para>
    </tip>
    <example id="ex.prep.prep_ipl.vm.linux_guest.config">
     <title>z/VM 目錄的組態</title>
<screen>USER LINUX1 LINPWD 1024M 2048M G 
*____________________________________________
* LINUX1 
*____________________________________________
* This VM Linux guest has two CPUs defined.

CPU 01 CPUID 111111 
CPU 02 CPUID 111222 
IPL CMS PARM AUTOCR 
IUCV ANY 
IUCV ALLOW 
MACH ESA 10 
OPTION MAINTCCW RMCHINFO 
SHARE RELATIVE 2000 
XSTORE 32M 
CONSOLE 01C0 3270 A 
SPOOL 000C 2540 READER * 
SPOOL 000D 2540 PUNCH A 
SPOOL 000E 3203 A 
* OSA QDIO DEVICE DEFINITIONS 
DEDICATE 9A0 9A0 
DEDICATE 9A1 9A1 
DEDICATE 9A2 9A2 
* 
LINK MAINT 0190 0190 RR 
LINK MAINT 019E 019E RR 
LINK MAINT 019D 019D RR 
* MINIDISK DEFINITIONS 
MDISK 201 3390 0001 0050 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 150 3390 0052 0200 DASD40 MR ONE4ME TWO4ME THR4ME 
MDISK 151 3390 0253 2800 DASD40 MR ONE4ME TWO4ME THR4ME</screen>
    </example>
    <para>
     本範例使用迷你磁碟 201 做為訪客的主要磁碟。包含 200 個磁柱的迷你磁碟 150 是 Linux 交換裝置。Linux 安裝位於包含 2800 個磁柱的磁碟 151 中。
    </para>
    <para>
     現在使用 <command>DIRM FOR LINUX1 ADD</command> 將訪客新增至使用者目錄 (以使用者 <systemitem class="username">MAINT</systemitem> 的身分)。輸入訪客名稱 (<literal>LINUX1</literal>) 並按 <keycap>F5</keycap>。設定使用者環境如下：
    </para>
<screen>DIRM DIRECT 
DIRM USER WITHPASS</screen>
    <para>
     最後一個指令會傳回讀取器檔案號碼。下一個指令需要使用此號碼：
    </para>
<screen>RECEIVE &lt;number&gt; USER DIRECT A (REPL)</screen>
    <para>
     您現在可以使用者 <systemitem class="username">LINUX1</systemitem> 的訪客身分登入。
    </para>
    <para>
     如果沒有可用的 <literal>dirmaint</literal> 選項，請參閱 IBM 文件以設定此使用者。
    </para>
    <para>
     繼續執行<xref linkend="sec.prep.ipling.vm"/>。
    </para>
   </sect4>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.ipling">
  <title>對 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝系統執行 IPL</title>
  <para/>
  <sect3 id="sec.prep.ipling.lpar">
   <title>LPAR 安裝</title>
   <para>
    執行 IPL 將 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 載入至 LPAR 的方法有很多。優先選擇是使用 SE 或 HMC 的<guimenu>從 CD-ROM 或伺服器載入</guimenu>功能。
   </para>
   <sect4 id="sec.prep.ipling.lpar.cdrom">
    <title>從 DVD-ROM 執行 IPL</title>
    <para>
     標示要安裝的 LPAR，並選取<guimenu>從 CD-ROM 或伺服器載入</guimenu>。將檔案位置欄位留為空白，或輸入第一張 DVD-ROM 的根目錄路徑，然後繼續。在顯示的選項清單中，選取預設選擇。<guimenu>作業系統訊息</guimenu>現在應該會顯示核心開機訊息。
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.lpar.dvd">
    <title>從連接 FCP 的 SCSI DVD 執行 IPL</title>
    <para>
     您可以透過選取<guimenu>SCSI</guimenu>做為<guimenu>載入類型</guimenu>以從 SCSI 執行 IPL 來使用<guimenu>載入</guimenu>程序。輸入 SCSI 橋接或儲存區 (16 位 — 不得省略尾數零) 所提供的 WWPN (全球連接埠名稱) 與 LUN (邏輯單位編號)。開機程式選擇器必須是 2。使用 FCP 介面卡做為<guimenu>載入位址</guimenu>並執行 IPL。
    </para>
   </sect4>
  </sect3>
  <sect3 id="sec.prep.ipling.vm">
   <title>z/VM 安裝</title>
   <para>
    本節介紹對安裝系統執行 IPL，以便在 z/VM 上安裝 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> for IBM System z。
   </para>
   <sect4 id="sec.prep.ipling.vm.reader">
    <title>從 z/VM 讀取器執行 IPL</title>
    <para>
     在新定義的 z/VM 客體中，需要有作用中的 TCP/IP 連線和 FTP 用戶端程式，以透過 FTP 傳輸安裝系統。為 z/VM 設定 TCP/IP 不在本手冊討論的範圍內。請參閱適當的 IBM 文件。
    </para>
    <para>
     以 z/VM Linux 訪客的身分登入以執行 IPL。使 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> for IBM System z 的 DVD 1 中 <filename>/boot/s390x</filename> 目錄的內容可在網路中透過 FTP 存取。從這個目錄取得檔案 <filename>linux</filename>、<filename>initrd</filename>、<filename>parmfile</filename> 以及 <filename>sles12.exec</filename>。以 80 字元的固定區塊大小傳輸檔案。使用 FTP 指令 <command>locsite fix 80</command> 加以指定。<filename>linux</filename> (Linux 核心) 和 <filename>initrd</filename> (安裝影像) 必須以二進位檔格式複製，因此請使用 <literal>binary</literal> 傳輸模式。<filename>parmfile</filename> 與 <filename>sles12.exec</filename> 需要使用 ASCII 模式進行傳輸。
    </para>
    <para>
     範例會顯示必要的步驟。在本範例中，可從 IP 位址為 <literal>192.168.0.3</literal> 的 FTP 伺服器存取所需檔案，且登入為 <systemitem class="username">lininst</systemitem>。您的網路狀況可能不盡相同。
    </para>
    <example id="ex.prep.ipling.vm.reader.ftp.ftptrans">
     <title>透過 FTP 傳輸二進位檔</title>
<screen>FTP 192.168.0.3
VM TCP/IP FTP Level 530
Connecting to 192.168.0.3, port 21
220 ftpserver FTP server (Version wu-2.4.2-academ[BETA-18](1)
Thu Feb 11 16:09:02 GMT 2010) ready.
USER
lininst
331 Password required for lininst
PASS
******
230 User lininst logged in.
Command:
binary
200 Type set to I
Command:
locsite fix 80
Command:
get /media/dvd1/boot/s390x/linux sles12.linux
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/linux
(10664192 bytes)
226 Transfer complete.
10664192 bytes transferred in 13.91 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/initrd sles12.initrd
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/initrd
(21403276 bytes)
226 Transfer complete.
21403276 bytes transferred in 27.916 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
ascii
200 Type set to A
Command:
get /media/dvd1/boot/s390x/parmfile sles12.parmfile
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/parmfile
(5 bytes)
226 Transfer complete.
5 bytes transferred in 0.092 seconds.
Transfer rate 0.05 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/sles12.exec sles12.exec
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/sles12.exec
(891 bytes)
226 Transfer complete.
891 bytes transferred in 0.097 seconds.
Transfer rate 0.89 Kbytes/sec.
Command:
quit</screen>
    </example>
    <para>
     使用您下載的 REXX 程序檔 sles12.exec 對 Linux 安裝系統執行 IPL。此程序檔會將核心、parmfile 和啟始 RAM 磁碟載入至讀取器以便執行 IPL。
    </para>
    <example id="sex.prep.ipling.vm.reader.startscript.slesexec">
     <title>SLES12 EXEC</title>
<screen>/* REXX LOAD EXEC FOR SUSE LINUX S/390 VM GUESTS       */
/* LOADS SUSE LINUX S/390 FILES INTO READER            */                       
SAY ''                                                                          
SAY 'LOADING SLES12 FILES INTO READER...'                                       
'CP CLOSE RDR'                                                                  
'PURGE RDR ALL'                                                                 
'SPOOL PUNCH * RDR'                                                             
'PUNCH SLES12 LINUX A (NOH'                                                     
'PUNCH SLES12 PARMFILE A (NOH'                                                  
'PUNCH SLES12 INITRD A (NOH'                                                    
'IPL 00C'</screen>
    </example>
    <para>
     使用此程序檔，您可以透過 <command>sles12</command> 指令對 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝系統執行 IPL。Linux 核心接著會啟動並列印其開機訊息。
    </para>
    <para>
     若要繼續安裝，請繼續<xref linkend="sec.prep.netcfg"/>。
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.vm.dvd">
    <title>從連接 FCP 的 SCSI DVD 執行 IPL</title>
    <para>
     若要在 z/VM 中執行 IPL，請使用 SET LOADDEV 參數準備 SCSI IPL 進程：
    </para>
<screen>SET LOADDEV PORTNAME 200400E8 00D74E00 LUN 00020000 00000000 BOOT 2</screen>
    <para>
     將 LOADDEV 參數設定為適當值之後，對 FCP 介面卡執行 IPL，例如：
    </para>
<screen>IPL FC00</screen>
    <para>
     若要繼續安裝，請繼續<xref linkend="sec.prep.netcfg"/>。
    </para>
   </sect4>
   <sect4 id="sec.prep.ipling.vm.zpxe">
    <title>使用 zPXE 從 Cobbler 伺服器進行 IPL</title>
    <para>
     若要使用 zPXE 從 Cobbler 伺服器進行 IPL，您需要透過 FTP 將 <filename>zpxe.exec</filename> 程序檔從 Cobbler 伺服器傳輸到 z/VM 客體作業系統。z/VM 客體作業系統需要有效的 TCP/IP 連線和 FTP 用戶端程式。
    </para>
    <para>
     以 z/VM Linux 訪客身分登入進行 IPL，然後在 ASCII 模式下傳輸固定大小為 80 個字元的程序檔 (如需範例，請參閱<xref linkend="ex.prep.ipling.vm.reader.ftp.ftptrans"/>)。<filename>zpxe.exec</filename> 程序檔可在 Cobbler 伺服器上使用，該伺服器位於 ftp://<replaceable>COBBLER 伺服器的 IP</replaceable>/<replaceable>zSERIES 安裝目錄</replaceable>/boot s390x/zpxe.exec 上。<replaceable>zSERIES 安裝目錄</replaceable>的確切位置取決於 Cobbler 伺服器上輸入安裝資料的位置 (如需詳細資料，請參閱<xref linkend="sec.prep.makeavail.zpxe_cobbler.import"/>)。
    </para>
    <para>
     <filename>zpxe.exec</filename> 預設會取代您客體作業系統的 <filename>PROFILE EXEC</filename>。請備份現有的 <filename>PROFILE EXEC</filename> 並將 <filename>ZPXE EXEC</filename> 重新命名為 <filename>PROFILE EXEC</filename>。或者使用含有內容 <literal>'ZPXE EXEC'</literal> 的新行從現有的 <filename>PROFILE EXEC</filename> 呼叫 <filename>ZPXE EXEC</filename>。
    </para>
    <para>
     最後一步是建立組態檔案 <filename>ZPXE CONF</filename>，告知 <filename>ZPXE EXEC</filename> 連接哪個 Cobbler 伺服器以及對哪個磁碟執行 IPL。執行 <command>xedit zpxe conf a</command> 並建立具有下列內容的 <filename>ZPXE CONF</filename> (相應地取代範例資料)：
    </para>
<screen>HOST cobbler.example.com
IPLDISK 600</screen>
    <para>
     下一次登入 z/VM 客體作業系統時，將會連線該 Cobbler 伺服器。如果排程在 Cobbler 伺服器上執行安裝，將會執行安裝。若要排程安裝，請在 Cobbler 伺服器上執行下列指令：
    </para>
<screen>cobbler system edit --name <replaceable>ID</replaceable><co id="cobbler.sysedit.id"/> --netboot-enabled 1<co id="cobbler.sysedit.netboot"/> --profile <replaceable>PROFILENAME</replaceable><co id="cobbler.sysedit.profile"/></screen>
    <calloutlist>
     <callout arearefs="cobbler.sysedit.id">
      <para>
       z/VM 使用者 ID。
      </para>
     </callout>
     <callout arearefs="cobbler.sysedit.netboot">
      <para>
       啟用從網路進行 IPL。
      </para>
     </callout>
     <callout arearefs="cobbler.sysedit.profile">
      <para>
       現有設定檔的名稱，請參閱<xref linkend="sec.prep.makeavail.zpxe_cobbler.profile"/>。
      </para>
     </callout>
    </calloutlist>
   </sect4>
  </sect3>
 </sect2>

 <sect2 id="sec.prep.netcfg">
  <title>網路組態</title>
  <para>
   等候核心完成啟動常式。若您是在基本模式或 LPAR 中安裝，請開啟 HMC 或 SE上的<guimenu>作業系統訊息</guimenu>。
  </para>
  <para>
   首先，在 linuxrc 主功能表中選擇<guimenu>開始安裝</guimenu>，然後選擇<guimenu>啟動安裝或更新</guimenu>來啟動安裝程序。選取<guimenu>網路</guimenu>做為安裝媒體，然後選取安裝程序將使用的網路通訊協定類型。<xref linkend="sec.prep.makeavail"/> 將描述如何為各種類型的網路連線提供安裝資料。目前支援<guimenu>FTP</guimenu>、<guimenu>HTTP</guimenu>、<guimenu>NFS</guimenu>和<guimenu>SMB/CIFS</guimenu>(Windows 檔案共享)。
  </para>
  <para>
   現在，從可用裝置清單中選擇用於接收安裝資料的 OSA 或 HiperSockets 網路裝置。該清單可能還包含 CTC、ESCON 或 IUCV 裝置，但 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 不再支援這些裝置。
  </para>
  <variablelist>
   <varlistentry id="sec.appdendix.inst_netcontypes.ethernet_tokenring">
    <term>HiperSockets</term>
    <listitem>
     <para>
      從網路裝置清單中選取一個 Hipersocket 裝置。然後，輸入讀取、寫入和資料通道的編號：
     </para>
     <example id="ex.appdendix.inst_netcontypes.types">
      <title>支援的網路連線類型與驅動程式參數</title>
<screen>Choose the network device.

 1) IBM parallel CTC Adapter (0.0.0600)
 2) IBM parallel CTC Adapter (0.0.0601)
 3) IBM parallel CTC Adapter (0.0.0602)
 4) IBM Hipersocket (0.0.0800)
 5) IBM Hipersocket (0.0.0801)
 6) IBM Hipersocket (0.0.0802)
 7) IBM OSA Express Network card (0.0.0700)
 8) IBM OSA Express Network card (0.0.0701)
 9) IBM OSA Express Network card (0.0.0702)
10) IBM OSA Express Network card (0.0.f400)
11) IBM OSA Express Network card (0.0.f401)
12) IBM OSA Express Network card (0.0.f402)
13) IBM IUCV

&gt; 4

Device address for read channel. (Enter '+++' to abort). 
[0.0.800]&gt; 0.0.800

Device address for write channel. (Enter '+++' to abort). 
[0.0.801]&gt; 0.0.801

Device address for data channel. (Enter '+++' to abort). 
[0.0.802]&gt; 0.0.802</screen>
     </example>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>OSA Express</term>
    <listitem>
     <para>
      從網路裝置清單中選取一個 OSA Express 裝置，並提供連接埠號。然後，輸入讀取、寫入和資料通道的編號及連接埠號 (如果適用)。選擇是否啟用 OSI 第二層支援。
     </para>
     <para>
      新增該埠號是為了支援新的具有 2 個連接埠的 OSA Express 3 網路裝置。如果您使用的不是 OSA Express 3 裝置，請輸入 <literal>0</literal>。您還可以為 OSA Express 卡選擇以「OSI 第二層支援」模式或使用較舊但更通用的「第三層」模式執行。卡模式會影響所有共享裝置的系統，包括其他 LPAR 上的系統。如果不清楚，請指定 <literal>2</literal> 以便與其他作業系統 (如 z/VM 和 z/OS) 使用的預設模式相容。有關這些選項的進一步資訊，請向硬體管理員資詢。
     </para>
     <example id="ex.appdendix.inst_netcontypes.gigabit.param">
      <title>網路裝置驅動程式參數</title>
<screen>Choose the network device.

 1) IBM parallel CTC Adapter (0.0.0600)
 2) IBM parallel CTC Adapter (0.0.0601)
 3) IBM parallel CTC Adapter (0.0.0602)
 4) IBM Hipersocket (0.0.0800)
 5) IBM Hipersocket (0.0.0801)
 6) IBM Hipersocket (0.0.0802)
 7) IBM OSA Express Network card (0.0.0700)
 8) IBM OSA Express Network card (0.0.0701)
 9) IBM OSA Express Network card (0.0.0702)
10) IBM OSA Express Network card (0.0.f400)
11) IBM OSA Express Network card (0.0.f401)
12) IBM OSA Express Network card (0.0.f402)
13) IBM IUCV

&gt; 7
 
Enter the relative port number. (Enter '+++' to abort).
&gt; 0
 
Device address for read channel. (Enter '+++' to abort). 
[0.0.0700]&gt; 0.0.0700

Device address for write channel. (Enter '+++' to abort).
[0.0.0701]&gt; 0.0.0701

Device address for data channel. (Enter '+++' to abort).
[0.0.0702]&gt; 0.0.0702
 
Enable OSI Layer 2 support? 
 
0) &lt;-- Back &lt;-- 
1) Yes 
2) No 

&gt; 1

MAC address. (Enter '+++' to abort). 
&gt; +++</screen>
     </example>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   輸入所有網路裝置參數後，相關的驅動程式即會安裝到系統中，而您將看到相應的核心訊息。
  </para>
  <para>
   接下來，決定是否要使用 DHCP 自動組態來設定網路介面參數。由於 DHCP 僅適用於幾個裝置，而且需要特殊硬體組態設定，因此這裡您可能會選擇<guimenu>否</guimenu>。如果執行此操作，系統會提示您輸入以下網路參數：
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     要安裝的系統的 IP 位址
    </para>
   </listitem>
   <listitem>
    <para>
     相對應的網路遮罩(如果未隨 IP 位址指定)
    </para>
   </listitem>
   <listitem>
    <para>
     進入伺服器的閘道 IP 位址
    </para>
   </listitem>
   <listitem>
    <para>
     網域名稱伺服器 (DNS) 涵蓋的搜尋網域清單
    </para>
   </listitem>
   <listitem>
    <para>
     網域名稱伺服器的 IP 位址
    </para>
   </listitem>
  </itemizedlist>
  <example id="ex.prep.netcfg.vm.network_setup">
   <title>網路參數</title>
<screen>Automatic configuration via DHCP? 
 
0) &lt;-- Back &lt;-- 
1) Yes 
2) No 
 
&gt; 2
 
Enter your IPv4 address. 
 Example: 192.168.5.77/24. (Enter '+++' to abort). 
&gt; 192.168.0.20/24
 
Enter the IP address of the gateway. Leave empty if you don't need one. (Enter '
+++' to abort). 
&gt; 192.168.0.1
 
Enter your search domains, separated by a space:. (Enter '+++' to abort). 
&gt; example.com
 
Enter the IP address of your name server. Leave empty if you don't need one. (En
ter '+++' to abort). 
&gt; 192.168.0.1</screen>
  </example>
  <para>
   最後，系統會提示您輸入關於安裝伺服器的詳細資料，例如 IP 位址、包含安裝資料的目錄，以及登入身分證明。輸入所有需要的資料後，安裝系統即會載入。
  </para>
 </sect2>

 <sect2 id="sec.prep.connect">
  <title>連接到 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝系統</title>
  <para>
   載入安裝系統後，Linuxrc 需要知道您要用來控制安裝程序的顯示類型。可用的選項包括 <literal>X11</literal> (X Window System)、<literal>VNC</literal> (虛擬網路計算通訊協定) 及 <literal>SSH</literal> (文字模式或透過安全性外圍程序的 X11 安裝) 或 <literal>ASCII 主控台</literal>。建議選取 <literal>VNC</literal> 或 <literal>SSH</literal>。
  </para>
  <para>
   如果選擇最後一個選項 (<literal>ASCII 主控台</literal>)，YaST 將以文字模式啟動，並且您可以直接在終端機內執行安裝。如需關於如何在文字模式下使用 YaST 的指示，請參閱<xref linkend="cha.yast.text"/>。僅當在 LPAR 中安裝時，<literal>ASCII 主控台</literal>才有用。
  </para>
  <note>
   <title>ASCII 主控台的終端機模擬</title>
   <para>
    若希望能夠在文字模式下使用 YaST，則需要在具有 VT220/Linux 模擬功能 (也稱為 <literal>ASCII 主控台</literal>) 的終端機中執行該程式。例如，您無法在 3270 終端機中使用 YaST。
   </para>
  </note>
  <sect3 id="sec.inst.connect.vnc_inst">
   <title>啟始 VNC 的安裝</title>
   <procedure>
    <step performance="required">
     <para>
      選擇安裝選項 <literal>VNC</literal> 之後，便會啟動 VNC 伺服器。主控台中顯示的簡短註記可提供有關 IP 位址的資訊，以及連接 vncviewer 所需的顯示號碼。或者，此處會提供 URL 以便輸入啟用 Java 的瀏覽器中，藉此連線到安裝系統。
     </para>
    </step>
    <step performance="required">
     <para>
      在用戶端系統上啟動 VNC 用戶端應用程式。可選擇使用 vncviewer 或 VNC Java 用戶端和啟用 Java 的網頁瀏覽器。
     </para>
    </step>
    <step performance="required">
     <para>
      出現提示時，輸入 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 安裝系統的 IP 位址和顯示編號。
     </para>
     <para>
      若您透過啟用 Java 的瀏覽器來連線，請根據下列格式來輸入 URL，此 URL 需包含安裝系統的 IP 位址和適當的連接埠號碼：
     </para>
<screen>http://&lt;IP address of installation system&gt;:5801/</screen>
    </step>
    <step performance="required">
     <para>
      建立連線之後，使用 YaST 來啟動 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 的安裝。
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 id="sec.inst.connect.x">
   <title>啟始 X Window System 的安裝</title>
   <important>
    <title>X 驗證機制</title>
    <para>
     X Window System 的直接安裝需仰賴以主機名稱為基礎的原始驗證機制。此機制在目前的 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 版本上已停用。使用 SSH 或 VNC 安裝是優先選擇。
    </para>
   </important>
   <procedure>
    <step performance="required">
     <para>
      請確定 X 伺服器允許用戶端 (安裝的系統) 進行連線。設定檔案 <filename>/etc/sysconfig/displaymanager</filename> 中的變數 <command>DISPLAYMANAGER_XSERVER_TCP_PORT_6000_OPEN="yes"</command>。然後重新啟動 X 伺服器，並使用指令 <command>xhost &lt;用戶端 IP 位址&gt;</command> 來允許用戶端繫結伺服器。
     </para>
    </step>
    <step performance="required">
     <para>
      在安裝系統出現提示時，請輸入執行 X 伺服器之機器的 IP 位址。
     </para>
    </step>
    <step performance="required">
     <para>
      等候 YaST 開啟，然後開始安裝。
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 id="sec.inst.connect.ssh">
   <title>啟始 SSH 的安裝</title>
   <para>
    若要使用 SSH 連接到名為 <literal>earth</literal> 的安裝系統，請執行 <command>ssh -X earth</command>。若您的工作站是在 Microsoft Windows 上執行，請使用 SSH 和 telnet 用戶端及終端機模擬器 Putty (<ulink url="http://www.chiark.greenend.org.uk/~sgtatham/putty/"/> 上會提供)。在<menuchoice><guimenu>連線</guimenu> <guimenu>SSH</guimenu> <guimenu>X11</guimenu></menuchoice>下的 Putty 中設定<guimenu>啟用 X11 轉遞</guimenu>。
   </para>
   <para>
    將會出現登入提示。輸入 <literal>root</literal> 並以您的密碼登入。輸入 <command>yast2.ssh</command> 啟動 YaST。
   </para>
   <para>
    請繼續參閱<xref linkend="cha.inst"/> 中的安裝程序的詳細說明。
   </para>
  </sect3>
 </sect2>
</sect1>
