<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="sle_update_finish.xml" version="5.0" xml:id="cha-upgrade-finish">
 <title>Fin de la mise à niveau</title>
 <info>
  <abstract>
   <para>
    Après la mise à niveau, vous devez effectuer des tâches supplémentaires. Le chapitre suivant vous guide tout au long de ces étapes.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 
 <sect1 xml:id="sec-upgrade-postupgrade-checks">
  <title>Vérifications postérieures à la mise à niveau</title>
  <itemizedlist>
   <listitem>
    <para>
     Recherchez les éventuels <quote>paquetages orphelins</quote>. Au cours d&apos;une procédure de mise à niveau, les paquetages peuvent être renommés, supprimés, fusionnés ou divisés. Par conséquent, certains paquetages peuvent devenir orphelins et ne plus être pris en charge. Les paquetages orphelins ne sont pas supprimés automatiquement. La commande suivante vous permet d&apos;obtenir une liste de ces paquetages :
    </para>
<screen><prompt>&gt; </prompt><command>zypper packages --orphaned --unneeded</command></screen>
    <para>
     Utilisez la liste pour déterminer quels paquetages sont encore nécessaires et quels paquetages peuvent être supprimés en toute sécurité.
    </para>
   </listitem>
   <listitem>
    <para>
     Recherchez les éventuels fichiers <filename>*.rpmnew</filename> et <filename>*.rpmsave</filename>, examinez leur contenu et fusionnez les modifications souhaitées le cas échéant. Si une mise à niveau inclut des modifications concernant un fichier de configuration par défaut, au lieu d&apos;écraser ce dernier, le paquetage crée l&apos;un de ces types de fichier. Un fichier <filename>*.rpmnew</filename> contient la nouvelle configuration par défaut et laisse votre fichier d&apos;origine intact ; un fichier <filename>*.rpmsave</filename> est une copie de votre fichier de configuration d&apos;origine qui a été remplacé par le nouveau fichier par défaut.
    </para>
    <para>
     Il n&apos;est pas nécessaire d&apos;effectuer une recherche des fichiers <filename>*.rpmnew</filename> et <filename>*.rpmsave</filename> sur l&apos;ensemble du système ; les plus importants sont stockés dans le répertoire <filename>/etc</filename>. Utilisez la commande suivante pour les répertorier :
    </para>
<screen><prompt>&gt; </prompt><command>find /etc/ -name "*.rpmnew" -o -name "*.rpmsave"</command></screen>
   </listitem>
  </itemizedlist>
 </sect1>

 
 <sect1 xml:id="sec-upgrade-finish-python3">
  <title>Activation du module <literal>Python 3</literal></title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 15 utilise Python 3.6 par défaut. Python 3.9 a été ajouté à <phrase role="productname"><phrase os="sles">SLES</phrase></phrase> 15 SP3 en tant qu&apos;alternative plus récente. Cette version n&apos;est plus prise en charge à partir de <phrase role="productname"><phrase os="sles">SLES</phrase></phrase> 15 SP4. À la place, des versions récentes de Python contenant des mises à jour et des correctifs de sécurité importants sont disponibles via le module <literal>Python 3</literal>.
  </para>
  <para>
   Si vous avez installé Python 3.9 sous <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 15 SP3, activez le module <literal>Python 3</literal> avec :
  </para>
<screen><prompt>&gt; </prompt><command>sudo</command> <command>SUSEConnect -p sle-module-python3/15.4/<replaceable>x86_64</replaceable></command>&#x002E;</screen>
  <para>
   Vous pouvez également revenir à la version par défaut de Python en supprimant la version 3.9 avec <command>zypper remove -u python39</command>.
  </para>
 </sect1>

 <sect1 xml:id="sec-upgrade-finish-xfs4">
  <title>Reformatage des périphériques XFS v4</title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> prend en charge le <quote>format sur disque</quote> (v5) du système de fichiers XFS. Les principaux avantages de ce format sont les sommes de contrôle automatiques de toutes les métadonnées XFS, ainsi que la prise en charge du type de fichier et d&apos;un plus grand nombre de listes de contrôle d&apos;accès pour un fichier.
  </para>
  <para>
   Notez que ce format n&apos;est pas pris en charge par les kernels SUSE Linux Enterprise antérieurs à la version 3.12, par les versions <literal>xfsprogs</literal> antérieures à la version 3.2.0 et les versions GRUB 2 antérieures à SUSE Linux Enterprise 12.
  </para>
  <important>
   <title>le format V4 est obsolète.</title>
   <para>
    XFS abandonne les systèmes de fichiers au format V4. Ce dernier a été créé par la commande suivante :
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkfs.xfs -m crc=0 <replaceable>DEVICE</replaceable></screen>
   <para>
    Ce format était utilisé dans SLE 11 et les versions antérieures. Il génère actuellement un message d&apos;avertissement émis par <command>dmesg</command> :
   </para>
<screen>Deprecated V4 format (crc=0) will not be supported after September 2030</screen>
   <para>
    Si le message ci-dessus apparaît dans la sortie de la commande <command>dmesg</command>, il est recommandé de mettre à jour votre système de fichiers vers le format V5 :
   </para>
   <procedure>
    <step>
     <para>
      Sauvegardez vos données sur un autre périphérique.
     </para>
    </step>
    <step>
     <para>
      Créez le système de fichiers sur le périphérique.
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> mkfs.xfs -m crc=1 <replaceable>DEVICE</replaceable></screen>
    </step>
    <step>
     <para>
      Restaurez les données à partir de la sauvegarde sur le périphérique mis à jour.
     </para>
    </step>
   </procedure>
  </important>
 </sect1>
</chapter>
