<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="64bit_issues.xml" version="5.0" xml:id="cha-64bit">
 <title>64 位系统环境中的 32 位和 64 位应用程序</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase> 可用于<phrase os="sles">多种</phrase> 64 位平台。但是这并不表示内含的所有应用程序都已移植到 64 位平台上。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 支持在 64 位系统环境中使用 32 位应用程序。本章简单介绍了如何在 64 位<phrase role="productname"><phrase os="sles"> SUSE Linux Enterprise Server</phrase></phrase> 平台上实现这种支持。
 </para>
 <para>
  用于 64 位平台 POWER、z Systems 和 AMD64/Intel 64 的 <phrase os="sles"><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></phrase> 可让现有的 32 位应用程序<quote>无需额外配置</quote> <phrase os="sles">即可在 64 位环境中运行。相应的 32 位平台为：用于 POWER 的 ppc 和用于 AMD64/Intel 64 的 x86。</phrase>。这种支持意味着您可以继续使用所需的 32 位应用程序，而无需等待对应的 64 位端口可用。<phrase os="sles">当前的 POWER 系统以 32 位模式运行大多数应用程序，但您可以运行 64 位应用程序。</phrase>
 </para>


 <note>
  <title>不支持构建 32 位应用程序</title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 不支持编译 32 位应用程序，只提供 32 位二进制文件的运行时支持。
  </para>
 </note>


 <sect1 xml:id="sec-64bit-runt">
  <title>运行时支持</title>

  <important>
   <title>应用程序版本之间的冲突</title>
   <para>
    如果某个应用程序在 32 位和 64 位环境中都可用，则两个版本的并行安装必定会导致出现问题。在这种情况下，在两个版本中选一个，然后安装并使用这一版本。
   </para>
   <para>
    此规则的一个例外是 PAM（可插入身份验证模块）。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 在身份验证过程中使用 PAM 作为在用户和应用程序之间充当媒介的层。在另外还运行 32 位应用程序的 64 位操作系统上，始终需要安装两个版本的 PAM 模块。
   </para>
  </important>

  <para>
   若要正确执行，每个应用程序都需要一系列库。不巧的是，这些库的 32 位和 64 位版本的名称是相同的。必须通过另一种方法对它们加以区分。
  </para>

  <para>
   为了保持与 32 位版本的兼容性，这些库在系统中的储存位置与在 32 位环境中相同。在 32 位和 64 位环境中，<filename>libc.so.6</filename> 的 32 位版本都位于 <filename>/lib/libc.so.6</filename> 下。
  </para>

  <para>
   所有 64 位库和对象文件都位于名为 <filename>lib64</filename> 的目录中。通常预计会在 <filename>/lib</filename> 和 <filename>/usr/lib</filename> 下找到的 64 位对象文件，现在可以在 <filename>/lib64</filename> 和 <filename>/usr/lib64</filename> 下找到。这意味着 <filename>/lib</filename> 和 <filename>/usr/lib</filename> 下有储存 32 位库的空间，因此两个版本的文件名都可以保持不变。
  </para>

  <para>
   如果 32 位 <filename>/lib</filename> 目录的子目录包含的数据内容不依赖于字大小，则不移动这些目录。此方案符合 LSB（Linux 标准库）和 FHS（文件系统层次标准）。
  </para>
 </sect1>
 <sect1 xml:id="sec-64bit-kernel">
  <title>内核规范</title>

  <para>
   AMD 64/Intel 64<phrase os="sles">、POWER 和 z Systems</phrase> 适用的 64 位内核提供 64 位和 32 位两种内核 ABI（应用程序二进制接口）。后者与对应的 32 位内核的 ABI 相同。这意味着 32 位应用程序可以以与 32 位内核交流的相同方式与 64 位内核进行交流。
  </para>

  <para>
   64 位内核系统调用的 32 位仿真不支持系统程序使用的某些 API。这取决于平台。出于此原因，少数应用程序（例如 <command>lspci</command>）必须<phrase os="sles">在非 POWER 平台上编译为 64 位程序才能正常运行。在 IBM z Systems 上，并非所有 ioctl 都在 32 位内核 ABI 中可用</phrase>。
  </para>

  <para>
   64 位内核只能装载专门为此内核编译的 64 位内核模块。不能使用 32 位内核模块。
  </para>

  <tip>
   <title>内核可装载模块</title>
   <para>
    某些应用程序需要单独的内核可装载模块。如果要在 64 位系统环境中使用此类 32 位应用程序，请与此应用程序的提供商和 SUSE 联系以确保内核可装载模块的 64 位版本和内核 API 的 32 位编译版本可用于此模块。
   </para>
  </tip>
 </sect1>
</chapter>
