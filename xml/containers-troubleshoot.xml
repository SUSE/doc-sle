<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter version="5.0" xml:id="cha-containers-troubleshoot"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <info>
  <title>Troubleshooting</title>
 </info>
 <sect1 xml:id="sec-container-diff">
  <title>Using container-diff</title>
  <p>
  In case a custom &deng; container image built on top of the &slea; base container image is not working as expected, the <package>container-diff</package> tool can help you analyze the image and collect information relevant for troubleshooting.
  </p>
  <p>
  <package>container-diff</package> makes it possible analyze image changes by computing differences between images and presenting the diff in a human-readable and actionable format. The tool can find differences in system packages, language-level packages, and files in a container image.
  </p>
  <p>
  <package>container-diff</package> can handle local container images (using the prefix <literal>daemon://</literal>), images in a remote registry (using the prefix <literal>remote://</literal>), and images saved as <literal>.tar</literal> archives. You can use <package>container-diff</package> to compute the diff between a local version of an image and a remote version.
  </p>
  <command>sudo zypper in container-diff</command>
  <sect2 xml:id="sec-container-diff-basics">
  <title>Basic container-diff commands</title>
  <para>
  The command <command>container-diff analyze
  <replaceable>IMAGE</replaceable></command> runs standard analysis on a single
  image. By default, it return a hash and size of the container image. For more
  information that can help you to idetify and fix problems, run specific
  analyzers. Use the <literal>--type</literal> parameter to specify the desired
  analyzer. To two most useful analyzers are <literal>history</literal> (returns
  a list of actions performed on the container image) and
  <literal>file</literal> (returns a list of added and modified files in the
  container image):
  </para>
<screen>&prompt.user;sudo container-diff analyze --type=history daemon://<replaceable>IMAGE</replaceable>
&prompt.user;sudo container-diff analyze --type=file daemon://<replaceable>IMAGE</replaceable></screen>
  <para>
  
  </para>
<screen>&prompt.user;sudo container-diff diff daemon://<replaceable>IMAGE_1</replaceable> daemon://<replaceable>IMAGE_2</replaceable> --type=history</screen>
  </sect2>
 </sect1>
</chapter>
