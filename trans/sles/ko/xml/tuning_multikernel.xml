<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="tuning_multikernel.xml" id="cha.tuning.multikernel">
 <title>여러 커널 버전 설치</title>
 <abstract>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>에서는 여러 커널 버전의 병렬 설치를 지원합니다. 두 번째 커널을 설치할 때 부팅 항목과 initrd가 자동으로 생성되므로 수동 구성이 추가로 필요하지 않습니다. 시스템을 재부팅할 때 새로 추가된 커널을 추가 부팅 옵션으로 사용할 수 있습니다.
  </para>

  <para>
   이 기능을 사용하면 항상 입증된 이전 커널로 대체할 수 있으면서 안전하게 커널 업데이트를 테스트할 수 있습니다. 이렇게 하려면 업데이트 도구(예: YaST 온라인 업데이트 또는 업데이터 애플릿)를 사용하지 않고 대신 이 장에 설명된 프로세스를 따르십시오.
  </para>
 </abstract>
 <warning>

  <title>지원 자격</title>
  <para>
   자체 컴파일된 커널이나 타사 커널을 설치하면 시스템에 대한 전체 자격을 상실합니다. <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>와 함께 제공된 커널과 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>에 대한 공식 업데이트 채널을 통해 제공된 커널만 지원됩니다.
  </para>
 </warning>
 <tip>
  <title>부트 로더 구성 커널 확인</title>
  <para>
   선택한 기본 부팅 항목을 설정하려면 다른 커널을 설치한 후 부트 로더 구성을 확인하는 것이 좋습니다. 자세한 내용은 <xref linkend="sec.grub2.yast2.config"/>에서 확인하십시오.
  </para>
 </tip>
 <sect1 id="cha.tuning.multikernel.enable">
  <title>다중 버전 지원 활성화 및 구성</title>

  
  <para>
   SUSE Linux Enterprise 12에서는 소프트웨어 패키지의 여러 버전을 설치하는 기능(다중 버전 지원)이 기본적으로 활성화되지 않습니다. 이 설정을 확인하려면 다음을 수행하십시오.
  </para>

  <procedure>
   <step performance="required">
    <para>
     선택한 편집기에서 <systemitem class="username">root</systemitem>로 <filename>/etc/zypp/zypp.conf</filename>를 엽니다.
    </para>
   </step>
   <step performance="required">
    <para>
     스트링 <literal>multiversion</literal>을 검색합니다. 이 기능이 가능한 모든 커널 패키지에 대해 다중 버전이 활성화되어 있는 경우 다음 줄이 주석이 제거된 채 표시됩니다.
    </para>
<screen>multiversion = provides:multiversion(kernel)</screen>
   </step>
   <step performance="required">
    <para>
     다중 버전 지원을 특정 커널 특징으로 제한하려면, 예를 들어 <filename>/etc/zypp/zypp.conf</filename>에서 패키지 이름을 쉼표로 구분된 목록으로 <literal>multiversion</literal> 옵션에 추가합니다.
    </para>
<screen>multiversion = kernel-default,kernel-default-base,kernel-source</screen>
   </step>
   <step performance="required">
    <para>
     변경사항을 저장합니다.
    </para>
   </step>
  </procedure>

  <warning>
   <title>KPM(Kernel Module Package: 커널 모듈 패키지)</title>
   <para>
    업데이트된 새 커널용으로 벤더가 제공한 필수 커널 모듈(커널 모듈 패키지)도 설치되어 있는지 확인하십시오. 시스템에 유지되는 이전 커널에서 패키지 요구사항을 여전히 준수하므로 커널 업데이트 프로세스에서는 없는 커널 모듈에 대해 경고를 표시하지 않습니다.
   </para>
  </warning>

  <sect2 id="cha.tuning.multikernel.enable.keep">
   <title>사용되지 않는 커널 자동 삭제</title>
   <para>
    다중 버전 지원을 활성화하고 새 커널을 자주 테스트할 경우 부팅 메뉴가 금방 복잡해질 수 있습니다. 일반적으로 <filename>/boot</filename> 파티션에는 제한된 공간이 포함되므로 <filename>/boot</filename> 오버플로 관련 문제가 발생할 수도 있습니다. YaST 또는 Zypper(아래에서 설명)를 사용하여 사용되지 않는 커널 버전을 수동으로 삭제할 수 있지만 더 이상 사용되지 않는 커널을 자동으로 삭제하도록 <systemitem class="library">libzypp</systemitem>를 구성할 수도 있습니다. 기본적으로 커널은 삭제되지 않습니다.
   </para>
   <procedure>
    <step performance="required">
     <para>
      선택한 편집기에서 <systemitem class="username">root</systemitem>로 <filename>/etc/zypp/zypp.conf</filename>를 엽니다.
     </para>
    </step>
    <step performance="required">
     <para>
      스트링 <literal>multiversion.kernels</literal>를 검색하고 줄의 주석 기호를 제거하여 이 옵션을 활성화합니다. 이 옵션에는 다음 값의 쉼표로 구분된 목록이 사용됩니다.
     </para>
     <formalpara>
      <title><literal><replaceable>3.12.24-7.1</replaceable></literal>:</title>
      <para>
       커널을 지정된 버전 번호로 유지
      </para>
     </formalpara>
     <formalpara>
      <title><literal>latest</literal>:</title>
      <para>
       커널을 최고 버전 번호로 유지
      </para>
     </formalpara>
     <formalpara>
      <title><literal>latest-N</literal>:</title>
      <para>
       커널을 N번째 최고 버전 번호로 유지
      </para>
     </formalpara>
     <formalpara>
      <title><literal>running</literal>:</title>
      <para>
       실행 중인 커널 유지
      </para>
     </formalpara>
     <formalpara>
      <title><literal>oldest</literal>:</title>
      <para>
       커널을 최하 버전 번호로 유지(<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>와 함께 원래 제공된 버전 번호)
      </para>
     </formalpara>
     <formalpara>
      <title><literal>oldest+N</literal></title>
      <para>
       커널을 N번째 최하 버전 번호로 유지
      </para>
     </formalpara>
     <para>
      몇 가지 예는 다음과 같습니다.
     </para>
     <variablelist>
      <varlistentry>
       <term><literal>multiversion.kernels = latest,running</literal>
       </term>
       <listitem>
        <para>
         최신 커널과 현재 실행 중인 커널을 유지합니다. 이전 커널이 <emphasis>다음 부팅 후</emphasis> 제거되지만 설치 직후에는 제거되지 않는다는 점을 제외하면, 다중 버전 기능을 활성화하지 않는 것과 유사합니다.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><literal>multiversion.kernels = latest,latest-1,running</literal>
       </term>
       <listitem>
        <para>
         마지막 2개 커널과 현재 실행 중인 커널을 유지합니다.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><literal> multiversion.kernels = latest,running,<replaceable>3.12.25.rc7-test</replaceable></literal>
       </term>
       <listitem>
        <para>
         최신 커널, 현재 실행 중인 커널 및 <replaceable>3.12.25.rc7-test</replaceable>를 유지합니다.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <tip>
      <title><literal>실행 중인</literal> 커널 유지</title>
      <para>
       특수 설정을 사용하는 경우가 아니면 항상 <literal>실행 중인</literal> 커널을 유지하려고 할 수 있습니다. 실행 중인 커널을 유지하지 않는 경우에는 커널 업데이트 시 삭제됩니다. 이에 따라 현재 실행 중인 커널용 모듈은 삭제된 후로 더 이상 로드할 수 없으므로 업데이트 후 즉시 시스템을 재부팅해야 합니다.
      </para>
     </tip>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 id="cha.tuning.multikernel.yast">
  <title>YaST를 사용하여 여러 커널 버전 설치/제거</title>

  <procedure>
   <step performance="required">
    <para>
     YaST를 시작하고 <menuchoice> <guimenu>소프트웨어</guimenu> <guimenu>소프트웨어 관리</guimenu> </menuchoice>를 통해 소프트웨어 관리자를 엽니다.
    </para>
   </step>
   <step performance="required">
    <para>
     <menuchoice> <guimenu>보기</guimenu> <guimenu>패키지 그룹</guimenu> <guimenu>다중 버전 패키지</guimenu> </menuchoice>를 선택하여 여러 버전을 제공할 수 있는 모든 패키지를 나열합니다.
    </para>
    <figure>
     <title>YaST 소프트웨어 관리자: 다중 버전 보기</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_sw_multiversion.png" width="90%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_sw_multiversion.png" width="90%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step performance="required">
    <para>
     패키지를 선택하고 왼쪽 하단 창에서 <guimenu>버전</guimenu> 탭을 엽니다.
    </para>
   </step>
   <step performance="required">
    <para>
     패키지를 설치하려면 해당 체크박스를 클릭합니다. 녹색 확인 표시는 설치를 위해 선택되었음을 나타냅니다.
    </para>
    <para>
     이미 설치된 패키지(흰색 확인 표시로 표시됨)를 제거하려면 빨간색 <literal>X</literal>가 제거를 위해 선택되었음을 나타낼 때까지 체크박스를 클릭합니다.
    </para>
   </step>
   <step performance="required">
    <para>
     <guimenu>승인</guimenu>을 클릭하여 설치를 시작합니다.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 id="cha.tuning.multikernel.zypper">
  <title>Zypper를 사용하여 여러 커널 버전 설치/제거</title>

  <procedure>
   <step performance="required">
    <para>
     <command>zypper se -s 'kernel*'</command> 명령을 사용하여 사용 가능한 모든 커널 패키지 목록을 표시합니다.
    </para>
<screen><?dbsuse-fo font-size="7pt"?>

S | Name           | Type       | Version         | Arch   | Repository        
--+----------------+------------+-----------------+--------+-------------------
v | kernel-default | package    | 2.6.32.10-0.4.1 | x86_64 | Alternative Kernel
i | kernel-default | package    | 2.6.32.9-0.5.1  | x86_64 | (System Packages) 
  | kernel-default | srcpackage | 2.6.32.10-0.4.1 | noarch | Alternative Kernel
i | kernel-default | package    | 2.6.32.9-0.5.1  | x86_64 | (System Packages)
...</screen>
   </step>
   <step performance="required">
    <para>
     설치할 때 정확한 버전을 지정하십시오.
    </para>
<screen>zypper in kernel-default-2.6.32.10-0.4.1</screen>
   </step>
   <step performance="required">
    <para>
     커널을 제거할 때 <command>zypper se -si 'kernel*'</command> 명령을 사용하여 설치된 모든 커널을 나열하고 <command>zypper rm <replaceable>PACKAGENAME-VERSION</replaceable></command> 명령을 사용하여 패키지를 제거합니다.
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
