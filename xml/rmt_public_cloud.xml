<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>
<chapter xmlns="http://docbook.org/ns/docbook"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
 xml:id="rmt-public-cloud">
  <title>Deploying a &sls; instance to support &rmt; in the public cloud</title>
  <info>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
      <dm:translation>yes</dm:translation>
    </dm:docmanager>
  </info>
  <para>
You can deploy a &sls; instance to support &rmt; in Amazon Web Services, Google Cloud, and Microsoft Azure.
The Repository Mirroring Tool (RMT) is included in &sls; starting with version 15. </para>
  <para>
  The following example shows a generic cloud architecture for the &rmt; deployment. Your deployment may look different based
  on your networking requirements. </para>
  <figure>
    <title>An example of cloud architecture for &rmt; deployment</title>
    <mediaobject>
      <imageobject role="fo">
        <imagedata fileref="rmt-architecture-example.png" width="70%"/>
      </imageobject>
        </mediaobject>
  </figure>
  <sect1 xml:id="sec-rmt-byos-image">
<title>Using a bring-your-own-subscription image</title>
<para>
SUSE provides images for &sls; in Amazon Web Services, Google Cloud, and Microsoft Azure. There are two types of images available;
PAYG (Pay As You Go) and BYOS (Bring Your Own Subscription). These images are updated at regular intervals and it is suggested that you deploy
new instances from the latest version of the image to ensure the most recent security updates are in place.
To support &rmt; deployment, it is recommended to deploy a &rmt; instance from a BYOS image.
</para>
<sect2 xml:id="sec-rmt-byos-image-where">
  <title>Finding images in the cloud marketplace </title>
  <para>Where to find the relevant image in each of the cloud provider is shown below: </para>
  <figure>
    <title>Google Cloud</title>
    <mediaobject>
      <imageobject role="fo">
        <imagedata fileref="gcp-launch-sles-instance-cloud-rmt-marketplace.png" width="70%"/>
      </imageobject>
       </mediaobject>
  </figure>
  <figure>
    <title>Amazon Web Services</title>
    <mediaobject>
      <imageobject role="fo">
        <imagedata fileref="aws-launch-sles-instance-cloud-rmt-marketplace.png" width="70%"/>
      </imageobject>
       </mediaobject>
  </figure>
  <figure>
    <title>Microsoft Azure</title>
    <mediaobject>
      <imageobject role="fo">
        <imagedata fileref="azure-launch-sles-instance-cloud-rmt-marketplace.png" width="70%"/>
      </imageobject>
       </mediaobject>
  </figure>
  <para> It is recommended to start with an instance type with 2 to 3 VCPUS and a minimum of 8GB RAM to support the
    &rmt; deployment. For example, in AWS this would be a EC2 T3 large instance.
    </para>
</sect2>
<sect2 xml:id="sec-rmt-byos-image-registration">
  <title>Registering the &sls; instance</title>
  <para>After the &sls; instance deployment, you must register the instance with the SUSE Customer Center.</para>
  <note>
    <title>&suse; account</title>
    <para>
     Registering with the &scc; requires a SUSE account. In case you do not have
     a SUSE account yet, go to the &scc; home page (<link
     xlink:href="https://scc.suse.com/"/>) to create one.
    </para>
   </note>
   <para>To connect your instance: </para>
   <para>AWS:</para>
   <screen>&prompt.user; <command>ssh -i <replaceable>SSH_KEY</replaceable> <replaceable>EC2_USER_ID</replaceable>@<replaceable>SERVER_IP</replaceable></command></screen>
   <para>Google Cloud:</para>
   <screen>&prompt.user; <command>gcloud compute ssh <replaceable>GCE_INSTANCE_IP</replaceable></command></screen>
   <para>Azure:</para>
   <screen>&prompt.user; <command>ssh <replaceable>AZURE_USER_ID</replaceable>@<replaceable>SERVER_IP</replaceable></command></screen>
  <para>To register the &sls; instance with SCC: </para>
  <screen>&prompt.sudo; <command>SUSEConnect -e <replaceable>EMAIL_ADDRESS</replaceable> -r <replaceable>REGISTRATION_CODE </replaceable></command></screen>
  <para>The registration code is available, once you log in to  SCC. </para>
</sect2>
  </sect1>

</chapter>
