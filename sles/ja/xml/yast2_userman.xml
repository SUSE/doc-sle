<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_userman.xml" version="5.0" xml:id="cha.y2.userman">
 <title>YaSTによるユーザの管理</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  インストール時にシステム用のローカルユーザを作成できました。YaSTの<guimenu>ユーザとグループの管理</guimenu>モジュールを使用して、別のユーザの追加や既存ユーザの編集が可能です。また、ネットワークサーバでユーザを認証するようにシステムを設定できます。
 </para>
 <sect1 xml:id="sec.y2.userman.main">
  <title>［ユーザとグループの管理］ダイアログ</title>

  <para>
   ユーザまたはグループを管理するには、YaSTを起動し、<menuchoice>
   <guimenu>セキュリティとユーザ</guimenu> <guimenu>ユーザとグループの管理</guimenu> </menuchoice>の順にクリックします。コマンドラインで<command>sudo yast2 users &amp;</command>を実行して、<guimenu>ユーザとグループの管理</guimenu>ダイアログを直接起動することもできます。
  </para>

  <figure xml:id="fig.y2.userman.main">
   <title>YaSTのユーザとグループの管理</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_users_main_gtk.png" width="90%" format="PNG" os="sles;sled"/>
     
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_users_main_gtk.png" width="70%" format="PNG" os="sles;sled"/>
     
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   各ユーザには、システム全体で使用できるユーザーID (UID)が割り当てられます。マシンにログインできるユーザ以外にも、内部での使用のみが目的のさまざまな「システムユーザ」<emphasis/>が存在します。各ユーザは、1つ以上のグループに割り当てられます。<emphasis>システムユーザ</emphasis>と同様に、内部用途の<emphasis>システムグループ</emphasis>も存在します。
  </para>

  <para>
   このダイアログで表示および変更するために選択したユーザセット(ローカルユーザ、ネットワークユーザ、システムユーザ)に応じて、メインウィンドウにはさまざまなタブが表示されます。これにより、次のタスクを実行できます。
  </para>

  <variablelist>
   <varlistentry>
    <term>ユーザアカウントを管理する</term>
    <listitem>
     <para>
      <guimenu>ユーザ</guimenu>タブから、<xref linkend="sec.y2.userman.users"/>の説明に従って、ユーザアカウントを作成、変更、削除、または一時的に無効にします。<xref linkend="sec.y2.userman.adv"/>では、パスワードポリシーの強制、暗号化したホームディレクトリの使用、ディスククオータの管理などの高度なオプションについて説明しています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>デフォルト設定の変更</term>
    <listitem>
     <para>
      <guimenu>新しいユーザのデフォルト設定</guimenu>タブで定義された設定に応じて、ローカルユーザアカウントが作成されます。<xref linkend="sec.y2.userman.defaults"/>では、デフォルトのグループ割り当て、またはホームディレクトリのデフォルトパスおよびアクセス許可を変更する方法を説明します。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>グループへのユーザの割り当て</term>
    <listitem>
     <para>
      <xref linkend="sec.y2.userman.assign"/>では、個別ユーザのグループの割り当てを変更する方法を説明します。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>グループを管理する</term>
    <listitem>
     <para>
      <guimenu>グループ</guimenu>タブから、既存のグループの追加、変更、または削除を行うことができます。この方法については、<xref linkend="sec.y2.userman.groups"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ユーザ認証方法を変更する</term>
    <listitem>
     <para>
      コンピュータがNISやLDAPなどのユーザ認証方法を提供するネットワークに接続されている場合は、<guimenu>認証設定</guimenu>タブで、認証方法を選択できます。詳細については、<xref linkend="cha.y2.userman.authent"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   ユーザとグループの管理用に、このダイアログでは同様の機能が提供されます。ダイアログ上部にある適切なタブを選択することにより、ユーザとグループの管理ビューを簡単に切り替えることができます。
  </para>

  <para>
   ［フィルタ］オプションで、変更するユーザまたはグループの設定を定義できます。<guimenu>ユーザ</guimenu>タブまたは<guimenu>グループ</guimenu>タブで<guimenu>フィルタの設定</guimenu>をクリックすると、たとえば(LDAPを使用するネットワークに属する場合)、<guimenu>ローカルユーザ</guimenu>または<guimenu>LDAPユーザ</guimenu>などの特定のカテゴリに応じてユーザまたはグループを表示および編集できます。<menuchoice> <guimenu>フィルタの設定</guimenu>
   <guimenu>フィルタのカスタマイズ</guimenu> </menuchoice>で、カスタムフィルタをセットアップおよび使用できます。
  </para>

  <para>
   選択するフィルタによっては、以降のオプションと機能の一部がダイアログから利用できなくなります。
  </para>
 </sect1>
 <sect1 xml:id="sec.y2.userman.users">
  <title>ユーザアカウントの管理</title>

  <para>
   <indexterm>
   <primary>ユーザ</primary>
   <secondary>アカウントの作成</secondary>
   </indexterm> <indexterm>
   <primary> ユーザ</primary>
   <secondary>アカウントの変更</secondary>
   </indexterm> YaSTでは、ユーザアカウントの作成、変更、削除、または一時的な無効化が可能です。熟練したユーザか管理者でない限り、ユーザアカウントを変更しないでください。
  </para>

  <note>
   <title>既存ユーザのユーザーIDを変更する</title>
   <para>
    ファイル所有権はユーザ名ではなくユーザIDにバインドされます。ユーザIDの変更後、この変更に合わせてユーザのホームディレクトリのファイルが自動的に調整されます。ただし、ユーザは、IDの変更後、ファイルシステム内の他の場所で作成したファイルのファイル所有権を失います(それらのファイルの所有権が手動で変更されない限り)。
   </para>
  </note>

  <para>
   次に、デフォルトのユーザアカウントを設定する方法を説明します。自動ログイン、パスワードを使用しないログイン、暗号化されたホームディレクトリの設定、ユーザとグループのクオータの管理など、さらに詳細なオプションについては、<xref linkend="sec.y2.userman.adv"/>を参照してください。
  </para>

  <procedure>
   <title>ユーザアカウントを追加または変更する</title>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>ユーザ</guimenu>タブをクリックします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>フィルタを設定</guimenu>では、管理するユーザセットを定義します。このダイアログには、システムのユーザ、およびユーザが属するグループが一覧にされます。
    </para>
   </step>
   <step>
    <para>
     既存のユーザに対するオプションを変更するには、エントリを選択し、<guimenu>編集</guimenu>をクリックします。
    </para>
    <para>
     新しいユーザアカウントを作成するには、<guimenu>追加</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     (ログインで使用される)<guimenu>ユーザ名</guimenu>および<guimenu>パスワード</guimenu>など、最初のタブで適切なユーザデータを入力します。このデータは、新しいユーザを作成するために十分なものです。ここで<guimenu>OK</guimenu>をクリックすると、システムにより自動的にユーザIDが割り当てられ、デフォルトに従って他のすべての値が設定されます。
    </para>
   </step>

   <step>
    <para>
     このユーザのメールボックスに全種類のシステム通知が配信されるようにする場合は、<guimenu>システムメールの受信</guimenu>を有効にします。これによって<systemitem class="username">root</systemitem>のメールエイリアスが作成され、このユーザは最初に<systemitem class="username">root</systemitem>としてログインしなくてもシステムメールが読めるようになります。
    </para>
    <para>
     システムサービスにより送信されたメールは、ローカルメールボックス<filename>/var/spool/mail/</filename><replaceable>username</replaceable>に保存されます(<replaceable>username</replaceable>は選択されたユーザのログイン名)。電子メールを読むには、<command>mail</command>コマンドを使用できます。
    </para>
   </step>
   <step>
    <para>
     ユーザIDまたはユーザのホームディレクトリへのパスなど、さらに詳細な情報を調整する場合は、<guimenu>詳細</guimenu>タブを使用します。
    </para>
    <para>
     既存のユーザのホームディレクトリを再配置する必要がある場合は、新しいホームディレクトリへのパスを入力し、<guimenu>新しい場所に移動</guimenu>により現在のホームディレクトリの内容を移動します。ホームディレクトリを再配置する必要がない場合は、既存データが存在しなくても新しいホームディレクトリが作成されます。
    </para>
   </step>
   <step>
    <para>
     パスワードを定期的に変更することをユーザに強制するか、他のパスワードオプションを設定するには、<guimenu>パスワードの設定</guimenu>に切り替え、オプションを調整します。詳細については、<xref linkend="sec.y2.userman.adv.passw"/>を参照してください。
    </para>
   </step>
   <step>
    <para>
     すべてのオプションが希望どおりに設定されたら、<guimenu>OK</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。新たに追加されたユーザは、作成済みのログイン名とパスワードを使用してシステムにログインできるようになります。
    </para>
    <para>
     また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存する場合は、<menuchoice> <guimenu>エキスパート用オプション</guimenu> <guimenu>Write Changes Now (今すぐ変更を書き込み)</guimenu> </menuchoice>の順にクリックします。
    </para>
   </step>
  </procedure>

  <tip>
   <title>ユーザIDの一致</title>
   <para>
    ネットワーク環境に統合する必要のあるラップトップの新しい(ローカル)ユーザが、そのネットワーク環境内ですでにユーザIDを持っている場合は、ネットワーク内でのIDに(ローカル)ユーザIDを一致させると便利です。これにより、ユーザが<quote>オフライン</quote>で作成するファイルのファイル所有権は、直接ネットワーク上で作成した場合のファイル所有権と同じになります。
   </para>
  </tip>

  <procedure>
   <title>ユーザアカウントを無効化または削除する</title><indexterm>
   <primary> ユーザ</primary>
   <secondary> アカウントの無効化</secondary></indexterm><indexterm>
   <primary>   ユーザ</primary>
   <secondary> アカウントの削除</secondary></indexterm> 
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>ユーザ</guimenu>タブをクリックします。
    </para>
   </step>
   <step>
    <para>
     ユーザアカウントを削除しないで一時的に無効にするには、リストからユーザを選択し、<guimenu>編集</guimenu>をクリックします。<guimenu>ユーザログインを禁止する</guimenu>を有効にします。ユーザは、アカウントを再び有効にするまで、マシンにログインできません。
    </para>
   </step>
   <step>
    <para>
     ユーザアカウントを削除するには、リストからユーザを選択して、<guimenu>削除</guimenu>をクリックします。ユーザのホームディレクトリを削除するか、またはこのデータを保持するかを選択します。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.y2.userman.adv">
  <title>ユーザアカウントの追加オプション</title>

  <para>
   <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>には、デフォルトユーザアカウントの設定のほか、パスワードポリシーの強制、暗号化したホームディレクトリの使用、ユーザとグループのディスククオータの定義などのオプションも用意されています。
  </para>

  <sect2 xml:id="cha.y2.userman.adv.login">
   <title>自動ログインおよびパスワードレスログイン</title>
   <para>
    GNOMEデスクトップ環境を使用している場合、特定のユーザには「自動ログイン」<emphasis/>を設定し、すべてのユーザに「パスワードなしのログイン」<emphasis/>を設定できます。自動ログインでは、ユーザがブート時にデスクトップ環境に自動的にログインします。この機能は、一度に1人のユーザについてのみ有効にできます。パスワードなしのログインでは、どのユーザも、ログインマネージャにユーザ名を入力するだけでシステムにログインできます。
   </para>
   <warning>
    <title>セキュリティリスク</title>
    <para>
     複数のユーザがアクセスできるマシンで<emphasis>自動ログイン</emphasis>または<emphasis>パスワードレスログイン</emphasis>を有効にすることはセキュリティ上のリスクを伴います。どのユーザでもシステムおよびデータにアクセスでき、認証の必要もありません。システムに機密情報などの重要なデータを保管している場合は、この機能は使用しないでください。
    </para>
   </warning>
   <para>
    自動ログインまたはパスワードなしのログインを有効にする場合は、<guimenu>エキスパートオプション</guimenu> ログインの設定<menuchoice> <guimenu>の順に選択し、YaSTの</guimenu> <guimenu>ユーザとグループの管理</guimenu> </menuchoice>でこれらの機能にアクセスします。
   </para>
  </sect2>

  <sect2 xml:id="sec.y2.userman.adv.passw">
   <title>パスワードポリシーの強制</title>
   <para>
    複数のユーザが使用するシステムでは、最低限のパスワードセキュリティポリシーを強制することをお勧めします。ユーザに定期的にパスワードを変更させたり、推測しにくいような複雑なパスワードを使用させることができます。ローカルユーザの場合は、次の手順に従います。

   </para>
   <procedure>
    <title>パスワードを設定する</title><indexterm>
    <primary> ユーザ</primary>
    <secondary> パスワード設定</secondary></indexterm> 
    <step>
     <para>
      YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>ユーザ</guimenu>タブを選択します。
     </para>
    </step>
    <step>
     <para>
      パスワードオプションを変更するユーザを選択し、<guimenu>編集</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      <guimenu>パスワードの設定</guimenu>タブに切り替えます。ユーザの最後のパスワード変更がタブに表示されています。
     </para>
    </step>
    <step>
     <para>
      次回のログインでパスワードを変更するようにユーザに強制するには、<guimenu>次のログイン時にパスワード変更を強制する</guimenu>を有効にします。
     </para>
    </step>
    <step>
     <para>
      パスワードのローテーションを強制するには、<guimenu>同じパスワードを使用できる最長日数</guimenu>および<guimenu>同じパスワードを使用する最短日数</guimenu>を設定します。
     </para>
    </step>
    <step>
     <para>
      期限切れになる前にパスワードを変更するようにユーザに通知するには、<guimenu>パスワード失効予告日</guimenu>に日数を設定します。
     </para>
    </step>
    <step>
     <para>
      パスワードが期限切れになった後ユーザがログインできる期間を制限するには、<guimenu>パスワードの有効期限切れログインを使用できる日数</guimenu>の値を変更します。
     </para>
    </step>
    <step>
     <para>
      また、アカウント全体の特定の有効期限を指定できます。<guimenu>有効期限</guimenu>を<replaceable>YYYY-MM-DD</replaceable>形式で入力します。これはパスワード関連の設定ではなく、アカウント自体に適用されることに注意してください。
     </para>
    </step>
    <step>
     <para>
      これらのオプションおよびそのデフォルト値の詳細については、<guimenu>ヘルプ</guimenu>をクリックしてください。
     </para>
    </step>
    <step>
     <para>
      変更内容を反映するには、<guimenu>OK</guimenu>をクリックします。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.y2.userman.adv.crypto">
   <title>暗号化ホームディレクトリを管理する</title><indexterm>
   <primary> ホームディレクトリ</primary>
   <secondary> 暗号化</secondary></indexterm><indexterm>
   <primary>   ユーザ</primary>
   <secondary> 暗号化されたホームディレクトリ</secondary></indexterm> 
   <para>
    ホームディレクトリ中のデータを、盗用やハードディスクの持ち出しなどの犯罪から保護するために、暗号化ホームディレクトリを作成できます。これらはLUKS(Linux Unified Key Setup)で暗号化され、イメージとイメージキーがユーザ用に生成されます。イメージキーはユーザのログインパスワードで保護されます。ユーザがシステムにログインすると、暗号化 ホームディレクトリがマウントされ、その内容を利用できるようになります。
   </para>
   <para>
    YaSTでは、新しいユーザまたは既存のユーザ向けに暗号化したホームディレクトリを作成できます。既存のユーザ用の暗号化ホームディレクトリを作成、または変更するには、ユーザの現在のログインパスワードを把握しておく必要があります。デフォルトでは、既存のすべてのユーザデータが暗号化された新規ホームディレクトリにコピーされますが、暗号化されていないディレクトリからは削除されません。
   </para>
   <warning>
    <title>セキュリティ制限</title>
    <para>
     ユーザのホームディレクトリを暗号化しても、他のユーザに対しては強力なセキュリティ手段にはなりません。強力なセキュリティが必要な場合は、システムを物理的には共有しないでください。
    </para>
   </warning>
   <para>
    <xref linkend="sec.security.cryptofs.y2.homes"/>では、暗号化されたホームディレクトリ、およびよりセキュリティ強化のために講じるべき処置について背景情報を説明しています。
   </para>
   <procedure>
    <title>暗号化ホームディレクトリを作成する</title>
    <step>
     <para>
      YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>ユーザ</guimenu>タブをクリックします。
     </para>
    </step>
    <step>
     <para>
      既存のユーザのホームディレクトリを暗号化するには、ユーザを選択し、<guimenu>編集</guimenu>をクリックします。
     </para>
     <para>
      ホームディレクトリを暗号化しない場合は、<guimenu>追加</guimenu>をクリックして新規ユーザアカウントを作成し、最初のタブで適切なユーザデータを入力します。
     </para>
    </step>
    <step>
     <para>
      <guimenu>詳細</guimenu>タブで、<guimenu>暗号化ホームディレクトリを使用</guimenu>を選択します。<guimenu>ディレクトリサイズ(MB)</guimenu>で、このユーザに対して作成される暗号化イメージファイルのサイズを指定します。
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2_users_crypto_gtk.png" width="90%" format="PNG" os="sles;sled"/>
        
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2_users_crypto_gtk.png" width="70%" format="PNG" os="sles;sled"/>
        
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      設定を反映するには、<guimenu>OK</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      YaSTからの要求に応じて、ユーザの現在のログインパスワードを入力し、次に進みます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。
     </para>
     <para>
      また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存する場合は、<menuchoice> <guimenu>エキスパート用オプション</guimenu> <guimenu>Write Changes Now (今すぐ変更を書き込み)</guimenu> </menuchoice>の順にクリックします。
     </para>
    </step>
   </procedure>
   <procedure>
    <title>暗号化ホームディレクトリを変更または無効にする</title>
    <para>
     ホームディレクトリの暗号化の無効化、またはイメージファイルのサイズの変更は、いつでも行うことができます。
    </para>
    <step>
     <para>
      <guimenu>ユーザ</guimenu>ビューで、YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開きます。
     </para>
    </step>
    <step>
     <para>
      リストからユーザを選択して、<guimenu>編集</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      暗号化を無効にする場合は、<guimenu>詳細</guimenu>タブに切り替え、<guimenu>暗号化ホームディレクトリを使用</guimenu>を無効にします。
     </para>
     <para>
      このユーザの暗号化イメージファイルのサイズを拡大または縮小する必要がある場合は、<guimenu>ディレクトリサイズ(MB)</guimenu>を変更します。
     </para>
    </step>
    <step>
     <para>
      設定を反映するには、<guimenu>OK</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      YaSTからの要求に応じて、ユーザの現在のログインパスワードを入力し、次に進みます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。
     </para>
     <para>
      また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存する場合は、<menuchoice> <guimenu>エキスパート用オプション</guimenu> <guimenu>Write Changes Now (今すぐ変更を書き込み)</guimenu> </menuchoice>の順にクリックします。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.y2.userman.adv.quota">
   <title>クオータの管理</title><indexterm>
   <primary>ユーザ</primary>
   <secondary>クオータ</secondary></indexterm><indexterm>
   <primary>クオータ</primary>
   <secondary>ユーザ、グループ</secondary></indexterm>
   <para>
    システム容量が通知なく枯渇することのないように、システム管理者はユーザまたはグループに対するクオータを設定できます。クオータは、1つ以上のファイルシステムに対して定義されるもので、これにより使用可能なディスク容量および作成可能なiノード(インデックスノード)の数を制限できます。iノードは、通常のファイル、ディレクトリ、または他のファイルシステムオブジェクトに関する基本的な情報を保存するファイルシステム上のデータ構造です。また、ファイル名とコンテンツを除いて、ファイルシステムオブジェクト(ユーザおよびグループの所有権、読み取り、書き込み、または実行のパーミッションなど)のすべての属性を保存します。
   </para>
   <para>
    <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>では、<literal>ソフト</literal>クオータと<literal>ハード</literal>クオータを使用できます。さらに、ユーザまたはグループが特定量まで一時的にクオータを違反できる猶予間隔を定義できます。
   </para>
   <variablelist>
    <varlistentry>
     <term>ソフトクォータ</term>
     <listitem>
      <para>
       限界に近づいたときにユーザに通知する警告レベルを定義します。管理者は、パーティションのデータのクリーンアップと削減を行うようにユーザに促します。通常、ソフトクォータの限界値は、ハードクォータの限界値よりも低くなります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>ハードクォータ</term>
     <listitem>
      <para>
       書き込み要求が拒否される限界を定義します。ハードクォータに達すると、それ以上データを格納することができなくなり、アプリケーションがクラッシュする可能性が高くなります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>猶予期間</term>
     <listitem>
      <para>
       ソフトクォータに達してから警告の発行までの時間を定義します。 通常、1時間、数時間など小さな値を設定します。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <procedure>
    <title>パーティションのクォータサポートの有効化</title>
    <para>
     特定のユーザおよびグループにクオータを設定するには、YaSTのエキスパートパーティショナで、対応するパーティションのクォータサポートを有効にしておく必要があります。
    </para>
    <note os="sles">
     <title>Btrfsパーティションのクォータ</title>
     <para>

      Btrfsパーティションのクォータの処理は異なります。詳細については、<xref linkend="sec.filesystems.major.btrfs.quota"/>を参照してください。<remark>taroth 2014-06-04: todo - after btrfs quotas have been covered in
       the manuals (Storage Guide?), add link - taroth 2014-12-29: done</remark>
     </para>
    </note>
    <step>
     <para>
      YaSTで<menuchoice> <guimenu>システム</guimenu>
      <guimenu>ディスクの分割</guimenu> </menuchoice>の順に選択し、<guimenu>はい</guimenu>をクリックして続行します。
     </para>
    </step>
    <step>
     <para>
      <guimenu>エキスパートパーティショナ</guimenu>で、クオータを有効にするパーティションを選択して、<guimenu>編集</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>

      <guimenu>Fstabオプション</guimenu>をクリックし、<guimenu>Enable Quota Support</guimenu>を有効にします。<systemitem>quota</systemitem>パッケージがまだインストールされていない場合は、<guimenu>はい</guimenu>のクリックで各メッセージを確認することにより、クオータパッケージがインストールされます。
     </para>
    </step>
    <step>
     <para>
      変更を確認し、<guimenu>エキスパートパーティショナ</guimenu>を終了します。
     </para>
    </step>
    <step>
     <para>
      次のコマンドを入力して、<systemitem class="service">quotaon</systemitem>サービスが実行されていることを確認してください。
     </para>
<screen>systemctl status quotaon</screen>
     <para>
      サービスは、<literal>有効</literal>なものとしてマークされている必要があります。そうでない場合は、<command>systemctl start quotaon</command>コマンドを使用して開始する必要があります。
     </para>
    </step>
   </procedure>
   <procedure>
    <title>ユーザまたはグループのクオータを設定する</title>
    <para>
     これで、特定のユーザまたはグループに対するソフトクオータまたはハードクオータを定義し、猶予間隔を指定できます。
    </para>
    <step>
     <para>
      YaSTの<guimenu>ユーザとグループの管理</guimenu>で、クオータの設定対象とするユーザまたはグループを選択し、<guimenu>編集</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      <guimenu>プラグイン</guimenu>タブで、<guimenu>ユーザクォータの管理</guimenu>のエントリを選択してから、<guimenu>起動</guimenu>をクリックして<guimenu>クォータの設定</guimenu>ダイアログを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>ファイルシステム</guimenu>から、クオータを適用するパーティションを選択します。
     </para>
     <informalfigure os="sles;sled">
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2_users_quota_gtk.png" width="80%" format="PNG" os="sles;sled"/>
        
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2_users_quota_gtk.png" width="70%" format="PNG" os="sles;sled"/>
        
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      <guimenu>Size Limits</guimenu>では、ディスクスペースの容量を制限します。ユーザまたはグループがこのパーティションで持つことができる1KBブロックの数を入力します。<guimenu>Soft Limit</guimenu>および<guimenu>ハード制限</guimenu>の値を指定します。
     </para>
    </step>
    <step>
     <para>
      さらに、ユーザまたはグループがこのパーティションで持つことができるiノードの数を制限できます。<guimenu>iノード制限</guimenu>で、<guimenu>Soft Limit</guimenu>および<guimenu>ハード制限</guimenu>を入力します。
     </para>
    </step>
    <step>
     <para>
      サイズまたはiノードに対して指定されたソフト制限をユーザまたはグループが既に超過している場合にのみ猶予間隔を定義できます。このソフト制限を超過していない場合、時間に関連するテキストボックスは有効になりません。ユーザまたはグループが上記の制限セットを超過できる期間を指定します。
     </para>
    </step>
    <step>
     <para>
      入力した設定を確認して、<guimenu>OK</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。
     </para>
     <para>
      また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存する場合は、<menuchoice> <guimenu>エキスパート用オプション</guimenu> <guimenu>Write Changes Now (今すぐ変更を書き込み)</guimenu> </menuchoice>の順にクリックします。
     </para>
    </step>
   </procedure>
   <para>
    <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>には、<literal>repquota</literal>や<literal>warnquota</literal>などのコマンドラインツールも付属しています。システム管理者は、これらのツールを使用して、ディスク使用状況の管理やクオータを超過しそうなユーザへの電子メール通知が可能です。管理者はまた、<command>quota_nld</command>を使用することにより、超過したクオータに関するカーネルメッセージをD-BUSに転送できます。詳細については、<systemitem>repquota</systemitem>、<systemitem>warnquota</systemitem>、および<command>quota_nld</command>のマニュアルページを参照してください。

   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.y2.userman.defaults">
  <title>ローカルユーザのデフォルト設定の変更</title><indexterm>

  <primary> ユーザ</primary>

  <secondary> デフォルト設定</secondary></indexterm> 

  <para>
   新しくローカルユーザを作成する際には、いくつかのデフォルト設定がYaSTで使用されます。これらには、たとえば、ユーザが属するプライマリグループとセカンダリグループ、ユーザのホームディレクトリのアクセスパーミッションなどが含まれます。これらのデフォルト設定値は、必要に応じて変更することができます。
  </para>

  <procedure>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>Defaults for New Users (新規ユーザのデフォルト)</guimenu>タブを選択します。
    </para>
   </step>
   <step>
    <para>
     新しいユーザが自動的に属するプライマリグループを変更するには、<guimenu>デフォルトグループ</guimenu>から別のグループを選択します。
    </para>
   </step>
   <step>
    <para>
     新しいユーザのセカンダリグループを変更するには、<guimenu>セカンダリグループ</guimenu>でグループを追加するか変更します。グループ名はカンマで区切る必要があります。
    </para>
   </step>
   <step>
    <para>
     新しいユーザのホームディレクトリのデフォルトパスとして<filename>/home/<replaceable>ユーザ名</replaceable></filename>を使用しない場合は、<guimenu>Path Prefix for Home Directory</guimenu>を変更します。
    </para>
   </step>
   <step>
    <para>
     新たに作成したホームディレクトリのデフォルトのパーミッションモードを変更するには、<guimenu>ホームディレクトリ用のUmask</guimenu>のumask値を調整します。umaskの詳細については、<xref linkend="cha.security.acls"/>および<command>umask</command>のマニュアルページを参照してください。
    </para>
   </step>
   <step>
    <para>
     それぞれのオプションの詳細については、<guimenu>ヘルプ</guimenu>をクリックしてください。
    </para>
   </step>
   <step>
    <para>
     変更内容を反映するには、<guimenu>OK</guimenu>をクリックします。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.y2.userman.assign">
  <title>グループへのユーザの割り当て</title>

  <para>
   <indexterm>
   <primary>ユーザ</primary>
   <secondary>グループの割り当て</secondary>
   </indexterm><guimenu>ユーザとグループの管理</guimenu>ダイアログの<guimenu>新しいユーザのデフォルト設定</guimenu>タブからアクセス可能なデフォルト設定に従って、さまざまなグループにローカルユーザが割り当てられます。次に、個別ユーザのグループ割り当てを変更する方法を説明します。新しいユーザに対するデフォルトのグループの割り当てを変更する必要がある場合については、<xref linkend="sec.y2.userman.defaults"/>を参照してください。
  </para>

  <procedure>
   <title>ユーザのグループ割り当てを変更する</title>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>ユーザ</guimenu>タブをクリックします。ユーザ、およびユーザが属するグループが一覧にされます。
    </para>
   </step>
   <step>
    <para>
     <guimenu>編集</guimenu>をクリックし、<guimenu>詳細</guimenu>タブに切り替えます。
    </para>
   </step>
   <step>
    <para>
     ユーザが属するプライマリグループを変更するには、<guimenu>デフォルトグループ</guimenu>をクリックし、リストからグループを選択します。
    </para>
   </step>
   <step>
    <para>
     追加のセカンダリグループをユーザに割り当てるには、<guimenu>追加のグループ</guimenu>のリストで対応するチェックボックスをオンにします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、変更を適用します。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。
    </para>
    <para>
     また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存する場合は、<menuchoice> <guimenu>エキスパート用オプション</guimenu> <guimenu>Write Changes Now (今すぐ変更を書き込み)</guimenu> </menuchoice>の順にクリックします。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.y2.userman.groups">
  <title>グループを管理する</title><indexterm>

  <primary>グループ</primary>

  <secondary>管理</secondary></indexterm><indexterm>

  <primary>YaST</primary>

  <secondary>グループ管理</secondary></indexterm><indexterm>

  <primary>設定</primary>

  <secondary>グループ</secondary></indexterm>

  <para>
   YaSTでは、グループの追加、変更、または削除も容易に実行できます。
  </para>

  <procedure>
   <title>グループを作成および変更する</title>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>グループ</guimenu>タブをクリックします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>フィルタを設定</guimenu>では、管理するグループセットを定義します。ダイアログに、システム内のグループが一覧にされます。
    </para>
   </step>
   <step>
    <para>
     新しいグループを追加するには、<guimenu>追加</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     既存のグループを変更するには、グループを選択して<guimenu>編集</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     次のダイアログで、データを入力または変更します。右のリストでは、グループのメンバになることができる利用可能なすべてのユーザおよびシステムユーザの概要が表示されます。
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_groups_edit_gtk.png" width="80%" format="PNG" os="sles;sled"/>
       
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_groups_edit_gtk.png" width="75%" format="PNG" os="sles;sled"/>
       
      </imageobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     新しいグループに既存のユーザを追加するには、選択可能な<guimenu>グループのメンバー</guimenu>のリストで、該当するボックスをオンにして選択します。既存のユーザをグループから削除するには、このボックスをオフにします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、変更を適用します。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。
    </para>
    <para>
     また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存する場合は、<menuchoice> <guimenu>エキスパート用オプション</guimenu> <guimenu>Write Changes Now (今すぐ変更を書き込み)</guimenu> </menuchoice>の順にクリックします。
    </para>
   </step>
  </procedure>

  <para>
   グループを削除するには、すべてのグループメンバーを削除する必要があります。グループを削除するには、リストからグループを選択し、<guimenu>削除</guimenu>をクリックします。<guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存する場合は、<menuchoice>
   <guimenu>エキスパート用オプション</guimenu> <guimenu>Write Changes Now (今すぐ変更を書き込み)</guimenu>
   </menuchoice>の順にクリックします。
  </para>
 </sect1>
 <sect1 xml:id="cha.y2.userman.authent">
  <title>ユーザ認証方法を変更する</title><indexterm>

  <primary> ユーザ</primary>

  <secondary> 認証</secondary></indexterm> 

  <para>
   マシンがネットワークに接続されている場合は認証方法を変更できます。次のオプションを指定できます。
  </para>

  <variablelist>
   <varlistentry>
    <term>NIS</term>
    <listitem>
     <para>
      ユーザはネットワーク上のすべてのシステムに対し、1台のNISサーバ上で集中的に管理されます。詳細については、<xref linkend="cha.nis"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>LDAP</term>
    <listitem>
     <para>
      ユーザはネットワーク上のすべてのシステムに対し、1台のLDAPサーバ上で集中的に管理されます。LDAPの詳細については、<xref linkend="cha.security.ldap"/>を参照してください。
     </para>
     <para>
      YaSTのユーザモジュールでLDAPユーザを管理できます。LDAPユーザのデフォルト設定など、他のすべてのLDAP設定は、<phrase os="sles;osuse"><xref linkend="sec.security.auth.yast.client"/></phrase>の説明に従って、YaSTのLDAPクライアントモジュールで定義する必要があります。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Kerberos</term>
    <listitem>
     <para>
      Kerberosを使用すると、ユーザは1回登録するだけで、以降のセッションに関してネットワーク全体に渡って認証されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Samba</term>
    <listitem>
     <para>
      SMB認証は、通常、LinuxとWindowsが混在するネットワークで使用されます。詳細については、<xref linkend="cha.samba"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   認証方法を変更するには、以下の手順に従ってください。
  </para>

  <procedure>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開きます。
    </para>
   </step>
   <step>
    <para>
     <guimenu>Authentication Settings</guimenu>タブをクリックすると、利用可能な認証方法と現在の設定の概要が表示されます。
    </para>
   </step>
   <step>
    <para>
     認証方法を変更するには、<guimenu>設定</guimenu>をクリックし、変更する認証方法を選択します。これにより、YaSTのクライアント設定モジュールに直接切り替わります。適切なクライアントの設定について詳細は、次のセクションを参照してください。
    </para>
    <formalpara>
     <title>NIS:</title>
     <para>
      <xref linkend="sec.nis.client"/>
     </para>
    </formalpara>
    <formalpara>
     <title>LDAP:</title>
     <para>
      <phrase os="sles;osuse"><xref linkend="sec.security.auth.yast.client"/></phrase>
     </para>
    </formalpara>

    <formalpara>
     <title>Samba:</title>
     <para>
      <xref linkend="sec.samba.client.inst.yast"/>
     </para>
    </formalpara>

   </step>
   <step>
    <para>
     この設定を確認した後、<guimenu>ユーザとグループの管理</guimenu>の概要に戻ります。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じます。
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
