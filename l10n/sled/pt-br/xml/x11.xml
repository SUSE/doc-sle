<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="x11.xml" version="5.0" xml:id="cha-gui-desktop">
 <title>Interface gráfica do usuário</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    O <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> inclui o servidor X.org<phrase os="sled;osuse">, o Wayland</phrase> e a área de trabalho do GNOME. Este capítulo descreve a configuração da interface gráfica do usuário para todos os usuários.
   </para>
  </abstract>
 </info>
 <sect1 xml:id="sec-gui-desktop-xorg">
  <title>Sistema X Window</title>
  <para>
   O servidor X.org é o padrão de fato para implementação do protocolo X11. O X é baseado em rede, permitindo que aplicativos iniciados em um host sejam exibidos em outro host conectado em qualquer tipo de rede (LAN ou Internet).
  </para>
  <para>
   O X Window System não precisa de configuração na maioria dos casos. O hardware é detectado dinamicamente durante a inicialização do X. Portanto, o uso do <filename>xorg.conf</filename> foi descontinuado. Se você ainda tiver que especificar opções personalizadas para mudar o comportamento do X, poderá modificar os arquivos de configuração em <filename>/etc/X11/xorg.conf.d/</filename>.
  </para>
  <para os="sled;osuse">
   No <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP7</phrase></phrase>, o Wayland está incluído como uma alternativa ao servidor X.org. É possível selecioná-lo durante a instalação.
  </para>
  
  <para>
   Instale o pacote <systemitem class="resource">xorg-docs</systemitem> para obter informações mais detalhadas sobre o X11. O <command>man 5 xorg.conf</command> inclui mais informações sobre o formato da configuração manual (se necessário). Há mais informações sobre o desenvolvimento do X11 na home page do projeto em <link xlink:href="https://www.x.org"></link>.
  </para>

  <para>
   Os drivers estão nos pacotes <systemitem>xf86-video-*</systemitem>, por exemplo, <systemitem>xf86-video-ati</systemitem>. Muitos dos drivers incluídos nesses pacotes estão descritos em detalhes na página de manual relacionada. Por exemplo, se você usa o driver <literal>ati</literal>, encontra mais informações sobre ele em <command>man 4 ati</command>.
  </para>

  <para>
   Há informações sobre drivers de terceiros disponíveis em <filename>/usr/share/doc/packages/&lt;package_name&gt;</filename>. Por exemplo, a documentação do <systemitem class="resource">x11-video-nvidiaG03</systemitem> estará disponível em <filename>/usr/share/doc/packages/x11-video-nvidiaG04</filename> após a instalação do pacote.
  </para>

  <para>
   Instale o pacote <systemitem class="resource">xrdp</systemitem> em um servidor e use o software cliente RDP para acessar o servidor por meio do protocolo de área de trabalho remota.
  </para>

 </sect1>
 <xi:include href="x11_fonts.xml"/>
 <sect1 xml:id="sec-gui-desktop-gnome">
  <title>Configuração do GNOME para administradores</title>

  <sect2 xml:id="sec-gui-desktop-gnome-dconf">
   <title>O sistema <literal>dconf</literal></title>

   <para>
    da área de trabalho do GNOME é gerenciada com <literal>dconf</literal>. Trata-se de um banco de dados hierarquicamente estruturado ou um registro que permite que os usuários modifiquem suas configurações pessoais e os administradores de sistema definam valores padrão ou obrigatórios para todos os usuários. O <literal>dconf</literal> substitui o sistema <literal>gconf</literal> do GNOME 2.
   </para>

   <para>
    Use o <command>dconf-editor</command> para ver as opções do <literal>dconf</literal> com uma interface gráfica do usuário. Use o <command>dconf</command> para acessar e modificar as opções de configuração com a linha de comando.
   </para>

   <para>
    A ferramenta <literal>Tweaks</literal> do GNOME oferece uma interface do usuário fácil de usar para opções de configuração adicionais, além da configuração normal do GNOME. A ferramenta pode ser iniciada no menu de aplicativos do GNOME ou por linha de comando com <command>gnome-tweak-tool</command>.
   </para>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-gnome-global">
   <title>Configuração de todo o sistema</title>
   <para>
    É possível definir os parâmetros globais de configuração do <literal>dconf</literal> no diretório <filename>/etc/dconf/db/</filename>. Isso inclui a configuração do GDM ou o bloqueio de determinadas opções de configuração para os usuários.
   </para>
   <para>
    Siga o procedimento abaixo como exemplo para criar uma configuração de todo o sistema:
   </para>
   <procedure>
    <step>
     <para>
      Crie um novo diretório que termine com <literal>.d</literal> em <filename>/etc/dconf/db/</filename>. Esse diretório pode conter uma quantidade arbitrária de arquivos de texto com opções de configuração. Para este exemplo, crie o arquivo <filename>/etc/dconf/db/network.d/00-proxy</filename>  com o seguinte conteúdo:
     </para>
     <screen># This is a comment
[system/proxy/http]
host='10.0.0.1'
enabled=true</screen>
    </step>
    <step>
     <para>
      Analise as novas diretivas de configuração em relação ao formato de banco de dados dconf:
     </para>
     <screen><prompt>&gt; </prompt><command>sudo</command> <command>dconf update</command></screen>
    </step>
    <step>
     <para>
      Adicione o novo banco de dados de configuração de <literal>network</literal> ao perfil de usuário padrão criando o arquivo <filename>/etc/dconf/profile/user</filename>. Em seguida, adicione o conteúdo abaixo:
     </para>
     <screen>system-db:network</screen>
     <para>
      O arquivo <filename>/etc/dconf/profile/user</filename> é um padrão do GNOME. Outros perfis podem ser definidos na variável de ambiente <literal>DCONF_PROFILE</literal>.
     </para>
    </step>
    <step>
     <para>
      Opcional: para bloquear a configuração de proxy aos usuários, crie o arquivo <filename>/etc/dconf/db/network/locks/proxy</filename>. Em seguida, adicione uma linha a esse arquivo com as chaves que não podem ser mudadas:
     </para>
     <screen>/system/proxy/http/host
/system/proxy/http/enabled</screen>
    </step>
   </procedure>
   <para>
    Você pode usar o <command>dconf-editor</command> gráfico para criar um perfil com um usuário e, em seguida, usar <command>dconf dump /</command> para listar todas as opções de configuração. Depois disso, as opções de configuração poderão ser armazenadas em um perfil global.
   </para>
   <para>
    Uma descrição detalhada da configuração global está disponível em <link xlink:href="https://wiki.gnome.org/Projects/dconf/SystemAdministrators"></link>.
   </para>
  </sect2>
  <sect2 xml:id="sec-gui-desktop-gnome-gtile" os="sled">
    <title>Gerenciando janelas lado a lado no Wayland</title>
    <para>
      Se você executa a área de trabalho do GNOME no Wayland e deseja que as janelas sejam organizadas lado a lado, recomendamos o uso da extensão <emphasis>gTile</emphasis> para GNOME, que permite reorganizar as janelas com base em um esquema de grade configurável. Por exemplo, você pode iniciar seis terminais e organizá-los em 3 linhas e 2 colunas para que usem toda a área de trabalho.
    </para>
    <sect3>
      <title>Instalando o gTile</title>
      <important>
        <para>
          Para usar a extensão gTile para GNOME, você precisa executar a área de trabalho do GNOME e ter o pacote <package>chrome-gnome-shell</package> (para <phrase role="productname"><phrase os="sled">SLED</phrase></phrase> 15 SP4 e mais antigo) ou <package>gnome-browser-connector</package> (para <phrase role="productname"><phrase os="sled">SLED</phrase></phrase> 15 SP5 e mais recente) instalado.
        </para>
      </important>
      <procedure>
        <step>
          <para>
            Aponte o browser para a página da Web da extensão gTile <link xlink:href="https://extensions.gnome.org/extension/28/gtile/"></link>. Se aparecer um aviso sobre uma extensão de browser ausente, clique no link e siga as instruções do browser da Web sobre como instalar e habilitar a extensão para GNOME Shell.
          </para>
          <figure>
            <title>Aviso sobre uma extensão para GNOME Shell ausente</title>
            <mediaobject>
              <imageobject role="fo">
                <imagedata fileref="gtile-browser-warning.png" width="75%"/>
              </imageobject>
              <imageobject role="html">
                <imagedata fileref="gtile-browser-warning.png" width="75%"/>
              </imageobject>
              <textobject role="description">
               <phrase>Aviso sobre uma extensão para GNOME Shell ausente</phrase>
              </textobject>
            </mediaobject>
          </figure>
        </step>
        <step>
          <para>
            Após a instalação da extensão para GNOME Shell no browser da Web, você verá um botão <guimenu>OFF</guimenu> (DESATIVADO) na parte superior direita da página da Web do gTile. Para ativar a extensão gTile, clique no botão para alterná-lo para <guimenu>ON</guimenu> (ATIVADO).
          </para>
          <figure>
            <title>Extensão gTile para GNOME ativada</title>
            <mediaobject>
              <imageobject role="fo">
                <imagedata fileref="gtile-extension-on.png" width="75%"/>
              </imageobject>
              <imageobject role="html">
                <imagedata fileref="gtile-extension-on.png" width="75%"/>
              </imageobject>
              <textobject role="description"><phrase>Extensão gTile para GNOME ativada</phrase>
              </textobject>
            </mediaobject>
          </figure>
        </step>
        <step>
          <para>
            Um ícone de bandeja do gTile aparece na bandeja do GNOME ao lado direito do painel do GNOME. Você pode usá-lo para ativar os layouts de janela do gTile.
          </para>
          <figure>
            <title>Ícone de bandeja do gTile</title>
            <mediaobject>
              <imageobject role="fo">
                <imagedata fileref="gtile-tray-icon.png" width="75%"/>
              </imageobject>
              <imageobject role="html">
                <imagedata fileref="gtile-tray-icon.png" width="75%"/>
              </imageobject>
              <textobject role="description"><phrase>Ícone de bandeja do gTile</phrase>
              </textobject>
            </mediaobject>
          </figure>
        </step>
      </procedure>
    </sect3>
    <sect3>
      <title>Trabalhando com a extensão gTile</title>
      <procedure>
        <title>Organizando as janelas</title>
        <step>
          <para>
            Para abrir o gTile com a janela em foco atual, pressione <keycombo><keycap function="meta"></keycap><keycap function="enter"></keycap></keycombo>.
          </para>
        </step>
        <step>
          <para>
            Para definir o número de colunas em que as janelas serão organizadas, pressione uma tecla numérica.
          </para>
        </step>
        <step>
          <para>
            Para organizar as janelas lado a lado automaticamente de acordo com a configuração <guimenu>Autotile Main window sizes</guimenu> (Organizar automaticamente tamanhos de janela principal lado a lado), pressione a tecla <keycap>M</keycap>. Por padrão, na primeira vez que você pressionar a tecla <keycap>M</keycap>, a janela atual usará metade da tela, e todas as outras janelas serão colocadas lado a lado em uma coluna na outra metade da tela. Você pode pressionar <keycap>M</keycap> várias vezes para alternar entre as variantes. Isso é útil para manter uma janela principal grande e várias janelas secundárias menores.
          </para>
        </step>
        <step>
          <para>
           Para mover a janela atual para dentro da estrutura lado a lado predefinida da tela, use as teclas de seta.
          </para>
          <para>
            Para reduzir ou aumentar o número de blocos que a janela ocupa, use <keycap function="shift"></keycap> e uma tecla de seta.
          </para>
        </step>
        <step>
          <para>
            Para ajustar uma janela às bordas das janelas vizinhas e da área de trabalho, pressione <keycombo><keycap function="control"></keycap><keycap function="alt"></keycap><keycap>S</keycap></keycombo>.
          </para>
        </step>
        <step>
          <para>
            Para fechar a janela do gTile, pressione <keycap function="escape"></keycap>.
          </para>
        </step>
      </procedure>
      <procedure>
        <title>Configuração avançada</title>
        <step>
          <para>
            Para abrir as configurações do gTile, execute o seguinte comando: <command>gnome-extensions-app</command>.
          </para>
        </step>
        <step>
          <para>
            Selecione o gTile e clique em <guimenu>Configurações</guimenu>.
          </para>
        </step>
        <step>
          <para>
           Defina uma predefinição e uma combinação de teclas para alternar facilmente entre os layouts de janela usados com frequência.
          </para>
          <para>
            Para obter mais detalhes de como configurar a extensão gTile, consulte <link xlink:href="https://github.com/gTile/gTile"></link>.
          </para>
        </step>
      </procedure>
    </sect3>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-gnome-more-info">
   <title>Mais informações</title>
   <para>
    Para obter mais informações, consulte <link xlink:href="https://help.gnome.org/admin/"></link>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-gui-desktop-suse-prime">
  <title>Alternando entre as GPUs Intel e NVIDIA Optimus com o SUSE Prime</title>
  <para>
   O SUSE Prime é uma ferramenta para alternar entre as unidades de processamento gráfico (GPUs, Graphical Processing Units) Intel e NVIDIA equipadas com a tecnologia de gráficos alternáveis Optimus da NVIDIA. O Optimus fornece um mecanismo para alternar facilmente entre uma GPU Intel integrada e uma GPU NVIDIA discreta. Ele foi projetado para executar um laptop no modo de economia de energia ou com desempenho máximo: use a GPU Intel para economizar energia e a GPU NVIDIA para aplicativos 3D.
  </para>

  <para os="sled">
   O SUSE Prime faz parte da SUSE Linux Enterprise Workstation Extension para SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP7</phrase></phrase>.
  </para>

  <para>
   O SUSE Prime funciona apenas em sistemas com o X11, não o Wayland. Se o seu sistema executa o Wayland, você deve desabilitá-lo e fazer fallback para o X11 para usar o SUSE Prime (consulte a <xref linkend="sec-gui-desktop-suse-prime-prereqs"/>).
  </para>

  <sect2 xml:id="sec-gui-desktop-suse-prime-prereqs">
   <title>Pré-requisitos</title>
    
   
   <para os="sle;sled">
    Você deve ter uma GPU NVIDIA Optimus configurada e operacional usando os drivers NVIDIA incluídos no SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP7</phrase></phrase> (consulte a <xref linkend="sec-gui-desktop-install-nvidia"/>) e uma GPU Intel integrada. O Bumblebee, a ferramenta de comutação mais antiga do NVIDIA Optimus, não deve ser instalado.
   </para>
   
   <para>
    Não deve haver um arquivo <filename>/etc/X11/xorg.conf</filename> e nenhum arquivo de configuração com as seções ativas <literal>ServerLayout</literal>, <literal>Device</literal> ou <literal>Screen</literal> no diretório <filename>/etc/X11/xorg.conf.d</filename>.
   </para>
   <para>
    O SUSE Prime funciona apenas com o X11. Use o comando <command>loginctl</command> para verificar se o seu sistema usa o X11 ou o Wayland:
   </para>
<screen><prompt>&gt; </prompt>loginctl
   SESSION        UID USER             SEAT             TTY             
         2       1000 tux             seat0               
<prompt>&gt; </prompt>loginctl show-session 2|grep Type
Type=x11
</screen>
   <para>
    Se o seu sistema usa o Wayland, desabilite-o editando o <filename>/etc/gdm/custom.conf</filename> e removendo o comentário de <literal>WaylandEnable=false</literal>. Em seguida, reinicialize-o.
   </para>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-suse-prime-install">
   <title>Instalando e usando o SUSE Prime</title>

    <para>
      Sua placa de vídeo NVIDIA já deve estar instalada e funcionando. Se não estiver, consulte a <xref linkend="sec-gui-desktop-install-nvidia"/>. 
    </para>

   <para>
       Instale o pacote <package>suse-prime</package>:
   </para>
       <screen><prompt>&gt; </prompt><command>sudo</command> zypper install suse-prime</screen>
     
   <para>
    Para alternar a GPU, execute um dos seguintes comandos, depois efetue logout e login novamente:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> prime-select intel
<prompt>&gt; </prompt><command>sudo</command> prime-select intel2
<prompt>&gt; </prompt><command>sudo</command> prime-select nvidia
</screen>
   <para>
    Use o <command>intel</command> quando se tratar do driver modesetting. O <command>intel2</command> é para sistemas que usam o driver <package>xf86-video-intel</package>. Você pode obter essas informações instalando e executando <package>inxi</package>:
   </para>
<screen><prompt>&gt; </prompt>inxi -G
Graphics: Device-1: Intel Xeon E3-1200 v3/4th Gen Core Processor Integrated Graphics Controller
          Display Server: x11(X.org 1.20.1 ) drivers: modesetting (unloaded: fbdev, vesa)
          Resolution: 1920x1080@60.00hz
          OpenGL: renderer: Mesa DRI Intel Haswell Desktop version: 4.5 Mesa 18.2.8
      </screen>
   <para>
    Qual GPU está ativa no momento?
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> /usr/sbin/prime-select get-current
Driver configured: intel
</screen>
  </sect2>

  <sect2 xml:id="sec-gui-desktop-install-nvidia">
   <title>Instalando drivers NVIDIA</title>
   <para>
    Se você precisa identificar sua placa NVIDIA para saber qual driver usar, execute o seguinte comando:
</para>
   
<screen><prompt>&gt; </prompt>/sbin/lspci | grep VGA  
</screen>
   
      <para os="sles;sled">
    Siga estas etapas para instalar os drivers com o Zypper.
   </para>

   

   <para>
    Liste os pacotes de driver disponíveis:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> zypper se nvidia
</screen>
   <para>
    Em seguida, instale os drivers para sua placa de vídeo NVIDIA:
   </para>
<screen><prompt>&gt; </prompt><command>sudo</command> zypper se <replaceable>packagename</replaceable>
</screen>
  </sect2>
 </sect1>
</chapter>
