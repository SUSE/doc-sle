<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_you.xml" version="5.0" xml:id="cha-onlineupdate-you">
 <title>YaST 線上更新</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  SUSE 為您的產品提供持續的軟體安全性更新。預設使用更新小程式來確保系統處於最新狀態。如需有關更新 Applet 的詳細資訊，請參閱<xref linkend="sec-updater"/>。本章介紹了用於更新軟體套件的替代工具：YaST 線上更新。
 </para>
 <para>
  可從更新軟體儲存庫中取得適用於 <phrase role="productname"><phrase os="sled">SUSE® Linux Enterprise Desktop</phrase></phrase> 的最新修補程式。<phrase os="sles;sled">如果在安裝期間已註冊了產品，則表明已設定更新儲存庫。如果您尚未註冊 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>，可在 YaST 中啟動<guimenu>產品註冊</guimenu>來完成註冊。</phrase>或者，您可以從信任的來源手動新增更新儲存庫。若要新增或移除儲存庫，請透過 YaST 中的「<menuchoice> <guimenu>軟體</guimenu>
  <guimenu> 軟體儲存庫</guimenu> </menuchoice>」啟動儲存庫管理員。<xref linkend="sec-yast-software-instsource"/> 中提供了有關儲存庫管理員的詳細資訊。
 </para>
 <note os="sles;sled">
  <title>存取更新目錄時發生錯誤</title>
  <para>
   如果您無法存取更新目錄，原因可能是訂閱已過期。<phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 通常隨附一年或三年的訂閱，在此期間，您可以存取更新目錄。訂閱期結束後，對更新目錄的存取將被拒絕。
  </para>
  <para>
   如果存取更新目錄時遭到拒絕，系統將顯示一則警告訊息，提示您造訪 SUSE Customer Center 以查看您的訂閱。SUSE Customer Center 的網址為 <link xlink:href="https://scc.suse.com//"/>。
  </para>
 </note>
 <note os="sles;sled">
 <title>用於接收更新的防火牆設定</title>
 <para>
  <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 上的防火牆預設僅封鎖內送連接。如果系統受到會封鎖外送流量的另一個防火牆的保護，請務必允許透過連接埠 80 和 443 連接至 <link xlink:href="https://scc.suse.com/"/> 和 <link xlink:href="https://updates.suse.com"/>，以便接收更新。
 </para>
</note>
 <para>
  SUSE 提供了具有不同關聯層級的更新：
 </para>
 <variablelist>
  <varlistentry>
   <term>安全性更新</term>
   <listitem>
    <para>
     修復嚴重的安全性問題，必須予以安裝。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>推薦更新</term>
   <listitem>
    <para>
     修復可能會破壞電腦的問題。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>選擇性更新</term>
   <listitem>
    <para>
     修復與安全性無關的問題或提供增強功能。
    </para>
   </listitem>
  </varlistentry>
 </variablelist>
 <sect1 xml:id="sec-onlineupdate-you-overview">
  <title>線上更新對話方塊</title>

  <para>
   若要開啟 YaST <guimenu>線上更新</guimenu>對話方塊，請啟動 YaST 並選取<menuchoice> <guimenu>軟體</guimenu> <guimenu>線上更新</guimenu> </menuchoice>。或者，也可以在指令行中使用 <command>yast2 online_update</command> 指令進行啟動。
  </para>

  <para>
   「<guimenu>線上更新</guimenu>」視窗包含四個區段。
  </para>

  <figure>
   <title>YaST 線上更新</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_you.png" width="75%" os="sles;sled"/>
     
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_you.png" width="75%" os="sles;sled"/>
     
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   左側的「<guimenu>摘要</guimenu>」區段列出了 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 可用的修補程式。修補程式根據安全性關聯程度 (<literal>安全性</literal>、<literal>建議</literal>和<literal>選擇性</literal>) 進行排序。您可以從<guimenu>「顯示修補程式類別」</guimenu>中選取以下其中一個選項，以變更<guimenu>「摘要」</guimenu>區段的檢視窗：
  </para>

  <variablelist>
   <varlistentry>
    <term><guimenu>需要的修補程式</guimenu> (預設檢視窗)</term>
    <listitem>
     <para>
      適用於系統上安裝的套件，但尚未安裝的修補程式。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>不需要的修補程式</guimenu>
    </term>
    <listitem>
     <para>
      適用於系統上未安裝之套件的修補程式，或已滿足其執行要求的修補程式 (相關套件已從其他來源進行更新)。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>所有修補程式</guimenu>
    </term>
    <listitem>
     <para>
      <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 的所有可用修補程式。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   <guimenu>「摘要」</guimenu>區段中的每個清單項目包含一個符號和修補程式名稱。有關可用符號及其含義的綜覽，請按 <keycombo> <keycap function="shift"/> <keycap>F1</keycap>
   </keycombo>。「<literal>安全性</literal>」和「<literal>建議</literal>」狀態的修補程式所要求的動作已自動預設。這些動作包括「<guimenu>自動安裝</guimenu>」、「<guimenu>自動更新</guimenu>」和「<guimenu>自動刪除</guimenu>」。
  </para>

  <para>
   如果從更新儲存庫以外的其他儲存庫安裝最新的套件，則可以使用此安裝來滿足此套件之修補程式的需求。在此情況下，會有一個核取標記顯示在修補程式摘要的前面。僅當您將修補程式標示為已安裝時，該修補程式才會顯示在清單中。這實際上不會安裝修補程式 (因為該套件已經是最新的)，而是將該修補程式標示為已安裝。
  </para>

  <para>
   在<guimenu>「摘要」</guimenu>區段中選取一個項目，可在對話方塊的左下角看到簡短的<guimenu>「修補程式描述」</guimenu>。右上方的區段列出了所選修補程式中包含的套件 (一個修補程式可以包含多個套件)。按一下右上方區段中的項目，可檢視修補程式中包含的各套件的詳細資料。
  </para>
 </sect1>
 <sect1 xml:id="sec-onlineupdate-you-install">
  <title>安裝修補程式</title>

  <para>
   在 YaST 的「連接更新」對話方塊中，您可以一次性安裝所有可用的修補程式，也可以手動選取所需的修補程式。您還可以回復已套用至系統的修補程式。
  </para>

  <para>
   依預設，目前您系統可用的所有新修補程式 (<literal>選擇性</literal>修補程式除外) 均已標示為可供安裝。按一下<guimenu>「接受」</guimenu>或<guimenu>「套用」</guimenu>後，這些修補程式將自動套用。如果一或多個修補程式需要將系統重新開機，則在開始安裝修補程式之前，系統會發出相關通知。此時，您可以選擇繼續安裝所選修補程式、跳過需要重新開機之所有修補程式的安裝並安裝剩餘的修補程式，或者返回修補程式手動選擇畫面。
  </para>

  <procedure>
   <title>使用 YaST 線上更新套用修補程式</title>
   <step>
    <para>
     啟動 YaST，然後選取「<menuchoice> <guimenu>軟體</guimenu>
     <guimenu> 線上更新</guimenu> </menuchoice>」。
    </para>
   </step>
   <step>
    <para>
     若要自動套用目前您系統可用的所有新修補程式 (<literal>選擇性</literal>修補程式除外)，請按一下<guimenu>套用</guimenu>或<guimenu>接受</guimenu>。
    </para>
   </step>
   <step>
    <para>
     首先修改要套用的修補程式選擇：
    </para>
    <substeps performance="required">
     <step>
      <para>
       使用介面提供的相應過濾器和檢視窗。如需詳細資訊，請參閱<xref linkend="sec-onlineupdate-you-overview"/>。
      </para>
     </step>
     <step>
      <para>
       根據您的需求和意愿選取或取消選取修補程式，方法是在修補程式上按一下滑鼠右鍵，然後從內容功能表中選擇相應的動作。
      </para>
      <important>
       <title>始終套用安全性更新</title>
       <para>
        除非很有必要，否則請不要取消選取任何<literal>安全性</literal>相關的修補程式。因為這些修補程式負責修復嚴重的安全性問題，可防止您的系統被入侵。
       </para>
      </important>
     </step>
     <step>
      <para>
       大部分的修補程式都會包含多套件的更新。若要變更對單一套件執行的動作，請在套件檢視中的某個套件上按一下滑鼠右鍵，然後選擇一項動作。
      </para>
     </step>
     <step>
      <para>
       若要確認您的選擇並套用所選修補程式，請按一下「<guimenu>套用</guimenu>」或「<guimenu>接受</guimenu>」繼續。
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     安裝完成後，請按一下「<guimenu>完成</guimenu>」離開 YaST「<guimenu>線上更新</guimenu>」。您的系統現在已是最新狀態。
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 xml:id="sec-onlineupdate-retracted-patches">
  <title>檢視已收回的修補程式</title> 
  
  <para>
    維護更新會經過仔細測試，以最大限度地降低引入錯誤的風險。如果發現某個修補程式包含錯誤，將會自動收回該修補程式。會發佈一個新的更新 (版本號碼更高) 以回復有錯誤的修補程式，並會阻止再次安裝該修補程式。可以在<guimenu>套件分類</guimenu>索引標籤上查看已收回的修補程式及其歷程。
  </para>
  <figure>
   <title>檢視已收回的修補程式和歷程</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_retracted_patches.png" width="75%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_retracted_patches.png" width="75%"/>
    </imageobject>
   </mediaobject>
  </figure>  
</sect1>

 <sect1 xml:id="sec-onlineupdate-you-automatically">
  <title>自動線上更新</title>

  <para>
   您可以使用 YaST 設定每日、每週或每月的自動更新。安裝 <systemitem class="resource">yast2-online-update-configuration</systemitem> 套件。
  </para>

  <para>
   依預設更新將下載為增量 RPM。由於透過增量 RPM 重建 RPM 套件需要佔用大量記憶體和處理器資源，出於效能考量，某些設定或硬體組態可能要求您停用增量 RPM。
  </para>

  <para>
   某些修補程式 (例如核心更新或需要授權合約的套件) 需要使用者互動，而這可能會讓自動更新程序停止下來。您可以設定跳過需要使用者互動的修補程式。
  </para>
  
  <para>
      使用 YaST <guimenu>軟體</guimenu>模組中的<guimenu>修補程式</guimenu>索引標籤，可以查看可用的及已安裝的修補程式，包括錯誤報告和 CVE 公告的參考。
  </para>

  <procedure>
   <title>設定自動線上更新</title>
   <step>
    <para>
     安裝後，啟動 YaST 並選取<menuchoice>
     <guimenu>軟體</guimenu> <guimenu>線上更新</guimenu>
     </menuchoice>。選擇<menuchoice><guimenu>組態</guimenu>
     <guimenu>線上更新</guimenu></menuchoice>。如果未安裝 <package>yast2-online-update-configuration</package>，系統將提示您加以安裝。
    </para>
      <figure>
   <title>YaST 線上更新組態</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_autoupdate.png" width="75%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_autoupdate.png" width="75%"/>
    </imageobject>
   </mediaobject>
  </figure>
    <para>
     您也可以在指令行中使用 <command>yast2 online_update_configuration</command> 指令啟動模組。
    </para>
    
   </step>
   <step>
    <para>
     選擇更新間隔：「<guimenu>每日</guimenu>」、「<guimenu>每週</guimenu>」或「<guimenu>每月</guimenu>」。
    </para>
   </step>
   <step>
    <para>
     有時，修補程式可能需要引起管理員的注意，例如，在重新啟動關鍵服務時。而此修補程式可能是適用於 Docker 開放原始碼引擎的更新，執行此更新需要重新啟動所有容器。在安裝修補程式之前，系統會向使用者告知此操作的後果，並要求他們確認是否要安裝此修補程式。此類修補程式稱為<quote>互動式修補程式</quote>。
    </para>
    <para>
     自動安裝修補程式時，系統會假設您已確認要安裝互動式修補程式。如果您希望在安裝之前先檢查這些修補程式，請選取<guimenu>跳過互動式修補程式</guimenu>。在這種情況下，自動修補期間會跳過互動式修補程式。請確定週期性地執行手動線上更新，以檢查是否有互動式修補程式等待安裝。
    </para>
   </step>
   <step>
    <para>
     若要自動接受所有授權合約，請啟用<guimenu>「同意授權」</guimenu>。
    </para>
   </step>
   <step>
    <para>
     若要自動安裝已更新套件推薦的所有套件，請啟用「<guimenu>包含推薦的套件</guimenu>」。
    </para>
   </step>

   <step>
    <para>
     若要停用增量 RPM (出於效能方面的考慮)，請取消核取<guimenu>使用增量 RPM</guimenu>。
    </para>
   </step>
   <step>
    <para>
     若要根據類別 (例如安全性或推薦) 過濾修補程式，請核取<guimenu>根據類別過濾</guimenu>，並新增清單中的相應修補程式類別。系統將會只安裝所選類別的修補程式，合理的實務是僅啟用自動<guimenu>安全</guimenu>更新，並手動查看所有其他更新。修補通常比較可靠，但您可能還想測試非安全性修補程式，並在遇到任何問題時進行復原。 
    </para>
    <itemizedlist>
        <listitem>
            <para><guimenu>Packagemanager 和 YaST</guimenu> 提供的修補程式用於套件管理以及 YaST 功能和模組。
            </para>
        </listitem>
        <listitem>
            <para><guimenu>安全性</guimenu>修補程式提供重要的更新和錯誤修復。
            </para>
        </listitem>
        <listitem>
            <para><guimenu>推薦</guimenu>修補程式提供選擇性的錯誤修復和增強功能。
            </para>
        </listitem>
        <listitem>
            <para><guimenu>選擇性</guimenu>表示新套件。</para>
        </listitem>
        <listitem>
            <para><guimenu>其他</guimenu>相當於其他修補程式。
                </para>
        </listitem>
        <listitem>
            <para><guimenu>文件</guimenu>不可用。
            </para>
        </listitem>
    </itemizedlist>            
    
   </step>
   <step>
    <para>
     按一下<guimenu>確定</guimenu>確認您的組態。
    </para>
   </step>
  </procedure>

  <para>
   自動線上更新隨後不會自動重新啟動系統。如果套件更新需要重新開機系統才能生效，則您需要手動重新開機。
  </para>
 </sect1>
</chapter>
