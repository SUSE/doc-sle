<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_userman.xml" version="5.0" xml:id="cha-yast-userman">
 <title>YaSTによるユーザの管理</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  インストール時にシステム用のローカルユーザを作成できました。YaSTの<guimenu>ユーザとグループの管理</guimenu>モジュールを使用して、ユーザの追加や既存ユーザの編集が可能です。また、ネットワークサーバでユーザを認証するようにシステムを設定できます。
 </para>
 <sect1 xml:id="sec-yast-userman-main">
  <title>［ユーザとグループの管理］ダイアログ</title>

  <para>
   ユーザまたはグループを管理するには、YaSTを起動し、<menuchoice>
   <guimenu>セキュリティとユーザ</guimenu> <guimenu>ユーザとグループの管理</guimenu> </menuchoice>の順にクリックします。また、コマンドラインから<command>sudo
   yast2 users &amp;</command>を実行することにより、<guimenu>ユーザとグループの管理</guimenu>ダイアログを直接起動します。
  </para>

  <figure xml:id="fig-y2-userman-main">
   <title>YaSTのユーザとグループの管理</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_users_main_qt.png" width="90%" os="sles;sled"/>
     
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_users_main_qt.png" width="70%" os="sles;sled"/>
     
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   各ユーザには、システム全体で使用できるユーザID (UID)が割り当てられます。マシンにログインできるユーザ以外にも、内部での使用のみが目的のさまざまな「システムユーザ」<emphasis></emphasis>が存在します。各ユーザは、1つ以上のグループに割り当てられます。<emphasis>システムユーザ</emphasis>と同様に、内部用途の<emphasis>システムグループ</emphasis>も存在します。
  </para>

  <para>
  メインウィンドウには、表示および変更するために選択するユーザのセット(ローカルユーザ、ネットワークユーザ、システムユーザ)に応じて、いくつかのタブが表示されます。タブでは、次のタスクを実行できます。
  </para>

  <variablelist>
   <varlistentry>
    <term>ユーザアカウントの管理</term>
    <listitem>
     <para>
      <guimenu>ユーザ</guimenu>タブから、<xref linkend="sec-yast-userman-users"/>の説明に従って、ユーザアカウントを作成、変更、削除、または一時的に無効にします。<xref linkend="sec-yast-userman-adv"/>では、パスワードポリシーの強制、暗号化したホームディレクトリの使用、ディスククオータの管理などの高度なオプションについて説明しています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>デフォルト設定の変更</term>
    <listitem>
     <para>
      <guimenu>新しいユーザのデフォルト設定</guimenu>タブで定義された設定に応じて、ローカルユーザアカウントが作成されます。<xref linkend="sec-yast-userman-defaults"/>では、デフォルトのグループ割り当て、またはホームディレクトリのデフォルトパスおよびアクセス許可を変更する方法を説明します。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>グループへのユーザの割り当て</term>
    <listitem>
     <para>
      <xref linkend="sec-yast-userman-assign"/>では、個別ユーザのグループの割り当てを変更する方法を説明します。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>グループを管理する</term>
    <listitem>
     <para>
      <guimenu>グループ</guimenu>タブから、既存のグループの追加、変更、または削除を行うことができます。この方法については、<xref linkend="sec-yast-userman-groups"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>ユーザ認証方法を変更する</term>
    <listitem>
     <para>
      コンピュータがNISやLDAPなどのユーザ認証方法を提供するネットワークに接続されている場合は、<guimenu>認証設定</guimenu>タブで、認証方法を選択できます。詳細については、<xref linkend="sec-yast-userman-authent"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   ユーザとグループの管理用に、このダイアログでは同様の機能が提供されます。ダイアログ上部にある適切なタブを選択することにより、ユーザとグループの管理ビューを簡単に切り替えることができます。
  </para>

  <para>
   ［フィルタ］オプションで、変更するユーザまたはグループのセットを定義できます。<guimenu>ユーザ</guimenu>または<guimenu>グループ</guimenu>タブで、<guimenu>フィルタの設定</guimenu>をクリックすると、ユーザまたはグループを表示および編集できます。該当する場合、<guimenu>ローカルユーザ</guimenu>や<guimenu>LDAPユーザ</guimenu>などの特定のカテゴリに応じて一覧表示されます。<menuchoice> <guimenu>フィルタの設定</guimenu>
   <guimenu>フィルタのカスタマイズ</guimenu> </menuchoice>で、カスタムフィルタをセットアップおよび使用できます。
  </para>

  <para>
   選択したフィルタに応じて、このダイアログから次のオプションおよび機能がすべて利用できるとは限りません。
  </para>
 </sect1>
 <sect1 xml:id="sec-yast-userman-users">
  <title>ユーザアカウントの管理</title>

  <para>
   YaSTでは、ユーザアカウントの作成、変更、削除、または一時的な無効化が可能です。熟練したユーザか管理者でない限り、ユーザアカウントを変更しないでください。
  </para>

  <note>
   <title>既存ユーザのユーザIDを変更する</title>
   <para>
    ファイル所有権はユーザ名ではなくユーザIDにバインドされます。ユーザIDの変更後、この変更に合わせてユーザのホームディレクトリのファイルが自動的に調整されます。ただし、ユーザは、IDの変更後、ファイルシステム内の他の場所で作成したファイルのファイル所有権を失います(それらのファイルの所有権が手動で変更されない限り)。
   </para>
  </note>

  <para>
   次の手順は、デフォルトのユーザアカウントの設定方法を示しています。さらに詳細なオプションについては、<xref linkend="sec-yast-userman-adv"/>を参照してください。
  </para>

  <procedure>
   <title>ユーザアカウントを追加または変更する</title>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>ユーザ</guimenu>タブをクリックします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>フィルタを設定</guimenu>では、管理するユーザセットを定義します。このダイアログには、システムのユーザ、およびユーザが属するグループが一覧にされます。
    </para>
   </step>
   <step>
    <para>
     既存のユーザに対するオプションを変更するには、エントリを選択し、<guimenu>編集</guimenu>をクリックします。
    </para>
    <para>
     新しいユーザアカウントを作成するには、<guimenu>追加</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     (ログインで使用される)<guimenu>ユーザ名</guimenu>および<guimenu>パスワード</guimenu>など、最初のタブで適切なユーザデータを入力します。このデータは、新しいユーザを作成するために十分なものです。<guimenu>OK</guimenu>をクリックすると、システムによって自動的にユーザIDを割り当てられ、他の値はすべてデフォルトに設定されます。
    </para>
   </step>

   <step>
    <para>
     このユーザのメールボックスにシステム通知が配信されるようにする場合は、<guimenu>システムメールの受信</guimenu>を有効にします。これによって<systemitem class="username">root</systemitem>のメールエイリアスが作成され、このユーザは最初に<systemitem class="username">root</systemitem>としてログインしなくてもシステムメールが読めるようになります。
    </para>
    <para>
     システムサービスにより送信されたメールは、ローカルメールボックス<filename>/var/spool/mail/</filename><replaceable>USERNAME</replaceable>に保存されます(<replaceable>USERNAME</replaceable>は選択されたユーザのログイン名)。電子メールを読むには、<command>mail</command>コマンドを使用できます。
    </para>
   </step>
   <step>
    <para>
     ユーザIDまたはユーザのホームディレクトリへのパスなど、さらに詳細な情報を調整するには、<guimenu>詳細</guimenu>タブを使用します。
    </para>
    <para>
     既存のユーザのホームディレクトリを再配置する必要がある場合は、新しいホームディレクトリへのパスを入力し、<guimenu>新しい場所に移動</guimenu>により現在のホームディレクトリの内容を移動します。ホームディレクトリを再配置する必要がない場合は、既存データが存在しなくても新しいホームディレクトリが作成されます。
    </para>
   </step>
   <step>
    <para>
     パスワードを定期的に変更することをユーザに強制するか、他のパスワードオプションを設定するには、<guimenu>パスワードの設定</guimenu>に切り替え、オプションを調整します。詳細については、<xref linkend="sec-yast-userman-adv-passw"/>を参照してください。
    </para>
   </step>
   <step>
    <para>
     すべてのオプションが希望どおりに設定されたら、<guimenu>OK</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。新たに追加されたユーザは、作成済みのログイン名とパスワードを使用してシステムにログインできるようになります。
    </para>
    <para>
     また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存するには、<menuchoice> <guimenu>熟練者向けオプション</guimenu> <guimenu>変更を今すぐ書き込む</guimenu> </menuchoice>の順にクリックします。
    </para>
   </step>
  </procedure>

   
  <warning>
    <title><systemitem class="username">root</systemitem>アカウントの名前を変更しないでください</title>
    <para>
      技術的には<systemitem class="username">root</systemitem>アカウントの名前を変更することは可能ですが、特定のアプリケーション、スクリプト、またはサードパーティ製品は、<systemitem class="username">root</systemitem>というユーザの存在に依存する場合があります。このような設定は常に個々の環境を対象としていますが、必要な調整はベンダの更新によって上書きされる可能性があるため、これは1回限りの設定ではなく、継続的なタスクとなります。これは、サードパーティアプリケーションを含む複雑なセットアップの場合に特に当てはまり、<systemitem class="username">root</systemitem>アカウントの名前変更がサポートされているかどうかを関係するすべてのベンダに確認する必要があります。
    </para>
    <para>
      <systemitem class="username">root</systemitem>アカウントの名前変更による影響は予測できないため、SUSEでは、<systemitem class="username">root</systemitem>アカウントの名前変更はサポートしていません。
    </para>
    <para>
      通常、<systemitem class="username">root</systemitem>アカウントの名前を変更するのは、このアカウントを隠したり、予測できないようにしたりするためです。ただし、<filename>/etc/passwd</filename>は通常のユーザに<literal>644</literal>の許可を要求するため、システムのどのユーザもユーザID 0のログイン名を取得できます。<phrase os="sles;sled;osuse"><systemitem class="username">root</systemitem>アカウントをセキュリティで保護するためのより良い方法については、<xref linkend="sec-sec-prot-restrict-root"/>と<xref linkend="sec-sec-prot-restrict-root-ssh"/>を参照してください。</phrase>
    </para>
  </warning>
  <tip>
   <title>ユーザIDの一致</title>
   <para>
    ネットワーク内でのIDに(ローカル)ユーザIDを一致させると便利です。たとえば、ラップトップの新しい(ローカル)ユーザは、ネットワーク環境に統合する際に同じユーザIDを割り当てる必要があります。これにより、ユーザが<quote>オフライン</quote>で作成するファイルのファイル所有権は、直接ネットワーク上で作成した場合のファイル所有権と同じになります。
   </para>
  </tip>

  <procedure>
   <title>ユーザアカウントを無効化または削除する</title>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>ユーザ</guimenu>タブをクリックします。
    </para>
   </step>
   <step>
    <para>
     ユーザアカウントを削除しないで一時的に無効にするには、リストからユーザを選択し、<guimenu>編集</guimenu>をクリックします。<guimenu>ユーザログインを禁止する</guimenu>を有効にします。ユーザは、アカウントを再び有効にするまで、マシンにログインできません。
    </para>
   </step>
   <step>
    <para>
     ユーザアカウントを削除するには、リストからユーザを選択して、<guimenu>削除</guimenu>をクリックします。ユーザのホームディレクトリを削除するか、またはこのデータを保持するかを選択します。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-yast-userman-adv">
  <title>ユーザアカウントの追加オプション</title>

  <para>
   <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>には、デフォルトユーザアカウントの設定のほか、さまざまなオプションも用意されています。たとえば、パスワードポリシーの強制、暗号化したホームディレクトリの使用、ユーザとグループのディスククオータの定義のためのオプションがあります。
  </para>

  <sect2 xml:id="sec-yast-userman-adv-login">
   <title>自動ログインおよびパスワードレスログイン</title>
   <para>
    GNOMEデスクトップ環境を使用している場合、特定のユーザには「自動ログイン」<emphasis></emphasis>を設定し、すべてのユーザに「パスワードなしのログイン」<emphasis></emphasis>を設定できます。自動ログインでは、ユーザがブート時にデスクトップ環境に自動的にログインします。この機能は、一度に1人のユーザについてのみ有効にできます。パスワードなしのログインでは、どのユーザも、ログインマネージャにユーザ名を入力するだけでシステムにログインできます。
   </para>
   <warning>
    <title>セキュリティリスク</title>
    <para>
     複数のユーザがアクセスできるマシンで<emphasis>自動ログイン</emphasis>または<emphasis>パスワードレスログイン</emphasis>を有効にすることはセキュリティ上のリスクを伴います。どのユーザでもシステムおよびデータにアクセスでき、認証の必要もありません。システムに機密情報などの重要なデータを保管している場合は、この機能は使用しないでください。
    </para>
   </warning>
   <para>
    自動ログインまたはパスワードなしのログインを有効にするには、<menuchoice> <guimenu>熟練者向けオプション</guimenu> <guimenu>ログイン設定</guimenu> </menuchoice>の順に選択し、YaSTの<guimenu>ユーザとグループの管理</guimenu>でこれらの機能にアクセスします。
   </para>
  </sect2>

  <sect2 xml:id="sec-yast-userman-adv-passw">
   <title>パスワードポリシーの強制</title>
   <para>
    複数のユーザが使用するシステムでは、最低限のパスワードセキュリティポリシーを強制することをお勧めします。ユーザに定期的にパスワードを変更させたり、推測しにくいような複雑なパスワードを使用させることができます。ローカルユーザの場合は、次の手順に従います。

   </para>
   <procedure>
    <title>パスワードを設定する</title>
    <step>
     <para>
      YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>ユーザ</guimenu>タブを選択します。
     </para>
    </step>
    <step>
     <para>
      ユーザを選択し、<guimenu>編集</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      <guimenu>パスワードの設定</guimenu>タブに切り替えます。ユーザの最後のパスワード変更がタブに表示されています。
     </para>
    </step>
    <step>
     <para>
      次回のログインでパスワードを変更するようにユーザに強制するには、<guimenu>次のログイン時にパスワード変更を強制する</guimenu>を有効にします。
     </para>
    </step>
    <step>
     <para>
      パスワードのローテーションを強制するには、<guimenu>同じパスワードを使用できる最長日数</guimenu>および<guimenu>同じパスワードを使用する最短日数</guimenu>を設定します。
     </para>
    </step>
    <step>
     <para>
      期限切れになる前にパスワードを変更するようにユーザに通知するには、<guimenu>パスワード失効予告日数</guimenu>に日数を設定します。
     </para>
    </step>
    <step>
     <para>
      パスワードが期限切れになった後ユーザがログインできる期間を制限するには、<guimenu>パスワードの有効期限切れログインを使用できる日数</guimenu>の値を変更します。
     </para>
    </step>
    <step>
     <para>
      また、アカウント全体の特定の有効期限を指定できます。<guimenu>有効期限</guimenu>を<replaceable>YYYY-MM-DD</replaceable>形式で入力します。これはパスワード関連の設定ではなく、アカウント自体に適用されます。
     </para>
    </step>
    <step>
     <para>
      オプションおよびデフォルト値の詳細については、<guimenu>ヘルプ</guimenu>をクリックしてください。
     </para>
    </step>
    <step>
     <para>
      変更内容を反映するには、<guimenu>OK</guimenu>をクリックします。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-yast-userman-adv-quota">
   <title>クォータの管理</title>
   <para>
    システム容量が通知なく枯渇することのないように、システム管理者はユーザまたはグループに対するクオータを設定できます。クオータは、1つ以上のファイルシステムに対して定義されるもので、これにより使用可能なディスク容量および作成可能なiノード(インデックスノード)の数を制限できます。iノードは、通常のファイル、ディレクトリ、または他のファイルシステムオブジェクトに関する基本的な情報を保存するファイルシステム上のデータ構造です。また、ファイル名とコンテンツを除いて、ファイルシステムオブジェクト(ユーザおよびグループの所有権、読み取り、書き込み、または実行のパーミッションなど)のすべての属性を保存します。
   </para>
   <para>
    <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>では、<literal>soft</literal>クォータおよび<literal>hard</literal>クォータを使用できます。さらに、ユーザまたはグループが特定量まで一時的にクオータを超過できる猶予間隔を定義できます。
   </para>
   <variablelist>
    <varlistentry>
     <term>ソフトクォータ</term>
     <listitem>
      <para>
       限界に近づいたときにユーザに通知する警告レベルを定義します。管理者は、パーティションのデータのクリーンアップと削減を行うようにユーザに促す場合があります。通常、ソフトクォータの限界値は、ハードクォータの限界値よりも低くなります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>ハードクォータ</term>
     <listitem>
      <para>
       書き込み要求が拒否される限界を定義します。ハードクォータに達すると、それ以上データを格納することができなくなり、アプリケーションがクラッシュする可能性が高くなります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Grace period (猶予期間)</term>
     <listitem>
      <para>
       ソフトクォータに達してから警告の発行までの時間を定義します。通常、1時間、数時間など小さな値を設定します。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <procedure>
    <title>パーティションのクォータサポートの有効化</title>
    <para>
     特定のユーザおよびグループにクオータを設定するには、YaSTのエキスパートパーティショナで、対応するパーティションのクォータサポートを有効にしておく必要があります。
    </para>
    <note os="sles">
     <title>Btrfsパーティションのクォータ</title>
     <para>

      Btrfsパーティションのクォータの処理は異なります。詳細については、<xref linkend="sec-filesystems-major-btrfs-quota"/>を参照してください。

      <remark>taroth 2014-06-04: todo - after btrfs quotas have been covered in
       the manuals (Storage Guide?), add link - taroth 2014-12-29: done</remark>
     </para>
    </note>
    <step>
     <para>
      YaSTで<menuchoice> <guimenu>システム</guimenu>
      <guimenu>ディスクの分割</guimenu> </menuchoice>の順に選択し、<guimenu>はい</guimenu>をクリックして続行します。
     </para>
    </step>
    <step>
     <para>
      <guimenu>エキスパートパーティショナ</guimenu>で、クオータを有効にするパーティションを選択して、<guimenu>編集</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>

      <guimenu>Fstabオプション</guimenu>をクリックし、<guimenu>Enable Quota Support</guimenu>を有効にします。<systemitem>quota</systemitem>パッケージがまだインストールされていない場合は、<guimenu>はい</guimenu>のクリックで各メッセージを確認することにより、クオータパッケージがインストールされます。
     </para>
    </step>
    <step>
     <para>
      変更を確認し、<guimenu>エキスパートパーティショナ</guimenu>を終了します。
     </para>
    </step>
    <step>
     <para>
      次のコマンドを入力して、<systemitem class="service">quotaon</systemitem>サービスが実行されていることを確認してください。
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> systemctl status quotaon.service</screen>
     <para>
      サービスは、<literal>active</literal>としてマークされている必要があります。そうでない場合は、<command>systemctl start
      quotaon.service</command>コマンドを使用して開始する必要があります。
     </para>
    </step>
   </procedure>
   <procedure>
    <title>ユーザまたはグループのクォータを設定する</title>
    <para>
     これで、特定のユーザまたはグループに対するソフトクオータまたはハードクオータを定義し、猶予間隔を指定できます。
    </para>
    <step>
     <para>
      YaSTの<guimenu>ユーザとグループの管理</guimenu>で、クオータの設定対象とするユーザまたはグループを選択し、<guimenu>編集</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      <guimenu>プラグイン</guimenu>タブで、<guimenu>ユーザクォータの管理</guimenu>のエントリを選択してから、<guimenu>起動</guimenu>をクリックして<guimenu>クォータの設定</guimenu>ダイアログを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>ファイルシステム</guimenu>から、クオータを適用するパーティションを選択します。
     </para>
     <informalfigure os="sles;sled">
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2_users_quota_qt.png" width="80%" os="sles;sled"/>
        
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2_users_quota_qt.png" width="70%" os="sles;sled"/>
        
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      <guimenu>サイズ制限</guimenu>では、ディスクスペースの容量を制限します。ユーザまたはグループがこのパーティションで持つことができる1KBブロックの数を入力します。<guimenu>Soft Limit</guimenu>および<guimenu>ハード制限</guimenu>の値を指定します。
     </para>
    </step>
    <step>
     <para>
      さらに、ユーザまたはグループがこのパーティションで持つことができるiノードの数を制限できます。<guimenu>iノード制限</guimenu>で、<guimenu>Soft Limit</guimenu>および<guimenu>ハード制限</guimenu>を入力します。
     </para>
    </step>
    <step>
     <para>
      サイズまたはiノードに対して指定されたソフト制限をユーザまたはグループが既に超過している場合にのみ猶予間隔を定義できます。このソフト制限を超過していない場合、時間に関連するテキストボックスは有効になりません。ユーザまたはグループが上記の制限セットを超過できる期間を指定します。
     </para>
    </step>
    <step>
     <para>
      入力した設定を確認して、<guimenu>OK</guimenu>をクリックします。
     </para>
    </step>
    <step>
     <para>
      <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。
     </para>
     <para>
      また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存するには、<menuchoice> <guimenu>熟練者向けオプション</guimenu> <guimenu>変更を今すぐ書き込む</guimenu> </menuchoice>の順にクリックします。
     </para>
    </step>
   </procedure>
   <para>
    <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>には、<literal>repquota</literal>や<literal>warnquota</literal>などのコマンドラインツールも付属しています。システム管理者はこれらのツールを使用してディスク使用量を制限したり、所定のクオータを超過しているユーザに電子メール通知を送信したりすることができます。管理者はまた、<command>quota_nld</command>を使用することにより、超過したクオータに関するカーネルメッセージをD-BUSに転送できます。詳細については、<systemitem>repquota</systemitem>、<systemitem>warnquota</systemitem>、および<command>quota_nld</command>のマニュアルページを参照してください。

   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-yast-userman-defaults">
  <title>ローカルユーザのデフォルト設定の変更</title>

  <para>
   新しくローカルユーザを作成する際には、いくつかのデフォルト設定がYaSTで使用されます。これらには、たとえば、ユーザが属するグループ、ユーザのホームディレクトリのアクセスパーミッションなどが含まれます。これらのデフォルト設定値は、必要に応じて変更することができます。
  </para>

  <procedure>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>Defaults for New Users (新規ユーザのデフォルト)</guimenu>タブを選択します。
    </para>
   </step>
   <step>
    <para>
     新しいユーザが自動的に属するグループを変更するには、<guimenu>既定のグループ</guimenu>から別のグループを選択します。
    </para>
   </step>
   <step>
    <para>
     新しいユーザのホームディレクトリのデフォルトパスとして<filename>/home/<replaceable>USERNAME</replaceable></filename>を使用しない場合は、<guimenu>ホームディレクトリのパスプレフィクス</guimenu>を変更します。
    </para>
   </step>
   <step>
    <para>
     新たに作成したホームディレクトリのデフォルトのパーミッションモードを変更するには、<guimenu>ホームディレクトリ用のUmask</guimenu>のumask値を調整します。umaskの詳細については、<xref linkend="cha-security-acls"/>および<command>umask</command>のマニュアルページを参照してください。
    </para>
   </step>
   <step>
    <para>
     それぞれのオプションの詳細については、<guimenu>ヘルプ</guimenu>をクリックしてください。
    </para>
   </step>
   <step>
    <para>
     変更内容を反映するには、<guimenu>OK</guimenu>をクリックします。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-yast-userman-assign">
  <title>グループへのユーザの割り当て</title>

  <para>
   <guimenu>ユーザとグループの管理</guimenu>ダイアログの<guimenu>新しいユーザのデフォルト設定</guimenu>タブからアクセス可能なデフォルト設定に従って、さまざまなグループにローカルユーザが割り当てられます。次に、個別ユーザのグループ割り当てを変更する方法を説明します。新しいユーザに対するデフォルトのグループの割り当てを変更する必要がある場合については、<xref linkend="sec-yast-userman-defaults"/>を参照してください。
  </para>

  <procedure>
   <title>ユーザのグループ割り当てを変更する</title>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>ユーザ</guimenu>タブをクリックします。ユーザ、およびユーザが属するグループが一覧にされます。
    </para>
   </step>
   <step>
    <para>
     <guimenu>編集</guimenu>をクリックし、<guimenu>詳細</guimenu>タブに切り替えます。
    </para>
   </step>
   <step>
    <para>
     ユーザが属するプライマリグループを変更するには、<guimenu>既定のグループ</guimenu>をクリックし、リストからグループを選択します。
    </para>
   </step>
   <step>
    <para>
     追加のセカンダリグループをユーザに割り当てるには、<guimenu>追加のグループ</guimenu>のリストで対応するチェックボックスをオンにします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、変更を適用します。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。
    </para>
    <para>
     また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存するには、<menuchoice> <guimenu>熟練者向けオプション</guimenu> <guimenu>変更を今すぐ書き込む</guimenu> </menuchoice>の順にクリックします。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec-yast-userman-groups">
  <title>グループを管理する</title>

  <para>
   YaSTでは、グループの追加、変更、または削除も容易に実行できます。
  </para>

  <procedure>
   <title>グループを作成および変更する</title>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開き、<guimenu>グループ</guimenu>タブをクリックします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>フィルタを設定</guimenu>では、管理するグループセットを定義します。ダイアログに、システム内のグループが一覧にされます。
    </para>
   </step>
   <step>
    <para>
     新しいグループを追加するには、<guimenu>追加</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     既存のグループを変更するには、グループを選択して<guimenu>編集</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     次のダイアログで、データを入力または変更します。右のリストでは、グループのメンバーになることができる利用可能なすべてのユーザおよびシステムユーザの概要が表示されます。
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_groups_edit_qt.png" width="80%" os="sles;sled"/>
       
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_groups_edit_qt.png" width="75%" os="sles;sled"/>
       
      </imageobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     新しいグループに既存のユーザを追加するには、選択可能な<guimenu>グループのメンバー</guimenu>のリストで、該当するボックスをオンにして選択します。既存のユーザをグループから削除するには、このボックスをオフにします。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、変更を適用します。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。
    </para>
    <para>
     また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存するには、<menuchoice> <guimenu>熟練者向けオプション</guimenu> <guimenu>変更を今すぐ書き込む</guimenu> </menuchoice>の順にクリックします。
    </para>
   </step>
  </procedure>

  <para>
   グループを削除するには、すべてのグループメンバーを削除する必要があります。グループを削除するには、リストからグループを選択し、<guimenu>削除</guimenu>をクリックします。<guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じ、変更内容を保存します。また、<guimenu>ユーザとグループの管理</guimenu>ダイアログを閉じずにすべての変更を保存するには、<menuchoice>
   <guimenu>熟練者向けオプション</guimenu> <guimenu>変更を今すぐ書き込む</guimenu>
   </menuchoice>の順にクリックします。
  </para>
 </sect1>
 <sect1 xml:id="sec-yast-userman-authent">
  <title>ユーザ認証方法を変更する</title>

  <para>
   マシンがネットワークに接続されている場合は認証方法を変更できます。次のオプションを指定できます。
  </para>

  <variablelist>
   <varlistentry>
    <term>NIS</term>
    <listitem>
     <para>
      ユーザはネットワーク上のすべてのシステムに対し、1台のNISサーバ上で集中的に管理されます。詳細については、<xref linkend="cha-nis"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>SSSD</term>
    <listitem>
     <para>
      システムセキュリティサービスデーモン<emphasis></emphasis>(SSSD)は、ユーザデータをローカルにキャッシュすることにより、実際のディレクトリサービスが(一時的に)アクセス不能な場合でもユーザがデータを利用できるようにします。詳細については、<xref linkend="sec-security-auth-sssd"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Samba</term>
    <listitem>
     <para>
      SMB認証は、通常、LinuxとWindowsが混在するネットワークで使用されます。詳細については、<xref linkend="cha-samba" os="sles"/>を参照してください。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   認証方法を変更するには、以下の手順に従ってください。
  </para>

  <procedure>
   <step>
    <para>
     YaSTの<guimenu>ユーザとグループの管理</guimenu>ダイアログを開きます。
    </para>
   </step>
   <step>
    <para>
     <guimenu>Authentication Settings</guimenu>タブをクリックすると、利用可能な認証方法と現在の設定の概要が表示されます。
    </para>
   </step>
   <step>
    <para>
     認証方法を変更するには、<guimenu>設定</guimenu>をクリックし、変更する認証方法を選択します。これにより、YaSTのクライアント設定モジュールに直接切り替わります。適切なクライアントの設定について詳細は、次のセクションを参照してください。
    </para>
    <formalpara>
     <title>NIS:</title>
     <para>
      <xref linkend="sec-nis-client"/>
     </para>
    </formalpara>
    <formalpara>
     <title>LDAP:</title>
     <para>
      <phrase><xref linkend="sec-security-auth-yast-client"/></phrase>
     </para>
    </formalpara>
    <formalpara os="sles">
     <title>Samba:</title>
     <para>
      <xref linkend="sec-samba-client-inst-yast"/>
     </para>
    </formalpara>
   <formalpara>
     <title>SSSD:</title>
     <para>
      <xref linkend="sec-security-auth-sssd"/>
     </para>
    </formalpara>
   </step>
   <step>
    <para>
     この設定を確認した後、<guimenu>ユーザとグループの管理</guimenu>の概要に戻ります。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして、管理ダイアログを閉じます。
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 xml:id="sec-yast-userman-defaultsystemusers">
  <title>デフォルトのシステムユーザ</title>
  <para>
   デフォルトでは、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>に削除できないユーザ名が作成されます。これらのユーザは通常、Linux Standard Baseで定義されます。次のリストに、一般的なユーザ名とその目的を示します。
  </para>
  
  <variablelist>
   <title>デフォルトでインストールされる一般的なユーザ名</title>
   <varlistentry>
    <term><systemitem class="username">bin</systemitem></term>
    <term><systemitem class="username">daemon</systemitem></term>
    <listitem>
     <para>
      レガシアプリケーションとの互換性を維持するために用意されているレガシユーザ。新しいアプリケーションではこのユーザ名を使用しないでください。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">gdm</systemitem></term>
    <listitem>
     
     <para>
      グラフィカルログインを提供したり、ローカル表示とリモート表示を管理したりするために、GNOMEディスプレイマネージャ(GDM)によって使用されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">lp</systemitem></term>
    <listitem>
     
     <para>
      CUPS (Common Unix Printing System)用にプリンタデーモンによって使用されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">mail</systemitem></term>
    <listitem>
     <para>
      <command>sendmail</command>や<command>postfix</command>などの、ユーザ用に予約されたメーラープログラム。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">man</systemitem></term>
    <listitem>
     
     <para>
      manページへのアクセスに使用されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">messagebus</systemitem></term>
    <listitem>
     
     <para>
      プロセス間通信用のソフトウェアバスであるD-Bus (デスクトップバス)へのアクセスに使用されています。デーモンは<systemitem class="daemon">dbus-daemon</systemitem>です。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">nobody</systemitem></term>
    <listitem>
     <para>
      ファイルを所有せず権限付きグループに属していないユーザ。Linux Standard Baseは、デーモンごとに別個のユーザアカウントを設定することを推奨しているため、現在ではあまり使用されていません。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">nscd</systemitem></term>
    <listitem>
     
     <para>
      ネームサービスキャッシュデーモンによって使用されています。このデーモンは、NISとLDAPのパフォーマンスを向上させる参照サービスです。デーモンは<systemitem class="daemon">nscd</systemitem>です。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">polkitd</systemitem></term>
    <listitem>
     
     <para>
      PolicyKit認可フレームワークによって使用されています。このフレームワークは、権限のないプロセスの認可要求を処理します。デーモンは<systemitem class="daemon">polkitd</systemitem>です。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">postfix</systemitem></term>
    <listitem>
     
     <para>
      Postfixメーラーによって使用されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">pulse</systemitem></term>
    <listitem>
     
     <para>
      Pulseaudioサウンドサーバによって使用されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">root</systemitem></term>
    <listitem>
     <para>
      適切なすべての権限を付与するシステム管理者が使用しています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">rpc</systemitem></term>
    <listitem>
     
     <para>
      RPCポートマッパーである<command>rpcbind</command>コマンドによって使用されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">rtkit</systemitem></term>
    <listitem>
     
     <para>
      リアルタイムスケジューリングモード用のD-Busシステムサービスを提供する<package>rtkit</package>パッケージによって使用されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">salt</systemitem></term>
    <listitem>
     
     <para>
      Saltが提供しているパラレルリモート実行用のユーザ。デーモンの名前は<systemitem class="daemon">salt-master</systemitem>です。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">scard</systemitem></term>
    <listitem>
     
     <para>
      スマートカードとそのリーダーとの通信を行うユーザ。デーモンの名前は<systemitem class="daemon">pcscd</systemitem>です。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">srvGeoClue</systemitem></term>
    <listitem>
     
     <para>
      位置情報を提供するためにGeoClue D-Busサービスによって使用されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">sshd</systemitem></term>
    <listitem>
     
     <para>
      セキュアでないネットワーク上で暗号化されたセキュアな通信を確保するためにSecure Shellデーモン(SSH)によって使用されています。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">statd</systemitem></term>
    <listitem>
     
     <para>
      ネットワークステータスモニタ(NSM)プロトコルによって使用されています。再起動通知をリッスンするために<systemitem class="daemon">rpc.statd</systemitem>デーモンで実装されます。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">systemd-coredump</systemitem></term>
    <listitem>
     
     <para>
      コアダンプを取得、保存、および処理するために<command>/usr/lib/systemd/systemd-coredump</command>コマンドによって使用されています。
     </para>
    </listitem>
   </varlistentry>
   
   <varlistentry>
    <term><systemitem class="username">systemd-timesync</systemitem></term>
    <listitem>
     
     <para>
      リモートのネットワークタイムプロトコル(NTP)サーバとローカルシステムクロックを同期させるために<command>/usr/lib/systemd/systemd-timesyncd</command>コマンドによって使用されています。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
 <sect1 xml:id="default-system-groups">
  <title>デフォルトのシステムグループ</title>
  <para>
    デフォルトで、SLEはシステムサービスで使用される複数のユーザグループを作成します。次のリストは、必須および一般的なオプショングループの例を示しています。
  </para>
  <variablelist>
    <varlistentry>
        <term><systemitem class="groupname">root</systemitem></term>
        <listitem>
          <para>
            すべての特権を持つ管理グループ。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">bin</systemitem></term>
        <listitem>
          <para>
            レガシアプリケーションとの互換性を維持するために用意されています。新しいアプリケーションでは、このグループを使用しないでください。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">daemon</systemitem></term>
        <listitem>
          <para>
            以前は、デーモンのシステムへのアクセスを制限するために使用されていました。現在は、デーモンが互いに分離するように独自のUID/GIDで実行される必要があります。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">audio</systemitem></term>
        <listitem>
          <para>
            オーディオデバイスの特権。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">gdm</systemitem></term>
        <listitem>
          <para>
            GNOMEディスプレイマネージャの特権。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">chrony</systemitem></term>
        <listitem>
          <para>
            時間同期サービスの特権。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">kvm</systemitem></term>
        <listitem>
          <para>
            QEMUマシンエミュレータツールキットの特権。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">libvirt</systemitem></term>
        <listitem>
          <para>
            仮想スタックの特権。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">lp</systemitem></term>
        <listitem>
          <para>
            プリンタ運用の特権。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
      <term><systemitem class="groupname">mail</systemitem></term>
      <listitem>
        <para>
          メールサービスの特権。
        </para>
      </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">man</systemitem></term>
        <listitem>
          <para>
            マニュアルページと<command>man</command>コマンドに固有の特権。
          </para>
        </listitem>
    </varlistentry>
    <varlistentry>
        <term><systemitem class="groupname">sshd</systemitem></term>
        <listitem>
          <para>
            SSH通信プロトコルデーモンの特権。
          </para>
        </listitem>
    </varlistentry>
  </variablelist>
 </sect1>
</chapter>
