<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="suse_l10n.xml" version="5.0" xml:id="sec-suse-l10n">
 <title>語言與國家專用的設定</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  本系統已在很大程度上進行了國際化，可以根據當地的需求進行修改。國際化 (<emphasis>I18N</emphasis>) 允許特定的當地語系化 (<emphasis>L10N</emphasis>)。I18N 與 L10N 這兩個縮寫是取首尾兩個字母，兩字母中間再加上省略的字母數量。
 </para>

 <para>
  透過檔案 <filename>/etc/sysconfig/language</filename> 中定義的 <systemitem>LC_</systemitem> 變數來進行這些設定。這不僅是指<emphasis>本地語言支援</emphasis>，還包括<emphasis>訊息</emphasis> (語言)、<emphasis>字元集</emphasis>、<emphasis>排序順序</emphasis>、<emphasis>時間和日期</emphasis>、<emphasis>數字</emphasis>及<emphasis>貨幣</emphasis>等類別。這些類別中的每一種都可以使用自己的變數直接定義，或使用 <filename>language</filename> 檔案中的主變數間接定義 (請參閱 <command>locale</command> man 頁面)。
 </para>

 <variablelist xml:id="vl-suse-l10n-variables">
  <title>變數清單</title>
  <varlistentry>
   <term><systemitem>RC_LC_MESSAGES</systemitem>, <systemitem>RC_LC_CTYPE</systemitem>, <systemitem>RC_LC_COLLATE</systemitem>, <systemitem>RC_LC_TIME</systemitem>, <systemitem>RC_LC_NUMERIC</systemitem>, <systemitem>RC_LC_MONETARY</systemitem>
   </term>
   <listitem>
    <para>
     這些變數將不帶 <systemitem>RC_</systemitem> 字首傳遞到外圍程序，代表所列的類別。相關外圍程序設定檔會列於下面。目前的設定可以用 <command>locale</command> 指令來顯示。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LC_ALL</systemitem>
   </term>
   <listitem>
    <para>
     此變數 (如果設定) 會覆寫先前所提到的變數值。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>RC_LANG</systemitem>
   </term>
   <listitem>
    <para>
     如果沒有設定前面的變數，則此為備用變數。預設只會設定 <systemitem>RC_LANG</systemitem>。這讓使用者更容易輸入自己的值。
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><systemitem>ROOT_USES_LANG</systemitem>
   </term>
   <listitem>
    <para>
     此變數可設定為 <literal>yes</literal> 或 <literal>ctype</literal> (預設值)。如果設定為 <literal>yes</literal>，<systemitem class="username">root</systemitem> 將使用特定於語言和國家/地區的設定，否則系統管理員將永遠在 POSIX 環境中作業。
    </para>
   </listitem>
  </varlistentry>
 </variablelist>

 <para>
  變數可以用 YaST sysconfig 編輯器來設定。這樣的變數值中包含語言碼、國碼、編碼及輔助按鍵。個別元件會以特殊字元來連接：
 </para>

<screen>LANG=&lt;language&gt;[[_&lt;COUNTRY&gt;].&lt;Encoding&gt;[@&lt;Modifier&gt;]]</screen>

 <sect2 xml:id="sec-suse-l10n-settings">
  <title>泛系統地區設定</title>
  <para>
   <systemitem class="daemon">systemd</systemitem> 會在早期開機時讀取 <filename>/etc/locale.conf</filename>。除非存在個別設定，否則此檔案中設定的地區設定將由每個服務或使用者繼承。
  </para>
  <note>
   <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productname"><phrase os="sles"></phrase></phrase> 下舊組態檔案的行為</title>
   <para>
    早期版本的 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 會從 <filename>/etc/sysconfig/language</filename>、<filename>/etc/sysconfig/keyboard</filename> 和 <filename>/etc/sysconfig/console</filename> 讀取地區設定。從 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>
    <phrase os="sles;sled">15 GA</phrase> 開始，這些檔案被視為已過時。<systemitem class="daemon">systemd</systemitem> 不再從這些檔案讀取設定。<systemitem class="daemon">systemd</systemitem> 改為從 <filename>/etc/locale.conf</filename> 讀取設定。
   </para>
   <para>
    不過，仍會使用 <filename>/etc/sysconfig/language</filename> 中定義的變數。這些變數會覆寫泛系統地區設定，並可用於定義使用者外圍程序的不同地區設定 (請參閱<xref linkend="sec-suse-l10n-examples"/>)。
   </para>
  </note>

  <para>若要設定泛系統地區設定，您可以採用以下其中一種方式：</para>
  <itemizedlist>
   <listitem>
    <para>
     在 <filename>/etc/locale.conf</filename> 中寫入您的設定。每行指定一個環境型變數 (如需變數清單，請參閱 <command>man 5 locale.conf</command>)：
    </para>
    <screen>LANG=de_DE.UTF-8</screen>
    <para>
     若要微調設定，可以新增更多的變數 (每行一個變數)。
    </para>
   </listitem>
   <listitem>
    <para>
     使用指令 <command>localectl</command>：
    </para>
<screen><prompt role="root"># </prompt><command>localectl</command> set-locale LANG=de_DE.UTF-8</screen>
    <para>同樣，您也可以在 <command>localectl set-locale</command> 指令後面指定更多變數。</para>
   </listitem>
  </itemizedlist>

  <para>
   在更新 systemd 套件期間為了與舊系統保留反向相容性，上述所有變數都將從 sysconfig 移轉至其最終目標 (如果尚未在這些目標中定義這些變數)。
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-examples">
  <title>一些範例</title>
  <remark>toms 2019-05-21: This section should be restructured as
  it not completely deals with generating locales.
  Postponed to a later point.
  </remark>
  <para>
   您必須將語言與國碼一起設定。語言設定必須符合 <link xlink:href="http://www.evertype.com/standards/iso639/iso639-en.html"/> 和 <link xlink:href="http://www.loc.gov/standards/iso639-2/"/> 中的標準 ISO 639。國碼列在 ISO 3166 中，請參閱 <link xlink:href="http://en.wikipedia.org/wiki/ISO_3166"/>。
  </para>
  <para>
   只有設定那些可以在 <filename>/usr/lib/locale</filename> 中找到的可用描述檔案的值，才會有意義。您可以用 <filename>localedef</filename> 指令從 <command>/usr/share/i18n</command> 中的檔案建立其他描述檔。描述檔案是 <systemitem>glibc-i18ndata</systemitem> 套件的一部分。<literal>en_US.UTF-8</literal> (針對美式英文) 的描述檔可以用以下指令建立：
  </para>

  <remark role="trans">Change the description file in the previous para and the
   following screen to something appropriate for your language.</remark>
<screen>localedef -i en_US -f UTF-8 en_US.UTF-8</screen>
  <variablelist>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.UTF-8</systemitem>
    </term>
    <listitem>
     <para>
      如果安裝期間選擇美式英文的話，則此為預設設定。如果您選擇了其他語言，則仍然可以使用該語言，但會以 UTF-8 做為字元編碼。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>
<systemitem>LANG=en_US.ISO-8859-1</systemitem>
    </term>
    <listitem>
     <para>
      這會將語言設成英文、國家設成美國、字元集設成 <literal>ISO-8859-1</literal>。此字元集並不支援歐元符號，但有時對於尚未支援 <literal>UTF-8</literal> 的程式卻非常實用。然後，有些程式將會評估定義字元集的 (此例為 <literal>ISO-8859-1</literal>) 的字串，像是 Emacs。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>

    <term><systemitem>LANG=en_IE@euro</systemitem>
    </term>
    <listitem>
     <para>
      上方範例在語言設定中明確包括歐元符號。此項設定現已過時，因為 UTF-8 也涵蓋歐元符號。它只有在應用程式支援 ISO-8859-15 而不支援 UTF-8 時才有用。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   對 <filename>/etc/sysconfig/language</filename> 所做的變更會透過以下程序鏈來啟用：
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     對於 Bash：<filename>/etc/profile</filename> 會讀取 <filename>/etc/profile.d/lang.sh</filename>，後者會分析 <filename>/etc/sysconfig/language</filename>。
    </para>
   </listitem>
   <listitem>
    <para>
     對於 tcsh：在登入時，<filename>/etc/csh.login</filename> 會讀取 <filename>/etc/profile.d/lang.csh</filename>，後者會分析 <filename>/etc/sysconfig/language</filename>。
    </para>
   </listitem>
  </itemizedlist>
  <para>
   如此可以確保對 <filename>/etc/sysconfig/language</filename> 的任何變更在下次登入相應的外圍程序時即會生效，而不必手動將其啟用。
  </para>
  <para>
   使用者可以適當地編輯自己的 <filename>~/.bashrc</filename> 來覆寫系統預設值。例如，如果不想對程式訊息使用泛系統 <literal>en_US</literal>，請加入 <systemitem>LC_MESSAGES=es_ES</systemitem>，這樣訊息將以西班牙語顯示。
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-dot-i18n">
  <title><filename>~/.i18n</filename> 中的地區設定</title>
  <para>
   如果您對區域設定的系統預設值不滿意，可以根據 Bash 指令碼語法在 <filename>~/.i18n</filename> 中變更設定值。<filename>~/.i18n</filename> 中的項目會覆寫 <filename>/etc/sysconfig/language</filename> 中的系統預設值。使用相同的變數名稱，但不使用 <literal>RC_</literal> 名稱空間字首。例如，使用 <literal>LANG</literal> 而非 <literal>RC_LANG</literal>︰
  </para>
<screen>LANG=cs_CZ.UTF-8
LC_COLLATE=C</screen>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-fallback">
  <title>語言支援的設定</title>
  <para>
   按照規定，在<emphasis>訊息</emphasis>類別中的檔案僅會儲存於對應的語言目錄中 (像是 <filename>en</filename>)，以便有備用可用。如果您將 <systemitem>LANG</systemitem> 設為 <literal>en_US</literal>，而且 <filename>/usr/share/locale/en_US/LC_MESSAGES</filename> 中的訊息檔案不存在的話，則它會回到 <filename>/usr/share/locale/en/LC_MESSAGES</filename> 中。
  </para>
  <para>
   您也可以定義備用鍊，例如，不列塔尼文之於法文，或是加里斯亞文之於西班牙文之於葡萄牙文：
  </para>
  <para>
   <systemitem>LANGUAGE="br_FR:fr_FR"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="gl_ES:es_ES:pt_PT"</systemitem>
  </para>
  <para>
   如有需要，請改用挪威文變體 Nynorsk 與 Bokmal (讓其他備用為 <literal>no</literal>)：
  </para>
  <para>
   <systemitem>LANG="nn_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nn_NO:nb_NO:no"</systemitem>
  </para>
  <para>
   或
  </para>
  <para>
   <systemitem>LANG="nb_NO"</systemitem>
  </para>
  <para>
   <systemitem>LANGUAGE="nb_NO:nn_NO:no"</systemitem>
  </para>
  <para>
   請注意，在挪威文中，<systemitem>LC_TIME</systemitem> 的處理方式也有所不同。
  </para>
  <remark>The following example does not make sense  for 'en'; that's why I
   use 'de' as an example here. -ke- </remark>

  <para>
   如果無法適當的辨識界定位數群組的分隔符號，可能會發生問題。如果 <systemitem>LANG</systemitem> 設定為類似 <literal>de</literal> 的兩個字母的語言碼，但卻使用 <filename>/usr/share/lib/de_DE/LC_NUMERIC</filename> 中的定義檔 glibc，就會發生這種情形。因此，<systemitem>LC_NUMERIC</systemitem> 必須設定為 <literal>de_DE</literal>，讓系統能辨識分隔符號定義。
  </para>
 </sect2>

 <sect2 xml:id="sec-suse-l10n-info">
  <title>更多資訊</title>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <emphasis>The GNU C Library Reference Manual</emphasis> 的 <quote>Locales and Internationalization</quote> 一章，包含在套件 <package>glibc-info</package>.
    </para>
   </listitem>
   <listitem>
    <para>
     Markus Kuhn 所寫的 <emphasis>UTF-8 and Unicode FAQ for Unix/Linux</emphasis>，目前網址如下：<link xlink:href="https://www.cl.cam.ac.uk/~mgk25/unicode.html"/>。
    </para>
   </listitem>
  </itemizedlist>
 </sect2>
</sect1>
