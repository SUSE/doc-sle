<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="suse_sw_packages.xml" id="sec.suse.packages">
 <title>Informações sobre pacotes de software especiais</title>

 <para>
  Os programas <systemitem class="resource">bash</systemitem>, <systemitem class="resource">cron</systemitem>, <systemitem class="resource">logrotate</systemitem>, <systemitem class="resource">locate</systemitem>, <systemitem class="resource">ulimit</systemitem> e <systemitem class="resource">free</systemitem> são muito importantes para os administradores de sistema e para muitos usuários. As páginas de manual e de informações são duas fontes úteis de informações sobre comandos, mas as duas nem sempre estão disponíveis. O GNU Emacs é um editor de texto popular e muito configurável.
 </para>

 <sect2 id="sec.suse.packages.bash">
  <title>O pacote <systemitem class="resource">bash</systemitem> e <filename>/etc/profile</filename></title><indexterm> <primary>Bash</primary> <secondary>perfil</secondary> </indexterm> <indexterm> <primary>arquivos de configuração</primary> <secondary>perfil</secondary> </indexterm>
  <para>
   Bash é o shell de sistema padrão. Quando usado com um shell de login, ele lê vários arquivos de inicialização. O Bash os processa na ordem em que são exibidos na lista:
  </para>
  <orderedlist spacing="normal">
   <listitem>
    <para>
     <filename>/etc/profile</filename>
    </para>
   </listitem>
   <listitem>
    <para>
     <filename>~/.profile</filename>
    </para>
   </listitem>
   <listitem>
    <para>
     <filename>/etc/bash.bashrc</filename>
    </para>
   </listitem>
   <listitem>
    <para>
     <filename>~/.bashrc</filename>
    </para>
   </listitem>
  </orderedlist><indexterm> <primary>Bash</primary> <secondary>.bashrc</secondary> </indexterm> <indexterm> <primary>Bash</primary> <secondary>.profile</secondary> </indexterm> <indexterm> <primary>arquivos de configuração</primary> <secondary>.bashrc</secondary> </indexterm> <indexterm> <primary>arquivos de configuração</primary> <secondary>.profile</secondary> </indexterm>
  <para>
   Faça configurações personalizadas em <filename>~/.profile</filename> ou <filename>~/.bashrc</filename>. Para assegurar o processamento correto desses arquivos, é necessário copiar as configurações básicas de <filename>/etc/skel/.profile</filename> ou <filename>/etc/skel/.bashrc</filename> no diretório pessoal do usuário. É recomendável copiar as configurações de <filename>/etc/skel</filename> após uma atualização. Execute os seguintes comandos de shell para evitar a perda de ajustes pessoais:
  </para>
<screen>mv ~/.bashrc ~/.bashrc.old
cp /etc/skel/.bashrc ~/.bashrc
mv ~/.profile ~/.profile.old
cp /etc/skel/.profile ~/.profile</screen>
  <para>
   Em seguida, copie os ajustes pessoais novamente dos arquivos <literal>*.old</literal>.
  </para>
 </sect2>

 <sect2 id="sec.suse.packages.cron">
  <title>O pacote cron</title><indexterm> <primary>cron</primary> </indexterm> <indexterm> <primary>arquivos de configuração</primary> <secondary>crontab</secondary> </indexterm>
  <para>
   Se você deseja executar comandos de maneira regular e automática em segundo plano em horários predefinidos, cron é a ferramenta a ser usada. O cron é orientado por tabelas de horários especialmente formatadas. Alguns deles vêm com o sistema e os usuários poderão criar suas próprias tabelas, se necessário.
  </para>
  <para>
   As tabelas cron estão localizadas em <filename>/var/spool/cron/tabs</filename>. <filename>/etc/crontab</filename> atua como uma tabela cron para todo o sistema. Digite o nome de usuário para executar o comando diretamente após a tabela de tempo e antes do comando. No <xref linkend="ex.suse.packages.cron"/>, <systemitem class="username">root</systemitem> foi inserido. Tabelas específicas de pacote, localizadas em <filename>/etc/cron.d</filename>, possuem o mesmo formato. Consulte a página de manual do <command>cron</command> (<command>man cron</command>).
  </para>
  <example id="ex.suse.packages.cron">
   <title>Entrada in /etc/crontab</title>
<screen>1-59/5 * * * *   root   test -x /usr/sbin/atrun &amp;&amp; /usr/sbin/atrun</screen>
  </example>
  <para>
   Você não pode editar <filename>/etc/crontab</filename> chamando o comando <command>crontab -e</command>. Esse arquivo deve ser carregado diretamente em um editor, modificado e gravado.
  </para>
  <para>
   Alguns pacotes instalam scripts de shell nos diretórios <filename>/etc/cron.hourly</filename>, <filename>/etc/cron.daily</filename>, <filename>/etc/cron.weekly</filename> e <filename>/etc/cron.monthly</filename>, cuja execução é controlada por <filename>/usr/lib/cron/run-crons</filename>. <filename>/usr/lib/cron/run-crons</filename> é executado a cada 15 minutos da tabela principal (<filename>/etc/crontab</filename>). Isso garante que os processos que tenham sido negligenciados possam ser executados no momento adequado.
  </para>
  <para>
   Para executar os scripts de manutenção <filename>por hora</filename>, <filename>por dia</filename> ou outros scripts de manutenção periódica em horários personalizados, remova os arquivos de marcação de horário regularmente, utilizando as entradas <filename>/etc/crontab</filename> (consulte o <xref linkend="ex.suse.packages.cron.time"/>, que remove a opção <filename>por hora</filename> antes de cada hora cheia, a opção <filename>por dia</filename> uma vez ao dia às 2:14, etc.).
  </para>
  <example id="ex.suse.packages.cron.time">
   <title>/etc/crontab: remova arquivos de marcação de horário</title>
<screen>59 *  * * *     root  rm -f /var/spool/cron/lastrun/cron.hourly
14 2  * * *     root  rm -f /var/spool/cron/lastrun/cron.daily
29 2  * * 6     root  rm -f /var/spool/cron/lastrun/cron.weekly
44 2  1 * *     root  rm -f /var/spool/cron/lastrun/cron.monthly</screen>
  </example>
  <para>
   Se preferir, defina <literal>DAILY_TIME</literal> em <filename>/etc/sysconfig/cron</filename> como o horário de início de <filename>cron.daily</filename>. A configuração de <literal>MAX_NOT_RUN</literal> assegura que as tarefas diárias sejam acionadas para execução, mesmo se o usuário não ligou o computador no <literal>DAILY_TIME</literal> especificado por um período mais longo. O valor máximo de <literal>MAX_NOT_RUN</literal> é 14 dias.
  </para>
  <para>
   Os trabalhos de manutenção diária de sistema são distribuídos a vários scripts por motivos de clareza. Eles estão contidos no pacote <systemitem class="resource">aaa_base</systemitem>. <filename>/etc/cron.daily</filename> contém, por exemplo, os componentes <filename>suse.de-backup-rpmdb</filename>, <filename>suse.de-clean-tmp</filename> ou <filename>suse.de-cron-local</filename>.
   
  </para>
 </sect2>

 <sect2 id="sec.suse.packages.cronstatus">
  <title>Parando mensagens de status do Cron</title>
  <para>
   Para evitar a inundação de e-mails causada pelas mensagens de status do Cron, o valor padrão de <literal>SEND_MAIL_ON_NO_ERROR</literal> em <filename>/etc/sysconfig/cron</filename> está definido como "<literal>no</literal>" nas novas instalações. Mesmo com essa configuração definida como "<literal>no</literal>", a saída de dados do Cron ainda será enviada para o endereço <literal>MAILTO</literal>, conforme documentado na página de manual do Cron.
  </para>
  <para>
   Em caso de atualização, é recomendado definir esses valores de acordo com as suas necessidades.
  </para>
 </sect2>

 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="suse_logfiles.xml" parse="xml"/>

 <sect2 id="sec.suse.locate">
  <title>O comando locate</title><indexterm> <primary>arquivos</primary><secondary>localização</secondary> </indexterm> <indexterm> <primary>locate</primary> </indexterm>
  
  <para>
   <command>locate</command>, um comando para localização rápida de arquivos, não está incluído no escopo padrão do software instalado. Se desejado, instale o pacote <systemitem>mlocate</systemitem>, o sucessor do pacote <systemitem>findutils-locate</systemitem>. O processo updatedb é iniciado automaticamente a cada noite ou aproximadamente 15 minutos após a inicialização do sistema.
  </para>
 </sect2>

 <sect2 id="sec.suse.ulimit">
  <title>O comando ulimit</title><indexterm> <primary>ulimit</primary> </indexterm> <indexterm> <primary>arquivos básicos</primary> </indexterm> <indexterm> <primary>sistema</primary> <secondary>limitação do uso de recursos</secondary> </indexterm>
  <para>
   Com o comando <command>ulimit</command> (<emphasis>limites do usuário</emphasis>), é possível definir limites para o uso dos recursos do sistema e fazer com que sejam exibidos. O <command>ulimit</command> é especialmente útil para limitar a memória disponível para os aplicativos. Com isso, um aplicativo pode ser impedido de absorver recursos em demasia do sistema e deixar o sistema operacional lento ou até travá-lo.
  </para>
  <para>
   O comando <command>ulimit</command> pode ser usado com várias opções. Para limitar o uso da memória, use as opções listadas na <xref linkend="tab.suse.packages.ulimit"/>.
  </para><indexterm> <primary>ulimit</primary><secondary>opções</secondary> </indexterm>
  <table id="tab.suse.packages.ulimit">
   <title><command>ulimit</command>: definindo recursos para o usuário</title>

   <tgroup cols="2">
    <tbody>
     <row>
      <entry>
       <para>
        <option>-m</option>
       </para>
      </entry>
      <entry>
       <para>
        O tamanho máximo do conjunto residente
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>-v</option>
       </para>
      </entry>
      <entry>
       <para>
        A quantidade máxima de memória virtual disponível para o shell
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>-s</option>
       </para>
      </entry>
      <entry>
       <para>
        O tamanho máximo da pilha
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>-c</option>
       </para>
      </entry>
      <entry>
       <para>
        O tamanho máximo dos arquivos básicos criados
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <option>-a</option>
       </para>
      </entry>
      <entry>
       <para>
        Todos os limites atuais são informados
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table><indexterm> <primary>arquivos de configuração</primary><secondary>perfil</secondary> </indexterm>
  <para>
   As entradas padrão de todo o sistema estão definidas em <filename>/etc/profile</filename>. Não é recomendado editar esse arquivo diretamente, pois as mudanças serão sobregravadas durante os upgrades do sistema. Para personalizar as configurações de perfil de todo o sistema, use <filename>/etc/profile.local</filename>. Convém efetuar as configurações por usuário em <filename>~<replaceable>USUÁRIO</replaceable>/.bashrc</filename>.
  </para><indexterm> <primary>arquivos de configuração</primary><secondary>.bashrc</secondary> </indexterm>
  <example id="ex.u.ulimit.bashrc">
   <title>ulimit: configurações em ~/.bashrc</title>
<screen># Limits maximum resident set size (physical memory):
ulimit -m 98304
 
# Limits of virtual memory:
ulimit -v 98304</screen>
  </example>
  <para>
   As alocações de memória devem ser especificadas em KB. Para obter informações mais detalhadas, consulte <command>man bash</command>.
  </para>
  <important>
   <title>Suporte a <command>ulimit</command></title>
   <para>
    Nem todos os shells suportam as diretivas <command>ulimit</command>. O PAM (por exemplo, <literal>pam_limits</literal>) oferece uma infinidade de possibilidades de ajustes como alternativa ao <command>ulimit</command>.
   </para>
  </important>
 </sect2>

 <sect2 id="sec.suse.free">
  <title>O comando free</title><indexterm> <primary>memória</primary><secondary>RAM</secondary></indexterm><indexterm><primary>comandos</primary> <secondary>free</secondary> </indexterm>
  <para>
   O comando <command>free</command> exibe a quantidade total de memória física livre e utilizada e o espaço de troca no sistema, além dos buffers e do cache consumidos pelo kernel. O conceito de <emphasis>RAM disponível</emphasis> surgiu antes da época do gerenciamento unificado de memória. O slogan <emphasis>memória livre é memória ruim</emphasis> se aplica bem ao Linux. Como resultado, o Linux sempre se esforçou para equilibrar caches externos sem realmente permitir memória livre ou sem uso.
  </para>
  <para>
   O kernel não tem conhecimento direto de nenhum aplicativo ou dados de usuário. Em vez disso, ele gerencia aplicativos e dados de usuário em um <emphasis>cache de página</emphasis>. Se a memória diminuir, partes dele são gravadas na partição de troca ou em arquivos, dos quais podem ser lidas inicialmente com a ajuda do comando <command>mmap</command> (consulte <command>man mmap</command>).
  </para><indexterm> <primary>kernels</primary> <secondary>caches</secondary> </indexterm>
  <para>
   O kernel também contém outros caches, como o <emphasis>cache slab</emphasis>, onde os caches usados para acesso a rede são armazenados. Isso pode explicar as diferenças entre os contadores em <filename>/proc/meminfo</filename>. A maioria deles (mas não todos) pode ser acessada via <filename>/proc/slabinfo</filename>.
  </para>
  <para>
   No entanto, se o seu objetivo for descobrir quanta RAM está em uso, encontre essa informação em <filename>/proc/meminfo</filename>.
  </para>
 </sect2>

 <sect2 id="sec.suse.manpages">
  <title>Páginas de manual e de informações</title><indexterm> <primary>páginas de manual</primary></indexterm><indexterm><primary>páginas de informações</primary> </indexterm> <indexterm> <primary>ajuda</primary> <secondary>páginas de manual</secondary> </indexterm> <indexterm> <primary>ajuda</primary> <secondary>páginas de informações</secondary> </indexterm>
  <para>
   Para alguns aplicativos GNU (como o tar), as páginas de manuais não são mais mantidas. Para esses comandos, use a opção <option>--help</option> para obter uma breve visão geral das páginas de informações, que fornecem instruções mais detalhadas. O info é um sistema de hipertexto do GNU. Leia uma introdução sobre esse sistema digitando <command>info</command><option>info</option>. As páginas de informações podem ser exibidas com Emacs digitando <command>emacs <option>-f info</option></command> ou diretamente em um console, com <command>info</command>. Também é possível usar tkinfo, xinfo ou o sistema de ajuda do para exibir as páginas de informações.
  </para>
 </sect2>



 <sect2 id="sec.suse.packages.man">
  <title>Selecionando páginas de manual usando o comando <command>man</command></title>
  <para>
   Para ler a página de manual, digite <command>man <replaceable>página_de_manual</replaceable></command>. Se existir uma página de manual com o mesmo nome em seções diferentes, elas serão listadas com os números da seção correspondentes. Selecione uma para exibir. Se você não digitar um número de seção em alguns segundos, a primeira página de manual será exibida.
  </para>
  <para>
   Para mudar desse comportamento para o padrão do sistema, defina <literal>MAN_POSIXLY_CORRECT=1</literal> em um arquivo de inicialização de shell, como <filename>~/.bashrc</filename>.
  </para>
 </sect2>

 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="suse_emacs.xml" parse="xml"/>
</sect1>
