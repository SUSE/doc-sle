<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="troubleshooting.xml" version="5.0" xml:id="cha.trouble">
 <title>最も頻繁に起こる問題およびその解決方法</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  この章では、一連の潜在的な問題とその解決法について説明します。ここで状況が正確に記載されていなくても、問題解決のヒントになる類似した状況が見つかる場合があります。
 </para>
 <sect1 xml:id="sec.trouble.info">
  <title>情報の検索と収集</title>

  <para>
   Linuxでは、非常に詳細なレポートが提供されます。システムの使用中に問題が発生した場合、調べる必要のあるところが何箇所かあります。それらのほとんどは、Linuxシステム一般で標準とされるもので、残りのいくつかは<phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>システムに関連するものです。大半のログファイルはYaSTを使って表示することができます(<menuchoice>
   <guimenu>その他</guimenu> <guimenu>起動ログを表示</guimenu>
   </menuchoice>)。
  </para>



  <para>
   <indexterm>
   <primary> YaST</primary>
   <secondary> クエリのサポート</secondary>
   </indexterm> <indexterm>
   <primary>  クエリのサポート</primary>
   </indexterm> YaSTでは、サポートチームが必要なシステム情報のすべてを収集することができます。<menuchoice>

   <guimenu>その他</guimenu> <guimenu>サポート</guimenu> </menuchoice>の順に選択し、問題のカテゴリを選択します。すべての情報が収集されたら、それをサポートリクエストに添付します。
  </para>

  <para>
   最も頻繁にチェックされるログファイルのリストの後には、一般的な目的に関する説明があります。<filename>~</filename>を含むパスは、現在のユーザのホームディレクトリを参照します。
  </para>

  <table xml:id="tab.trouble.info">
   <title>ログファイル</title>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>
       <para>
        ログファイル
       </para>
      </entry>
      <entry>
       <para>
        説明
       </para>
      </entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>
       <para>
        <filename>~/.xsession-errors</filename>
       </para>
      </entry>
      <entry>
       <para>
        現在実行中のデスクトップアプリケーションからのメッセージです。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/apparmor/</filename>
       </para>
      </entry>
      <entry>
       <para>
        AppArmorからのログファイル。詳細については、<xref linkend="part.apparmor"/>を参照してください。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/audit/audit.log</filename>
       </para>
      </entry>
      <entry>
       <para>
        システムのファイル、ディレクトリ、またはリソースに対するすべてのアクセスを追跡し、システムコールをトレースする監査からのログファイル。詳細については、<xref linkend="part.audit"/>を参照してください。
       </para>
      </entry>
     </row>

     <row>
      <entry>
       <para>
        <filename>/var/log/mail.*</filename>
       </para>
      </entry>
      <entry>
       <para>
        メールシステムから受け取るメッセージです。
       </para>
      </entry>
     </row>

     <row>
      <entry>
       <para>
        <filename>/var/log/NetworkManager</filename>
       </para>
      </entry>
      <entry>
       <para>
        NetworkManagerからのログファイルで、ネットワーク接続についての問題を収集します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/samba/</filename>
       </para>
      </entry>
      <entry>
       <para>
        Sambaサーバおよびクライアントのログメッセージを含んでいるディレクトリです。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/warn</filename>
       </para>
      </entry>
      <entry>
       <para>
        カーネルおよびシステムのログデーモンから受け取る、<quote>警告</quote>レベル以上のすべてのメッセージ。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/wtmp</filename>
       </para>
      </entry>
      <entry>
       <para>
        現在のコンピュータセッションのユーザのログインレコードを含むバイナリファイルです。last<command>コマンドを使用して表示させます。</command>
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/Xorg.*.log</filename>
       </para>
      </entry>
      <entry>
       <para>
        Xウィンドウシステムからの、起動時およびランタイムのさまざまなログファイルです。Xの失敗した起動をデバッグするのに役に立ちます。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/YaST2/</filename>
       </para>
      </entry>
      <entry>
       <para>
        YaSTのアクションおよびその結果を含んでいるディレクトリです。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/zypper.log</filename>
       </para>
      </entry>
      <entry>
       <para>
        Zypperのログファイル。
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>

  <para>
   ログファイルとは別に、稼働中のシステムの情報も提供されます。詳細については、「<xref linkend="tab.trouble.system" xrefstyle="select:label title nopage"/>」を参照してください。
  </para>

  <table xml:id="tab.trouble.system">
   <title><filename>/proc</filename>ファイルシステムによるシステム情報</title>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>
       <para>
        ファイル
       </para>
      </entry>
      <entry>
       <para>
        説明
       </para>
      </entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>
       <para>
        <filename>/proc/cpuinfo</filename>
       </para>
      </entry>
      <entry>
       <para>
        プロセッサのタイプ、製造元、モデル、およびパフォーマンスなどを含む情報を表示します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/dma</filename>
       </para>
      </entry>
      <entry>
       <para>
        どのDMAチャネルが現在使用されているかを表示します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/interrupts</filename>
       </para>
      </entry>
      <entry>
       <para>
        どの割り込みが使用されているか、各割り込みの使用回数を表示します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/iomem</filename>
       </para>
      </entry>
      <entry>
       <para>
        I/Oメモリの状態を表示します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/ioports</filename>
       </para>
      </entry>
      <entry>
       <para>
        その時点でどのI/Oポートが使用されているかを表示します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/meminfo</filename>
       </para>
      </entry>
      <entry>
       <para>
        メモリステータスを表示します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/modules</filename>
       </para>
      </entry>
      <entry>
       <para>
        個々のモジュールを表示します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/mounts</filename>
       </para>
      </entry>
      <entry>
       <para>
        現在マウントされているデバイスを表示します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/partitions</filename>
       </para>
      </entry>
      <entry>
       <para>
        すべてのハードディスクのパーティション設定を表示します。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/version</filename>
       </para>
      </entry>
      <entry>
       <para>
        現在のLinuxバージョンを表示します。
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>

  <para>
   Linuxカーネルは、<filename>/proc</filename>ファイルシステムの場合を除いて、メモリ内ファイルシステムである<literal>sysfs</literal>モジュールで情報をエクスポートします。このモジュールは、カーネルオブジェクトとその属性および関係を表します。<literal>sysfs</literal>の詳細については、<xref linkend="cha.udev"/>でudevのコンテキストを参照してください。<xref linkend="tab.trouble.sysfs" xrefstyle="select:label nopage"/>には、<filename>/sys</filename>の下にある最も一般的なディレクトリの概要が含まれています。
  </para>

  <table xml:id="tab.trouble.sysfs">
   <title><filename>/sys</filename>ファイルシステムによるシステム情報</title>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>
       <para>
        ファイル
       </para>
      </entry>
      <entry>
       <para>
        説明
       </para>
      </entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>
       <para>
        <filename>/sys/block</filename>
       </para>
      </entry>
      <entry>
       <para>
        システム内で検出された各ブロックデバイスのサブディレクトリが含まれています。一般に、これらの大半はディスクタイプのデバイスです。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/sys/bus</filename>
       </para>
      </entry>
      <entry>
       <para>
        各物理バスタイプのサブディレクトリが含まれます。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/sys/class</filename>
       </para>
      </entry>
      <entry>
       <para>
        デバイスの機能タイプとしてグループ化されたサブディレクトリが含まれます(graphics、net、printerなど)。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/sys/device</filename>
       </para>
      </entry>
      <entry>
       <para>
        グローバルなデバイス階層が含まれます。
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>

  <para>
   Linuxには、システム解析とモニタリング用のさまざまなツールが用意されています。システム診断で使用される最も重要なツールの選択については、<xref linkend="cha.util"/>を参照してください。
  </para>

  <para>
   次の各シナリオは、問題を説明するヘッダに続いて、推奨される解決方法、より詳細な解決方法への利用可能な参照、および関連する他のシナリオへの相互参照が書かれた、1つまたは2つの段落から構成されています。
  </para>
 </sect1>
 <sect1 xml:id="sec.trouble.install">
  <title>インストールの問題</title>

  <para>
   インストールの問題とは、コンピュータがインストールに失敗した状態のことを指します。インストールが全体において失敗する、またはグラフィカルインストーラが起動できないという可能性があります。ここでは、通常経験するような問題のいくつかに重点を置いて説明し、そのような場合に考えられる解決方法または回避方法を示します。
  </para>

  <sect2 xml:id="sec.trouble.checkingMedia">
   <title>メディアの確認</title><indexterm>
   <primary>YaST</primary>
   <secondary>メディアチェック</secondary></indexterm><indexterm>
   <primary>DVD</primary>
   <secondary>チェック</secondary></indexterm>
   <para>
    <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>のインストールメディアの使用中に問題が発生した場合には、インストールメディアの整合性をチェックします。メディアからブートし、ブートメニューから<guimenu>Check Installation Media (インストールメディアのチェック)</guimenu>を選択します。実行中のシステムで、YaSTを起動して、<menuchoice>
    <guimenu>ソフトウェア</guimenu> <guimenu>メディアチェック</guimenu> </menuchoice>の順に選択します。<phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>のメディアをチェックするには、メディアをドライブに挿入し、YaSTの<guimenu>メディアチェック</guimenu>画面で、<guimenu>チェック開始</guimenu>をクリックします。これには少し時間がかかります。問題が検出された場合、インストール用にこのメディアを使用しないでください。メディアを自分で書き込んだ場合、メディアの問題が発生する場合があります。メディアを低速(4x)で書き込むと、問題を回避できます。
   </para>
   <figure xml:id="fig.yast2.mediacheck">
    <title>メディアの確認</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_medaicheck1.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_medaicheck1.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>



  <sect2 xml:id="sec.trouble.install.cdrom">
   <title>ブート可能なDVDドライブが利用不可</title>
   <para>
    お使いのコンピュータにブート可能なDVD-ROMドライブがない場合、または使用しているドライブがLinuxでサポートされていない場合、内蔵DVD-ROMドライブを使用しないでコンピュータをインストールするオプションがいくつかあります。
   </para>
   <variablelist>
    <varlistentry>
     <term>外付けブートデバイスの使用</term>
     <listitem>
      <para>
       BIOSおよびインストールカーネルによりサポートされている場合、外部DVDドライブまたはUSBストレージからブートします。ブート可能なUSBストレージデバイスの作成方法については、<xref linkend="sec.i.yast2.start.x86_64"/>を参照してください。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>PXE経由のネットワークブート</term>
     <listitem>
      <para>
       マシンにDVDドライブがない場合でも、使用可能なEthernet接続がある場合は、完全にネットワークベースのインストールを実行します。<phrase os="sles;sled">詳細については、<xref linkend="sec.deployment.remoteinst.scenario.vncpxe"/>と<xref linkend="sec.deployment.remoteinst.scenario.sshpxe"/>を参照してください。</phrase>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 xml:id="sec.trouble.install.cdrom.ext">
    <title>外付けブートデバイス</title>
    <para>
     Linuxでは、既存のDVDドライブはほとんどサポートされます。システムにDVDドライブが存在しない場合でも、USB、FireWire、またはSCSIを通じて接続する外部DVDドライブを使用してシステムをブートできます。これは、BIOSおよびご利用のハードウェアのインタラクションに大きく依存します。問題が発生した場合、BIOSアップデートにより解決する場合があります。
    </para>
    <para>
     ライブCDからインストールする場合は、<quote/>「ライブフラッシュディスク」を作成して、このディスクからブートすることもできます。
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="sec.trouble.install.BIOS">
   <title>インストールメディアからのブートに失敗する</title><indexterm>
   <primary>DVD</primary>
   <secondary> ブート元</secondary></indexterm><indexterm>
   <primary>   ブート</primary>
   <secondary> DVD, 元</secondary></indexterm>
   <para>
    マシンでインストールメディアがブートしない理由の1つとして、BIOS内のブートシーケンスの設定が誤っている場合があります。BIOSブートシーケンスでは、ブート用の最初のエントリとしてDVDドライブがセットされている必要があります。そうでない場合、コンピュータは他のメディア(通常ハードディスク)からブートを試みます。BIOSのブートシーケンスを変更するための説明は、マザーボードに付属するマニュアルまたは次の段落に記載されています。
   </para>
   <para>
    BIOSとはコンピュータの非常に基本的な機能を有効にするソフトウェアです。マザーボードを供給するベンダが、独自のハードウェア用のBIOSを供給します。通常、BIOSセットアップは特別なとき(マシンのブート時)にだけアクセスされます。この初期化段階で、マシンはさまざまなハードウェア診断テストを実行します。そのうちの1つとして、メモリカウンタにより示されるメモリチェックがあります。メモリカウンタが表示されたとき、通常カウンタの下または画面の下部の辺りに、BIOSセットアップにアクセスするために押すキーについて表示されています。通常は、<keycap function="delete"/>、<keycap>F1</keycap>、または<keycap function="escape"/>のいずれかのキーを押します。BIOSセットアップ画面が表示されるまでこのキーを押します。
   </para>
   <procedure xml:id="proc.trouble.install.bios">
    <title>BIOSのブートシーケンスの変更</title>
    <step>
     <para>
      ブートルーチンによって宣言されたように、適切なキーを使用してBIOSを入力します。その後、BIOS画面が表示されるのを待ちます。
     </para>
    </step>
    <step>
     <para>
      AWARD BIOSでブートシーケンスを変更するには、<guimenu>BIOS FEATURES SETUP</guimenu>エントリを探してください。他のメーカでは、<guimenu>ADVANCED CMOS SETUP</guimenu>といった違う名前が使用されています。エントリが見つかったら、そのエントリを選択して、<keycap function="enter"/>キーを押して確定します。
     </para>
    </step>
    <step>
     <para>
      開いた画面で、<guimenu>BOOT SEQUENCE</guimenu>または<guimenu>BOOT ORDER</guimenu>というサブエントリを探します。DVDドライブが最初に表示されるまで<keycap function="pageup"/>&gt;キーまたは<keycap function="pagedown"/>&gt;キーを押して、設定を変更します。
     </para>
    </step>
    <step>
     <para>
      <keycap function="escape"/>キーを押してBIOS設定画面を終了します。設定を保存するには、<guimenu>SAVE &amp; EXIT SETUP</guimenu>を選択し、<keycap>F10</keycap>キーを押します。設定が保存されていることを確認するには、<keycap>Y</keycap>キーを押します。
     </para>
    </step>
   </procedure>
   <procedure>
    <title>SCSI BIOS (Adaptecホストアダプタ)内でのブートシーケンスの変更</title>
    <step>
     <para>
      <keycombo> <keycap function="control"/>
      <keycap>A</keycap> </keycombo>キーを押してセットアップを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>ディスクユーティリティ</guimenu>を選択します。これで、接続したハードウェアコンポーネントが表示されるようになります。
     </para>
     <para>
      ご使用のDVDドライブに割り当てられているSCSI IDの記録をとります。
     </para>
    </step>
    <step>
     <para>
      <keycap function="escape"/>キーを押して、メニューを閉じます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>アダプタセッティングの設定</guimenu>を開きます。<guimenu>追加オプション</guimenu>で、<guimenu>Boot Device Options (ブートデバイスオプション)</guimenu>を選択し、<keycap function="enter"/>キーを押します。
     </para>
    </step>
    <step>
     <para>
      DVDドライブのIDを入力して、再度<keycap function="enter"/>キーを押します。
     </para>
    </step>
    <step>
     <para>
      <keycap function="escape"/>キーを2回押して、SCSI BIOSの起動画面に戻ります。
     </para>
    </step>
    <step>
     <para>
      <guimenu>はい</guimenu>を押して、この画面を終了しコンピュータを起動します。
     </para>
    </step>
   </procedure>
   <para>
    最終的なインストールが使用する言語やキーボードレイアウトに関係なく、BIOS設定では、通常以下の図に示されているようなUSキーボードレイアウトが使用されます。<indexterm>
    <primary>USキーボードレイアウト</primary>
    </indexterm>
   </para>
   <figure xml:id="fig.trouble.install.keyboard_us">
    <title>USキーボードレイアウト</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="keyboard_us.svg" width="75%" format="SVG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="keyboard_us.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="sec.trouble.install.noboot">
   <title>ブートできない</title>
   <para>
    ハードウェアのタイプ(主にかなり旧式かごく最近のタイプ)では、インストールが失敗するものもあります。多くの場合、こうしたことは、インストール済み環境のカーネル内でこのタイプのハードウェアがサポートされていないことや、カーネルに含まれている特定の機能(一部のハードウェアで依然として問題を引き起こすACPIなど)が原因である可能性があります。
   </para>
   <para>
    最初のインストールブート画面から、標準の<guimenu>インストール</guimenu>モードを使用してインストールするのに失敗した場合、以下のことを試してみてください。
   </para>
   <procedure>
    <step>
     <para>
      DVDがドライブにまだ入った状態であれば、<keycombo action="press"> <keycap function="control"/>
      <keycap function="alt"/> <keycap function="delete"/> </keycombo>&lt;&gt;+&lt;&gt;+&lt;&gt;&gt;を押すか、ハードウェアリセットボタンを使用して、コンピュータを再起動します。
     </para>
    </step>
    <step>
     <para>
      ブート画面が表示されたら、<keycap>F5</keycap>キーを押すか、キーボードの矢印キーを使用して、<guimenu>ACPIなし</guimenu>を探し、<keycap function="enter"/>キーを押してブートおよびインストールプロセスを開始します。このオプションはACPIの電源管理技術を無効にします。
     </para>
    </step>
    <step>
     <para>
      <xref linkend="cha.inst"/>の中での説明に従って、インストールを進めます。
     </para>
    </step>
   </procedure>
   <para>
    これが失敗する場合、以上で述べた手順の代わりに<guimenu>セーフ設定</guimenu>を選択してインストール処理を続行します。このオプションはACPIおよびDMAサポートを無効化します。このオプションを使うと、ほとんどのハードウェアが起動します。
   </para>
   <para>
    両方のオプションともに失敗する場合、ブートオプションプロンプトを使用して、ハードウェアタイプをサポートするのに必要な追加のパラメータをインストールカーネルに渡します。ブートオプションとして使用可能なパラメータの詳細については、<filename>/usr/src/linux/Documentation/kernel-parameters.txt</filename>にあるカーネルマニュアルを参照してください。
   </para>
   <tip>
    <title>カーネルマニュアルの取得</title>
    <para>
     kernel-source<systemitem class="systemname">パッケージをインストールして、カーネルマニュアルを表示します。</systemitem>
    </para>
   </tip>
   <para>
    他にさまざまなACPI関連のカーネルパラメータがあります。それらのパラメータは、インストールのために起動する前のブートプロンプトで入力できます。
   </para>
   <variablelist>
    <varlistentry>
     <term><systemitem>acpi=off</systemitem>
     </term>
     <listitem>
      <para>
       このパラメータは、コンピュータ上の完全ACPIサブシステムを無効にします。これはコンピュータがACPIを処理できない場合、またはコンピュータのACPIが問題を引き起こしていると考えられる場合に役に立つ可能性があります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>acpi=force</systemitem>
     </term>
     <listitem>
      <para>
       2000年より前の日付が付けられた古いBIOSを持つコンピュータであっても、常にACPIを有効にします。このパラメータは、<systemitem>acpi=off</systemitem>に加えて設定された場合、ACPIも有効にします。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>acpi=noirq</systemitem>
     </term>
     <listitem>
      <para>
       ACPIはIRQルーティングには使用しません。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>acpi=ht</systemitem>
     </term>
     <listitem>
      <para>
       hyper-threadingを有効化するのに十分なACPIのみ実行します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>acpi=strict</systemitem>
     </term>
     <listitem>
      <para>
       厳密にはACPI仕様互換ではないプラットフォームに対する耐性が弱くなります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>pci=noacpi</systemitem>
     </term>
     <listitem>
      <para>
       新しいACPIシステムのPCI IRQルーティングを無効にします。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>pnpacpi=off</systemitem>
     </term>
     <listitem>
      <para>
       このオプションは、BIOSセットアップに誤った割り込みまたはポートがある場合のシリアルまたはパラレルの問題向けです。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>notsc</systemitem>
     </term>
     <listitem>
      <para>
       タイムスタンプカウンタを無効にします。このオプションを使用して、システムのタイミングについての問題に対処できます。これは最近の機能で、コンピュータに特に時間や全面的なハングなどの遅れが見られる場合に、このオプションを試す価値があります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>nohz=off</systemitem>
     </term>
     <listitem>
      <para>
       nohz機能を無効にします。マシンがハングした場合、このオプションが役に立ちます。それ以外の場合は、使用しません。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    パラメータの正しい組み合わせを決定したら、システムが次回適切に起動することを確実にするために、YaSTは自動的にそれらのパラメータをブートローダの設定に書き込みます。
   </para>
   <para>
    カーネルのロード中、またはインストール中に説明できないエラーが発生した場合は、ブートメニューから<guimenu>メモリテスト</guimenu>を選択し、メモリを確認します。<guimenu>メモリテスト</guimenu>がエラーを返す場合、それは通常はハードウェアのエラーです。
   </para>
  </sect2>

  <sect2 xml:id="sec.trouble.install.graph">
   <title>グラフィカルインストーラを起動できない</title>
   <para>
    メディアをドライブに挿入しコンピュータを再起動した後に、インストール画面が表示されますが、<guimenu>インストール</guimenu>を選択すると、グラフィカルインストーラは起動しません。
   </para>
   <para>
    この問題に対処する方法はいくつかあります。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      インストールダイアログ用に、他の画面解像度を選択してみます。
     </para>
    </listitem>
    <listitem>
     <para>
      インストール用に<guimenu>テキストモード</guimenu>を選択します。
     </para>
    </listitem>
    <listitem>
     <para>
      VNCを介して、グラフィカルインストーラを使ってリモートインストールをします。
     </para>
    </listitem>
   </itemizedlist>
   <procedure xml:id="proc.trouble.install.graph">
    <title>インストール時の画面解像度の変更</title>
    <step>
     <para>
      インストールのために起動します。
     </para>
    </step>
    <step>
     <para>
      <keycap>F3</keycap>キーを押して、インストール用に低解像度を選択するメニューを開きます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>インストール</guimenu>を選択し、<xref linkend="cha.inst"/>の中の説明に従ってインストールを続行します。
     </para>
    </step>
   </procedure>
   <procedure xml:id="proc.trouble.install.text">
    <title>テキストモードのインストール</title>
    <step>
     <para>
      インストールのために起動します。
     </para>
    </step>
    <step>
     <para>
      <keycap>F3</keycap>キーを押して、<guimenu>テキストモード</guimenu>を選択します。
     </para>
    </step>
    <step>
     <para>
      <guimenu>インストール</guimenu>を選択し、<xref linkend="cha.inst"/>の中の説明に従ってインストールを続行します。
     </para>
    </step>
   </procedure>
   <procedure xml:id="proc.trouble.install.vnc">
    <title>VNCによるインストール</title>
    <step>
     <para>
      インストールのために起動します。
     </para>
    </step>
    <step>
     <para>
      ブートオプションプロンプトに以下のテキストを入力します。
     </para>
<screen>vnc=1 vncpassword=<replaceable>some_password</replaceable></screen>
     <para>
      <replaceable>some_password</replaceable>の部分はVNCインストール用に使用するパスワードに置き換えます。
     </para>
    </step>
    <step>
     <para>
      <guimenu>インストール</guimenu>を選択し、<keycap function="enter"/>キーを押してインストールを開始します。
     </para>
     <para>
      グラフィカルインストールルーチンに入る代わりに、システムはテキストモードで実行され、その後停止します。その際、IPアドレスおよびポート番号が含まれるメッセージが表示されますが、これらは、ブラウザインタフェースまたはVNCビューアアプリケーションを使用してインストーラにアクセスできるようにするために必要です。
     </para>
    </step>
    <step>
     <para>
      ブラウザを使用してインストーラにアクセスする場合は、ブラウザを起動し、今後<phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>が実行されるマシン上のインストール手順で提供されたアドレス情報を入力して、<keycap function="enter"/>キーを押します。
     </para>
<screen>http://<replaceable>ip_address_of_machine</replaceable>:5801</screen>
     <para>
      ブラウザウィンドウでは、VNCのパスワードを入力するように要求するダイアログが開かれます。パスワードを入力し、<xref linkend="cha.inst"/>の説明に従ってインストールを続行します。
     </para>
     <important>
      <title>クロスプラットフォームのサポート</title>
      <para>
       VNC経由のインストールでは、Javaサポートが有効化されていれば、オペレーションシステムやブラウザの種類を問いません。
      </para>
     </important>
     <para>
      プロンプトが表示されたら、VNCビューアにIPアドレスとパスワードを入力します。インストールダイアログを表示するウィンドウが開きます。通常のようにインストールを続行します。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.trouble.install.mini">
   <title>最低限のブート画面だけが起動する</title>
   <para>
    メディアをドライブに挿入して、BIOSルーチンは終了しますが、システム上でグラフィカルブート画面が開始しません。その代わりに、最小限のテキストベースのインタフェースが起動されます。これは、グラフィカルブート画面を表示するのに十分なグラフィックメモリを持っていないコンピュータを使用する場合に起こる可能性がります。
   </para>
   <para>
    テキストのブート画面は最小限に見えますが、グラフィカルブート画面が提供する機能とほぼ同じものを提供します。
   </para>
   <variablelist>
    <varlistentry>
     <term>ブートオプション</term>
     <listitem>
      <para>
       グラフィカルインタフェースとは違い、キーボードのカーソルキーを使って異なるブートオプションを選択することはできません。テキストモードのブート画面のブートメニューでは、ブートプロンプトで入力するキーワードが表示されます。これらのキーワードはグラフィカルバージョンで提供されているオプションにマップしています。任意のキーワードを入力し、<keycap function="enter"/>キーを押して、ブートプロセスを起動します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>カスタムブートオプション</term>
     <listitem>
      <para>
       ブートオプションを選択したあと、ブートプロンプトで適切なキーワードを入力するか、<xref linkend="sec.trouble.install.noboot"/>の中で説明されているカスタムブートオプションを入力します。インストールプロセスを起動するには、<keycap function="enter"/>キーを押します。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>画面解像度</term>
     <listitem>
      <para>
       ファンクションキー(<keycap>F1</keycap> ... <keycap>F12</keycap>)を使用して、インストールに使用する画面解像を決定します。テキストモードで起動する必要がある場合は、<keycap>キーを選択します。</keycap>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>
  
 </sect1>

 <sect1 xml:id="sec.trouble.boot">
  <title>ブートの問題</title>

  <para>
   ブートの問題とは、システムが適切にブートしないような場合を指します(意図したターゲットおよびログイン画面までブートしない場合)。
  </para>

  <sect2 xml:id="sec.trouble.boot.nogrub">
   <title>GRUB 2ブートローダをロードできない</title>
   <para>
    ハードウェアが問題なく機能している場合、ブートローダが壊れてしまってLinuxがコンピュータ上で起動できない可能性があります。このような場合、ブートローダを修復する必要があります。そのためには、<xref linkend="sec.trouble.data.recover.rescue"/>の説明に従ってレスキューシステムを起動し、<xref linkend="sec.trouble.data.recover.rescue.grub"/>の手順に従う必要があります。
   </para>
   <para>
    または、次の手順でレスキューシステムを使用してブートローダーを修復できます。インストールメディアからマシンをブートします。ブート画面で、<menuchoice><guimenu>詳細</guimenu> <guimenu>Linuxシステムのブート</guimenu></menuchoice>を選択します。インストール済みシステムとカーネルが含まれるディスク、およびデフォルトのカーネルオプションを選択します。
   </para>

   

   <para>
    システムがブートしたら、YaSTを起動して<menuchoice><guimenu>システム</guimenu> <guimenu>ブートローダ</guimenu></menuchoice>に切り替えます。<guimenu>MBRに汎用ブートコードを書き込む</guimenu>オプションが有効になっていることを確認して、<guimenu>OK</guimenu>を押します。これにより、ブートローダが壊れている場合は上書きして修復し、ブートローダが見つからない場合はインストールします。
   </para>

   <para>
    コンピュータが起動しない理由は他にBIOS関連のものが考えられます。
   </para>
   <variablelist>
    <varlistentry>
     <term>BIOS設定</term>
     <listitem>
      <para>
       ハードディスクの参照情報については、BIOSを確認してください。ハードディスク自体が現在のBIOS設定に見つからない場合、GRUB 2が単に開始されていない可能性があります。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>BIOSブートオーダー</term>
     <listitem>
      <para>
       お使いのシステムのブートオーダーがハードディスクを含んでいるか確認します。ハードディスクオプションが有効になっていない場合、システムは適切にインストールされていますが、ハードディスクへのアクセスが要求される際に起動に失敗する可能性があります。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="sec.trouble.boot.hang" os="sled;osuse">
   <title>ログインなし、またはプロンプトが表示される</title>
   <para>
    通常、これはカーネルのアップグレードに失敗した後に発生します。プロセスの最終段階にときどき発生するシステムコンソールのエラーであるということから、<emphasis>「カーネルパニック」として知られます。</emphasis>ソフトウェアのアップグレードに続いてコンピュータを再起動した直後である場合は、実証済みの古いバージョンのLinuxカーネルおよび関連ファイルを使用して再起動します。この操作は、ブートプロセス中にGRUB 2ブートローダ画面で行います。次の手順に従ってください。
   </para>
   <procedure>
    <step>
     <para>
      コンピュータをリセットボタンで再起動するか、いったんオフにしてからオンにします。
     </para>
    </step>
    <step>
     <para>
      GRUB 2のブート画面が表示されたら、<guimenu>詳細オプション</guimenu>項目を選択して、以前のカーネルをメニューから選択します。コンピュータは、旧バージョンのカーネルとその関連ファイルを使用して起動します。
     </para>
    </step>
    <step xml:id="st.trouble.boot.hang.modify_grub">
     <para>
      ブートプロセスが完了してから、新たにインストールされたカーネルを削除します。必要に応じて、デフォルトのブート項目を、YaST<guimenu>ブートローダ</guimenu>モジュールを使用する古いカーネルに設定します。詳細については、<xref linkend="sec.grub2.yast2.config"/>を参照してください。ただし、多くの場合、このファイルの更新は必要ありません。このファイルは、通常、ロールバック処理時に自動更新ツールにより変更されるからです。
     </para>
    </step>
    <step>
     <para>
      再起動します。
     </para>
    </step>
   </procedure>
   <para>
    これでも問題が解決されない場合は、インストールメディアを使用してコンピュータをブートしてください。コンピュータが起動したら、 「<xref linkend="st.trouble.boot.hang.modify_grub" xrefstyle="StepOnPage"/>」を続行します。
   </para>
  </sect2>

  <sect2 xml:id="sec.trouble.boot.prompt">
   <title>グラフィカルログインがない</title>
   <para>
    マシンは起動するものの、グラフィカルログインマネージャがブートしない場合は、デフォルトのsystemdターゲットの選択、またはXウィンドウシステムの設定のいずれかに問題があると考えられます。現在のデフォルトのsystemdターゲットを確認するには、<command>sudo systemctl get-default</command>コマンドを実行します。返された値がgraphical.target<emphasis>で</emphasis>
    <literal/>「ない」場合、<command>sudo systemctl isolate graphical.target</command>コマンドを実行します。グラフィカルログイン画面が起動する場合は、ログインして、<menuchoice> <guimenu>YaST</guimenu>
    <guimenu>システム</guimenu> <guimenu>サービスマネージャ</guimenu></menuchoice>を起動し、<guimenu>デフォルトのシステムターゲット</guimenu>を<guimenu>Graphical Interface (グラフィカルインタフェース)</guimenu>に設定します。今後、システムはグラフィカルログイン画面でブートするようになります。
   </para>
   <para>
    ブートするかグラフィカルターゲットに切り替わっても、グラフィカルログイン画面が起動しない場合は、ご使用のデスクトップかXウィンドウソフトウェアの設定が間違っているか、破損している可能性があります。<filename>/var/log/Xorg.*.log</filename>のログファイルで、Xサーバが起動を試みた際にXサーバによって記録された詳細メッセージを調べます。デスクトップの起動に失敗する場合は、<command>システムジャーナルにエラーメッセージが記録されている場合があります。エラーメッセージはjournalctl</command>コマンド(詳細は<xref linkend="cha.journalctl"/>を参照)で問い合わせることができます。これらのエラーメッセージがXサーバの設定の問題を示唆している場合は、これを直すようにしてください。それでもグラフィカルシステムが起動しない場合は、グラフィカルデスクトップを再インストールすることを考えてください。
   </para>

  </sect2>

  <sect2 xml:id="sec.trouble.boot.btrfs">
   <title>ルートBtrfsパーティションをマウントできない</title>
   <para>
    <systemitem class="filesystem">btrfs</systemitem>ルートパーティションが壊れた場合は、次のオプションを試してみてください。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      <option>-o recovery</option>オプションを使用してパーティションをマウントする。
     </para>
    </listitem>
    <listitem>
     <remark>toms 2014-03-12: According to FATE#315126: "this one is open to debate, it might do more harm than good.."</remark>
     <para>
      これが失敗する場合は、ルートパーティション上で<command>btrfs-zero-log</command>を実行する。
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec.trouble.boot.forcecheck">
   <title>ルートパーティションを強制的に確認する</title>
   <remark>toms 2016-05-18: FATE#320126</remark>
   <para>
    ルートパーティションが壊れた場合、パラメータ
    <parameter>forcefsck</parameter> をブートプロンプトで使用します。これにより、オプション<option>-f</option>(強制)が<command>fsck</command>コマンドに渡されます。
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.trouble.login">
  <title>Loginの問題</title>

  <para>
   ログインの問題とは、お使いのマシンが予期されるようこそ画面またはログインプロンプトまで実際に起動するが、ユーザ名およびパスワードを受け付けない、または受け付けるが、その後適切な動きをしない場合です(グラフィックデスクトップ開始の失敗、エラーの発生、コマンドラインに落ちる、など)。
  </para>

  <sect2 xml:id="sec.trouble.login.no">
   <title>有効なユーザ名とパスワードを使っても失敗する</title>
   <para>
    この問題は、一般的にシステムがネットワーク認証またはディレクトリサービスを使用するように設定されており、何らかの理由で、設定されたサーバから結果を取得できない場合に発生します。このような場合でも、<systemitem class="username">root</systemitem>ユーザは唯一のローカルユーザとしてこれらのコンピュータにログインできます。次に、コンピュータが機能しているように見えるのにログインを正しく処理できない一般的な理由をいくつか挙げます。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      ネットワークが機能していません。この場合の更なる対処方法については、<xref linkend="sec.trouble.netconfig"/>を参照してください
     </para>
    </listitem>
    <listitem>
     <para>
      現在、DNSが機能していません(このためGNOMEが動作せず、システムはセキュアサーバに検証済みの要求を送信できません)。すべてのアクションに対して、コンピュータに極端に長い時間かかる場合は、この問題の可能性があります。このトピックの詳細は、<xref linkend="sec.trouble.netconfig"/>を参照してください。
     </para>
    </listitem>
    <listitem>
     <para>
      システムがKerberosを使用するように設定されている場合、システムのローカルタイムは、Kerberosサーバのタイムとの間で許容される相違を超えてしまっている可能性があります(通常 300秒)。NTP (network time protocol)が適切に動いていない、またはローカルのNTPサーバが動いていない場合、Kerberos の認証は機能しなくなります。その理由は、この認証はネットワーク間の一般的なクロック同期に依存しているからです。
     </para>
    </listitem>
    <listitem>
     <para>
      システムの認証設定が間違って設定されています。関連するPAM設定ファイルの中に誤字や命令の順序違いがないか確認します。PAMおよび関連する設定ファイルの構文に関する背景情報の詳細については、<xref linkend="cha.pam"/>を参照してください。
     </para>
    </listitem>
    <listitem>
     <para>
      ホームパーティションが暗号化されています。このトピックの詳細は、<xref linkend="sec.trouble.login.encrypted"/>を参照してください。
     </para>
    </listitem>
   </itemizedlist>
   <para>
    外部のネットワーク問題を含まない他のすべての問題については、解決方法としてシステムをシングルユーザモードに再起動して、動作モードに再び起動してログインし直す前に、設定を修復します。シングルユーザモードで起動するには、次の手順に従います。
   </para>
   <procedure xml:id="proc.trouble.login.no">
    <step>
     <para>
      システムを再起動します。ブート画面の表示に続き、プロンプトが表示されます。
     </para>
    </step>

    <step>
     <para>
      <keycap function="escape"/>を押して、スプラッシュスクリーンを終了し、GRUB 2テキストベースメニューに移動します。
     </para>
    </step>
    <step>
     <para>
      <keycap>B</keycap>を押して、GRUB 2エディタを起動します。
     </para>
    </step>
    <step>
     <para>
      カーネルパラメータを含む行に次のパラメータを追加します。
     </para>
<screen>systemd.unit=rescue.target</screen>
    </step>
    <step>
     <para>
      <keycap>F10</keycap>キーを押します。
     </para>
    </step>
    <step>
     <para>
      <systemitem class="username">root</systemitem>のユーザ名とパスワードを入力します。
     </para>
    </step>
    <step>
     <para>
      必要な変更をすべて加えます。
     </para>
    </step>
    <step>
     <para>
      コマンドラインに「<command>systemctl isolate graphical.target</command>」と入力して、完全なマルチユーザおよびネットワークモードでブートします。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.trouble.login.pw">
   <title>有効なユーザ名とパスワードが受け付けられない</title>
   <para>
    これは、今のところユーザが経験する問題のうち、最も一般的なものです。その理由は、この問題が起こる原因がたくさんあるからです。ローカルのユーザ管理および認証を使用するか、ネットワーク認証を使用するかによって、異なる原因によりログイン失敗が発生します。
   </para>
   <para>
    ローカルユーザ管理は、次の原因により失敗する可能性があります。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      間違ったパスワードを入力した可能性があります。
     </para>
    </listitem>
    <listitem>
     <para>
      ユーザのホームディレクトリが、破損または書き込み保護されたデスクトップ設定ファイルを含んでいます。
     </para>
    </listitem>
    <listitem>
     <para>
      この特定のユーザを認証するのに、X Window Systemに何らかの問題があります。特に、ユーザのホームディレクトリが、現在のLinuxをインストールする以前の他のLinuxディストリビューションによって使用されている場合です。
     </para>
    </listitem>
   </itemizedlist>
   <para>
    ローカルログイン失敗の原因を発見するには、次の手順に従います。
   </para>
   <procedure>
    <step>
     <para>
      認証方式全体をデバッグする前に、ユーザがパスワードを正しく覚えているか確認します。ユーザが正しいパスワードを覚えていない場合は、YaSTユーザ管理モジュールを使用してそのユーザのパスワードを変更します。<keycap>Caps Lock</keycap>キーに注意し、必要に応じてそのロックを解除します。
     </para>
    </step>
    <step>
     <para>
      <systemitem class="username">root</systemitem>ユーザでログインし、ログインプロセスおよびPAMのエラーメッセージがないかどうか<command>journalctl -e</command>でシステムジャーナルを確認します。
     </para>
    </step>
    <step>
     <para>
      コンソールからログインしてみます(<keycombo>
      <keycap function="control"/> <keycap function="alt"/> <keycap>   F1</keycap>
      </keycombo> キーを使用)。これが成功する場合、PAMには問題はありません。その理由は、そのユーザをそのコンピュータ上で認証可能だからです。XウィンドウシステムまたはGNOMEデスクトップに問題がないか探してみてください。詳細については、<xref linkend="sec.trouble.login.dk"/>を参照してください。
     </para>
    </step>
    <step>
     <para>
      ユーザのホームディレクトリが他のLinuxディストリビューションによって使用されている場合、ユーザのホームにある<filename>Xauthority</filename>ファイルを削除します。<keycombo>
      <keycap function="control"/> <keycap function="alt"/> <keycap>   F1</keycap>
      </keycombo> キーを押してコンソールログインを使用し、<command>rm .Xauthority</command>をこのユーザとして実行します。これにより、X認証の問題はこのユーザに関してはなくなるはずです。グラフィカルログインを再試行します。
     </para>
    </step>

    <step>
     <para>
      設定ファイルが壊れていて、デスクトップが開始できなかった場合、<xref linkend="sec.trouble.login.dk"/>に進みます。
     </para>
    </step>
   </procedure>
   <para>
    次に、特定のマシンで特定のユーザのネットワーク認証が失敗する一般的な理由を示します。
   </para>
   <itemizedlist>
    <listitem>
     <para>
      間違ったパスワードを入力した可能性があります。
     </para>
    </listitem>
    <listitem>
     <para>
      コンピュータのローカル認証ファイルの中に存在し、ネットワーク認証システムからも提供されるユーザ名が競合しています。
     </para>
    </listitem>
    <listitem>
     <para>
      ホームディレクトリは存在しますが、それが壊れている、または利用不可能です。書き込み保護がされているか、その時点でアクセスできないサーバ上にディレクトリが存在するかのどちらかの可能性があります。
     </para>
    </listitem>
    <listitem>
     <para>
      認証システム内で、ユーザがその特定のサーバにログインする権限がありません。
     </para>
    </listitem>
    <listitem>
     <para>
      コンピュータのホスト名が何らかの理由で変更されていて、そのホストにユーザがログインするパーミッションがありません。
     </para>
    </listitem>
    <listitem>
     <para>
      コンピュータが、認証サーバまたはそのユーザの情報を含んでいるディレクトリサーバに接続できません。
     </para>
    </listitem>
    <listitem>
     <para>
      この特定のユーザを認証するのに、X Window Systemに何らかの問題があります。特に、ユーザのホームが、現在のLinuxをインストールする以前に他のLinuxディストリビューションによって使用されている場合です。
     </para>
    </listitem>
   </itemizedlist>
   <para>
    ネットワーク認証におけるログイン失敗の原因を突き止めるには、次の手順に従います。
   </para>
   <procedure xml:id="proc.trouble.login.pw">
    <step>
     <para>
      認証方式全体をデバッグする前に、ユーザがパスワードを正しく覚えているか確認します。
     </para>
    </step>
    <step>
     <para>
      認証用にマシンが利用するディレクトリサーバを判別し、それがきちんと動作しており、他のマシンと適切に通信していることを確認します。
     </para>
    </step>
    <step>
     <para>
      ユーザのユーザ名およびパスワードが他のマシン上でも使用できるかを判別し、そのユーザの認証データが存在し、適切に配布されていることを確認します。
     </para>
    </step>
    <step>
     <para>
      別のユーザが、問題のある動きをしているマシンにログインできるかどうかを確認します。別のユーザで問題なくログインできる場合、または<systemitem class="username">root</systemitem>でログインできる場合、ログイン後、<command>journalctl -e</command>&gt;ファイルでシステムジャーナルを調べます。ログインの試行に対応するタイムスタンプを見つけ出し、PAMによって、エラーメッセージが生成されていないか判別します。
     </para>
    </step>
    <step>
     <para>
      コンソールからログインしてみます(<keycombo>
      <keycap function="control"/> <keycap function="alt"/> <keycap>   F1</keycap>
      </keycombo> キーを使用)。これが成功する場合、PAMやユーザのホームがあるディレクトリサーバには問題はありません。その理由は、そのユーザをそのコンピュータ上で認証可能だからです。XウィンドウシステムまたはGNOMEデスクトップに問題がないか探してみてください。詳細については、<xref linkend="sec.trouble.login.dk"/>を参照してください。
     </para>
    </step>
    <step>
     <para>
      ユーザのホームディレクトリが他のLinuxディストリビューションによって使用されている場合、ユーザのホームにある<filename>Xauthority</filename>ファイルを削除します。<keycombo>
      <keycap function="control"/> <keycap function="alt"/> <keycap>   F1</keycap>
      </keycombo> キーを押してコンソールログインを使用し、<command>rm .Xauthority</command>をこのユーザとして実行します。これにより、X認証の問題はこのユーザに関してはなくなるはずです。グラフィカルログインを再試行します。
     </para>
    </step>

    <step>
     <para>
      設定ファイルが壊れていて、デスクトップが開始できなかった場合、<xref linkend="sec.trouble.login.dk"/>に進みます。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.trouble.login.encrypted">
   <title>暗号化されたホームパーティションへのログインが失敗します</title><indexterm>
   <primary>暗号化</primary>
   <secondary>ホームパーティションの問題</secondary></indexterm>
   <para>
    ラップトップでは暗号化されたホームパーティションの使用が推奨されます。ラップトップにログインできない場合、通常その理由は簡単です。パーティションのロックを解除できなかったためです。
   </para>
   <para>
    ブート時に、暗号化パーティションのロックを解除するためにパスフレーズを入力する必要があります。パスフレーズを入力しない場合、パーティションがロックしたまま起動プロセスが続行します。
   </para>
   <para>
    暗号化されたパーティションのロックを解除するには、次の手順に従います。
   </para>
   <procedure>
    <step>
     <para>
      <keycombo> <keycap function="control"/>
      <keycap function="alt"/> <keycap>&gt;+&lt;&gt;+&lt;F1</keycap> </keycombo>&gt;でテキストコンソールに切り替えます。
     </para>
    </step>
    <step>
     <para>
      <systemitem class="username">root</systemitem>になります。
     </para>
    </step>
    <step>
     <para>
      次のコマンドにより、ロックを解除するプロセスを再開します。
     </para>
<screen>systemctl restart home.mount</screen>
    </step>
    <step>
     <para>
      暗号化されたパーティションのロックを解除するためのパスフレーズを入力します。
     </para>
    </step>
    <step>
     <para>
      テキストコンソールを終了し、<keycombo>
      <keycap function="alt"/> <keycap>&gt;+&lt;F7</keycap> </keycombo>&gt;でログイン画面に切り替えます。
     </para>
    </step>
    <step>
     <para>
      通常通りログインします。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.trouble.login.dk">
   <title>ログインは成功したがGNOMEデスクトップが失敗する</title>
   <para>
    この場合に、GNOME環境設定ファイルが破損している可能性があります。兆候としては、キーボードがうまく動かない、画面のジオメトリが歪んでいる、または画面が空の灰色領域として表示されるなどがあります。この問題の重要な特徴は、他のユーザがログインする場合は、コンピュータは普通に機能するという点です。このような場合、問題のユーザのGNOME設定ディレクトリを単に新しい場所に移すことで、が新しいデスクトップを初期化するので、比較的簡単にこの問題を解決できます。ユーザはGNOMEの再設定を強いられますが、データが失われません。
   </para>
   <procedure xml:id="proc.trouble.login.dk">
    <step>
     <para>
      <keycombo>
      <keycap function="control"/> <keycap function="alt"/> <keycap>&gt;+&lt;&gt;+&lt;F1</keycap>
      </keycombo>&gt;を押して、テキストコンソールを切り替えます。
     </para>
    </step>
    <step>
     <para>
      ユーザ名でログインします。
     </para>
    </step>
    <step>
     <para>
      ユーザのGNOME設定ディレクトリを、一時的な場所に移動します。
     </para>
<screen>mv .gconf  .gconf-ORIG-RECOVER
mv .gnome2 .gnome2-ORIG-RECOVER</screen>
    </step>
    <step>
     <para>
      ログアウトします。
     </para>
    </step>
    <step>
     <para>
      もう一度ログインします。ただし、アプリケーションは何も実行しないでください。
     </para>
    </step>
    <step>
     <para>
      次のようにして、<filename>~/.gconf-ORIG-RECOVER/apps/</filename>ディレクトリを、新しい<filename>~/.gconf</filename>ディレクトリにコピーすることで個々のアプリケーション設定データ(Evolutionの電子メールクライアントデータを含む)を回復します。
     </para>
<screen>cp -a .gconf-ORIG-RECOVER/apps .gconf/</screen>
     <para>
      これによってログインの問題が生じる場合は、重要なアプリケーションデータのみの回復を試み、アプリケーションの残りを再設定します。
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.trouble.netconfig">
  <title>ネットワークの問題</title>

  <para>
   システム上の問題は、最初はそうは見えないのですが、ネットワークに関する問題であることが多いです。例えば、システムにユーザがログインできない理由は、ある種のネットワークの問題であったりします。ここでは、ネットワークの問題に直面した場合の簡単なチェックリストを紹介します。
  </para>

  <procedure xml:id="proc.trouble.config.net">
   <title>ネットワークの問題を識別する方法</title>
   <para>
    コンピュータとネットワークの接続の確認をする場合、以下の手順に従ってください。
   </para>
   <step>
    <para>
     Ethernet接続を使用する場合、はじめにハードウェアを確認します。ネットワークケーブルがコンピュータおよびルータ(またはハブなど)にしっかり差し込まれていることを確認してください。Ethernetコネクタの横に制御ランプがある場合、通常はその両方がアクティブになります。
    </para>
    <para>
     接続に失敗する場合、お使いのネットワークケーブルが他のコンピュータでは使用可能かどうか確認します。使用可能な場合、ネットワークカードに問題の原因があります。ネットワークのセットアップにハブやスイッチを使用している場合は、それらが誤っている可能性もあります。
    </para>
   </step>
   <step>
    <para>
     無線接続を使用7る場合、他のコンピュータからワイヤレスリンクが確立できるかどうか確認します。そうでない場合は、無線ネットワークの管理者にお問い合わせください。
    </para>
   </step>
   <step>
    <para>
     基本的なネットワーク接続を確認し終わったら、どのサービスが応答していないかを探します。お使いの構成上のすべてのネットワークサーバのアドレス情報を集めます。適切なYaSTモジュール内で探すか、システム管理者に問い合わせてください。次のリストには、セットアップにかかわる一般的なネットワークサーバを、それらの故障の兆候とともに表わしています。
    </para>
    <variablelist>
     <varlistentry>
      <term>DNS (ネームサービス)</term>
      <listitem>
       <para>
        壊れた、あるいは誤作動しているネームサービスは、ネットワークの機能にさまざまな形で影響を与えます。ローカルマシンの認証をネットワークサーバで行っている場合、名前解決に問題があるためにそれらのサーバが見つからないと、ユーザはログインすることもできません。壊れたネームサーバが管理するネットワーク内のマシンは、お互いを「認識」<quote/>できないため通信できません。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>NTP (タイムサービス)</term>
      <listitem>
       <para>
        誤作動している、または完全に壊れたNTPサービスは、Kerberosの認証およびXサーバの機能に影響を与えます。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>NFS (ファイルサービス)</term>
      <listitem>
       <para>
        NFSマウントされたディレクトリに保存されたデータを必要とするアプリケーションがあった場合、このサービスがダウンしてるか、間違って設定されていると、そのアプリケーションは起動できないか、正しく機能しません。最悪のケースとしては、<filename>.gconf</filename>サブディレクトリを含んでいる、あるユーザのホームディレクトリが、NFSサーバの故障のために検出されなかった場合、そのユーザ個人のデスクトップ設定が起動しません。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Samba (ファイルサービス)</term>
      <listitem>
       <para>
        故障したSambaサーバ上のディレクトリに保存されたデータを必要とするアプリケーションがある場合、そのアプリケーションは起動できないか、正しく機能しません。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>NIS (ユーザ管理)</term>
      <listitem>
       <para>
        <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>システムがユーザデータを提供するために故障したNISサーバを使用している場合、ユーザはマシンにログインできません。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>LDAP (ユーザ管理)</term>
      <listitem>
       <para>
        <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>システムがユーザデータを提供するために故障したLDAPサーバを使用している場合、ユーザはマシンにログインできません。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Kerberos (認証)</term>
      <listitem>
       <para>
        認証が機能せず、すべてのコンピュータへのログインが失敗します。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>CUPS (ネットワーク印刷)</term>
      <listitem>
       <para>
        ユーザが印刷できません。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     ネットワークサーバが起動しているか、ネットワーク上で接続を確立できる設定になっているか、を確認します。
    </para>
    <important>
     <title>制限</title>
     <para>
      次で説明するデバッグの手順は、内部ルーティングを必要としない、簡単なネットワークサーバ/クライアント設定にのみ適用されます。サーバとクライアントの両方が、追加でルーティングする必要のない同じサブネットのメンバーであることが前提です。
     </para>
    </important>
    <substeps performance="required">
     <step>
      <para>
       <command>ping </command> <replaceable>IP address</replaceable>または<replaceable>hostname </replaceable> (<replaceable>host　name</replaceable>はサーバのホスト名で置き換えます)を使って、サーバが稼働中で、ネットワークに応答しているかどうかを確認します。このコマンドが成功する場合は、目的のホストは起動しており、ネットワークのネームサービスは正しく設定されていることがわかります。
      </para>
      <para>
       pingが「<literal>destination host unreachable</literal>」というメッセージで失敗する場合、お使いのシステムまたは宛先のサーバが正しく設定されていないか、ダウンしています。その場合、他のマシンから<command>ping </command> <replaceable>IP address</replaceable>または<replaceable>your_hostname</replaceable>を実行して、お使いのシステムに到達可能か確認してください。他のマシンからお使いのコンピュータに接続可能な場合には、宛先のサーバが動作していないか、正しく設定されていません。
      </para>
      <para>
       pingが「<literal>unknown host</literal>」というメッセージで失敗する場合、ネームサービスが正しく設定されていないか、使用したホスト名が正しくありません。この問題を詳細に調べるには、<xref linkend="st.trouble.config.net.host" xrefstyle="StepOnPage"/>を参照してください。それでもpingが失敗する場合は、ネットワークカードが正しく設定されていないか、ネットワークのハードウェアに障害があります。
      </para>
     </step>
     <step xml:id="st.trouble.config.net.host">
      <para>
       <command>host</command> <replaceable> hostname</replaceable>を使用して、接続しようとしているサーバのホスト名が適切なIPアドレスに変換され、またその逆も問題ないか確認します。このコマンドによって、このホストのIPアドレスが返される場合、ネームサービスは起動中です。この<command>host</command>コマンドが失敗する場合、お使いのホスト上の名前とアドレス解決に関係するすべてのネットワーク設定ファイルを確認します。
      </para>
      <variablelist>
       <varlistentry>
        <term><filename>/etc/resolv.conf</filename>
        </term>
        <listitem>
         <para>
          このファイルは、ネームサーバおよび現在使用中のドメインを管理するために使用されます。このファイルは手動で変更するか、YaSTまたはDHCPによる自動調整が可能ですが、自動調整のほうをお勧めします。ただし、このファイルが以下のような構造およびネットワークアドレスを含んでいること、さらにドメイン名が正しいことを確認してください。
         </para>
<screen>search <replaceable>fully_qualified_domain_name</replaceable>
nameserver <replaceable>ipaddress_of_nameserver</replaceable></screen>
         <para>
          このファイルには1つ以上のネームサーバのアドレスを含むことができますが、その中の少なくとも1つは、お使いのホストの名前解決が正しくできる必要があります。必要に応じて、YaSTネットワーク設定モジュール(［ホスト名/DNS］タブ)を使用してこのファイルを修正します。
         </para>
         <para>
          ネットワーク接続をDHCPで処理している場合は、DHCPでホスト名とネームサービスの情報を変更できるようにします。このためには、YaSTネットワーク設定モジュール(［ホスト名/DNS］タブ)で、<guimenu>DHCPでホスト名を設定</guimenu> (すべてのインタフェースに対してグローバルに設定することも、インタフェースごとに設定することもできます)、および<guimenu>Update Name Servers and Search List via DHCP (DHCPでネームサーバと検索リストを更新)</guimenu>を選択します。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><filename>/etc/nsswitch.conf</filename>
        </term>
        <listitem>
         <para>
          このファイルは、Linuxがネームサービス情報を探す場所を示します。このようになります。
         </para>
<screen> ...
hosts: files dns
networks: files dns
...</screen>
         <para>
          <option>dns</option>エントリは必須です。これにより、Linuxは外部のネームサーバを使用するようになります。通常、これらのエントリはYaSTにより自動的に管理されますが、慎重にチェックする必要があります。
         </para>
         <para>
          ホスト上で、すべての関連エントリが正しい場合は、システム管理者に依頼して、正しいゾーン情報に関するDNSサーバの設定を確認してもらいます。お使いのホストのDNS設定およびDNSサーバが正しいことが確認できた場合、ネットワークおよびネットワークデバイス設定の確認に進みます。
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </step>
     <step>
      <para>
       お使いのシステムがネットワークサーバに接続できない状況で、ネームサービスの問題を障害原因の可能性リストから除外した場合は、ネットワークカードの設定を確認します。
      </para>
      <para>
       <command>ip addr show </command>
       <replaceable>network_device</replaceable>コマンドを使用して、このデバイスが適切に設定されているか確認します。<option>inet address</option>がネットマスク(<literal>/<replaceable>mask</replaceable></literal>)を使用して正しく設定されていることを確認します。IPアドレス内に間違いがある場合、またはネットワークマスク内で不明のビットがある場合は、ネットワーク設定が使用不可能になります。必要であれば、サーバ上でもこの確認をしてください。
      </para>
     </step>
     <step>
      <para>
       ネームサービスおよびネットワークサービスが正しく設定され起動している場合でも、外部のネットワーク接続がタイムアウトするのに時間がかかったり、完全に失敗する場合は、<command>traceroute </command>
       <replaceable>fully_qualified_domain_name</replaceable> (<systemitem class="username">root</systemitem>ユーザで実行)コマンドを使用して、リクエストがネットワーク上でどのルートを使用するか追跡します。このコマンドは、お使いのコンピュータのリクエストが宛先に到達するまでに経由するゲートウェイ(ホップ)をリストします。各ホップの応答時間およびこのホップに到達可能かどうかをリストします。tracerouteおよびpingコマンドを組み合わせて原因を追究し、管理者に知らせてください。
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <para>
   ネットワーク障害の原因を突き止めたら、自身でそれを解決するか(自分のコンピュータ上に問題がある場合)、お使いのネットワークのシステム管理者に原因について報告し、サービスを再設定するか、必要なシステムを修理してもらってください。
  </para>

  <sect2 xml:id="sec.trouble.networkmanager">
   <title>NetworkManagerの問題</title>
   <remark>This is a bit small, needs more text.</remark>
   <para>
    ネットワーク接続に問題がある場合は、<xref linkend="proc.trouble.config.net"/>の説明に従って原因を絞り込んでください。NetworkManagerが原因と考えられる場合は、以降の説明に従ってNetworkManager障害の理由を調べるために役立つログを取得してください。
   </para>
   <procedure>
    <step>
     <para>
      シェルを開いて、<systemitem class="username">root</systemitem>としてログインします。
     </para>
    </step>
    <step>
     <para>
      NetworkManagerを再起動します。
     </para>
<screen>systemctl restart Network.Manager</screen>
    </step>
    <step>
     <para>
      一般ユーザとして<link xlink:href="http://www.opensuse.org"/>などのWebページを開いて、正常に接続できているかどうかを確認します。
     </para>
    </step>
    <step>
     <para>
      <filename>/var/log/NetworkManager</filename>にある、NetworkManagerに関する情報を収集します。
     </para>
    </step>
   </procedure>
   <para>
    NetworkManagerについての詳細は、<xref linkend="cha.nm"/>を参照してください。
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.trouble.data">
  <title>データの問題</title>

  <para>
   データの問題とは、コンピュータが正常に起動するかしないかに関係なく、システム上でデータが壊れており、システムの修復が必要な場合を言います。このような状況では、システムに障害が発生する前の状態にシステムを復元するために、重要なデータをバックアップする必要があります。<phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>には、システムのバックアップ/復元や、レスキューシステム(壊れたシステムを外部から復元するのに使用可能)用に、専用のYaSTモジュールが用意されています。
  </para>

  <sect2 xml:id="sec.trouble.data.partitions">
   <title>パーティションイメージの管理</title>
   <para>
    パーティション全体、さらにはハードディスク全体からバックアップを実行することが必要になる場合があります。Linuxには、ディスクの正確なコピーを作成できる<command>dd</command>ツールが付属しています。<command>gzip</command>と組み合わせることで、若干の領域の節約になります。
   </para>
   <procedure>
    <title>ハードディスクのバックアップと復元</title>
    <step>
     <para>
      <systemitem class="username">root</systemitem>ユーザとしてシェルを起動します。
     </para>
    </step>
    <step>
     <para>
      ソースデバイスを選択します。これは、<filename>/dev/sda</filename>などが一般的です(<replaceable>SOURCE</replaceable>というラベルが付きます)。
     </para>
    </step>
    <step>
     <para>
      イメージを保存する場所を決めます(<replaceable>BACKUP_PATH</replaceable>というラベルが付きます)。これは、ソースデバイスとは異なる場所にする必要があります。つまり、<filename>/dev/sda</filename>からバックアップを作成する場合、イメージファイルは<filename>/dev/sda</filename>に保存しないでください。
     </para>
    </step>
    <step>
     <para>
      コマンドを実行して圧縮イメージファイルを作成します。
     </para>
<screen>dd if=/dev/<replaceable>SOURCE</replaceable> | gzip &gt; /<replaceable>BACKUP_PATH</replaceable>/image.gz </screen>
    </step>
    <step>
     <para>
      次のコマンドによりハードディスクを復元します。
     </para>
<screen>gzip -dc /<replaceable>BACKUP_PATH</replaceable>/image.gz | dd of=/dev/<replaceable>SOURCE</replaceable></screen>
    </step>
   </procedure>
   <para>
    パーティションをバックアップするだけでよい場合は、<replaceable>SOURCE</replaceable>プレースホルダを各パーティションに置き換えます。この場合、イメージファイルを同じハードディスクにおくことができます。ただし、パーティションは異なります。
   </para>
  </sect2>





  <xi:include href="system_repair.xml"/>
 </sect1>
 
</chapter>
