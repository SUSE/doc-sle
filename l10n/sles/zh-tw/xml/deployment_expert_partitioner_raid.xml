<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_expert_partitioner_raid.xml" version="5.0" xml:id="sec-yast-system-raid">
 <title>軟體 RAID</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>是</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  本節介紹建立和設定多種類型的 RAID 所需的動作。<phrase os="sles">如果您需要 RAID 的相關背景資訊，請參閱<xref linkend="sec-raid-intro"/></phrase>。
 </para>

 <sect2 xml:id="sec-yast-system-raid-conf">
  <title>軟 RAID 組態</title>
  <para>
   YaST <guimenu>RAID</guimenu><guimenu/> 組態可透過 YaST 進階磁碟分割程式來完成，請參閱<xref linkend="sec-expert-partitioner"/>。這個磁碟分割工具可讓您編輯和刪除現有分割區，以及建立將與軟體 RAID 一起使用的新分割區。
  </para>
  <procedure>
   <step>
    <para>
     從<guimenu>硬碟</guimenu>中選取一個硬碟。
    </para>
   </step>
   <step>
    <para>
     切換到<guimenu>分割區</guimenu>索引標籤。
    </para>
   </step>
   <step>
    <para>
     按一下<guimenu>新增</guimenu>，然後輸入此磁碟上 RAID 分割區所需的大小。
    </para>
   </step>
   <step>
    <para>
     使用<guimenu>不格式化分割區</guimenu>並將<guimenu>檔案系統 ID</guimenu>變更為<guimenu>0xFD Linux RAID</guimenu>。不要掛接此分割區。
    </para>
   </step>
   <step>
    <para>
     重複此程序，直到定義了可用磁碟上所有需要的實體磁碟區為止。
    </para>
   </step>
  </procedure>
  <para>
   對於 RAID 0 和 RAID 1，至少需要兩個分割區。對於 RAID 1，通常兩個剛好，無需更多。如果使用 RAID 5，則至少需要三個分割區；RAID 6 和 RAID 10 至少需要四個分割區。建議您僅使用相同大小的分割區。為減少當其中一個硬碟 (RAID 1 和 5) 損壞時會有遺失資料的風險，以及為了最佳化 RAID 0 的效能，RAID 分割區應位於不同的硬碟中。建立所有要使用 RAID 功能的分割區後，按一下<menuchoice><guimenu>RAID</guimenu><guimenu>新增 RAID</guimenu></menuchoice>開始設定 RAID 組態。
  </para>
  <para>
   在下一個對話方塊中，選擇 RAID 層級 0、1、5、6 或 10。然後選取 RAID 系統要使用且類型為<quote>Linux RAID</quote>或<quote>Linux native</quote>的所有分割區。不會顯示交換和 DOS 分割區。
  </para>
  
  <figure xml:id="fig-yast2-system-raid-conf">
   <title>RAID 分割區</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="install_partitioner_raid.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="install_partitioner_raid.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   若要新增之前未指定的分割區給選取的 RAID 磁碟區，請先按一下分割區，再按 <guimenu>新增</guimenu>。指定保留給 RAID 的所有分割區。否則，仍然不會使用分割區上的空間。指定所有分割區後，按<guimenu>下一步</guimenu>選取可用的<guimenu>RAID 選項</guimenu>。
  </para>
  <para>
   在最後一個步驟中，設定要使用的檔案系統、加密以及 RAID 磁碟區的掛接點。按一下<guimenu>完成</guimenu>以完成組態後，便可在<guimenu>進階磁碟分割程式</guimenu>中看到 <filename>/dev/md0</filename> 裝置和以 <emphasis>RAID</emphasis> 表示的其他裝置。
  </para>
 </sect2>

 <sect2 xml:id="sec-yast-system-raid-trouble">
  <title>疑難排解</title>
  <para>
   檢查檔案 <filename>/proc/mdstat</filename> 以確定 RAID 分割區是否已損毀。如果 Th 系統故障，請關閉 Linux 系統並使用以相同方式分割的新硬碟來更換損壞的硬碟。然後重新啟動系統，並輸入 <command>mdadm /dev/mdX --add /dev/sdX</command> 指令。使用特定的裝置識別碼取代 X。如此可將硬碟自動整合到 RAID 系統並完整地重新建構。
  </para>
  <para>
   請注意，雖然您可以在重建期間存取所有資料，但是在完全重建 RAID 之前，您可能會遇到一些效能問題。
  </para>
 </sect2>

 <sect2 xml:id="sec-yast-system-raid-information">
  <title>詳細資訊</title>
  <para>
   可在以下位置找到軟 RAID 的組態指示和更多詳細資料：
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem os="sles">
    <para>
     <xref linkend="part-software-raid"/>
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="http://raid.wiki.kernel.org"/>
    </para>
   </listitem>
  </itemizedlist>
  <para>
   有 Linux RAID 郵寄清單可供參考，如 <link xlink:href="http://marc.info/?l=linux-raid"/>。
  </para>
 </sect2>
</sect1>
