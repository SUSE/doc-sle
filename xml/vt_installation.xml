<?xml version="1.0"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd"
[
  <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<chapter id="cha.vt.installation">
 <title>Installation of Virtualization components</title>
 <para>None of the virtualization tools is installed by default.</para>
 <sect1 id="sec.vt.installation.kvm">
  <title>Installing &kvm;</title>
  <para>
   To install &kvm; and KVM tools, proceed as follows:
  </para>
  <procedure>
   <step>
    <para>
     Start &yast; and choose <menuchoice> <guimenu>Virtualization</guimenu>
     <guimenu>Installing Hypervisor and Tools</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Select <guimenu>KVM server</guimenu>, <guimenu>KVM tools</guimenu> and
     confirm with <guimenu>Accept</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In order to enable normal networking for the &vmguest; using a network
     bridge is recommended. &yast; offers to automatically configure a bridge
     on the &vmhost;. Agree to do so by choosing <guimenu>Yes</guimenu>,
     otherwise choose <guimenu>No</guimenu>.
    </para>
   </step>
   <step>
    <para>
     After the setup has been finished, you can start setting up
     &vmguest;s. Rebooting the &vmhost; is not required.
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 id="sec.vt.installation.xen">
  <title>Installing &xen;</title>
  <para>
   To install &xen; and &xen; tools, proceed as follows:
  </para>
  <procedure>
   <step>
    <para>
     Start &yast; and choose <menuchoice> <guimenu>Virtualization</guimenu>
     <guimenu>Installing Hypervisor and Tools</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Select <guimenu>&xen; server</guimenu>, <guimenu>&xen; tools</guimenu>
     and confirm with <guimenu>Accept</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In order to enable normal networking for the &vmguest; using a network
     bridge is recommended. &yast; offers to automatically configure a bridge
     on the &vmhost;. Agree to do so by choosing <guimenu>Yes</guimenu>,
     otherwise choose <guimenu>No</guimenu>.
    </para>
   </step>
   <step>
    <para>
     After the setup has been finished, you need to reboot the machine
     with the <emphasis>&xen; kernel</emphasis>.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 id="sec.vt.installation.containers">
  <title>Installing Containers</title>
  <para>
   To install containers proceed as follows:
  </para>
  <procedure>
   <step>
    <para>
     Start &yast; and choose <menuchoice> <guimenu>Virtualization</guimenu>
     <guimenu>Installing Hypervisor and Tools</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Select <guimenu>libvirt lxc daemon</guimenu> and confirm with
     <guimenu>Accept</guimenu>.
    </para>
   </step>
<!-- ========================================================= -->
<!-- TODO Either fix Yast to reload apparmor or describe it here -->
<!-- ========================================================= -->
  </procedure>
 </sect1>
 
 <sect1 id="sec.vt.installation.patterns">
  <title>Patterns</title>
  <para>
   It's possible using zypper and patterns to install virtualization
   packages. Run the command <command>zypper in -t pattern
   <replaceable>PATTERN</replaceable></command>. Available patterns are:
  </para>
  <variablelist>
   <varlistentry>
    <term>KVM</term>
    <listitem>
     <itemizedlist>
      <listitem>
       <para>
	<systemitem class="resource">kvm_server</systemitem>: sets up the
	&kvm; &vmhost;
       </para>
      </listitem>
      <listitem>
       <para>
	<systemitem class="resource">kvm_tools</systemitem>: installs the
	libvirt tools for managing and monitoring &vmguest;s
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>KVM</term>
    <listitem>
     <itemizedlist>
      <listitem>
       <para>
	<systemitem class="resource">xen_server</systemitem>: sets up the
	&xen; &vmhost;
       </para>
      </listitem>
      <listitem>
       <para>
	<systemitem class="resource">xen_tools</systemitem>: installs the
	libvirt tools for managing and monitoring &vmguest;s
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Containers</term>
    <listitem>
     <para>
      Theres is no pattern for containers, just install the
      <emphasis>libvirt-daemon-lxc</emphasis> package.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
