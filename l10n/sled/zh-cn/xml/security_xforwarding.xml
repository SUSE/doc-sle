<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="security_xforwarding.xml" version="5.0" xml:id="cha-xauth">
 <title>X Window 系统和 X 身份验证</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker>
   </dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  网络透明性是 Unix 系统最重要的特征之一。X（Unix 操作系统的窗口系统）能够鲜明地利用这一特性。使用 X 可以成功完成以下操作：登录到远程主机并启动一个图形程序，然后可以通过网络发送该程序，使其显示在您的计算机上。
 </para>
 <para>
  如果需要使用 X 服务器远程显示 X 客户端，X 服务器应该防范有人未经授权访问它所管理的资源（显示内容）。更具体地说，必须给客户端指派特定权限。在 X Window 系统中，有两种指派权限的方法，分别为基于主机的访问控制和基于 Cookie 的访问控制。前者依赖应该运行客户端的主机的 IP 地址。用于控制这种指派的程序为 <command>xhost</command>。<command>xhost</command> 将合法客户端的 IP 地址输入到属于 X 服务器的数据库中。不过，依赖 IP 地址进行身份验证并不安全。例如，如果有另一个用户也在发送客户端程序的主机上操作，该用户也可以访问 X 服务器 — 就像某人伪造了 IP 地址一样。由于存在这些缺点，在此不再详述这种身份验证方法，但您可以通过 <command>man</command> <option>xhost</option> 了解更多相关信息。
 </para>
 <para>
  对于基于 Cookie 的访问控制，将生成一个只有 X 服务器和合法用户才知道的字符串（类似于身份证）。登录时，此 Cookie 将存储在用户主目录中的 <filename>.Xauthority</filename> 文件内，可供想要使用 X 服务器来显示窗口的任何 X 客户端使用。用户可以使用工具 <command>xauth</command> 检查文件 <filename>.Xauthority</filename>。如果您重命名了 <filename>.Xauthority</filename> 或者在主目录中意外删除了该文件，将无法打开任何新窗口或 X 客户端。
 </para>
 <para>
  SSH（安全外壳）可用于加密网络连接并以透明方式将其转发到 X 服务器。这也称为 X 转发。要实现 X 转发，需要在服务器端模拟 X 服务器，并在远程主机上为 shell 设置 DISPLAY 变量。有关 SSH 的更多详细信息，请参见 <xref linkend="cha-ssh"/>。
 </para>
 <warning>
  <title>X 转发可能不安全</title>
  <para>
   如果您认为用于登录的计算机不是安全主机，请不要使用 X 转发。如果启用了 X 转发，攻击者可能会通过您的 SSH 连接进行身份验证。然后，攻击者可能会侵入您的 X 服务器，并读取您的键盘输入（举例而言）。
  </para>
 </warning>
</chapter>
