<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="security_spectre_meltdown_checker.xml" version="5.0" xml:id="cha-spectre">
 <title>Spectre/Meltdown Checker</title>
 <info>
  <abstract>
   <para>
    <command>spectre-meltdown-checker</command> 是一个外壳脚本，用于测试您的系统是否容易受到多种推测执行漏洞的影响，这些漏洞在过去 20 年制造的所有 CPU 中普遍存在。这是一种硬件缺陷，攻击者可能会利用它来读取系统上的所有数据。在云计算服务中，如果多个虚拟机位于一台物理主机上，攻击者可以获取对所有虚拟机的访问权限。修复这些漏洞需要重新设计并更换 CPU。在采取此措施之前，可以通过多个软件补丁来缓解这些漏洞。如果您经常在更新 SUSE 系统，应该已安装了所有这些补丁。
   </para>

   <para>
    <command>spectre-meltdown-checker</command> 会生成详细的报告。它不能为您的系统提供安全保证，但会显示采取了哪些缓解措施以及潜在的漏洞。
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <sect1 xml:id="sec-spectre-meltdown-options">
  <title>使用 <command>spectre-meltdown-checker</command></title>

  <para>
   安装该脚本，然后不指定任何选项以 root 身份运行它：
  </para>

<screen><prompt role="root"># </prompt>zypper in spectre-meltdown-checker
<prompt role="root"># </prompt>spectre-meltdown-checker.sh
</screen>

  <para>
   您将看到如<xref linkend="fig-spectre-meltdown-output"/>中所示的彩色输出：
  </para>

  <figure xml:id="fig-spectre-meltdown-output">
   <title>spectre-meltdown-checker 的输出</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="spectre-meltdown.png" width="80%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="spectre-meltdown.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>spectre-meltdown-checker.sh 的部分输出</phrase>
    </textobject>
   </mediaobject>
  </figure>

  <para>
   <command>spectre-meltdown-checker.sh --help</command> 会列出所有选项。此命令可用于将非彩色纯文本输出导出到文件中：
  </para>

<screen><prompt role="root"># </prompt>spectre-meltdown-checker.sh --no-color| tee <replaceable>filename.txt</replaceable>
    </screen>

  <para>
   上述示例是在运行中的系统上执行的情况，这是此脚本的默认运行方式。您也可以指定内核、配置和 System.map 文件的路径来脱机运行 <command>spectre-meltdown-checker</command>：
  </para>

<screen><prompt role="root"># </prompt>cd /boot
<prompt role="root"># </prompt>spectre-meltdown-checker.sh \
--no-color \
--kernel <replaceable>vmlinuz-4.12.14-lp151.28.13-default</replaceable> \
--config <replaceable>config-4.12.14-lp151.28.13-default</replaceable> \
--map <replaceable>System.map-4.12.14-lp151.28.13-default</replaceable>| tee <replaceable>filename.txt</replaceable>
    </screen>

  <para>
   其他有用的选项如下：
  </para>

  <variablelist>
   <varlistentry>
    <term>--verbose、-v</term>
    <listitem>
     <para>
      提高详细级别；重复此选项可以进一步提高详细级别，例如 <command>-v -v
      -v</command>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>--explain</term>
    <listitem>
     <para>
      列显直观易懂的说明
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>--batch [short] [json] [nrpe] [prometheus]</term>
    <listitem>
     <para>
      以各种机器可读格式设置输出格式
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <important>
   <title>--disclaimer 选项</title>
   <para>
    <command>spectre-meltdown-checker.sh --disclaimer</command> 提供有关该脚本能够和不能提供的功能的重要信息。
   </para>
  </important>
 </sect1>
 <sect1 xml:id="sec-spectre-meltdown-resources">
  <title>更多信息</title>

  <para>
   有关详细信息，请参见以下参考：
  </para>

  <itemizedlist>
   <listitem>
    <para>
     SUSE 知识库文章 #7022937 <citetitle>Security Vulnerability:
     Spectre Variant 4 (Speculative Store Bypass) aka
     CVE-2018-3639</citetitle>：<link xlink:href="https://www.suse.com/support/kb/doc/?id=7022937"/>
    </para>
   </listitem>
   <listitem>
    <para>
     GitHub 上的 <citetitle>speed47/spectre-meltdown-checker</citetitle> 源代码，包括相关公共漏洞和暴露 (CVE) 的详细参考：<link xlink:href="https://github.com/speed47/spectre-meltdown-checker"/>
    </para>
   </listitem>
   <listitem>
    <para>
     SUSE 博客文章 <citetitle>Meltdown and Spectre
     Performance</citetitle>：<link xlink:href="https://www.suse.com/c/meltdown-spectre-performance/"/>
    </para>
   </listitem>
   <listitem>
    <para>
     SUSE 知识库文章 #7022512，其中提供了有关体系结构、CVE 和缓解措施的信息：<link xlink:href="https://www.suse.com/support/kb/doc/?id=7022512"/>
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
</chapter>
