<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="grub2_yast_i.xml" version="5.0" xml:id="sec-grub2-yast2-config">
 <title>使用 YaST 設定開機載入程式</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 系統中，設定開機載入程式一般選項最簡單的方法是使用 YaST 模組。在 <guimenu>YaST 控制中心</guimenu>內，選取<menuchoice> <guimenu>系統</guimenu> <guimenu> 開機載入程式</guimenu></menuchoice>。模組會顯示系統目前的開機載入程式組態，並允許您進行變更。
 </para>

 <para>
  使用<guimenu>開機碼選項</guimenu>索引標籤可以檢視和變更關於類型、位置和進階載入程式設定的設定。您可以選擇要在標準模式還是 EFI 模式下使用 GRUB 2。
 </para>

 <important>
  <title>EFI 系統要求使用 GRUB2-EFI</title>
  <para>
   如果您使用的是 EFI 系統，則只能安裝 GRUB2-EFI，否則您的系統不再能夠開機。
  </para>
 </important>

 <important>
  <title>重新安裝開機載入程式</title>
  <para>
   若要重新安裝開機載入程式，請確定變更 YaST 中的一個設定，然後將其復原。例如，若要重新安裝 GRUB2-EFI，請先選取 <guimenu>GRUB2</guimenu>，然後立即重新切換至 <guimenu>GRUB2-EFI</guimenu>。
  </para>
  <para>
   否則，開機載入程式可能只會部分重新安裝。
  </para>
 </important>

 <note>
  <title>自訂開機載入程式</title>
  <para>
   若要使用此處未列出的開機載入程式，請選取<guimenu>請勿安裝任何開機載入程式</guimenu>。請先詳細閱讀開機載入程式的說明文件，再選取這個選項。
  </para>
 </note>

 <sect2 xml:id="sec-grub2-yast2-location">
  <title>開機載入程式位置和開機代碼選項</title>

  <para>
   開機載入程式的預設位置為主開機記錄 (MBR) 或 <filename>/</filename> 分割區的開機磁區，具體取決於分割區設定。若要修改開機載入程式的位置，請執行下列步驟：
  </para>
  <procedure xml:id="pro-sec-grub2-yast2-location">
   <title>變更開機載入程式位置</title>
   <step>
    <para>
     選取<guimenu>開機碼選項</guimenu>索引標籤，然後為<guimenu>開機載入程式位置</guimenu>選擇以下其中一個選項：
    </para>
    <variablelist>
     <varlistentry>
      <term><guimenu>從主開機記錄開機</guimenu>
      </term>
      <listitem>
       <para>
        選取此選項將在包含 <filename>/boot</filename> 目錄的磁碟 MBR 中安裝開機載入程式。通常，這將是掛接到 <filename>/</filename> 的磁碟，但如果 <filename>/boot</filename> 掛接到其他磁碟上的獨立分割區中，則將會使用該磁碟的 MBR。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>從根分割區開機</guimenu>
      </term>
      <listitem>
       <para>
        這會在 <filename>/</filename> 分割區的開機磁區中安裝開機載入程式。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><guimenu>自訂根分割區</guimenu>
      </term>
      <listitem>
       <para>
        這個選項可讓您手動指定開機載入程式的位置。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     按一下<guimenu>確定</guimenu>以套用變更。
    </para>
   </step>
   </procedure>
   <figure xml:id="fig-grub2-yast-boot-code-options0">
    <title>開機代碼選項</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_boot_code.png" width="75%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_boot_code.png" width="75%"/>
     </imageobject>
    </mediaobject>
  </figure>
  <para>
   <guimenu>開機碼選項</guimenu>索引標籤包含以下其他選項：
  </para>
   <variablelist>
    <varlistentry>
     <term><guimenu>在分割區表中為開機分割區設定使用中旗標</guimenu>
     </term>
     <listitem>
      <para>
       啟用包含 <filename>/boot</filename> 目錄的分割區。對於 POWER 系統，則會啟用 PReP 分割區。此選項用於具有舊 BIOS 的系統和/或舊式作業系統，因為它們可能無法從非使用中的分割區開機。您可以放心地啟用此選項。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>將一般開機碼寫入 MBR</guimenu>
     </term>
     <listitem>
      <para>
       如果 MBR 包含自訂的「非 GRUB」代碼，此選項會以不受作業系統限制的泛型代碼取代該代碼。如果您停用此選項，系統可能變得無法開機。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>啟用受信任的開機支援</guimenu>
     </term>
     <listitem>
      <para>
       啟動可支援受信任運算功能的 TrustedGRUB2（受信任的平台摸組 (Trusted Platform Module, TPM)）。如需詳細資訊，請參閱 <link xlink:href="https://github.com/Sirrix-AG/TrustedGRUB2"/>。
      </para>
       </listitem>
    </varlistentry>    
    </variablelist>   
      <para>
      <guimenu>保護性 MBR 旗標</guimenu>區段包含以下選項：
      </para>
    <variablelist>
    <varlistentry>
     <term><guimenu>set</guimenu>
     </term>
     <listitem>
      <para>
       適用於傳統舊版 BIOS 開機。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>remove</guimenu>
     </term>
     <listitem>
      <para>
       適用於 UEFI 開機。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>do not change</guimenu>
     </term>
     <listitem>
      <para>
       如果您已有一個正常運作的系統，這通常是最適合的選項。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
    <para>
       大多數情況下，YaST 預設會使用適合的選項。
    </para>         
       
 </sect2>
 <sect2 xml:id="sec-grub2-yast2-config-order">
  <title>調整磁碟順序</title>
  <para>
   如果您的電腦有多個硬碟，您可以指定磁碟的開機順序。如果從 MBR 開機，將在清單中的第一個磁碟中安裝 GRUB 2。預設在該磁碟中安裝 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>。清單的其餘部分是有關 GRUB 2 的裝置對應程式的提示 (請參閱<xref linkend="sec-grub2-map"/>)。
  </para>
  <warning>
   <title>無法開機的系統</title>
   <para>
    通常情況下，預設值幾乎對所有部署都有效。如果您錯誤地變更了磁碟的開機順序，系統下次重新開機時可能無法開機。例如，如果清單中的第一個磁碟不在 BIOS 開機序列中，並且清單中的其他磁碟有空白 MBR，系統將無法開機。
   </para>
  </warning>
  <procedure xml:id="pro-sec-grub2-yast2-config-order">
   <title>設定磁碟順序</title>
   <step>
    <para>
     開啟<guimenu>開機碼選項</guimenu>索引標籤。
    </para>
   </step>
   <step>
    <para>
     按一下<guimenu>編輯磁碟開機順序</guimenu>。
    </para>
   </step>
   <step>
    <para>
     如果列出超過一個磁碟，請選擇一個磁碟，然後按一下<guimenu>向上</guimenu>或<guimenu>向下</guimenu>重新排列顯示磁碟的順序。
    </para>
   </step>
   <step>
    <para>
     按兩次<guimenu>確定</guimenu>儲存變更。
    </para>
   </step>
  </procedure>
 </sect2>
 <sect2 xml:id="sec-grub2-yast2-config-advanced">
  <title>設定進階選項</title>
  <para>
   可以透過<guimenu>開機載入程式選項</guimenu>索引標籤來設定進階開機參數。
  </para>
  <sect3 xml:id="sec-grub2-yast2-config-advanced-boot-loader">
   <title><guimenu>開機載入程式選項</guimenu>索引標籤</title>
   <figure xml:id="fig-grub2-yast-bootloader-options">
    <title>開機載入程式選項</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_options.png" width="75%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_options.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term><guimenu>開機載入程式逾時</guimenu>
     </term>
     <listitem>
      <para>
       輸入新值或者用滑鼠按住相應的方向鍵，以變更<guimenu>逾時秒數</guimenu>的值。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>偵測外來作業系統</guimenu>
     </term>
     <listitem>
      <para>
       如果選取該選項，開機載入程式將會搜尋其他系統 (例如 Windows) 或其他 Linux 安裝。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>開機時隱藏功能表</guimenu>
     </term>
     <listitem>
      <para>
       隱藏開機功能表並使用預設項目開機。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>調整預設開機項目</guimenu>
     </term>
     <listitem>
      <para>
       從<quote>預設開機區段</quote>清單中選取所需項目。請注意，開機項目名稱中的<quote>&gt;</quote>符號用於分隔開機區段及其子區段。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-grub2-yast2-boot-password">
     <term><guimenu>使用密碼保護開機載入程式</guimenu>
     </term>
     <listitem>
      <para>
       使用一個附加的密碼保護開機載入程式和系統。如需手動設定的詳細資料，請參閱<xref linkend="sec-grub2-password"/>。如果啟用此選項，則每次開機時都需要輸入該密碼，這意味著系統不會自動開機。但是，如果您更偏好 GRUB 1 的行為方式，請額外啟用<guimenu>僅啟用項目修改防護</guimenu>。使用此設定時，任何人都可以選取開機項目並將系統開機，僅在修改開機項目時，才需要提供 GRUB 2 <systemitem class="username">root</systemitem> 使用者的密碼。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
  <sect3 xml:id="sec-grub2-yast2-config-advanced-kernel-parameters">
   <title><guimenu>核心參數</guimenu>索引標籤</title>
   
   <figure xml:id="fig-grub2-yast-kernel-parameters">
    <title>核心參數</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_bootloader_kernel_parameters.png" width="75%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_bootloader_kernel_parameters.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <variablelist>
    <varlistentry>
     <term><guimenu>選擇性核心指令行參數</guimenu>
     </term>
     <listitem>
      <para>
       在此處指定選擇性的核心參數，以啟用/停用系統功能、新增驅動程式，等等。 
      </para>
     </listitem>
    </varlistentry>
    <varlistentry xml:id="vle-grub2-yast2-cpu-mitigations">
     
     <term><guimenu>CPU 緩和措施</guimenu></term>
     <listitem>
      <para>
       SUSE 針對為防禦 CPU 旁路攻擊而部署的所有軟體緩和措施發行了一或多個核心開機指令行參數。其中一些參數可能會導致效能損失。請依據您的設定選擇以下其中一個選項，以在安全性和效能之間取得平衡：
      </para>
     <formalpara>
       <title><guimenu>自動</guimenu></title>
        <para>
   啟用您的 CPU 型號所需的全部緩和措施，但不能防禦跨 CPU 線串的攻擊。此設定可能會在一定程度上影響效能，具體視您的工作負載而定。
  </para>
       </formalpara>
       <formalpara>
       <title><guimenu>自動 + 停用 SMT</guimenu></title>
        <para>
    提供整套可用的安全性緩和措施。啟用您的 CPU 型號所需的全部緩和措施。此外，它還會停用同步多重線串，以避免遭到跨多個 CPU 線串發起的旁路攻擊。此設定可能會進一步影響效能，具體視您的工作負載而定。
    </para>
       </formalpara>
       <formalpara>
       <title><guimenu>關閉</guimenu></title>
         <para>
    停用所有緩和措施。CPU 可能會遭到旁路攻擊，具體視 CPU 型號而定。此設定不會對效能造成任何影響。
   </para>
      </formalpara>
       <formalpara>
       <title><guimenu>手動</guimenu></title>
        <para>
    不設定任何緩和措施層級。請使用核心指令行選項手動指定 CPU 緩和措施。
   </para>
       </formalpara>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>使用圖形主控台</guimenu>
     </term>
     <listitem>
      <para>
       如果核取該選項，則開機功能表會顯示在圖形開頭顯示畫面中，而不是以文字模式顯示。依預設，系統會自動設定開機螢幕的解析度，但您可以透過<guimenu>主控台解析度</guimenu>手動進行設定。可以使用<guimenu>主控台主題</guimenu>檔案選擇器指定圖形主題定義檔案。請僅在您想要套用自己的自訂主題時，才變更此設定。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>使用序列控制台</guimenu>
     </term>
     <listitem>
      <para>
       如果您的機器是透過序列控制台控制的，請啟用此選項並指定以何速度來使用哪一個 COM 埠。請參閱 <command>info grub</command> 或 <link xlink:href="http://www.gnu.org/software/grub/manual/grub.html#Serial-terminal"/>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect3>
 </sect2>
</sect1>
