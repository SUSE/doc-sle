<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_manpart.xml" version="5.0" xml:id="sec.yast2.i_y2_part_expert">
 <title>Utilizzo della modalità di partizionamento di YaST</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>sì</dm:translation>
  </dm:docmanager>
 </info><indexterm>

 <primary>YaST</primary>

 <secondary>partizionamento</secondary></indexterm><indexterm>

 <primary>partizioni</primary>

 <secondary>creazione</secondary></indexterm>

 <para>
  La modalità di partizionamento per esperti illustrata in <xref linkend="fig.yast2.i_y2_disk_part"/> consente di modificare manualmente il partizionamento di uno o più dischi rigidi. È possibile aggiungere, eliminare, ridimensionare e modificare le partizioni, nonché accedere al RAID software e alla configurazione LVM.
 </para>

 <warning>
  <title>Creazione di nuove partizioni su un sistema in esecuzione</title>
  <para>
   Benché sia possibile creare nuove partizioni sul sistema mentre è in esecuzione, il rischio di commettere un errore tale da provocare la perdita dei dati è molto alto. Pertanto, è opportuno evitare di creare nuove partizioni sul sistema installato ed eseguire sempre un backup completo dei dati prima di effettuare questa operazione.
  </para>
 </warning>

 <figure xml:id="fig.yast2.i_y2_disk_part">
  <title>YaST Partitioner</title>
  <mediaobject>
   <imageobject role="fo">
    <imagedata fileref="install_partitioner_expert.png" width="75%" format="PNG"/>
   </imageobject>
   <imageobject role="html">
    <imagedata fileref="install_partitioner_expert.png" width="75%" format="PNG"/>
   </imageobject>
  </mediaobject>
 </figure>

 <tip arch="zseries" os="sles">
  <title>IBM z Systems: nomi dei dispositivi</title>
  <para>
   IBM z Systems riconosce solo i dischi rigidi DASD e SCSI. I dischi rigidi IDE non sono supportati. Per questo motivo tali dispositivi appaiono nella tabella delle partizioni come <filename>dasda</filename> o <filename>sda</filename> per il primo dispositivo riconosciuto.
  </para>
 </tip>

 <para>
  Tutte le partizioni esistenti o suggerite di tutti i dischi rigidi connessi sono visualizzate nell'elenco <guimenu>Spazio disponibile</guimenu> della finestra di dialogo <guimenu>Modalità di partizionamento per esperti</guimenu> di YaST. I dischi rigidi completi vengono elencati come dispositivi senza numero; ad esempio <filename>/dev/sda</filename><phrase arch="zseries" os="sles"> (o <filename>/dev/dasda</filename>)</phrase>. Le partizioni vengono elencate come parte di questi dispositivi; ad esempio <filename>/dev/sda1</filename><phrase arch="zseries" os="sles"> (o <filename>/dev/dasda1</filename>, rispettivamente)</phrase>. Vengono visualizzati anche le dimensioni, lo stato della cifratura, il file system e il punto di montaggio dei dischi rigidi e delle loro partizioni. Il punto di montaggio descrive il punto in cui viene visualizzata la partizione nella struttura ad albero del file system Linux.
 </para>

 <para>
  A sinistra nella <guimenu>Vista sistema</guimenu> sono disponibili numerose viste funzionali. Tali viste consentono di raccogliere informazioni sulle configurazioni di memorizzazione esistenti oppure di configurare funzioni quali <literal>RAID</literal>, <literal>Gestione volume</literal>, <literal>File cifrati</literal> o ancora di visualizzare i file system con funzionalità aggiuntive, ad esempio BTRFS, NFS oppure <literal>TMPFS</literal>.
 </para>

 <para>
  Se durante l'installazione si seleziona la finestra di dialogo per esperti, verrà anche indicato e selezionato automaticamente lo spazio libero sul disco rigido. Per fornire più spazio su disco per <phrase role="productname"><phrase os="sles">SUSE® Linux Enterprise Server</phrase></phrase>, liberare lo spazio necessario partendo dal fondo dell'elenco e spostandosi verso l'inizio (partendo dall'ultima partizione di un disco rigido e andando verso la prima).
 </para>

 <sect2 xml:id="sec.IB.part.typen">
  <title>Tipi di partizione</title><indexterm>
  <primary> partizioni</primary>
  <secondary>tipi</secondary></indexterm> 
  <tip arch="zseries" os="sles">
   <title>IBM z Systems: dischi rigidi</title>
   <para>
    Nelle piattaforme IBM z Systems, SUSE Linux Enterprise Server supporta dischi rigidi SCSI e dispositivi di memorizzazione ad accesso diretto (DASD, Direct Access Storage Device). Mentre i dischi SCSI possono essere partizionati come descritto più avanti, i dischi DASD possono avere un massimo di 3 partizioni nelle relative tabelle delle partizioni.
   </para>
  </tip>
  <para>
   Ogni disco rigido dispone di una tabella delle partizioni con spazio per quattro voci. Ciascuna voce della tabella delle partizioni corrisponde a una partizione primaria o una partizione estesa. È tuttavia consentita una sola voce di partizione estesa.
  </para>
  <para>
   Una partizione primaria è composta semplicemente da una serie continua di cilindri (aree fisiche del disco) assegnata a un particolare sistema operativo. Per la partizioni primarie, il limite è quattro partizioni per disco perché la tabella delle partizioni non può contenerne altre. Per questo motivo vengono utilizzate le partizioni estese. Le partizioni estese sono intervalli continui di cilindri del disco, che possono anche essere divise in <emphasis>partizioni logiche</emphasis>. Le partizioni logiche non necessitano di voci nella tabella delle partizioni. In altre parole, una partizione estesa è un contenitore di partizioni logiche.
  </para>
  <para>
   Se si ha l'esigenza di utilizzare più di quattro partizioni, è necessario creare una partizione estesa come quarta partizione (o anteriore). Questa partizione estesa deve occupare tutto l'intervallo dei cilindri libero restante. Creare quindi più partizioni logiche all'interno della partizione estesa. Il numero massimo di partizioni logiche consentito è 63, indipendentemente dal tipo di disco. Il tipo di partizione utilizzato non fa alcuna differenza per Linux. Le partizioni primarie e logiche funzionano normalmente.
  </para>
  <tip os="sles;osuse">
   <title>Tabella delle partizioni GPT</title>
   <para>
    Se si ha necessità di creare più di 4 partizioni primarie in un unico disco rigido, è necessario utilizzare il tipo di partizione GPT, che consente di rimuovere la limitazione relativa al numero di partizioni primarie e supporta anche partizioni di dimensioni maggiori di 2 TB.
   </para>
   <para>
    Per utilizzare il tipo GPT, eseguire il partizionatore di YaST, fare clic sul nome del disco rilevante in <guimenu>Vista sistema</guimenu> e scegliere <menuchoice><guimenu>Esperto</guimenu> <guimenu> Crea nuova tabella delle partizioni</guimenu> <guimenu> GPT</guimenu></menuchoice>.
   </para>
  </tip>
 </sect2>



 <sect2 xml:id="sec.yast2.i_y2_part_expert.newpart">
  <title>Creazione di una partizione</title><indexterm>
  <primary> partizioni</primary>
  <secondary> creazione</secondary></indexterm> 
  <para>
   Per creare una nuova partizione, selezionare <guimenu>Dischi rigidi</guimenu>, quindi scegliere un disco rigido con spazio libero. Le effettive modifiche possono essere effettuate tramite la scheda <guimenu>Partizioni</guimenu>:
  </para>
  <procedure>
   <step>
    <para>
     Selezionare <guimenu>Aggiungi</guimenu> e specificare il tipo di partizione (primario o esteso). Creare fino a quattro partizioni primarie o fino a tre partizioni primarie e una partizione estesa. All'interno della partizione estesa, creare più partizioni logiche (vedere <xref linkend="sec.IB.part.typen"/>).
    </para>
   </step>
   <step>
    <para>
     Specificare la dimensione della nuova partizione. È possibile scegliere di occupare tutto lo spazio libero non partizionato oppure specificare una dimensione personalizzata.
    </para>
   </step>
   <step>
    <para>
     Selezionare il file system da utilizzare e un punto di montaggio. YaST suggerisce un punto di montaggio per ogni partizione creata. Per utilizzare un metodo di montaggio diverso, come il montaggio per etichetta, selezionare <guimenu>Opzioni Fstab</guimenu>. Per ulteriori informazioni sui file system supportati, fare riferimento a <systemitem class="username">root</systemitem>.
    </para>
   </step>
   <step>
    <para>
     Specificare le ulteriori opzioni per il file system, se il programma di installazione lo richiede. Questa operazione è necessaria, ad esempio, se si ha l'esigenza di usare nomi di dispositivi permanenti. Per dettagli sulle opzioni disponibili, vedere <xref linkend="sec.yast2.i_y2_part_expert.options"/>.
    </para>
   </step>
   <step>
    <para>
     Fare clic su <guimenu>Fine</guimenu> per applicare la configurazione del partizionamento e uscire dal modulo.
    </para>
    <para>
     Se la partizione è stata creata durante l'installazione, viene nuovamente visualizzata la schermata panoramica di installazione.
    </para>
   </step>
  </procedure>
  <sect3 xml:id="yast2.btrfs">
   <title>Partizionamento Btrfs</title>
   <para>
    Il file system di default per la partizione radice Btrfs (per ulteriori informazioni su Btrfs, vedere <xref linkend="cha.snapper"/><phrase os="sles"> e <xref linkend="cha.filesystems"/></phrase>). Il file system radice è il sottovolume di default e non è elencato tra i volumi creati. In quanto sottovolume Btrfs di default, è possibile montarlo come file system normale.
   </para>
   <important>
    <title>Btrfs in una partizione radice cifrata</title>
    <para>
     La configurazione di partizionamento di default suggerisce la partizione radice come Btrfs con <filename>/boot</filename> come directory. Se si ha l'esigenza di cifrare la partizione radice in questa configurazione, utilizzare il tipo di tabella delle partizioni GPT anziché il tipo MSDOS di default. In caso contrario, nel boot loader GRUB2 potrebbe non essere disponibile spazio sufficiente per il loader della seconda fase.
    </para>
   </important>
   <para>
    È possibile creare snapshot dei sottovolumi Btrfs, sia manualmente che automaticamente, in base agli eventi di sistema. Ad esempio, quando si apportano modifiche al file system, <command>zypper</command> richiama il comando <command>snapper</command> per creare snapshot prima e dopo la modifica. Questo metodo è utile se non si è soddisfatti con la modifica effettuata da <command>zypper</command> e si desidera ripristinare lo stato precedente. Poiché <command>snapper</command> richiamato da <command>zypper</command> crea per default snapshot del file system <emphasis>radice</emphasis>, è ragionevole escludere directory specifiche dagli snapshot, a seconda della natura dei dati che contengono. Per questo motivo YaST consiglia di creare i sottovolumi separati elencati di seguito.
   </para>
   <xi:include href="snapshot_excludes_i.xml"/>
   <tip>
    <title>Dimensioni della partizione Btrfs</title>
    <para>
     Poiché gli snapshot salvati richiedono maggior spazio su disco, si consiglia di conservare più spazio per la partizione Btrfs rispetto a una partizione che non è in grado di effettuare snapshot (ad esempio Ext3). Le dimensioni consigliate per una partizione Btrfs radice con i sottovolumi suggeriti sono di 20 GB.
    </para>
   </tip>
   <sect4 xml:id="yast2.btrfs.yast">
    <title>Gestione dei sottovolumi Btrfs con YaST</title>
    <para>
     Adesso è possibile gestire una partizione Btrfs con il modulo <guimenu>Modalità di partizionamento per esperti</guimenu> di YaST. È possibile aggiungere sottovolumi nuovi o rimuovere quelli esistenti.
    </para>
    <procedure>
     <title>Sottovolumi Btrfs con YaST</title>
     <step>
      <para>
       Avviare il modulo <guimenu>Modalità di partizionamento per esperti</guimenu> di YaST con <menuchoice><guimenu>Sistema</guimenu><guimenu>Partizionatore</guimenu></menuchoice>.
      </para>
     </step>
     <step>
      <para>
       Scegliere <guimenu>Btrfs</guimenu> nel riquadro <guimenu>Vista sistema</guimenu> a sinistra.
      </para>
     </step>
     <step>
      <para>
       Selezionare la partizione Btrfs di cui si devono gestire i sottovolumi e fare clic su <guimenu>Modifica</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Fare clic su <guimenu>Gestione sottovolumi</guimenu>. È possibile visualizzare un elenco di tutti i sottovolumi esistenti della partizione Btrfs selezionata. Sono presenti numerose voci <literal>@/.snapshots/xyz/snapshot</literal>, che indicano i sottovolumi appartenenti a una singola istantanea esistente.
      </para>
     </step>
     <step>
      <para>
       A seconda che si desideri aggiungere o rimuovere sottovolumi, procedere come indicato di seguito:
      </para>
      <substeps performance="required">
       <step>
        <para>
         Per rimuovere un sottovolume, selezionarlo dall'elenco <guimenu>Sottovolumi esistenti</guimenu> e fare clic su <guimenu>Rimuovi</guimenu>.
        </para>
       </step>
       <step>
        <para>
         Per aggiungere un nuovo sottovolume, immetterne il nome nella casella di testo <guimenu>Nuovo sottovolume</guimenu> e fare clic su <guimenu>Aggiungi nuovo</guimenu>.
        </para>
        <figure xml:id="fig.yast2.btrfs.subvolumes">
         <title>Sottovolumi Btrfs nel partizionatore di YaST</title>
         <mediaobject>

          <imageobject role="fo">
           <imagedata fileref="yast2_btrfs_subvolumes.png" width="75%" format="PNG"/>
          </imageobject>
          <imageobject role="html">
           <imagedata fileref="yast2_btrfs_subvolumes.png" width="75%" format="PNG"/>
          </imageobject>
         </mediaobject>
        </figure>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       Confermare con <guimenu>OK</guimenu> e <guimenu>Fine</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Abbandonare il partizionatore facendo clic su <guimenu>Fine</guimenu>.
      </para>
     </step>
    </procedure>
   </sect4>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.options">
  <title>Modifica di una partizione</title><indexterm>
  <primary> partizioni</primary>
  <secondary>parametri</secondary></indexterm> 
  <para>
   Quando si crea una nuova partizione o si modifica una partizione esistente, è possibile impostare vari parametri. I parametri di default impostati da YaST per le nuove partizioni sono generalmente sufficienti e non richiedono alcuna modifica. Per modificare manualmente la configurazione della partizione, procedere come segue:
  </para>
  <procedure>
   <step>
    <para>
     Scegliere la partizione.
    </para>
   </step>
   <step>
    <para>
     Fare clic su <guimenu>Modifica</guimenu> per modificare la partizione e impostare i parametri:
    </para>
    <variablelist>
     <varlistentry>
      <term>ID file system</term>
      <listitem>
       <para>
        <indexterm>
        <primary>partizioni</primary>
        <secondary> LVM</secondary>
        </indexterm> <phrase os="sles"> </phrase> <indexterm>
        <primary>     partizioni</primary>
        <secondary> RAID</secondary>
        </indexterm>  Anche se in questa fase non si intende ancora formattare la partizione, assegnare a essa un ID di file system per garantire che venga registrata correttamente. I valori che è possibile utilizzare sono <guimenu>Linux</guimenu>, <guimenu>Linux swap</guimenu>, <guimenu>Linux LVM</guimenu> e <guimenu>Linux RAID</guimenu>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       File system
      </term>
      <listitem>
       <para>
        <indexterm>
        <primary>file system</primary>
        <secondary> modifica</secondary>
        </indexterm> <indexterm>
        <primary>   partizioni</primary>
        <secondary> riformattazione</secondary>
        </indexterm>  Per modificare il file system della partizione, fare clic su <guimenu>Formatta partizione</guimenu> e selezionare il tipo di file system dall'elenco <guimenu>File system</guimenu>.
       </para>
       <para>
        <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> supporta diversi tipi di file system. Btrfs è il file system Linux scelto per la partizione radice in quanto presenta funzionalità avanzate. Tale file system supporta la funzionalità copy-on-write, la creazione di snapshot, il frazionamento in più dispositivi, i sottovolumi e altre funzionalità utili. XFS, Ext3 e JFS sono file system con journaling. Tali file system sono in grado di ripristinare il sistema molto velocemente dopo un'interruzione, avvalendosi di processi di scrittura registrati durante il funzionamento. Ext2 non è un file system con journaling, tuttavia risulta particolarmente appropriato per partizioni di dimensioni ridotte in quanto per la sua gestione non è richiesto molto spazio su disco.
       </para>
       <para>
        Il file system di default per la partizione radice è Btrfs. Il file system di default per le altre partizioni è XFS.
       </para>
       <para>
        Swap è un formato speciale che consente l'utilizzo della partizione come memoria virtuale. Creare una partizione swap di almeno 256 MB. Se tuttavia si utilizza tutto lo spazio swap, è consigliabile aggiungere altra memoria al sistema anziché ulteriore spazio swap.
       </para>
       <warning>
        <title>Modifica del file system</title>
        <para>
         La modifica del file system e la riformattazione delle partizioni provoca la cancellazione definitiva di tutti i dati dalla partizione.
        </para>
       </warning>
       <para>
        Per informazioni dettagliate sui vari file system, fare riferimento alla <citetitle>Storage Administration Guide</citetitle> (Guida all'amministrazione della memorizzazione).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Dispositivo cifrato
      </term>
      <listitem>
       <para>
        Se si attiva la cifratura, tutti i dati scritti sul disco rigido saranno cifrati. Questa operazione incrementa la sicurezza dei dati sensibili, ma riduce la velocità del sistema poiché l'elaborazione dei dati cifrati richiede più tempo. Per ulteriori informazioni sulla cifratura dei file system, vedere <xref linkend="cha.security.cryptofs"/>.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Punto di montaggio
      </term>
      <listitem>
       <para>
        Specificare la directory in cui installare la partizione all'interno dell'albero del file system. Selezionare uno dei suggerimenti di YaST oppure immettere un altro nome.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Opzioni Fstab
      </term>
      <listitem>
       <para>
        Impostare i vari parametri contenuti nel file di amministrazione del file system globale (<filename>/etc/fstab</filename>). Le impostazioni di default sono generalmente adatte alla maggior parte delle configurazioni. Ad esempio è possibile modificare l'ID del file system, modicandolo dal nome del dispositivo all'etichetta di volume. Nell'etichetta di volume è possibile utilizzare tutti i caratteri eccetto <literal>/</literal> e spazio.
       </para>
       <para>
        Per ottenere nomi di dispositivi permanenti, utilizzare l'opzione di montaggio <guimenu>ID dispositivo</guimenu>, <guimenu>UUID</guimenu> o <guimenu>ETICHETTA</guimenu>. In <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> i nomi dei dispositivi permanenti sono abilitati per default.
       </para>
       <note os="sles" arch="zseries">
        <title>IBM z Systems: montaggio in base al percorso</title>
        <para>
         Poiché nelle piattaforme IBM z Systems il montaggio per ID genera vari problemi, quando si utilizza la funzione di copia da disco a disco per eseguire una clonazione, per default i dispositivi vengono montati su tali piattaforme in base al percorso, in <filename>/etc/fstab</filename>.
        </para>
       </note>
       <para>
        Se si preferisce montare la partizione in base all'etichetta, è necessario definirne una nel campo <guimenu>Etichetta volume</guimenu>. Ad esempio è possibile usare l'etichetta della partizione <literal>HOME</literal> per una partizione che deve essere montata in <filename>/home</filename>.
       </para>
       <para>
        Per usare quote per il file system, usare l'opzione di installazione <guimenu>Abilita supporto quota</guimenu>. Questa operazione deve essere effettuata prima delle definizione delle quote per gli utenti nel modulo <guimenu>Gestione utenti</guimenu> di YaST. Per ulteriori informazioni su come configurare le quote per gli utenti, vedere <xref linkend="sec.y2.userman.adv.quota"/>.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     Fare clic su <guimenu>Fine</guimenu> per salvare le modifiche.
    </para>
   </step>
  </procedure>
  <note>
   <title>Ridimensionamento dei file system</title>
   <para>
    Per ridimensionare un file system esistente, selezionare la partizione e utilizzare <guimenu>Ridimensiona</guimenu>. Si noti che non è possibile ridimensionare le partizioni montate. Per ridimensionare le partizioni, disinstallare la partizione interessata prima di eseguire il partizionatore.
   </para>
  </note>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.options2">
  <title>Opzioni avanzate</title>
  <para>
   Dopo aver selezionato un dispositivo disco rigido (ad esempio <guimenu>sda</guimenu>) nel riquadro <guimenu>Vista sistema</guimenu>, è possibile accedere al menu <guimenu>Esperto</guimenu> dal lato inferiore destro della finestra <guimenu>Modalità di partizionamento per esperti</guimenu>. Il menu presenta i seguenti comandi:
  </para>
  <variablelist>
   <varlistentry>
    <term>Crea nuova tabella delle partizioni</term>
    <listitem>
     <para>
      Utilizzare questa opzione per creare una nuova tabella delle partizioni sul dispositivo selezionato.
     </para>
     <warning>
      <title>Creazione di una nuova tabella delle partizioni</title>
      <para>
       La creazione di una nuova tabella delle partizioni sul dispositivo provoca la cancellazione definitiva di tutte le partizioni e dei relativi dati da tale dispositivo.
      </para>
     </warning>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Clona il disco specificato</term>
    <listitem>
     <para>
      Utilizzare questa opzione per clonare il layout delle partizioni di un dispositivo (senza i rispettivi dati) negli altri dispositivi disco disponibili.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.configure_options">
  <title>Opzioni avanzate</title>
  <para>
   Dopo aver selezionato il nome host del computer (il livello superiore dell'albero nel riquadro <guimenu>Vista sistema</guimenu>), è possibile accedere al menu <guimenu>Configura</guimenu> dal lato inferiore destro della finestra <guimenu>Modalità di partizionamento per esperti</guimenu>. Il menu presenta i seguenti comandi:
  </para>
  <variablelist>
   <varlistentry>
    <term>Configura dischi iSCSI</term>
    <listitem>
     <para>
      Per accedere a SCSI tramite i dispositivi di blocco IP, è innanzitutto necessario configurare iSCSI. Questa operazione rende disponibili ulteriori periferiche nell'elenco delle partizioni principali.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Configura Multipath</term>
    <listitem>
     <para>
      Selezionare questa opzione per configurare il miglioramento multipath per i dispositivi di storage di massa supportati.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.info">
  <title>Ulteriori suggerimenti per il partizionamento</title>
  <para>
   Nella sezione che segue vengono forniti alcuni suggerimenti relativi al partizionamento che possono risultare utili in fase di configurazione del sistema.
  </para>
  <tip>
   <title>Numeri di cilindri</title>
   <para>
    Si noti che strumenti di partizionamento diversi possono iniziare il conteggio dei cilindri di una partizione da <literal>0</literal> o <literal>1</literal>. Quando si calcola il numero di cilindri, è sempre necessario utilizzare la differenza tra i numeri dell'ultimo e primo cilindro e aggiungere uno.
   </para>
  </tip>
  <sect3 xml:id="sec.yast2.i_y2_part_expert.info.swap">
   <title>Utilizzo dello <literal>scambio</literal></title>
   <para>
    Lo scambio permette di estendere la memoria fisica disponibile e poter utilizzare quindi più memoria rispetto alla memoria RAM disponibile. Il sistema di gestione della memoria dei kernel anteriore alla versione 2.4.10 utilizzava lo scambio come misura di sicurezza. Quindi, le prestazioni del sistema risultavano inferiori se nel spazio di scambio non era disponibile una memoria pari al doppio della memoria RAM. Queste limitazioni sono più applicabili.
   </para>
   <para>
    Linux utilizza una pagina <quote>Least Recently Used</quote> (Ultimi utilizzati meno di recente) (LRU) per selezionare pagine che possono essere state spostate dalla memoria al disco. Ciò rende disponibile più memoria alle applicazioni in esecuzione e rende più efficientemente l'operazione di memorizzazione nella cache.
   </para>
   <para>
    Se un'applicazione tenta di allocare la memoria massima consentita, è possibile che si verifichino problemi con lo scambio. I tre principali scenari a cui fare riferimento sono:
   </para>
   <variablelist>
    <varlistentry>
     <term>Sistema senza scambio</term>
     <listitem>
      <para>
       L'applicazione ottiene la quantità massima di memoria disponibile. Poiché tutte le cache vengono cancellate, tutte le altre applicazioni in esecuzione risultano rallentate. Dopo qualche minuto si attiva il meccanismo di terminazione per l'esaurimento della memoria del kernel che termina il processo.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Sistema con scambio di medie dimensioni (128 - 512 MB)</term>
     <listitem>
      <para>
       Inizialmente, il sistema diventa lento come se si trattasse di un sistema senza scambio. Dopo l'allocazione di tutta la RAM fisica, viene utilizzato anche lo spazio di scambio. A questo punto il sistema diventa molto lento ed è impossibile eseguire i comandi in remoto. A seconda della velocità dei dischi rigidi che eseguono lo spazio di scambio, il sistema permane in questa condizione per circa 10-15 minuti fino a che il meccanismo di terminazione per l'esaurimento della memoria non risolve il problema. Si noti che è necessario disporre di un determinato spazio di scambio se si desidera che il computer esegua una <quote>sospensione su disco</quote>. In questo caso, le dimensioni dello spazio di scambio devono essere tali da contenere tutti i dati necessari della memoria (512 MB - 1 GB).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Sistema con numerosi scambi (molti GB)</term>
     <listitem>
      <para>
       È preferibile evitare che l'applicazione sia fuori controllo ed effettui un numero eccessivo di scambi. Se si utilizza un'applicazione di questo tipo, il ripristino del sistema potrebbe richiedere molte ore. Durante il processo, è possibile che si verifichino timeout e guasti negli altri processi e che il sistema rimanga in uno stato non definito anche dopo l'interruzione del processo guasto. In questo caso, è necessario effettuare un riavvio hardware del computer e provare a mettere il computer nuovamente in funzione. Una grande quantità di scambio è utile solo se si dispone di un'applicazione che fa affidamento su questa funzione. Queste applicazioni (come i database o i programmi di manipolazione della grafica) hanno spesso un'opzione che consente di utilizzare direttamente lo spazio su disco rigido per le loro necessità. È consigliabile utilizzare questa opzione anziché usare molto spazio di scambio.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Se il sistema non è fuori controllo, ma necessita di una maggiore quantità di scambio dopo un po' di tempo, è possibile ampliare lo spazio di scambio online. Se è stata preparata una partizione per lo spazio di scambio, aggiungerla con YaST. Se non è disponibile alcuna partizione, è anche possibile utilizzare un file di scambio per ampliare lo spazio di scambio. I file di scambio sono generalmente più lenti delle partizioni. Tale differenza è trascurabile, perché sia i file di scambio che le partizioni sono entrambi estremamente lenti rispetto alla RAM fisica.
   </para>
   <procedure>
    <title>Aggiunta manuale di un file di scambio</title>
    <para>
     Per aggiungere un file di scambio al sistema in esecuzione, procedere come segue:
    </para>
    <step>
     <para>
      Creare un file vuoto nel sistema. Ad esempio per aggiungere un file di scambio con uno scambio di 128 MB in <filename>/var/lib/swap/swapfile</filename>, utilizzare i comandi:
     </para>
<screen>mkdir -p /var/lib/swap
dd if=/dev/zero of=/var/lib/swap/swapfile bs=1M count=128</screen>
    </step>
    <step>
     <para>
      Inizializzare questo file di scambio utilizzando il comando
     </para>
<screen>mkswap /var/lib/swap/swapfile</screen>
      <note>
  <title>Modifica dello UUID delle partizioni di scambio durante la formattazione tramite <command>mkswap</command></title>
  <para>Se possibile, evitare di utilizzare <command>mkswap</command> per riformattare le partizioni di scambio esistenti. La riformattazione tramite <command>mkswap</command> determina la modifica del valore UUID della partizione di scambio. Eseguire la riformattazione tramite YaST (che aggiorna <filename>/etc/fstab</filename>) oppure modificare <filename>/etc/fstab</filename> manualmente.
  </para>
</note>
    </step>
    <step>
     <para>
      Attivare lo scambio utilizzando il comando
     </para>
<screen>swapon /var/lib/swap/swapfile</screen>
     <para>
      Per disabilitare il file di scambio, utilizzare il comando
     </para>
<screen>swapoff /var/lib/swap/swapfile</screen>
    </step>
    <step>
     <para>
      Controllare gli spazi di scambio attualmente disponibili utilizzando il comando
     </para>
<screen>cat /proc/swaps</screen>
     <para>
      Si noti che a questo punto si tratta solo di uno spazio di scambio temporaneo. Dopo il riavvio successivo, non verrà più utilizzato.
     </para>
    </step>
    <step>
     <para>
      Per abilitare permanentemente il file di scambio, aggiungere la seguente riga a <filename>/etc/fstab</filename>:
     </para>
<screen>/var/lib/swap/swapfile swap swap defaults 0 0</screen>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.yast2.i_y2_part_expert.lvm">
  <title>Partizionamento e LVM</title>
  <para>
   Dalla finestra <guimenu>Modalità di partizionamento per esperti</guimenu> accedere alla configurazione LVM facendo clic sulla voce <guimenu>Gestione volume</guimenu> nel riquadro <guimenu>Vista sistema</guimenu>. Tuttavia, se è già presente una configurazione LVM funzionante nel sistema, viene automaticamente attivata al momento in cui si accede alla configurazione LVM iniziale di una sessione. In questo caso non è possibile suddividere nuovamente in partizioni tutti i dischi che contengono una partizione appartenente a un gruppo di volumi attivato. Il kernel Linux non è in grado di leggere nuovamente la tabella delle partizioni modificate di un disco rigido se una delle sue partizioni è in uso. Se nel sistema è già presente una configurazione LVM funzionante, non è generalmente necessario effettuare una nuova operazione di suddivisione in partizioni fisica. Modificare invece la configurazione dei volumi logici.
  </para>
  <para>
   Le informazioni relative al volume vengono scritte nella partizione all'inizio dei volumi fisici (physical volume, PV) Per riutilizzare tale partizione per altri scopi non LVM, è consigliabile eliminare l'inizio del volume. Ad esempio nel <literal>sistema</literal> di VG e nella partizione di PV <filename>/dev/sda2</filename>, utilizzare il comando <command>dd</command> <option>if=/dev/zero of=/dev/sda2 bs=512 count=1</option>.
  </para>
  <warning>
   <title>File system per l'avvio</title>
   <para>
    Il file system utilizzato per l'avvio (il file system radice o <filename>/boot</filename>) non deve essere memorizzato su un volume logico LVM. Memorizzarlo invece su una normale partizione fisica.
   </para>
  </warning>
  <para>
   Se si desidera modificare <filename>/usr</filename> o <systemitem>swap</systemitem>, vedere <xref linkend="pro.boot.linuxrc.lvm"/>.
  </para>
  <para os="sles">
   Per ulteriori dettagli su LVM, vedere <xref linkend="stor_admin"/>.
  </para>
 </sect2>
</sect1>
