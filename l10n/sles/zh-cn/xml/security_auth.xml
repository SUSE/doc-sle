<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="security_auth.xml" version="5.0" xml:id="cha-security-auth">



 <title>使用 YaST 设置身份验证客户端</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    Kerberos 用于身份验证，而 LDAP 用于授权和标识。两者可以配合工作。有关 LDAP 的详细信息，请参见<xref linkend="cha-security-ldap"/>；有关 Kerberos 的详细信息，请参见<xref linkend="cha-security-kerberos"/>。
   </para>
  </abstract>
 </info>

 <sect1 xml:id="sec-security-auth-yast-client">
  <title>使用 YaST 配置身份验证客户端</title>

  <para>
   YaST 允许使用不同的模块设置客户端身份验证：
  </para>

<itemizedlist version="5.0">
 <listitem>
  <formalpara>
   <title><guimenu>用户登录管理</guimenu></title>
   <para>
    将身份服务（通常为 LDAP）和用户身份验证服务（通常为 Kerberos）结合使用。此选项基于 SSSD，在大多数情况下最适合用于加入 Active Directory 域。
   </para>
  </formalpara>
  <para>
   <xref linkend="sec-security-ad-sssd"/>中介绍了此模块。
  </para>
 </listitem>
 <listitem>
  <formalpara>
   <title><guimenu>Windows 域成员资格</guimenu></title>
   <para>
    加入 Active Directory（需要使用 Kerberos 和 LDAP）。此选项基于 <command>winbind</command>，最适合用于加入 Active Directory 域（如果必须提供 NTLM 或跨林信任支持）。
   </para>
  </formalpara>
  <para>
   <xref linkend="sec-security-ad-winbind"/>中介绍了此模块。
  </para>
 </listitem>
 
</itemizedlist>

 </sect1>

 <sect1 xml:id="sec-security-auth-sssd">
  <title>SSSD</title>
  <para>
   有两个 YaST 模块基于 SSSD：<guimenu>用户登录管理</guimenu>及 <guimenu>LDAP 和 Kerberos 身份验证</guimenu>。
  </para>
  <para>
   SSSD 指系统安全服务守护程序。SSSD 会与提供用户数据的远程目录服务通讯，并提供身份验证方法（例如 LDAP、Kerberos 或 Active Directory (AD)）。它还提供 NSS（名称服务切换）和 PAM（可插入身份验证模块）接口。
  </para>
  <para>
   SSSD 可在本地缓存用户数据并可让用户使用这些数据，即使实际的目录服务（暂时）不可访问时也是如此。
  </para>
  <sect2 xml:id="sec-security-auth-sssd-status">
   <title>检查状态</title>
   <para>
    运行某个 YaST 身份验证模块后，您可以使用以下命令检查 SSSD 是否正在运行：
   </para>
<screen><prompt role="root"># </prompt><command>systemctl status sssd</command>
sssd.service - System Security Services Daemon
   Loaded: loaded (/usr/lib/systemd/system/sssd.service; enabled)
   Active: active (running) since Thu 2015-10-23 11:03:43 CEST; 5s ago
   [...]</screen>
  </sect2>

  <sect2 xml:id="sec-security-auth-sssd-cache">
   <title>缓存</title>
   <para>
    为了允许用户在身份验证后端不可用时登录，SSSD 将使用其缓存，即使缓存已失效。这种情况会一直持续到后端再次可用。
   </para>
   <para>
    要使缓存失效，请运行 <command>sss_cache -E</command>（命令 <command>sss_cache</command> 是软件包 <package>sssd-tools</package> 的一部分）。
   </para>
   <para>
    要去除 SSSD 缓存，请运行：
   </para>
  <screen><prompt>&gt; </prompt><command>sudo</command> <command>systemctl stop sssd</command>
<prompt>&gt; </prompt><command>sudo</command> <command>rm -f /var/lib/sss/db/*</command>
<prompt>&gt; </prompt><command>sudo</command> <command>systemctl start sssd</command></screen>
  </sect2>
 </sect1>
</chapter>
