<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_expert_partitioner_overview.xml" version="5.0" xml:id="sec-expert-partitioner">
 <title>使用<guimenu>進階磁碟分割程式</guimenu></title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>是</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  使用<xref linkend="fig-expert-partitioner-overview"/>中所示的<guimenu>進階磁碟分割程式</guimenu>，可以手動方式修改一或多個硬碟的磁碟分割。您可以新增、刪除、編輯分割區並調整其大小，或存取 Soft RAID 和 LVM 組態。
 </para>

 <warning>
  <title>重新對執行中系統進行磁碟分割</title>
  <para>
   儘管可以在系統執行時對其重新分割，但是這樣極有可能會造成資料遺失的風險。儘量避免對已安裝的系統執行重新分割，若要這樣做，請務必在開始之前建立資料的完整備份。
  </para>
 </warning>

 <figure xml:id="fig-expert-partitioner-overview">
  <title>YaST 磁碟分割程式</title>
  <mediaobject>
   <imageobject role="fo">
    <imagedata fileref="install_partitioner_expert.png" width="75%" format="PNG"/>
   </imageobject>
   <imageobject role="html">
    <imagedata fileref="install_partitioner_expert.png" width="75%" format="PNG"/>
   </imageobject>
  </mediaobject>
 </figure>

 <tip arch="zseries" os="sles">
  <title>IBM Z：裝置名稱</title>
  <para>
   IBM Z 只能辨識 DASD 和 SCSI 硬碟。不支援 IDE 硬碟。所以這些裝置會在分割區表上顯示為 <filename>dasda</filename> 或 <filename>sda</filename> 做為第一個識別的裝置。
  </para>
 </tip>

 <para>
  所有已連接硬碟上的現有或建議分割區都顯示在 YaST<guimenu>進階磁碟分割程式</guimenu>對話方塊的<guimenu>可用儲存</guimenu>清單中。整個硬碟都列為不含編號的裝置，例如 <filename>/dev/sda</filename><phrase arch="zseries" os="sles"> (或 <filename>/dev/dasda</filename>)</phrase>。各分割區則列示為這些裝置的一部分，例如 <filename>/dev/sda1</filename><phrase arch="zseries" os="sles"> (或 <filename>/dev/dasda1</filename>)</phrase>。此外還會顯示硬碟的大小、類型、加密狀態、檔案系統和掛接點以及分割區。定點描述分割區出現在 Linux 檔案系統樹狀結構上的位置。
 </para>

 <para>
  左側<guimenu>系統檢視</guimenu>中提供了幾個功能檢視窗。使用這些檢視可收集關於現有儲存組態的資訊、設定 <literal>RAID</literal>、<literal>磁碟區管理</literal>、<literal>加密檔案</literal>等功能，以及檢視包含其他功能的檔案系統，如 BTRFS、NFS 或 <literal>TMPFS</literal>。
 </para>

 <para>
  安裝期間若執行專家對話方塊，同時會自動選取並列出所有可用的硬碟空間。若要為 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 提供更多磁碟空間，請在分割區清單中從下至上釋放所需空間。
 </para>

 <sect2 xml:id="sec-expert-partitioner-tables">
  <title>分割區表</title>
  <para>
   <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 允許使用和建立不同的<emphasis>分割區表</emphasis>。在某些情況下，分割區表稱為<emphasis>磁碟標籤</emphasis>。分割區表對於電腦的開機程序非常重要。若要從新建立的分割區表中的某個分割區開機，請確定韌體支援該表的格式。
  </para>
  <para>
   若要變更分割區表，請按一下<guimenu>系統檢視</guimenu>中相應的磁碟名稱，然後選擇<menuchoice><guimenu>進階</guimenu> <guimenu>建立新分割區表</guimenu></menuchoice>。
  </para>
  <sect3 xml:id="sec-expert-partitioner-tables-msdos">
   <title>主開機記錄</title>
   <para>
    <emphasis>主開機記錄 (MBR)</emphasis> 是在 IBM PC 上使用的舊版分割區表。它有時也稱為 <emphasis>MS-DOS</emphasis> 分割區表。MBR 僅支援四個主分割區。如果磁碟已包含 MBR，則 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 允許您在該磁碟中建立更多分割區做為安裝目標。
   </para>
   <para>
    建立<emphasis>延伸分割區</emphasis>可以解決分割區數量不能超過四個的限制。延伸分割區自身是一個主分割區，可以包含更多的<emphasis>邏輯分割區</emphasis>。
   </para>
   <para>
    UEFI 韌體通常可支援使用傳統模式從 MBR 開機。
   </para>
  </sect3>
  <sect3 xml:id="sec-expert-partitioner-tables-gpt">
   <title>GPT 分割區表</title>
   <para>
    UEFI 電腦預設使用 <emphasis>GUID 分割區表</emphasis> (GPT)。如果不存在其他分割區表，<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 會在磁碟中建立 GPT。
   </para>
   <para>
    舊式 BIOS 韌體不支援從 GPT 分割區開機。
   </para>
   <para>
    您需要提供 GPT 分割區表才能使用下列其中一項功能：
   </para>
   <itemizedlist>
    <listitem>
     <para>四個以上的主分割區</para>
    </listitem>
    <listitem>
     <para>
      UEFI 安全開機
     </para>
    </listitem>
    <listitem>
     <para>
      使用大於 2 TB 的磁碟
     </para>
    </listitem>
   </itemizedlist>
   <note>
    <title>使用 <productname>Parted</productname> 3.1 或更早版本建立的分割區的標籤不正確</title>
    <para>
     透過 Parted 3.1 或以下版本建立的 GPT 分割區使用的是 Microsoft 基本資料分割區類型，而不是更新的 Linux 特定 GPT GUID。更新版本的 Parted 會在此類分割區中設定誤導性的旗標 <literal>msftdata</literal>。此外，這也會導致各種磁碟工具將該分割區標為 <emphasis>Windows 資料分割區</emphasis>或類似標籤。
    </para>
    <para>
     若要移除該旗標，請執行：
    </para>
    <screen><prompt role="root">root # </prompt>parted <replaceable>DEVICE</replaceable> set <replaceable>PARTITION_NUMBER</replaceable> msftdata off</screen>
   </note>
  </sect3>
  <sect3 xml:id="sec-expert-partitioner-tables-zsystems" os="sles" arch="zseries">
   <title>IBM Z 上的分割區表</title>
   <para>
    在 IBM Z 平台上，SUSE Linux Enterprise Server 支援 <emphasis>SCSI 硬碟</emphasis>和<emphasis>直接存取儲存裝置</emphasis> (DASD)。雖然可依上面所述方式對 SCSI 磁碟進行分割，但 DASD 分割區表中包含的分割區項目不能超過三個。
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-partition">
  <title>分割區</title>
  <para>
   YaST 磁碟分割程式可以使用多種檔案系統建立和格式化分割區。<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 使用的預設檔案系統為 <literal>Btrfs</literal>。如需詳細資料，請參閱<xref linkend="sec-yast-btrfs"/>。
  </para>
  <para>
   可以使用其他常用的檔案系統：<literal>Ext2</literal>、<literal>Ext3</literal>、<literal>Ext4</literal>、<literal>FAT</literal>、<literal>XFS</literal>、<literal>Swap</literal> 和 <literal>UDF</literal>。
  </para>
  <sect3 xml:id="sec-expert-partitioner-partition-create">
   <title>建立分割區</title>
   <para>
    若要建立分割區，請選取<guimenu>硬碟</guimenu>，然後選取具有可用空間的硬碟。實際的修改可以在<guimenu>分割區</guimenu>索引標籤中進行。
   </para>
   <procedure>
    <step>
     <para>
      按一下<guimenu>新增</guimenu>以建立新的分割區。使用 <emphasis>MBR</emphasis> 時，請指定要建立主分割區還是延伸分割區。在延伸分割區中，可以建立多個邏輯分割區。如需詳細資料，請參閱<xref linkend="sec-expert-partitioner-tables"/>。
     </para>
    </step>
    <step>
     <para>
      指定新分割區的大小。您可以選擇佔用所有未分割的可用空間，也可以輸入一個自訂大小值。
     </para>
    </step>
    <step>
     <para>
      選取要使用的檔案系統和掛接點。YaST 會為所建立的每個分割區建議裝載點。若要使用另一種掛接方式，例如按標籤掛接，請選取<guimenu>Fstab 選項</guimenu>。
     </para>
    </step>
    <step>
     <para>
      依您的安裝需求，指定其他檔案系統選項。例如，如果您需要持續性裝置名稱，則必須這樣做。關於可用選項的詳細資料，請參閱<xref linkend="sec-expert-partitioner-options"/>。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>完成</guimenu>套用您的分割區設定，並離開磁碟分割模組。
     </para>
     <para>
      若您在安裝過程中建立分割區，會回到安裝綜覽畫面。
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec-yast-btrfs">
   <title>Btrfs 磁碟分割</title>
   <para>
    根分割區的預設檔案系統是 Btrfs。如需詳細資料，請參閱<xref linkend="cha-snapper"/><phrase os="sles">與<xref linkend="cha-filesystems"/></phrase>。該根檔案系統是預設的子磁碟區，不會列在已建立的子磁碟區清單中。做為預設 Btrfs 子磁碟區，它可以像一般檔案系統一樣進行掛接。
   </para>
   <important>
    <title>已加密根分割區上的 Btrfs</title>
    <para>
     預設的分割區設定建議將根分割區用做 Btrfs，並在其中包含 <filename>/boot</filename> 目錄。若要加密根分割區，請確定使用 GPT 分割區表類型，而不要使用預設的 MSDOS 類型。否則，GRUB2 開機載入程式可能沒有足夠的空間用於第二階段載入程式。
    </para>
   </important>
   <para>
    您可以建立 Btrfs 子磁碟區的快照 — 可以手動建立，也可以根據系統事件自動建立。例如，當變更檔案系統時，<command>zypper</command> 會呼叫 <command>snapper</command> 指令以在變更前後建立快照。如果您對 <command>zypper</command> 進行的變更不滿意，並想還原到先前的狀態，則此功能非常有用。由於 <command>zypper</command> 呼叫的 <command>snapper</command> 預設會建立<emphasis>根</emphasis>檔案系統的快照，因此最好從快照中排除特定的目錄。正因為此，YaST 建議建立以下單獨的子磁碟區：
   </para>
   <xi:include href="snapshot_excludes_i.xml"/>
   <tip>
    <title>Btrfs 分割區的大小</title>
    <para>
     由於儲存的快照需要更多磁碟空間，建議您為 Btrfs 留出足夠的空間。包含快照和預設子磁碟區的根 Btrfs 分割區的最小大小為 16 GB，SUSE 建議至少為 32 GB，如果 <filename>/home</filename> 未位於單獨的分割區中，則需要更多。
    </para>
   </tip>
  </sect3>
  <sect3 xml:id="sec-yast-btrfs-subvolumes">
   <title>使用 YaST 管理 Btrfs 子磁碟區</title>
   <para>
    現可使用 YaST <guimenu>進階磁碟分割程式</guimenu>模組來管理 Btrfs 分割區的子磁碟區。您可以新增子磁碟區或移除現有的子磁碟區。
   </para>
   <procedure xml:id="pro-yast-btrfs-subvolumes">
    <title>使用 YaST 管理 Btrfs 子磁碟區</title>
    
    
    <step>
     <para>
      在左側窗格中選擇 <guimenu>Btrfs</guimenu>。
     </para>
    </step>
    <step>
     <para>
      選取您需要管理的子磁碟區所在的 Btrfs 分割區。
     </para>
    </step>
    
    
    <step>
     <para>
      根據您是要編輯、新增還是移除子磁碟區，執行以下操作：
     </para>
     <substeps performance="required">
      <step>
       <para>
        若要編輯子磁碟區，請從清單中選取相應子磁碟區，然後按一下<guimenu>編輯</guimenu>。然後，您可以對該磁碟區停用<literal>寫入時複製</literal> (核取 <guimenu>noCoW</guimenu>) 或限制其大小。按一下<guimenu>接受</guimenu>以完成操作。
       </para>
      </step>
      <step>
       <para>
        若要新增新的子磁碟區，請按一下<guimenu>新增子磁碟區</guimenu>，然後輸入其路徑。(選擇性) 您可以對該磁碟區停用<literal>寫入時複製</literal> (核取 <guimenu>noCoW</guimenu>) 或限制其大小。按一下<guimenu>接受</guimenu>以完成操作。
       </para>
      </step>
      <step>
       <para>
        若要移除子磁碟區，請從清單中選取相應子磁碟區，然後按一下<guimenu>刪除</guimenu>。按一下<guimenu>是</guimenu>以確認刪除。
       </para>
      </step>
      <step>
       <para>
       </para>
       <figure xml:id="fig-yast2-btrfs-subvolumes">
        <title>YaST 磁碟分割程式中的 Btrfs 子磁碟區</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="install_partitioner_btrfs_subvolumes.png" width="75%" format="PNG"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="install_partitioner_btrfs_subvolumes.png" width="75%" format="PNG"/>
         </imageobject>
        </mediaobject>
       </figure>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      按一下<guimenu>完成</guimenu>以結束磁碟分割程式。
     </para>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-options">
  <title>編輯分割區</title>
  <para>
   在建立一個新的分割區或修改一個現有分割區時，可設定多項參數。對於新的分割區，YaST 設定的預設參數通常已可滿足需求，無需做任何修改。若要手動編輯您的分割設定，請如下操作：
  </para>
  <procedure>
   <step>
    <para>
     選擇分割區。
    </para>
   </step>
   <step>
    <para>
     按一下<guimenu>編輯</guimenu>，編輯分割區並設定參數：
    </para>
    <variablelist>
     <varlistentry>
      <term>檔案系統 ID</term>
      <listitem>
       <para>
        即使您在此階段不想格式化分割區，也請為其指定一個檔案系統 ID，以確保可正確註冊分割區。一般值為 <guimenu>Linux</guimenu>、<guimenu>Linux swap</guimenu>、<guimenu>Linux LVM</guimenu> 和 <guimenu>Linux RAID</guimenu>。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       檔案系統
      </term>
      <listitem>
       <para>
        若要變更分割區的檔案系統，請按一下<guimenu>格式化分割區</guimenu>，並在<guimenu>檔案系統</guimenu>清單中選取一種檔案系統類型。
       </para>
       <para>
        <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 支援多種類型的檔案系統。Btrfs 由於它擁有進階功能而選做根分割區的 Linux 檔案系統。它支援寫入時複製功能、可以建立快照、可以跨多個裝置、可以設定子磁碟區，並支援其他多種有用的技術。XFS、Ext3 和 Ext4 是日誌檔案系統。使用作業時記錄的寫入程序，這些檔案系統可以在系統當機後非常迅速地還原系統。Ext2 不是一個記錄檔案系統，但對於較小的分割區而言已足夠，因為它不需要很多磁碟空間用於管理。
       </para>
       <para>
        根分割區的預設檔案系統是 Btrfs。其他分割區的預設檔案系統是 XFS。
       </para>
       <para>
        可以在光學可重寫和不可重寫媒體、USB 隨身碟及硬碟中使用 UDF 檔案系統。該檔案系統受多種作業系統的支援。
       </para>
       <para>
        Swap 是一種允許分割區做為虛擬記憶體的特殊格式。建立的交換分割區至少要有 256 MB。但是，如果交換空間已用盡，則考慮為系統新增記憶體，而不要新增交換空間。
       </para>
       <warning>
        <title>變更檔案系統</title>
        <para>
         變更檔案系統和重新格式化分割區都會刪除分割區中的所有資料，而且無法復原。
        </para>
       </warning>
       <para>
        如需各種檔案系統的詳細資料，請參閱《<citetitle>儲存管理指南</citetitle>》。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       加密裝置
      </term>
      <listitem>
       <para>
        如果您啟用加密，所有資料都會以加密格式寫入硬碟。這可以使敏感資料更加安全，但會降低系統速度，因為加密處理需要一些時間。如需檔案系統加密的詳細資訊，請參閱<xref linkend="cha-security-cryptofs"/>。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       掛接點
      </term>
      <listitem>
       <para>
        指定檔案系統樹狀結構中用於掛接分割區的目錄。可以選取 YaST 提供的建議，或輸入任何其他名稱。
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       Fstab 選項
      </term>
      <listitem>
       <para>
        指定全域檔案系統管理檔案 (<filename>/etc/fstab</filename>) 中包含的各個參數。預設值應足以滿足大多數安裝需求。例如，您可以將檔案系統的識別資訊由裝置名稱變更為磁碟區標籤。在磁碟區標籤中，您可以使用除 <literal>/</literal> 和空格以外的所有字元。
       </para>
       <para>
        若要取得永久裝置名稱，請使用掛接選項：<guimenu>裝置 ID</guimenu>、<guimenu>UUID</guimenu> 或<guimenu>標籤</guimenu>。在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 中，預設會啟用永久的裝置名稱。
       </para>
       <note os="sles" arch="zseries">
        <title>IBM Z：依路徑掛接</title>
        <para>
         由於使用磁碟至磁碟複製進行克隆時，依 ID 掛接會在 IBM Z 上產生問題，因此預設會在 IBM Z 上依 <filename>/etc/fstab</filename> 中的路徑掛接裝置。
        </para>
       </note>
       <para>
        如果想要按標籤掛接分割區，需要在<guimenu>磁碟區標籤</guimenu>文字項目中定義一個標籤。例如，您可以對要掛接到 <filename>/home</filename> 的分割區使用分割區標籤 <literal>HOME</literal>。
       </para>
       <para>
        若要在檔案系統上使用配額，請使用掛接選項<guimenu>啟用配額支援</guimenu>。您必須先執行此動作，然後才能在 YaST 的<guimenu>使用者管理</guimenu>模組中為使用者定義配額。如需如何設定使用者配額的詳細資訊，請參閱<xref linkend="sec-yast-userman-adv-quota"/>。
       </para>
       <para os="sles">
        如果您打算為 Btrfs 子磁碟區指定配額，請參閱<xref linkend="sec-filesystems-major-btrfs-quota"/>。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     選取<guimenu>完成</guimenu>以儲存這些變更。
    </para>
   </step>
  </procedure>
  <note>
   <title>調整檔案系統的大小</title>
   <para>
    若要調整現有檔案系統的大小，請選取分割區，然後使用<guimenu>調整大小</guimenu>。請注意，如果分割區已裝上，則無法調整其大小。若要調整分割區的大小，請在執行磁碟分割程式之前先卸載相應的分割區。
   </para>
  </note>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-options2">
  <title>專家選項</title>
  <para>
   在<guimenu>系統檢視</guimenu>窗格中選取一個硬碟裝置 (例如<guimenu>sda</guimenu>) 後，即可存取<guimenu>進階磁碟分割程式</guimenu>視窗右下方的<guimenu>進階</guimenu>功能表。該功能表包含下列指令：
  </para>
  <variablelist>
   <varlistentry>
    <term>建立新分割區表</term>
    <listitem>
     <para>
      此選項可用於在選定裝置上建立新的分割區表。
     </para>
     <warning>
      <title>建立新分割區表</title>
      <para>
       若在裝置上建立新的分割區表，就會移除該裝置上的所有分割區及其資料，而且無法復原。
      </para>
     </warning>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>複製此磁碟</term>
    <listitem>
     <para>
      此選項可用於將裝置的分割區配置 (而不是資料) 複製到其他可用的磁碟裝置。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-configure-options">
  <title>進階選項</title>
  <para>
   選取電腦的主機名稱 (<guimenu>系統檢視</guimenu>窗格中樹狀結構的頂層) 後，可以存取<guimenu>進階磁碟分割程式</guimenu>視窗右下方的<guimenu>設定</guimenu>功能表。該功能表包含下列指令：
  </para>
  <variablelist>
   <varlistentry>
    <term>設定 iSCSI</term>
    <listitem>
     <para>
      若要透過 IP 區塊裝置存取 SCSI，首先要設定 iSCSI。這樣即可在主分割區清單中列出更多可用的裝置。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>設定多重路徑</term>
    <listitem>
     <para>
      此選項可用於為受支援的大量儲存裝置設定多重路徑增強功能。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-info">
  <title>更多磁碟分割提示</title>
  <para>
   下一節包含一些關於磁碟分割的提示和祕訣，可協助您在設定系統時做出正確的決定。
  </para>
  <sect3 xml:id="sec-expert-partitioner-info-cylinders">
   <title>磁柱編號</title>
   <para>
    請注意，不同的磁碟分割工具會從 <literal>0</literal> 或 <literal>1</literal> 開始統計分割區的磁柱數量。在計算磁柱的數量時，應該總是將最後一個磁柱號與第一個磁柱號相減再加一。
   </para>
  </sect3>
  <sect3 xml:id="sec-expert-partitioner-info-swap">
   <title>使用<literal>交換</literal></title>
   <para>
    使用交換可以延伸可用的實體記憶體。這樣可以使用的記憶體就比可用的實體 RAM 要多。對於 2.4.10 之前的核心，其記憶體管理系統需要使用交換做為一種安全措施。因此如果使用交換後的記憶體沒有達到 RAM 大小的兩倍，就會影響系統效能。這些限制已不存在。
   </para>
   <para>
    Linux 使用稱為<quote>近期最少使用</quote>(LRU) 的頁面來選取可從記憶體移至磁碟的頁面。因此，執行中的應用程式可以使用更多記憶體，快取也更加順暢。
   </para>
   <para>
    如果應用程式嘗試配置所允許的最大記憶體，則交換可能會出現問題。主要分為以下三種情況：
   </para>
   <variablelist>
    <varlistentry>
     <term>沒有交換的系統</term>
     <listitem>
      <para>
       應用程式獲得所允許的最大記憶體。系統會釋放所有快取，導致其他所有執行中的應用程式變慢。幾分鐘後，核心的記憶體不足終止機制即會啟動，然後將該程序停止。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>具備中等大小交換 (128 MB-512 MB) 的系統</term>
     <listitem>
      <para>
       起先，系統的效能會降低，就像沒有交換的系統一樣。當所有實體 RAM 都配置完畢後，就會使用交換空間。此時，系統變得非常慢，並且無法從遠端執行指令。根據執行交換空間之硬碟的速度，系統將保持此狀況約 10 到 15 分鐘，直到記憶體不足終止機制將此問題解決為止。請注意，如果電腦需要執行<quote>暫停寫入到磁碟</quote>，則您需要一定的交換容量。在此情況下，交換空間應足夠大，才能容納來自記憶體的必要資料 (512 MB-1GB)。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>具備大量交換的系統 (數 GB)</term>
     <listitem>
      <para>
       在此情況下，最好不要執行無法控制且交換空間過大的應用程式。若使用此類應用程序，系統將需要數小時的時間才能復原。在此過程中，其他程序可能會逾時和出錯，使系統陷入未知狀態，即使終止了錯誤程序也是如此。在此情況下，請強制重新開機，使系統重新執行。只有在您有依賴於此功能的應用程式時，大量交換才有用。這類應用程式 (例如資料庫或圖形處理程式) 通常可以選擇直接使用硬碟空間以符合它們的需要。建議使用此選項，而不是使用大量交換空間。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    如果您的系統未失控，但在一定的時間後需要更多交換，則可以線上延伸交換空間。如果您準備了一個分割區用於交換空間，請使用 YaST 新增此分割區。如果您沒有可用的分割區，也可以使用交換檔來延伸交換。生成交換檔案的速度會低於分割區，但與實體 RAM 相比，二者速度均緩慢至極，因此實際差異可忽略不計。
   </para>
   <procedure>
    <title>以手動方式新增交換檔案</title>
    <para>
     若要在正在執行的系統中新增交換檔，請按照下列步驟進行：
    </para>
    <step>
     <para>
      在系統中建立一個空檔案。例如，若要在 <filename>/var/lib/swap/swapfile</filename> 中新增有 128 MB 交換空間的交換檔，請使用以下指令：
     </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> mkdir -p /var/lib/swap
<prompt>tux &gt; </prompt><command>sudo</command> dd if=/dev/zero of=/var/lib/swap/swapfile bs=1M count=128</screen>
    </step>
    <step>
     <para>
      使用以下指令啟始化此交換檔
     </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> mkswap /var/lib/swap/swapfile</screen>
      <note>
  <title>透過 <command>mkswap</command> 格式化時變更了交換分割區的 UUID</title>
  <para>如果可能，請勿使用 <command>mkswap</command> 重新格式化現有的交換分割區。否則，使用 <command>mkswap</command> 重新格式化將變更交換分割區的 UUID 值。請透過 YaST 重新格式化 (如此將更新 <filename>/etc/fstab</filename>)，或者手動調整 <filename>/etc/fstab</filename>。
  </para>
</note>
    </step>
    <step>
     <para>
      使用以下指令啟動交換
     </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> swapon /var/lib/swap/swapfile</screen>
     <para>
      若要停用此交換檔，請使用以下指令
     </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> swapoff /var/lib/swap/swapfile</screen>
    </step>
    <step>
     <para>
      使用以下指令檢查目前可用的交換空間
     </para>
<screen><prompt>tux &gt; </prompt>cat /proc/swaps</screen>
     <para>
      請注意，現在這只是暫時的交換空間，下次重新開機後就不再可用。
     </para>
    </step>
    <step>
     <para>
      若要永久啟用此交換檔，請將下行新增到 <filename>/etc/fstab</filename>：
     </para>
<screen>/var/lib/swap/swapfile swap swap defaults 0 0</screen>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-expert-partitioner-lvm">
  <title>磁碟分割與 LVM</title>
  <para>
   在<guimenu>進階磁碟分割程式</guimenu>中，按一下<guimenu>系統檢視</guimenu>窗格中的<guimenu>磁碟區管理</guimenu>項目，以存取 LVM 組態。但是，如果系統中已存在有效的 LVM 組態，則一旦輸入工作階段的啟始 LVM 組態，它就會自行啟動。在此情況下，任何磁碟只要含有分割區 (屬於某個已啟動的磁碟區群組)，就無法重新分割。硬碟上只要有分割區正在使用中，Linux 核心就無法重新讀取其修改過的分割區表。如果系統中已存在有效的 LVM 組態，就不需要進行實體重新分割，只要變更邏輯磁碟區的組態即可。
  </para>
  <para>
   在實體磁碟區 (PV) 的開頭，有關磁碟區的資訊會寫入分割區。若要為了其他非 LVM 的使用而要重新使用這類分割區，建議刪除此磁碟區的開始部分。例如，在 VG <literal>system</literal> 與 PV <filename>/dev/sda</filename> 中，可以使用以下指令完成此操作：
  </para>
<screen><command>dd</command> <option>if=/dev/zero of=/dev/sda2 bs=512 count=1</option></screen>
  <warning>
   <title>用於開機的檔案系統</title>
   <para>
    開機的檔案系統 (root 檔案系統或 <filename>/boot</filename>) 不得儲存在 LVM 邏輯磁碟區中。請另外儲存在一般的實體分割區中。
   </para>
  </warning>
  <para os="sles">
   如需 LVM 的詳細資料，請參閱<xref linkend="book-storage"/>。
  </para>
 </sect2>
</sect1>
