<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
  <!ENTITY productnamearch "<phrase xmlns='http://docbook.org/ns/docbook' role='productname'><phrase os='sles'>&sls; for &arm;</phrase></phrase>">
  <!ENTITY appliancename "&productnamearch; for the &rpi;">
  <!ENTITY jeos-firstboot "&jeos; First Boot Assistant">
]>
<article role="sbp" xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
  xml:id="art-rpiquick" xml:lang="en">
 <info>
  <title>&rpiquick;</title>
  <productname>&productnamearch; &productnumber;</productname>
  <author><personname><firstname>Fabian</firstname><surname>Vogt, Release Engineer, SUSE</surname></personname>
  </author>
  <author><personname><firstname>Jay</firstname><surname>Kruemcke, Product Manager, SUSE</surname></personname>
  </author>
  <author><personname><firstname>Andreas</firstname><surname>Faerber, Project Manager, SUSE</surname></personname>
  </author>
  <date><?dbtimestamp format="B d, Y"?></date>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker>
    <dm:url>https://bugzilla.suse.com/enter_bug.cgi</dm:url>
    <dm:component>Documentation</dm:component>
    <dm:product>SUSE Linux Enterprise Server 15 SP2</dm:product>
    <dm:assignee>fs@suse.com</dm:assignee>
   </dm:bugtracker>
   <dm:editurl>https://github.com/SUSE/doc-sle/edit/master/xml/</dm:editurl>
   <dm:translation>no</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    This guide contains an overview of &productnamearch; on the &rpireg;
    platform and will guide you through the setup procedure.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <sect1 xml:id="sec-rpi-platform">
  <title>Platform Overview</title>

  <para>
   To use &productnamearch; on the &rpi;, a 64-bit &armreg; compatible
   &rpireg; is required. &productnamearch; &productnumber; is tested to work
   on &rpi3; Model&nbsp;A+, Model&nbsp;B, Model&nbsp;B+, and &rpi4; Model&nbsp;B boards
   as well as on &rpi; Compute&nbsp;Module 3 and 3+ on MyPi Industrial IoT Integrator Board.
  </para>

  <sect2 xml:id="sec-rpi-platform-system">
   <title>Technical Details of the &rpi3; Model&nbsp;B</title>
   <para>
    The &rpi; is a series of small single-board computers based on
    a System-on-a-Chip (SoC) by &brcmreg;, featuring various peripherals on the board.
   </para>
   <figure xml:id="fig-rpi-platform-system-board">
    <title>Overview of the &rpi3; Model&nbsp;B Connectors, &copy; Efa / English Wikipedia / CC BY-SA 3.0</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="rpi-3b-overview-2.png" width="80%"
              format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="rpi-3b-overview-2.png" width="80%"
              format="PNG"/>
     </imageobject>
     <textobject><phrase>Overview of the &rpi3; Model&nbsp;B connectors &copy; Efa /
              English Wikipedia / CC BY-SA 3.0</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <figure xml:id="fig-rpi-platform-system-photo">
    <title>Photo of the &rpi3; Model&nbsp;B Connectors, &copy; Evan-Amos / Own work / Public Domain</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="rpi-3b-photo.png" width="80%" format="PNG"
            />
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="rpi-3b-photo.png" width="80%" format="PNG"
            />
     </imageobject>
     <textobject><phrase>Photo of the &rpi3; Model&nbsp;B connectors &copy; Evan-Amos
              / Own work / Public Domain</phrase>
     </textobject>
    </mediaobject>
   </figure>
   <variablelist>
    <title>Selected Features of the &rpi3; Model&nbsp;B/B+</title>
    <varlistentry>
     <term>CPU</term>
     <listitem>
      <para>
       The &brcm;&nbsp;BCM2837 SoC includes a quad-core &cortexreg;-A53
       Application Processor supporting the &armv8; 32-bit and 64-bit instruction
       sets. With the default configuration, it is clocked up to 1.2&nbsp;GHz.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>RAM</term>
     <listitem>
      <para>
       1024 MiB DDR2 memory mounted on the back of the board.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Graphics</term>
     <listitem>
      <para>
       &vc4reg; providing &openglesreg;&nbsp;2.0 support. Displays can
       be connected over &hdmireg;, composite (TRRS jack), or &mipidsireg; (ribbon cable).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Ethernet</term>
     <listitem>
      <para>
       A USB Ethernet controller on the board provides 10/100&nbsp;Mbit/s Ethernet
       (Model&nbsp;B) or 10/100/1000&nbsp;Mbit/s Ethernet with a maximum throughput of
       300&nbsp;Mbit/s (Model&nbsp;B+).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>WLAN</term>
     <listitem>
      <para>
       The BCM43438 chip on Model&nbsp;B supports IEEE-802.11b, IEEE-802.11g, and
       IEEE-802.11n in the 2.4&nbsp;GHz band. It also provides Bluetooth 2.0 to
       4.1 (Low Energy). The BCM43455 chip on Model&nbsp;B+ supports IEEE-802.11b,
       IEEE-802.11g, IEEE-802.11n, and IEEE-802.11ac in the 2.4&nbsp;GHz and
       5&nbsp;GHz bands. It provides Bluetooth 4.2 (Low Energy).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Storage</term>
     <listitem>
      <para>
       The &microsdhc; card slot allows for a memory card to be inserted as the
       primary boot medium.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Power</term>
     <listitem>
      <para>
       The &rpi3;'s main power source is the Micro USB connector. If your &rpi;
       comes with a power supply, it is recommended to use the bundled power
       supply only.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>USB</term>
     <listitem>
      <para>
       A total of four USB 2.0 ports are available.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Connectors</term>
     <listitem>
      <para>
       A 0.1&nbsp;inch multi-function pin header is also available. Note that
       not all functionality of this header is exposed in &productnamearch;
       &productnumber;.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="sec-rpi-platform-software">
   <title>&productnamearch; &productnumber;</title>
   <para>
    &productnamearch; is the first fully supported
    commercial Linux operating system product available for the &rpi;. You can
    purchase subscriptions which entitle you to receive all released bug and
    security fixes, feature updates, and technical assistance from &suse;'s
    worldwide support. Learn more about subscription and support options at
    <link xlink:href="https://www.suse.com/support/programs/subscriptions/?id=SUSE_Linux_Enterprise_Server"/>.
   </para>
   <note>
    <title>Trial Version</title>
    <para>
     If you want to try out &productnamearch; &productnumber; on the &rpi;,
     &suse; will provide you with a trial version. This gives you access to
     free patches and updates for a period of 60 days. You must sign in to the
     &scc; at <link xlink:href="&sccurl;" />
     using your Customer Center account credentials to receive this free offer.
     If you do not have a Customer Center account, you must create one to take
     advantage of the trial version.
    </para>
   </note>
   <bridgehead>Minimum System Requirements for Installation</bridgehead>
   <itemizedlist>
    <listitem>
     <para>
      &rpi3; Model A+, B, or B+, or &rpi4; Model&nbsp;B.
     </para>
    </listitem>
    <listitem>
     <para>
      &microsd; card with at least 8&nbsp;GB capacity.
     </para>
    </listitem>
    <listitem>
     <para>
      USB keyboard, mouse.
     </para>
    </listitem>
    <listitem>
     <para>
      &hdmi; cable and monitor.
     </para>
    </listitem>
    <listitem>
     <para>
      Power supply with at least 2.5&nbsp;A capacity.
     </para>
    </listitem>
   </itemizedlist>
   <sect3 xml:id="sec-rpi-platform-software-raspbian">
    <title>Differences Compared to Raspbian</title>
    <para>
     Raspbian is the de-facto default distribution for the &rpi;. The following
     paragraphs provide a short overview of differences between &productnamearch;
     on the &rpi; and Raspbian.
    </para>
    <variablelist>
     <varlistentry>
      <term>Based on Upstream Kernel</term>
      <listitem>
       <para>
        Raspbian uses a kernel with modifications especially for the &rpi;.
        &productnamearch; uses the default &sle; kernel for &aarch64;, which
        is derived from the official mainline kernel.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
<!-- TODO: Better title? -->
      <term>&aarch64; Instruction Set</term>
      <listitem>
       <para>
        &productnamearch; on the &rpi; is the first distribution for the
        &rpi; using the &aarch64; instruction set.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Boot Process</term>
      <listitem>
       <para>
        In Raspbian, the kernel is loaded directly. This is not supported by
        &productnamearch;, where the U-Boot boot loader is used to provide
        an EFI boot environment. A GRUB2 EFI binary is chain-loaded to provide a
        graphical boot screen.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Root File System</term>
      <listitem>
       <para>
        &appliancename; uses Btrfs as the file system for the root partition.
        Compression is enabled by default for better SD card performance.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
<!-- <para> TO DO: We should (later) add a note on differences dealing with expansion boards.</para>-->
   </sect3>
   <sect3 xml:id="sec-rpi-platform-software-yast">
    <title>&yast;</title>
    <para>
     &yast; is the installation and configuration framework for &sle;. It is
     popular for its ease of use, flexible graphical interfaces and the capability
     to customize your system quickly during and after installation. &yast;
     can be used to configure your entire system: You can configure hardware,
     set up networking, manage system services, and tune your security settings.
     All these tasks can be accessed from the &yast; control center. To start
     it, choose &yast; in the menu or run the command <command>xdg-su -c
     yast2</command>. You will be prompted to enter the password of the
     &rootuser; user.
    </para>
    <figure xml:id="fig-rpi-yast2">
     <title>The &yast; Control Center</title>
     <mediaobject>
      <imageobject>
       <imagedata fileref="rpi_yast2.png"/>
      </imageobject>
      <textobject><phrase>The &yast; control center</phrase>
      </textobject>
     </mediaobject>
    </figure>
    <para>
     When started, &yast; shows an overview of available modules
     (<xref linkend="fig-rpi-yast2"/>). Simply click an icon to open a module.
    </para>
   </sect3>
   <sect3 xml:id="sec-rpi-platform-software-zypper">
    <title>Zypper</title>
    <para>
     Zypper is the package manager for &sle;. It is the tool for installing,
     updating, and removing packages and for managing repositories.
    </para>
    <para>
     The general syntax for Zypper invocations is:
    </para>
<screen>zypper <option>[global-options]</option> <replaceable>command</replaceable> <option>[command-options]</option><option>[arguments]</option> ...</screen>
    <note>
     <title>Short Command Form</title>
     <para>
      For most commands, there is both a short and a long form. An overview is
      available with <command>zypper --help</command>.
     </para>
    </note>
    <variablelist>
     <varlistentry>
      <term>Installing a package</term>
      <listitem>
<screen>&prompt.root;zypper install mplayer</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Removing a package</term>
      <listitem>
<screen>&prompt.root;zypper remove mplayer</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>List available patches</term>
      <listitem>
<screen>&prompt.user;zypper list-patches</screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Install available patches</term>
      <listitem>
<screen>&prompt.root;zypper patch</screen>
      </listitem>
     </varlistentry>
    </variablelist>
    <note>
     <title>Installing Software Updates</title>
     <para>
      The recommended way to install available software updates is by using the
      &yast; Online Updater. To start it, choose <quote>Online Update</quote>
      in <quote>Settings</quote> under <quote>Desktop Apps</quote> in the IceWM
      menu.
     </para>
    </note>
   </sect3>
   <sect3 xml:id="sec-rpi-platform-software-limitations">
    <title>Limitations</title>
    <variablelist>
     <varlistentry>
      <term>Graphics not hardware-accelerated</term>
      <listitem>
       <para>
        &xvendor; hardware acceleration is disabled to improve system stability
        and reliability.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>
     For other limitations refer to the online version of the Release Notes at
     <link xlink:href="https://www.suse.com/releasenotes/aarch64/SUSE-SLES/&product-ga;-SP&product-sp;/" />.
    </para>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-rpi-installation">
  <title>Installation</title>

<!-- TODO: Compressed or not compressed? -->

  <para>
   &appliancename; is distributed as an XZ-compressed image file for &microsd;
   cards. This section will guide you through the process of preparing the card
   for the first boot. If you already have a &microsd; card containing the
   image, you can skip this section and go straight to
   <xref linkend="sec-rpi-firstboot"/>.
  </para>

  <note>
   <title>SD Card Space Requirements</title>
   <para>
    It is recommended to use a card with a capacity of at least 8&nbsp;GB.
   </para>
<!--<para>TO DO!!! 8 GB may lead to space issues with btrfs snapshots and
        has not been tested for SP3. Suggestion: Leave as is and revisit
        later.</para>-->
  </note>

  <warning>
   <title>All Data on the Card Will Be Lost!</title>
   <para>
    By following the procedure below, all data on the SD card will be
    overwritten and therefore irrevocably lost. Be very careful when choosing
    the destination device of the image writing process.
   </para>
  </warning>

  <sect2 xml:id="sec-rpi-installation-linux">
   <title>Preparing the Card on Linux</title>
   <para>
    Before and after you plug in the SD card, run the <command>lsblk</command>
    command. Between the two runs of <command>lsblk</command>, there should be
    a difference of one or more lines. The first column and first row is the
    name of the node representing the SD card in your system. To write the
    image to the card, use the <command>dd</command> command:
   </para>
<screen>xz -cd <replaceable>IMAGE</replaceable> | dd of=/dev/<replaceable>SDCARDDEV</replaceable> bs=4096</screen>
   <example xml:id="ex-rpi-installation-dd">
    <title>Writing the Image to the Card using <command>dd</command></title>
    <para>
     This command decompresses the image
     <literal>SLES&product-ga;-SP&product-sp;-JeOS.aarch64-&product-ga;.&product-sp;-RaspberryPi-GM.raw.xz</literal> to the SD
     card <literal>mmcblk0</literal>:
    </para>
<screen>&prompt.user;xz -cd SLES&product-ga;-SP&product-sp;-JeOS.aarch64-&product-ga;.&product-sp;-RaspberryPi-GM.raw.xz | sudo dd of=/dev/mmcblk0 bs=4096 iflag=fullblock status=progress</screen>
   </example>
  </sect2>

  <sect2 xml:id="sec-rpi-installation-windows">
   <title>Preparing the Card on &mswin; Operating Systems</title>
   <para>
    The following steps will guide you through the installation of the image
    onto the SD card on &mswinreg; operating systems. You need to meet
    these prerequisites:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Latest available image of &appliancename;
     </para>
    </listitem>
    <listitem>
     <para>
      Easy 7-Zip from
      <link xlink:href="http://www.e7z.org/" />
     </para>
    </listitem>
    <listitem>
     <para>
      Win32 Disk Imager from
      <link xlink:href="http://sourceforge.net/projects/win32diskimager/" />
     </para>
    </listitem>
   </itemizedlist>
   <procedure xml:id="pro-rpi-installation-windows">
    <step>
     <para>
      Open the downloaded image using Easy 7-Zip. Extract the file content into
      a directory with sufficient free space.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_image_7z.png"/>
       </imageobject>
       <textobject><phrase>7zip extraction dialog</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Run Win32 Disk Imager and select the extracted file as <guimenu>Image
      File</guimenu>. Then, choose the correct drive letter as
      <guimenu>Device</guimenu>. Click <guimenu>Write</guimenu> to start the
      procedure.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_image_win32.png"/>
       </imageobject>
       <textobject><phrase>Win32 Disk Imager Writing Process</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
     <note>
      <title>Finding the correct device</title>
      <para>
       If you are unsure which drive letter to choose from in the list, remove
       the SD card and run Win32 Disk Imager again. The option that disappeared
       is the right target device.
      </para>
     </note>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-rpi-installation-macos">
   <title>Preparing the Card on &macos;</title>
   <para>
    The following steps will guide you through the installation of the image
    onto the SD card on &macosreg;. You need to meet these prerequisites:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Latest available image of &appliancename;
     </para>
    </listitem>
    <listitem>
     <para>
      The Unarchiver from
      <link xlink:href="http://unarchiver.c3.cx/unarchiver" />
     </para>
    </listitem>
   </itemizedlist>
   <procedure xml:id="pro-rpi-installation-macos">
    <step>
     <para>
      Open Finder at the location where the downloaded image is stored. Use the
      <guimenu>Open With</guimenu> selection to choose
      <emphasis role="strong">The Unarchiver</emphasis> instead of the default
      <emphasis role="strong"
              >Archive</emphasis> utility and
      extract the content into a directory with sufficient free space.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_image_macos_sles12sp3.jpg"/>
       </imageobject>
       <textobject><phrase>Open the Image with The Unarchiver</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Open a Terminal window and change into the destination directory of the
      uncompressed image. Enter <command>diskutil list</command> before and
      after the SD card is inserted to find out which device to use.
     </para>
    </step>
    <step>
     <para>
      Run <command>diskutil unmountDisk
      <replaceable>/dev/diskX</replaceable></command>, where X is the disk
      number from the previous step.
     </para>
    </step>
    <step>
     <para>
      Run <command>sudo dd bs=4096 if=<replaceable>imageFile.raw</replaceable>
      of=/dev/disk<replaceable>X</replaceable></command>, where <replaceable>X</replaceable> is the disk
      number and <replaceable>imageFile.raw</replaceable> is the name of the uncompressed image.
     </para>
<screen>&prompt.sudo;dd bs=4096 if=SLES&product-ga;-SP&product-sp;-JeOS.aarch64-&product-ga;.&product-sp;-RaspberryPi-GM.raw.xz of=/dev/disk4
Password:
5550+0 records in
5550+0 records out
5819596800 bytes transferred in 1131.796649 secs (5141910 bytes/sec)
          </screen>
    </step>
    <step>
     <para>
      Now unmount the disk (which is now labelled <guimenu>EFI</guimenu>) as
      usual.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-rpi-firstboot">
  <title>Booting for the First Time</title>

  <para>
   After insertion of the prepared &microsd; card, connect a display, Ethernet
   cable, and USB keyboard and mouse first, then provide power over Micro USB.
   After a few seconds you should be able to see a few lines of text on the
   screen. If that is not the case, recheck the connection to the display.
  </para>

  <note>
   <title>Operation without Mouse</title>
   <para>
    The &jeos-firstboot; can be used without a mouse by only using the keyboard.
    Every user interface element has an accelerator configured, visible as a
    highlighted letter. To activate such an accelerator, press the letter
    together with <keycap function="alt"/>.
   </para>
  </note>

  <para>
   On the first boot, the system will expand to fill the entire SD card, so be
   patient.
  </para>

  <sect2 xml:id="sec-rpi-firstboot-jeos">
   <title>Initial System Setup with &jeos-firstboot;</title>
   <para>
    After a few minutes, the &jeos-firstboot; will lead you through the initial system setup.
   </para>
   <procedure xml:id="pro-rpi-firstboot-jeos">
    <step>
     <para>
      Note that this minimized JeOS image comes without language selection.
      After the assistant finishes, you will be able to install and select your system locale.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_locale.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; showing information on setting locale</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      First, the keyboard layout needs to be configured.
      Use the arrow keys or first letter and select <guimenu>OK</guimenu>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_keyboard.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; showing keyboard
                  configuration on first boot</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Read the License Agreement. You need to accept it.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_eula_sles15sp1.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; displaying the license text</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Select the time zone by using the arrow keys or first letter.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_timezone.png"/>
       </imageobject>
       <textobject><phrase>&yast; asking for the time zone</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Select <guimenu>OK</guimenu> to proceed.
     </para>
    </step>
    <step>
     <para>
      You will be asked to provide a root password now. Do not forget what you
      enter here, as you will need it for administration.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_root.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; asking you to set a password for the
                  &rootuser; user</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Confirm the root password you just provided by typing it in again.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_root_confirm.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; asking you to confirm the password for the
                  &rootuser; user</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Note that you should register your system after installation,
      as detailed in <xref linkend="sec-rpi-registration"/>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_reg_sles15sp1.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; showing registration
                  instructions</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
     <note>
      <title>Deferring Registration</title>
      <para>
       You will not receive
       updates or patches until you register using <emphasis role="italic">SUSEConnect</emphasis>.
      </para>
     </note>
    </step>
    <step>
     <para>
      Select <guimenu>OK</guimenu> to continue.
     </para>
    </step>
    <step>
     <para>
      Finally, you are offered the option to configure a wireless network.
      If you have a wired Ethernet connection, you can skip this step by selecting <guimenu>No</guimenu>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_first_wifi.png"/>
       </imageobject>
       <textobject><phrase>&jeos-firstboot; asking you whether to configure a wireless network</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
     <para>
      If you select <guimenu>Yes</guimenu>, you will see the following screens:
     </para>
     <remark>
      cwickert 2020-01-22: First step is commented out because rpi_first_wifi_interface.png
      needs an update (see https://bugzilla.suse.com/show_bug.cgi?id=1156663 and I'm not
      sure the step is still necessary. Why select a device if there is only one?
     </remark>
     <substeps>
      <!--
      <step>
       <para>
        Choose the network interface <guimenu>wlan0</guimenu> by selecting <guimenu>OK</guimenu>.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject>
          <imagedata width="80%" fileref="rpi_first_wifi_interface.png"/>
         </imageobject>
         <textobject>
          <phrase>
           &jeos-firstboot; asking you to select a wireless network device
          </phrase>
         </textobject>
        </mediaobject>
       </informalfigure>
      </step>
      -->
      <step>
       <para>
        Select a wireless network to connect to and proceed with
        <guimenu>OK</guimenu>.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject>
          <imagedata width="80%" fileref="rpi_first_wifi_ssid.png"/>
         </imageobject>
         <textobject>
          <phrase>
           &jeos-firstboot; asking you to select a wireless network
          </phrase>
         </textobject>
        </mediaobject>
       </informalfigure>
      </step>
      <step>
       <para>
        Select the authentication method for the wireless network and proceed
        with <guimenu>OK</guimenu>.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject>
          <imagedata width="80%" fileref="rpi_first_wifi_auth.png"/>
         </imageobject>
         <textobject>
          <phrase>&jeos-firstboot; asking you to select an authentication
           method for the wireless network</phrase>
         </textobject>
        </mediaobject>
       </informalfigure>
      </step>
      <step>
       <para>
        Enter the passphrase for the wireless network and proceed with
        <guimenu>OK</guimenu>.
       </para>
       <informalfigure>
        <mediaobject>
         <imageobject>
          <imagedata width="80%" fileref="rpi_first_wifi_passwd.png"/>
         </imageobject>
         <textobject><phrase>&jeos-firstboot; asking you to enter the
          passphrase for the wireless network</phrase>
         </textobject>
        </mediaobject>
       </informalfigure>
      </step>
     </substeps>
    </step>
   </procedure>
   <note>
    <title>WPA EAP authentication</title>
    <para>
     WPA authentication supports just the 'mschapv2' EPA authentication, which is used as default.
    </para>
   </note>
   <para>
    If you chose to skip configuration of wireless networks
    or if you fully completed their configuration,
    the &jeos-firstboot; will exit. The system continues to boot to a login prompt.
   </para>
   <para>
    You can now log in with &rootuser; user and the password you chose earlier.
   </para>
   <note>
    <title>Canceling the &jeos-firstboot;</title>
    <para>
     If at any point you select to <guimenu>Cancel</guimenu> the assistant,
     the system will shut down. You can then disconnect the power supply,
     make any necessary changes, and start over.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="sec-rpi-registration">
   <title>Registration Process</title>
   <para>
    It is very important to register your &productnamearch;
    subscription to ensure full functionality of your &rpi; system. The
    SD card image provided by &suse; contains a minimal set of packages that are
    intended for the initial boot process and to get your &rpi; onto the
    network.
   </para>
   <para>
    When you have registered your &productnamearch;
    subscription, you can download other packages you may need, such as
    compilers. The &sls; version that runs on your
    &rpi; is the same version that runs on &x86-64;, &power;, &zseries;, or on
    other &arm;-based systems.
   </para>
   <important>
    <title>Setting the Clock</title>
    <para>
     Because the &rpi; does not have a persistent Real Time Clock, make
     sure that the clock is set to the current date and time before attempting
     to use Zypper or &yast; to install additional packages.
    </para>
   </important>
   <para>
    You can initially register your system with the
    <emphasis role="italic">SUSEConnect</emphasis> tool.
    Afterwards you can also make use of the
    <emphasis role="italic">&yast; Product Registration</emphasis> module.
   </para>
   <note>
    <title>Evaluation Code</title>
    <para>
     Sixty day evaluation subscriptions may be requested at the following page:
     <link xlink:href="https://www.suse.com/products/arm/" />
    </para>
   </note>
   <para>
    <emphasis role="strong">After you have obtained a registration code from a
    subscription card, you need to activate your subscription on the &scc;
    at:</emphasis>
   </para>
   <para>
    <link xlink:href="&sccurl;" />
   </para>
   <para>
    To register your subscription, perform the following steps:
   </para>
   <procedure xml:id="pro-rpi-reg-process">
    <step>
     <para>
      Log in to the &scc; using a browser on another machine.
      Create an account if required:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_scc.png"/>
       </imageobject>
       <textobject><phrase>Log in to the &scc;</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Click <guimenu>Manually Activate Subscriptions</guimenu>:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_management_tools.png"/>
       </imageobject>
       <textobject><phrase>Manual activation of subscription.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Click the dialog field <guimenu>Activate a single subscription</guimenu>:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%"
                  fileref="rpi_activate_subscription.png"/>
       </imageobject>
       <textobject><phrase>Activate a single subscription.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Enter the registration code and accept the terms and conditions:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_enter_code.png"/>
       </imageobject>
       <textobject><phrase>Enter the registration code.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Confirm the subscription activation and the organization assignment.
      Click <guimenu>Activate</guimenu>:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_confirm_activation.png"
                />
       </imageobject>
       <textobject><phrase>Confirm the activation.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Your subscription is now active and ready to be used:
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject>
        <imagedata width="80%" fileref="rpi_success.png"/>
       </imageobject>
       <textobject><phrase>You now have an active subscription.</phrase>
       </textobject>
      </mediaobject>
     </informalfigure>
    </step>
   </procedure>
   <para>
    To register the system, use the <emphasis role="italic">SUSEConnect</emphasis> tool as instructed earlier:
   </para>
   <screen>&prompt.root;SUSEConnect -e <replaceable>company@example.com</replaceable> -r <replaceable>YOUR_CODE</replaceable>
Registering system to SUSE Customer Center
Using E-Mail: <replaceable>company@example.com</replaceable>

Announcing system to https://scc.suse.com ...

Activating SLES &product-ga;.&product-sp; aarch64 ...
-> Adding service to system ...

Activating sle-module-basesystem &product-ga;.&product-sp; aarch64 ...
-> Adding service to system ...
-> Installing release package ...

Activating sle-module-server-applications &product-ga;.&product-sp; aarch64 ...
-> Adding service to system ...
-> Installing release package ...

Successfully registered system</screen>
   <para>
    This may take a few moments.
    Afterwards you will have access to online repositories for installing more packages,
    as described in <xref linkend="sec-rpi-platform-software-zypper"/>.
   </para>
   <example xml:id="ex-rpi-zypper-yast">
    <title>Installing &yast;</title>
    <para>
     Later sections may assume you have installed &yast; for system configuration:
    </para>
    <screen>&prompt.root;zypper in -t pattern yast2_basis</screen>
   </example>
   <note>
    <title>Module Availability</title>
    <para>
     Your subscription gives you access to more than the above
     <emphasis role="italic">Basesystem Module</emphasis> and
     <emphasis role="italic">Server Applications Module</emphasis>.
     To activate additional modules, you can use the <emphasis role="italic">
     &yast; Add System Extensions or Modules</emphasis> module.
    </para>
   </note>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-rpi-configuration">
  <title>Initial System Configuration</title>

  <para>
   In this section it is explained how to perform the initial system
   configuration for &appliancename; &productnumber;.
  </para>

  <sect2 xml:id="sec-rpi-locale">
   <title>Changing the Language</title>
   <para>
    Follow these steps to change the default language:
   </para>
   <procedure xml:id="pro-rpi-locale-localectl">
    <step>
     <para>
      Install the <literal>glibc-locale</literal> package:
     </para>
     <screen>&prompt.root;zypper in glibc-locale</screen>
    </step>
    <step>
     <para>
      Set the language as desired:
     </para>
     <screen>&prompt.root;localectl set-locale LANG=<replaceable>de_DE.UTF-8</replaceable></screen>
    </step>
   </procedure>
   <note>
    <title>Translation Packages</title>
    <para>
     Certain applications may require you to install an additional <literal>
     -lang</literal> package before you can see texts translated to the chosen
     language.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="sec-rpi-hostname">
   <title>Changing the Host Name</title>
   <para>
    Follow these steps to change the default host name:
   </para>
   <procedure xml:id="pro-rpi-hostname-yast">
    <step>
     <para>
      Open the &yast; network module either by running <command>yast2
      lan</command> or clicking the network icon in the &yast; control center.
     </para>
    </step>
    <step>
     <para>
      Select <guimenu>Hostname/DNS</guimenu> in the top tab bar.
     </para>
    </step>
    <step>
     <para>
      Type the new host name into the <guimenu>Hostname</guimenu> field.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>OK</guimenu> to save the change. After &yast; exits, you
      need to log out and in again.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-rpi-network">
   <title>Setting Up Networking</title>
   <para>
    The default configuration has DHCP enabled on the Ethernet port. If that
    suits your network environment, you can skip this section. If you require
    the use of a static IP address, use &yast;:
   </para>
   <procedure xml:id="pro-rpi-network-yast">
    <step>
     <para>
      Open the &yast; network module either by running <command>yast2
      lan</command> or clicking the network icon in the &yast; control center.
     </para>
    </step>
    <step>
     <para>
      In &yast;, you will see the network interface being selected. Select the
      built-in Ethernet and choose <guimenu>Edit</guimenu> to open the address
      configuration.
     </para>
    </step>
    <step>
     <para>
      Select <guimenu>Statically Assigned IP Address</guimenu> and type in the
      desired values for <guimenu>IP Address</guimenu> and <guimenu>Subnet
      Mask</guimenu>. Click <guimenu>Next</guimenu>.
     </para>
    </step>
    <step>
     <para>
      With a static network configuration, you will also need to specify a DNS
      server (if applicable) and a gateway. For the gateway, select
      <guimenu>Routing</guimenu> in the tab bar and enter the IPs of the
      gateways into the specific fields.
     </para>
    </step>
    <step>
     <para>
      The DNS server is set in the <guimenu>Hostname/DNS</guimenu> tab. After
      choosing that tab, enter the IPs of the name servers into the respective
      <guimenu>Name Server</guimenu> fields.
     </para>
    </step>
   </procedure>
   <para>
    Similarly to the procedure described above, &yast; also lets you configure
    the built-in Wi-Fi network adapter.
   </para>
   <para>
    For detailed information about the network configuration in
    &productnamearch;, consult the respective sections of the
    <citetitle>&sls; Deployment</citetitle> and
    <citetitle>Administration</citetitle> guides at
    <link xlink:href="https://documentation.suse.com/sles/15-SP2/"/>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-rpi-usage">
  <title>General System Usage</title>

  <para>
   After the initial configuration procedure and the first boot of the system,
   you can now use various components of the system.
  </para>

  <sect2 xml:id="sec-rpi-bt">
   <title>&bt;</title>
   <para>
    &rpi3; and later have a &btreg; controller on-board that can be used for
    various purposes, such as wireless keyboards, mice, or audio devices.
   </para>
   <para>
    If not done already, you will need to enable the 
    <emphasis role="italic">Desktop Applications Module</emphasis>.
    Assuming you have registered the base product already, as described in
    <xref linkend="sec-rpi-registration"/>, the fastest way to enable the module
    is:
   </para>
   <screen>&prompt.root;SUSEConnect -p sle-module-desktop-applications/&product-ga;.&product-sp;/aarch64
Registering system to SUSE Customer Center

Updating system details on https://scc.suse.com ...

Activating sle-module-desktop-applications &product-ga;.&product-sp; aarch64 ...
-> Adding service to system ...
-> Installing release package ...

Successfully registered system
</screen>
   <para>
    You can then install the <emphasis role="italic">BlueZ</emphasis> software
    stack:
   </para>
   <screen>&prompt.root;zypper install bluez</screen>
   <para>
    To enable the &btreg; controller for use with
    <command>bluetoothctl</command> and related applications,
    for example, on &rpi3; Model&nbsp;B with the default UART configuration, run:
   </para>
<screen>&prompt.root;hciattach /dev/ttyAMA1 bcm43xx 921600
bcm43xx_init
Flash firmware /lib/firmware/<replaceable>BCM43430A1</replaceable>.hcd
Set Controller UART speed to 921600 bit/s
Device setup complete</screen>
   <para>
    Note: The command is the same for &rpi4; Model&nbsp;B,
    just the chipset name and thus firmware filename in the output will be different.
   </para>
   <para>
    You can then use <command>hciconfig hci0 up</command> to bring the device
    up and use <command>hcitool scan</command> to scan the environment for
    discoverable devices.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-rpi-documentation">
  <title>Product Documentation</title>

  <para>
   This introduction only covered the most basic tasks.
  </para>

  <sect2 xml:id="sec-rpi-documentation-sle">
   <title>Product Documentation</title>
   <para>
    You can find the complete documentation for &productnamearch;
    &productnumber; at <link xlink:href="https://documentation.suse.com/"/>.
   </para>
   <note>
    <title>Applicability of Product Documentation</title>
    <para>
     Not all content in the product documentation applies to &productnamearch;
     on the &rpi;, because the &rpi; differs significantly from other hardware
     platforms.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="sec-rpi-documentation-forum">
   <title>&suse; Forums</title>
   <para>
    A valid and activated subscription entitles you to receive bug and security
    fixes, feature updates, and technical assistance from &suse;'s support
    organization. Learn more at
    <link xlink:href="https://www.suse.com/support/" />.
    Via the &scc; at <link xlink:href="&sccurl;" />
    you can open an incident.
   </para>
   <para>
    In addition, &suse; has provided conversation forums where you can get
    answers to questions. Go to
    <link xlink:href="https://forums.suse.com/" />.
    Under the main forum category <emphasis role="strong">SUSE Linux Enterprise
    Server</emphasis> select the sub-forum <emphasis role="strong">SLES for
    Raspberry Pi</emphasis>.
   </para>
   <important>
    <title>Forums Are Not an Official Support Channel</title>
    <para>
     The &suse; forum is <emphasis role="strong">not an official</emphasis>
     support channel from &suse;. The individual articles or statements were
     contributed voluntarily by community members and users of the respective
     products. &suse; cannot verify either that the actions described in the
     articles do what they claim to do, or that they do not have unintended
     consequences. Therefore, neither SUSE LLC, its affiliates, nor the authors
     may be held liable for possible errors or the consequences thereof.
    </para>
    <para>
     Visit
     <link xlink:href="https://www.suse.com/support/" />
     for more information about official support options.
    </para>
   </important>
  </sect2>
 </sect1>
 
  <sect1 xml:id="sec-rpi-trademarks">
  <title>Trademarks</title>
  <para>
      For &suse; trademarks, see
      <link xlink:href="http://www.suse.com/company/legal/"/>.
      All other third-party trademarks are the property of their respective
      owners. Trademark symbols (&reg;, &trade; etc.) denote trademarks
      of &suse; and its affiliates. Asterisks (*) denote third-party
      trademarks.
  </para>
  <!-- trademark use rules for third-party products. cschroder April 2020
  https://resources.mipi.org/blog/protocols-phys-and-the-mipi-alliance-ipr-terms
https://www.arm.com/company/policies/trademarks/arm-trademark-list/cortex-trademark
https://www.hdmi.org/requestform/ClickRequestAsync?docId=42
https://www.bluetooth.com/develop-with-bluetooth/marketing-branding/
  -->
  </sect1>
 
 <sect1 xml:id="sec-rpi-documentation-legal">
  <title>Legal Notice</title>

  <para>
   Copyright &copy;2006–2020 SUSE LLC and contributors. All rights reserved.
  </para>

  <para>
   Permission is granted to copy, distribute and/or modify this document under
   the terms of the GNU Free Documentation License, Version 1.2 or (at your
   option) version 1.3; with the Invariant Section being this copyright notice
   and license. A copy of the license version 1.2 is included in the section
   entitled <quote>GNU Free Documentation License</quote>.
  </para>

  <para>
   &suse;, the &suse; logo and &yast; are registered trademarks of SUSE LLC in the
   United States and other countries. For &suse; trademarks, see
   <link xlink:href="http://www.suse.com/company/legal/" />.
   Linux is a registered trademark of Linus Torvalds. Other names or trademarks
   mentioned in this document may be trademarks or registered trademarks of
   their respective owners.
  </para>

  <para>
   All information found in this book has been compiled with utmost attention
   to detail. However, this does not guarantee complete accuracy. Neither SUSE
   LLC, its affiliates, the authors, nor the translators shall be held liable
   for possible errors or the consequences thereof.
  </para>
 </sect1>
<?pdfpagebreak style="suse2013" formatter="fop"?>
 <xi:include href="common_gfdl1.2_i.xml"/>
</article>
