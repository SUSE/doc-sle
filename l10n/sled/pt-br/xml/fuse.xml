<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="fuse.xml" version="5.0" xml:id="cha-fuse">

 <title>Acessando sistemas de arquivos com o FUSE</title>
 <info>
  <abstract>
   <para>
    FUSE é o acrônimo de <emphasis>file system in user space</emphasis> (sistema de arquivos no espaço do usuário). Isso significa que você pode configurar e montar um sistema de arquivos como um usuário sem privilégios. Normalmente, você precisa ser o <systemitem class="username">root</systemitem> para executar esta tarefa. O FUSE, isoladamente, é um módulo de kernel. Combinado a plug-ins, ele permite estender o FUSE para acessar quase todos os sistemas de arquivos, como conexões SSH remotas, imagens ISO, etc.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <sect1 xml:id="sec-fuse-config">
  <title>Configurando o FUSE</title>

  <para>
   Antes de usar o FUSE, é necessário instalar o pacote <systemitem class="resource">fuse</systemitem>. Dependendo do sistema de arquivos que você deseja usar, serão necessários plug-ins adicionais, disponíveis em pacotes separados. 
  </para>

  <para>
   Em geral, não é necessário configurar o FUSE. Mas vale a pena criar um diretório com todos os pontos de montagem combinados. Por exemplo, você pode criar um diretório <filename>~/mounts</filename> e inserir nele subdiretórios para os diferentes sistemas de arquivo.
  </para>
 </sect1>
 <sect1 xml:id="sec-fuse-ntfs">
  <title>Montando uma partição NTFS</title>

  <para>
   NTFS, <emphasis>New Technology File System</emphasis>, é o sistema de arquivos padrão do Windows. Em circunstâncias normais, como o usuário sem privilégio não pode montar dispositivos de blocos NTFS usando a biblioteca FUSE externa, o processo de montagem de uma partição do Windows descrito a seguir requer privilégios de root. <phrase os="sles;sled">A montagem de partições NTFS é suportada apenas no SUSE Linux Enterprise Server e no SUSE Linux Enterprise Desktop com SUSE Linux Enterprise Workstation Extension.</phrase>
  </para>

  <procedure>
   <step>
    <para>
     Torne-se <systemitem class="username">root</systemitem> e instale o pacote <systemitem class="resource">ntfs-3g</systemitem>. <phrase os="sles;sled">Ele está disponível na SUSE Linux Enterprise Workstation Extension.</phrase>
    </para>
   </step>
   <step>
    <para>
     Crie um diretório para ser usado como ponto de montagem, por exemplo, <filename>~/mounts/windows</filename>.
    </para>
   </step>
   <step>
    <para>
     Descubra de qual partição do Windows você precisa. Use o YaST e inicie o módulo particionador para saber qual partição pertence ao Windows, mas não modifique nada. Como alternativa, torne-se <systemitem class="username">root</systemitem> e execute <command>/sbin/fdisk</command> <option>-l</option>. Procure as partições com o tipo <literal>HPFS/NTFS</literal>.
    </para>
   </step>
   <step>
    <para>
     Monte a partição no modo leitura-gravação. Substitua o marcador <replaceable>DISPOSITIVO</replaceable> pela sua partição do Windows correspondente:
    </para>
<screen><prompt>&gt; </prompt>ntfs-3g /dev/<replaceable>DEVICE</replaceable> <replaceable>MOUNT POINT</replaceable></screen>
    <para>
     Para usar a partição do Windows no modo apenas leitura, anexe <option>-o ro</option>:
    </para>
<screen><prompt>&gt; </prompt>ntfs-3g /dev/<replaceable>DEVICE</replaceable> <replaceable>MOUNT POINT</replaceable> -o ro</screen>
    <para>
     O comando <command>ntfs-3g</command> usa o usuário (UID) e o grupo (GID) atual para montar o dispositivo especificado. Para definir permissões de gravação para outro usuário, use o comando <command>id</command>
     <option> USUÁRIO</option> para obter a saída dos valores de UID e GID. Defina-a com:
    </para>
<screen><prompt role="root"># </prompt>id tux
uid=1000(tux) gid=100(users) groups=100(users),16(dialout),33(video)
ntfs-3g /dev/<replaceable>DEVICE</replaceable> <replaceable>MOUNT POINT</replaceable> -o uid=1000,gid=100</screen>
    <para>
     Há mais opções disponíveis na página de manual.
    </para>
   </step>
  </procedure>

  <para>
   Para desmontar um recurso, execute <command>fusermount -u </command>
   <replaceable>PONTO DE MONTAGEM</replaceable>.
  </para>
 </sect1>
 
 
 
 <sect1 xml:id="sec-fuse-moreinfo">
  <title>Mais informações</title>

  <para>
   Para obter mais informações, consulte a home page do FUSE em <link xlink:href="https://github.com/libfuse/libfuse"/>.
  </para>
 </sect1>
</chapter>
