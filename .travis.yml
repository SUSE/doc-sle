language: bash
env:
      global:
      - LD_PRELOAD=/lib/x86_64-linux-gnu/libSegFault.so

dist: yakkety

addons:
  apt:
    packages:
    - libxml2-utils
    - libxml2-dev
    - libxml2
    - docbook-xml

before_script:
    - cat /etc/os-release
    # - ls xml/*.xml
    - apt-file docbook-xml
    - ls -l /usr/share/xml/docbook/schema/dtd/4.5
    - ls -l /usr/share/xml/docbook/schema/dtd/4.5/dbcentx.mod
    - echo $TRAVIS_COMMIT
    - xmllint --version

script:
    - sed -i 's#dbcent PUBLIC .*>#dbcent SYSTEM "file:/usr/share/xml/docbook/schema/dtd/4.5/dbcentx.mod">#' xml/entity-decl.ent
    - for file in xml/*.xml; do echo ">>> $file"; xmllint --nonet --noout --noent $file; done
