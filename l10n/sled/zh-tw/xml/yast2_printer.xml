<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_printer.xml" version="5.0" xml:id="sec-yast-hw-print">
 <title>設定印表機</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  YaST 可用來設定透過 USB 連接到您機器的本地印表機，以及設定透過網路印表機進行列印，也可以透過網路共用印表機。如需列印的詳細資訊 (一般資訊、技術詳細資料和疑難排解)，請參閱<xref linkend="cha-print"/>。
 </para>

 <para>
  在 YaST 中，按一下<menuchoice> <guimenu>硬體</guimenu>
  <guimenu>印表機</guimenu> </menuchoice>啟動印表機模組。它預設會在<guimenu>印表機組態</guimenu>檢視窗中開啟，顯示所有可用且已設定的印表機清單。這對於可以透過網路存取許多印表機的情況特別有用。您還可以在此處<guimenu>列印測試頁</guimenu>並設定印表機。
 </para>

 <note>
  <title>啟動 CUPS</title>
  <para>
   若要從您的系統列印，必須執行 CUPS。如果它未在執行中，系統會要求您予以啟動。回答<guimenu>是</guimenu>，否則您無法設定列印。如果在開機時未啟動 CUPS，系統也會要求您啟用此功能。建議您回答<guimenu>是</guimenu>，否則每次重新開機之後，都需要手動啟動 CUPS。
  </para>
 </note>

 <sect1 xml:id="sec-yast-hw-print-local">
  <title>設定印表機</title>
  <para>
   系統通常會自動偵測到 USB 印表機。如果未自動偵測到，可能原因有二：
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     USB 印表機已關閉。
    </para>
   </listitem>
   <listitem>
    <para>
     印表機與電腦之間無法進行通訊。請檢查纜線與接頭，並確認已穩固連接印表機。這種情況下，問題可能與印表機無關，而是與 USB 有關。
    </para>
   </listitem>
  </itemizedlist>
  <para>
   設定印表機基本上需要完成三個步驟：指定連線類型、選擇驅動程式以及命名此設定的列印佇列。
  </para>
  <para>
   許多印表機型號都有多個驅動程式可用。設定印表機時，一般規則是 YaST 預設使用標示為<literal>建議</literal>的驅動程式。一般不需要變更驅動程式。但是，如果您希望彩色印表機只列印黑白色彩，可以使用不支援彩色列印的驅動程式。若您列印圖形時，PostScript 印表機出現效能問題，請嘗試從 PostScript 驅動程式切換到 PCL 驅動程式 (假設您的印表機支援 PCL)。
  </para>
  <para>
   如果未列出適用於您印表機的驅動程式，請嘗試從清單中選取相應標準語言的一般驅動程式。請參閱印表機的文件，以瞭解您的印表機支援哪種語言 (控制印表機的一組指令)。若不成功的話，請參閱<xref linkend="sec-yast-hw-print-local-get-ppd"/>瞭解其他可能解決方案。
  </para>
  <para>
   印表機從來都不是直接使用的，它始終是透過列印佇列使用。這樣可確定將同時執行的工作排入佇列，然後逐個處理。系統會為每個列印佇列指定特定的驅動程式，一個印表機可以有多個佇列。這樣，您就可以在彩色印表機上設定另一個佇列，例如，專門用於列印黑白內容。如需有關印表機佇列的詳細資訊，請參閱<xref linkend="sec-print-workflow"/>。
  </para>
  <procedure xml:id="pro-y2-hw-print-local-config">
   <title>新增新印表機</title>
   <step>
    <para>
     選取<menuchoice>
     <guimenu>硬體</guimenu> <guimenu>印表機</guimenu></menuchoice>啟動 YaST 印表機模組。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>印表機組態</guimenu>螢幕中，按一下<guimenu>新增</guimenu>。
    </para>
   </step>
   <step>
    <para>
     如果印表機已經在<literal>「指定連接」</literal>中列出，請繼續執行下一步。否則請嘗試<guimenu>偵測更多</guimenu>或啟動<guimenu>連接精靈</guimenu>。
    </para>
   </step>
   <step>
    <para>
     在<literal>尋找並指定驅動程式</literal>下的輸入方塊中，輸入廠商名稱和型號名稱，然後按一下<guimenu>搜尋</guimenu>。
    </para>
   </step>
   <step>
    <para>
     選擇與您的印表機相符的驅動程式。建議您選擇最先列出的驅動程式。如果未顯示任何合適的驅動程式：
    </para>
    <substeps performance="required">
     <step>
      <para>
       請檢查您的搜尋字詞。
      </para>
     </step>
     <step>
      <para>
       按一下<guimenu>尋找更多</guimenu>擴大搜尋範圍。
      </para>
     </step>
     <step>
      <para>
       如<xref linkend="sec-yast-hw-print-local-get-ppd"/>中所述新增驅動程式。
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     指定<literal>預設紙張大小</literal>。
    </para>
   </step>
   <step>
    <para>
     在<guimenu>設定任意名稱</guimenu>欄位中，為列印佇列輸入唯一的名稱。
    </para>
   </step>
   <step>
    <para>
     至此，印表機已使用預設設定完成了組態設定，可供您使用。按一下<guimenu>確定</guimenu>返回<guimenu>印表機組態</guimenu>檢視窗。現在應可在印表機清單中看見新設定的印表機。
    </para>
   </step>
  </procedure>
  <sect2 xml:id="sec-yast-hw-print-local-get-ppd">
   <title>使用 YaST 新增驅動程式</title>
   <para>
    並非所有適用於 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 的印表機驅動程式預設都會安裝。在新增印表機時，如果<guimenu>尋找並指定驅動程式</guimenu>對話方塊中沒有合適的驅動程式可用，請安裝含有印表機驅動程式的驅動程式套件。
   </para>
   <procedure>
    <title>安裝其他驅動程式套件</title>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>印表機組態</guimenu>螢幕中，按一下<guimenu>新增</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<literal>尋找並指定驅動程式</literal>區段中，按一下<guimenu>驅動程式套件</guimenu>。
     </para>
    </step>
    <step>
     <para>
      從清單中選擇一或多個合適的驅動程式套件。<emphasis>不要</emphasis>指定印表機說明檔案的路徑。
     </para>
    </step>
    <step>
     <para>
      選擇<guimenu>確定</guimenu>並確認安裝套件。
     </para>
    </step>
    <step>
     <para>
      若要直接使用這些驅動程式，請按照<xref linkend="pro-y2-hw-print-local-config"/>中所述操作。
     </para>
    </step>
   </procedure>
   <para>
    PostScript 印表機不需要印表機驅動程式軟體。PostScript 印表機只需要 PostScript 印表機描述 (PPD) 檔，該檔案與特定型號相符。PPD 檔案由印表機供應商提供。
   </para>
   <para>
    在新增 PostScript 印表機時，如果<guimenu>尋找並指定驅動程式</guimenu>對話方塊中沒有合適的 PPD 檔案可用，請安裝印表機的 PPD 檔案。
   </para>
   <para>
    PPD 檔案可取自多種來源。建議先嘗試 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> 已隨附、但預設未安裝的其他驅動程式套件 (如需安裝指示，請參閱下文)。如果這些套件不包含適合您的印表機的驅動程式，請直接從印表機廠商處或從 PostScript 印表機的驅動程式 CD 中取得 PPD 檔案。如需詳細資料，請參閱<xref linkend="sec-print-prob-ppd"/>。此外，您還可以從 <link xlink:href="http://www.linuxfoundation.org/collaborate/workgroups/openprinting/database/databaseintro"/> 中的 <quote>OpenPrinting.org 印表機資料庫</quote>找到 PPD 檔案。從 OpenPrinting 下載 PPD 檔案時，請記住這裡顯示的一律是最新的 Linux 支援狀態，不一定符合 <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>。
   </para>
   <procedure>
    <title>新增 PostScript 印表機的 PPD 檔案</title>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>印表機組態</guimenu>螢幕中，按一下<guimenu>新增</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<literal>尋找並指定驅動程式</literal>區段中，按一下<guimenu>驅動程式套件</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<literal>將印表機描述檔案設為可用</literal>下的輸入方塊中輸入 PPD 檔案的完整路徑。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>確定</guimenu>返回「<literal>新增印表機組態</literal>」螢幕。
     </para>
    </step>
    <step>
     <para>
      要直接使用此 PPD 檔案，請執行<xref linkend="pro-y2-hw-print-local-config"/>中所述的步驟。
     </para>
    </step>
   </procedure>
  </sect2>
  <sect2 xml:id="sec-yast-hw-print-local-tune">
   <title>編輯本地印表機組態</title>
   <para>
    透過編輯印表機的現有組態，您可以變更基本設定，例如連線類型和驅動程式。還可以調整紙張大小、解析度、媒體來源等的預設設定。您可以透過更改印表機描述或位置來變更印表機的識別碼。
   </para>
   <procedure>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>印表機組態</guimenu>螢幕中，從清單中選擇一台本地印表機，然後按一下<guimenu>編輯</guimenu>。
     </para>
    </step>
    <step>
     <para>
      按照<xref linkend="pro-y2-hw-print-local-config"/> 中所述變更連接類型或驅動程式。僅當目前組態有問題時才需執行此步驟。
     </para>
    </step>
    <step>
     <para>
      選擇性核取<guimenu>預設印表機</guimenu>，將此印表機設為預設印表機。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>目前驅動程式的所有選項</guimenu>，調整預設設定。若要變更某個設定，請按一下相應的 <literal>+</literal> 號展開選項清單。按一下某個選項變更預設值。按一下<guimenu>確定</guimenu>套用您的變更。
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-yast-hw-print-network">
  <title>使用 YaST 設定網路列印</title>
  <para>
   網路印表機為自動獲得偵測，必須使用 YaST 印表機模組手動設定。視網路設定而定，您可以列印至印表機伺服器 (CUPS、LPD、SMB 或 IPX) 或直接至網路印表機 (最好透過 TCP)。在 YaST 印表機模組中，從左側窗格選擇<guimenu>透過網路列印</guimenu>以存取網路列印的組態檢視窗。
  </para>
  <sect2 xml:id="sec-yast-hw-print-network-cups">
   <title>使用 CUPS</title>
   <para>
    在 Linux 環境中，通常使用 CUPS 來透過網路列印。最簡單的設定是只透過所有用戶端均可直接存取的某個 CUPS 伺服器進行列印。若要透過一個以上的 CUPS 伺服器執行列印，則需要執行本地 CUPS 精靈以與遠端 CUPS 伺服器通訊。
   </para>
   <important>
    <title>瀏覽網路列印佇列</title>
    <para>
     CUPS 伺服器透過傳統的 CUPS 瀏覽協定或 Bonjour/DNS-SD 通告其在網路上的列印佇列。用戶端需要瀏覽這些清單，以使使用者能夠選取要將列印工作傳送到的特定印表機。若要瀏覽網路列印佇列，則必須在透過 CUPS 伺服器列印的所有用戶端上執行 <systemitem class="resource">cups-filters-cups-browsed</systemitem> 套件所提供的 <systemitem class="daemon">cups-browsed</systemitem> 服務。<systemitem class="daemon">cups-browsed</systemitem> 在透過 YaST 設定網路列印時自動啟動。
    </para>
    <para>
     如果在啟動 <systemitem class="daemon">cups-browsed</systemitem> 後瀏覽無法運作，則表明 CUPS 伺服器可能是透過 Bonjour/DNS-SD 通告網路列印佇列。在這種情況下，您需要另外安裝套件 <systemitem class="resource">avahi</systemitem>，然後在所有用戶端上透過 <command>sudo systemctl start avahi-daemon</command> 啟動相關聯的服務。
    </para>
   </important>
   <procedure>
    <title>透過單部 CUPS 伺服器列印</title>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      從左側窗格啟動<guimenu>透過網路列印</guimenu>螢幕。
     </para>
    </step>
    <step>
     <para>
      核取<guimenu>透過一個單一 CUPS 伺服器直接執行所有列印</guimenu>並指定伺服器的名稱或 IP 位址。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>測試伺服器</guimenu>以確定您已選擇正確的名稱或 IP 位址。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>確定</guimenu>回到<guimenu>印表機組態</guimenu>螢幕。現在可透過 CUPS 伺服器執行的所有印表機都會列出。
     </para>
    </step>
   </procedure>
   <procedure>
    <title>透過多個 CUPS 伺服器列印</title>
    <step>
     <para>
      選取<menuchoice>
      <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
     </para>
    </step>
    <step>
     <para>
      從左側窗格啟動<guimenu>透過網路列印</guimenu>螢幕。
     </para>
    </step>
    <step>
     <para>
      勾選<guimenu>接受從 CUPS 伺服器傳來的印表機發佈</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<literal>一般設定</literal>下方，指定要使用的伺服器。您可以接受來自所有可用網路或特定主機的連線。如果選擇後者，則需要指定主機名稱或 IP 位址。
     </para>
    </step>
    <step>
     <para>
      當系統詢問您是否啟動本地 CUPS 伺服器時，依序按一下<guimenu>確定</guimenu>和<guimenu>是</guimenu>進行確認。伺服器啟動 YaST 之後，您將返回到<guimenu>印表機組態</guimenu>螢幕。按一下<guimenu>重新整理清單</guimenu>，以查看到目前為止已偵測到的印表機。如果有更多印表機可用，可再按一下此按鈕。
     </para>
    </step>
   </procedure>
  </sect2>
  <sect2 xml:id="sec-yast-hw-print-network-other">
   <title>使用非 CUPS 列印伺服器</title>
   <para>
    如果您的網路透過 CUPS 以外的列印伺服器提供列印服務，請按一下<menuchoice>
    <guimenu> 硬體</guimenu><guimenu>印表機</guimenu></menuchoice>啟動 YaST 印表機模組，然後從左側窗格中啟動<guimenu>透過網路列印</guimenu>螢幕。啟動<guimenu>連接精靈</guimenu>，然後選擇合適的<guimenu>連接類型</guimenu>。如需在您的環境中設定網路印表機，請洽詢網路管理員。
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-yast-hw-print-share">
  <title>透過網路共用印表機</title>
  <para>
   您可以透過網路共享由本地 CUPS 精靈管理的印表機，這樣便可將您的機器變成 CUPS 伺服器。通常可透過啟用 CUPS 中所謂的<quote>瀏覽模式</quote>來共享印表機。如果啟用了瀏覽模式，本地列印佇列便可用來在網路上監聽遠端 CUPS 精靈。您還可以設定專門的 CUPS 伺服器管理所有列印佇列，讓遠端用戶端可以對其進行直接存取。在此情況下，就不需要啟用瀏覽模式。
  </para>
  <procedure>
   <title>共用印表機</title>
   <step>
    <para>
     選取<menuchoice>
     <guimenu>硬體</guimenu> <guimenu>印表機</guimenu> </menuchoice>啟動 YaST 印表機模組。
    </para>
   </step>
   <step>
    <para>
     從左側窗格中啟動<guimenu>共用印表機</guimenu>。
    </para>
   </step>
   <step>
    <para>
     選取<guimenu>允許遠端存取</guimenu>。此外核取<guimenu>適用於本地網路中的電腦</guimenu>，並透過核取<guimenu>預設在本地網路中發佈印表機</guimenu>啟用瀏覽模式。
    </para>
   </step>
   <step>
    <para>
     按一下<guimenu>確定</guimenu>重新啟動 CUPS 伺服器，並返回到<guimenu>印表機組態</guimenu>螢幕。
    </para>
   </step>
   <step>
    <para>
     有關 CUPS 和防火牆設定，請參閱 <link xlink:href="https://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings"/>。
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
