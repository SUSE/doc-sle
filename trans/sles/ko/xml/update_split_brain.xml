<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<sect1 xml:base="update_split_brain.xml" id="sec.update.split-brain">
 <title>자동 업데이트</title>

 <para>
  자동 업데이트는 시스템의 두 사본을 관리하고 업데이트 실패 후 손쉬운 복구를 허용하는 도구를 기준으로 실행됩니다. 제공된 도구에는 특수 디스크 파티션 설정이 필요합니다. 시스템의 각 사본은 시스템의 기본 파티션에 있습니다. 업데이트가 실패한 경우에는 언제든지 다른 파티션에서 사용 가능한 시스템의 이전 상태로 복구할 수 있습니다.
 </para>



 <sect2 id="cha.update.split-brain.setup">
  <title>설치</title>
  <warning>
   <title>엄격한 파티셔닝 요구사항</title>
   <para>
    구현 시 디스크 파티셔닝에 대한 엄격한 요구사항이 있습니다. 먼저 첫 번째 루트 파티션은 <filename>/dev/sda1</filename>이며 전체 디스크 크기의 반 이상을 차지하면 안됩니다. 그런 다음 도구가 <filename>/dev/sda2</filename>를 시스템의 두 번째 루트 파티션으로 만듭니다. 사용 가능한 추가 파티션이 있으면 루트 파티션에서 모두 공유됩니다. 두 개의 루트 파티션 크기를 고려하고 첫 번째 파티션의 크기를 적절히 줄이십시오. 이것이 대략적인 계산 방법입니다.
   </para>
   <para>
    전체 디스크 크기에서 <systemitem>sda1</systemitem> 크기를 빼고 <systemitem>sda2</systemitem>를 뺀 크기가 추가 파티션의 사용 가능한 공간입니다.
   </para>
  </warning>
  <procedure>
   <step performance="required">
    <para>
     <filename>/dev/sda1</filename>을 단일 루트 파티션으로 사용하고 크기가 전체 디스크 공간의 반이 되지 않도록 하여 시스템을 설치합니다.
    </para>
   </step>
   <step performance="required">
    <para>
     설치된 시스템을 필요에 따라 사용자 정의합니다. <systemitem>multi-update-tools</systemitem> 패키지가 설치되었는지 확인합니다.
    </para>
   </step>
   <step performance="required">
    <para>
     <command>multi-update-setup --partition</command>을 실행합니다. 비슷한 크기의 시스템의 두 번째 루트 파티션(<filename>/dev/sda2</filename>)이 생성됩니다.
    </para>
   </step>
   <step performance="required">
    <para>
     디스크의 나머지 공간을 필요에 따라 파티션으로 나누고 사용자 정의(*)를 계속합니다.
    </para>
   </step>
   <step performance="required">
    <para>
     <command>multi-update-setup --clone</command>을 실행하여 시스템을 다른 파티션에 복사합니다. 이 명령을 사용하여 대상 시스템의 <filename>/etc/fstab</filename>에 <filename>/</filename>(루트) 항목을 변경할 수도 있습니다.
    </para>
   </step>
   <step performance="required">
    <para>
     필요한 경우 사용자 정의(*)를 추가로 수행합니다.
    </para>
   </step>
   <step performance="required">
    <para>
     <command>multi-update-setup --bootloader</command>를 실행하여 부팅 로더 설치를 시작합니다. 이렇게 하면 부팅 로더 메뉴에 다른 시스템을 부팅하기 위한 항목이 포함됩니다.
    </para>
    <warning>
     <title>GRUB 2 부팅 로더 필수</title>
     <para>
      GRUB 2 부팅 로더는 반드시 설치해야 합니다. 이 도구는 다른 부팅 로더와 호환되지 않습니다.
     </para>
    </warning>
   </step>
   <step performance="required">
    <para>
     (*)로 표시된 수행할 사용자 정의가 없으면 세 단계를 모두 수행하는 <command>multi-update-setup --complete</command>를 실행하십시오.
    </para>
   </step>
  </procedure>
 </sect2>



 <sect2 id="cha.update.split-brain.updating">
  <title>이전 시스템 업데이트</title>
  <para>
   <command>multi-update</command>를 실행합니다. 이 명령은 <command>chroot</command> 환경에서 <systemitem>zypper</systemitem>를 실행하며 활성 상태인 시스템에 상관 없이 다른 시스템을 업데이트합니다. 해당 시스템의 부팅 메뉴가 부팅 시 기본으로 제공됩니다.
  </para>
 </sect2>



 <sect2 id="cha.update.split-brain.touble">
  <title>문제 해결</title>
  <para>
   업데이트 후 업데이트된 시스템의 부팅 로더가 손상된 경우 <quote>활성</quote> 플래그를 변경하여 다른 시스템의 루트 파티션을 부팅 가능하도록 설정해야 합니다.
  </para>
  <para>
   업데이트된 시스템이 부팅되지 않으면 부팅 로더 메뉴에 액세스하여 다른 시스템을 선택해야 합니다.
  </para>
  <para>
   GRUB 2에 대한 자세한 내용은 <xref linkend="cha.grub2"/> 항목을 참조하십시오.
  </para>
 </sect2>

 <sect2 id="cha.update.split-brain.limitation">
  <title>제한사항</title>
  <para>
   루트 파티션은 파티션 이름, ID 또는 다른 방법으로 마운트해야 합니다. 파티션 UUID 또는 레이블로 마운트하는 것은 지원되지 않습니다.
  </para>
 </sect2>



 <sect2 id="cha.update.split-brain.info">
  <title>추가 정보</title>
  <para>
   자세한 내용은 <filename>multi-update-tools</filename> 패키지와 함께 제공되는 <systemitem>/usr/share/doc/packages/multi-update-tools/README</systemitem>를 참조하십시오.
  </para>
 </sect2>
</sect1>
