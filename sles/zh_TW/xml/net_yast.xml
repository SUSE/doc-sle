<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="net_yast.xml" version="5.0" xml:id="sec.basicnet.yast">
 <title>使用 YaST 手動設定網路連接</title>

<info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker>
          </dm:bugtracker>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <indexterm xml:id="idx.networks_integrating" class="startofrange"> <primary>網路</primary> <secondary>設定</secondary> </indexterm> <indexterm> <primary>卡</primary> <secondary>網路</secondary> </indexterm>

 <para>
  Linux 可支援多種網路類型。大多數使用不同的裝置名稱和組態檔，會分佈在檔案系統的不同位置。要更瞭解手動網路組態的綜覽，請參閱<xref linkend="sec.basicnet.manconf"/>。
 </para>

 <para>
  <phrase os="sles">已建立連結的所有網路介面 (已連接網路線纜) 將自動進行設定。</phrase>可隨時在安裝的系統上設定其他的硬體。以下幾節將說明 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 支援之所有網路連線類型的網路組態。
 </para>

 <tip arch="zseries" os="sles">

  <title>IBM System z：可熱插拔網路卡</title>
  <para>
   IBM System z 平台支援可熱插拔網路卡，但不支援透過 DHCP 的自動網路整合 (和 PC 的情況相同)。完成偵測後，接著以手動設定介面。
  </para>
 </tip>

 <sect2 xml:id="sec.basicnet.yast.netcard">
  <title>使用 YaST 設定網路卡</title>
<indexterm> <primary>卡</primary> <secondary>網路</secondary> </indexterm> <indexterm> <primary>網路</primary> <secondary>YaST</secondary> </indexterm> <indexterm> <primary>YaST</primary> <secondary>網路卡</secondary> </indexterm> <indexterm/>
  <para>
   若要在 YaST 中設定以太網路卡或 Wi-Fi/藍芽卡，請選取<menuchoice><guimenu>網路裝置</guimenu> <guimenu>網路設定</guimenu></menuchoice>。啟動模組後，YaST 將顯示<guimenu>網路設定</guimenu>對話方塊，其中包含四個索引標籤︰<guimenu>全域選項</guimenu>、<guimenu>綜覽</guimenu>、<guimenu>主機名稱/DNS</guimenu>和<guimenu>路由</guimenu>。
  </para>
  <para>
   使用<guimenu>全域選項</guimenu>索引標籤可設定一般網路選項，例如網路設定方法、IPv6 和一般 DHCP 選項。如需詳細資訊，請參閱<xref linkend="sec.basicnet.yast.netcard.global"/>。
  </para>
  <para>
   <guimenu>綜覽</guimenu>索引標籤包含有關已安裝網路介面與組態的資訊。此處會列出所有正確偵測到之網路卡的名稱。在此對話方塊中，您可以手動設定新網路卡、移除或變更其組態。若要手動設定未自動偵測到的卡，請參閱<xref linkend="sec.basicnet.yast.netcard.man"/>。若要變更已設定卡的組態，請參閱<xref linkend="sec.basicnet.yast.netcard.change"/>。
  </para>
  <para>
   使用<guimenu>主機名稱/DNS</guimenu>索引標籤可設定機器的主機名稱以及要使用伺服器的名稱。如需詳細資訊，請參閱<xref linkend="sec.basicnet.yast.change.host"/>。
  </para>
  <para>
   <guimenu>路由</guimenu>索引標籤用於設定路由組態。如需相關資訊，請參閱<xref linkend="sec.basicnet.yast.change.route"/>。
  </para>
  <figure xml:id="fig.yast2.neticard">
   <title>設定網路組態</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_net_icard.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_net_icard.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
  <sect3 xml:id="sec.basicnet.yast.netcard.global">
   <title>設定全域網路選項的組態</title>
   <para>
    使用 YaST <guimenu>網路設定</guimenu>模組的<guimenu>全域選項</guimenu>索引標籤，可以設定重要的全域網路選項，例如使用 NetworkManager、IPv6 和 DHCP 用戶端選項。這些設定適用於所有網路介面。
   </para>
   <note os="sles">

    <title>Workstation Extension 提供了 NetworkManager</title>
    <para>
     現在，Workstation Extension 提供有 NetworkManager。若要安裝 NetworkManager，請啟用 Workstation Extension 儲存庫，然後選取 NetworkManager 套件。
    </para>
   </note>
   <para>
    在<guimenu>網路設定方法</guimenu>中，選擇管理網路連線的方式。若希望 NetworkManager 桌面 applet 管理所有介面的連線，請選擇<guimenu>NetworkManager 服務</guimenu>。NetworkManager 最適合用於在多個有線和無線網路之間進行切換。如果您執行的不是桌面環境，或者您的電腦是 Xen 伺服器、虛擬系統或者會在網路中提供 DHCP 或 DNS 等網路服務，請使用<guimenu>Wicked 服務</guimenu>方法。如果使用 NetworkManager，則應使用 <command>nm-applet</command> 設定網路選項，且<guimenu>網路設定</guimenu>模組的<guimenu>綜覽</guimenu>、<guimenu>主機名稱/DNS</guimenu>和<guimenu>路由</guimenu>索引標籤都會處於停用狀態。<phrase os="sles">如需 NetworkManager 的詳細資訊，請參閱 SUSE Linux Enterprise Desktop 文件。</phrase>
   </para>
   <para>
    在<guimenu>IPv6 通訊協定設定</guimenu>中，選擇是否要使用 IPv6 協定。可以同時使用 IPv6 和 IPv4。預設會啟用 IPv6。但是，在不使用 IPv6 通訊協定的網路中，停用 IPv6 通訊協定時回應較快。若要停用 IPv6，請停用<guimenu>啟用 IPv6</guimenu>。如果 IPv6 已停用，核心將不再自動載入 IPv6 模組。重新開機後會套用此設定。
   </para>
   <para>
    在<guimenu>DHCP 用戶端選項</guimenu>中，設定 DHCP 用戶端的選項。在一個網路中，每個 DHCP 用戶端的<guimenu>DHCP 用戶端識別碼</guimenu>均不能相同。若將其留為空白，則預設會使用網路介面的硬體位址。但是，如果您要使用同一個網路介面執行多個虛擬機，因此會使用同一個硬體位址，則請在此處指定不限格式的唯一識別碼。
   </para>
   <para>
    <guimenu>要傳送的主機名稱</guimenu>指定當 DHCP 用戶端將訊息傳送至 DHCP 伺服器時，主機名稱選項欄位所使用的字串。有些 DHCP 伺服器會根據此主機名稱 (動態 DNS) 更新名稱伺服器區域 (正向和反向記錄)。此外，有些 DHCP 伺服器需要<guimenu>要傳送的主機名稱</guimenu>選項欄位包含用戶端傳送之 DHCP 訊息中的特定字串。如果保留 <literal>AUTO</literal>，將傳送目前的主機名稱 (即 <filename>/etc/HOSTNAME</filename> 中定義的主機名稱)。將選項欄位留為空白則不會傳送主機名稱。
   </para>
   <para>
    如果您不希望根據 DHCP 的資訊變更預設路由，請停用<guimenu>透過 DHCP 變更預設路由</guimenu>。
   </para>
  </sect3>
  <sect3 xml:id="sec.basicnet.yast.netcard.change">
   <title>變更網路卡組態</title>
   <para>
    若要變更網路卡的組態，請在 YaST 的<menuchoice><guimenu>網路設定</guimenu> <guimenu>綜覽</guimenu></menuchoice>中偵測到的網路卡清單中選取網路卡，然後按一下<guimenu>編輯</guimenu>。<guimenu>網路卡設定</guimenu>對話方塊隨即出現，您可以使用<guimenu>一般</guimenu>、<guimenu>位址</guimenu>和<guimenu>硬體</guimenu>索引標籤調整網路卡的組態。
   </para>
   <sect4 xml:id="sec.basicnet.yast.change.address">
    <title>設定 IP 位址</title>
<indexterm> <primary>網路</primary> <secondary>YaST</secondary> <tertiary>IP 位址</tertiary> </indexterm>
    <para>
     在<guimenu>網路卡設定</guimenu>對話方塊的<guimenu>位址</guimenu>索引標籤中，可以設定網路卡的 IP 位址或確定其 IP 位址的方式。系統支援 IPv4 和 IPv6 兩種位址。您可以為網路卡設定<guimenu>無 IP 位址</guimenu>(適用於 Bonding 裝置)、<guimenu>靜態指定的 IP 位址</guimenu>(IPv4 或 IPv6)，也可以透過<guimenu>DHCP</guimenu>或/與<guimenu>Zeroconf</guimenu>為其指定<guimenu>動態位址</guimenu>。
    </para>
    <para>
     若要使用<guimenu>動態位址</guimenu>，請選擇是使用<guimenu>僅限 DHCP 版本 4</guimenu>(適用於 IPv4)、<guimenu>僅限 DHCP 版本 6</guimenu>(適用於 IPv6)，還是<guimenu>DHCP 版本 4 與 6</guimenu>。
    </para>
    <para>
     若情況適合，系統會將安裝時第一個可用的已連結網路卡自動設定為使用透過 DHCP 設定的自動位址。
    </para>
    <note arch="zseries" os="sles">
     <title>IBM System z 與 DHCP</title>
     <para>
      在 IBM System z 平台上，只有擁有 MAC 位址的網路卡才會支援 DHCP 式的位址組態。此情況只適用於 OSA 和 OSA 高速網路卡。
     </para>
    </note>
    <para>
     若您用的是 DSL 連線而非 ISP (網際網路服務提供者) 指定的靜態 IP，還應該使用 DHCP。若您決定使用 DHCP，請在 YaST 網路卡組態模組中開啟<guimenu>網路設定</guimenu>對話方塊，於<guimenu>全域選項</guimenu>索引標籤的<guimenu>DHCP 用戶端選項</guimenu>中設定詳細資料。若您將虛擬主機設定為透過同一個介面與不同的主機進行通訊，則需要使用<guimenu>DHCP 用戶端識別碼</guimenu>來分辨它們。
    </para>
    <para>
     DHCP 對於用戶端組態是不錯的選擇，但不適用於伺服器組態。若要設定靜態 IP 位址，請如下執行：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST 網路卡組態模組的<guimenu>綜覽</guimenu>索引標籤中，於偵測到的網路卡清單中選取一個網路卡，然後按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>位址</guimenu>索引標籤中，選擇<guimenu>靜態指定的 IP 位址</guimenu>。
      </para>
     </step>
     <step>
      <para>
       輸入<guimenu>IP 位址</guimenu>。使用 IPv4 和 IPv6 位址都可以。在<guimenu>子網路遮罩</guimenu>中輸入網路遮罩。若使用 IPv6 位址，請以 <literal>/64</literal> 格式使用<guimenu>子網路遮罩</guimenu>做為字首長度。
      </para>
      <para>
       您還可以選擇為此位址輸入完全合法的<guimenu>主機名稱</guimenu>，它將會寫入 <filename>/etc/hosts</filename> 組態檔案中。
      </para>
     </step>
     <step>
      <para>
       按<guimenu>下一步</guimenu>。
      </para>
     </step>
     <step>
      <para>
       若要啟用組態，請按一下<guimenu>確定</guimenu>。
      </para>
     </step>
    </procedure>
    <para>
     若使用靜態位址，系統將不會自動設定名稱伺服器和預設閘道。若要設定名稱伺服器，請依<xref linkend="sec.basicnet.yast.change.host"/> 中的說明進行。若要設定閘道，請依<xref linkend="sec.basicnet.yast.change.route"/> 中的說明進行。
    </para>
   </sect4>
   <sect4 xml:id="sec.basicnet.yast.configure.addresses">
    <title>設定多個位址</title><indexterm> <primary>網路</primary> <secondary>YaST</secondary> <tertiary>別名</tertiary></indexterm><indexterm> <primary>網路</primary> <secondary>YaST</secondary> <tertiary>位址</tertiary></indexterm>
    <para>
     一個網路裝置可擁有多個 IP 位址。
    </para>
    <note>
     <title>別名是相容性功能</title>
     <para>
      這些所謂的別名或標籤只能各自用於 IPv4。如果是 IPv6，則會被忽略。使用 <command>iproute2</command> 網路介面時可以使用一或多個地址。
     </para>
    </note>
    <para>
     若要使用 YaST 設定網路卡的其他地址，請執行以下步驟：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST<guimenu>網路設定</guimenu>對話方塊的<guimenu>綜覽</guimenu>索引標籤中，於偵測到的網路卡清單中選取一個網路卡，然後按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<menuchoice><guimenu>位址</guimenu> <guimenu>其他位址</guimenu></menuchoice>索引標籤中，按一下<guimenu>新增</guimenu>。
      </para>
     </step>
     <step>
      <para>
       輸入<guimenu>IPv4 地址標籤</guimenu>、<guimenu>IP 位址</guimenu>和<guimenu>網路遮罩</guimenu>。別名中不要包含介面名稱。
      </para>
     </step>
     <step>
      <para>
       若要啟用組態，請確認設定。
      </para>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec.basicnet.yast.change.udev">
    <title>變更裝置名稱和 Udev 規則</title>

    <para>
     可以在網路卡正在使用中時變更它的裝置名稱。也可以決定網路卡是否應由 udev 透過其硬體 (MAC) 位址或透過匯流排 ID 識別。後者更適合大型伺服器，便於熱插拔網路卡。若要使用 YaST 設定這些選項，請執行下列步驟：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST<guimenu>網路設定</guimenu>對話方塊的<guimenu>綜覽</guimenu>索引標籤中，於偵測到的網路卡清單中選取一個網路卡，然後按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step>
      <para>
       移至<guimenu>硬體</guimenu>索引標籤。目前的裝置名稱顯示在<guimenu>Udev 規則</guimenu>中。按一下<guimenu>變更</guimenu>。
      </para>
     </step>
     <step>
      <para>
       選擇 udev 是應透過網路卡的<guimenu>MAC 位址</guimenu>還是透過<guimenu>匯流排 ID</guimenu>來識別網路卡。網路卡目前的 MAC 位址和匯流排 ID 將顯示在對話方塊中。
      </para>
     </step>
     <step>
      <para>
       若要變更裝置名稱，請選取<guimenu>變更裝置名稱</guimenu>選項，然後編輯名稱。
      </para>
     </step>
     <step>
      <para>
       若要啟用組態，請確認設定。
      </para>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec.basicnet.yast.change.driver">
    <title>變更網路卡核心驅動程式</title>
    <para>
     有些網路卡可能有多個核心驅動程式可供使用。如果網路卡已設定，YaST 可讓您從可用且適合的驅動程式清單中選取要使用的核心驅動程式。您還可以為核心驅動程式指定選項。若要使用 YaST 設定這些選項，請執行下列步驟：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST 網路設定模組的<guimenu>綜覽</guimenu>索引標籤中，於偵測到的網路卡清單中選取一個網路卡，然後按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step>
      <para>
       移至<guimenu>硬體</guimenu>索引標籤。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>模組名稱</guimenu>中選取要使用的核心驅動程式。在<guimenu>選項</guimenu>中為所選驅動程式輸入所有選項，格式為 <command>=</command> =<replaceable>value</replaceable>。若要使用多個選項，應以空格將其隔開。
      </para>
     </step>
     <step>
      <para>
       若要啟用組態，請確認設定。
      </para>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec.basicnet.yast.change.start">
    <title>啟動網路裝置</title>
<indexterm> <primary>網路</primary> <secondary>YaST</secondary> <tertiary>啟用</tertiary> </indexterm>
    <para>
     若使用結合 <command>wicked</command> 的方法，則可以將裝置設定為在開機時、連接纜線時、偵測到網路卡時啟動，或以手動方式啟動，或永不啟動。若要變更裝置啟動，請執行下列步驟：
    </para>
    <procedure>
     <step>
      <para>
       在 YaST 的<menuchoice><guimenu>網路裝置</guimenu> <guimenu>網路設定</guimenu></menuchoice>中，於偵測到的網路卡清單中選取一個網路卡，然後按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>一般</guimenu>索引標籤中，從<guimenu>裝置啟用</guimenu>中選擇希望的項目。
      </para>
      <para>
       選擇<guimenu>開機時</guimenu>可在系統開機時啟動裝置。若使用<guimenu>電纜連接</guimenu>，系統會監控介面，探查是否有實體的連接。若使用<guimenu>Hotplug</guimenu>，只要介面可用就會將其設定。它與<guimenu>開機時</guimenu>選項類似，唯一的區別在於如果開機時介面不存在，則不會發生錯誤。選擇<guimenu>手動</guimenu>可以透過 <command>ifup</command> 手動控制介面。選取<guimenu>永不</guimenu>則根本不會啟動裝置。<guimenu>在 NFSroot 時</guimenu>與<guimenu>開機時</guimenu>類似，區別是使用 <command>systemctl stop wicked.service</command> 指令不會關閉介面；如果 <command>wicked</command> 處於使用中狀態，則 <option>network</option> 服務也會處理 <option>wicked</option> 服務。若您使用的是 NFS 或 iSCSI 根檔案系統，請使用此選項。
      </para>
     </step>
     <step>
      <para>
       若要啟用組態，請確認設定。
      </para>
     </step>
    </procedure>
    <tip>
     <title>用做根檔案系統的 NFS</title>
     <para>
      在透過網路將根分割區掛接為 NFS 共用的 (無磁碟) 系統中，設定 NFS 共用可供存取的網路裝置時請保持謹慎。
     </para>
     <para>
      將系統關閉或重新開機時，預設的處理順序是先關閉網路連接，然後卸載根分割區。對於 NFS 根分割區，這種順序會造成問題，因為在尚未與 NFS 共用啟動網路連接的情況下，根分割區無法完全卸載。為防止系統停用相關的網路裝置，請依<xref linkend="sec.basicnet.yast.change.start"/>中所述開啟網路裝置組態索引標籤，然後在<guimenu>裝置啟動</guimenu>窗格中選取<guimenu>在 NFSroot 時</guimenu>。
     </para>
    </tip>
   </sect4>
   <sect4 xml:id="sec.basicnet.yast.change.mtu">
    <title>設定最大傳送單位大小</title>
    <para>
     您可以設定介面的最大傳送單位 (MTU)。MTU 指允許的最大封包大小 (以位元組計)。MTU 越高，頻寬效率就越高。但是，大型封包可能會將慢速介面阻擋一段時間，這會加劇後續封包的延遲。
    </para>
    <procedure>
     <step>
      <para>
       在 YaST 的<menuchoice><guimenu>網路裝置</guimenu> <guimenu>網路設定</guimenu></menuchoice>中，於偵測到的網路卡清單中選取一個網路卡，然後按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>一般</guimenu>索引標籤中，從<guimenu>設定 MTU</guimenu>清單中選取所需的項目。
      </para>
     </step>
     <step>
      <para>
       若要啟用組態，請確認設定。
      </para>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec.basicnet.yast.change.infiniband">

    <title>IP-over-InfiniBand (IPoIB) 的 Infiniband 組態</title>
    <procedure>
     <step>
      <para>
       在 YaST 的<menuchoice><guimenu>網路裝置</guimenu> <guimenu>網路設定</guimenu></menuchoice>中選取 InfiniBand 裝置，然後按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>一般</guimenu>索引標籤中，選取一種<guimenu>IP-over-InfiniBand</guimenu>(IPoIB) 模式：<guimenu>已連接</guimenu>(預設) 或<guimenu>資料包</guimenu>。
      </para>
     </step>
     <step>
      <para>
       若要啟用組態，請確認設定。
      </para>
     </step>
    </procedure>
    <para>
     如需有關 InfiniBand 的詳細資訊，請參閱 <filename>/usr/src/linux/Documentation/infiniband/ipoib.txt</filename>。
    </para>
   </sect4>
   <sect4 xml:id="sec.basicnet.yast.change.fire">
    <title>設定防火牆</title>
    <para>
     您不需輸入 <xref linkend="sec.security.firewall.SuSE.yast"/> 所說明的詳細防火牆資訊，僅需在裝置設定時判斷基本防火牆設定即可。請執行下列步驟：
    </para>
    <procedure>
     <step>
      <para>
       開啟 YaST 的<menuchoice><guimenu>網路裝置</guimenu> <guimenu>網路設定</guimenu></menuchoice>模組。在<guimenu>綜覽</guimenu>索引標籤中，於偵測到的網路卡清單中選取一個網路卡，然後按一下<guimenu>編輯</guimenu>。
      </para>
     </step>
     <step>
      <para>
       進入<guimenu>網路設定</guimenu>對話方塊的<guimenu>一般</guimenu>索引標籤。
      </para>
     </step>
     <step>
      <para>
       決定您要將介面指定至的<guimenu>防火牆區域</guimenu>。可用的選項如下：
      </para>
      <variablelist>
       <varlistentry>
        <term>停用防火牆</term>
        <listitem>
         <para>
          只有當防火牆已停用以及防火牆根本未執行時，此選項才可用。唯有您的機器位於受外部防火牆保護的更大網路中時，才能使用此選項。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>自動指定區域</term>
        <listitem>
         <para>
          只有當防火牆已啟用時，此選項才可用。防火牆會執行，並且介面會自動指定至防火牆區域。包含關鍵字 <literal>any</literal> 的區域或外部區域將會用於這類介面。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>內部區域 (未保護)</term>
        <listitem>
         <para>
          防火牆會執行，但不強制執行任何保護此介面的規則。如果您的機器位於受外部防火牆保護的更大網路中，請使用此選項。如果機器具有多個網路介面，此選項也適用於連接到內部網路的介面。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>廢除區域</term>
        <listitem>
         <para>
          廢除區域是內部網路與 (有潛在風險的) 網際網路之前的另一道防線。 從內部網路與網際網路都可連接到指派至此區域的主機，但主機無法連存取內部網路。
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term>外部區域</term>
        <listitem>
         <para>
          防火牆在此介面上執行，且會完全保護其抵禦其他可能有害的網路流量。此為預設選項。
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </step>
     <step>
      <para>
       若要啟用組態，請確認設定。
      </para>
     </step>
    </procedure>
   </sect4>
  </sect3>
  <sect3 xml:id="sec.basicnet.yast.netcard.man">
   <title>設定未偵測到的網路卡</title>
   <para>
    如果未能正確偵測到某個網路卡，該卡將不會包含在已偵測到的網路卡清單中。若您確定您的系統具備網路卡的驅動程式，可手動設定。也可設定特殊的網路裝置類型，如橋接、Bond、TUN 或 TAP。若要設定未偵測到的網路卡或特殊裝置，請執行下列步驟︰
   </para>
   <procedure>
    <step>
     <para>
      在 YaST 的<menuchoice><guimenu>網路裝置</guimenu> <guimenu>網路設定</guimenu> <guimenu>綜覽</guimenu></menuchoice>對話方塊中，按一下<guimenu>新增</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>硬體</guimenu>對話方塊中，從可用的選項中設定介面的<guimenu>裝置類型</guimenu>和<guimenu>組態名稱</guimenu>。如果網路卡是 PCMCIA 或 USB 裝置，請啟用個別的核取方塊並使用<guimenu>下一步</guimenu>來結束對話方塊。否則，您可以根據需要定義要用於網路卡的核心<guimenu>模組名稱</guimenu>以及卡的<guimenu>選項</guimenu>。
     </para>
     <para>
      在<guimenu>Ethtool 選項</guimenu>中，可以設定 <command>ifup</command> 用於介面的 <command>ethtool</command> 選項。有關可用的選項，請參閱 <command>ethtool</command> 手冊頁。如果選項字串以 <literal>-</literal> 開頭 (例如 <literal>-K <replaceable>介面名稱</replaceable> rx on</literal>)，則字串中的第二個單字會取代為目前的介面名稱。否則 (例如 <literal>autoneg off speed 10</literal>) <command>ifup</command> 會在前面加上 <literal>-s <replaceable>介面名稱</replaceable></literal>。
     </para>
    </step>
    <step>
     <para>
      按一下<guimenu>下一步</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>一般</guimenu>、<guimenu>位址</guimenu>和<guimenu>硬體</guimenu>索引標籤中設定介面的所有必要選項，例如 IP 位址、裝置啟動或防火牆區域。如需組態選項的詳細資訊，請參閱<xref linkend="sec.basicnet.yast.netcard.change"/>。
     </para>
    </step>
    <step>
     <para>
      若您介面裝置類型選擇<guimenu>無線</guimenu>，請在下一個對話設定無線連接。
     </para>
    </step>
    <step>
     <para>
      若要啟用新的網路組態，請確認設定。
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec.basicnet.yast.change.host">
   <title>設定主機名稱和 DNS</title><indexterm> <primary>網路</primary> <secondary>YaST</secondary> <tertiary>主機名稱</tertiary></indexterm>
   <para>
    若您在安裝期間未變更網路組態，且已有乙太網路卡可用，則系統會自動為您的電腦產生主機名稱並啟動 DHCP。同時也會自動產生您主機要整合至網路環境所需的的名稱服務資訊。若網路位址設定使用 DHCP，則網域名稱伺服器清單會自動填入適當的資料。若您希望使用靜態設定，請手動設定數值。
   </para>
   <para>
    若要變更您電腦的名稱並調整名稱伺服器搜尋清單，請如下執行：
   </para>
   <procedure>
    <step>
     <para>
      在 YaST 的<guimenu>網路裝置</guimenu>模組中，移至<menuchoice><guimenu>網路設定</guimenu> <guimenu>主機名稱/DNS</guimenu> </menuchoice>索引標籤。
     </para>
    </step>
    <step>
     <para>
      輸入<guimenu>主機名稱</guimenu>並根據需要輸入<guimenu>網域名稱</guimenu>。如果機器是郵件伺服器，網域就格外重要。請注意，主機名稱是全域的，會套用於所有已設定的網路介面。
     </para>
     <para>
      若您要使用 DHCP 獲取 IP 位址，則電腦的主機名稱將由 DHCP 自動設定。若要連接到其他網路，最好停用此選項，因為其他網路可能會指定其他主機名稱，而在執行時期變更主機名稱會混淆圖形桌面。若要停止使用 DHCP 獲取 IP 位址，請停用<guimenu>透過 DHCP 變更主機名稱</guimenu>。
     </para>
     <para>
      <guimenu>將主機名稱指定至迴路 IP</guimenu>會將您的主機名稱與 <filename>/etc/hosts</filename> 中的 <literal>127.0.0.2</literal> (迴路) IP 位址相關聯。如果您希望主機名稱始終能得到解析 (即使是沒有使用中網路的情況下)，則可以使用此選項。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>修改 DNS 組態</guimenu>中，選取修改 DNS 組態 (名稱伺服器、搜尋清單、<filename>/etc/resolv.conf</filename> 檔案的內容) 的方式。
     </para>
     <para>
      若選取<guimenu>使用預設規則</guimenu>選項，則組態由 <command>netconfig</command> 程序檔來處理，這樣會將靜態定義的資料 (使用 YaST 或在組態檔案中) 與從 DHCP 用戶端或 NetworkManager 動態取得的資料合併。此預設規則能夠處理大部分的情況。
     </para>
     <para>
      若選取<guimenu>僅手動</guimenu>選項，則無法使用 <command>netconfig</command> 修改 <filename>/etc/resolv.conf</filename> 檔案。但是可以手動編輯此檔案。
     </para>
     <para>
      若選取<guimenu>自定規則</guimenu>選項，則應指定定義合併規則的<guimenu>自定規則</guimenu>字串。該字串包含要視為設定之有效來源的介面名稱清單 (以逗號分隔)。除完整的介面名稱外，還允許使用基本萬用字元來對應多個介面。例如，<literal>eth* ppp?</literal> 將先找到所有 eth，然後找到所有 ppp0-ppp9 介面。以下為指定如何套用 <filename>/etc/sysconfig/network/config</filename> 檔案中所定義之靜態設定的兩個特定規則值：
     </para>
     <variablelist>
      <varlistentry>
       <term><literal>STATIC</literal>
       </term>
       <listitem>
        <para>
         靜態設定需要與動態設定合併在一起。
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><literal>STATIC_FALLBACK</literal>
       </term>
       <listitem>
        <para>
         只有動態組態不可用時才會使用靜態設定。
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <para>
      如需詳細資訊，請參閱 <command>netconfig</command>(8) 的 man 頁面 (<command>man 8 netconfig</command>)。
     </para>
    </step>
    <step>
     <para>
      輸入<guimenu>名稱伺服器</guimenu>並填寫<guimenu>網域搜尋</guimenu>清單。名稱伺服器必須透過 IP 位址 (例如 192.168.1.116) 而非主機名稱指定。在<guimenu>網域搜尋</guimenu>索引標籤中指定的名稱就是用於解析主機名稱 (沒有指定網域) 的網域名稱。如果使用多個<guimenu>網域搜尋</guimenu>，請以逗號或空格將網域隔開。
     </para>
    </step>
    <step>
     <para>
      若要啟用組態，請確認設定。
     </para>
    </step>
   </procedure>
   <para>
    還可以使用 YaST 透過指令行編輯主機名稱。YaST 執行的變更會立即生效 (手動編輯 <filename>/etc/HOSTNAME</filename> 檔案的情況除外)。若要變更主機名稱，請使用下列指令：
   </para>
<screen>yast dns edit hostname=<replaceable>hostname</replaceable></screen>
   <para>
    若要變更名稱伺服器，請使用下列指令：
   </para>
<screen>yast dns edit nameserver1=192.168.1.116
yast dns edit nameserver2=192.168.1.117
yast dns edit nameserver3=192.168.1.118</screen>
  </sect3>

  <sect3 xml:id="sec.basicnet.yast.change.route">
   <title>設定路由</title>
<indexterm> <primary>網路</primary> <secondary>YaST</secondary> <tertiary>閘道</tertiary> </indexterm>
   <para>
    若要讓您的電腦與其他電腦和其他網路通訊，必須提供路由資訊，以讓網路流量採取正確的路徑。若使用 DHCP，會自動提供此資訊。若使用靜態設定，必須手動新增此資料。
   </para>
   <procedure>
    <step>
     <para>
      在 YaST 中，移至<menuchoice><guimenu>網路設定</guimenu> <guimenu>路由</guimenu></menuchoice>。
     </para>
    </step>
    <step>
     <para>
      輸入<guimenu>預設閘道</guimenu>的 IP 位址 (必要時可以輸入 IPv4 和 IPv6)。預設閘道會比對每個可能的目的地，但是如果某個符合所需位址的路由表項目已經存在，就會使用該項目，而非透過預設閘道使用預設路由。
     </para>
    </step>
    <step>
     <para>
      可以在<guimenu>路由表</guimenu>中輸入更多項目。輸入<guimenu>目的地</guimenu>網路 IP 位址、<guimenu>閘道</guimenu>IP 位址和<guimenu>網路遮罩</guimenu>。選取要透過其將流量路由至所定義網路的<guimenu>裝置</guimenu>(減號表示任意裝置)。<remark>mdejmek: ok, what does the minus exactly do? you are using it here for different things;</remark>若要省略這些值的任何一個，請使用減號「<literal>-</literal>」。若要在表中輸入預設閘道，請在<guimenu>目的地</guimenu>欄位中使用「<literal>default</literal>」。
     </para>
     <note>
      <para>
       若使用了多個預設路由，則可以指定權值選項確定哪個路由的優先程度較高。要指定權值選項，請在<guimenu>選項</guimenu>中輸入 <option>- metric <replaceable>數值</replaceable></option>。權值最高的路由做為預設路由。如果該網路裝置已解除連接，將會移除其路由，使用下一個路由。<remark>mdejmek:hm, then why are you explaining it here? the whole sentence is not clear to me</remark><remark>jfriedl what is not clear exactly? multipathd can be used</remark>不過，目前的核心不會在靜態路由中使用權值，只有 <systemitem>multipathd</systemitem> 等路由精靈會使用。
      </para>
     </note>
    </step>
    <step>
     <para>
      如果系統是路由器，請視需要在<guimenu>網路設定</guimenu>中啟用<guimenu>IPv4 轉遞</guimenu>和<guimenu>IPv6 轉遞</guimenu>。
     </para>
    </step>
    <step>
     <para>
      若要啟用組態，請確認設定。
     </para>
    </step>
   </procedure>
  </sect3>
 </sect2>

 <xi:include href="zseries_net_lan_devices.xml"/>
</sect1>
