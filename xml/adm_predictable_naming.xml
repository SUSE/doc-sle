<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>

<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="sec-network-predictable-naming-scheme">
 <title>Predictable naming scheme</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  There is a limitation with the persistent network name generator and bonding. When an interface is enslaved to a bond,
  the MAC address is temporarily overridden and set to match the MAC address of the bond interface.
  This creates inconsistencies with the <literal>70-persistent-net.rules</literal> file when the rules for enslaved interfaces are based on MAC addresses.
 </para>
 <para>
If an <systemitem>uevent</systemitem> occurs for an enslaved NIC with an updated MAC address,<systemitem>udev</systemitem> may try to
rename it with the first enslaved interface's name, resulting in a temporary name such as <literal>rename4</literal>.
Modifying the persistent network name generator to avoid MAC-based rules is not feasible due to the high risk of regression and the necessity of MAC filtering in certain cases
The persistent network name generator is obsolete and replaced by the predictable naming scheme, which offers more configurability and avoids reliance on MAC addresses.
We recommended enabling the predictable naming scheme by appending <literal>net.ifnames=1'</literal> to the <literal>Boot Options</literal> prompt for a new system installation.
</para>
<procedure>
  <title>Enabling the naming scheme on an already installed system</title>
  <step>
    <para>
      If the <package>biosdevname</package> package is installed, uninstall
      it.
    </para>
<screen>&prompt.sudo;zypper rm biosdevname</screen>
  </step>
  <step>
    <para>
      Back up existing naming rules from
      <filename>/etc/udev/rules.d</filename> if they exist, for example:
    </para>
<screen>&prompt.sudo;cp /etc/udev/rules.d/70-persistent-net.rules /backup</screen>
  </step>
  <step>
    <para>
      Regenerate the initrd.
    </para>
<screen>&prompt.sudo;mkinitrd</screen>
  </step>
  <step>
    <para>
      Start the &yast; Boot Loader module and append
      <literal>net.ifnames=1</literal> to the kernel command line. Confirm
      with <guimenu>OK</guimenu> and reboot the system.
    </para>
     </step>
  <step>
    <para>
      If the system is using Wicked as a network manager, align the
      configuration of network interfaces. You can use the <command>yast
      lan</command> module or rename
      <filename>/etc/sysconfig/network/ifcfg-*</filename> files accordingly.
      Then restart Wicked.
    </para>
<screen>&prompt.sudo;systemctl restart wicked.service</screen>
  </step>
</procedure>

</sect1>