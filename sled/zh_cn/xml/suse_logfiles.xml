<?xml version="1.0" encoding="UTF-8"?>
<sect2 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="suse_logfiles.xml" version="5.0" xml:id="sec.suse.log">
 <title>日志文件：包 logrotate</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info><indexterm> <primary>日志文件</primary></indexterm><indexterm><primary>logrotate </primary></indexterm>
 <para>
  多个系统服务（<emphasis>守护程序</emphasis>）以及内核本身会定期将系统状态和特定事件记录到日志文件中。这样，管理员可以定期检查系统在某一时刻的状态，识别错误或故障功能，并精确诊断它们。这些日志文件通常储存在 FHS 指定的 <filename>/var/log</filename> 中，文件大小每天都会增长。<systemitem>logrotate</systemitem> 包可以帮助控制这些文件的增长。
 </para>
 <para>
  用文件<indexterm><primary>配置文件</primary><secondary> logrotate.conf</secondary></indexterm> <filename>/etc/logrotate.conf</filename> 配置 logrotate。特别地，<systemitem>include</systemitem> 规范主要配置了其他要读取的文件。在 <filename>/etc/logrotate.d</filename> 中产生日志文件、安装的各个配置文件的程序。例如，这些文件附于包 <systemitem>apache2</systemitem> (<filename>/etc/logrotate.d/apache2</filename>) 和 <systemitem>syslog-service</systemitem> (<filename>/etc/logrotate.d/syslog</filename>) 中。
 </para>
 <example xml:id="dat.suse.logrotate.conf">
  <title>/etc/logrotate.conf 的示例</title>
<screen># see "man logrotate" for details
# rotate log files weekly
weekly

# keep 4 weeks worth of backlogs
rotate 4

# create new (empty) log files after rotating old ones
create

# uncomment this if you want your log files compressed
#compress

# RPM packages drop log rotation information into this directory
include /etc/logrotate.d

# no packages own lastlog or wtmp - we'll rotate them here
#/var/log/wtmp {
#    monthly
#    create 0664 root utmp
#    rotate 1
#}

# system-specific logs may be also be configured here.</screen>
 </example>
 <para>
  通过 cron 控制 logrotate，并通过 <filename>/etc/cron.daily/logrotate</filename> 每天对其进行调用。
 </para>
 <important>
  <title>许可权限</title>
  <para>
   <indexterm><primary>权限</primary><secondary>文件权限</secondary></indexterm>使用 <systemitem>create</systemitem> 选项可以读取管理员在 <filename>/etc/permissions*</filename> 中进行的所有设置。确保没有因个人修改而引起的冲突。
  </para>
 </important>
</sect2>
