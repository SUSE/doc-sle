<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_prep_zseries_prep_i.xml" version="5.0" xml:id="sec-zseries-prep">
 <title>Preparación para la instalación</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>sí</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  Este capítulo describe cómo hacer que los datos estén disponibles para la instalación, cómo instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> mediante distintos métodos y cómo preparar y utilizar IPL en el sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. También se proporciona información acerca de la configuración y la instalación de la red.
 </para>

 <sect2 xml:id="sec-prep-makeavail">
  <title>Cómo hacer que estén disponibles los datos de instalación</title>
  <para>
   En esta sección se proporciona información detallada sobre cómo hacer que los datos de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en IBM Z estén disponibles para la instalación. Dependiendo del equipo y el entorno del sistema, seleccione entre una instalación NFS o FTP. Si utiliza estaciones de trabajo con Microsoft Windows en su entorno, puede utilizar la red de Windows, incluido el protocolo SMB, para instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en su sistema IBM Z.
  </para>
  <tip>
   <title>IPL desde el DVD</title>
   <para>
    Es posible realizar la IPL desde un DVD y usar el DVD como medio de instalación. lo que resulta muy útil en el caso de que existan restricciones para configurar un servidor de instalación para proporcionar los medios de instalación a través de la red. El único requisito previo necesario es disponer de una unidad de DVD conectada SCSI.
   </para>
  </tip>
  <note>
   <title>sin instalación desde el disco duro</title>
   <para>
    No es posible realizar la instalación desde el disco duro colocando el contenido del DVD en una partición de un DASD.
   </para>
  </note>
  <sect3 xml:id="sec-prep-makeavail-linuxws">
   <title>Uso de una estación de trabajo Linux o el DVD de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
   <para>
    Puede utilizar una estación de trabajo Linux en el entorno informático para proporcionar los datos de instalación al proceso de instalación de IBM Z desde NFS o FTP. Si la estación de trabajo Linux utiliza <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, puede configurar un servidor de instalación (NFS o FTP) mediante el módulo <guimenu>Servidor de instalación</guimenu> de YaST, tal y como se describe en la <xref linkend="sec-deployment-instserver-sles9"/>.
   </para>
    <important>
     <title>exportación de dispositivos montados mediante NFS</title>
     <para>
      La exportación de la raíz del sistema de archivos (<filename>/</filename>) no exporta automáticamente los dispositivos montados, como los DVD. Por lo tanto, debe asignar un nombre de forma explícita al punto de montaje en <filename>/etc/exports</filename>:
     </para>
<screen>/media/dvd  *(ro)</screen>
     <para>
      Después de modificar este archivo, reinicie el servidor NFS con el comando <command>sudo systemctl restart nfsserver</command>.
     </para>
    </important>
    <para>
     Configurar un servidor FTP en un sistema Linux implica la instalación y la configuración de un software de servidor, como
     <package>vsftpd</package>. Si utiliza <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, consulte <xref linkend="cha-ftp"/> para obtener instrucciones de instalación. No se admite la descarga de datos de instalación a través de una entrada anónima; por lo tanto, deberá configurar el servidor FTP para admitir la autenticación de usuario.
    </para>
   <sect4 xml:id="sec-prep-makeavail-linuxws-oncd">
    <title><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en DVD</title>
    <para>
     El primer medio de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> para IBM Z contiene una imagen arrancable de Linux para estaciones de trabajo basadas en Intel, así como una imagen para IBM Z.
    </para>
    <para>
     Para las estaciones de trabajo basadas en Intel, arranque desde este medio. Cuando se le solicite, seleccione el idioma de respuesta y la distribución del teclado que desee y seleccione la opción <guimenu>Iniciar sistema de rescate.</guimenu> Necesitará al menos 64 MB de RAM para ello. No se necesita espacio en disco, dado que el sistema de rescate completo reside en la memoria RAM de la estación de trabajo. Este enfoque requiere que la red de la estación de trabajo se configure de forma manual.
    </para>
    <para>
     En el caso de IBM Z, puede utilizar IPL en el invitado de LPAR/máquina virtual desde este medio, como se describe en la <xref linkend="sec-prep-ipling-lpar-dvd"/>. Después de introducir los parámetros de la red, el sistema de instalación trata el medio como origen de los datos de instalación. Debido a que IBM Z no admite que los terminales habilitados para X11 se conecten directamente, debe elegir entre la instalación VNC o SSH. SSH proporciona además una instalación gráfica transfiriendo la conexión X a través de SSH con <command>ssh -X</command>.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-makeavail-windowsws">
   <title>Uso de una estación de trabajo Microsoft Windows</title>
   <para>
    Puede utilizar una estación de trabajo Microsoft Windows en la red para que los medios de instalación estén disponibles. La manera más sencilla de hacerlo es utilizar el protocolo SMB. Asegúrese de activar <guimenu>SMB sobre TCP/IP,</guimenu> dado que esta opción habilita el encapsulamiento de paquetes SMB en paquetes TCP/IP. Puede consultar información detallada en la ayuda en línea de Windows y en otros documentos de Windows que describan el funcionamiento de la red.
   </para>
   <sect4 xml:id="sec-prep-makeavail-windowsws-smb">
    <title>Uso de SMB</title>
    <para>
     Para que los medios de instalación estén disponibles con SMB, inserte la memoria USB con el archivo SLE-15-SP3-Online-<replaceable>ARQUITECTURA</replaceable>-GM-media1.iso en el puerto USB de la estación de trabajo Windows. A continuación, cree un nuevo recurso compartido empleando la letra de la unidad de la memoria USB y póngalo a disposición de todos los usuarios de la red.
    </para>

    <para>
     La vía de instalación en YaST puede ser:
    </para>
<screen>smb://<replaceable>DOMAIN</replaceable>;<replaceable>USER</replaceable>:<replaceable>PW</replaceable>@<replaceable>SERVERNAME</replaceable>/<replaceable>SHAREPATH</replaceable></screen>
    <para>
     Donde los espacios reservados significan:
    </para>
    <variablelist>
     <varlistentry>
      <term><replaceable>DOMAIN</replaceable>
      </term>
      <listitem>
       <para>
        Grupo de trabajo opcional o dominio de directorio activo.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>USER</replaceable>
      </term>
      <term><replaceable>PW</replaceable>
      </term>
      <listitem>
       <para>
        Nombre de usuario y contraseña opcionales de un usuario que puede acceder al servidor y a su recurso compartido.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>SERVERNAME</replaceable>
      </term>
      <listitem>
       <para>
        Nombre del servidor que aloja el recurso compartido.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><replaceable>SHAREPATH</replaceable>
      </term>
      <listitem>
       <para>
        Vía al recurso compartido.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para/>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-windowsws-nfs">
    <title>A través de NFS</title>
    <para>
     Consulte la documentación proporcionada con el producto de otro fabricante que habilite los servicios del servidor NFS para la estación de trabajo Windows. Las memorias USB que contengan el medio SLE-15-SP3-Online-<replaceable>ARQUITECTURA</replaceable>-GM-media1.iso deben encontrarse en la vía NFS disponible.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-windowsws-ftp">
    <title>Uso de FTP</title>
    <para>
     Consulte la documentación proporcionada con el producto de otro fabricante que habilite los servicios del servidor FTP para la estación de trabajo Windows. Las memorias USB que contengan el medio SLE-15-SP3-Online-<replaceable>ARQUITECTURA</replaceable>-GM-media1.iso deben encontrarse en la vía FTP disponible.
    </para>
    <para>
     El servidor FTP incluido con algunas versiones de Microsoft Windows solo implementa un subconjunto del conjunto de comandos FTP y no es válido para proporcionar los datos de instalación. En ese caso, utilice un servidor FTP de otros fabricantes que ofrezca la funcionalidad necesaria.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-windowsws-scsi">
    <title>Uso de una unidad de DVD SCSI conectada a FCP</title>
    <para>
     Tras realizar la IPL desde el DVD SCSI, como se describe en la <xref linkend="sec-prep-ipling-lpar-dvd"/>, el sistema de instalación usa el DVD como medio de instalación. En este caso, no serán necesarios los medios de instalación de un servidor FTP, NFS ni SMB. Sin embargo, sí debe conocer los datos de configuración de red de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>, ya que debe configurar la red durante la instalación para realizar la instalación gráfica con VNC o con X.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-makeavail-zpxe-cobbler">
   <title>Uso de un servidor Cobbler para zPXE</title>
   <para>
    IPL desde la red requiere un servidor Cobbler que proporcione el núcleo, initrd y los datos de instalación. Para preparar el servidor Cobbler se deben llevar a cabo estos pasos:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      <xref xrefstyle="select:label nopage" linkend="sec-prep-makeavail-zpxe-cobbler-import"/>
     </para>
    </listitem>
    <listitem>
     <para>
      <xref xrefstyle="select:label nopage" linkend="sec-prep-makeavail-zpxe-cobbler-add-distro"/>
     </para>
    </listitem>
    <listitem>
     <para>
      <xref xrefstyle="select:label nopage" linkend="sec-prep-makeavail-zpxe-cobbler-profile"/>
     </para>
    </listitem>
    <listitem>
     <para>
      <xref xrefstyle="select:label nopage" linkend="sec-prep-makeavail-zpxe-cobbler-system"/>
     </para>
    </listitem>
   </itemizedlist>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-import">
    <title>Importación de los datos de instalación</title>
    <para>
     La importación de los medios requiere que el origen de instalación esté disponible en el servidor Cobbler, ya sea desde la memoria USB o desde un origen de red. Ejecute el siguiente comando para importar los datos:
    </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> cobbler import --path=<replaceable>PATH</replaceable><co xml:id="co-cobbler-import-path"/> --name=<replaceable>IDENTIFIER</replaceable><co xml:id="co-cobbler-import-dirname"/> --arch=s390x</screen>
    <calloutlist>
     <callout arearefs="co-cobbler-import-path">
      <para>
       Punto de montaje de los datos de instalación.
      </para>
     </callout>
     <callout arearefs="co-cobbler-import-dirname">
      <para>
       Una cadena que identifica el producto importado, por ejemplo <quote>sles15_s390x</quote>. La cadena se utiliza como nombre del subdirectorio en el que se copian los datos de instalación. En un servidor Cobbler que se ejecute en SUSE Linux Enterprise Server es <filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFICADOR</replaceable></filename>. Esta vía puede ser diferente si Cobbler se ejecuta en otro sistema operativo.
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-add-distro">
    <title>Adición de una distribución</title>
    <para>
     Si se añade una distribución, Cobbler puede proporcionar el núcleo y el initrd necesarios para IPL a través de zPXE. Ejecute el comando siguiente en el servidor Cobbler para añadir <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> para IBM Z:
    </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> cobbler distro add --arch=s390 --breed=suse --name="<replaceable>IDENTIFIER</replaceable>"<co xml:id="co-cobbler-add-identifier"/> \
  --os-version=sles15<co xml:id="co-cobbler-add-os"/> \
  --initrd=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/initrd<co xml:id="co-cobbler-add-initrd"/> \
  --kernel=/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>/boot/s390x/linux<co xml:id="co-cobbler-add-kernel"/> \
  --kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co xml:id="co-cobbler-add-server"/>
    </screen>
    <calloutlist>
     <callout arearefs="co-cobbler-add-identifier">
      <para>
       Identificador único para la distribución; por ejemplo, <quote>SLES <phrase role="productnumber"><phrase os="sles;sled">15 SP3</phrase></phrase> IBM Z</quote>.
      </para>
     </callout>
     <callout arearefs="co-cobbler-add-os">
      <para>
       Identificador del sistema operativo. Utilice <literal>sles15</literal>.
      </para>
     </callout>
     <callout arearefs="co-cobbler-add-initrd">
      <para>
       Vía a initrd. La primera parte de la vía (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFICADOR</replaceable>/</filename>) depende de la ubicación de los datos importados y el nombre del subdirectorio elegido al importar los datos de instalación.
      </para>
     </callout>
     <callout arearefs="co-cobbler-add-kernel">
      <para>
       Vía al núcleo. La primera parte de la vía (<filename>/srv/www/cobbler/ks_mirror/<replaceable>IDENTIFICADOR</replaceable>/</filename>) depende de la ubicación de los datos importados y el nombre del subdirectorio elegido al importar los datos de instalación.
      </para>
     </callout>
     <callout arearefs="co-cobbler-add-server">
      <para>
       URL al directorio de instalación en el servidor Cobbler.
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-profile">
    <title>Ajuste del perfil</title>
    <para>
     Al añadir una distribución (consulte la <xref linkend="sec-prep-makeavail-zpxe-cobbler-add-distro"/>), se genera automáticamente un perfil con el valor <replaceable>IDENTIFIER</replaceable> correspondiente. Use el comando siguiente para realizar una serie de ajustes necesarios:
    </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> cobbler distro edit \
--name=<replaceable>IDENTIFIER</replaceable><co xml:id="co-cobbler-profile-name"/> --os-version=sles10<co xml:id="co-cobbler-profile-os"/> --ksmeta=""<co xml:id="co-cobbler-profile-meta"/>
--kopts="install=http://cobbler.example.com/cobbler/ks_mirror/<replaceable>IDENTIFIER</replaceable>"<co xml:id="co-cobbler-profile-opts"/></screen>
    <calloutlist>
     <callout arearefs="co-cobbler-profile-name">
      <para>
       Identificador del perfil. Se debe usar la cadena que se especificó cuando se añadió la distribución.
      </para>
     </callout>
     <callout arearefs="co-cobbler-profile-os">
      <para>
       Versión del sistema operativo. Distribución a la que debe aplicarse el perfil. Use la cadena especificada con <option>--name=<replaceable>IDENTIFIER</replaceable></option> en el paso de importación.
      </para>
     </callout>
     <callout arearefs="co-cobbler-profile-meta">
      <para>
       Opción necesaria para crear una plantilla de los archivos de KickStart. Dado que no se utiliza para SUSE, déjelo en blanco.
      </para>
     </callout>
     <callout arearefs="co-cobbler-profile-opts">
      <para>
       Lista separada por espacios de los parámetros del núcleo. Debe incluir al menos el parámetro <literal>install</literal>.
      </para>
     </callout>
    </calloutlist>
   </sect4>
   <sect4 xml:id="sec-prep-makeavail-zpxe-cobbler-system">
    <title>Adición de sistemas</title>
    <para>
     El último paso es añadir sistemas al servidor Cobbler. Este paso debe realizarse por cada invitado de IBM Z que deba arrancar mediante zPXE. Los invitados se identifican mediante su ID de usuario de z/VM (en el siguiente ejemplo, el ID <quote>linux01</quote>). Tenga en cuenta que el ID debe estar en minúsculas. Para añadir un sistema, ejecute el siguiente comando:
    </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> cobbler system add --name=linux01 --hostname=linux01.example.com \
--profile=<replaceable>IDENTIFIER</replaceable> --interface=qdio \
--ip-address=192.168.2.103 --subnet=192.168.2.255 --netmask=255.255.255.0 \
--name-servers=192.168.1.116 --name-servers-search=example.com \
--gateway=192.168.2.1 --kopts="<replaceable>KERNEL_OPTIONS</replaceable>"</screen>
    <para>
     La opción <option>--kopts</option> permite especificar los parámetros de instalación y del núcleo que normalmente especificaría en el archivo parmfile. Especifique los parámetros con el siguiente formato: <replaceable>PARÁMETRO1=VALOR1 PARÁMETRO2=VALOR2</replaceable>. El instalador solicitará los parámetros que falten. Para una instalación totalmente automatizada, deberá especificar todos los parámetros de red, los DASD y proporcionar un archivo de AutoYaST. A continuación se muestra un ejemplo de invitado equipado con una interfaz OSA que emplea los mismos parámetros de red anteriores.
    </para>
<screen>--kopts=" \
AutoYaST=http://192.168.0.5/autoinst.xml \
Hostname=linux01.example.com \
Domain=example.com \
HostIP=192.168.2.103 \
Gateway=192.168.2.1 \
Nameserver=192.168.1.116 \
Searchdns=example.com \
InstNetDev=osa; \
Netmask=255.255.255.0 \
Broadcast=192.168.2.255 \
OsaInterface=qdio \
Layer2=0 \
PortNo=0 \
ReadChannel=0.0.0700 \
WriteChannel=0.0.0701 \
DataChannel=0.0.0702 \
DASD=600"</screen>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-makeavail-dvd-usb-hmc">
   <title>Instalación desde una unidad de memoria USB de la HMC</title>
   <para>
    La instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en servidores IBM Z normalmente requiere un origen de instalación en red. Si no se puede cumplir este requisito, SUSE Linux Enterprise Server permite utilizar la unidad de memoria USB de la consola de gestión de hardware (HMC) como origen de instalación para realizar esta en la LPAR.
   </para>
   <para>
    Para realizar la instalación desde la unidad de memoria USB de la HMC, siga este procedimiento:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Añada <option>install=hmc:/</option> al archivo <filename>parmfile</filename> (consulte la <xref linkend="sec-appdendix-parm"/>) o a las opciones del núcleo.
     </para>
    </listitem>
    <listitem>
     <para>
      En la instalación en modo manual mediante <filename>linuxrc</filename>, elija <emphasis role="italic">Iniciar instalación</emphasis>, <emphasis role="italic">Instalación</emphasis> y, a continuación, <emphasis role="italic">Consola de gestión de hardware.</emphasis> El medio de instalación debe estar en la HMC.
     </para>
    </listitem>
   </itemizedlist>
   <important>
    <title>configuración de la red</title>
    <para>
     Antes de iniciar la instalación, especifique una configuración de red en <filename>linuxrc</filename>. Esta operación no se puede llevar a cabo mediante parámetros de arranque, por lo que es muy probable que necesite acceso a la red. En <filename>linuxrc</filename>, diríjase a <emphasis role="italic">Start Installation</emphasis> (Iniciar instalación) y seleccione <emphasis role="italic">Network Setup</emphasis> (Configuración de la red).
    </para>
   </important>
   <important>
    <title>el sistema Linux debe arrancar primero</title>
    <para>
     Antes de otorgar acceso a los medios de la unidad de memoria USB de la HMC, espere a que se arranque el sistema Linux. Al realizar una carga inicial del programa se puede interrumpir la conexión entre la HMC y la LPAR. Si falla el primer intento de usar el método descrito, puede otorgar acceso y volver a probar la opción <option>HMC</option>.
    </para>
   </important>
   <note>
    <title>repositorio de instalación</title>
    <para>
     La unidad de memoria USB no se conserva como repositorio de instalación, ya que la instalación es un procedimiento que solo se produce una vez. Si necesita un repositorio de instalación, registre y use el repositorio en línea.
    </para>
   </note>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-inst-types">
  <title>Tipos de instalación</title>
  <para>
   Esta sección describe los pasos para instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en cada modo de instalación. Después de completar los pasos de preparación descritos en los capítulos anteriores, siga la descripción del modo de instalación que desee.
  </para>
  <para>
   Tal y como se describe en la <xref linkend="sec-prep-makeavail"/>, existen tres modos de instalación para Linux en IBM Z: LPAR, x/VM e invitado de KVM.
  </para>
  <procedure xml:id="pro-prep-inst-types-lpar">
   <title>Descripción general de la instalación en una LPAR</title>
   <step>
    <para>
     Prepare los dispositivos necesarios para la instalación. Consulte el <xref linkend="sec-prep-prep-ipl-natlpar"/>.
    </para>
   </step>
   <step>
    <para>
     Realice la carga inicial de programa (IPL) del sistema de instalación. Consulte el <xref linkend="sec-prep-ipling-lpar"/>.
    </para>
   </step>
   <step>
    <para>
     Configure la red. Consulte el <xref linkend="sec-prep-netcfg"/>.
    </para>
   </step>
   <step>
    <para>
     Conéctese al sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Consulte el <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Inicie la instalación mediante YaST y realice la carga de programa inicial (IPL) del sistema instalado. Consulte el <xref linkend="cha-install"/>.
    </para>
   </step>
  </procedure>
  <procedure xml:id="pro-prep-inst-types-vm">
   <title>Descripción general de la instalación en z/VM</title>
   <step>
    <para>
     Prepare los dispositivos necesarios para la instalación. Consulte el <xref linkend="sec-prep-prep-ipl-vm-linux-guest"/>.
    </para>
   </step>
   <step>
    <para>
     Realice la carga inicial de programa (IPL) del sistema de instalación. Consulte el <xref linkend="sec-prep-ipling-vm"/>.
    </para>
   </step>
   <step>
    <para>
     Configure la red. Consulte el <xref linkend="sec-prep-netcfg"/>.
    </para>
   </step>
   <step>
    <para>
     Conéctese al sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Consulte el <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Inicie la instalación mediante YaST y realice la carga de programa inicial (IPL) del sistema instalado. Consulte el <xref linkend="cha-install"/>.
    </para>
   </step>
  </procedure>
  <procedure xml:id="pro-prep-inst-types-kvm">
   <title>Descripción general de una instalación de invitado de KVM</title>
   <step>
    <para>
     Cree una imagen de disco virtual y escriba un archivo XML de dominio. Consulte el <xref linkend="sec-prep-prep-ipl-kvm"/>.
    </para>
   </step>
   <step>
    <para>
     Prepare el destino de instalación y realice la IPL en el invitado de máquina virtual. Consulte el <xref linkend="sec-prep-ipling-kvm"/>.
    </para>
   </step>
   <step>
    <para>
     <xref linkend="sec-prep-netcfg-data"/>.
    </para>
   </step>
   <step>
    <para>
     Conéctese al sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Consulte el <xref linkend="sec-prep-connect"/>.
    </para>
   </step>
   <step>
    <para>
     Inicie la instalación mediante YaST y realice la carga de programa inicial (IPL) del sistema instalado. Consulte el <xref linkend="cha-install"/>.
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-prep-prep-ipl">
  <title>Preparación de la IPL del sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para/>
  <sect3 xml:id="sec-prep-prep-ipl-natlpar">
   <title>Preparación de la IPL de una instalación de LPAR</title>
   <para>
    Configure el sistema IBM Z para que se inicie en el modo ESA/S390 o en el modo solo Linux con un perfil de activación adecuado e IOCDS. Para obtener más información, consulte la documentación de IBM. Continúe como se describe en la <xref linkend="sec-prep-ipling-lpar"/>.
   </para>
  </sect3>
  <sect3 xml:id="sec-prep-prep-ipl-vm">
   <title>Preparación de la IPL de una instalación de z/VM</title>
   <para/>
   <sect4 xml:id="sec-prep-prep-ipl-vm-linux-guest">
    <title>Adición de un invitado Linux con DirMaint</title>
    <para>
     El primer paso consisten en conectar y formatear uno o varios DASD en el sistema que vaya a utilizar el sistema invitado Linux en z/VM. A continuación, cree un nuevo usuario en z/VM. El ejemplo muestra el directorio de un usuario <literal>LINUX1</literal> con la contraseña <literal>LINPWD</literal>, 1 GB de memoria (ampliables hasta 2 GB), varios minidiscos (MDISK), dos CPU y un dispositivo QDIO OSA.
    </para>
    <tip>
     <title>asignación de memoria a invitados de z/VM</title>
     <para>
      Al asignar memoria a un invitado de z/VM, asegúrese de que el tamaño de la memoria sea adecuado al tipo de instalación deseado. Consulte el <xref linkend="sec-info-sysreq-sysreq-hw-mem"/>. Para definir el tamaño de memoria con el valor de 1 GB, utilice el comando <command>CP DEFINE STORAGE 1G</command>. Cuando haya finalizado la instalación, cambie el tamaño de la memoria al valor que desee.
     </para>
    </tip>
    <example xml:id="ex-prep-prep-ipl-vm-linux-guest-config">
     <title>Configuración de un directorio z/VM</title>
<screen>USER LINUX1 LINPWD 1024M 2048M G
*____________________________________________
* LINUX1
*____________________________________________
* This VM Linux guest has two CPUs defined.

CPU 01 CPUID 111111
CPU 02 CPUID 111222
IPL CMS PARM AUTOCR
IUCV ANY
IUCV ALLOW
MACH ESA 10
OPTION MAINTCCW RMCHINFO
SHARE RELATIVE 2000
CONSOLE 01C0 3270 A
SPOOL 000C 2540 READER *
SPOOL 000D 2540 PUNCH A
SPOOL 000E 3203 A
* OSA QDIO DEVICE DEFINITIONS
DEDICATE 9A0 9A0
DEDICATE 9A1 9A1
DEDICATE 9A2 9A2
*
LINK MAINT 0190 0190 RR
LINK MAINT 019E 019E RR
LINK MAINT 019D 019D RR
* MINIDISK DEFINITIONS
MDISK 201 3390 0001 0050 DASD40 MR ONE4ME TWO4ME THR4ME
MDISK 150 3390 0052 0200 DASD40 MR ONE4ME TWO4ME THR4ME
MDISK 151 3390 0253 2800 DASD40 MR ONE4ME TWO4ME THR4ME</screen>
   </example>
    <para>
     Este ejemplo utiliza el minidisco 201 como disco personal del invitado. El minidisco 150, con 200 cilindros, es el dispositivo swap de Linux. El disco 151, con 2800 cilindros, aloja la instalación de Linux.
    </para>
    <para>
     Como usuario <systemitem class="username">MAINT</systemitem>, añada el invitado al directorio de usuario con <command>DIRM FOR LINUX1 ADD</command>. Introduzca el nombre del invitado (<literal>LINUX1</literal>) y pulse <keycap>F5</keycap>. Configure el entorno del usuario mediante:
    </para>
<screen>DIRM DIRECT
DIRM USER WITHPASS</screen>
    <para>
     El último comando devuelve un número de archivo de lector. Necesitará este número para el siguiente comando:
    </para>
<screen>RECEIVE &lt;number&gt; USER DIRECT A (REPL)</screen>
    <para>
     A continuación podrá entrar en el sistema invitado como usuario <systemitem class="username">LINUX1</systemitem>.
    </para>
    <para>
     Si la opción <literal>dirmaint</literal> no está disponible, consulte la documentación de IBM para comprobar cómo configurar este usuario.
    </para>
    <para>
     Pase a la <xref linkend="sec-prep-ipling-vm"/>.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-prep-ipl-kvm">
   <title>Preparación de la IPL de una instalación de invitado de KVM</title>
   <para>
    Una instalación de invitado de KVM requiere un archivo XML de dominio donde se especifique la máquina virtual y al menos una imagen de disco virtual para la instalación.
   </para>
   <sect4 xml:id="sec-prep-prep-ipl-kvm-disk">
    <title>Creación de una imagen de disco virtual</title>
    <para>
     Por defecto, libvirt busca imágenes de disco en <filename>/var/lib/libvirt/images/</filename> en el servidor host de máquina virtual. Aunque las imágenes también se pueden almacenar en cualquier lugar del sistema de archivos, se recomienda almacenarlas todas en una única ubicación para facilitar el mantenimiento. Para crear una imagen, entre en el servidor host de KVM y ejecute el comando siguiente:
    </para>
<screen>qemu-img create -f qcow2 /var/lib/libvirt/images/s12lin_qcow2.img 10G</screen>
    <para>
     Esto crea una imagen de qcow2 con un tamaño de 10 GB en <filename>/var/lib/libvirt/images/</filename>. Para obtener más información, consulte el <xref linkend="cha-qemu-guest-inst-qemu-img"/>.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-prep-ipl-kvm-domain">
    <title>Escritura de un archivo XML de dominio</title>
    <para>
     Para definir el invitado de máquina virtual se usa un archivo XML de dominio. Para crear el archivo XML de dominio, abra un archivo vacío <filename>s12-1.xml</filename> en un editor y cree un archivo como en el ejemplo siguiente.
    </para>
    <example>
     <title>Archivo XML de dominio de ejemplo</title>
     <para>
      En el ejemplo siguiente, se crea un invitado de máquina virtual con una sola CPU, 1 GB de RAM y la imagen de disco virtual creada en la sección anterior (<xref linkend="sec-prep-prep-ipl-kvm-disk"/>). Se entiende que el servidor virtual está conectado a la interfaz de red del host <literal>bond0</literal>. Cambie el elemento de dispositivos de origen para que coincida con la configuración de la red.
     </para>
<screen>&lt;domain type="kvm"&gt;
 &lt;name&gt;s15-1&lt;/name&gt;
 &lt;description&gt;Guest-System SUSE SLES15&lt;/description&gt;
 &lt;memory&gt;1048576&lt;/memory&gt;
 &lt;vcpu&gt;1&lt;/vcpu&gt;
 &lt;os&gt;
  &lt;type arch="s390x" machine="s390-ccw-virtio"&gt;hvm&lt;/type&gt;
  &lt;!-- Boot kernel - remove 3 lines after successfull installation --&gt;
  &lt;kernel&gt;/var/lib/libvirt/images/s15-kernel.boot&lt;/kernel&gt;
  &lt;initrd&gt;/var/lib/libvirt/images/s15-initrd.boot&lt;/initrd&gt;
  &lt;cmdline&gt;linuxrcstderr=/dev/console&lt;/cmdline&gt;
 &lt;/os&gt;
 &lt;iothreads&gt;1&lt;/iothreads&gt;
 &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
 &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
 &lt;on_crash&gt;preserve&lt;/on_crash&gt;
 &lt;devices&gt;
  &lt;emulator&gt;/usr/bin/qemu-system-s390x&lt;/emulator&gt;
  &lt;disk type="file" device="disk"&gt;
   &lt;driver name="qemu" type="qcow2" cache="none" iothread="1" io="native"/&gt;
   &lt;source file="/var/lib/libvirt/images/s15lin_qcow2.img"/&gt;
   &lt;target dev="vda" bus="virtio"/&gt;
  &lt;/disk&gt;
  &lt;interface type="direct"&gt;
   &lt;source dev="bond0" mode="bridge"/&gt;
   &lt;model type="virtio"/&gt;
  &lt;/interface&gt;
  &lt;console type="pty"&gt;
   &lt;target type="sclp"/&gt;
  &lt;/console&gt;
 &lt;/devices&gt;
&lt;/domain&gt;</screen>
    </example>
   </sect4>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-ipling">
  <title>Carga de programa inicial del sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para/>
  <sect3 xml:id="sec-prep-ipling-lpar">
   <title>Carga de programa inicial de una instalación de LPAR</title>
   <para>
    Hay distintas formas de realizar la carga inicial del programa de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en una partición lógica. El método más adecuado consiste en utilizar la función de carga desde el CD-ROM o el servidor<guimenu/> del SE o la HMC.
   </para>
   <sect4 xml:id="sec-prep-ipling-lpar-cdrom">
    <title>IPL desde el DVD-ROM</title>
    <para>
     Marque la LPAR en la que desee realizar la instalación y seleccione <guimenu>Load from CD-ROM or server</guimenu> (Cargar desde CD-ROM o servidor). Deje en blanco el campo de ubicación de archivos o introduzca la vía al directorio raíz de primer DVD-ROM y seleccione <guimenu>Continuar.</guimenu> Conserve la selección por defecto de la lista de opciones que aparece. <guimenu>Operating system messages</guimenu> (Mensajes del sistema operativo) debería empezar a mostrar los mensajes de arranque del núcleo.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-lpar-dvd">
    <title>IPL desde un DVD SCSI conectado a FCP</title>
    <para>
     Puede emplear el procedimiento <guimenu>Load</guimenu> (Cargar) seleccionando <guimenu>SCSI</guimenu> en <guimenu>Load type</guimenu> (Tipo de carga) para realizar la IPL desde SCSI. Escriba los valores WWPN (del inglés Worldwide Port Number, número de puerto universal) y LUN (del inglés Logical Unit Number, número de unidad lógica) que proporcione el puente o el dispositivo de almacenamiento SCSI (16 números, sin olvidar los ceros finales). El selector del programa de arranque debe ser 2. Utilice el adaptador FCP como <guimenu>dirección de carga</guimenu> y realice una IPL.
    </para>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-ipling-vm">
   <title>Carga de programa inicial de una instalación de z/VM</title>
   <para>
    En esta sección se describe la carga inicial de programa (IPL) para instalar <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> para IBM Z en un sistema z/VM.
   </para>
   <sect4 xml:id="sec-prep-ipling-vm-reader">
    <title>Carga inicial de programa (IPL) desde el lector de z/VM</title>
    <para>
     Necesitará una conexión TCP/IP que funcione y un programa cliente FTP dentro del invitado de z/VM recién definido para transferir el sistema de instalación a través de FTP. La configuración de TCP/IP para z/VM escapa al alcance de este manual. Consulte la documentación pertinente de IBM.
    </para>
    <para>
     Entre como sistema invitado Linux de z/VM para realizar la IPL. Asegúrese de que el contenido del directorio <filename>/boot/s390x</filename> del instalador unificado (medio 1) esté disponible a través de FTP en la red. Obtenga los archivos <filename>linux</filename>, <filename>initrd</filename>, <filename>parmfile</filename> y <filename>sles.exec</filename> de ese directorio. Transfiera los archivos con un tamaño de bloque fijo de 80 caracteres. Especifíquelo con el comando FTP <command>locsite fix 80</command>. Es importante copiar <filename>linux</filename> (el núcleo de Linux) e <filename>initrd</filename> (la imagen de instalación) como archivos binarios, por lo que debe utilizar el modo de transferencia <literal>binario</literal>. Se deben transferir <filename>parmfile</filename> y <filename>sles.exec</filename> en modo ASCII.
    </para>
    <para>
     El siguiente ejemplo muestra los pasos necesarios. En este caso, se entiende que se puede acceder a los archivos necesarios desde un servidor FTP en la dirección IP <literal>192.168.0.3</literal> y el nombre de inicio de sesión es <systemitem class="username">lininst</systemitem>.
    </para>
    <example xml:id="ex-prep-ipling-vm-reader-ftp-ftptrans">
     <title>Transferencia de archivos binarios mediante FTP</title>
<screen>FTP 192.168.0.3
VM TCP/IP FTP Level 530
Connecting to 192.168.0.3, port 21
220 ftpserver FTP server (Version wu-2.4.2-academ[BETA-18](1)
Thu Feb 11 16:09:02 GMT 2010) ready.
USER
lininst
331 Password required for lininst
PASS
******
230 User lininst logged in.
Command:
binary
200 Type set to I
Command:
locsite fix 80
Command:
get /media/dvd1/boot/s390x/linux sles15.linux
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/linux
(10664192 bytes)
226 Transfer complete.
10664192 bytes transferred in 13.91 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/initrd sles12.initrd
200 PORT Command successful
150 Opening BINARY mode data connection for /media/dvd1/boot/s390x/initrd
(21403276 bytes)
226 Transfer complete.
21403276 bytes transferred in 27.916 seconds.
Transfer rate 766.70 Kbytes/sec.
Command:
ascii
200 Type set to A
Command:
get /media/dvd1/boot/s390x/parmfile sles12.parmfile
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/parmfile
(5 bytes)
226 Transfer complete.
5 bytes transferred in 0.092 seconds.
Transfer rate 0.05 Kbytes/sec.
Command:
get /media/dvd1/boot/s390x/sles.exec sles.exec
150 Opening ASCII mode data connection for /media/dvd1/boot/s390x/sles.exec
(891 bytes)
226 Transfer complete.
891 bytes transferred in 0.097 seconds.
Transfer rate 0.89 Kbytes/sec.
Command:
quit</screen>
    </example>
    <para>
     Utilice el guion REXX sles.exec que ha descargado para realizar la IPL del sistema de instalación de Linux. Este guion cargará el núcleo, el archivo parm y el disco RAM inicial en el lector para realizar la carga inicial de programa (IPL):
    </para>
    <example xml:id="ex-prep-ipling-vm-reader-startscript-slesexec">
     <title>SLES12 EXEC</title>
<screen>/* REXX LOAD EXEC FOR SUSE LINUX S/390 VM GUESTS       */
/* LOADS SUSE LINUX S/390 FILES INTO READER            */
SAY ''
SAY 'LOADING SLES12 FILES INTO READER...'
'CP CLOSE RDR'
'PURGE RDR ALL'
'SPOOL PUNCH * RDR'
'PUNCH SLES12 LINUX A (NOH'
'PUNCH SLES12 PARMFILE A (NOH'
'PUNCH SLES12 INITRD A (NOH'
'IPL 00C'</screen>
    </example>
    <para>
     Este guion permite realizar la IPL del sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> con el comando <command>sles12</command>. El núcleo de Linux se iniciará y generará sus mensajes de arranque.
    </para>
    <para>
     Para continuar con la instalación, diríjase a la <xref linkend="sec-prep-netcfg"/>.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-vm-dvd">
    <title>IPL desde un DVD SCSI conectado a FCP</title>
    <para>
     Para realizar la IPL en z/VM, prepare el proceso de IPL SCSI utilizando el parámetro SET LOADDEV:
    </para>
<screen>SET LOADDEV PORTNAME 200400E8 00D74E00 LUN 00020000 00000000 BOOT 2</screen>
    <para>
     Después de configurar el parámetro LOADDEV con los valores adecuados, realice la carga inicial de programa (IPL) en el adaptador FCP. Por ejemplo:
    </para>
<screen>IPL FC00</screen>
    <para>
     Para continuar con la instalación, diríjase a la <xref linkend="sec-prep-netcfg"/>.
    </para>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-vm-zpxe">
    <title>IPL desde un servidor Cobbler con zPXE</title>
    <para>
     Para realizar la IPL desde un servidor Cobbler con zPXE, deberá transferir el guion <filename>zpxe.rexx</filename> mediante FTP del servidor Cobbler al invitado de z/VM. Para hacerlo, el invitado de z/VM requiere una conexión TCP/IP en funcionamiento y un cliente de FTP.
    </para>
    <para>
     Entre a la sesión como invitado Linux de z/VM en IPL y transfiera el guion con un tamaño fijo de 80 caracteres en modo ASCII (consulte un ejemplo en <xref linkend="ex-prep-ipling-vm-reader-ftp-ftptrans"/>). El guion <filename>zpxe.rexx</filename> está disponible en el DVD del instalador unificado en <filename>/boot/s390x/zpxe.rexx</filename> o en un servidor Cobbler SLE en <filename>/usr/share/doc/packages/s390-tools/zpxe.rexx</filename>.
    </para>
    <para>
     <filename>zpxe.rexx</filename> debe reemplazar al archivo <filename>PROFILE EXEC</filename> del invitado. Realice una copia del archivo <filename>PROFILE EXEC</filename> existente y cambie el nombre de <filename>ZPXE REXX</filename> a <filename>PROFILE EXEC</filename>. También es posible llamar a <filename>ZPXE REXX</filename> desde el perfil existente <filename>PROFILE EXEC</filename> añadiéndole la línea <literal>'ZPXE REXX'</literal>.
    </para>
    <para>
     El último paso consiste en crear un archivo de configuración, <filename>ZPXE CONF</filename>, que indique a <filename>ZPXE REXX</filename> con qué servidor de Cobbler debe ponerse en contacto y a qué disco debe aplicarse IPL. Ejecute <command>xedit zpxe conf a</command> y cree <filename>ZPXE CONF</filename> con el siguiente contenido (sustituya los datos de ejemplo según sea preciso):
    </para>
<screen>HOST cobbler.example.com
IPLDISK 600</screen>
    <para>
     Esto conecta el servidor Cobbler la próxima vez que entre a la sesión en el invitado de z/VM. Si hay una instalación programada en el servidor Cobbler, se ejecutará. Para programar la instalación, ejecute el siguiente comando en el servidor Cobbler:
    </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> cobbler system edit --name <replaceable>ID</replaceable><co xml:id="co-cobbler-sysedit-id"/> --netboot-enabled 1<co xml:id="co-cobbler-sysedit-netboot"/> --profile <replaceable>PROFILENAME</replaceable><co xml:id="co-cobbler-sysedit-profile"/></screen>
    <calloutlist>
     <callout arearefs="co-cobbler-sysedit-id">
      <para>
       ID de usuario de z/VM.
      </para>
     </callout>
     <callout arearefs="co-cobbler-sysedit-netboot">
      <para>
       Habilite IPL desde la red.
      </para>
     </callout>
     <callout arearefs="co-cobbler-sysedit-profile">
      <para>
       Nombre de un perfil existente (consulte la <xref linkend="sec-prep-makeavail-zpxe-cobbler-profile"/>).
      </para>
     </callout>
    </calloutlist>
   </sect4>
  </sect3>
  <sect3 xml:id="sec-prep-ipling-kvm">
   <title>Carga de programa inicial de una instalación de invitado de KVM</title>
   <para>
    Para iniciar la instalación de invitado, primero debe iniciar el invitado de máquina virtual definido en <xref linkend="sec-prep-prep-ipl-kvm-disk"/>. Antes de empezar, asegúrese de que el núcleo e initrd están disponibles para la IPL.
   </para>
   <sect4 xml:id="sec-prep-ipling-kvm-prep">
    <title>Preparación del origen de la instalación</title>
    <para>
     El núcleo y el elemento initrd del sistema de instalación deben copiarse en el servidor host de máquina virtual para realizar la IPL del invitado de máquina virtual en el sistema de instalación.
    </para>
    <procedure>
     <step>
      <para>
       Entre en el host de KVM y asegúrese de que puede conectar con el host remoto o el dispositivo al que presta servicios el origen de instalación.
      </para>
     </step>
     <step>
      <para>
       Copie los dos archivos siguientes desde el origen de instalación a <filename>/var/lib/libvirt/images/</filename>. Si los datos se entregan desde un host remoto, use <command>ftp</command>, <command>sftp</command> o <command>scp</command> para transferir los archivos:
      </para>
      <simplelist>
       <member><filename>/boot/s390x/initrd</filename>
       </member>
       <member><filename>/boot/s390x/cd.ikr</filename>
       </member>
      </simplelist>
     </step>
     <step>
      <para>
       Renombre los archivos en el host de KVM:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> cd /var/lib/libvirt/images/
<prompt>tux &gt; </prompt><command>sudo</command> mv initrd s15-initrd.boot
<prompt>tux &gt; </prompt><command>sudo</command> mv cd.ikr s15-kernel.boot</screen>
     </step>
    </procedure>
   </sect4>
   <sect4 xml:id="sec-prep-ipling-kvm-guest">
    <title>Carga de programa inicial del invitado de máquina virtual</title>
    <para>
     Para realizar la IPL en el invitado de máquina virtual, entre en el host de KVM y ejecute el comando siguiente:
    </para>
<screen><prompt>tux &gt; </prompt>virsh  create s15-1.xml --console</screen>
    <para>
     El proceso de instalación se iniciará cuando el invitado de máquina virtual esté activo y en ejecución, y verá el siguiente mensaje:
    </para>
<screen>Domain s15-1 started
Connected to domain s15-1
Escape character is ^]
Initializing cgroup subsys cpuset
Initializing cgroup subsys cpu
Initializing
cgroup subsys cpuacct
.
.
Please make sure your installation medium is available.
Retry?
0) &lt;-- Back &lt;--
1) Yes
2) No</screen>
    <para>
     Responda <guimenu>2) No</guimenu> y seleccione <guimenu>Installation</guimenu> (Instalación) en el paso siguiente. Proceda del modo descrito en la <xref linkend="sec-prep-netcfg-data"/>.
    </para>
   </sect4>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-netcfg">
  <title>Configuración de la red</title>
  <para>
   Espere hasta que el núcleo haya completado sus rutinas de arranque. Si realiza la instalación en el modo básico o en una LPAR, abra <guimenu>Operating System Messages</guimenu> (Mensajes del sistema operativo) en la HMC o el SE.
  </para>
  <para>
   En primer lugar, seleccione <guimenu>Start Installation</guimenu> (Iniciar instalación) en el menú principal de <filename>linuxrc</filename>. A continuación, seleccione <guimenu>Start Installation or Update</guimenu> (Iniciar instalación o actualización) para iniciar al proceso de instalación. Seleccione <guimenu>Network</guimenu> (Red) como medio de instalación y seleccione el tipo de protocolo de red que utilizará para la instalación. En la <xref linkend="sec-prep-makeavail"/> se describe cómo hacer que los datos de instalación estén disponibles para los distintos tipos de conexiones de red. Actualmente, las conexiones compatibles son <guimenu>FTP,</guimenu> <guimenu>HTTP,</guimenu> <guimenu>NFS</guimenu> y <guimenu>SMB/CIFS</guimenu> (uso compartido de archivos de Windows).
  </para>
  <para>
   En la lista de los dispositivos disponibles, seleccione un dispositivo de red OSA o HiperSockets para recibir los datos de instalación. Aunque la lista podría incluir dispositivos CTC, ESCON o IUCV, ya no se admiten en <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
  </para>
  <sect3 xml:id="sec-prep-netcfg-hypersockets">
   <title>Configuración de una interfaz HiperSockets</title>
   <para>
    Seleccione un dispositivo HiperSocket en la lista de dispositivos de red. A continuación, introduzca los valores de los canales de lectura, escritura y datos:
   </para>
   <example xml:id="ex-appdendix-inst-netcontypes-types">
    <title>Tipos de conexiones de red admitidos y parámetros de los controladores</title>
<screen>Choose the network device.

 1) IBM parallel CTC Adapter (0.0.0600)
 2) IBM parallel CTC Adapter (0.0.0601)
 3) IBM parallel CTC Adapter (0.0.0602)
 4) IBM Hipersocket (0.0.0800)
 5) IBM Hipersocket (0.0.0801)
 6) IBM Hipersocket (0.0.0802)
 7) IBM OSA Express Network card (0.0.0700)
 8) IBM OSA Express Network card (0.0.0701)
 9) IBM OSA Express Network card (0.0.0702)
10) IBM OSA Express Network card (0.0.f400)
11) IBM OSA Express Network card (0.0.f401)
12) IBM OSA Express Network card (0.0.f402)
13) IBM IUCV

&gt; 4

Device address for read channel. (Enter '+++' to abort).
[0.0.0800]&gt; 0.0.0800

Device address for write channel. (Enter '+++' to abort).
[0.0.0801]&gt; 0.0.0801

Device address for data channel. (Enter '+++' to abort).
[0.0.0802]&gt; 0.0.0802</screen>
   </example>
  </sect3>
  <sect3 xml:id="sec-prep-netcfg-osa">
   <title>Configuración de un dispositivo OSA Express</title>
   <para>
    Seleccione un dispositivo OSA Express en la lista de dispositivos de red y especifique un número de puerto. Introduzca los valores de los canales de lectura, escritura y datos: Elija si desea habilitar la compatibilidad con la capa 2 de OSI.
   </para>
   <para>
    El número de puerto es necesario para los nuevos dispositivos de red de 2 puertos OSA Express 3. Si no utiliza un dispositivo OSA Express 3, introduzca el valor <literal>0</literal>. Las tarjetas OSA Express también pueden ejecutarse en el modo de <quote>compatibilidad con la capa 2 de OSI</quote> o utilizar el modo de <quote>capa 3</quote> más antiguo y más habitual. El modo que se establezca en la tarjeta afectará a todos los sistemas que compartan el dispositivo, incluidos los sistemas que se encuentren en otras LPAR. Si no está seguro, especifique el valor <literal>2</literal> para asegurar la compatibilidad con el modo por defecto que utilizan otros sistemas operativos, como z/VM y z/OS. Consulte con el administrador del hardware si necesita más información acerca de estas opciones.
   </para>
   <example xml:id="ex-appdendix-inst-netcontypes-gigabit-param">
    <title>Parámetros del controlador del dispositivo de red</title>
<screen>Choose the network device.

 1) IBM parallel CTC Adapter (0.0.0600)
 2) IBM parallel CTC Adapter (0.0.0601)
 3) IBM parallel CTC Adapter (0.0.0602)
 4) IBM Hipersocket (0.0.0800)
 5) IBM Hipersocket (0.0.0801)
 6) IBM Hipersocket (0.0.0802)
 7) IBM OSA Express Network card (0.0.0700)
 8) IBM OSA Express Network card (0.0.0701)
 9) IBM OSA Express Network card (0.0.0702)
10) IBM OSA Express Network card (0.0.f400)
11) IBM OSA Express Network card (0.0.f401)
12) IBM OSA Express Network card (0.0.f402)
13) IBM IUCV

&gt; 7

Enter the relative port number. (Enter '+++' to abort).
&gt; 0

Device address for read channel. (Enter '+++' to abort).
[0.0.0700]&gt; 0.0.0700

Device address for write channel. (Enter '+++' to abort).
[0.0.0701]&gt; 0.0.0701

Device address for data channel. (Enter '+++' to abort).
[0.0.0702]&gt; 0.0.0702

Enable OSI Layer 2 support?

0) &lt;-- Back &lt;--
1) Yes
2) No

&gt; 1

MAC address. (Enter '+++' to abort).
&gt; +++</screen>
   </example>
  </sect3>
  <sect3 xml:id="sec-prep-netcfg-data">
   <title>Configuración de la red y selección del origen de instalación</title>
   <para>
    Después de introducir todos los parámetros del dispositivo de red, el controlador respectivo se instala y observará los mensajes correspondientes del núcleo.
   </para>
   <para>
    A continuación, deberá especificar si desea utilizar la configuración automática DHCP para configurar los parámetros de la interfaz de red. Dado que DHCP solo funciona con algunos dispositivos y requiere ajustes especiales de hardware, seleccione <guimenu>NO.</guimenu> Al hacerlo, se le pedirá que especifique los siguientes parámetros de red:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Dirección IP del sistema que se va a instalar
     </para>
    </listitem>
    <listitem>
     <para>
      La máscara de red correspondiente (si no se ha especificado con la dirección IP)
     </para>
    </listitem>
    <listitem>
     <para>
      Dirección IP de un gateway para acceder al servidor
     </para>
    </listitem>
    <listitem>
     <para>
      Una lista de dominios de búsqueda cubiertos por el servidor de nombres de dominio (DNS)
     </para>
    </listitem>
    <listitem>
     <para>
      Dirección IP del servidor de nombres de dominios
     </para>
    </listitem>
   </itemizedlist>
   <example xml:id="ex-prep-netcfg-vm-network-setup">
    <title>Parámetros de red</title>
<screen>Automatic configuration via DHCP?

0) &lt;-- Back &lt;--
1) Yes
2) No

&gt; 2

Enter your IP address with network prefix.

You can enter more than one, separated by space, if necessary.
Leave empty for autoconfig.

Examples: 192.168.5.77/24 2001:db8:75:fff::3/64. (Enter '+++' to abort).
&gt; 192.168.0.20/24

Enter your name server IP address.

You can enter more than one, separated by space, if necessary.
Leave empty if you don't need one.

Examples: 192.168.5.77 2001:db8:75:fff::3. (Enter '+++' to abort).
&gt; 192.168.0.1

Enter your search domains, separated by a space:. (Enter '+++' to abort).
&gt; example.com

Enter the IP address of your name server. Leave empty if you do not need one. (En
ter '+++' to abort).
&gt; 192.168.0.1</screen>
   </example>
   <para>
    Por último, proporcione la información necesaria sobre el servidor de instalación, como la dirección IP, el directorio que contiene los datos de instalación y las credenciales de entrada a la sesión. El sistema de instalación se cargará cuando se haya proporcionado la información necesaria.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-connect">
  <title>Conexión con el sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase></title>
  <para>
   Después de cargar el sistema de instalación, linuxrc solicita el tipo de pantalla que desea utilizar para controlar el procedimiento de instalación. Las opciones posibles son <literal>X11</literal> (sistema X Window), <literal>VNC</literal> (protocolo de procesamiento en red virtual), <literal>SSH</literal> (modo de texto o instalación X11 mediante shell segura) o <literal>Consola ASCII.</literal> Las opciones recomendadas son <literal>VNC</literal> o <literal>SSH</literal>.
  </para>
  <para>
   Si se selecciona la opción <literal>Consola ASCII</literal>, YaST se inicia en modo de texto y podrá realizar la instalación directamente desde el terminal. Consulte el <xref linkend="cha-yast-text"/> para obtener instrucciones sobre cómo usar YaST en el modo de texto. El uso de la <literal>Consola ASCII</literal> solo resulta de utilidad si se instala en LPAR.
  </para>
  <note>
   <title>emulación de terminal para la consola ASCII</title>
   <para>
    Para poder trabajar con YaST en el modo de texto, se debe ejecutar en un terminal con simulación VT220/Linux (también denominado <literal>consola ASCII</literal>).
   </para>
  </note>
  <sect3 xml:id="sec-inst-connect-vnc-inst">
   <title>Inicio de la instalación en VNC</title>
   <para>
    Para controlar de forma remota una instalación mediante VNC, lleve a cabo estos pasos:
   </para>
   <procedure>
    <step>
     <para>
      Al seleccionar la opción <literal>VNC</literal>, se inicia el servidor VNC. Una breve nota en la consola muestra la dirección IP y el número de pantalla para conectarse con vncviewer.
     </para>
    </step>
    <step>
     <para>
      Introduzca la dirección IP y el número de pantalla del sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> cuando se le solicite.
     </para>
    </step>
    <step>
     <para>
      Cuando se le solicite, introduzca la dirección IP y el número de pantalla del sistema de instalación de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>.
     </para>
<screen>http://&lt;IP address of installation system&gt;:5801/</screen>
    </step>
    <step>
     <para>
      Después de establecer la conexión, instale <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> con YaST.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec-inst-connect-x">
   <title>Inicio de la instalación para el sistema X Window</title>
   <important>
    <title>mecanismo de autenticación X</title>
    <para>
     La instalación directa con el sistema X Window depende de un mecanismo de autenticación basado en nombres de hosts. Este mecanismo está inhabilitado en las versiones actuales de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>. Se recomienda realizar la instalación mediante SSH o VNC.
    </para>
   </important>
   <para>
    Para controlar de forma remota una instalación mediante reenvío X, lleve a cabo estos pasos:
   </para>
   <procedure>
    <step>
     <para>
      Asegúrese de que el servidor X permite conectarse al cliente (el sistema que se está instalando). Establezca la variable <command>DISPLAYMANAGER_XSERVER_TCP_PORT_6000_OPEN="yes"</command> en el archivo <filename>/etc/sysconfig/displaymanager</filename>. Reinicie el servidor X y permita al cliente asociarse al servidor con el comando <command>xhost <replaceable>DIRECCIÓN_IP_DEL_CLIENTE</replaceable></command>.
     </para>
    </step>
    <step>
     <para>
      Cuando el sistema de instalación lo solicite, introduzca la dirección IP del equipo en el que se ejecute el servidor X.
     </para>
    </step>
    <step>
     <para>
      Espere a que YaST se abra e inicie la instalación.
     </para>
    </step>
   </procedure>
  </sect3>
  <sect3 xml:id="sec-inst-connect-ssh">
   <title>Inicio de la instalación en SSH</title>
   <para>
    Para establecer la conexión con un sistema de instalación con el nombre <literal>earth</literal> mediante SSH, utilice el comando <command>ssh -X earth</command>. Si la estación de trabajo se ejecuta en Microsoft Windows, emplee la herramienta PuTTY disponible en <link xlink:href="http://www.chiark.greenend.org.uk/~sgtatham/putty/"/>. Defina <guimenu>Enable X11 forwarding</guimenu> (Habilitar reenvío de X11) en Putty, en <menuchoice>
    <guimenu> Connection</guimenu> <guimenu> SSH</guimenu> <guimenu> X11</guimenu>
    </menuchoice>  (Conexión &gt; SSH &gt; X11).
   </para>
   <para>
    Si utiliza otro sistema operativo, ejecute <command>ssh -X earth</command> para conectarse a un sistema de instalación con el nombre <systemitem>earth</systemitem>. Se admite el reenvío X sobre SSH si dispone de un servidor X local disponible. En caso contrario, YaST proporciona una interfaz de texto a través de ncurses.
   </para>
   <para>
    Cuando se le solicite, escriba el nombre del usuario <literal>root</literal> y entre a la sesión con su contraseña. Introduzca <command>yast.ssh</command> para iniciar YaST. Recibirá indicaciones de YaST sobre los pasos que debe llevar a cabo durante la instalación.
   </para>
   
   <important>
     <title>solución de problemas de YaST a través de SSH</title>
     <para>
       En determinadas situaciones, ejecutar la GUI de YaST a través de SSH con remisión de X puede fallar con el siguiente mensaje de error:
     </para>
<screen>XIO: fatal IO error 11 (Resource temporarily unavailable) on X server "localhost:11.0"</screen>
     <para>
       En tal caso, tiene dos opciones.
     </para>
       <itemizedlist>
       <listitem>
	 <para>
	   Ejecute YaST con la opción <option>QT_XCB_GL_INTEGRATION=none</option>, por ejemplo:
	 </para>
<screen>QT_XCB_GL_INTEGRATION=none yast.ssh
QT_XCB_GL_INTEGRATION=none yast2 disk</screen>
       </listitem>
       <listitem>
	 <para>
	   Ejecute la versión ncurses de la aplicación YaST inhabilitando la remisión de X o especificando ncurses como la interfaz de usuario deseada. Para ello, utilice el comando <command>yast2 disk --ncurses</command> o <command>YUI_PREFERED_BACKEND=ncurses yast2 disk</command>.
	 </para>
	 </listitem>
       </itemizedlist>
     </important>
   <para>
    Proceda con la instalación tal y como se describe en el <xref linkend="cha-install"/>.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-prep-boot-procedure">
  <title>Procedimiento de arranque de <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en IBM Z</title>
  <para>
   En SLES 10 y 11, el proceso de arranque se gestionaba mediante el cargador de arranque zipl. Para habilitar el arranque desde particiones Btrfs y permitir la reversión de cambios del sistema con Snapper, ha cambiado la forma en que se arranca <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> en IBM Z.
  </para>
  <para>
   GRUB 2 sustituye a zipl en <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> para IBM Z. GRUB 2 en la arquitectura AMD64/Intel 64 incluye controladores de dispositivo en el nivel del firmware para acceder al sistema de archivos. En el mainframe no hay firmware, y añadir <literal>ccw</literal> a GRUB 2 no solo supondría una tarea complicada, sino que sería necesario volver a implementar zipl en GRUB 2. Por lo tanto, <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> usa un enfoque de dos fases:
  </para>
  <variablelist>
   <varlistentry>
    <term>Fase uno:</term>
    <listitem>
     <para>
      Una partición independiente que incluye el núcleo y un initrd se monta en <filename>/boot/zipl</filename>. Este núcleo y el initrd se cargan mediante zipl con la configuración de <filename>/boot/zipl/config</filename>.
     </para>
     <para>
      Esta configuración añade la palabra clave <literal>initgrub</literal> a la línea de comandos del núcleo. Después de que el núcleo e initrd se hayan cargado, el initrd activa los dispositivos necesarios para montar el sistema de archivos raíz (consulte <filename>/boot/zipl/active_devices.txt</filename>). A continuación, se inicia un programa de espacio de usuario de GRUB 2, que lee <filename>/boot/grub2/grub.cfg</filename>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Fase dos:</term>
    <listitem>
     <para>
      El núcleo y el initrd especificados en <filename>/boot/grub2/grub.cfg</filename> se inician mediante <command>kexec</command>. Se activarán los dispositivos que aparecen en <filename>/boot/zipl/active_devices.txt</filename> que son necesarios para iniciar el sistema en disco. También se permitirán otros dispositivos de esa lista, pero se ignorarán. El sistema de archivos raíz se monta y el procedimiento de arranque continúa como en las demás arquitecturas.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
  <para>
   Para obtener más información sobre el proceso de arranque, consulte <xref linkend="cha-boot"/>.
  </para>
 </sect2>
</sect1>
