<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="troubleshooting.xml" version="5.0" xml:id="cha.trouble">
 <title>Problemas comuns e suas soluções</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes (sim)</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  Este capítulo descreve uma gama de problemas em potencial e suas soluções. Mesmo se a sua situação não esteja listada aqui com precisão, poderá haver alguma semelhante que ofereça dicas para a solução do seu problema.
 </para>
 <sect1 xml:id="sec.trouble.info">
  <title>Localizando e reunindo informações</title>

  <para>
   O Linux reporta os dados de forma bastante detalhada. Há vários lugares para você pesquisar caso tenha problemas com seu sistema, sendo que a maioria é padrão para sistemas Linux em geral, e alguns relevantes aos sistemas <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>. É possível ver a maioria dos arquivos de registro com o YaST (<menuchoice> <guimenu>Diversos</guimenu> <guimenu>Registro de Inicialização</guimenu> </menuchoice>).
  </para>



  <para>
   <indexterm> <primary>YaST</primary> <secondary>consulta ao suporte</secondary> </indexterm> <indexterm> <primary>consulta ao suporte</primary> </indexterm> O YaST permite coletar todas as informações do sistema necessárias à equipe de suporte. Use <menuchoice> <guimenu>Outros</guimenu> <guimenu>Suporte</guimenu> </menuchoice> e selecione a categoria do problema. Quando todas as informações forem reunidas, anexe-as à sua solicitação de suporte.
  </para>

  <para>
   Veja a seguir uma lista dos arquivos de registro verificados com mais frequência com a descrição de seus objetivos principais. Os caminhos contendo <filename>~</filename> referem-se ao diretório pessoal do usuário atual.
  </para>

  <table xml:id="tab.trouble.info">
   <title>Arquivos de registro</title>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>
       <para>
        Arquivo de registro
       </para>
      </entry>
      <entry>
       <para>
        Descrição
       </para>
      </entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>
       <para>
        <filename>~/.xsession-errors</filename>
       </para>
      </entry>
      <entry>
       <para>
        Mensagens de aplicativos de área de trabalho atualmente em execução.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/apparmor/</filename>
       </para>
      </entry>
      <entry>
       <para>
        Arquivos de registro do AppArmor, consulte a <xref linkend="part.apparmor"/> para obter informações detalhadas.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/audit/audit.log</filename>
       </para>
      </entry>
      <entry>
       <para>
        Arquivo de registro do Audit para monitorar qualquer acesso a arquivos, diretórios ou recursos do seu sistema, bem como rastrear as chamadas do sistema. Consulte a <xref linkend="part.audit"/> para obter as informações detalhadas.
       </para>
      </entry>
     </row>

     <row>
      <entry>
       <para>
        <filename>/var/log/mail.*</filename>
       </para>
      </entry>
      <entry>
       <para>
        Mensagens do sistema de correio.
       </para>
      </entry>
     </row>

     <row>
      <entry>
       <para>
        <filename>/var/log/NetworkManager</filename>
       </para>
      </entry>
      <entry>
       <para>
        Arquivo de registro do NetworkManager para coleta de problemas de conectividade da rede
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/samba/</filename>
       </para>
      </entry>
      <entry>
       <para>
        Diretório contendo mensagens do registro de cliente e servidor do Samba.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/warn</filename>
       </para>
      </entry>
      <entry>
       <para>
        Todas as mensagens do kernel e do daemon do registro do sistema com o nível <quote>warning</quote> ou superior.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/wtmp</filename>
       </para>
      </entry>
      <entry>
       <para>
        Arquivo binário contendo registros de login de usuário para a sessão da máquina atual. Exiba-o com <command>last</command>.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/Xorg.*.log</filename>
       </para>
      </entry>
      <entry>
       <para>
        Vários arquivos de registro de inicialização e tempo de execução do X Window System. São úteis para depurar inicializações malsucedidas do X.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/YaST2/</filename>
       </para>
      </entry>
      <entry>
       <para>
        Diretório contendo ações do YaST e seus resultados.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/var/log/zypper.log</filename>
       </para>
      </entry>
      <entry>
       <para>
        Arquivo de registro do Zypper.
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>

  <para>
   Além dos arquivos de registro, a sua máquina também lhe fornece informações sobre o sistema em execução. Consulte a <xref linkend="tab.trouble.system" xrefstyle="select:label title nopage"/>
  </para>

  <table xml:id="tab.trouble.system">
   <title>Informações do sistema no sistema de arquivos <filename>/proc</filename></title>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>
       <para>
        Arquivo
       </para>
      </entry>
      <entry>
       <para>
        Descrição
       </para>
      </entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>
       <para>
        <filename>/proc/cpuinfo</filename>
       </para>
      </entry>
      <entry>
       <para>
        Contém informações do processador, incluindo o seu tipo, marca, modelo e desempenho.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/dma</filename>
       </para>
      </entry>
      <entry>
       <para>
        Mostra quais canais DMA estão sendo usados no momento.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/interrupts</filename>
       </para>
      </entry>
      <entry>
       <para>
        Mostra quais interrupções estão em uso e quantas de cada foram usadas.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/iomem</filename>
       </para>
      </entry>
      <entry>
       <para>
        Exibe o status da memória de E/S (entrada/saída).
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/ioports</filename>
       </para>
      </entry>
      <entry>
       <para>
        Mostra quais portas de E/S estão em uso no momento.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/meminfo</filename>
       </para>
      </entry>
      <entry>
       <para>
        Exibe o status da memória.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/modules</filename>
       </para>
      </entry>
      <entry>
       <para>
        Exibe os módulos individuais.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/mounts</filename>
       </para>
      </entry>
      <entry>
       <para>
        Exibe os dispositivos montados no momento.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/partitions</filename>
       </para>
      </entry>
      <entry>
       <para>
        Mostra o particionamento de todos os discos rígidos.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/proc/version</filename>
       </para>
      </entry>
      <entry>
       <para>
        Exibe a versão atual do Linux.
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>

  <para>
   Além do sistema de arquivos <filename>/proc</filename>, o kernel do Linux exporta informações com o módulo <literal>sysfs</literal>, um sistema de arquivos na memória. Esse módulo representa objetos Kernel, seus atributos e relacionamentos. Para obter mais informações sobre o <literal>sysfs</literal>, consulte o contexto de udev no <xref linkend="cha.udev"/>. A <xref linkend="tab.trouble.sysfs" xrefstyle="select:label nopage"/> contém uma visão geral dos diretórios mais comuns em <filename>/sys</filename>.
  </para>

  <table xml:id="tab.trouble.sysfs">
   <title>Informações do sistema no sistema de arquivos <filename>/sys</filename></title>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>
       <para>
        Arquivo
       </para>
      </entry>
      <entry>
       <para>
        Descrição
       </para>
      </entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>
       <para>
        <filename>/sys/block</filename>
       </para>
      </entry>
      <entry>
       <para>
        Contém subdiretórios para cada dispositivo de bloco descoberto no sistema. Geralmente, esses dispositivos são de tipo de disco.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/sys/bus</filename>
       </para>
      </entry>
      <entry>
       <para>
        Contém subdiretórios para cada tipo de barramento físico.
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/sys/class</filename>
       </para>
      </entry>
      <entry>
       <para>
        Contém subdiretórios agrupados como tipos funcionais de dispositivos (como gráficos, de rede, de impressora etc.)
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <filename>/sys/device</filename>
       </para>
      </entry>
      <entry>
       <para>
        Contém a hierarquia global de dispositivos.
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>

  <para>
   O Linux vem com várias ferramentas para monitoramento e análise do sistema. Consulte o <xref linkend="cha.util"/> para obter uma seleção das mais importantes usadas em diagnósticos de sistema.
  </para>

  <para>
   Cada um dos seguintes cenários começa com um cabeçalho que descreve o problema, seguido de um ou dois parágrafos apresentando sugestões para solução, referências disponíveis para consultar soluções mais detalhadas e referências cruzadas para outros cenários relacionados.
  </para>
 </sect1>
 <sect1 xml:id="sec.trouble.install">
  <title>Problemas de instalação</title>

  <para>
   Problemas de instalação são situações que ocorrem quando a máquina falha na instalação. Ela pode falhar inteiramente ou talvez não consiga iniciar o instalador gráfico. Esta seção destaca alguns dos problemas típicos que você pode encontrar e oferece soluções ou correções alternativas possíveis para esses tipos de situações.
  </para>

  <sect2 xml:id="sec.trouble.checkingMedia">
   <title>Verificação de mídia</title><indexterm> <primary>YaST</primary> <secondary>verificação de mídia</secondary></indexterm><indexterm> <primary>DVDs</primary> <secondary>verificando</secondary></indexterm>
   <para>
    Se você tiver qualquer problema ao usar a mídia de instalação do <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>, verifique a integridade da mídia. Inicialize da mídia e escolha <guimenu>Verificar a Mídia de Instalação</guimenu> no menu de boot. No sistema em execução, inicie o YaST e escolha <menuchoice> <guimenu>Software</guimenu> <guimenu>Verificação de Mídia</guimenu> </menuchoice>. Para verificar o meio do <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>, insira-o na unidade e clique em <guimenu>Iniciar Verificação</guimenu> na tela <guimenu>Verificação de Mídia</guimenu> do YaST. Isso pode levar alguns minutos. Se forem detectados erros, não use esta mídia para instalação. Problemas de mídia podem ocorrer com o meio que você mesmo gravou. A gravação de mídia a baixa velocidade (4x) ajuda a evitar problemas.
   </para>
   <figure xml:id="fig.yast2.mediacheck">
    <title>Verificação de mídia</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast2_medaicheck1.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_medaicheck1.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>



  <sect2 xml:id="sec.trouble.install.cdrom">
   <title>Nenhuma unidade de DVD inicializável disponível</title>
   <para>
    Se o seu computador não contém uma unidade de DVD-ROM inicializável ou se a que você tem não é suportada pelo Linux, há várias opções para instalar sua máquina sem uma unidade de DVD interna:
   </para>
   <variablelist>
    <varlistentry>
     <term>Usando um dispositivo de inicialização externo</term>
     <listitem>
      <para>
       Se for suportado pelo BIOS e pelo kernel de instalação, inicialize pelas unidades de DVD externas ou dispositivos de armazenamento USB. Consulte a <xref linkend="sec.i.yast2.start.x86_64"/> para obter instruções de como criar um dispositivo de armazenamento USB inicializável.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Inicialização de rede via PXE</term>
     <listitem>
      <para>
       Se a máquina não tiver uma unidade de DVD, mas oferecer uma conexão Ethernet ativa, execute a instalação completamente baseada em rede. <phrase os="sles;sled">Consulte a <xref linkend="sec.deployment.remoteinst.scenario.vncpxe"/> e a <xref linkend="sec.deployment.remoteinst.scenario.sshpxe"/> para obter detalhes.</phrase>
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <sect3 xml:id="sec.trouble.install.cdrom.ext">
    <title>Dispositivos de inicialização externos</title>
    <para>
     O Linux suporta a maioria das unidades de DVD existentes. Mesmo que o sistema não tenha uma unidade de DVD, ainda será possível usar uma unidade de DVD externa, conectada por USB, FireWire ou SCSI, para inicializar o sistema. Isso depende principalmente da interação entre o BIOS e o hardware usado. Algumas vezes uma atualização do BIOS pode ajudar se você tiver problemas.
    </para>
    <para>
     Ao instalar de um Live CD, também é possível criar um <quote>disco flash Live </quote> do qual inicializar.
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="sec.trouble.install.BIOS">
   <title>Falha na inicialização da mídia de instalação</title><indexterm> <primary>DVDs</primary> <secondary>inicializando por</secondary></indexterm><indexterm> <primary>inicializando</primary> <secondary>DVDs, por</secondary></indexterm>
   <para>
    Um motivo possível para a máquina não inicializar a mídia de instalação é uma configuração incorreta de sequência de boot no BIOS. A sequência de boot do BIOS deve ter uma unidade de DVD definida como a primeira entrada de boot. De outra forma, a máquina tentaria inicializar de outro meio, normalmente o disco rígido. Você encontra instruções de como mudar a sequência de boot do BIOS na documentação que acompanha sua placa-mãe, ou nos parágrafos a seguir.
   </para>
   <para>
    O BIOS é o software que habilita as funções mais básicas de um computador. Fabricantes de placas-mãe fornecem um BIOS especificamente fabricado para o hardware. Normalmente, a configuração do BIOS só pode ser acessada em um momento específico: quando a máquina está inicializando. Durante a fase de inicialização, a máquina executa vários testes de diagnóstico de hardware. Um deles é uma verificação de memória, indicado por um contador de memória. Quando o contador aparecer, procure uma linha, geralmente abaixo dele ou em algum local na parte inferior, mencionando a tecla a ser pressionada para acessar a configuração do BIOS. Geralmente, a tecla a ser pressionada é <keycap function="delete"/>, <keycap>F1</keycap> ou <keycap function="escape"/>. Pressione esta tecla até que a tela de configuração do BIOS seja exibida.
   </para>
   <procedure xml:id="proc.trouble.install.bios">
    <title>Mudando a sequência de inicialização do BIOS</title>
    <step>
     <para>
      Digite o BIOS usando a tecla apropriada conforme anunciada pelas rotinas de inicialização e espere até que a tela do BIOS seja exibida.
     </para>
    </step>
    <step>
     <para>
      Para mudar a sequência de inicialização em um AWARD BIOS, procure a entrada <guimenu>BIOS FEATURES SETUP</guimenu>. Outros fabricantes talvez tenham um nome diferente para isso, como <guimenu>ADVANCED CMOS SETUP</guimenu>. Quando encontrar a entrada, selecione-a e confirme com <keycap function="enter"/>.
     </para>
    </step>
    <step>
     <para>
      Na tela exibida, procure uma subentrada denominada <guimenu>BOOT SEQUENCE</guimenu> ou <guimenu>BOOT ORDER</guimenu>. Modifique as configurações pressionando <keycap function="pageup"/> ou <keycap function="pagedown"/> até a unidade de DVD aparecer primeiro na lista.
     </para>
    </step>
    <step>
     <para>
      Saia da tela de configuração do BIOS pressionando <keycap function="escape"/>. Para gravar as mudanças, selecione <guimenu>SAVE &amp; EXIT SETUP</guimenu> ou pressione <keycap>F10</keycap>. Para confirmar que as configurações devem ser gravadas, pressione <keycap>Y</keycap>.
     </para>
    </step>
   </procedure>
   <procedure>
    <title>Mudando a sequência de boot em um SCSI BIOS (adaptador de host Adaptec)</title>
    <step>
     <para>
      Abra a configuração pressionando <keycombo><keycap function="control"/><keycap>A</keycap> </keycombo>.
     </para>
    </step>
    <step>
     <para>
      Selecione <guimenu>Utilitários de Disco</guimenu>. Os componentes de hardware conectados agora são exibidos.
     </para>
     <para>
      Anote o ID do SCSI da sua unidade de DVD.
     </para>
    </step>
    <step>
     <para>
      Saia do menu com <keycap function="escape"/>.
     </para>
    </step>
    <step>
     <para>
      Abra <guimenu>Definir Configurações do Adaptador</guimenu>. Em <guimenu>Opções Adicionais</guimenu>, selecione <guimenu>Opções do Dispositivo de Inicialização</guimenu> e pressione <keycap function="enter"/>.
     </para>
    </step>
    <step>
     <para>
      Digite o ID da unidade de DVD e pressione <keycap function="enter"/> novamente.
     </para>
    </step>
    <step>
     <para>
      Pressione <keycap function="escape"/> duas vezes para retornar à tela de inicialização do BIOS do SCSI.
     </para>
    </step>
    <step>
     <para>
      Saia dessa tela e confirme com <guimenu>Sim</guimenu> para inicializar o computador.
     </para>
    </step>
   </procedure>
   <para>
    Independentemente do idioma e do layout do teclado que a instalação final usará, a maioria das configurações de BIOS usa o layout de teclado dos EUA, conforme mostrado na figura a seguir: <indexterm><primary>Layout do teclado dos EUA</primary></indexterm>
   </para>
   <figure xml:id="fig.trouble.install.keyboard_us">
    <title>Layout do teclado dos EUA</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="keyboard_us.svg" width="75%" format="SVG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="keyboard_us.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="sec.trouble.install.noboot">
   <title>Falha na inicialização</title>
   <para>
    Alguns tipos de hardware, principalmente os muito antigos ou muito recentes, falham na instalação. Geralmente, isso pode ocorrer devido à ausência de suporte para esse tipo de hardware no kernel de instalação ou devido a alguma funcionalidade incluída no kernel, como a ACPI, que ainda causa problemas em alguns hardwares.
   </para>
   <para>
    Se o seu sistema falhar na instalação usando o modo de <guimenu>instalação</guimenu> padrão da primeira tela de boot da instalação, tente o seguinte:
   </para>
   <procedure>
    <step>
     <para>
      Com o DVD ainda na unidade, reinicialize a máquina com <keycombo action="press"> <keycap function="control"/><keycap function="alt"/> <keycap function="delete"/></keycombo> ou usando o botão de reinicialização do hardware.
     </para>
    </step>
    <step>
     <para>
      Quando a tela de boot for exibida, pressione <keycap>F5</keycap>, use as teclas de seta do teclado para navegar até <guimenu>Sem ACPI</guimenu> e pressione <keycap function="enter"/> para iniciar o processo de boot e instalação. Essa opção desabilita o suporte para as técnicas de gerenciamento de energia da ACPI.
     </para>
    </step>
    <step>
     <para>
      Prossiga com a instalação conforme descrito no <xref linkend="cha.inst"/>.
     </para>
    </step>
   </procedure>
   <para>
    Se isso falhar, proceda como acima, mas escolha <guimenu>Configurações Seguras</guimenu>. Essa opção desabilita o suporte de ACPI e DMA. A maioria dos hardwares inicializará com essa opção.
   </para>
   <para>
    Se ambas as opções falharem, use o prompt das opções de boot para transmitir quaisquer parâmetros adicionais necessários para suportar esse tipo de hardware no kernel de instalação. Para obter mais informações sobre os parâmetros disponíveis como opções de boot, consulte a documentação do kernel localizada em <filename>/usr/src/linux/Documentation/kernel-parameters.txt</filename>.
   </para>
   <tip>
    <title>obtendo documentação do kernel</title>
    <para>
     Instale o pacote <systemitem class="systemname">kernel-source</systemitem> para exibir a documentação do kernel.
    </para>
   </tip>
   <para>
    Há vários outros parâmetros de kernel relacionados à ACPI que podem ser digitados no prompt de inicialização antes da inicialização para a instalação:
   </para>
   <variablelist>
    <varlistentry>
     <term><systemitem>acpi=off</systemitem>
     </term>
     <listitem>
      <para>
       Esse parâmetro desabilita o subsistema completo da ACPI no seu computador. Isso poderá ser útil se o computador não puder lidar com a ACPI ou se você achar que a ACPI no computador causa problemas.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>acpi=force</systemitem>
     </term>
     <listitem>
      <para>
       Sempre habilite a ACPI mesmo que o computador tenha um BIOS antigo anterior ao ano 2000. Esse parâmetro também habilitará a ACPI se ele estiver definido além de <systemitem>acpi=off</systemitem>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>acpi=noirq</systemitem>
     </term>
     <listitem>
      <para>
       Não use a ACPI para roteamento de IRQ.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>acpi=ht</systemitem>
     </term>
     <listitem>
      <para>
       Execute somente ACPI o suficiente para habilitar hyper-threading.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>acpi=strict</systemitem>
     </term>
     <listitem>
      <para>
       Tenha menos tolerância com plataformas que não sejam estritamente compatíveis com a especificação ACPI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>pci=noacpi</systemitem>
     </term>
     <listitem>
      <para>
       Desabilita o roteamento de IRQ de PCI do novo sistema da ACPI.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>pnpacpi=off</systemitem>
     </term>
     <listitem>
      <para>
       Essa opção serve para problemas de porta serial ou paralela quando a configuração do BIOS contiver interrupções ou portas incorretas.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>notsc</systemitem>
     </term>
     <listitem>
      <para>
       Desabilita o contador da marcação de horário. Essa opção pode ser usada para solucionar problemas de tempo nos seus sistemas. Trata-se de um recurso recente, por isso, se você perceber regressões na sua máquina, especialmente relativas a horário ou mesmo um travamento total, vale a pena tentar essa opção.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>nohz=off</systemitem>
     </term>
     <listitem>
      <para>
       Desabilita o recurso nohz. Se a sua máquina trava, essa opção pode ajudar. Do contrário, ela não tem utilidade.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Após determinar a combinação correta de parâmetros, o YaST os grava automaticamente na configuração do carregador de boot para verificar se o sistema inicializará de forma correta na próxima vez.
   </para>
   <para>
    Se erros inexplicáveis ocorrerem quando o kernel estiver carregado ou durante a instalação, selecione <guimenu>Teste de Memória</guimenu> no menu de inicialização para verificar a memória. Se <guimenu>Teste de Memória</guimenu> retornar um erro, geralmente será um erro de hardware.
   </para>
  </sect2>

  <sect2 xml:id="sec.trouble.install.graph">
   <title>Falha na inicialização do instalador gráfico</title>
   <para>
    Depois que você insere o meio na unidade e reinicializa a máquina, a tela de instalação é exibida, mas depois que a opção <guimenu>Instalação</guimenu> é selecionada, o instalador gráfico não inicializa.
   </para>
   <para>
    Há várias maneiras de lidar com essa situação:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Tente selecionar outra resolução de tela para as caixas de diálogo de instalação.
     </para>
    </listitem>
    <listitem>
     <para>
      Selecione <guimenu>Modo de Texto</guimenu> para a instalação.
     </para>
    </listitem>
    <listitem>
     <para>
      Faça uma instalação remota através de VNC usando o instalador gráfico.
     </para>
    </listitem>
   </itemizedlist>
   <procedure xml:id="proc.trouble.install.graph">
    <title>Mudar a resolução de tela para instalação</title>
    <step>
     <para>
      Inicialize para a instalação.
     </para>
    </step>
    <step>
     <para>
      Pressione <keycap>F3</keycap> para abrir um menu do qual selecionar uma resolução mais baixa para fins de instalação.
     </para>
    </step>
    <step>
     <para>
      Selecione <guimenu>Instalação</guimenu> e prossiga com a instalação conforme descrito no <xref linkend="cha.inst"/>.
     </para>
    </step>
   </procedure>
   <procedure xml:id="proc.trouble.install.text">
    <title>Instalação em modo de texto</title>
    <step>
     <para>
      Inicialize para a instalação.
     </para>
    </step>
    <step>
     <para>
      Pressione <keycap>F3</keycap> e selecione <guimenu>Modo de Texto</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Selecione <guimenu>Instalação</guimenu> e prossiga com a instalação conforme descrito no <xref linkend="cha.inst"/>.
     </para>
    </step>
   </procedure>
   <procedure xml:id="proc.trouble.install.vnc">
    <title>Instalação VNC</title>
    <step>
     <para>
      Inicialize para a instalação.
     </para>
    </step>
    <step>
     <para>
      Insira o texto a seguir no prompt de opções de boot:
     </para>
<screen>vnc=1 vncpassword=<replaceable>some_password</replaceable></screen>
     <para>
      Substitua <replaceable>senha</replaceable> pela senha a ser usada para a instalação do VNC.
     </para>
    </step>
    <step>
     <para>
      Selecione <guimenu>Instalação</guimenu> e pressione <keycap function="enter"/> para iniciar a instalação.
     </para>
     <para>
      Em vez de iniciar com a rotina de instalação gráfica, o sistema continua em execução no modo de texto, depois trava, exibindo uma mensagem que contém o endereço IP e o número de porta com que o instalador pode ser acessado por uma interface de browser ou um aplicativo viewer do VNC.
     </para>
    </step>
    <step>
     <para>
      Se você usa um browser para acessar o instalador, inicie o browser e digite as informações de endereço fornecidas pelas rotinas de instalação na futura máquina do <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> e pressione <keycap function="enter"/>:
     </para>
<screen>http://<replaceable>ip_address_of_machine</replaceable>:5801</screen>
     <para>
      Uma caixa de diálogo é aberta na janela do browser solicitando a senha VNC. Insira-a e continue com a instalação conforme descrito no <xref linkend="cha.inst"/>.
     </para>
     <important>
      <title>Suporte a vÃ¡rias plataformas</title>
      <para>
       A instalação através de VNC funciona com qualquer navegador em qualquer sistema operacional, desde que o suporte Java esteja habilitado.
      </para>
     </important>
     <para>
      Forneça o endereço IP e a senha do seu viewer do VNC quando solicitado. Uma janela é aberta, exibindo as caixas de diálogo de instalação. Prossiga com a instalação como de costume.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.trouble.install.mini">
   <title>Apenas a tela de boot simples é aberta</title>
   <para>
    Você inseriu o meio na unidade, as rotinas do BIOS foram encerradas, mas o sistema não inicia com a tela de boot gráfica. Em vez disso, ele inicia uma interface baseada em texto bastante simples. Isso pode acontecer em qualquer máquina que não forneça memória gráfica suficiente para renderizar uma tela de boot gráfica.
   </para>
   <para>
    Embora a tela de boot de texto tenha aparência simples, ela fornece praticamente a mesma funcionalidade que a gráfica:
   </para>
   <variablelist>
    <varlistentry>
     <term>Opções de Boot</term>
     <listitem>
      <para>
       Diferentemente da interface gráfica, as diversas opções de boot não podem ser selecionadas usando as teclas de cursor do teclado. O menu de inicialização da tela de boot em modo de texto oferece algumas palavras-chave no prompt de inicialização. Essas palavras-chave são mapeadas para as opções oferecidas na versão gráfica. Insira a sua opção e pressione <keycap function="enter"/> para iniciar o processo de boot.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Opções de Boot Personalizadas</term>
     <listitem>
      <para>
       Após selecionar uma opção de boot, insira a palavra-chave apropriada no prompt de boot ou insira algumas opções de boot personalizadas conforme descrito na <xref linkend="sec.trouble.install.noboot"/>. Para iniciar o processo de instalação, pressione <keycap function="enter"/>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Resoluções de tela</term>
     <listitem>
      <para>
       Use as teclas F para determinar a resolução de tela para a instalação. Se você precisa inicializar no modo de texto, escolha <keycap>F3</keycap>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>
  <sect2 xml:id="sec.trouble.install.log">
   <title>Arquivos de Registro</title>
   <para>
    Para obter mais informações sobre os arquivos de registro que são criados durante a instalação, consulte a <xref linkend="sec.admsupport.install"/>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec.trouble.boot">
  <title>Problemas de boot</title>

  <para>
   Problemas de boot são situações em que o sistema não é inicializado apropriadamente (não é inicializado no destino e na tela de login esperados).
  </para>

  <sect2 xml:id="sec.trouble.boot.nogrub">
   <title>Falha ao carregar o carregador de boot GRUB 2</title>
   <para>
    Se o hardware estiver funcionando de forma adequada, é possível que o carregador de boot esteja corrompido e que o Linux não possa ser iniciado na máquina. Neste caso, é necessário consertar o carregador de boot. Para isso, é necessário iniciar o Sistema de Recuperação conforme descrito na <xref linkend="sec.trouble.data.recover.rescue"/> e seguir as instruções na <xref linkend="sec.trouble.data.recover.rescue.grub"/>.
   </para>
   <para>
    Outros motivos para a máquina não inicializar podem estar relacionadas ao BIOS:
   </para>
   <variablelist>
    <varlistentry>
     <term>Configurações do BIOS</term>
     <listitem>
      <para>
       Verifique o BIOS para obter referências sobre o disco rígido. O GRUB 2 pode não ser iniciado simplesmente porque o próprio disco rígido não foi encontrado com as configurações atuais do BIOS.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Ordem de inicialização do BIOS</term>
     <listitem>
      <para>
       Verifique se a ordem de inicialização do sistema inclui o disco rígido. Se a opção do disco rígido não tiver sido habilitada, o sistema talvez seja instalado de forma adequada, mas não seja inicializado quando o acesso ao disco rígido for necessário.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="sec.trouble.boot.hang" os="sled;osuse">
   <title>Não é exibido nenhum prompt nem tela de login</title>
   <para>
    Isso costuma ocorrer após uma falha de atualização do kernel e é conhecido como <emphasis>pânico do kernel</emphasis> devido ao tipo de erro do console do sistema que às vezes se verifica no estágio final do processo. Se a máquina realmente tiver sido reinicializada após uma atualização de software, o objetivo imediato é reinicializá-la usando a versão antiga e segura do kernel do Linux e os arquivos associados. Isso pode ser feito na tela do carregador de boot GRUB 2 durante o processo de boot da seguinte forma:
   </para>
   <procedure>
    <step>
     <para>
      Reinicialize o computador usando o botão de reinicialização ou desligue-o e ligue-o novamente.
     </para>
    </step>
    <step>
     <para>
      Quando a tela de boot do GRUB 2 for exibida, selecione a entrada <guimenu>Opções Avançadas</guimenu> e escolha o kernel anterior no menu. A máquina será inicializada com a versão anterior do kernel e seus arquivos associados.
     </para>
    </step>
    <step xml:id="st.trouble.boot.hang.modify_grub">
     <para>
      Após a conclusão do processo de boot, remova o kernel recém-instalado e, se necessário, defina a entrada de boot padrão como o kernel antigo usando o módulo <guimenu>Carregador de Boot</guimenu> do YaST. Para obter mais informações, consulte o <xref linkend="sec.grub2.yast2.config"/>. No entanto, isso talvez não seja necessário porque as ferramentas automatizadas de atualização normalmente o modificam durante o processo de rollback.
     </para>
    </step>
    <step>
     <para>
      Reinicializar.
     </para>
    </step>
   </procedure>
   <para>
    Se isso não resolver o problema, inicialize o computador usando a mídia de instalação. Após a inicialização da máquina, prossiga com o <xref linkend="st.trouble.boot.hang.modify_grub" xrefstyle="StepOnPage"/>.
   </para>
  </sect2>

  <sect2 xml:id="sec.trouble.boot.prompt">
   <title>Não há login gráfico</title>
   <para>
    Se a máquina ligar, mas não for inicializada no gerenciador de login gráfico, evite problemas com a opção de destino do systemd padrão ou com a configuração do X Window System. Para verificar o destino padrão atual do systemd, execute o comando <command>sudo systemctl get-default</command>. Se o valor retornado <emphasis>não</emphasis> for <literal>graphical.target</literal>, execute o comando <command>sudo systemctl isolate graphical.target</command>. Se a tela gráfica de login for iniciada, efetue login e inicie o <menuchoice> <guimenu>YaST</guimenu> <guimenu>Sistema</guimenu> <guimenu>Services Manager</guimenu></menuchoice> (Gerenciador de Serviços) e defina o <guimenu>Default System Target</guimenu> (Destino do Sistema Padrão) como <guimenu>Graphical Interface</guimenu> (Interface Gráfica). De agora em diante, o sistema deverá ser inicializado na tela gráfica de login.
   </para>
   <para>
    Se a tela gráfica de login não for iniciada mesmo depois de ter sido inicializada ou alternada para o destino gráfico, a área de trabalho ou o software do X Window provavelmente foi mal configurado ou estava corrompido. Examine os arquivos de registro em <filename>/var/log/Xorg.*.log</filename> para obter mensagens detalhadas do servidor X enquanto ele tenta iniciar. Se a área de trabalho falhar durante a inicialização, talvez ela registre mensagens de erro no diário do sistema que possam ser consultadas com o comando <command>journalctl</command> (consulte o <xref linkend="cha.journalctl"/> para obter mais informações). Se essas mensagens de erro sugerirem um problema de configuração no servidor X, tente corrigi-lo. Se o sistema gráfico ainda não aparecer, reinstale a área de trabalho gráfica.
   </para>

  </sect2>

  <sect2 xml:id="sec.trouble.boot.btrfs">
   <title>Não é possível montar a partição Btrfs raiz</title>
   <para>
    Se uma partição <systemitem class="filesystem">btrfs</systemitem> raiz for corrompida, tente as seguintes opções:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Monte a partição com a opção <option>-o recovery</option>.
     </para>
    </listitem>
    <listitem>
     <remark>toms 2014-03-12: According to FATE#315126: "this one is open to debate, it might do more harm than good.."</remark>
     <para>
      Se isso não funcionar, execute <command>btrfs-zero-log</command> na partição raiz.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec.trouble.boot.forcecheck">
   <title>Forçar verificação de partições raiz</title>
   <remark>toms 2016-05-18: FATE#320126</remark>
   <para>
    Se a partição raiz for danificada, use o parâmetro
    <parameter>forcefsck</parameter> no prompt de boot. Esse procedimento passa a opção <option>-f</option> (forçar) para o comando <command>fsck</command>.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.trouble.login">
  <title>Problemas de login</title>

  <para>
   Problemas de login são aqueles em que sua máquina, de fato, é inicializada na tela de boas-vindas ou no prompt de login esperados, mas se recusa a aceitar o nome de usuário e a senha ou os aceita mas não se comporta apropriadamente (não inicia a área de trabalho gráfica, produz erros, passa para uma linha de comando, etc.).
  </para>

  <sect2 xml:id="sec.trouble.login.no">
   <title>Falha nas combinações de nome de usuário e senha válidas</title>
   <para>
    Isso geralmente ocorre quando o sistema está configurado para usar autenticação de rede ou serviços de diretório e, por algum motivo, não pode recuperar os resultados de seus servidores configurados. O usuário <systemitem class="username">root</systemitem>, como o único usuário local, é o único que ainda pode efetuar login nessas máquinas. Veja a seguir alguns motivos comuns para uma máquina parecer funcional, mas não conseguir processar logins corretamente:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      A rede não está funcionando. Para obter mais instruções sobre isso, consulte a <xref linkend="sec.trouble.netconfig"/>.
     </para>
    </listitem>
    <listitem>
     <para>
      O DNS não está funcionando no momento (o que impede o GNOME de trabalhar e o sistema de efetuar solicitações válidas a servidores seguros). Uma indicação de que esse é o caso é que a máquina leva muito tempo para responder a qualquer ação. Há mais informações a respeito desse tópico na <xref linkend="sec.trouble.netconfig"/>.
     </para>
    </listitem>
    <listitem>
     <para>
      Se o sistema estiver configurado para usar Kerberos, o horário local do sistema poderá ter ultrapassado a variação aceita com o horário do servidor Kerberos (geralmente 300 segundos). Se o NTP (protocolo de horário de rede) não estiver funcionando de forma adequada ou os servidores NTP locais não estiverem funcionando, a autenticação do Kerberos não funcionará pois depende da sincronização comum do relógio na rede.
     </para>
    </listitem>
    <listitem>
     <para>
      A configuração de autenticação do sistema está definida incorretamente. Verifique se há erros de digitação ou ordem incorreta de diretivas nos arquivos de configuração PAM envolvidos. Para obter informações adicionais sobre o PAM e a sintaxe dos arquivos de configuração envolvidos, consulte o <xref linkend="cha.pam"/>.
     </para>
    </listitem>
    <listitem>
     <para>
      A partição pessoal está criptografada. Há mais informações a respeito desse tópico na <xref linkend="sec.trouble.login.encrypted"/>.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Em todos os casos que não envolvem problemas de rede externos, a solução é reinicializar o sistema em um modo de usuário único e reparar a configuração antes de inicializar novamente no modo de operação e tentar efetuar login novamente. Para inicializar no modo de usuário único:
   </para>
   <procedure xml:id="proc.trouble.login.no">
    <step>
     <para>
      Reinicialize o sistema. A tela de boot é exibida e apresenta um prompt.
     </para>
    </step>

    <step>
     <para>
      Pressione <keycap function="escape"/> para sair da splash screen e entrar no menu baseado em texto do GRUB 2.
     </para>
    </step>
    <step>
     <para>
      Pressione <keycap>B</keycap> para entrar no editor do GRUB 2.
     </para>
    </step>
    <step>
     <para>
      Adicione o seguinte parâmetro à linha com os parâmetros do Kernel:
     </para>
<screen>systemd.unit=rescue.target</screen>
    </step>
    <step>
     <para>
      Pressione <keycap>F10</keycap>.
     </para>
    </step>
    <step>
     <para>
      Digite o nome de usuário e a senha de <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step>
     <para>
      Faça as mudanças necessárias.
     </para>
    </step>
    <step>
     <para>
      Inicialize no modo completo multiusuário e de rede inserindo <command>systemctl isolate graphical.target</command> na linha de comando.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.trouble.login.pw">
   <title>Nome de usuário e senha não aceitos</title>
   <para>
    Esse é o um dos problemas mais comuns que os usuários podem encontrar, pois há vários motivos pelos quais isso pode ocorrer. Dependendo de você usar gerenciamento e autenticação de usuário local ou autenticação em rede, as falhas de login ocorrem por motivos diferentes.
   </para>
   <para>
    O gerenciamento de usuário local pode falhar pelos seguintes motivos:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      O usuário pode ter digitado a senha errada.
     </para>
    </listitem>
    <listitem>
     <para>
      O diretório pessoal do usuário que contém arquivos de configuração da área de trabalho está corrompido ou protegido contra gravação.
     </para>
    </listitem>
    <listitem>
     <para>
      Talvez haja problemas com o sistema X Window ao autenticar esse usuário específico, especialmente se o diretório pessoal do usuário tiver sido usado com outra distribuição do Linux antes da instalação da atual.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Para encontrar o motivo de uma falha de login local, proceda da seguinte maneira:
   </para>
   <procedure>
    <step>
     <para>
      Verifique se o usuário memorizou a senha corretamente antes de começar a depurar todo o mecanismo de autenticação. Se o usuário não se lembrar da senha corretamente, use o módulo Gerenciamento de Usuário do YaST para mudar a senha dele. Fique atento à tecla <keycap>Caps Lock</keycap> e libere-a, se necessário.
     </para>
    </step>
    <step>
     <para>
      Efetue login como <systemitem class="username">root</systemitem> e consulte o diário do sistema com o comando <command>journalctl -e</command> para verificar se há mensagens de erro do processo de login e do PAM.
     </para>
    </step>
    <step>
     <para>
      Tente efetuar login de um console (usando <keycombo> <keycap function="control"/> <keycap function="alt"/> <keycap>F1</keycap> </keycombo>). Se esse procedimento for bem-sucedido, não será responsabilidade do PAM, pois é possível autenticar o usuário nessa máquina. Tente localizar quaisquer problemas com o X Window System ou com a área de trabalho do GNOME. Para obter mais informações, consulte a <xref linkend="sec.trouble.login.dk"/>.
     </para>
    </step>
    <step>
     <para>
      Se o diretório pessoal do usuário foi usado com outra distribuição Linux, remova o arquivo <filename>Xauthority</filename> no diretório do usuário. Use um login de console por meio de <keycombo> <keycap function="control"/> <keycap function="alt"/> <keycap>F1</keycap> </keycombo> e execute <command>rm .Xauthority</command> como esse usuário. Isso deve eliminar problemas de autenticação X para o usuário. Tente o login gráfico novamente.
     </para>
    </step>

    <step>
     <para>
      Se não for possível iniciar a área de trabalho devido a arquivos de configuração corrompidos, continue na <xref linkend="sec.trouble.login.dk"/>.
     </para>
    </step>
   </procedure>
   <para>
    Veja a seguir a lista dos motivos comuns de possível falha na autenticação de rede de um usuário específico em determinada máquina:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      O usuário pode ter digitado a senha errada.
     </para>
    </listitem>
    <listitem>
     <para>
      O nome de usuário existe nos arquivos de autenticação locais da máquina e também são fornecidos por um sistema de autenticação de rede, gerando conflitos.
     </para>
    </listitem>
    <listitem>
     <para>
      O diretório pessoal existe mas está corrompido ou não disponível. Talvez ele esteja protegido contra gravação ou está em um servidor inacessível no momento.
     </para>
    </listitem>
    <listitem>
     <para>
      O usuário não tem permissão para efetuar login neste host específico no sistema de autenticação.
     </para>
    </listitem>
    <listitem>
     <para>
      A máquina mudou os nomes de host, por algum motivo, e o usuário não tem permissão para efetuar login nesse host.
     </para>
    </listitem>
    <listitem>
     <para>
      A máquina não pode acessar o servidor de diretório ou o servidor de autenticação que contém as informações do usuário.
     </para>
    </listitem>
    <listitem>
     <para>
      Talvez haja problemas com o sistema X Window ao autenticar esse usuário específico, especialmente se o diretório pessoal do usuário tiver sido usado com outra distribuição do Linux antes da instalação da atual.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Para localizar a causa das falhas de login com a autenticação de rede, proceda da seguinte maneira:
   </para>
   <procedure xml:id="proc.trouble.login.pw">
    <step>
     <para>
      Verifique se o usuário memorizou a senha corretamente antes de começar a depurar todo o mecanismo de autenticação.
     </para>
    </step>
    <step>
     <para>
      Determine o servidor de diretórios usado pela máquina para autenticação e verifique se ele está funcionando e se comunicando corretamente com as outras máquinas.
     </para>
    </step>
    <step>
     <para>
      Determine se o nome e a senha do usuário funcionam em outras máquinas para verificar se os dados de autenticação existem e são distribuídos apropriadamente.
     </para>
    </step>
    <step>
     <para>
      Verifique se outro usuário pode efetuar login na máquina com comportamento incorreto. Se outro usuário ou o usuário <systemitem class="username">root</systemitem> puder efetuar login sem dificuldade, efetue login e examine o diário do sistema com o comando <command>journalctl -e</command>&gt; arquivo. Localize as marcações de horário que correspondem às tentativas de login e determine se o PAM produziu alguma mensagem de erro.
     </para>
    </step>
    <step>
     <para>
      Tente efetuar login de um console (usando <keycombo> <keycap function="control"/> <keycap function="alt"/> <keycap>F1</keycap> </keycombo>). Se der certo, o problema não é do PAM ou do servidor de diretórios no qual o diretório pessoal do usuário está hospedado, pois é possível autenticar o usuário nessa máquina. Tente localizar quaisquer problemas com o X Window System ou com a área de trabalho do GNOME. Para obter mais informações, consulte a <xref linkend="sec.trouble.login.dk"/>.
     </para>
    </step>
    <step>
     <para>
      Se o diretório pessoal do usuário foi usado com outra distribuição Linux, remova o arquivo <filename>Xauthority</filename> no diretório do usuário. Use um login de console por meio de <keycombo> <keycap function="control"/> <keycap function="alt"/> <keycap>F1</keycap> </keycombo> e execute <command>rm .Xauthority</command> como esse usuário. Isso deve eliminar problemas de autenticação X para o usuário. Tente o login gráfico novamente.
     </para>
    </step>

    <step>
     <para>
      Se não for possível iniciar a área de trabalho devido a arquivos de configuração corrompidos, continue na <xref linkend="sec.trouble.login.dk"/>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.trouble.login.encrypted">
   <title>Falha de login na partição pessoal criptografada</title><indexterm> <primary>criptografia</primary> <secondary>problema de partição pessoal</secondary></indexterm>
   <para>
    Recomenda-se o uso de uma partição pessoal criptografada para laptops. Se você não puder efetuar login no seu laptop, o motivo geralmente é simples: a sua partição pode não estar desbloqueada.
   </para>
   <para>
    Durante a inicialização, é necessário digitar a frase secreta para desbloquear a partição criptografada. Se você não a digitar, o processo de boot continuará, deixando a partição bloqueada.
   </para>
   <para>
    Para desbloquear a partição criptografada, faça o seguinte:
   </para>
   <procedure>
    <step>
     <para>
      Passe para o console de texto com <keycombo> <keycap function="control"/> <keycap function="alt"/> <keycap>F1</keycap> </keycombo>.
     </para>
    </step>
    <step>
     <para>
      Torne-se <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step>
     <para>
      Reinicie o processo de desbloqueio novamente com:
     </para>
<screen>systemctl restart home.mount</screen>
    </step>
    <step>
     <para>
      Digite sua frase secreta para desbloquear a partição criptografada.
     </para>
    </step>
    <step>
     <para>
      Saia do console de texto e volte para a tela de login com <keycombo> <keycap function="alt"/> <keycap>F7</keycap> </keycombo>.
     </para>
    </step>
    <step>
     <para>
      Efetue login como de costume.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.trouble.login.dk">
   <title>Login bem-sucedido, mas há falha na área de trabalho do GNOME</title>
   <para>
    Se esse for o caso, provavelmente os seus arquivos de configuração do GNOME se corromperam. Alguns sintomas podem incluir falha de funcionamento do teclado, a geometria da tela distorcida ou até mesmo a tela exibida como um campo cinza vazio. A distinção importante é que se outro usuário efetuar login, a máquina funcionará normalmente. Provavelmente o problema possa ser corrigido rapidamente com a transferência do diretório de configuração do GNOME do usuário para um novo local, o que faz a área de trabalho do GNOME inicializar um novo. Embora o usuário seja forçado a reconfigurar o GNOME, nenhum dado é perdido.
   </para>
   <procedure xml:id="proc.trouble.login.dk">
    <step>
     <para>
      Alterne para um console de texto pressionando <keycombo> <keycap function="control"/> <keycap function="alt"/> <keycap>F1</keycap> </keycombo>.
     </para>
    </step>
    <step>
     <para>
      Efetue login com o seu nome de usuário.
     </para>
    </step>
    <step>
     <para>
      Mova os diretórios de configuração do GNOME do usuário para um local temporário:
     </para>
<screen>mv .gconf  .gconf-ORIG-RECOVER
mv .gnome2 .gnome2-ORIG-RECOVER</screen>
    </step>
    <step>
     <para>
      Efetue logout.
     </para>
    </step>
    <step>
     <para>
      Efetue login novamente, mas não execute nenhum aplicativo.
     </para>
    </step>
    <step>
     <para>
      Recupere seus dados individuais de configuração de aplicativo (inclusive os dados de cliente de e-mail do Evolution) copiando o diretório <filename>~/gconf-ORIG-RECOVER/apps/</filename> de volta para o novo diretório <filename>~/.gconf</filename> da seguinte maneira:
     </para>
<screen>cp -a .gconf-ORIG-RECOVER/apps .gconf/</screen>
     <para>
      Se isso causar os problemas de login, tente recuperar somente os dados de aplicativo críticos e reconfigure o restante dos aplicativos.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.trouble.netconfig">
  <title>Problemas de rede</title>

  <para>
   Quaisquer problemas do seu sistema podem estar relacionados à rede, mesmo que inicialmente não transmitam essa impressão. Por exemplo, o motivo para um sistema não permitir o login de usuários pode ser algum tipo de problema de rede. Esta seção apresenta uma lista de verificação simples que você pode aplicar para identificar a causa de qualquer problema de rede encontrado.
  </para>

  <procedure xml:id="proc.trouble.config.net">
   <title>Como identificar problemas de rede</title>
   <para>
    Ao verificar a conexão de rede da sua máquina, proceda da seguinte maneira:
   </para>
   <step>
    <para>
     Se você usa uma conexão Ethernet, verifique o hardware primeiro. Verifique se o cabo de rede está acoplado corretamente no computador e no roteador (ou hub etc.). As luzes de controle próximas ao seu conector Ethernet normalmente estão ativas.
    </para>
    <para>
     Se a conexão falhar, verifique se o cabo de rede funciona com outra máquina. Se funcionar, a placa de rede será a causa da falha. Se houver hubs ou switches incluídos na configuração da sua rede, eles também podem estar com defeito.
    </para>
   </step>
   <step>
    <para>
     Se estiver usando uma conexão sem fio, verifique se o link sem fio pode ser estabelecido por outras máquinas. Do contrário, contate o administrador da rede wireless.
    </para>
   </step>
   <step>
    <para>
     Após verificar sua conectividade de rede básica, tente descobrir qual serviço não está respondendo. Reúna as informações de endereço de todos os servidores de rede necessários na configuração. Procure-os no módulo YaST apropriado ou consulte o administrador de sistema. A lista a seguir mostra alguns servidores de rede típicos envolvidos em uma configuração juntamente com os sintomas de uma interrupção.
    </para>
    <variablelist>
     <varlistentry>
      <term>DNS (Serviço de Nomes)</term>
      <listitem>
       <para>
        Um serviço de nomes inoperante ou defeituoso afeta a funcionalidade da rede de várias maneiras. Se a máquina local depender de quaisquer servidores de rede para autenticação e esses servidores não forem encontrados devido a problemas de resolução de nome, os usuários não poderão nem efetuar login. As máquinas na rede gerenciadas por um servidor de nomes com defeito não podem <quote>ver</quote> umas às outras nem se comunicar.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>NTP (Serviço de Horário)</term>
      <listitem>
       <para>
        Um serviço NTP defeituoso ou totalmente inoperante pode afetar a funcionalidade do servidor X e a autenticação Kerberos.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>NFS (Serviço de Arquivos)</term>
      <listitem>
       <para>
        Se qualquer aplicativo precisar de dados armazenados em um diretório NFS montado, ele não poderá ser iniciado nem funcionar apropriadamente se esse serviço estiver inoperante ou mal configurado. No pior cenário possível, a configuração da área de trabalho pessoal de um usuário não será exibida se o seu diretório pessoal que contém o subdiretório <filename>.gconf</filename> não for encontrado por causa de um servidor NFS defeituoso.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Samba (Serviço de Arquivos)</term>
      <listitem>
       <para>
        Se qualquer aplicativo precisar de dados armazenados em um diretório em um servidor Samba defeituoso, ele não poderá ser iniciado nem funcionar apropriadamente.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>NIS (Gerenciamento de Usuário)</term>
      <listitem>
       <para>
        Se o sistema <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> usar um servidor NIS defeituoso para fornecer os dados dos usuários, os usuários não poderão efetuar login na máquina.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>LDAP (Gerenciamento de Usuário)</term>
      <listitem>
       <para>
        Se o sistema <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> usar um servidor LDAP defeituoso para fornecer os dados dos usuários, os usuários não poderão efetuar login na máquina.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Kerberos (Autenticação)</term>
      <listitem>
       <para>
        A autenticação não funcionará e o login em qualquer máquina falhará.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>CUPS (Impressão de Rede)</term>
      <listitem>
       <para>
        Os usuários não conseguem imprimir.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </step>
   <step>
    <para>
     Verifique se os servidores de rede estão em execução e se a configuração de rede permite estabelecer uma conexão:
    </para>
    <important>
     <title>Limitações</title>
     <para>
      O procedimento de depuração descrito abaixo aplica-se somente a uma configuração simples de servidor/cliente de rede que não envolva roteamento interno. Supõe-se que o servidor e o cliente integrem a mesma sub-rede sem necessidade de roteamento adicional.
     </para>
    </important>
    <substeps performance="required">
     <step>
      <para>
       Use <command>ping </command><replaceable>endereço IP</replaceable> ou <replaceable>nome de host</replaceable> (substitua <replaceable>nome de host</replaceable> pelo nome de host do servidor) para verificar se cada um deles está ativo e respondendo à rede. Se esse comando for bem-sucedido, ele informará que o host que você estava procurando está em execução e o serviço de nomes da rede está configurado corretamente.
      </para>
      <para>
       Se o ping falhar com <literal>destination host unreachable</literal>, o seu sistema ou o servidor desejado não está configurado de forma adequada ou está inoperante. Verifique se o sistema pode ser acessado com <command>ping </command><replaceable>endereço IP</replaceable> ou <replaceable>nome_de_host </replaceable> de outra máquina. Se você conseguir acessar a sua máquina de outra máquina, significa que o servidor não está em execução ou não foi configurado corretamente.
      </para>
      <para>
       Se o ping falhar com <literal>unknown host</literal> (host desconhecido), o serviço de nomes não foi configurado corretamente ou o nome de host usado estava incorreto. Para obter mais verificações sobre esse assunto, consulte o <xref linkend="st.trouble.config.net.host" xrefstyle="StepOnPage"/>. Se o ping ainda falhar, significará que a placa de rede não está configurada de forma correta ou o hardware de rede está defeituoso.
      </para>
     </step>
     <step xml:id="st.trouble.config.net.host">
      <para>
       Use <command>host </command><replaceable>nome de host</replaceable> para verificar se o nome de host do servidor ao qual você está tentando se conectar foi apropriadamente convertido em um endereço IP e vice-versa. Se esse comando retornar o endereço IP do host, significará que o serviço de nomes está funcionando. Se houver falha nesse comando <command>host</command>, verifique todos os arquivos de configuração de rede relacionados à resolução de nomes e de endereços no seu host:
      </para>
      <variablelist>
       <varlistentry>
        <term><filename>/etc/resolv.conf</filename>
        </term>
        <listitem>
         <para>
          Este arquivo é usado para controlar o domínio e o servidor de nomes que você está usando no momento. Ele pode ser modificado manualmente ou ajustado automaticamente pelo YaST ou DHCP. O ajuste automático é preferencial. Porém, verifique se o arquivo tem a estrutura a seguir e se todos os endereços de rede e nomes de domínio estão corretos:
         </para>
<screen>search <replaceable>fully_qualified_domain_name</replaceable>
nameserver <replaceable>ipaddress_of_nameserver</replaceable></screen>
         <para>
          Este arquivo pode conter mais de um endereço de servidor de nomes, mas pelo menos um deles deve estar correto para fornecer a resolução de nomes para o seu host. Se necessário, ajuste o arquivo usando o módulo Configurações de Rede do YaST (guia Nome de host/DNS).
         </para>
         <para>
          Se a conexão de rede for gerenciada por DHCP, habilite o DHCP para mudar as informações de serviço de nomes e de nome de host selecionando <guimenu>Trocar Nome de Host via DHCP</guimenu> e <guimenu>Atualizar Servidores de Nomes e Lista de Pesquisa via DHCP</guimenu> no módulo DNS e Nome de Host do YaST.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><filename>/etc/nsswitch.conf</filename>
        </term>
        <listitem>
         <para>
          Este arquivo informa ao Linux onde procurar informações de serviço de nomes. Ele deve ter a seguinte aparência:
         </para>
<screen> ...
hosts: files dns
networks: files dns
...</screen>
         <para>
          A entrada <option>dns</option> é essencial. Ela informa ao Linux para usar um servidor de nomes externo. Normalmente, essas entradas são gerenciadas automaticamente pelo YaST, mas convém verificar.
         </para>
         <para>
          Se todas as entradas relevantes no host estiverem corretas, deixe o seu administrador de sistema verificar a configuração do servidor DNS para obter as informações de zona corretas. Se você verificou se a configuração DNS do seu host e o servidor DNS estão corretos, continue verificando a configuração da rede e do dispositivo de rede.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </step>
     <step>
      <para>
       Se o sistema não puder estabelecer uma conexão a um servidor de redes e você excluiu problemas de serviço de nomes da lista de possíveis responsáveis, verifique a configuração da placa de rede.
      </para>
      <para>
       Use o comando <command>ip addr show </command><replaceable>dispositivo_de_rede</replaceable> para verificar se o dispositivo foi configurado apropriadamente. Verifique se o <option>endereço inet</option> com a máscara de rede (<literal>/<replaceable>máscara</replaceable></literal>) está configurado corretamente. Um erro no endereço IP ou um bit ausente na máscara de rede inutilizam a configuração de rede. Se necessário, execute essa verificação no servidor também.
      </para>
     </step>
     <step>
      <para>
       Se o hardware de rede e o serviço de nomes estiverem configurados de forma adequada e em execução, mas algumas conexões de rede externas ainda tiverem longos tempos de espera ou falharem inteiramente, use <command>traceroute </command><replaceable>nome_completo_do_domínio</replaceable> (executado como <systemitem class="username">root</systemitem>) para controlar a rota de rede tomada pelas solicitações. Esse comando lista qualquer gateway (hop) que uma solicitação da sua máquina transmitir no caminho ao seu destino. Ele lista o tempo de resposta de cada salto e se esse salto é acessível. Use uma combinação de traceroute e ping para identificar o responsável e informar aos administradores.
      </para>
     </step>
    </substeps>
   </step>
  </procedure>

  <para>
   Após identificar a causa do problema de rede, você poderá resolvê-lo (se o problema estiver na sua máquina) ou informar os administradores de sistema da rede sobre suas descobertas para que eles possam reconfigurar os serviços ou reparar os sistemas necessários.
  </para>

  <sect2 xml:id="sec.trouble.networkmanager">
   <title>Problemas no NetworkManager</title>
   <remark>This is a bit small, needs more text.</remark>
   <para>
    Se você tiver problema com a conectividade da rede, restrinja-a conforme descrito no <xref linkend="proc.trouble.config.net"/>. Se tudo indicar que a culpa é do NetworkManager, faça o seguinte para obter os registros com dicas sobre o motivo da falha do NetworkManager:
   </para>
   <procedure>
    <step>
     <para>
      Abra um shell e efetue login como <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step>
     <para>
      Reinicie o NetworkManager:
     </para>
<screen>systemctl restart Network.Manager</screen>
    </step>
    <step>
     <para>
      Abra uma página da Web, por exemplo <link xlink:href="http://www.opensuse.org"/>, como usuário normal para ver se você consegue se conectar.
     </para>
    </step>
    <step>
     <para>
      Colete as informações sobre o estado do NetworkManager em <filename>/var/log/NetworkManager</filename>.
     </para>
    </step>
   </procedure>
   <para>
    Para obter maiores informações sobre o NetworkManager, consulte o <xref linkend="cha.nm"/>.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.trouble.data">
  <title>Problemas de dados</title>

  <para>
   Problemas de dados ocorrem quando a máquina pode ou não inicializar corretamente, mas em ambos os casos, está claro que há dados corrompidos no sistema e que o sistema precisa ser recuperado. Essas situações exigem um backup dos seus dados críticos, permitindo que você recupere o estado anterior à falha do sistema. O <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> oferece módulos do YaST dedicados para backup e restauração do sistema e um sistema de recuperação que pode ser usado para recuperar um sistema corrompido externamente.
  </para>

  <sect2 xml:id="sec.trouble.data.partitions">
   <title>Gerenciando imagens de partição</title>
   <para>
    Às vezes é necessário fazer um backup de uma partição inteira ou até do disco rígido. O Linux possui a ferramenta <command>dd</command>, capaz de criar uma cópia exata do seu disco. Combinada ao <command>gzip</command>, faz você economizar espaço.
   </para>
   <procedure>
    <title>Fazendo backup e restaurando discos rígidos</title>
    <step>
     <para>
      Inicie um Shell como usuário <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step>
     <para>
      Selecione o seu dispositivo de origem. Normalmente, ele assemelha-se a <filename>/dev/sda</filename> (com a etiqueta <replaceable>SOURCE</replaceable>).
     </para>
    </step>
    <step>
     <para>
      Indique onde deseja armazenar sua imagem (com a etiqueta <replaceable>CAMINHO_BACKUP</replaceable>). Esse local deverá ser diferente do dispositivo de origem. Em outras palavras: se você fizer backup de <filename>/dev/sda</filename>, seu arquivo de imagem poderá não ser armazenado em <filename>/dev/sda</filename>.
     </para>
    </step>
    <step>
     <para>
      Execute os comandos para criar um arquivo de imagem compactado:
     </para>
<screen>dd if=/dev/<replaceable>SOURCE</replaceable> | gzip &gt; /<replaceable>BACKUP_PATH</replaceable>/image.gz </screen>
    </step>
    <step>
     <para>
      Recupere o disco rígido usando os seguintes comandos:
     </para>
<screen>gzip -dc /<replaceable>BACKUP_PATH</replaceable>/image.gz | dd of=/dev/<replaceable>SOURCE</replaceable></screen>
    </step>
   </procedure>
   <para>
    Se você precisa fazer backup apenas de uma partição, substitua o marcador <replaceable>ORIGEM</replaceable> pela sua partição. Nesse caso, o seu arquivo de imagem pode usar o mesmo disco rígido, só que em outra partição.
   </para>
  </sect2>





  <xi:include href="system_repair.xml"/>
 </sect1>
 
</chapter>
