<?xml version="1.0"?>
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="apps_ekiga.xml" id="cha.ekiga">
 <title>Ekiga：使用 Voice over IP</title><indexterm id="idx.voip" class="startofrange"><primary>voice over IP</primary></indexterm><indexterm><primary>应用程序</primary><secondary>网络</secondary><tertiary>Ekiga</tertiary></indexterm><indexterm id="idx.ekiga" class="startofrange"><primary>Ekiga</primary></indexterm>
 <abstract>
  <para>
   现代的电信服务不能只局限于满足拨打电话的需要，它还涉及文本消息交换，有时甚至涉及视频会议。漫游功能可以用一个电话号码在全世界范围内找到您。Ekiga 将这些功能引入您的 Linux 桌面，它允许您通过宽带因特网进行通讯。
  </para>
 </abstract>
 <para>
  开始前，请确认已满足以下要求：
 </para>
 <itemizedlist mark="bullet" spacing="normal">
  <listitem>
   <para>
    声卡已正确配置。
   </para>
  </listitem>
  <listitem>
   <para>
    计算机连接有耳机或麦克风和扬声器。
   </para>
  </listitem>
  <listitem>
   <para>
    对于拨号到普通电话网络，需要 SIP 帐户。SIP（<emphasis>因特网电话信号传输协议</emphasis>）是用于建立音频和视频会议或电话转接会话的协议。全球有很多 VoIP 提供商。为了快速入门，您可以访问 <ulink url="http://www.ekiga.net"/> 了解 Ekiga 项目提供的服务。
   </para>
  </listitem>
  <listitem>
   <para>
    对于视频会议，计算机需要连接有网络摄像头。
   </para>
  </listitem>
 </itemizedlist>
 <sect1 id="sec.ekiga.configure">
  <title>配置 Ekiga</title>

  <tip>
   <para>
    如果系统中未安装 Ekiga，请使用 YaST 软件管理模块或以 <systemitem class="username">root</systemitem> 身份在命令行上输入 <command>zypper install ekiga</command> 进行安装。完成安装后，可以单击<menuchoice><guimenu>应用程序</guimenu> <guimenu>因特网</guimenu> <guimenu>Ekiga 软电话</guimenu></menuchoice>运行 Ekiga。
   </para>
  </tip>

  <para>
   首次启动时，Ekiga 会打开配置助手，它要求输入配置 Ekiga 所需的全部数据。按如下所示继续：
  </para>

  <procedure>
   <step performance="required">
    <para>
     输入您的全名（名字及姓氏）。
    </para>
   </step>
   <step performance="required">
    <para>
     输入 <literal>ekiga.net</literal> 帐户数据或选择不在 <ulink url="http://www.ekiga.net"/> 上注册。
    </para>
    <para>
     要稍后添加其他帐户，使用<menuchoice><guimenu>编辑</guimenu><guimenu>帐户</guimenu></menuchoice>对它们进行配置。
    </para>
   </step>
   <step performance="required">
    <para>
     输入您的 <literal>Ekiga 呼叫帐户</literal>数据或选择不在 <ulink url="http://www.ekiga.net"/> 上注册。
    </para>
   </step>
   <step performance="required">
    <para>
     确定您的连接类型。
    </para>
   </step>

   <step performance="required">
    <para>
     选择音频铃声、输出和输入设备驱动程序。<guimenu>ALSA</guimenu> 是确保最佳音质的安全默认选项。在 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 上也可使用其他声音系统，如 OSS。
    </para>
    <para>
     默认情况下，未设置任何响铃设备。如果要使用铃声，请将其更改为某个可用的音频设备。
    </para>
   </step>
   <step performance="required">
    <para>
     选择视频输入设备（如果有）。
    </para>
   </step>
   <step performance="required">
    <para>
     检查设置的摘要并应用它们。
    </para>
   </step>
   <step performance="required">
    <para>
     如果在对配置进行更改后注册失败，请重启动 Ekiga。
    </para>
   </step>
  </procedure>

  <para>
   Ekiga 允许您维护多个帐户。要配置其他帐户，请执行以下操作：
  </para>

  <procedure>
   <step performance="required">
    <para>
     打开<menuchoice> <guimenu>编辑</guimenu> <guimenu>帐户</guimenu></menuchoice>。
    </para>
   </step>
   <step performance="required">
    <para>
     选择<menuchoice><guimenu>帐户</guimenu> <guimenu>添加 &lt;帐户类型&gt;</guimenu></menuchoice>。如果不确定，请选择<guimenu>添加 SIP 帐户</guimenu>。
    </para>
   </step>
   <step performance="required">
    <para>
     输入要注册的<guimenu>注册器</guimenu>。这通常是您因特网电话服务提供商为您提供的 IP 地址或主机名。根据提供商提供给您的数据，输入<guimenu>用户</guimenu>和<guimenu>密码</guimenu>。
    </para>
   </step>
   <step performance="required">
    <para>
     选择<guimenu>确定</guimenu>保留配置对话框，并激活帐户。显示在 Ekiga 主窗口中的帐户状态更改为<guimenu>已注册</guimenu>。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 id="sec.ekiga.ui">
  <title>Ekiga 用户界面</title>

  <para>
   Ekiga 用户界面上有若干可用选项卡。第一个选项卡是<guimenu>联系人</guimenu>，第二个选项卡是<guimenu>拨号面板</guimenu>，最后一个选项卡是<guimenu>呼叫历史</guimenu>。此外，还有一个可用选项卡<guimenu>呼叫面板</guimenu>，用于显示本地或远程网络摄像头的图片和视频。
  </para>

  <figure id="fig.ekiga.main">
   <title>Ekiga 用户界面</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="ekiga_main.png" width="55%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="ekiga_main.png" width="55%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   用户界面中有不同的方式。要在视图之间进行切换，请使用制表线。默认情况下，Ekiga 会打开<guimenu>联系人</guimenu>选项卡。您可使用其中的本地通讯录快速打开指向常用成员的连接。要获取具有网络摄像头支持和音频控制的完整视图，请使用<menuchoice><guimenu>视图</guimenu> <guimenu>显示呼叫面板</guimenu></menuchoice>激活<guimenu>呼叫面板</guimenu>。
  </para>

  <para>
   在<guimenu>呼叫面板</guimenu>底部，有若干控制图标，如<guimenu>音频设置</guimenu>、<guimenu>视频设置</guimenu>、<guimenu>视频显示</guimenu>和<guimenu>呼叫等待</guimenu>。所有图标均提供工具提示，将鼠标指针悬停在图标上可显示相应工具提示。有些设置（如<guimenu>音频</guimenu>设置）可能仅在通话期间可以更改。
  </para>

  <para>
   Ekiga 的许多功能都可通过组合键使用。<xref linkend="tab.ekiga.shortcut"/>概述了最重要的一些快捷方式。
  </para>

  <table id="tab.ekiga.shortcut">
   <title>Ekiga 的组合键</title>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>
       <para>
        组合键
       </para>
      </entry>
      <entry>
       <para>
        描述
       </para>
      </entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>
       <para>
        <keycombo> <keycap function="control"/> <keycap>O</keycap> </keycombo>
       </para>
      </entry>
      <entry>
       <para>
        用当前号码打电话。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycap function="escape"/>
       </para>
      </entry>
      <entry>
       <para>
        挂起。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycombo><keycap function="control"/><keycap>N</keycap></keycombo>
       </para>
      </entry>
      <entry>
       <para>
        向通讯录添加联系人。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycombo><keycap function="control"/><keycap>B</keycap></keycombo>
       </para>
      </entry>
      <entry>
       <para>
        打开<guimenu>通讯录</guimenu>对话框。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycap>H</keycap>
       </para>
      </entry>
      <entry>
       <para>
        保留当前通话。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycap>T</keycap>
       </para>
      </entry>
      <entry>
       <para>
        将当前电话传送给对方。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycap>M</keycap>
       </para>
      </entry>
      <entry>
       <para>
        暂挂当前呼叫的音频流。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycap>P</keycap>
       </para>
      </entry>
      <entry>
       <para>
        暂挂当前呼叫的视频流。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycombo><keycap function="control"/><keycap>W</keycap></keycombo>
       </para>
      </entry>
      <entry>
       <para>
        关闭 Ekiga 用户界面。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycombo><keycap function="control"/><keycap>Q</keycap></keycombo>
       </para>
      </entry>
      <entry>
       <para>
        退出 Ekiga。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycombo><keycap function="control"/><keycap>E</keycap></keycombo>
       </para>
      </entry>
      <entry>
       <para>
        启动帐户管理器。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycombo> <keycap function="control"/> <keycap>J</keycap> </keycombo>
       </para>
      </entry>
      <entry>
       <para>
        激活主用户界面上的<guimenu>呼叫面板</guimenu>。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycombo><keycap function="control"/><keycap>+</keycap></keycombo>
       </para>
      </entry>
      <entry>
       <para>
        放大来自 Web 摄像头的图片。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycombo><keycap function="control"/><keycap>-</keycap></keycombo>
       </para>
      </entry>
      <entry>
       <para>
        缩小来自 Web 摄像头的图片。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycombo><keycap function="control"/><keycap>0</keycap></keycombo>
       </para>
      </entry>
      <entry>
       <para>
        返回 Web 摄像头显示的正常尺寸。
       </para>
      </entry>
     </row>
     <row>
      <entry>
       <para>
        <keycap>F11</keycap>
       </para>
      </entry>
      <entry>
       <para>
        使用 Web 摄像头的全屏视图。
       </para>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>
 </sect1>
 <sect1 id="sec.ekiga.firstcall">
  <title>致电</title><indexterm><primary>Ekiga</primary><secondary>呼叫</secondary></indexterm>

  <para>
   正确配置 Ekiga 后，打电话就变得十分容易。
  </para>

  <procedure>
   <step performance="required">
    <para>
     使用菜单或命令行启动 Ekiga。
    </para>
   </step>
   <step performance="required">
    <para>
     在 <guimenu>SIP 地址</guimenu>提示处输入要呼叫方的 SIP 地址。地址应类似如下所示：
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       对于直接本地呼叫：<literal>sip:username@domainname</literal> 或 <literal>username@hostname</literal>
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>sip:username@domainname</literal> 或 <literal>userid@sipserver</literal>
      </para>
     </listitem>
    </itemizedlist>

   </step>
   <step performance="required">
    <para>
     单击<guimenu>呼叫</guimenu>或按 <keycombo><keycap function="control"/><keycap>O</keycap></keycombo> 并等待对方拿起电话。
    </para>
   </step>
   <step performance="required">
    <para>
     要结束呼叫，请单击<guimenu>挂断</guimenu>或按 <keycap function="escape"/>。
    </para>
   </step>
  </procedure>

  <para>
   如果需要在通话期间调整声音参数，请在<guimenu>呼叫面板</guimenu>中单击<guimenu>音频设置</guimenu>图标。此时会显示包含<guimenu>回放音量</guimenu>和<guimenu>录音音量</guimenu>的<guimenu>音频</guimenu>选项的窗口。使用滑块来调整音量以适合您的需要。
  </para>
 </sect1>
 <sect1 id="sec.ekiga.answer">
  <title>应答来电</title>

  <para>
   Ekiga 可按两种方式接收电话。首先，可使用 <literal>sip:user@host</literal> 或通过 SIP 提供商直接呼叫用户。大多数 SIP 提供商允许您将呼叫从固定电话转到您的 VoIP 帐户。根据 Ekiga 的运行模式，有几种来电通知的方法：
  </para>

  <variablelist>
   <varlistentry>
    <term>常规应用</term>
    <listitem>
     <para>
      仅当 Ekiga 已运行时才可接收和应答来电。您可以在耳机或扬声器中听到铃声。如果 Ekiga 没有运行，将无法接收来电。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>面板小程序</term>
    <listitem>
     <para>
      通常，Ekiga 面板小程序将静默运行，并且不会提供其存在的任何提示。当有来电时此情况会改变。Ekiga 的主窗口会打开并且您会在耳机或扬声器中听到铃声。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   发现有来电后，单击<guimenu>接受</guimenu>即可接听来电，然后开始通话。如果您不希望接受此来电，请单击<guimenu>拒绝</guimenu>。也可以将呼叫传送到另一个 SIP 地址。
  </para>
 </sect1>
 <sect1 id="sec.ekiga.calladd">
  <title>使用通讯录</title>

  <para>
   使用 Ekiga 可以管理您的 SIP 联系人。启动后，所有联系人都将显示在主窗口上的<guimenu>联系人</guimenu>选项卡中。要添加联系人或新的联系人组，请运行<menuchoice><guimenu>聊天</guimenu><guimenu>添加联系人</guimenu></menuchoice>。
  </para>

  <para>
   如果要添加新组，请在底部文本框中输入组名称，然后按<guimenu>添加</guimenu>。此时，新组即已添加到组列表中并处于预选中状态。
  </para>

  <para>
   有效联系人需要具备以下项：
  </para>

  <variablelist>
   <varlistentry>
    <term>名称</term>
    <listitem>
     <para>
      输入联系人的名字。这可以是全名，但您也可以在此处使用呢称。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>地址</term>
    <listitem>
     <para>
      输入联系人的有效 SIP 地址
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>组</term>
    <listitem>
     <para>
      如果有多个不同联系人，请添加您自己的组。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   要从通讯录呼叫联系人，请双击此联系人。呼叫即刻发出。
  </para>
 </sect1>
 <sect1 id="sec.ekiga.moreinfo">
  <title>更多信息</title>

  <para>
   Ekiga 的官方主页是 <ulink url="http://www.ekiga.org/"/>。此站点提供了常见问题的答案和更多详细文档。
  </para>

  <para>
   有关 Linux 中的 <literal>H323</literal> 电话会议协议支持的信息，请参见 <ulink url="http://www.voip-info.org/wiki/view/H.323"/>。这也是搜索支持 VoIP 的项目的一个良好起点。
  </para>

  <para>
   要设置私用电话网络，您可能对 <literal>PBX </literal>软件 Asterisk <ulink url="http://www.asterisk.org/"/> 感兴趣。在 <ulink url="http://www.voip-info.org/wiki-Asterisk"/> 中可找到相关信息。<indexterm startref="idx.ekiga" class="endofrange"/> <indexterm startref="idx.voip" class="endofrange"/>
  </para>
 </sect1>
</chapter>
