<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_firstboot.xml" version="5.0" xml:id="cha.deployment_firstboot">
 <title>部署自定的預先安裝</title>
 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker>
        </dm:bugtracker>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <para>
  將 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 的自定預先安裝轉出到大量的相同機器上，可使您免除一個個單獨安裝的麻煩，並為終端使用者提供標準化的安裝。使用 YaST 首次開機，可以建立自定的預先安裝影像，並決定需要終端使用者互動之最終個人化步驟的工作流程 (這與允許完全自動安裝的 AutoYaST 不同，如需詳細資訊，請參閱<xref linkend="cha.deployment.autoinst"/>)。
 </para>
 <para>
  建立自定安裝、轉出至您的硬體並個人化最終產品，包括下列步驟：
 </para>
 <procedure>
  <step>
   <para>
    備妥其磁碟需要複製到用戶端機器的主要機器。若需更多資訊，請參閱<xref linkend="sec.fb.master"/>。
   </para>
  </step>
  <step>
   <para>
    自定化第一次開機工作流程。若需更多資訊，請參閱<xref linkend="sec.fb.customize"/>。
   </para>
  </step>
  <step>
   <para>
    複製主要機器的磁碟，並將影像轉出到用戶端磁碟。若需更多資訊，請參閱<xref linkend="sec.fb.clone"/>。
   </para>
  </step>
  <step>
   <para>
    讓終端使用者個人化 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 例項。若需更多資訊，請參閱<xref linkend="sec.fb.personalize"/>。
   </para>
  </step>
 </procedure>
 <sect1 xml:id="sec.fb.master">
  <title>備妥主要機器</title>

  <para>
   若要備妥主要機器進行第一次開機工作流程，請遵循下列步驟：
  </para>

  <procedure>
   <step xml:id="st.master1">
    <para>
     將安裝媒體插入主要機器中。
    </para>
   </step>
   <step xml:id="st.master2">
    <para>
     開機。
    </para>
   </step>
   <step xml:id="st.master3">
    <para>
     執行包括所有必要組態步驟的一般安裝，並等待安裝的機器開機。同時安裝 <systemitem>yast2-firstboot</systemitem> 套件。
    </para>
   </step>
   <step xml:id="st.master4">
    <para>
     若要為終端使用者定義您自己的 YaST 組態步驟工作流程，或將您自己的 YaST 模組新增到此工作流程，請繼續<xref linkend="sec.fb.customize"/>。否則請直接執行<xref linkend="st.master5"/>。
    </para>
   </step>
   <step xml:id="st.master5">
    <para>
     以 <systemitem class="username">root</systemitem> 身分啟用首次開機︰
    </para>
    <para>
     建立空白檔案 <filename>/var/lib/YaST2/reconfig_system</filename> 以觸發 firstboot 的執行。成功完成首次開機組態設定後，將會刪除此檔案。使用下列指令建立此檔案：
    </para>
<screen>touch /var/lib/YaST2/reconfig_system</screen>
   </step>
   <step>
    <para>
     繼續進行<xref linkend="sec.fb.clone"/>。
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.fb.customize">
  <title>自定 firstboot 安裝</title>

  <para>
   自定首次開機安裝工作流程可能會涉及到多個不同的元件。自定是選擇性的。若您不希望進行變更，firstboot 會使用預設設定進行安裝。可用的選項如下：
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     按<xref linkend="sec.fb.customize.msg"/> 所述針對使用者自定訊息。
    </para>
   </listitem>
   <listitem>
    <para>
     按<xref linkend="sec.fb.customize.license"/> 所述自定授權與授權動作。
    </para>
   </listitem>
   <listitem>
    <para>
     按<xref linkend="sec.fb.customize.rn"/> 所述自定要顯示的版本說明。
    </para>
   </listitem>
   <listitem>
    <para>
     按<xref linkend="sec.fb.customize.wf"/> 所述自定安裝所包含的元件數量與順序。
    </para>
   </listitem>
   <listitem>
    <para>
     按<xref linkend="sec.fb.customize.script"/> 所述設定其他選用的程序檔。
    </para>
   </listitem>
  </itemizedlist>

  <para>
   若要自定這些元件，請修改下列組態檔：
  </para>

  <variablelist>
   <varlistentry>
    <term><filename>/etc/sysconfig/firstboot</filename>
    </term>
    <listitem>
     <para>
      設定 firstboot 的各項設定，如版本說明、程序檔與授權動作。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><filename>/etc/YaST2/firstboot.xml</filename>
    </term>
    <listitem>
     <para>
      啟用或停用元件，或新增自定元件，設定安裝工作流程。
     </para>
     <para>
      按<xref linkend="sec.fb.provide.trans"/> 所述提供此類自定安裝工作流程的翻譯。
     </para>
     <tip>
      <title>控制檔案的替代位置</title>
      <para>
       <filename>/etc/YaST2/firstboot.xml</filename> 是控制檔案的預設路徑，透過 <systemitem>yast2-firstboot</systemitem> 套件安裝。如果您需要為控制檔案定義其他位置，請編輯 <filename>/etc/sysconfig/firstboot</filename>，並將 <literal>FIRSTBOOT_CONTROL_FILE</literal> 變數變更為您偏好的位置。
      </para>
     </tip>
    </listitem>
   </varlistentry>
  </variablelist>



  <para>
   如果您要自定的不僅僅是工作流程元件，請參閱 <link xlink:href="http://doc.opensuse.org/projects/YaST/SLES11/tdg/inst_in_general_chap.html#product_control"/> 處的 <filename>control.xml</filename> 文件。
  </para>

  <sect2 xml:id="sec.fb.customize.msg">
   <title>自定 YaST 訊息</title>
   <para>
    依預設，<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 的安裝包含數種已當地化並顯示於各安裝過程特定階段的預設訊息。包括歡迎訊息、授權訊息，以及安裝完畢的恭喜訊息。您可以您自己的版本取代任一個訊息，並將當地語系化版本包含於安裝中。若要包含您個人的歡迎訊息，請如下執行：
   </para>
   <procedure>
    <step>
     <para>
      以 <systemitem class="username">root</systemitem> 身分登入。
     </para>
    </step>
    <step>
     <para>
      開啟 <filename>/etc/sysconfig/firstboot</filename> 組態檔並套用下列變更：
     </para>
     <substeps performance="required">
      <step>
       <para>
        將 <envar>FIRSTBOOT_WELCOME_DIR</envar> 設定為要在其中儲存含有歡迎訊息和當地語系化版本之檔案的目錄路徑，例如：
       </para>
<screen>FIRSTBOOT_WELCOME_DIR="/usr/share/firstboot/"
</screen>
      </step>
      <step>
       <para>
        如果歡迎訊息使用的檔案名稱不是 <filename>welcome.txt</filename> 和 <filename>welcome_<replaceable>locale</replaceable>.txt</filename> (其中 <replaceable>locale</replaceable> 與 ISO 639 語言代碼相符，例如 <quote>cs</quote>、<quote>de</quote>)，請在 <envar>FIRSTBOOT_WELCOME_PATTERNS</envar> 中指定檔案名稱模式。例如：
       </para>
<screen>FIRSTBOOT_WELCOME_PATTERNS="mywelcome.txt"</screen>
       <para>
        若未設定的話，會假設使用預設值 <filename>welcome.txt</filename>。
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      建立歡迎檔案與當地語系化版本，並將這些檔案放到 <filename>/etc/sysconfig/firstboot</filename> 組態檔中指定的目錄。
     </para>
    </step>
   </procedure>
   <para>
    以類似方式設定自定授權與結束訊息。變數為 <envar>FIRSTBOOT_LICENSE_DIR</envar> 與 <envar>FIRSTBOOT_FINISH_FILE</envar>。
   </para>
   <para>
    如果使用者在執行安裝後需要能夠直接啟動 YaST，請將 <envar>SHOW_Y2CC_CHECKBOX</envar> 變更為 <quote>yes</quote>。
   </para>
  </sect2>

  <sect2 xml:id="sec.fb.customize.license">
   <title>自定授權動作</title>
   <para>
    您可自定當使用者不接受授權合約時安裝系統的反應。系統針對此情況可採取的應對方式有以下三種︰
   </para>
   <variablelist>
    <varlistentry>
     <term>中斷</term>
     <listitem>
      <para>
       firstboot 安裝中止，整個系統關閉。此為預設值。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>繼續</term>
     <listitem>
      <para>
       firstboot 繼續安裝。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>中止</term>
     <listitem>
      <para>
       firstboot 安裝中止，但系統會嘗試開機。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    進行選擇，並將 <envar>LICENSE_REFUSAL_ACTION</envar> 設定為適當值。
   </para>
  </sect2>

  <sect2 xml:id="sec.fb.customize.rn">
   <title>自定版本說明</title>
   <para>
    您可能需要培訓您的終端使用者，使其瞭解其新作業系統的重要方面，具體取決於您是否變更了透過首次開機部署的 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 例項。標準安裝使用版本說明 (會在安裝的某個最後階段顯示) 為使用者提供重要訊息。若要在 firstboot 安裝顯示您修改過的版本說明，請如下操作：
   </para>
   <procedure>
    <step>
     <para>
      建立您自己的版本說明檔案。依照 <filename>/usr/share/doc/release-notes</filename> 中的範例檔案使用 RTF 格式，並將結果儲存為 <filename>RELEASE-NOTES.en.rtf</filename> (對於英文)。
     </para>
    </step>
    <step>
     <para>
      將可選用當地化版本儲存於原始版本旁，並將檔案名稱的 <literal>en</literal> 部份取代為實際的 ISO 639 語言代碼，如德文就用 <literal>de</literal>。
     </para>
    </step>
    <step>
     <para>
      從 <filename>/etc/sysconfig/firstboot</filename> 開啟第一次開機 組態檔，並將 <envar>FIRSTBOOT_RELEASE_NOTES_PATH</envar> 設定為儲存版本說明檔案的實際目錄。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.fb.customize.wf">
   <title>自定工作流程</title>
   <para>
    依照預設，標準的第一次開機工作流程包含下列元件：
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      語言選擇
     </para>
    </listitem>
    <listitem>
     <para>
      歡迎
     </para>
    </listitem>

    <listitem>
     <para>
      授權書
     </para>
    </listitem>
    <listitem>
     <para>
      主機名稱
     </para>
    </listitem>

    <listitem>
     <para>
      網路
     </para>
    </listitem>

    <listitem>
     <para>
      時間和日期
     </para>
    </listitem>

    <listitem>
     <para>
      桌面
     </para>
    </listitem>
    <listitem>
     <para>
      root 密碼
     </para>
    </listitem>
    <listitem>
     <para>
      使用者驗證方式
     </para>
    </listitem>
    <listitem>
     <para>
      使用者管理
     </para>
    </listitem>
    <listitem>
     <para>
      硬體組態
     </para>
    </listitem>
    <listitem>
     <para>
      完成安裝
     </para>
    </listitem>
   </itemizedlist>
   <para>
    這個 firstboot 安裝工作流程的標準配置不是強制性的。您可啟用或停用特定元件，或將您自己的模組整合到工作流程中。若要修改第一次開機工作流程，請手動編輯第一次開機組態檔 <filename>/etc/YaST2/firstboot.xml</filename>。此 XML 檔案為標準 <filename>control.xml</filename> 檔案的子集，YaST 使用後者來控制安裝工作流程。
   </para>
   <para>
    如需有關建議的綜覽，請參閱<xref linkend="ex.fb.proposal"/>。綜覽會向您提供足夠的背景，以修改首次開機安裝工作流程。此範例介紹首次開機組態檔案的基本語法及關鍵元素的設定方法。
   </para>
   <example xml:id="ex.fb.proposal">
    <title>設定 proposal 區段</title>
<screen>
    …
    &lt;proposals config:type="list"&gt;<co xml:id="co.fb.plist"/>
        &lt;proposal&gt;<co xml:id="co.fb.p"/>
            &lt;name&gt;firstboot_hardware&lt;/name&gt;<co xml:id="co.fb.pname"/>
            &lt;mode&gt;installation&lt;/mode&gt;<co xml:id="co.fb.pmode"/>
            &lt;stage&gt;firstboot&lt;/stage&gt;<co xml:id="co.fb.pstage"/>
            &lt;label&gt;Hardware Configuration&lt;/label&gt;<co xml:id="co.fb.plabel"/>
            &lt;proposal_modules config:type="list"&gt;<co xml:id="co.fb.pmodl"/>
                &lt;proposal_module&gt;printer&lt;/proposal_module&gt;<co xml:id="co.fb.pmod"/>
            &lt;/proposal_modules&gt;
        &lt;/proposal&gt;
        &lt;proposal&gt;
        …
        &lt;/proposal&gt;
    &lt;/proposals&gt;
   </screen>
   </example>
   <calloutlist>
    <callout arearefs="co.fb.plist">
     <para>
      應為第一次開機工作流程的所有提議之容器。
     </para>
    </callout>
    <callout arearefs="co.fb.p">
     <para>
      個別提議之容器。
     </para>
    </callout>
    <callout arearefs="co.fb.pname">
     <para>
      提議的內部名稱。
     </para>
    </callout>
    <callout arearefs="co.fb.pmode">
     <para>
      此提議的模式。在此不進行任何變更。對於第一次開機安裝，這裡一定要設為 <literal>installation</literal>。
     </para>
    </callout>
    <callout arearefs="co.fb.pstage">
     <para>
      此提議所呼叫的安裝程序階段。在此不進行任何變更。對於第一次開機安裝，這裡一定要設為 <literal>firstboot</literal>。
     </para>
    </callout>
    <callout arearefs="co.fb.plabel">
     <para>
      要顯示在提議上的標籤。
     </para>
    </callout>
    <callout arearefs="co.fb.pmodl">
     <para>
      身為提議畫面一部分的所有模組之容器。
     </para>
    </callout>
    <callout arearefs="co.fb.pmod">
     <para>
      一或多模組為提議畫面的一部分。
     </para>
    </callout>
   </calloutlist>
   <para>
    下一段的第一次開機組態檔包含工作流程定義。應為第一次開機安裝工作流程一部分的所有模組，都應該列於此。
   </para>
   <example xml:id="ex.fb.wf">
    <title>設定 workflow 區段</title>
<screen>
    &lt;workflows  config:type="list"&gt;
        &lt;workflow&gt;
            &lt;defaults&gt;
                &lt;enable_back&gt;yes&lt;/enable_back&gt;
                &lt;enable_next&gt;yes&lt;/enable_next&gt;
                &lt;archs&gt;all&lt;/archs&gt;
            &lt;/defaults&gt;
            &lt;stage&gt;firstboot&lt;/stage&gt;
            &lt;label&gt;Configuration&lt;/label&gt;
            &lt;mode&gt;installation&lt;/mode&gt;
            … &lt;!–– list of modules  ––&gt;
            &lt;/modules&gt;
        &lt;/workflow&gt;
    &lt;/workflows&gt;
    …
  </screen>
   </example>
   <para>
    <literal>workflows</literal> 區段的整體結構與 <literal>proposals</literal> 區段非常相似。容器會包含工作流程元素，而工作流程元素均含有階段、標籤與模式資訊，如同<xref linkend="ex.fb.proposal"/> 介紹的建議部分。最大的差別在於 <filename>defaults</filename> 部份，其中包含工作流程元件的基本設計資訊：
   </para>
   <variablelist>
    <varlistentry>
     <term><literal>enable_back</literal>
     </term>
     <listitem>
      <para>
       所有對話方塊都包含包含<guimenu>上一步</guimenu>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>enable_next</literal>
     </term>
     <listitem>
      <para>
       所有對話方塊都包含<guimenu>下一步</guimenu>。
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><literal>archs</literal>
     </term>
     <listitem>
      <para>
       指定會使用此工作流程的硬體結構。
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <example xml:id="ex.fb.wfmod">
    <title>設定工作流程元件清單</title>
<screen>
    &lt;modules  config:type="list"&gt;<co xml:id="co.fb.modl"/>
        &lt;module&gt;<co xml:id="co.fb.mod"/>
            &lt;label&gt;Language&lt;/label&gt;<co xml:id="co.fb.label"/>
            &lt;enabled config:type="boolean"&gt;false&lt;/enabled&gt;<co xml:id="co.fb.en"/>
            &lt;name&gt;firstboot_language&lt;/name&gt;<co xml:id="co.fb.name"/>
        &lt;/module&gt;
    &lt;modules&gt;
  </screen>
   </example>
   <calloutlist>
    <callout arearefs="co.fb.modl">
     <para>
      工作流程所有元件的容器。
     </para>
    </callout>
    <callout arearefs="co.fb.mod">
     <para>
      模組定義。
     </para>
    </callout>
    <callout arearefs="co.fb.label">
     <para>
      模組顯示的標籤。
     </para>
    </callout>
    <callout arearefs="co.fb.en">
     <para>
      在此工作流程中啟用或停用此元件的開關。
     </para>
    </callout>
    <callout arearefs="co.fb.name">
     <para>
      模組名稱。模組本身必須位於 <filename>/usr/share/YaST2/clients</filename> 下，且檔案名稱結尾必須為 <filename>.ycp</filename>。
     </para>
    </callout>
   </calloutlist>
   <para>
    若要變更第一次開機安裝過程中的提議畫面數量與順序，請如下操作：
   </para>
   <procedure>
    <step>
     <para>
      開啟位於 <filename>/etc/YaST2/firstboot.xml</filename> 的第一次開機組態檔。
     </para>
    </step>
    <step>
     <para>
      刪除或新增提議畫面，或變更現有畫面的順序：
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        若要刪除整個提議，請從<literal>提議</literal>部分移除<literal>提議</literal>元素 (包括其所有子元素)，並從工作流程中個別移除<literal>模組</literal>元素 (與子元素)。
       </para>
      </listitem>
      <listitem>
       <para>
        若要新增提議，請建立新的<literal>提議</literal>元素，並填妥所有必填的子元素。確認建議以 YaST 模組形式存在於 <filename>/usr/share/YaST2/clients</filename> 中。
       </para>
      </listitem>
      <listitem>
       <para>
        若要變更提議順序，請在工作流程中移動包含提議畫面的個別<literal>模組</literal>元件。請注意，其他安裝步驟可能對特定提議順序或工作流程元件具有相依性。
       </para>
      </listitem>
     </itemizedlist>
    </step>
    <step>
     <para>
      套用您的變更並關閉組態檔。
     </para>
    </step>
   </procedure>
   <para>
    您一律可在預設值不符合您需求時，變更組態步驟的工作流程。在工作流程中啟用或停用特定模組，或新增您自定的模組。
   </para>
   <para>
    若要切換第一次開機工作流程中的模組狀態，請如下操作：
   </para>
   <procedure>
    <step>
     <para>
      開啟 <filename>/etc/YaST2/firstboot.xml</filename> 組態檔。
     </para>
    </step>
    <step>
     <para>
      將 <literal>enabled</literal> 元件的值從 <literal>true</literal> 變更至 <filename>false</filename>，以停用模組，或從 <literal>false</literal> 變更為 <literal>true</literal>，以再次啟用。
     </para>
<screen>
&lt;module&gt;
    &lt;label&gt;Time and Date&lt;/label&gt;
    &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
    &lt;name&gt;firstboot_timezone&lt;/name&gt;
&lt;/module&gt;
</screen>
    </step>
    <step>
     <para>
      套用您的變更並關閉組態檔。
     </para>
    </step>
   </procedure>
   <para>
    若要將自定模組新增到工作流程，請如下操作：
   </para>
   <procedure>
    <step>
     <para>
      建立您個人的 YaST 模組，並將模組檔案 <filename><replaceable>module_name</replaceable>.ycp</filename> 儲存於 <filename>/usr/share/YaST2/clients</filename> 中。
     </para>
    </step>
    <step>
     <para>
      開啟 <filename>/etc/YaST2/firstboot.xml</filename> 組態檔。
     </para>
    </step>
    <step>
     <para>
      決定新模組在工作流程中的執行時機。這麼做的時候，請確認您已考量工作流程中其他步驟可能的相依性。
     </para>
    </step>
    <step>
     <para>
      在<literal>模組</literal>容器中建立新的<literal>模組</literal>元素，並新增適當的子元素：
     </para>
<screen>&lt;modules config:type="list"&gt;
     …
     &lt;module&gt;
        &lt;label&gt;<replaceable>my_module</replaceable>&lt;/label&gt;
        &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
        &lt;name&gt;<replaceable>filename_my_module</replaceable>&lt;/name&gt;
     &lt;/module&gt;
&lt;/modules&gt;
</screen>
     <substeps performance="required">
      <step>
       <para>
        在 <literal>label</literal> 元素中輸入您的模組要顯示的標籤。
       </para>
      </step>
      <step>
       <para>
        確認 <literal>enabled</literal> 已設為 <literal>true</literal>，讓您的模組包含於工作流程中。
       </para>
      </step>
      <step>
       <para>
        在 <literal>name</literal> 元素中輸入您模組的檔案名稱。省略完整路徑與 <filename>.ycp</filename> 字尾。
       </para>
      </step>
     </substeps>
    </step>
    <step>
     <para>
      套用您的設定並關閉組態檔。
     </para>
    </step>
   </procedure>
   <tip>
    <title>為自動組態尋找連接的網路介面</title>
    <para>
     如果目標硬體有多個網路介面，請將 <systemitem>network-autoconfig</systemitem> 套件新增至應用程式影像。<systemitem>network-autoconfig</systemitem> 可確定系統在首次開機期間會循環偵測所有可用的乙太網路介面，直到透過 DHCP 成功設定一個介面為止。
    </para>
   </tip>
  </sect2>

  <sect2 xml:id="sec.fb.customize.script">
   <title>設定其他程序檔</title>
   <para>
    首次開機可設定為在首次開機工作流程完成後執行其他程序檔。若要將其他程序檔新增至第一次開機序列，請如下操作：
   </para>
   <procedure>
    <step>
     <para>
      開啟 <filename>/etc/sysconfig/firstboot</filename> 組態檔，並確認 <envar>SCRIPT_DIR</envar> 指定的路徑正確。預設值為 <filename>/usr/share/firstboot/scripts</filename>。
     </para>
    </step>
    <step>
     <para>
      建立您的外圍程序檔、儲存於指定目錄中，並套用適當的檔案許可權。
     </para>
    </step>
   </procedure>
  </sect2>



  <sect2 xml:id="sec.fb.provide.trans">
   <title>提供安裝工作流程的翻譯</title>
   <para>
    有些終端使用者可能需要提供自定工作流程的翻譯。如果您依<xref linkend="sec.fb.customize.wf"/> 所述透過變更 <filename>/etc/YaST2/firstboot.xml</filename> 檔案自定了工作流程，就可能需要提供這些翻譯。翻譯與自定 YaST 訊息的當地化不同，後者在<xref linkend="sec.fb.customize.msg"/>中已做過介紹。
   </para>
   <para>
    如果您變更了 <filename>/etc/YaST2/firstboot.xml</filename> 並引入了字串變更，則請產生一個新的翻譯樣板檔案 (<filename>.pot</filename> 檔案)，並使用 <systemitem>gettext</systemitem> 工具鏈進行翻譯，最後將翻譯好的檔案做為 <filename>.mo</filename> 編譯檔案安裝到 YaST 的地區設定目錄 (<filename>/usr/share/YaST2/locale</filename>)。請執行下列步驟：
   </para>
   <procedure>
    <step>
     <para>
      將 <systemitem>textdomain</systemitem> 設定從
     </para>
<screen>&lt;textdomain&gt;firstboot&lt;/textdomain&gt;</screen>
     <para>
      變更為，例如，
     </para>
<screen>&lt;textdomain&gt;firstboot-oem&lt;/textdomain&gt;</screen>
    </step>
    <step>
     <para>
      使用 <command>xgettext</command> 將可翻譯的字串擷取到翻譯範本檔案 (即 <filename>.pot</filename> 檔案) 中，例如擷取到 <filename>firstboot-oem.pot</filename> 檔案中︰
     </para>
<screen>xgettext -L Glade -o firstboot-oem.pot /etc/YaST2/firstboot.xml</screen>
    </step>
    <step>
     <para>
      開始翻譯程序。然後封裝翻譯好的檔案 (<filename>.<replaceable>LL_code</replaceable>.po</filename> 檔案)，方法與封裝其他專案翻譯的方法相同，之後再安裝 <filename>firstboot-oem.mo</filename> 編譯檔案。
     </para>
    </step>
   </procedure>
   <para>
    如果您需要其他模組或變更的 YaST 模組的翻譯，請在這類模組自身內提供翻譯。如果您變更了現有模組，請務必也變更該模組的 text-domain 陳述式，以免出現意外的不良後果。
   </para>
   <tip>
    <title>更多資訊</title>
    <para>
     如需關於 YaST 開發的詳細資訊，請參閱 <link xlink:href="http://en.opensuse.org/openSUSE:YaST_development"/>。如需關於 YaST 首次開機的詳細資訊，請造訪 <link xlink:href="http://doc.opensuse.org/projects/YaST/SLES11/tdg/bk09ch01s02.html"/>。
    </para>
   </tip>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.fb.clone">
  <title>複製主要安裝</title>

  <para>
   使用任意一種可用的影像複製機制複製主要機器的磁碟，並將這些影像轉出到目標機器。如需關於複製影像的詳細資訊，請參閱<link xlink:href="http://doc.opensuse.org/projects/kiwi/doc/"/>。
  </para>
 </sect1>
 <sect1 xml:id="sec.fb.personalize">
  <title>個人化安裝</title>

  <para>
   複製的磁碟影像開機之後，第一次開機就會如同<xref linkend="sec.fb.customize.wf"/>，一模一樣的啟動安裝程序。僅會啟動包含於第一次開機工作流程組態中的元件。而略過其他所有安裝步驟。使用者可調整語言、鍵盤、網路與密碼設定，以個人化工做站。此程序完成之後，所安裝的系統第一次開機時的行為與其他 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> 例項完全相同。
  </para>
 </sect1>
</chapter>
