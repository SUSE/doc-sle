<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="gnome_crypto.xml" version="5.0" xml:id="cha-gnome-crypto">
 <title><guimenu>口令与密钥</guimenu>：对数据签名和加密</title>
 <info>
  <abstract>
   <para>
    了解如何创建及管理 PGP 和 SSH 密钥。
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  GNOME 口令和密钥程序是系统上加密基础结构的重要组成部分。借助此程序，您可以：创建和管理 PGP 与 SSH 密钥；导入、导出和共享密钥；备份密钥和密钥环；缓存通行口令。
 </para>
 <para>
  要启动该应用程序，请按 <keycap function="meta"/> 打开<guimenu>活动</guimenu>概览，然后搜索 <literal>pass</literal>。
 </para>
 <figure pgwide="0">
  <title><guimenu>口令和密钥</guimenu>主窗口</title>
  <mediaobject>
   <imageobject role="fo">
    <imagedata fileref="seahorse_main.png" width="70%" format="PNG"/>
   </imageobject>
   <imageobject role="html">
    <imagedata fileref="seahorse_main.png" width="70%" format="PNG"/>
   </imageobject>
  </mediaobject>
 </figure>
 <sect1 xml:id="sec-gnome-crypto-sign-encrypt">
  <title>签名和加密</title>

  <formalpara>
   <title>签名</title>
   <para>
    在信息片段（例如电子邮件或软件）中附加电子签名，以证明信息的来源。为了避免其他人冒名撰写邮件并为了保护您和收件人，您应该对邮件进行签名。签名可帮助您检查接收的邮件的寄件人以及区分可靠邮件和恶意邮件。
   </para>
  </formalpara>

  <para>
   软件开发人员对他们的软件签名，这样您就可以检查其完整性。即使是从非官方服务器获得的软件，也可以使用签名来校验软件包。
  </para>

  <formalpara>
   <title>加密</title>
   <para>
    您可能还拥有要防止其他方访问的敏感信息。加密帮助您转换数据，使其他人无法阅读。这对公司尤其重要，因为这样他们可以保护内部信息以及员工的隐私。
   </para>
  </formalpara>
 </sect1>
 <sect1 xml:id="cha-gnome-crypto-gen-key">
  <title>生成新的密钥对</title>

  <para>
   要与其他用户交换加密的邮件，必须先生成自己的密钥对。密钥对由两部分组成：
  </para>

  <itemizedlist>
   <listitem>
    <formalpara>
     <title>公共密钥</title>
     <para>
      此密钥用于加密。将它分发给您通讯的伙伴，让他们能够用它来加密发送给您的文件或邮件。
     </para>
    </formalpara>
   </listitem>
   <listitem>
    <formalpara>
     <title>私用密钥</title>
     <para>
      此密钥用于解密。使用该密钥可使其他人（或您自己）发送的已加密文件或邮件恢复为可读模式。
     </para>
    </formalpara>
   </listitem>
  </itemizedlist>

  <important>
   <title>访问私用密钥</title>
   <para>
    如果其他人能够访问到您的私用密钥，他们可以解密原本只有您才能阅读的文件和邮件。切勿授权其他人访问您的私用密钥。
   </para>
  </important>

  <sect2 xml:id="cha-gnome-crypto-gen-key-openpgp">
   <title>创建 OpenPGP 密钥</title>
   <para>
    OpenPGP 是使用基于 PGP 的公共密钥加密法加密电子邮件的非专有协议。它定义了用于交换公共密钥的加密邮件、签名、公共密钥和证书的标准格式。
   </para>
   <procedure>
    <step>
     <para>
      打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
     </para>
    </step>
    <step>
     <para>
      打开<guimenu>口令和密钥</guimenu>。
     </para>
    </step>
    <step>
     <para>
      单击窗口左上角的 <guimenu>+</guimenu> 按钮。
     </para>
    </step>
    <step>
     <para>
      从列表中选择 <guimenu>GPP 密钥</guimenu>。
     </para>
    </step>
    <step>
     <para>
      在<guimenu>全名</guimenu>字段中输入您的姓名。
     </para>
     <para>
      （可选）添加您的电子邮件地址和注释来描述密钥。
     </para>
     </step>
    <step>
     <para>
      单击<guimenu>创建</guimenu>创建新的密钥对。
     </para>
     <para>
      在口令对话框中，输入密钥的口令。
     </para>
    </step>
    <step>
     <para>
      单击<guimenu>确定</guimenu>进行确认。
     </para>
     <para>
      在指定通行口令时，请使用与创建高强度口令相同的标准。
      </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="cha-gnome-crypto-gen-key-ssh">
   <title>创建安全外壳密钥</title>
   <para>
    安全外壳 (SSH) 是一种登录到远程计算机以在其上执行命令的方法。SSH 密钥用于基于密钥的身份验证系统，此系统代替了默认的口令身份验证系统。使用基于密钥的身份验证不需要手动输入口令进行身份验证。
   </para>
   <procedure>
    <step>
     <para>
      打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
     </para>
    </step>
    <step>
     <para>
      打开<guimenu>口令和密钥</guimenu>。
     </para>
    </step>
    <step>
     <para>
      单击窗口左上角的 <guimenu>+</guimenu> 按钮。
     </para>
    </step>
    <step>
     <para>
      从列表中选择<guimenu>安全外壳密钥</guimenu>。
     </para>
    </step>
    <step>
     <para>
      输入密钥的描述。
     </para>
     <para>
      （可选）更改加密类型或密钥强度的默认设置。
     </para>
     <formalpara>
      <title>加密类型</title>
      <para>
       指定用于生成密钥的加密算法。选择 <guimenu>RSA</guimenu> 使用 Rivest-Shamir-Adleman (RSA) 算法创建 SSH 密钥。这是优先且更安全的选择。选择 <guimenu>DSA</guimenu> 使用 Digital Signature Algorithm (DSA) 创建 SSH 密钥。
      </para>
     </formalpara>
     <formalpara>
      <title>密钥强度</title>
      <para>
       指定密钥的长度（以位为单位）。密钥越长就越安全（如果使用了强通行口令）。请记住，对较长的密钥执行任何操作所需的时间都比对较短密钥执行操作所需的时间要长。可接受的值在 1024 到 4096 位之间。推荐至少 2048 位。
      </para>
     </formalpara>
    </step>
    <step>
     <para>
      单击<guimenu>仅创建密钥</guimenu>或<guimenu>创建并设置</guimenu>进行确认。后者将引导您完成安装公共密钥的步骤。
     </para>
    </step>
   </procedure>
  </sect2>
  
 </sect1>
 <sect1 xml:id="cha-gnome-crypto-modify-key">
  <title>修改密钥属性</title>

  <para>
   可以修改现有 OpenPGP 或 SSH 密钥的属性。
  </para>

  <sect2 xml:id="cha-gnome-crypto-modify-key-openpgp">
   <title>编辑 OpenPGP 密钥属性</title>
   <para>
    本部分中的描述适用于全部 OpenPGP 密钥。
   </para>
   <procedure>
    <step>
    <para>
     打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
    </para>
    </step>
    <step>
     <para>
      打开<guimenu>口令和密钥</guimenu>。
     </para>
    </step>
    <step>
     <para>
      从左侧面板中选择 <guimenu>GnuPG 密钥</guimenu>。
     </para>
    </step>
    <step>
     <para>
      右键单击要编辑的 PGP 密钥并选择<guimenu>属性</guimenu>。
     </para>
     <para>
      一个对话框即会打开，其中会显示以下密钥属性：
     </para>
     <formalpara>
      <title>密钥 ID：</title>
      <para>
       密钥 ID 近似于指纹，但密钥 ID 仅包含指纹的最后八个字符。通常仅用密钥 ID 就可以识别密钥，但有时候两个密钥可能具有同一个密钥 ID。
      </para>
     </formalpara>
     <formalpara>
      <title>指纹：</title>
      <para>
       精确标识密钥的唯一字符串。
      </para>
     </formalpara>
    <formalpara>
      <title>失效日期：</title>
      <para>
       密钥不能再使用的日期（密钥失效后就不能再用于执行密钥操作）。将密钥的失效日期更改为将来的某个日期可重新启用此密钥。一个常用的好做法是：拥有一个永不失效的主密钥以及多个会失效且由主密钥签名的子密钥。
      </para>
    </formalpara>
     <formalpara>
      <title>子密钥：</title>
      <para>
       有关更多信息，请参见<xref linkend="cha-gnome-crypto-modify-key-openpgp-edit-subkey" xrefstyle="HeadingOnPage"/>。
      </para>
     </formalpara>
     <formalpara>
     <title>覆盖所有者信任：</title>
     <para>
      您可以在此处设置对密钥拥有者的信任级别。信任表示您对某人正确扩展信任网的能力的确信程度。如果某个密钥未经过您的签名，该密钥的有效性将由其签名以及您对签名人的信任程度来决定。
     </para>
     </formalpara>
    </step>
    <step>
     <para>
      单击加号按钮可为密钥添加照片或更改与密钥关联的通行口令。
     </para>
     <para>
      照片 ID 允许密钥拥有者在密钥中嵌入一张或多张他们的图片。可以像常规用户 ID 一样对这些身份签名。照片 ID 必须是 JPEG 格式。推荐大小为 120×150 像素。
     </para>
     <para>
      如果选择的图像不满足文件类型或大小要求，只要它是 GDK 库支持的图像格式，使用<guimenu>口令和密钥</guimenu>便可即时调整其大小并进行转换。
     </para>
    </step>
    <step>
     <para>
      关闭对话框以完成该过程。
     </para>
    </step>
   </procedure>
   
   <sect3 xml:id="cha-gnome-crypto-modify-key-openpgp-add-user">
    <title>添加用户 ID</title>
    <para>
     用户 ID 允许将多个身份和电子邮件地址与同一个密钥一起使用。添加用户 ID 是很有用的，例如，如果想要拥有一个用于工作的身份以及一个与朋友联系的身份。请执行如下操作以添加用户 ID：
    </para>
<screen>Name (<replaceable>COMMENT</replaceable>) &lt;<replaceable>E-MAIL</replaceable>&gt;</screen>
    <procedure>
     <step>
      <para>
       打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
      </para>
     </step>
     <step>
      <para>
       打开<guimenu>口令和密钥</guimenu>。
      </para>
     </step>
     <step>
      <para>
       从左侧面板中选择 <guimenu>GnuPG 密钥</guimenu>密钥环。
      </para>
     </step>
     <step>
      <para>
       从列表中选择<guimenu>个人 PGP 密钥</guimenu>。
      </para>
     </step>
     <step>
      <para>
       右键单击密钥并选择<menuchoice><guimenu>属性</guimenu> <guimenu>添加用户 ID</guimenu>
       </menuchoice>。
      </para>
     </step>
     <step>
      <para>
       在对话框中填写新用户 ID 的<guimenu>全名</guimenu>、<guimenu>电子邮件地址</guimenu>和<guimenu>密钥注释</guimenu>，然后单击<guimenu>确定</guimenu>。
      </para>
      <para>
       多数人将通过您的电子邮件地址在密钥服务器或其他密钥提供程序上找到您的密钥。请确定地址是正确的，再继续。
      </para>
     </step>
     <step>
      <para>
       输入通行口令，然后单击<guimenu>确定</guimenu>完成该过程。
      </para>
     </step>
    </procedure>
    
   </sect3>
   <sect3 xml:id="cha-gnome-crypto-modify-key-openpgp-edit-subkey">
    <title>编辑 OpenPGP 子密钥属性</title>
    <para>
     每个 OpenPGP 密钥都有一个仅用于签名的主密钥。子密钥用于加密和签名。这样，如果子密钥泄漏，则不需要撤销主密钥。
    </para>
    <procedure>
     <step>
      <para>
       打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
      </para>
     </step>
     <step>
      <para>
       打开<guimenu>口令和密钥</guimenu>。
      </para>
     </step>
     <step>
      <para>
       从列表中选择 <guimenu>GnuPG 密钥</guimenu>。
      </para>
     </step>
     <step>
      <para>
       从列表中选择<guimenu>个人 PGP</guimenu>。
      </para>
     </step>
     <step>
      <para>
       右键单击所选密钥，然后选择<guimenu>属性</guimenu>。
      </para>
     </step>
     <step>
      <para>
       选择密钥的属性。
      </para>
      </step>
     <step>
      <para>
       关闭对话框以确认更改。
      </para>
     </step>
    </procedure>
   </sect3>
   
  </sect2>

  <sect2 xml:id="cha-gnome-crypto-modify-key-ssh">
   <title>编辑安全外壳密钥属性</title>
   <para>
    本部分中的描述适用于全部 SSH 密钥。
   </para>
   <procedure>
    <step>
     <para>
      打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
     </para>
    </step>
    <step>
     <para>
      打开<guimenu>口令和密钥</guimenu>。
     </para>
    </step>
    <step>
     <para>
      从列表中选择 <guimenu>OpenSSH 密钥</guimenu>，然后右键单击要编辑的密钥。
     </para>
    </step>
    <step>
     <para>
      一个对话框即会打开，您可以在其中查看和编辑以下属性：
     </para>
     <formalpara>
      <title>算法：</title>
      <para>
       指定用于生成密钥的加密算法。
      </para>
     </formalpara>
     <formalpara>
      <title>位置：</title>
      <para>
       储存私用密钥的位置。
      </para>
     </formalpara>
     <formalpara>
      <title>指纹：</title>
      <para>
       精确标识密钥的唯一字符串。
      </para>
     </formalpara>
     <formalpara>
      <title>导出</title>
      <para>
       将密钥导出到文件。
      </para>
     </formalpara>
    </step>
    <step>
     <para>
      关闭对话框以确认更改。
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>
 
 <sect1 xml:id="cha-gnome-crypto-import-key">
  <title>导入密钥</title>

  <para>
   密钥可导出到文本文件中。这些文件在密钥的开头和末尾包含用户可读的文本。此格式称为 ASCII 封装的密钥。
  </para>

  <para>
   要导入密钥，请执行以下操作：
  </para>

  <procedure>
   <step>
    <para>
     打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
    </para>
   </step>
   <step>
    <para>
     打开<guimenu>口令和密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     单击左上角的 <guimenu>+</guimenu> 按钮。
    </para>
   </step>
   <step>
    <para>
     从列表中选择<guimenu>从文件导入</guimenu>。
    </para>
   </step>
   <step>
    <para>
     在对话框中选择要导入的密钥。SSH 公钥以 <filename>pub</filename> 结尾。
    </para>
    </step>
   <step>
    <para>
     单击<guimenu>打开</guimenu>导入密钥。
    </para>
   </step>
  </procedure>

  <para>
   也可以将密钥粘贴到<guimenu>口令和密钥</guimenu>中：
  </para>

  <procedure>
   <step>
    <para>
     选择 ASCII 封装的公共文本块，然后将其复制到剪贴板。
    </para>
   </step>
   <step>
    <para>
     打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
    </para>
   </step>
   <step>
    <para>
     打开<guimenu>口令和密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     单击左上角的 <guimenu>+</guimenu> 按钮。
    </para>
    </step>
   <step>
    <para>
     将密钥粘贴到相应的位置。
    </para>
   </step>
  </procedure>
 </sect1>
 
 <sect1 xml:id="cha-gnome-crypto-export-key">
  <title>导出密钥</title>

  <para>
   要导出密钥，请执行以下操作：
  </para>

  <procedure>
   <step>
    <para>
     打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
    </para>
   </step>
   <step>
    <para>
     打开<guimenu>口令和密钥</guimenu>。
    </para>
    <para>
     从左侧面板中选择要导出的 <guimenu>GnuPG 密钥</guimenu>密钥环。
    </para>
   </step>
   <step>
    <para>
     选择要导出的<guimenu>个人 PGP 密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     右键单击密钥，然后选择<guimenu>导出</guimenu>。
    </para>
   </step>
   <step>
    <para>
     要以 <filename>ASCII</filename> 格式储存密钥，请选择<guimenu>封装的 PGP 密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     选择位置并单击<guimenu>导出</guimenu>确认。
    </para>
   </step>
  </procedure>

 </sect1>
 <sect1 xml:id="cha-gnome-crypto-sign-key">
  <title>对密钥签名</title>

  <para>
   对其他人的密钥签名表示信任那个人。在对密钥签名前，请仔细检查密钥的指纹，确保密钥确实属于那个人。
  </para>

  <para>
   信任表示您对某人正确扩展信任网的能力的确信程度。如果某个密钥未经过您的签名，该密钥的有效性将由其签名以及您对签名人的信任程度来决定。
  </para>

  <procedure>
   <step>
    <para>
     打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
    </para>
   </step>
   <step>
    <para>
     打开<guimenu>口令和密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     导入要签名的密钥。
    </para>
   </step>
   <step>
    <para>
     从 <guimenu>GnuPG 密钥</guimenu>列表中选择导入的密钥。
    </para>
   </step>
   <step>
    <para>
     右键单击密钥，然后选择<menuchoice><guimenu>属性</guimenu> <guimenu>信任</guimenu>
     </menuchoice>。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>对此密钥签名</guimenu>按钮。
    </para>
   </step>
   <step>
    <para>
     选择检查密钥的仔细程度。
    </para>
   </step>
   <step>
    <para>
     决定是否要在以后撤销签名，以及是否要将您的签名公开。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>签名</guimenu>确认。
    </para>
   </step>
  </procedure>
 </sect1>
 

 
 <sect1 xml:id="cha-gnome-crypto-prefs-keyrings">
  <title>口令密钥环</title>

  <para>
   可以使用口令密钥环首选项来创建或去除密钥环、设置应用程序口令的默认密钥环，以及更改密钥环的解锁口令。要创建新密钥环，请执行以下步骤：
  </para>

  <procedure>
   <step>
   <para>
    打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
   </para>
   </step>
   <step>
    <para>
     打开<guimenu>口令和密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     单击左上角的 <guimenu>+</guimenu> 按钮。
    </para>
   </step>
   <step>
    <para>
     从列表中选择<guimenu>口令密钥环</guimenu>。
    </para>
   </step>
   <step>
    <para>
     为密钥环输入一个名称，然后单击<guimenu>添加</guimenu>。
    </para>
   </step>
   <step>
    <para>
     为密钥环设置一个新<guimenu>口令</guimenu>并确认，然后单击<guimenu>继续</guimenu>以创建密钥环。
    </para>
   </step>
  </procedure>

  <para>
   要更改现有密钥环的解锁口令，请右键单击<guimenu>口令</guimenu>选项卡中的密钥环，然后单击<guimenu>更改口令</guimenu>。需要提供旧口令才能进行更改。
  </para>

  <para>
   要更改应用程序口令的默认密钥环，请右键单击<guimenu>口令</guimenu>选项卡中的密钥环，然后单击<guimenu>设置为默认值</guimenu>。
  </para>
 </sect1>
 
 <sect1 xml:id="cha-gnome-crypto-prefs-servers">
  <title>密钥服务器</title>

  <para>
   通过定期与远程密钥服务器同步密钥可以使密钥保持最新。同步将确保您的全部密钥上具有最新的签名，这样信任网才会有效。
  </para>

  <procedure>
   <step>
    <para>
     打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
    </para>
   </step>
   <step>
    <para>
     打开<guimenu>口令和密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>选择要同步的 PGP 密钥。</para>
   </step>
   <step>
    <para>
     单击标题栏中的菜单按钮。
    </para>
   </step>
   <step>
    <para>
     选择<guimenu>同步并发布密钥</guimenu>。
    </para>
    <formalpara>
     <title>HKP 密钥服务器：</title>
     <para>
      HKP 密钥服务器是基于 Web 的普通密钥服务器，例如常用的 <literal>hkp://pgp.mit.edu:11371</literal>，也可从 <link xlink:href="http://pgp.mit.edu">http://pgp.mit.edu</link> 访问。
     </para>
    </formalpara>
    <formalpara>
     <title>LDAP 密钥服务器：</title>
     <para>
      LDAP 密钥服务器不常用，但使用标准 LDAP 协议提供密钥。<literal>ldap://keyserver.pgp.com</literal> 是一个不错的 LDAP 服务器。
     </para>
    </formalpara>
    <para>
     可以通过左侧的按钮<guimenu>添加</guimenu>或<guimenu>去除</guimenu>要使用的密钥服务器。要添加新的密钥服务器，请设置其类型、主机和端口（如果需要）。
    </para>
   </step>
   <step>
    <para>
     设置是否要自动发布公共密钥以及要使用的密钥服务器。设置是否要自动从密钥服务器检索密钥，以及是否要与密钥服务器同步修改的密钥。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>同步</guimenu>按钮同步您的密钥。
    </para>
   </step>
  </procedure>
 </sect1>
 
 <sect1 xml:id="cha-gnome-crypto-prefs-sharing">
  <title>密钥共享</title>

  <para>
   密钥共享由 DNS-SD（也称为 Bonjour 或 Rendevous）提供。启用密钥共享可将本地<guimenu>口令和密钥</guimenu>用户的公共密钥环添加到远程搜索对话框。使用这些本地密钥服务器通常会快于访问远程服务器。
  </para>

  <procedure>
   <step>
    <para>
     打开<guimenu>活动</guimenu>概览并键入 <literal>pass</literal>。
    </para>
   </step>
   <step>
    <para>
     打开<guimenu>口令和密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     从左侧面板中选择 <guimenu>GnuPG 密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     从列表中选择要共享的<guimenu>个人 PGP 密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     单击标题栏中的菜单按钮。
    </para>
   </step>
   <step>
    <para>
     选择<guimenu>同步并发布密钥</guimenu>。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>密钥服务器</guimenu>按钮查看密钥服务器列表。
    </para>
   </step>
   <step>
    <para>
     要发布密钥，请从菜单中选择服务器。关闭窗口并返回之前的对话框。
    </para>
   </step>
   <step>
    <para>
     单击<guimenu>同步</guimenu>完成该过程。
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
