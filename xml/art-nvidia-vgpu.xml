<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
  %entities;
]>
<article xml:id="article-nvidia-vgpu" xml:lang="en" version="5.0"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>&nvidia; virtual GPU (vGPU) Guide</title>
 <info><productname>&productname;</productname>
  <productnumber>&productnumber;</productnumber><date>
<?dbtimestamp format="B d, Y" ?></date>
 </info>
 <sect1 xml:id="configure-nvidia-vgpu-introduction">
  <title>Introduction</title>

  <para>
   &nvidia; vGPU is a graphics virtualization solution that provides multiple
   virtual machines (VMs) simultaneous access to one physical Graphics
   Processing Unit (GPU) on the &vmhost;. This article refers to the Volta and
   Ampere GPU architecture.
  </para>
 </sect1>
 <sect1 xml:id="configure-nvidia-vgpu-topology">
  <title>Topology</title>

  <sect2 xml:id="configure-nvidia-vgpu-architecture">
   <title>&nvidia; GPU architectures</title>
   <para>
    There are two types of GPU architectures:
   </para>
   <variablelist>
    <varlistentry>
     <term>Time-sliced vGPU architecture</term>
     <listitem>
      <para>
       Introduced on GPUs that are based on the &nvidia; Ampere GPU
       architecture. Only Ampere GPU cards can support MIG-backed vGPU.
      </para>
      <figure>
       <title>Time-sliced architecture</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="nvidia-vgpu-time-sliced.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="nvidia-vgpu-time-sliced.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Multi-Instance GPU (MIG) vGPU architecture</term>
     <listitem>
      <para>
       All GPU cards support time-sliced vGPU. For time-sliced vGPU
       architecture, Ampere GPU cards are based on Single Root I/O
       Virtualization (SR-IOV) mechanism. Volta and the earlier architecture
       are based on meditated device mechanism. These two mechanisms are
       transparent to a VM. However, they need different configurations from
       the host side.
      </para>
      <figure>
       <title>MIG-backed architecture</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="nvidia-vgpu-mig-backed.png" width="75%"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="nvidia-vgpu-mig-backed.png" width="75%"/>
        </imageobject>
       </mediaobject>
      </figure>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="configure-nvidia-vgpu-vgpu-types">
   <title>vGPU types</title>
   <para>
    Each physical GPU can support several different types of vGPUs. vGPU types
    have a fixed amount of frame buffer, the number of supported display heads,
    and maximum resolutions. NVIDIA has four types of vGPUs: A, B, C, and
    Q-series. &suse; currently supports Q and C-series.
   </para>
   <table>
    <title>vGPU types</title>
    <tgroup cols="2" align="left">
     <colspec colname="c1" colwidth="20*"/>
     <colspec colname="c2" colwidth="80*"/>
     <thead>
      <row>
       <entry>
        <para>
         vGPU series
        </para>
       </entry>
       <entry>
        <para>
         Optimal workload
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Q-series
        </para>
       </entry>
       <entry>
        <para>
         Virtual workstations for creative and technical professionals who
         require the performance and features of the &nvidia; Quadro
         technology.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         C-series
        </para>
       </entry>
       <entry>
        <para>
         Compute-intensive server workloads, for example, artificial
         intelligence (AI), deep learning, or high-performance computing (HPC).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         B-series
        </para>
       </entry>
       <entry>
        <para>
         Virtual desktops for business professionals and knowledge workers.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         A-series
        </para>
       </entry>
       <entry>
        <para>
         Application streaming or session-based solutions for virtual
         applications users.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
  </sect2>

  <sect2 xml:id="configure-nvidia-vgpu-valid-configurations">
   <title>Valid vGPU configurations on a single GPU</title>
   <sect3 xml:id="configure-nvidia-vgpu-valid-configurations-time-sliced">
    <title>Time-sliced vGPU configurations</title>
    <para>
     For time-sliced vGPUs, all vGPUs types must be the same:
    </para>
    <figure>
     <title>Example time-sliced vGPU configurations on &nvidia; Tesla M60</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="nvidia-vgpus-supported.png" width="75%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="nvidia-vgpus-supported.png" width="75%"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 xml:id="configure-nvidia-vgpu-valid-configurations-mig-backed">
    <title>MIG-backed vGPU configurations</title>
    <para>
     For MIG-backed vGPUs, vGPUs can be both homogeneous and mixed-type:
    </para>
    <figure>
     <title>Example MIG-backed vGPU configurations on &nvidia; A100 PCIe 40GB</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="nvidia-vgpus-supported2.png" width="75%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="nvidia-vgpus-supported2.png" width="75%"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
  </sect2>
 </sect1>
 <xi:include href="common_gfdl1.2_i.xml"/>
</article>
