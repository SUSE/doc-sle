<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="cha-virt-support">
 <title>Virtualization limits and support</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
  </dm:docmanager>
 </info>


 <sect1 xml:id="sec-architecture-support">
  <title>Architecture support</title>
  
  <sect2 xml:id="sec-kvm-requires-hardware">
   <title>&kvm; hardware requirements</title>
   <para>
    Currently, &suse; supports &kvm; full virtualization on &x86-64;, &arm64;,
    and &zseries; hosts.
   </para>
   <itemizedlist>
    <listitem>
     <para>
      On the &x86-64; architecture, &kvm; is designed around hardware
      virtualization features included in AMD* (AMD-V) and Intel* (VT-x) CPUs.
      It supports virtualization features of chipsets and PCI devices, such as
      an I/O Memory Mapping Unit (<xref linkend="gloss-vt-acronym-iommu"/>) and
      Single Root I/O Virtualization (<xref linkend="vt-io-sriov"/>). You can
      test whether your CPU supports hardware virtualization with the following
      command:
     </para>
     <screen>&prompt.user;egrep '(vmx|svm)' /proc/cpuinfo</screen>
     <para>
      If this command returns no output, your processor either does not support
      hardware virtualization, or this feature has been disabled in the BIOS or
      firmware.
     </para>
     <para>
      The following Web sites identify &x86-64; processors that support hardware
      virtualization:
      <link xlink:href="http://ark.intel.com/Products/VirtualizationTechnology"/>
      (for Intel CPUs), and <link xlink:href="http://products.amd.com/"/> (for
      AMD CPUs).
     </para>
    </listitem>
    <listitem>
     <para>
      On the &arm; architecture, &armv8;-A processors include support for virtualization.
     </para>
    </listitem>
   </itemizedlist>
   <note>
    <title>&kvm; kernel modules not loading</title>
    <para>
     The &kvm; kernel modules only load if the CPU hardware virtualization
     features are available.
    </para>
   </note>
   <para>
    <phrase os="sles"> The general minimum hardware requirements for the
    &vmhost; are the same as outlined in
    <xref
      linkend="sec-x86-requirements"/>.</phrase> <phrase os="sled;osuse">
    The general minimum hardware requirements for the &vmhost; are the same as
    for a physical machine.</phrase> However, additional RAM for each
    virtualized guest is needed. It should at least be the same amount that is
    needed for a physical installation. It is also strongly recommended to have
    at least one processor core or hyper-thread for each running guest.
   </para>
   <note os="sles">
    <title>&arm64;</title>
    <para>As &arm64; is a continuously-evolving platform and does not have a traditional standards
    and compliance certification program to enable interoperability with operating systems
    and hypervisors, please ask your vendor for the support statement on &sls;.</para>
   </note>
   <note os="sles">
    <title>&power;</title>
    <para>Running &kvm; or &xen; hypervisors on &power; platform is not supported.
    </para>
   </note>

  </sect2>
  <sect2 xml:id="sec-xen-requires-hardware">
   <title>&xen; hardware requirements</title>
   <para>
    &suse; supports &xen; on &x86-64;.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="virt-hypervisors-limits">
  <title>Hypervisors limits</title>
  <para os="sles;sled">
   New features and virtualization limits for &xen; and &kvm; are
   outlined in the <link xlink:href="https://www.suse.com/releasenotes/">Release
   Notes</link> for each Service Pack (SP).
  </para>
  <para>
    Only packages which are part of the official SLES repositories are supported.
    Conversely, all optional subpackages and plugins (for &qemu;, &libvirt;) provided 
    on <link xmlns:xlink="http://www.w3.org/1999/xlink"
        xlink:href="https://packagehub.suse.com/">packagehub</link> are not supported.
  </para>
  <para>
   For the maximum total virtual CPUs per host see <link xlink:href="https://documentation.suse.com/sles-15/html/SLES-all/article-vt-best-practices.html#sec-vt-best-perf-cpu-assign">recommendations in the Virtualization Best Practices Guide regarding over-commitment of physical CPUs</link>.
   The total number of virtual CPUs should be proportional to the number of available physical CPUs.	 
  </para>
  <note>
   <title>32-bit hypervisor</title>
   <para>
    With &productname; 11 SP2, we removed virtualization host facilities from 32-bit editions.
    32-bit guests are not affected and are fully supported using the provided 64-bit hypervisor.    
   </para>
  </note>
  <sect2 xml:id="virt-kvm-limits">
   <title>KVM limits</title>
   <para>
    Supported (and tested) virtualization limits of a &productname; &productnumber; host running
    Linux guests on &x86-64;. For other operating systems, refer to the specific vendor.
   </para>
<!--
   <itemizedlist>
    <title>Virtual machine limits</title>
    <listitem><para>Maximum virtual CPUs per VM: 288</para></listitem>
    <listitem><para>Maximum memory per VM: 4&nbsp;TiB</para></listitem>
   </itemizedlist>
   <itemizedlist>
    <title>Host limits</title>
    <listitem><para>Other limits are identical to those of &productname;.</para></listitem>
</itemizedlist>
-->
<table>
 <title>KVM limits</title>
 <tgroup cols="2">
  <colspec colnum="1" colname="1"/>
  <colspec colnum="2" colname="2"/>
  <tbody>
   <row>
    <entry><para>Maximum virtual CPUs per VM</para></entry>
    <entry><para>288</para></entry>
   </row>
   <row>
    <entry><para>Maximum memory per VM</para></entry>
    <entry><para>4&nbsp;TiB</para></entry>
   </row>
  </tbody>
 </tgroup>
</table>
  </sect2>
  <sect2 xml:id="virt-xen-limits">
      <title>Xen limits</title>
<!--
   <itemizedlist>
    <title>Virtual machine limits</title>
    <listitem><para>Maximum virtual CPUs per VM: 128 (HVM), 64 (HVM Windows guest) or 512 (PV)</para></listitem>
    <listitem><para>Maximum memory per VM: 2 TB (64bit guest), 16 GB (32-bit guest with PAE)</para></listitem>
   </itemizedlist>
   <itemizedlist>
    <title>Host limits</title>
    <listitem><para>Maximum total physical CPUs: 1024</para></listitem>
    <listitem><para>Maximum physical memory: 16 TB</para></listitem>
</itemizedlist>
-->
<table>
 <title>&xen; limits</title>
 <tgroup cols="2">
  <colspec colnum="1" colname="1"/>
  <colspec colnum="2" colname="2"/>
  <tbody>
   <row>
    <entry><para>Maximum virtual CPUs per VM</para></entry>
    <entry><para>128 (HVM), 64 (HVM Windows guest) or 512 (PV)</para></entry>
   </row>
   <row>
    <entry><para>Maximum memory per VM</para></entry>
    <entry><para>2&nbsp;TiB (64bit guest), 16&nbsp;GiB (32-bit guest with PAE)</para></entry>
   </row>
  </tbody>
 </tgroup>
</table>
  </sect2>
 </sect1>
 
 <sect1 xml:id="virt-support-hosts">
  <title>Supported host environments (hypervisors)</title>
  <para>
   Support status of &productname; &productnumber; running as a guest operating system on top of various virtualization hosts (hypervisors).
  </para>
  <!--
  <itemizedlist>
   <title>The following &suse; host environments are supported</title>
   <listitem><para>&sls; 11 SP4: Xen and KVM</para></listitem>
   <listitem><para>&sls; 12 SP1 to SP5: Xen and KVM</para></listitem>
   <listitem><para>&sls; 15 GA to SP3: Xen and KVM</para></listitem>
   -->
<!--   <listitem><para>SLES 15 SP1 to SP3: WSL 2</para></listitem> -->
<!--  </itemizedlist> -->
<table>
 <title>The following &suse; host environments are supported</title>
 <tgroup cols="2">
  <colspec colnum="1" colname="1"/>
  <colspec colnum="2" colname="2"/>
  <thead>
   <row>
    <entry><para>&sls;</para></entry>
    <entry><para>Hypervisors</para></entry>
   </row>
  </thead>
  <tbody>
   <row>
    <entry><para>&sls; 11 SP4</para></entry>
    <entry><para>Xen and KVM</para></entry>
   </row>
   <row>
    <entry><para>&sls; 12 SP1 to SP5</para></entry>
    <entry><para>Xen and KVM</para></entry>
   </row>
   <row>
    <entry><para>&sls; 15 GA to SP3</para></entry>
    <entry><para>Xen and KVM</para></entry>
   </row>
  </tbody>
 </tgroup>
</table>
  <itemizedlist>
   <title>The following third-party host environments are supported, please ask your vendors or refer to the approriate website for more information</title>
   <!-- better refer to the appropriate website instead of providing the exact version which is always moving... -->
   <listitem><para><link xlink:href="https://xenserver.org/">Citrix XenServer</link></para></listitem>
   <listitem><para><link xlink:href="https://www.windowsservercatalog.com/results.aspx?text=suse&amp;bCatID=1282&amp;avc=10&amp;ava=0&amp;OR=5">Microsoft Windows Server Catalog</link></para></listitem>
   <listitem><para><link xlink:href="https://www.nutanix.com/products/acropolis">Nutanix Acropolis Hypervisor with AOS</link></para></listitem>
   <listitem><para><link xlink:href="https://www.oracle.com/fr/virtualization/virtualbox/">Oracle VM</link></para></listitem>
   <listitem><para><link xlink:href="https://www.oracle.com/linux/">Oracle KVM</link></para></listitem>
   <listitem><para><link xlink:href="https://www.vmware.com/products/esxi-and-esx.html">VMware ESXi</link></para></listitem>
  </itemizedlist>
  <para>You can also search in the <link xlink:href="https://www.suse.com/yessearch/Search.jsp">SUSE YES certification Database</link>.</para>
  <itemizedlist>
   <title>The level of support is as follows</title>
   <listitem><para>Support for SUSE host operating systems is full L3 (both for the guest and host) in accordance with the respective <link xlink:href="https://www.suse.com/lifecycle/">product life cycle</link>.</para></listitem>
   <listitem><para>&suse; provides full L3 support for &productname; guests within third-party host environments.</para></listitem>
   <listitem><para>Support for the host and cooperation with &productname; guests must be provided by the host system's vendor.</para></listitem>
  </itemizedlist>
 </sect1>

 <sect1 xml:id="virt-support-guests">
  <title>Supported guest operating systems</title>
  <para>
   This section lists the support status for various guest operating systems
   virtualized on top of &productname; &productnumber; for &kvm; and &xen;
   hypervisors. All guest operating
   systems are supported both fully-virtualized (<quote>FV</quote> in the
   following table) and paravirtualized (<quote>PV</quote> in the following
   table) with one exception: Windows, which is only supported fully-virtualized,
   (but it can use PV drivers <link xlink:href="https://www.suse.com/products/vmdriverpack/"/>).
   All guest operating systems are supported both in 32-bit and 64-bit flavors, 
   unless stated otherwise.
  </para>
  <itemizedlist>
   <title>Since &sls; 12 SP3, all the following guest operating systems are fully supported
   (L3):</title>
   <listitem><para>&sls; 10 SP4</para></listitem>
   <listitem><para>&sls; 11 SP4</para></listitem>
   <listitem><para>&sls; 12 SP3, SP4, SP5</para></listitem>
   <listitem><para>&sls; 15 SP1, SP2, SP3</para></listitem>
   <listitem><para>Windows Server 2008 SP2+, 2008 R2 SP1+, 2012+, 2012 R2+, 2016, 2019</para></listitem>
  </itemizedlist>
  <itemizedlist>
   <title>The following guest operating systems are supported as a technology
   preview (L2, fixes if reasonable):</title>
   <listitem><para>SLED 15 SP1</para></listitem>
  </itemizedlist>

  <itemizedlist>
   <title>The following &redhat; guest operating systems are fully supported
   (L3) if the customer has purchased Expanded Support, otherwise they will be
   supported on a best-effort basis (L2, fixes if reasonable):</title>
   <listitem><para>RHEL 5.11+, 6.9+, 7.7+, 8.0+</para></listitem>
  </itemizedlist>
  <note>
   <title>RHEL PV drivers</title>
   <para>Since RHEL 7.2 &redhat;, removed &xen; PV drivers.</para>
  </note>

  <itemizedlist>
   <title>The following guest operating systems are supported on a best-effort
   basis (L2, fixes if reasonable):</title>
   <listitem><para>Windows 8+, 8.1+, 10+</para></listitem>
  </itemizedlist>

  <sect2 xml:id="sec-kvm-requires-guests-virt-drivers">
   <title>Availability of paravirtualized drivers</title>
   <para>
    To improve the performance of the guest operating system, paravirtualized
    drivers are provided when available. Although they are not required, it is
    strongly recommended to use them. The paravirtualized drivers are available
    as follows:
   </para>
   <variablelist>
    <varlistentry os="osuse">
     <term>&productname;</term>
     <listitem><para>Included in kernel</para></listitem>
    </varlistentry>
    <varlistentry>
     <term>&sls; 12 / 12 SP1 / 12 SP2</term>
     <listitem><para>Included in kernel</para></listitem>
    </varlistentry>
    <varlistentry os="sles;sled">
     <term>&sls; 11 / 11 SP1 / 11 SP2 / 11 SP3 / 11 SP4</term>
     <listitem><para>Included in kernel</para></listitem>
    </varlistentry>
    <varlistentry os="sles;sled">
     <term>&sls; 10 SP4</term>
     <listitem><para>Included in kernel</para></listitem>
    </varlistentry>
    <varlistentry>
     <term>&redhat;</term>
     <listitem><para>Available since &rhel; 5.4. Starting from 7.2 &rhel; removed the PV drivers.</para></listitem>
    </varlistentry>
    <varlistentry>
     <term>Windows</term>
     <listitem><para>&suse; has developed virtio-based drivers for Windows, which are
     available in the Virtual Machine Driver Pack (VMDP). For more
     information, see
     <link xlink:href="https://www.suse.com/products/vmdriverpack/"/>.
     </para></listitem>
    </varlistentry>
   </variablelist>
   <note>
    <title>PVops kernel</title>
    <para>Since &sls; 12SP2 we switch to a PVops kernel, and we are no more using a dedicated kernel-xen.
    dom0 kernel-default+kernel-xen was replaced with kernel-default, domU PV kernel-xen was replaced by kernel-default,
    domU HVM kernel-default+xen-kmp was replaced by kernel-default, dom0 toolstack still load all backend drivers.
    </para>
   </note>
  </sect2>
 </sect1>
 
 <sect1 xml:id="virt-migration-support">
  <title>Supported VM migration scenarios</title>
  <para>
   &productname; supports migrating a virtual machine from one physical host to another.
  </para>
  <sect2 xml:id="virt-migration-offline">
   <title>Offline migration scenarios</title>
   <para>
    &productname; supports offline migration (the VM needs to be shut down prior to the migration), from SLE 12 to &productname; &productnumber;.
    The following host operating system combinations are fully supported (L3 in accordance with the respective <link xlink:href="https://www.suse.com/lifecycle/">product life cycle</link>).
   </para>
<!--
   <itemizedlist>
    <title>Offline supported migrating guests from one host to another</title>
    <listitem><para>SLES 12 SP3 to SLES 12 SP4</para></listitem>
    <listitem><para>SLES 12 SP3 to SLES 12 SP5</para></listitem>
    <listitem><para>SLES 12 SP3 to SLES 15</para></listitem>
    <listitem><para>SLES 12 SP4 to SLES 12 SP5</para></listitem>
    <listitem><para>SLES 12 SP4 to SLES 15 (KVM only)</para></listitem>
    <listitem><para>SLES 12 SP4 to SLES 15 SP1</para></listitem>
    <listitem><para>SLES 12 SP5 to SLES 15 SP1</para></listitem>
    <listitem><para>SLES 15 GA to SLES 15 SP1</para></listitem>
    <listitem><para>SLES 15 GA to SLES 15 SP2</para></listitem>
    <listitem><para>SLES 15 SP1 to SLES 15 SP2</para></listitem>
    <listitem><para>SLES 15 SP1 to SLES 15 SP3</para></listitem>
    <listitem><para>SLES 15 SP2 to SLES 15 SP3</para></listitem>
   </itemizedlist>
   -->
<table>
 <title>Offline supported migrating guests from &sls; 12 SP3</title>
 <tgroup cols="2">
  <colspec colnum="1" colname="1"/>
  <colspec colnum="2" colname="2"/>
  <thead>
   <row>
    <entry><para>Host Source Product Name</para></entry>
    <entry><para>To Host Target</para></entry>
   </row>
  </thead>
  <tbody>
   <row>
    <entry morerows='3'><para>&sls; 12 SP3</para></entry>
    <entry><para>SLES 12 SP3</para></entry>
   </row>
   <row>
    <entry><para>SLES 12 SP4</para></entry>
   </row>
   <row>
    <entry><para>SLES 12 SP5</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 GA</para></entry>
   </row>
  </tbody>
 </tgroup>
</table>
<table>
 <title>Offline supported migrating guests from &sls; 12 SP4</title>
 <tgroup cols="2">
  <colspec colnum="1" colname="1"/>
  <colspec colnum="2" colname="2"/>
  <thead>
   <row>
    <entry><para>Host Source Product Name</para></entry>
    <entry><para>To Host Target</para></entry>
   </row>
  </thead>
  <tbody>
   <row>
    <entry morerows='3'><para>&sls; 12 SP4</para></entry>
    <entry><para>SLES 12 SP4</para></entry>
   </row>
   <row>
    <entry><para>SLES 12 SP5</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 (KVM only)</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 SP1</para></entry>
   </row>
  </tbody>
 </tgroup>
</table>
<table>
 <title>Offline supported migrating guests from &sls; 12 SP5</title>
 <tgroup cols="2">
  <colspec colnum="1" colname="1"/>
  <colspec colnum="2" colname="2"/>
  <thead>
   <row>
    <entry><para>Host Source Product Name</para></entry>
    <entry><para>To Host Target</para></entry>
   </row>
  </thead>
  <tbody>
   <row>
    <entry morerows='2'><para>&sls; 12 SP5</para></entry>
    <entry><para>SLES 12 SP5</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 SP1</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 SP2</para></entry>
   </row>
  </tbody>
 </tgroup>
</table>
<table>
 <title>Offline supported migrating guests from &sls; 15 GA</title>
 <tgroup cols="2">
  <colspec colnum="1" colname="1"/>
  <colspec colnum="2" colname="2"/>
  <thead>
   <row>
    <entry><para>Host Source Product Name</para></entry>
    <entry><para>To Host Target</para></entry>
   </row>
  </thead>
  <tbody>
   <row>
    <entry morerows='2'><para>&sls; 15 GA</para></entry>
    <entry><para>SLES 15 GA</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 SP1</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 SP2</para></entry>
   </row>
  </tbody>
 </tgroup>
</table>
<table>
 <title>Offline supported migrating guests from &sls; 15 SP1</title>
 <tgroup cols="2">
  <colspec colnum="1" colname="1"/>
  <colspec colnum="2" colname="2"/>
  <thead>
   <row>
    <entry><para>Host Source Product Name</para></entry>
    <entry><para>To Host Target</para></entry>
   </row>
  </thead>
  <tbody>
   <row>
    <entry morerows='2'><para>&sls; 15 SP1</para></entry>
    <entry><para>SLES 15 SP1</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 SP2</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 SP3</para></entry>
   </row>
  </tbody>
 </tgroup>
</table>
<table>
 <title>Offline supported migrating guests from &sls; 15 SP2</title>
 <tgroup cols="2">
  <colspec colnum="1" colname="1"/>
  <colspec colnum="2" colname="2"/>
  <thead>
   <row>
    <entry><para>Host Source Product Name</para></entry>
    <entry><para>To Host Target</para></entry>
   </row>
  </thead>
  <tbody>
   <row>
    <entry morerows='1'><para>&sls; 15 SP2</para></entry>
    <entry><para>SLES 15 SP2</para></entry>
   </row>
   <row>
    <entry><para>SLES 15 SP3</para></entry>
   </row>
  </tbody>
 </tgroup>
</table>
</sect2>

<sect2 xml:id="virt-migration-live">
 <title>Live migration scenarios</title>
 <para>
  Support status of various live migration scenarios when running virtualized on top of SLES.
  Please also refer to the supported <link xlink:href="https://documentation.suse.com/sles/15-SP2/html/SLES-all/cha-libvirt-managing.html#libvirt-admin-live-migration-requirements">live migration requirements</link>.
  The following host operating system combinations are fully supported (L3 in accordance with the respective <link xlink:href="https://www.suse.com/lifecycle">product life cycle</link>).
 </para>
 <table>
  <title>Supported live-migrating guests from SLES 12 SP3</title>
  <tgroup cols="2">
   <colspec colnum="1" colname="1"/>
   <colspec colnum="2" colname="2"/>
   <thead>
    <row>
     <entry><para>Host Source Product Name</para></entry>
     <entry><para>To Host Target</para></entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry morerows='1'><para>&sls; 12 SP3</para></entry>
     <entry><para>SLES 12 SP3</para></entry>
    </row>
    <row>
     <entry><para>SLES 12 SP4</para></entry>
    </row>
   </tbody>
  </tgroup>
 </table>
 <table>
  <title>supported live-migrating guests from SLES 12 SP4</title>
  <tgroup cols="2">
   <colspec colnum="1" colname="1"/>
   <colspec colnum="2" colname="2"/>
   <thead>
    <row>
     <entry><para>Host Source Product Name</para></entry>
     <entry><para>To Host Target</para></entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry morerows='2'><para>&sls; 12 SP4</para></entry>
     <entry><para>SLES 12 SP4</para></entry>
    </row>
    <row>
     <entry><para>SLES 12 SP5</para></entry> 
    </row>
    <row>
     <entry><para>SLES 15 GA (KVM only)</para></entry>
    </row>
<!--    <row>
     <entry><para>SLES 15 SP1</para></entry>
     </row>
-->
   </tbody>
  </tgroup>
 </table>
 <table>
  <title>Supported live-migrating guests from SLES 12 SP5</title>
  <tgroup cols="2">
   <colspec colnum="1" colname="1"/>
   <colspec colnum="2" colname="2"/>
   <thead>
    <row>
     <entry><para>Host Source Product Name</para></entry>
     <entry><para>To Host Target</para></entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry morerows='1'><para>&sls; 12 SP5</para></entry>
     <entry><para>SLES 12 SP5</para></entry>
    </row>
    <row>
     <entry><para>SLES 15 SP1</para></entry>
    </row>
   </tbody>
  </tgroup>
 </table>
 <table>
  <title>Supported live-migrating guests from SLES 15</title>
  <tgroup cols="2">
   <colspec colnum="1" colname="1"/>
   <colspec colnum="2" colname="2"/>
   <thead>
    <row>
     <entry><para>Host Source Product Name</para></entry>
     <entry><para>To Host Target</para></entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry morerows='1'><para>&sls; 15 GA</para></entry>
     <entry><para>SLES 15 GA</para></entry>
    </row>
    <row>
     <entry><para>SLES 15 SP1</para></entry>
    </row>
   </tbody>
  </tgroup>
 </table>
 <table>
  <title>Supported live-migrating guests from SLES 15 SP1</title>
  <tgroup cols="2">
   <colspec colnum="1" colname="1"/>
   <colspec colnum="2" colname="2"/>
   <thead>
    <row>
     <entry><para>Host Source Product Name</para></entry>
     <entry><para>To Host Target</para></entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry morerows='1'><para>&sls; 15 SP1</para></entry>
     <entry><para>SLES 15 SP1</para></entry>
    </row>
    <row>
     <entry><para>SLES 15 SP2</para></entry>
    </row>
   </tbody>
  </tgroup>
 </table>
 <table>
  <title>Supported live-migrating guests from SLES 15 SP2</title>
  <tgroup cols="2">
   <colspec colnum="1" colname="1"/>
   <colspec colnum="2" colname="2"/>
   <thead>
    <row>
     <entry><para>Host Source Product Name</para></entry>
     <entry><para>To Host Target</para></entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry morerows='1'><para>&sls; 15 SP2</para></entry>
     <entry><para>SLES 15 SP2</para></entry>
    </row>
    <row>
     <entry><para>SLES 15 SP3</para></entry>
    </row>
   </tbody>
  </tgroup>
 </table>
 <table>
  <title>Supported live-migrating guests from SLES 15 SP3</title>
  <tgroup cols="2">
   <colspec colnum="1" colname="1"/>
   <colspec colnum="2" colname="2"/>
   <thead>
    <row>
     <entry><para>Host Source Product Name</para></entry>
     <entry><para>To Host Target</para></entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry><para>&sls; 15 SP3</para></entry>
     <entry><para>SLES 15 SP3</para></entry>
    </row>
   </tbody>
  </tgroup>
 </table>
   <!--
   <itemizedlist>
    <title>supported live-migrating guests from one host to another</title>
    <listitem><para>SLES 12 SP3 to SLES 12 SP4</para></listitem>
    <listitem><para>SLES 12 SP4 to SLES 12 SP4</para></listitem>
    <listitem><para>SLES 12 SP4 to SLES 12 SP5</para></listitem>
    <listitem><para>SLES 12 SP4 to SLES 15 (KVM only)</para></listitem>
    <listitem><para>SLES 12 SP4 to SLES 15 SP1</para></listitem>
    <listitem><para>SLES 12 SP5 to SLES 12 SP5</para></listitem>
    <listitem><para>SLES 12 SP5 to SLES 15 SP1</para></listitem>
    <listitem><para>SLES 15 GA to SLES 15 GA</para></listitem>
    <listitem><para>SLES 15 GA to SLES 15 SP1</para></listitem>
    <listitem><para>SLES 15 SP1 to SLES 15 SP1</para></listitem>
    <listitem><para>SLES 15 SP1 to SLES 15 SP2</para></listitem>
    <listitem><para>SLES 15 SP2 to SLES 15 SP2</para></listitem>
    <listitem><para>SLES 15 SP2 to SLES 15 SP3</para></listitem>
    <listitem><para>SLES 15 SP3 to SLES 15 SP3</para></listitem>
    </itemizedlist>
    -->
   <note>
    <title>&xen; live migration</title>
    <para>
     &xen; Live migration between SLE 11 and SLE 12 is not supported because of the different toolstacks.
     SLE10/SLE11 uses xend to manage guests. Starting from SLE12, it uses libxl to manage guests. Live migration from xend to libxl is not implemented, nothing in a libxl based toolstack is able to receive guests from xend. Furthermore the data format which describes guest configuration differs slightly between xend and libxl. For more details see 
     <link xlink:href="https://documentation.suse.com/sles/15-SP2/html/SLES-all/cha-xmtoxl.html">XM, XL Toolstacks and Libvirt framework</link>.
    </para>
   </note>
  </sect2>
 </sect1>

 <sect1 xml:id="virt-support-feature-support">
  <title>Feature support</title>
  <para/>

  <sect2 xml:id="virt-support-feature-support-host">
   <title>&xen; host (Dom0)</title>
   <table>
    <title>Feature support&mdash;host (<literal>Dom0</literal>)</title>
    <tgroup cols="2">
     <colspec colnum="1" colname="1"/>
     <colspec colnum="2" colname="2"/>
     <thead>
      <row>
       <entry> <para> Features </para> </entry>
       <entry> <para> &xen; </para> </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry> <para> Network and block device hotplugging </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Physical <xref linkend="gloss-vt-cpu-hotplug"/> </para> </entry>
       <entry> <para> No </para> </entry>
      </row>
      <row>
       <entry> <para> Virtual <xref linkend="gloss-vt-cpu-hotplug"/> </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Virtual <xref linkend="gloss-vt-cpu-pinning"/> </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Virtual <xref linkend="gloss-vt-cpu-capping"/> </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Intel* VT-x2: FlexPriority, FlexMigrate (migration constraints apply to dissimilar CPU architectures) </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Intel* VT-d2 (DMA remapping with interrupt filtering and queued invalidation) </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> AMD* IOMMU (I/O page table with guest-to-host physical address translation) </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <note>
    <title>Adding or removing physical CPUs at runtime is not supported</title>
    <para>
     The addition or removal of physical CPUs at runtime is not supported.
     However, virtual CPUs can be added or removed for each &vmguest; while offline.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="virt-support-feature-support-pv">
   <title>Xen paravirtualized guest (DomU)</title>
   <table>
    <title>Feature support&mdash;paravirtualized guest</title>
    <tgroup cols="2">
     <colspec colnum="1" colname="1"/>
     <colspec colnum="2" colname="2"/>
     <thead>
      <row>
       <entry> <para> Features </para> </entry> <entry>
        <para> &xen; </para> </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry> <para> Virtual network and virtual block device hotplugging </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Virtual <xref linkend="gloss-vt-cpu-hotplug"/> </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Virtual <xref linkend="gloss-vt-cpu-overcommit"/> </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Dynamic virtual memory resize </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry>
        <para> VM save and restore </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> VM live migration </para> </entry>
       <entry> <para> Yes (See <xref linkend="libvirt-admin-live-migration-requirements"/>) </para> </entry>
      </row>
      <row>
       <entry> <para> Advanced debugging with GDBC </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Dom0 metrics visible to VM </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Memory ballooning </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> &pciback; </para> </entry>
       <entry> <para> Yes (&netware; guests are excluded) </para> </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <para>
    For live migration, both source and target system architectures need to
    match; that is, the processors (AMD* or Intel*) must be the same. Unless
    CPU ID masking is used, such as with Intel FlexMigration, the target should
    feature the same processor revision or a more recent processor revision
    than the source. If VMs are moved among different systems, the same rules
    apply for each move. To avoid failing optimized code at runtime or
    application start-up, source and target CPUs need to expose the same
    processor extensions. &xen; exposes the physical CPU extensions to the VMs
    transparently. To summarize, guests can be 32-bit or 64-bit, but the
    <xref linkend="gloss-vt-vhs"/> must be identical.
   </para>
   <note>
    <title>Intel flexMigration</title>
    <para>
     For machines that support Intel FlexMigration, CPU-ID masking and faulting
     allow more flexibility in cross-CPU migration.
    </para>
   </note>
  </sect2>
  <sect2 xml:id="virt-support-feature-support-fv">
   <title>Fully virtualized guest</title>
   <table>
    <title>Feature support&mdash;fully virtualized guest</title>
    <tgroup cols="3">
     <thead>
      <row>
       <entry> <para> Features </para> </entry>
       <entry> <para> &xen; </para> </entry>
       <entry> <para> &kvm; </para> </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry> <para> Virtual network and virtual block device hotplugging </para> </entry>
       <entry> <para> Yes </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Virtual <xref linkend="gloss-vt-cpu-hotplug"/> </para> </entry>
       <entry> <para> No </para> </entry>
       <entry> <para> No </para> </entry>
      </row>
      <row>
       <entry> <para> Virtual <xref linkend="gloss-vt-cpu-overcommit"/> </para> </entry>
       <entry> <para> Yes </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Dynamic virtual memory resize </para> </entry>
       <entry> <para> Yes </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> VM save and restore </para> </entry>
       <entry> <para> Yes </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> VM Live Migration </para> </entry>
       <entry> <para> Yes (See <xref linkend="libvirt-admin-live-migration-requirements"/>) </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> VM snapshot </para> </entry>
       <entry> <para> Yes </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Advanced debugging with GDBC </para> </entry>
       <entry> <para> Yes </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> Dom0 metrics visible to VM </para> </entry>
       <entry> <para> Yes </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
      <row>
       <entry> <para> &pciback; </para> </entry>
       <entry> <para> Yes </para> </entry>
       <entry> <para> Yes </para> </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <note>
    <title>Windows guest</title>
    <para>
     Hotplugging of virtual network and virtual block devices, and resizing,
     shrinking, and restoring dynamic virtual memory are supported in &xen; and
     &kvm; only if PV drivers are being used (<link xlink:href="https://www.suse.com/products/vmdriverpack/">VMDP</link>).
    </para>
   </note>
   <para>
    For &kvm;, a detailed description of supported limits, features,
    recommended settings and scenarios, and other useful information is
    maintained in <filename>kvm-supported.txt</filename>. This file is part of
    the &kvm; package and can be found in
    <filename>/usr/share/doc/packages/kvm</filename>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="vt-support-nested">
  <title>Nested virtualization</title>
  <para>
    Nested virtualization allows you to run a virtual machine inside another VM
    while still using hardware acceleration from the host.
    It has very bad performance, and add more complexity while debugging.
    Nested is mostly used for testing purposes.
   In &sls; Nested virtualization is a Technology Preview. It is only provided
   for testing purposes and is not supported. Bugs can be reported but
   they will be treated with low priority.
   Any attempt to live migrate or save/restore VMs in the presence of nested 
   virtualization is also explicitly unsupported.
  </para>
 </sect1>

 <!-- End X86_64 only -->
</chapter>
