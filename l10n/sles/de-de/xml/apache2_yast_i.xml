<?xml version="1.0" encoding="UTF-8"?>
<sect2 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="apache2_yast_i.xml" version="5.0" xml:id="sec-apache2-configuration-yast">
 <title>Konfigurieren von Apache mit YaST</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>Ja</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  Zur Konfiguration des Webservers mit YaST starten Sie YaST, und wählen Sie <menuchoice> <guimenu>Netwerkdienste</guimenu> <guimenu>HTTP-Server</guimenu> </menuchoice>. Wenn Sie dieses Modul zum ersten Mal starten, wird der <guimenu>HTTP-Server-Assistent</guimenu> geöffnet und sie werden aufgefordert, einige grundlegende Entscheidungen zur Verwaltung des Servers zu treffen. Nach Fertigstellung des Assistenten wird das Dialogfeld <guimenu>HTTP-Server-Konfiguration</guimenu> geöffnet, sobald Sie das <guimenu>HTTP-Server</guimenu>-Modul aufrufen. Weitere Informationen finden Sie unter <xref linkend="sec-apache2-configuration-yast-server-configuration"/>.
 </para>
 <sect3 xml:id="sec-apache2-configuration-yast-wizard">
  <title>HTTP-Server-Assistent</title>
  <para>
   Der HTTP-Server-Assistent besteht aus fünf Schritten. Im letzten Schritt des Assistenten können Sie den Expertenkonfigurationsmodus aufrufen, in dem Sie weitere spezielle Einstellungen vornehmen können.
  </para>
  <sect4 xml:id="sec-apache2-configuration-yast-wizard-network-device">
   <title>Netzwerkgeräteauswahl</title>
   <para>
    Geben Sie hier die Netzwerkschnittstellen und -ports an, die von Apache auf eingehende Anfragen überwacht werden. Sie können eine beliebige Kombination aus bestehenden Netzwerkschnittstellen und zugehörigen IP-Adressen auswählen. Sie können Ports aus allen drei Bereichen (Well-Known-Ports, registrierte Ports und dynamische oder private Ports) verwenden, sofern diese nicht für andere Dienste reserviert sind. Die Standardeinstellung ist die Überwachung aller Netzwerkschnittstellen (IP-Adressen) an Port <systemitem>80</systemitem>.
   </para>
   <para>
    Aktivieren Sie <guimenu>Firewall-Port öffnen</guimenu>, um die vom Webserver überwachten Ports in der Firewall zu öffnen. Dies ist erforderlich, um den Webserver im Netzwerk (LAN, WAN oder Internet) verfügbar zu machen. Das Schließen des Ports ist nur in Testsituationen sinnvoll, in denen kein externer Zugriff auf den Webserver erforderlich ist. Wenn Sie über mehrere Netzwerkschnittstellen verfügen, klicken Sie auf <guimenu>Firewall-Details</guimenu>, um festzulegen, an welchen Schnittstellen die Ports geöffnet werden sollen.
   </para>
   <para>
    Klicken Sie auf  <guimenu>Weiter</guimenu>, um mit der Konfiguration fortzufahren.
   </para>
  </sect4>
  <sect4 xml:id="sec-apache2-configuration-yast-wizard-modules">
   <title>Module</title>
   <para>
    Mit der Konfigurationsoption <guimenu>Module</guimenu> aktivieren bzw. deaktivieren Sie die vom Webserver unterstützten Skriptsprachen. Informationen zur Aktivierung bzw. Deaktivierung anderer Module erhalten Sie unter <xref linkend="sec-apache2-configuration-yast-server-configuration-modules"/>. Klicken Sie auf <guimenu>Weiter</guimenu>, um das nächste Dialogfeld zu öffnen.
   </para>
  </sect4>
  <sect4 xml:id="sec-apache2-configuration-yast-wizard-default-host">
   <title>Standardhost</title>
   <para>
    Diese Option betrifft den Standard-Webserver. Wie in <xref linkend="sec-apache2-configuration-manually-vhost"/> beschrieben, kann Apache von einem einzigen Computer mehrere virtuelle Hosts bedienen. Der erste in der Konfigurationsdatei deklarierte virtuelle Host wird im Allgemeinen als <emphasis>Standardhost</emphasis> bezeichnet. Alle nachfolgenden virtuellen Hosts übernehmen die Konfiguration des Standardhosts.
   </para>
   <para>
    Wenn Sie die Hosteinstellungen (auch als <emphasis>Direktiven</emphasis> bezeichnet) bearbeiten möchten, wählen Sie den entsprechenden Eintrag in der Tabelle aus, und klicken Sie auf <guimenu>Bearbeiten</guimenu>. Zum Hinzufügen neuer Direktiven klicken Sie auf <guimenu>Hinzufügen</guimenu>. Zum Löschen einer Direktive wählen Sie die Direktive aus und klicken Sie auf <guimenu>Löschen</guimenu>.
   </para>
   <figure xml:id="fig-apache2-configuration-yast-host">
    <title>HTTP-Server-Assistent: Standardhost</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata width="75%" fileref="yast2_apache_wizard3.png"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_apache_wizard3.png"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Für den Server gelten folgende Standardeinstellungen:
   </para>
   <variablelist>
    <varlistentry>
     <term><systemitem>Document-Root</systemitem>
     </term>
     <listitem>
      <para>
       Der absolute Pfad des Verzeichnisses, aus dem Apache die Dateien für diesen Host bedient. Dies ist standardmäßig <filename>/srv/www/htdocs</filename>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>Alias</systemitem>
     </term>
     <listitem>
      <para>
       Mit <systemitem>Alias</systemitem>-Direktiven können URLs zu Speicherorten in physischen Dateisystemen zugeordnet werden. Dies bedeutet, dass über eine URL sogar auf Pfade im Dateisystem außerhalb des <literal>Document Root</literal> zugegriffen werden kann, sofern die URL via Aliasing auf diesen Pfad verweist.
      </para>
      <para>
       Der vorgegebene <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server-</phrase></phrase> <systemitem>Alias</systemitem>
       <filename>/icons</filename> für die in der Verzeichnisindex-Ansicht angezeigten Apache-Symbole verweist auf <filename>/usr/share/apache2/icons</filename>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>ScriptAlias</systemitem>
     </term>
     <listitem>
      <para>
       Ähnlich wie die <systemitem>Alias</systemitem>-Direktive ordnet die <systemitem>ScriptAlias</systemitem>-Direktive eine URL einem Speicherort im Dateisystem zu. Der Unterschied besteht darin, dass <systemitem>ScriptAlias</systemitem> als Zielverzeichnis einen CGI-Speicherort für die Ausführung von CGI-Skripten festlegt.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>Verzeichnis</systemitem>
     </term>
     <listitem>
      <para>
       Unter den <systemitem>Verzeichnis</systemitem>-Einstellungen können Sie eine Gruppe von Konfigurationsoptionen zusammenfassen, die nur für das angegebene Verzeichnis gelten.
      </para>
      <para>
       Hier werden auch die Zugriffs- und Anzeigeoptionen für die Verzeichnisse <filename>/srv/www/htdocs</filename>, <filename>/usr/share/apache2/icons</filename> und <filename>/srv/www/cgi-bin</filename> konfiguriert. Eine Änderung dieser Standardeinstellungen sollte nicht erforderlich sein.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>Einbeziehen</systemitem>
     </term>
     <listitem>
      <para>
       Hier können weitere Konfigurationsdateien hinzugefügt werden. Zwei <systemitem>Include</systemitem>-Direktiven sind bereits vorkonfiguriert: <filename>/etc/apache2/conf.d/</filename> ist das Verzeichnis für die Konfigurationsdateien externer Module. Durch diese Direktive werden alle Dateien in diesem Verzeichnis mit der Erweiterung <filename>.conf</filename> eingeschlossen. Durch die zweite Direktive, <filename>/etc/apache2/conf.d/apache2-manual.conf</filename>, wird die Konfigurationsdatei <filename>apache2-manual</filename> eingeschlossen.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>Servername</systemitem>
     </term>
     <listitem>
      <para>
       Hier wird die Standard-URL festgelegt, über die Clients den Webserver kontaktieren. Verwenden Sie einen qualifizierten Domänennamen (FQDN), um den Webserver unter <literal>http://<replaceable>FQDN</replaceable>/</literal> zu erreichen. Alternativ können Sie auch die IP-Adresse verwenden. Geben Sie hier keinen willkürlichen Namen ein – der Server muss unter diesem Namen <quote>bekannt</quote> sein.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><systemitem>E-Mail des Serveradministrators</systemitem>
     </term>
     <listitem>
      <para>
       Hier geben Sie die E-Mail-Adresse des Serveradministrators ein. Diese Adresse ist beispielsweise auf den von Apache erstellten Fehlerseiten angegeben.
      </para>
     </listitem>
    </varlistentry>


   </variablelist>
   <para>
    Klicken Sie am Ende der Seite <guimenu>Standardhost</guimenu> auf <guimenu>Weiter</guimenu>, um mit der Konfiguration fortzufahren.
   </para>
  </sect4>
  <sect4 xml:id="sec-apache2-configuration-yast-wizard-virtual-hosts">
   <title>Virtuelle Hosts</title>
   <para>
    In diesem Schritt zeigt der Assistent eine Liste der bereits konfigurierten virtuellen Hosts an (siehe <xref linkend="sec-apache2-configuration-manually-vhost"/>). Wenn Sie vor dem Starten des YaST-HTTP-Assistenten keine manuellen Änderungen vorgenommen haben, ist kein virtueller Host vorhanden.
   </para>
   <para>
    Zum Hinzufügen eines Hosts klicken Sie auf <guimenu>Hinzufügen</guimenu>, um ein Dialogfeld zu öffnen, in das Sie grundlegende Informationen über den Host eingeben, z. B. <guimenu>Servername</guimenu>, <guimenu>Übergeordnetes Verzeichnis der Server-Inhalte</guimenu> (<systemitem>DocumentRoot</systemitem>) und <guimenu>Administrator-E-Mail</guimenu>. Unter  <guimenu>Server-Auflösung</guimenu> legen Sie fest, wie der Host identifiziert wird (nach seinem Namen oder nach seiner IP-Adresse). Geben Sie den Namen oder die IP-Adresse unter <guimenu>Change Virtual Host ID</guimenu> (Virtuelle Host-ID ändern) an.
   </para>
   <para>
    Klicken Sie auf <guimenu>Weiter</guimenu>, um mit dem zweiten Teil der virtuellen Hostkonfiguration fortzufahren.
   </para>
   <para>
    Im zweiten Teil der virtuellen Hostkonfiguration legen Sie fest, ob CGI-Skripten zugelassen sind und welches Verzeichnis für diese Skripten verwendet wird. Dort können Sie auch SSL aktivieren. Wenn Sie SSL aktivieren, müssen Sie auch den Zertifikatpfad angeben. Informationen über SSL und Zertifikate finden Sie in <xref linkend="sec-apache2-ssl-configuration"/>. Mit der Option <guimenu>Verzeichnisindex</guimenu> geben Sie an, welche Datei angezeigt wird, wenn der Client ein Verzeichnis anfordert (standardmäßig ist dies die Datei <filename>index.html</filename>). Statt der Standardeinstellung können Sie aber auch ein oder mehrere andere Dateinamen (jeweils getrennt durch ein Leerzeichen) angeben. Mit <guimenu>Public HTML aktivieren</guimenu> stellen Sie den Inhalt der öffentlichen Benutzerverzeichnisse (<filename>~<replaceable>USER</replaceable>/public_html/</filename>) auf dem Server unter <literal>http://www.example.com/~<replaceable>USER</replaceable></literal> bereit.
   </para>
   <important>
    <title>Erstellen virtueller Hosts</title>
    <para>
     Virtuelle Hosts können Sie nicht völlig willkürlich hinzufügen. Wenn Sie namensbasierte virtuelle Hosts hinzufügen möchten, müssen die Hostnamen im Netzwerk aufgelöst sein. Bei IP-basierten virtuellen Hosts darf jeder verfügbaren IP-Adresse nur ein Host zugewiesen sein.
    </para>
   </important>
  </sect4>
  <sect4 xml:id="sec-apache2-configuration-yast-wizard-summary">
   <title>Zusammenfassung</title>
   <para>
    Dies ist der abschließende Schritt des Assistenten. Legen Sie hier fest, wie und wann der Apache-Server gestartet werden soll: beim Boot-Vorgang oder manuell. Außerdem erhalten Sie in diesem Schritt eine kurze Zusammenfassung Ihrer bisherigen Konfiguration. Wenn Sie mit den Einstellungen zufrieden sind, schließen Sie die Konfiguration mit <guimenu>Verlassen</guimenu> ab. Zum Ändern bestimmter Einstellungen klicken Sie so oft auf <guimenu>Zurück</guimenu>, bis das entsprechende Dialogfeld angezeigt wird. Über <guimenu>Expertenkonfiguration für HTTP-Server</guimenu> können Sie hier auch das in <xref linkend="sec-apache2-configuration-yast-server-configuration"/> beschriebene Dialogfeld öffnen.
   </para>
   <figure xml:id="fig-apache2-configuration-yast-summary">
    <title>HTTP-Server-Assistent: Zusammenfassung</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata width="75%" fileref="yast2_apache_wizard5.png"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_apache_wizard5.png"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect4>
 </sect3>
 <sect3 xml:id="sec-apache2-configuration-yast-server-configuration">
  <title>HTTP-Server-Konfiguration</title>
  <para>
   Im Dialogfeld <guimenu>HTTP-Server-Konfiguration</guimenu> können Sie weitaus mehr Einstellungen vornehmen als im Assistenten (dieser wird ohnehin nur bei der Anfangskonfiguration des Webservers ausgeführt). Das Dialogfeld enthält vier Registerkarten, die nachfolgend beschrieben werden. Keine der in diesem Dialogfeld vorgenommenen Konfigurationsänderungen wird sofort wirksam. Dies geschieht erst, wenn Sie das Dialogfeld mit <guimenu>Beenden</guimenu> schließen. Klicken Sie hingegen auf <guimenu>Abbrechen</guimenu>, so verlassen Sie das Konfigurationsmodul und Ihre Konfigurationsänderungen werden verworfen.
  </para>
  <sect4 xml:id="sec-apache2-configuration-yast-server-configuration-listen">
   <title>Überwachte Ports und Adressen</title>
   <para>
    Geben Sie unter <guimenu>HTTP-Dienst</guimenu> an, ob Apache laufen soll (<guimenu>Aktiviert</guimenu>) oder beendet werden soll (<guimenu>Deaktiviert</guimenu>). Mit den Schaltflächen <guimenu>Hinzufügen</guimenu>, <guimenu>Bearbeiten</guimenu> und <guimenu>Löschen</guimenu> geben Sie unter <guimenu>Ports überwachen</guimenu> die Adressen und Ports an, die vom Server überwacht werden sollen. Standardmäßig werden alle Schnittstellen an Port <literal>80</literal> überwacht. Die Option <guimenu>Firewall-Port öffnen</guimenu> sollte immer aktiviert sein, weil ansonsten der Webserver von außen nicht erreichbar ist. Das Schließen des Ports ist nur in Testsituationen sinnvoll, in denen kein externer Zugriff auf den Webserver erforderlich ist. Wenn Sie über mehrere Netzwerkschnittstellen verfügen, klicken Sie auf <guimenu>Firewall-Details</guimenu>, um festzulegen, an welchen Schnittstellen die Ports geöffnet werden sollen.
   </para>
   <para>
    Über die Schaltfläche <guimenu>Protokolldateien</guimenu> können Sie die Zugriffs- oder die Fehlerprotokolldatei überwachen. Diese Funktion ist besonders beim Testen der Konfiguration hilfreich. Die Protokolldatei wird in einem eigenen Fenster geöffnet, aus dem Sie den Webserver auch neu starten oder neu laden können. Weitere Informationen finden Sie in <xref linkend="sec-apache2-start-stop"/>. Diese Kommandos sind sofort wirksam und ihre Protokollmeldungen werden auch sofort angezeigt.
   </para>
   <figure xml:id="fig-apache2-configuration-yast-server-configuration-listen">
    <title>Konfiguration des HTTP-Servers: Überwachen von Ports und Adressen</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata width="75%" fileref="yast2_apache_config_listen.png"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_apache_config_listen.png"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect4>
  <sect4 xml:id="sec-apache2-configuration-yast-server-configuration-modules">
   <title>Servermodule</title>
   <para>
    Über <guimenu>Status wechseln</guimenu> können Sie Apache2-Module aktivieren und deaktivieren. Über <guimenu>Modul hinzufügen</guimenu> können Sie weitere Module hinzufügen, die zwar bereits installiert, aber noch nicht in dieser Liste aufgeführt sind. Weitere Informationen über Module finden Sie in <xref linkend="sec-apache2-modules"/>.
   </para>
   <figure xml:id="fig-apache2-configuration-yast-server-configuration-modules">
    <title>Konfiguration des HTTP-Servers: Server-Module</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata width="75%" fileref="yast2_apache_config_modules.png"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast2_apache_config_modules.png"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect4>
  <sect4 xml:id="sec-apache2-configuration-yast-server-configuration-host">
   <title>Haupthost oder Hosts</title>
   <para>
    Diese Dialogfelder sind mit den bereits beschriebenen identisch. in <xref linkend="sec-apache2-configuration-yast-wizard-default-host"/> und <xref linkend="sec-apache2-configuration-yast-wizard-virtual-hosts"/> beschriebenen Dialogfeldern.
   </para>
  </sect4>
 </sect3>
</sect2>
