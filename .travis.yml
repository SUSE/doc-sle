sudo: required
language: bash
env:
  global:
    - LD_PRELOAD=/lib/x86_64-linux-gnu/libSegFault.so
    - CACHE="$HOME/.cache/entities"
    - XML_CATALOG_FILES="catalog.xml"
    - GITHUB_URL="https://raw.githubusercontent.com/openSUSE/doc-ci/master/travis/travis.sh"

cache:
  directories:
    - $CACHE

addons:
  apt:
    packages:
      - libxml2-utils
      - libxml2-dev
      - libxml2

services:
  - docker

before_install:
  - 'if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then docker run --rm -it sle-doc-image find . -maxdepth 1 -name 'DC-*' -exec echo "Validating {}..." \; -exec daps -d \{\} validate --remarks \; fi'
  - 'if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then ./travis.sh xml/*.xml; fi'


script:
  - echo "Hello 3"
  - echo "Hello 4"

branches:
  except:
    - trans/*
