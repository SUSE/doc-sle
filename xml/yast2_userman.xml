<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>

<chapter version="5.0" xml:id="cha.yast.userman"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Managing Users with &yast;</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  During installation, you could have created a local user for your system.
  With the &yast; module <guimenu>User and Group Management</guimenu> you can
  add more users or edit existing ones. It also lets you configure your system
  to authenticate users with a network server.
 </para>
 <sect1 xml:id="sec.yast.userman.main">
  <title>User and Group Administration Dialog</title>

  <para>
   To administer users or groups, start &yast; and click <menuchoice>
   <guimenu>Security and Users</guimenu> <guimenu>User and Group
   Management</guimenu> </menuchoice>. Alternatively, start the <guimenu>User
   and Group Administration</guimenu> dialog directly by running <command>sudo
   yast2 users &amp;</command> from a command line.
  </para>

  <figure xml:id="fig.y2.userman.main">
   <title>&yast; User and Group Administration</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_users_main_gtk.png" width="90%" format="PNG" os="sles;sled"/>
     <imagedata fileref="yast2_users_main_kde.png" width="90%" format="PNG" os="osuse"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_users_main_gtk.png" width="70%" format="PNG" os="sles;sled"/>
     <imagedata fileref="yast2_users_main_kde.png" width="70%" format="PNG" os="osuse"/>
    </imageobject>
   </mediaobject>
  </figure>
  <para>
   Every user is assigned a system-wide user ID (UID). Apart from the users
   which can log in to your machine, there are also several <emphasis>system
   users</emphasis> for internal use only. Each user is assigned to one or more
   groups. Similar to <emphasis>system users</emphasis>, there are also
   <emphasis>system groups</emphasis> for internal use.
  </para>

  <para>
   Depending on the set of users you choose to view and modify with, the dialog
   (local users, network users, system users), the main window shows several
   tabs. These allow you to execute the following tasks:
  </para>

  <variablelist>
   <varlistentry>
    <term>Managing User Accounts</term>
    <listitem>
     <para>
      From the <guimenu>Users</guimenu> tab create, modify, delete or
      temporarily disable user accounts as described in
      <xref linkend="sec.yast.userman.users"/>. Learn about advanced options like
      enforcing password policies, using encrypted home directories, or
      managing disk quotas in <xref linkend="sec.yast.userman.adv"/>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Changing Default Settings</term>
    <listitem>
     <para>
      Local users accounts are created according to the settings defined on the
      <guimenu>Defaults for New Users</guimenu> tab. Learn how to change the
      default group assignment, or the default path and access permissions for
      home directories in <xref linkend="sec.yast.userman.defaults"/>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Assigning Users to Groups</term>
    <listitem>
     <para>
      Learn how to change the group assignment for individual users in
      <xref linkend="sec.yast.userman.assign"/>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Managing Groups</term>
    <listitem>
     <para>
      From the <guimenu>Groups</guimenu> tab, you can add, modify or delete
      existing groups. Refer to <xref linkend="sec.yast.userman.groups"/> for
      information on how to do this.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Changing the User Authentication Method</term>
    <listitem>
     <para>
      When your machine is connected to a network that provides user
      authentication methods like NIS or LDAP, you can choose between several
      authentication methods on the <guimenu>Authentication Settings</guimenu>
      tab. For more information, refer to
      <xref linkend="cha.yast.userman.authent"/>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   For user and group management, the dialog provides similar functionality.
   You can easily switch between the user and group administration view by
   choosing the appropriate tab at the top of the dialog.
  </para>

  <para>
   Filter options allow you to define the set of users or groups you want to
   modify: On the <guimenu>Users</guimenu> or <guimenu>Group</guimenu> tab,
   click <guimenu>Set Filter</guimenu> to view and edit users or groups
   according to certain categories, such as <guimenu>Local Users</guimenu> or
   <guimenu>LDAP Users</guimenu>, for example (if you are part of a network
   which uses LDAP). With <menuchoice> <guimenu>Set Filter</guimenu>
   <guimenu>Customize Filter</guimenu> </menuchoice> you can also set up and
   use a custom filter.
  </para>

  <para>
   Depending on the filter you choose, not all of the following options and
   functions will be available from the dialog.
  </para>
 </sect1>
 <sect1 xml:id="sec.yast.userman.users">
  <title>Managing User Accounts</title>

  <para>
   &yast; offers to create, modify, delete or temporarily disable
   user accounts. Do not modify user accounts unless you are an experienced
   user or administrator.
  </para>

  <note>
   <title>Changing User IDs of Existing Users</title>
   <para>
    File ownership is bound to the user ID, not to the user name. After a user
    ID change, the files in the user's home directory are automatically
    adjusted to reflect this change. However, after an ID change, the user no
    longer owns the files he created elsewhere in the file system unless the
    file ownership for those files are manually modified.
   </para>
  </note>

  <para>
   In the following, learn how to set up default user accounts. For further
   options, refer to
   <xref linkend="sec.yast.userman.adv"/>.
  </para>

  <procedure>
   <title>Adding or Modifying User Accounts</title>
   <step>
    <para>
     Open the &yast; <guimenu>User and Group Administration</guimenu> dialog
     and click the <guimenu>Users</guimenu> tab.
    </para>
   </step>
   <step>
    <para>
     With <guimenu>Set Filter</guimenu> define the set of users you want to
     manage. The dialog lists users in the system and the groups the users
     belong to.
    </para>
   </step>
   <step>
    <para>
     To modify options for an existing user, select an entry and click
     <guimenu>Edit</guimenu>.
    </para>
    <para>
     To create a new user account, click <guimenu>Add</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Enter the appropriate user data on the first tab, such as
     <guimenu>Username </guimenu> (which is used for login) and
     <guimenu>Password</guimenu>. This data is sufficient to create a new user.
     If you click <guimenu>OK</guimenu> now, the system will automatically
     assign a user ID and set all other values according to the default.
    </para>
   </step>
<!--Fate #302264-->
   <step>
    <para>
     Activate <guimenu>Receive System Mail</guimenu> if you want any kind of
     system notifications to be delivered to this user's mailbox. This creates
     a mail alias for &rootuser; and the user can read the system mail without
     having to first log in as &rootuser;.
    </para>
    <para>
     The mails sent by system services are stored in the local mailbox
     <filename>/var/spool/mail/</filename><replaceable>USERNAME</replaceable>,
     where <replaceable>USERNAME</replaceable> is the login name of the
     selected user. To read e-mails, you can use the <command>mail</command>
     command.
    </para>
   </step>
   <step>
    <para>
     To adjust further details such as the user ID or the path to
     the user's home directory, do so on the <guimenu>Details</guimenu> tab.
    </para>
    <para>
     If you need to relocate the home directory of an existing user, enter the
     path to the new home directory there and move the contents of the current
     home directory with <guimenu>Move to New Location</guimenu>. Otherwise, a
     new home directory is created without any of the existing data.
    </para>
   </step>
   <step>
    <para>
     To force users to regularly change their password or set other password
     options, switch to <guimenu>Password Settings</guimenu> and adjust the
     options. For more details, refer to
     <xref linkend="sec.yast.userman.adv.passw"/>.
    </para>
   </step>
   <step>
    <para>
     If all options are set according to your wishes, click
     <guimenu>OK</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>OK</guimenu> to close the administration dialog and to save
     the changes. A newly added user can now log in to the system using the
     login name and password you created.
    </para>
    <para>
     Alternatively, to save all changes without exiting the
     <guimenu>User and Group Administration</guimenu> dialog, click
     <menuchoice> <guimenu>Expert Options</guimenu> <guimenu>Write Changes
     Now</guimenu> </menuchoice>.
    </para>
   </step>
  </procedure>

  <tip>
   <title>Matching User IDs</title>
   <para>
    For a new (local) user on a laptop which also needs to integrate into a
    network environment where this user already has a user ID, it is useful to
    match the (local) user ID to the ID in the network. This ensures that the
    file ownership of the files the user creates <quote>offline</quote> is the
    same as if he had created them directly on the network.
   </para>
  </tip>

  <procedure>
   <title>Disabling or Deleting User Accounts</title>
   <step>
    <para>
     Open the &yast; <guimenu>User and Group Administration</guimenu> dialog
     and click the <guimenu>Users</guimenu> tab.
    </para>
   </step>
   <step>
    <para>
     To temporarily disable a user account without deleting it, select the user
     from the list and click <guimenu>Edit</guimenu>. Activate <guimenu>Disable
     User Login</guimenu>. The user cannot log in to your machine until you
     enable the account again.
    </para>
   </step>
   <step>
    <para>
     To delete a user account, select the user from the list and click
     <guimenu>Delete</guimenu>. Choose if you also want to delete the user's
     home directory or if you want to retain the data.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.yast.userman.adv">
  <title>Additional Options for User Accounts</title>

  <para>
   In addition to the settings for a default user account, &productnamereg;
   offers further options, such as options to enforce password policies, use
   encrypted home directories or define disk quotas for users and groups.
  </para>

  <sect2 xml:id="cha.yast.userman.adv.login">
   <title>Automatic Login and Passwordless Login</title>
   <para>
    If you use the &gnome; desktop environment you can configure <emphasis>Auto
    Login</emphasis> for a certain user and <emphasis>Passwordless
    Login</emphasis> for all users. Auto login causes a user to become
    automatically logged in to the desktop environment on boot. This
    functionality can only be activated for one user at a time. Login without
    password allows all users to log in to the system after they have entered
    their user name in the login manager.
   </para>
   <warning>
    <title>Security Risk</title>
    <para>
     Enabling <emphasis>Auto Login</emphasis> or <emphasis>Passwordless
     Login</emphasis> on a machine that can be accessed by more than one person
     is a security risk. Without the need to authenticate, any user can gain
     access to your system and your data. If your system contains confidential
     data, do not use this functionality.
    </para>
   </warning>
   <para>
    to activate auto login or login without password, access these
    functions in the &yast; <guimenu>User and Group Administration</guimenu>
    with <menuchoice> <guimenu>Expert Options</guimenu> <guimenu>Login
    Settings</guimenu> </menuchoice>.
   </para>
  </sect2>

  <sect2 xml:id="sec.yast.userman.adv.passw">
   <title>Enforcing Password Policies</title>
   <para>
    On any system with multiple users, it is a good idea to enforce at least
    basic password security policies. Users should change their passwords
    regularly and use strong passwords that cannot easily be exploited. For
    local users, proceed as follows:
<!--taroth
     080930: enable link when we have added comparable
     contents: For information about how to enforce stricter password rules, refer to <xref
     linkend="sec.yast.security.settings"/>.-->
   </para>
   <procedure>
    <title>Configuring Password Settings</title>
    <step>
     <para>
      Open the &yast; <guimenu>User and Group Administration</guimenu> dialog
      and select the <guimenu>Users</guimenu> tab.
     </para>
    </step>
    <step>
     <para>
      Select the user for which to change the password options and click
      <guimenu>Edit</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Switch to the <guimenu>Password Settings</guimenu> tab. The user's last
      password change is displayed on the tab.
     </para>
    </step>
    <step>
     <para>
      To make the user change his password at next login, activate
      <guimenu>Force Password Change</guimenu>.
     </para>
    </step>
    <step>
     <para>
      To enforce password rotation, set a <guimenu>Maximum Number of Days for
      the Same Password</guimenu> and a <guimenu>Minimum Number of Days for the
      Same Password</guimenu>.
     </para>
    </step>
    <step>
     <para>
      To remind the user to change his password before it expires, set the
      number of <guimenu>Days before Password Expiration to Issue
      Warning</guimenu>.
     </para>
    </step>
    <step>
     <para>
      To restrict the period of time the user can log in after his password has
      expired, change the value in <guimenu>Days after Password Expires with
      Usable Login</guimenu>.
     </para>
    </step>
    <step>
     <para>
      You can also specify a certain expiration date for the complete account.
      Enter the <guimenu>Expiration Date</guimenu> in
      <replaceable>YYYY-MM-DD</replaceable> format. Note that this setting is
      not password-related but rather applies to the account itself.
     </para>
    </step>
    <step>
     <para>
      For more information about the options and about the default values,
      click <guimenu>Help</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Apply your changes with <guimenu>OK</guimenu>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.yast.userman.adv.crypto">
   <title>Managing Encrypted Home Directories</title>
   <para>
    To protect data in home directories against theft and hard disk removal,
    you can create encrypted home directories for users. These are encrypted
    with LUKS (Linux Unified Key Setup), which results in an image and an image
    key being generated for the user. The image key is protected with the
    user's login password. When the user logs in to the system, the encrypted
    home directory is mounted and the contents are made available to the user.
   </para>
   <para>
    With &yast;, you can create encrypted home directories for new or existing
    users. To encrypt or modify encrypted home directories of already existing
    users, you need to know the user's current login password. By default, all
    existing user data is copied to the new encrypted home directory, but it is
    not deleted from the unencrypted directory.
   </para>
   <warning>
    <title>Security Restrictions</title>
    <para>
     Encrypting a user's home directory does not provide strong security from
     other users. If strong security is required, the system should not be
     physically shared.
    </para>
   </warning>
   <para>
    Find background information about encrypted home directories and which
    actions to take for stronger security in
    <xref linkend="sec.security.cryptofs.y2.homes"/>.
   </para>
   <procedure>
    <title>Creating Encrypted Home Directories</title>
    <step>
     <para>
      Open the &yast; <guimenu>User and Group Management</guimenu> dialog and
      click the <guimenu>Users</guimenu> tab.
     </para>
    </step>
    <step>
     <para>
      To encrypt the home directory of an existing user, select the user and
      click <guimenu>Edit</guimenu>.
     </para>
     <para>
      Otherwise, click <guimenu>Add</guimenu> to create a new user account and
      enter the appropriate user data on the first tab.
     </para>
    </step>
    <step>
     <para>
      In the <guimenu>Details</guimenu> tab, activate <guimenu>Use Encrypted
      Home Directory</guimenu>. With <guimenu>Directory Size in MB</guimenu>,
      specify the size of the encrypted image file to be created for this user.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2_users_crypto_gtk.png" width="90%"
                   format="PNG" os="sles;sled"/>
        <imagedata fileref="yast2_users_crypto_kde.png" width="90%"
                   format="PNG" os="osuse"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2_users_crypto_gtk.png" width="70%"
                   format="PNG" os="sles;sled"/>
        <imagedata fileref="yast2_users_crypto_kde.png" width="70%"
                   format="PNG" os="osuse"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Apply your settings with <guimenu>OK</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Enter the user's current login password to proceed if &yast; prompts for
      it.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>OK</guimenu> to close the administration dialog and save
      the changes.
     </para>
     <para>
      Alternatively, to save all changes without exiting the
      <guimenu>User and Group Administration</guimenu> dialog, click
      <menuchoice> <guimenu>Expert Options</guimenu> <guimenu>Write Changes
      Now</guimenu> </menuchoice>.
     </para>
    </step>
   </procedure>
   <procedure>
    <title>Modifying or Disabling Encrypted Home Directories</title>
    <para>
     Of course, you can also disable the encryption of a home directory or
     change the size of the image file at any time.
    </para>
    <step>
     <para>
      Open the &yast; <guimenu>User and Group Administration</guimenu> dialog
      in the <guimenu>Users</guimenu> view.
     </para>
    </step>
    <step>
     <para>
      Select a user from the list and click <guimenu>Edit</guimenu>.
     </para>
    </step>
    <step>
     <para>
      to disable the encryption, switch to the
      <guimenu>Details</guimenu> tab and disable <guimenu>Use Encrypted Home
      Directory</guimenu>.
     </para>
     <para>
      If you need to enlarge or reduce the size of the encrypted image file for
      this user, change the <guimenu>Directory Size in MB</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Apply your settings with <guimenu>OK</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Enter the user's current login password to proceed if &yast; prompts for
      it.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>OK</guimenu> to close the administration dialog and save
      the changes.
     </para>
     <para>
      Alternatively, to save all changes without exiting the
      <guimenu>User and Group Administration</guimenu> dialog, click
      <menuchoice> <guimenu>Expert Options</guimenu> <guimenu>Write Changes
      Now</guimenu> </menuchoice>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.yast.userman.adv.quota">
   <title>Managing Quotas</title>
   <para>
    To prevent system capacities from being exhausted without notification,
    system administrators can set up quotas for users or groups. Quotas can be
    defined for one or more file systems and restrict the amount of disk space
    that can be used and the number of inodes (index nodes) that can be created
    there. Inodes are data structures on a file system that store basic
    information about a regular file, directory, or other file system object.
    They store all attributes of a file system object (like user and group
    ownership, read, write, or execute permissions), except file name and
    contents.
   </para>
   <para>
    &productname; allows usage of <literal>soft</literal> and
    <literal>hard</literal> quotas. Additionally, grace intervals can be
    defined that allow users or groups to temporarily violate their quotas by
    certain amounts.
   </para>
   <variablelist>
    <varlistentry>
     <term>Soft Quota</term>
     <listitem>
      <para>
       Defines a warning level at which users are informed that they are
       nearing their limit. Administrators will urge the users to clean up and
       reduce their data on the partition. The soft quota limit is usually
       lower than the hard quota limit.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Hard Quota</term>
     <listitem>
      <para>
       Defines the limit at which write requests are denied. When the hard
       quota is reached, no more data can be stored and applications may crash.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Grace Period</term>
     <listitem>
      <para>
       Defines the time between the overflow of the soft quota and a warning
       being issued. Usually set to a rather low value of one or several hours.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <procedure>
    <title>Enabling Quota Support for a Partition</title>
    <para>
     To configure quotas for certain users and groups, you need to enable quota
     support for the respective partition in the &yast; Expert Partitioner
     first.
    </para>
    <note os="sles">
     <title>Quotas Btrfs Partitions</title>
     <para>
<!-- <remark condition="clarity">
       2014-07-17 - fs: According to aschnell, Btrfs quotas are kaputt; this
       will eventually be fixed, so check for each SP if the following
       statement is still true
      </remark>-->
      Quotas for Btrfs partitions are handled differently. For more
      information, see <xref linkend="sec.filesystems.major.btrfs.quota"/>.
<!--Quotas for Btrfs partitions are handled differently and cannot be
      enabled in the &yast; Expert Partitioner.-->
      <remark>taroth 2014-06-04: todo - after btrfs quotas have been covered in
       the manuals (Storage Guide?), add link - taroth 2014-12-29: done</remark>
     </para>
    </note>
    <step>
     <para>
      In &yast;, select <menuchoice> <guimenu>System</guimenu>
      <guimenu>Partitioner</guimenu> </menuchoice> and click
      <guimenu>Yes</guimenu> to proceed.
     </para>
    </step>
    <step>
     <para>
      In the <guimenu>Expert Partitioner</guimenu>, select the partition for
      which to enable quotas and click <guimenu>Edit</guimenu>.
     </para>
    </step>
    <step>
     <para>
<!--<remark>taroth 2014-05-28: could not find the "Enable Quota Support"
      option for a btrfs file system - according to dsterba, this will work
      differently and there is not yast-part to it (yet), if any yast part will
      be done,  aschnell would be the right contact person to ask - according to
      jsuchome, the rest of the quota stuff is unchanged and should still work
      as described (could not test it because the default installation only comes with a
      btrfs partition)</remark>-->
      Click <guimenu>Fstab Options</guimenu> and activate <guimenu>Enable Quota
      Support</guimenu>. If the <systemitem>quota</systemitem> package is not
      already installed, it will be installed once you confirm the respective
      message with <guimenu>Yes</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Confirm your changes and leave the <guimenu>Expert Partitioner</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Make sure the service <systemitem class="service">quotaon</systemitem> is
      running by entering the following command:
     </para>
<screen>systemctl status quotaon</screen>
     <para>
      It should be marked as being <literal>active</literal>. If this is not
      the case, start it with the command <command>systemctl start
      quotaon</command>.
     </para>
    </step>
   </procedure>
   <procedure>
    <title>Setting Up Quotas for Users or Groups</title>
    <para>
     Now you can define soft or hard quotas for specific users or groups and
     set time periods as grace intervals.
    </para>
    <step>
     <para>
      In the &yast; <guimenu>User and Group Administration</guimenu>, select
      the user or the group you want to set the quotas for and click
      <guimenu>Edit</guimenu>.
     </para>
    </step>
    <step>
     <para>
      On the <guimenu>Plug-Ins</guimenu> tab, select the <guimenu>Manage User
      Quota</guimenu> entry and click <guimenu>Launch</guimenu> to open the
      <guimenu>Quota Configuration</guimenu> dialog.
     </para>
    </step>
    <step>
     <para>
      From <guimenu>File System</guimenu>, select the partition to which the
      quota should apply.
     </para>
     <informalfigure os="sles;sled">
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2_users_quota_gtk.png" width="80%"
                   format="PNG" os="sles;sled"/>
        <imagedata fileref="yast2_users_quota_kde.png" width="80%"
                   format="PNG" os="osuse"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2_users_quota_gtk.png" width="70%"
                   format="PNG" os="sles;sled"/>
        <imagedata fileref="yast2_users_quota_kde.png" width="70%"
                   format="PNG" os="osuse"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Below <guimenu>Size Limits</guimenu>, restrict the amount of disk space.
      Enter the number of 1 KB blocks the user or group may have on this
      partition. Specify a <guimenu>Soft Limit</guimenu> and a <guimenu>Hard
      Limit</guimenu> value.
     </para>
    </step>
    <step>
     <para>
      Additionally, you can restrict the number of inodes the user or group may
      have on the partition. Below <guimenu>Inodes Limits</guimenu>, enter a
      <guimenu>Soft Limit</guimenu> and <guimenu>Hard Limit</guimenu>.
     </para>
    </step>
    <step>
     <para>
      You can only define grace intervals if the user or group has already
      exceeded the soft limit specified for size or inodes. Otherwise, the
      time-related text boxes are not activated. Specify the time period for
      which the user or group is allowed to exceed the limits set above.
     </para>
    </step>
    <step>
     <para>
      Confirm your settings with <guimenu>OK</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Click <guimenu>OK</guimenu> to close the administration dialog and save
      the changes.
     </para>
     <para>
      Alternatively, to save all changes without exiting the
      <guimenu>User and Group Administration</guimenu> dialog, click
      <menuchoice> <guimenu>Expert Options</guimenu> <guimenu>Write Changes
      Now</guimenu> </menuchoice>.
     </para>
    </step>
   </procedure>
   <para>
    &productname; also ships command-line tools like
    <literal>repquota</literal> or <literal>warnquota</literal>. System
    administrators can use this tools to control the disk usage or send e-mail
    notifications to users exceeding their quota. Using
    <command>quota_nld</command>, administrators can also forward kernel
    messages about exceeded quotas to D-BUS. For more information, refer to the
    <systemitem>repquota</systemitem>, the <systemitem>warnquota</systemitem>
    and the <command>quota_nld</command> man page.
<!--taroth 2011-07-21: all of the above are included in quota.rpm-->
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec.yast.userman.defaults">
  <title>Changing Default Settings for Local Users</title>

  <para>
   When creating new local users, several default settings are used by &yast;.
   These include, for example, the primary group and the secondary groups the
   user belongs to, or the access permissions of the user's home directory. You
   can change these default settings to meet your requirements:
  </para>

  <procedure>
   <step>
    <para>
     Open the &yast; <guimenu>User and Group Administration</guimenu> dialog
     and select the <guimenu>Defaults for New Users</guimenu> tab.
    </para>
   </step>
   <step>
    <para>
     To change the primary group the new users should automatically belong to,
     select another group from <guimenu>Default Group</guimenu>.
    </para>
   </step>
   <step>
    <para>
     To modify the secondary groups for new users, add or change groups in
     <guimenu>Secondary Groups</guimenu>. The group names must be separated by
     commas.
    </para>
   </step>
   <step>
    <para>
     If you do not want to use
     <filename>/home/<replaceable>USERNAME</replaceable></filename> as default
     path for new users' home directories, modify the <guimenu>Path Prefix for
     Home Directory</guimenu>.
    </para>
   </step>
   <step>
    <para>
     To change the default permission modes for newly created home directories,
     adjust the umask value in <guimenu>Umask for Home Directory</guimenu>. For
     more information about umask, refer to <xref linkend="cha.security.acls"/>
     and to the <command>umask</command> man page.
    </para>
   </step>
   <step>
    <para>
     For information about the individual options, click
     <guimenu>Help</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Apply your changes with <guimenu>OK</guimenu>.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.yast.userman.assign">
  <title>Assigning Users to Groups</title>

  <para>
   Local users are assigned to several groups according to the
   default settings which you can access from the <guimenu>User and Group
   Administration</guimenu> dialog on the <guimenu>Defaults for New
   Users</guimenu> tab. In the following, learn how to modify an individual
   user's group assignment. If you need to change the default group assignments
   for new users, refer to <xref linkend="sec.yast.userman.defaults"/>.
  </para>

  <procedure>
   <title>Changing a User's Group Assignment</title>
   <step>
    <para>
     Open the &yast; <guimenu>User and Group Administration</guimenu> dialog
     and click the <guimenu>Users</guimenu> tab. It lists users and the
     groups the users belong to.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>Edit</guimenu> and switch to the <guimenu>Details</guimenu>
     tab.
    </para>
   </step>
   <step>
    <para>
     To change the primary group the user belongs to, click <guimenu>Default
     Group</guimenu> and select the group from the list.
    </para>
   </step>
   <step>
    <para>
     To assign the user additional secondary groups, activate the corresponding
     check boxes in the <guimenu>Additional Groups</guimenu> list.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>OK</guimenu> to apply your changes.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>OK</guimenu> to close the administration dialog and save
     the changes.
    </para>
    <para>
     Alternatively, to save all changes without exiting the
     <guimenu>User and Group Administration</guimenu> dialog, click
     <menuchoice> <guimenu>Expert Options</guimenu> <guimenu>Write Changes
     Now</guimenu> </menuchoice>.
    </para>
   </step>
  </procedure>
 </sect1>
 <sect1 xml:id="sec.yast.userman.groups">
  <title>Managing Groups</title>

  <para>
   With &yast; you can also easily add, modify or delete groups.
  </para>

  <procedure>
   <title>Creating and Modifying Groups</title>
   <step>
    <para>
     Open the &yast; <guimenu>User and Group Management</guimenu> dialog and
     click the <guimenu>Groups</guimenu> tab.
    </para>
   </step>
   <step>
    <para>
     With <guimenu>Set Filter</guimenu> define the set of groups you want to
     manage. The dialog lists groups in the system.
    </para>
   </step>
   <step>
    <para>
     To create a new group, click <guimenu>Add</guimenu>.
    </para>
   </step>
   <step>
    <para>
     To modify an existing group, select the group and click
     <guimenu>Edit</guimenu>.
    </para>
   </step>
   <step>
    <para>
     In the following dialog, enter or change the data. The list on the right
     shows an overview of all available users and system users which can be
     members of the group.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_groups_edit_gtk.png" width="80%"
                  format="PNG" os="sles;sled"/>
       <imagedata fileref="yast2_groups_edit_kde.png" width="80%"
                  format="PNG" os="osuse"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_groups_edit_gtk.png" width="75%"
                  format="PNG" os="sles;sled"/>
       <imagedata fileref="yast2_groups_edit_kde.png" width="75%"
                  format="PNG" os="osuse"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     To add existing users to a new group select them from the list of possible
     <guimenu>Group Members</guimenu> by checking the corresponding box. To
     remove them from the group deactivate the box.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>OK</guimenu> to apply your changes.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>OK</guimenu> to close the administration dialog and save
     the changes.
    </para>
    <para>
     Alternatively, to save all changes without exiting the
     <guimenu>User and Group Administration</guimenu> dialog, click
     <menuchoice> <guimenu>Expert Options</guimenu> <guimenu>Write Changes
     Now</guimenu> </menuchoice>.
    </para>
   </step>
  </procedure>

  <para>
   To delete a group, it must not contain any group members. To delete a group,
   select it from the list and click <guimenu>Delete</guimenu>. Click
   <guimenu>OK</guimenu> to close the administration dialog and save the
   changes. Alternatively, to save all changes without exiting the
   <guimenu>User and Group Administration</guimenu> dialog, click <menuchoice>
   <guimenu>Expert Options</guimenu> <guimenu>Write Changes Now</guimenu>
   </menuchoice>.
  </para>
 </sect1>
 <sect1 xml:id="cha.yast.userman.authent">
  <title>Changing the User Authentication Method</title>

  <para>
   When your machine is connected to a network, you can change the
   authentication method. The following options are available:
  </para>

  <variablelist>
   <varlistentry>
    <term>NIS</term>
    <listitem>
     <para>
      Users are administered centrally on a NIS server for all systems in the
      network. For details, see <xref linkend="cha.nis"/>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>LDAP</term>
    <listitem>
     <para>
      Users are administered centrally on an LDAP server for all systems in the
      network. For details about LDAP, see <xref linkend="cha.security.ldap"/>.
     </para>
     <para>
      You can manage LDAP users with the &yast; user module. All other LDAP
      settings, including the default settings for LDAP users, need to be
      defined with the &yast; LDAP client module as described in
      <phrase
      os="sles;osuse"><xref
      linkend="sec.security.auth.yast.client"/></phrase><phrase
      os="sled"><xref linkend="sec.security.auth.yast-sled"/></phrase>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Kerberos</term>
    <listitem>
     <para>
      With Kerberos, a user registers once and then is trusted in the entire
      network for the rest of the session.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Samba</term>
    <listitem>
     <para>
      SMB authentication is often used in mixed Linux and Windows networks. For
      details, see <xref linkend="cha.samba"/><phrase os="sled;osuse"> and
      <xref linkend="cha.security.ad"/></phrase>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   To change the authentication method, proceed as follows:
  </para>

  <procedure>
   <step>
    <para>
     Open the <guimenu>User and Group Administration</guimenu> dialog in
     &yast;.
    </para>
   </step>
   <step>
    <para>
     Click the <guimenu>Authentication Settings</guimenu> tab to show an
     overview of the available authentication methods and the current settings.
    </para>
   </step>
   <step>
    <para>
     To change the authentication method, click <guimenu>Configure</guimenu>
     and select the authentication method you want to modify. This takes you
     directly to the client configuration modules in &yast;. For information
     about the configuration of the appropriate client, refer to the following
     sections:
    </para>
    <formalpara>
     <title>NIS:</title>
     <para>
      <xref linkend="sec.nis.client"/>
     </para>
    </formalpara>
    <formalpara>
     <title>LDAP:</title>
     <para>
      <phrase os="sles;osuse"><xref linkend="sec.security.auth.yast.client"/></phrase><phrase os="sled"><xref linkend="sec.security.auth.yast-sled"/></phrase>
     </para>
    </formalpara>
<!-- net_samba.xml has been dropped for 11.0 -->
    <formalpara>
     <title>Samba:</title>
     <para>
      <xref linkend="sec.samba.client.inst.yast"/>
     </para>
    </formalpara>
<!-- taroth 2014-05-28: enable when we have something about SSSD in
   Security Guide:
   <formalpara>
     <title>SSSD:</title>
     <para>
      <remark>taroth 2014-05-28: FIXME, add xref if we have a chapter about this</remark>
     </para>
    </formalpara>-->
   </step>
   <step>
    <para>
     After accepting the configuration, return to the <guimenu>User and Group
     Administration</guimenu> overview.
    </para>
   </step>
   <step>
    <para>
     Click <guimenu>OK</guimenu> to close the administration dialog.
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 xml:id="sec.yast.userman.defaultsystemusers">
  <title>Default System Users</title>
  <para>
   By default, &productname; creates user names which cannot be deleted.
   These users are typically defined in the Linux Standard Base.
   The following list provides the common user names and their purpose:
  </para>
  <!-- Add new entries in alphabetical order -->
  <variablelist>
   <title>Common User Names Installed by Default</title>
   <varlistentry>
    <term><systemitem class="username">bin</systemitem></term>
    <term><systemitem class="username">daemon</systemitem></term>
    <listitem>
     <para>
      Legacy user, included for compatibility with legacy applications. New
      applications should no longer use this user name.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">gdm</systemitem></term>
    <listitem>
     <!-- package: gdm -->
     <para>
      Used by GNOME Display Manager (GDM) to provide graphical log-ins and
      managing local and remote displays.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">lp</systemitem></term>
    <listitem>
     <!-- package: cups -->
     <para>
      Used by the Printer daemon for Common Unix Printing System (CUPS).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">mail</systemitem></term>
    <listitem>
     <para>
      User reserved for mailer programs like <command>sendmail</command>
      or <command>postfix</command>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">man</systemitem></term>
    <listitem>
     <!-- package:  -->
     <para>
      Used by man to access man pages.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">messagebus</systemitem></term>
    <listitem>
     <!-- package: dbus-1 -->
     <para>
      Used to access D-Bus (desktop bus), a software bus for inter-process
      communication. Daemon is <systemitem class="daemon">dbus-daemon</systemitem>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">nobody</systemitem></term>
    <listitem>
     <para>
      User which owns no files and is in no privileged groups. Nowadays,
      its use is limited as it is recommended by Linux Standard Base to provide
      a separate user account for each daemon.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">nscd</systemitem></term>
    <listitem>
     <!-- package: nscd -->
     <para>
      Used by the Name Service Caching Daemon. This daemon is a lookup
      service to improve performance with NIS and LDAP.
      Daemon is <systemitem class="daemon">nscd</systemitem>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">polkitd</systemitem></term>
    <listitem>
     <!-- package: polkit -->
     <para>
      Used by the PolicyKit Authorization Framework which defines and
      handles authorization requests for unprivileged processes.
      Daemon is <systemitem class="daemon">polkitd</systemitem>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">postfix</systemitem></term>
    <listitem>
     <!-- package: postfix -->
     <para>
      Used by the Postfix mailer.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">pulse</systemitem></term>
    <listitem>
     <!-- package: pulseaudio -->
     <para>
      Used by the Pulseaudio sound server.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">root</systemitem></term>
    <listitem>
     <para>
      Used by the system administrator, providing all appropriate privileges.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">rpc</systemitem></term>
    <listitem>
     <!-- package: rpcbind -->
     <para>
      Used by the <command>rpcbind</command> command, an RPC
      port mapper.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">rtkit</systemitem></term>
    <listitem>
     <!-- package: rtkit -->
     <para>
      Uses by the <package>rtkit</package> package providing a
      D-Bus system service for real time scheduling mode.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">salt</systemitem></term>
    <listitem>
     <!-- package: salt -->
     <para>
      User for parallel remote execution provided by Salt. Daemon
      is named <systemitem class="daemon">salt-master</systemitem>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">scard</systemitem></term>
    <listitem>
     <!-- package: pcsc-lite -->
     <para>
      User for communication with smart cards and readers. Daemon is named
      <systemitem class="daemon">pcscd</systemitem>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">srvGeoClue</systemitem></term>
    <listitem>
     <!-- package: system-user-srvGeoClue -->
     <para>
      Used by the GeoClue D-Bus service to provide location information.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">sshd</systemitem></term>
    <listitem>
     <!-- package: openssh -->
     <para>
      Used by the Secure Shell daemon (SSH) to ensure secured and encrypted
      communication over an insecure network.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">statd</systemitem></term>
    <listitem>
     <!-- package: nfs-client -->
     <para>
      Used by the Network Status Monitor protocol (NSM), implemented in the
      <systemitem class="daemon">rpc.statd</systemitem> daemon, to listen
      for reboot notifications.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">systemd-coredump</systemitem></term>
    <listitem>
     <!-- package: systemd -->
     <para>
      Used by the <command>/usr/lib/systemd/systemd-coredump</command> command
      to acquire, save and process core dumps.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">systemd-network</systemitem></term>
    <listitem>
     <!-- package: systemd -->
     <para>
      Used by the <command>/usr/lib/systemd/systemd-networkd</command> command
      to manage networks.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><systemitem class="username">systemd-timesync</systemitem></term>
    <listitem>
     <!-- package: systemd -->
     <para>
      Used by the <command>/usr/lib/systemd/systemd-timesyncd</command> command
      to synchronize the local system clock with a remote Network Time
      Protocol (NTP) server.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect1>
</chapter>
