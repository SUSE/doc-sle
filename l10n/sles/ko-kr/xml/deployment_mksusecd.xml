<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_mksusecd.xml" version="5.0" role="General" xml:id="cha-deployment-prep-mksusecd">
 <title>mksusecd를 사용하여 설치 이미지 사용자 정의</title>
 <info>
  <abstract>
   <para>
    <command>mksusecd</command>는 사용자 정의 설치 이미지를 생성할 때 유용한 도구입니다. 이를 사용하여 일반 SUSE Linux Enterprise 설치 이미지 수정, 파일 추가 또는 제거, 최소 네트워크 설치 이미지 생성, 부팅 옵션 또는 소프트웨어 리포지토리 사용자 정의, PXE 서버에서 시스템 부팅에 대한 대안으로 최소 부팅 이미지 생성을 수행할 수 있습니다.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <sect1 xml:id="sec-deployment-install-mksusecd">
  <title>mksusecd 설치</title>

  <para>
   SLE 15에서 <command>mksusecd</command>는 <literal>Development
   Tools</literal> 모듈에 있습니다. 이 모듈이 활성화되지 않은 경우 우선 활성화해야 합니다. 정확한 모듈 이름 및 <command>SUSEConnect</command>와 <command>zypper</command> 활성화 명령을 찾습니다.
  </para>

<screen><prompt>&gt; </prompt>zypper search-packages mksusecd
Following packages were found in following modules:

Package              Module or Repository
-------------------- -------------------------------------------------------------------
---------------------- -----------------------------------------------------------------
mksusecd             Development Tools Module (sle-module-development-tools/15.4/x86_64)
                       SUSEConnect --product sle-module-development-tools/15.4/x86_64

To activate the respective module or product, use SUSEConnect --product.
Use SUSEConnect --help for more details.</screen>

  <para>
   SUSEConnect를 사용하여 모듈을 활성화합니다.
  </para>

<screen><prompt>&gt; </prompt><command>sudo</command> SUSEConnect --product sle-module-development-tools/15.4/x86_64</screen>

  <para>
   설치 <command>mksusecd</command>:
  </para>

<screen><prompt>&gt; </prompt><command>sudo</command> zypper in mksusecd</screen>

  <para>
   전체 명령 목록을 살펴보려면 <command>mksusecd --help</command>를 실행합니다.
  </para>

  <para>
   사용자 정의 이미지를 생성한 후에는 선호하는 디스크 쓰기 프로그램을 사용하여 CD/DVD 미디어로 굽거나 <command>dd</command> 명령을 사용하여 부팅 가능한 USB 플래시 드라이브를 생성합니다. 장치가 탑재되지 않았는지 확인한 후 다음 명령을 실행합니다.
  </para>

<screen><prompt role="root"># </prompt><command>dd</command> if=<replaceable>myinstaller.iso</replaceable> of=/dev/<replaceable>SDB</replaceable> bs=4M</screen>

  <para>
   이제 부팅이 가능한 새 장치를 사용할 수 있습니다.
  </para>
 </sect1>
 <sect1 xml:id="sec-deployment-prep-boot-mksusecd">
  <title>최소 부팅 이미지 생성</title>

  <para>
   PXE 부팅 서버에서 시작하는 대신, CD/DVD 또는 USB 플래시 드라이브를 사용하여 클라이언트 시스템을 시작하려면 <command>mksusecd</command>를 사용하여 최소 부팅 이미지를 생성합니다. 최소 부팅 이미지는 커널 및 initrd를 실행한 후에 나머지 설치 파일을 로컬 NFS 서버에서 가져옵니다(<xref linkend="sec-deployment-instserver-sles9"/> 참조).
  </para>

  <para>
   다음 명령을 실행하여 최소 ISO 이미지를 생성합니다.
  </para>

<screen><prompt>&gt; </prompt><command>sudo</command> <command>mksusecd</command> --create <replaceable>min-install.iso</replaceable> \
--net=nfs://<replaceable>192.168.1.1:/srv/install/</replaceable><replaceable>ARCH</replaceable>/<replaceable>OS_VERSION</replaceable>/<replaceable>SP_VERSION</replaceable>/cd1  \
/srv/tftpboot/EFI/<replaceable>ARCH</replaceable>/boot</screen>

  <para>
   NFS 서버 주소를 자체 주소로 바꿉니다. <replaceable>ARCH</replaceable>를 대상 시스템 아키텍처에 해당하는 디렉토리로 바꿉니다. 또한 <replaceable>OS_version</replaceable>과 <replaceable>SP_VERSION</replaceable>(서비스 팩)을 <xref linkend="sec-deployment-instserver-sles9"/>의 경로에 따라 바꿉니다.
  </para>



  


 </sect1>

 <sect1 xml:id="sec-deployment-custom-image-boot">
  <title>기본 커널 부팅 파라미터 설정</title>

  <para>
   부팅 중 사용자 정의 커널 부팅 파라미터를 입력하라는 메시지가 표시될 때까지 기다리지 말고, 사용자 정의 <command>mksusecd</command> 이미지에서 구성합니다.
  </para>

<screen><prompt>&gt; </prompt><command>sudo</command> mksusecd --create <replaceable>install.iso</replaceable> \
--boot "<replaceable>textmode=1 splash=silent mitigations=auto</replaceable>"</screen>

  <para>
   <filename>/proc</filename>를 쿼리하여 시작 후에 사용자 정의 파라미터가 올바르게 로드되었는지 확인합니다.
  </para>

<screen><prompt>&gt; </prompt>cat /proc/cmdline</screen>
 </sect1>
 <sect1 xml:id="sec-deployment-custom-modules">
  <title>모듈, 확장 및 리포지토리 사용자 정의</title>

  <para>
   SUSE Linux Enterprise 15는 다양한 제품 구성 요소를 위한 모듈(커널 모듈 아님) 및 확장을 지원합니다. 이는 <literal>Development
   Tools</literal>, <literal>Desktop Applications</literal> 및 SUSE Linux Enterprise <literal>Live Patching</literal>과 같은 기본 <literal>Basesystem</literal>에 대한 추가 기능입니다. 자세한 내용은 <citetitle>Modules and Extensions Quick Start</citetitle> 가이드를 참조하십시오.
  </para>

  <para>
   <command>mksusecd</command>를 사용하면 원하는 모든 추가 모듈 및 확장이 포함된 설치 이미지를 생성할 수 있습니다. 이 예에서 SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP5</phrase></phrase>와 같은 기존 이미지를 쿼리하여 시작합니다.
  </para>

  <screen><prompt>&gt; </prompt><command>sudo</command> mksusecd --list-repos SLE-15-SP5-Full-<replaceable>ARCH</replaceable>-GM-media1.iso
Repositories:
  Basesystem-Module [15.5-0]
  SUSE-CAP-Tools-Module [15.5-0]
  Containers-Module [15.5-0]
  Desktop-Applications-Module [15.5-0]
  Development-Tools-Module [15.5-0]
  HPC-Module [15.5-0]
  Legacy-Module [15.5-0]
  Live-Patching [15.5-0]
  Public-Cloud-Module [15.5-0]
  Python2-Module [15.5-0]
  SAP-Applications-Module [15.5-0]
  Server-Applications-Module [15.5-0]
  Transactional-Server-Module [15.5-0]
  Web-Scripting-Module [15.5-0]
  SLEHA15-SP5 [15.5-0]
  SLE-15-SP5-HPC [15.5-0]
  SLED15-SP5 [15.5-0]
  SLES15-SP5 [15.5-0]
  SLE-15-SP5-SAP [15.5-0]
  SLEWE15-SP5 [15.5-0]
  [...]
</screen>

  <para>
   선택한 모듈, 확장 및 리포지토리에서 새 설치 이미지를 생성하고 자동으로 활성화합니다.
  </para>

<screen><prompt>&gt; </prompt><command>sudo</command> mksusecd --create <replaceable>myinstaller.iso</replaceable> --enable-repos auto \
--include-repos <replaceable>Basesystem-Module,Desktop-Applications-Module</replaceable> \
SLE-15-SP5-Full-<replaceable>ARCH</replaceable>-GM-media1.iso</screen>

  <para>
   이 예시에서는 인터넷에서 설치할 이미지를 생성합니다. 오프라인 설치용 이미지를 생성하려면 기본 제품의 리포지토리(예: SUSE Linux Enterprise Server의 경우 <literal>SLES15-SP5</literal>)도 추가합니다.
  </para>

  <screen><prompt>&gt; </prompt><command>sudo</command> mksusecd --create <replaceable>myinstaller.iso</replaceable> --enable-repos auto \
   --include-repos <replaceable>SLES15-SP5,Basesystem-Module,Desktop-Applications-Module</replaceable> \
   SLE-15-SP5-Full-<replaceable>ARCH</replaceable>-GM-media1.iso</screen>

  <para>
   <option>--enable-repos auto</option>를 <option>--enable-repos ask</option>로 바꾸면 설치 프로그램에 모듈 선택 대화 상자가 제공됩니다.
  </para>

  <note>
   <title>AutoYaST 제어 파일</title>
   <para>
    <option>--enable-repos</option> 옵션을 사용하는 경우 <command>mksusecd</command>는 AutoYaST와 함께 사용할 <filename>add_on_products.xml</filename> 파일을 새 이미지에 추가합니다. 이 파일의 모듈은 AutoYaST 제어 파일에 나열될 필요가 없습니다.
   </para>
  </note>
 </sect1>
 <sect1 xml:id="sec-deployment-custom-netinstall">
  <title>최소 netinstall ISO 생성</title>

  <para>
   네트워크 설치를 실행하기 위해 최소 설치 이미지를 생성하려면 <command>--nano</command> 옵션을 사용합니다.
  </para>

<screen><prompt>&gt; </prompt><command>sudo</command> mksusecd --create <replaceable>netinstall.iso</replaceable> \
--nano SLE-15-SP5-Online-<replaceable>ARCH</replaceable>-GM-media1.iso</screen>
 </sect1>
 <sect1 xml:id="sec-deployment-custom-repo">
  <title>기본 리포지토리 변경</title>

  <para>
   다른 리포지토리(예: 로컬 리포지토리)를 설정하려면 <command>--net</command> 옵션을 사용합니다.
  </para>

<screen><prompt>&gt; </prompt><command>sudo</command> mksusecd --create <replaceable>localinstall.iso</replaceable> \
--net "https://example.com/local" SLE-15-SP5-Online-<replaceable>ARCH</replaceable>-GM-media1.iso</screen>
 </sect1>
</chapter>
