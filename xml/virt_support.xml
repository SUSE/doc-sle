<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="cha-virt-support">
 <title>Supported Hosts, Guests, and Features</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker></dm:bugtracker>
  </dm:docmanager>
 </info>
 <para os="sles;sled">
  Supported architectures and virtualization limits for &xen; and &kvm; are
  outlined in the <link xlink:href="https://www.suse.com/releasenotes/">Release
  Notes</link>.
 </para>
 <sect1 xml:id="virt-support-hosts">
  <title>Host Environments (Hypervisors)</title>

  <para>
   This section lists the support status of &productname; &productnumber;
   running as a guest on top of various virtualization hosts
   (<xref
    linkend="gloss-vt-hypervisor"/>).
  </para>

  <itemizedlist>
   <title>The following &suse; host environments are supported (&xen; + &kvm;):</title>
   <listitem>
    <para>
     SLES 11 SP4
    </para>
   </listitem>
   <listitem>
    <para>
     SLES 12 SP1, SP2, SP3, SP4, SP5
    </para>
   </listitem>
   <listitem>
    <para>
     SLES 15 SP0, SP1, SP2
    </para>
   </listitem>
  </itemizedlist>

  <itemizedlist>
   <title>The following 3rd party host environments are supported:</title>
   <listitem>
    <para>
     VMware ESXi 6.5, 6.7
    </para>
   </listitem>
   <listitem>
    <para>
     Microsoft Windows 2008 R2 SP1+, 2012+, 2012 R2+, 2016, 2019
    </para>
   </listitem>
   <listitem>
    <para>
     Citrix XenServer 7.0, 7.1, 8.0
    </para>
   </listitem>
   <listitem>
    <para>
     Oracle VM 3.4
    </para>
   </listitem>
  </itemizedlist>

  <itemizedlist>
   <title>The level of support is as follows:</title>
   <listitem>
    <para>
     Support for SUSE host operating systems is full L3, both for the guest and
     host.
    </para>
   </listitem>
   <listitem>
    <para>
     Support for 3rd party host environments is full L3 for the guest and needs
     the host vendor cooperation and support for the host.
    </para>
   </listitem>
  </itemizedlist>

  <note>
   <title>Support for Third Party Virtualization Hosts</title>
   <para>
    &suse; only provides full L3 support if both the virtualization host and
    guest are using &suse; products.
   </para>
   <para>
    If the virtualization host uses third party software, &suse; only
    guarantees L3 support for the guest. For the host, the cooperation of the
    vendor is required.
   </para>
  </note>
 </sect1>
 <sect1 xml:id="virt-support-guests">
  <title>Guest Environments</title>

  <para>
   This section lists the support status for various guest operating systems
   virtualized on top of &productname; &productnumber;. All guest operating
   systems are supported both fully-virtualized (<quote>FV</quote> in the
   following table) and paravirtualized (<quote>PV</quote> in the following
   table) with two exceptions: Windows, which is only supported
   fully-virtualized, and NetWare operating systems, which are only supported
   on &xen; paravirtualized. All guest operating systems are supported both in
   32-bit and 64-bit flavors, unless stated otherwise (see NetWare).
  </para>

  <important>
   <para>
    &mswin; guests can be rebooted by &libvirt;/&virsh; only if paravirtualized
    drivers are installed in the guest. Refer to
    <link xlink:href="https://www.suse.com/products/vmdriverpack/"/> for more
    details on downloading and installing PV drivers.
   </para>
  </important>

  <itemizedlist>
   <title>The following guest operating systems are fully supported (L3):</title>
   <listitem>
    <para>
     SLES 10 SP4
    </para>
   </listitem>
   <listitem>
    <para>
     SLES 11 SP3, SP4
    </para>
   </listitem>
   <listitem>
    <para>
     SLES 12 SP0, SP1, SP2, SP3, SP4, SP5
    </para>
   </listitem>
   <listitem>
    <para>
     VMware ESXi 2016
    </para>
   </listitem>
   <listitem>
    <para>
     SLES 15 SP0, SP1, SP2
    </para>
   </listitem>
   <listitem>
    <para>
     OES 11 SP2, 2015, 2015 SP1, 2018, 2018 SP1, 2018 SP2
    </para>
   </listitem>
   <listitem>
    <para>
     Netware 6.5 SP8 (32-bit only)
    </para>
   </listitem>
   <listitem>
    <para>
     Windows Server 2008 SP2+, 2008 R2 SP1+, 2012+, 2012 R2+, 2016, 2019
    </para>
   </listitem>
   <listitem>
    <para>
    Nutanix Acropolis Hypervisor with AOS 5.8
    </para>
   </listitem>
  </itemizedlist>

  <itemizedlist>
   <title>The following guest operating systems are supported as a technology preview (L2, fixes if reasonable):</title>
   <listitem>
    <para>
     SLED 15 SP1
    </para>
   </listitem>
  </itemizedlist>

  <itemizedlist>
    <title>&redhat; and &centos; guest operating systems are fully supported (L3) if the customer has purchased &sliberty;. </title>
    <listitem>
     <para>
       Refer to the &sliberty; documentation at <link
       xlink:href="https://documentation.suse.com/liberty"/> for the list of
       available combinations and supported releases. In other cases, they are
       supported on a limited basis (L2, fixes if reasonable).
     </para>
    </listitem>
   </itemizedlist>

  <itemizedlist>
   <title>The following guest operating systems are supported on a best-effort basis (L2, fixes if reasonable):</title>
   <listitem>
    <para>
     Windows 8+, 8.1+, 10+
    </para>
   </listitem>
  </itemizedlist>

  <sect2 xml:id="sec-kvm-requires-guests-virt-drivers">
   <title>Availability of Paravirtualized Drivers</title>
   <para>
    To improve the performance of the guest operating system, paravirtualized
    drivers are provided when available. Although they are not required, it is
    strongly recommended to use them. The paravirtualized drivers are available
    as follows:
   </para>
   <variablelist>
    <varlistentry os="osuse">
     <term>&productname;</term>
     <listitem>
      <para>
       Included in kernel
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>&sls; 12 / 12 SP1 / 12 SP2</term>
     <listitem>
      <para>
       Included in kernel
      </para>
     </listitem>
    </varlistentry>
    <varlistentry os="sles;sled">
     <term>&sls; 11 / 11 SP1 / 11 SP2 / 11 SP3 / 11 SP4</term>
     <listitem>
      <para>
       Included in kernel
      </para>
     </listitem>
    </varlistentry>
    <varlistentry os="sles;sled">
     <term>&sls; 10 SP4</term>
     <listitem>
      <para>
       Included in kernel
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>RedHat</term>
     <listitem>
      <para>
       Available in RedHat Enterprise Linux 5.4 and newer
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Windows</term>
     <listitem>
      <para>
       &suse; has developed virtio-based drivers for Windows, which are
       available in the Virtual Machine Driver Pack (VMDP). For more
       information, see
       <link xlink:href="https://www.suse.com/products/vmdriverpack/"/>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>
 </sect1>
<!-- Start X86_64 only -->
 <sect1 xml:id="sec-kvm-requires-hardware" condition="kvm4x86">
  <title>&kvm; Hardware Requirements</title>

  <para>
   Currently, &suse; supports &kvm; full virtualization on &x86-64; and &arm64;
   hosts, and on &zseries;.
  </para>

  <itemizedlist>
   <listitem>
    <para>
     On the &x86-64; architecture, &kvm; is designed around hardware
     virtualization features included in AMD* (AMD-V) and Intel* (VT-x) CPUs.
     It supports virtualization features of chipsets and PCI devices, such as
     an I/O Memory Mapping Unit (<xref linkend="gloss-vt-acronym-iommu"/>) and
     Single Root I/O Virtualization (<xref linkend="vt-io-sriov"/>). You can
     test whether your CPU supports hardware virtualization with the following
     command:
    </para>
<screen>&prompt.user;egrep '(vmx|svm)' /proc/cpuinfo</screen>
    <para>
     If this command returns no output, your processor either does not support
     hardware virtualization, or this feature has been disabled in the BIOS or
     firmware.
    </para>
    <para>
     The following Web sites identify &x86-64; processors that support hardware
     virtualization:
     <link xlink:href="http://ark.intel.com/Products/VirtualizationTechnology"/>
     (for Intel CPUs), and <link xlink:href="http://products.amd.com/"/> (for
     AMD CPUs).
    </para>
   </listitem>
   <listitem>
    <para>
     On the &arm64; architecture, virtualization support was initially added to
     ARMv7-A processors starting with Cortex-A15 and including Cortex-A7 and
     Cortex-A17. ARMv8-A processors include support for virtualization.
    </para>
   </listitem>
  </itemizedlist>

  <note>
   <title>&kvm; Kernel Modules Not Loading</title>
   <para>
    The &kvm; kernel modules only load if the CPU hardware virtualization
    features are available.
   </para>
  </note>

  <para>
   The general minimum hardware requirements for the &vmhost; are the same as
   for a physical machine. However, additional RAM for each virtualized guest
   is needed. It should at least be the same amount that is needed for a
   physical installation. It is also strongly recommended to have at least one
   processor core or hyper-thread for each running guest.
  </para>
 </sect1>
 <sect1 xml:id="virt-support-feature-support">
  <title>Feature Support</title>

  <para/>

  <sect2 xml:id="virt-support-feature-support-host">
   <title>Host (Dom0)</title>
   <table>
    <title>Feature Support&mdash;Host (<literal>Dom0</literal>)</title>
    <tgroup cols="2">
     <colspec colnum="1" colname="1" colwidth=""/>
     <colspec colnum="2" colname="2" colwidth="80"/>
     <thead>
      <row>
       <entry>
        <para>
         Features
        </para>
       </entry>
       <entry>
        <para>
         &xen;
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Network and block device hotplugging
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Physical <xref linkend="gloss-vt-cpu-hotplug"/>
        </para>
       </entry>
       <entry>
        <para>
         No
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Virtual <xref linkend="gloss-vt-cpu-hotplug"/>
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Virtual <xref linkend="gloss-vt-cpu-pinning"/>
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Virtual <xref linkend="gloss-vt-cpu-capping"/>
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Intel* VT-x2: FlexPriority, FlexMigrate (migration constraints apply
         to dissimilar CPU architectures)
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Intel* VT-d2 (DMA remapping with interrupt filtering and queued
         invalidation)
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         AMD* IOMMU (I/O page table with guest-to-host physical address
         translation)
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
<!-- Not sure what the following means, aginies will investigate.
   - sknorr, 2015-11-02 -->
<!--<para>
    The supported features for &kvm; are the same as the supported
    features for SUSE Linux Enterprise Server 12.
   </para>-->
   <note>
    <title>Adding or Removing Physical CPUs at Runtime Is Not Supported</title>
    <para>
     The addition or removal of physical CPUs at runtime is not supported.
     However, virtual CPUs can be added or removed for each &vmguest;.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="virt-support-feature-support-pv">
   <title>Paravirtualized Guest</title>
   <table>
    <title>Feature Support&mdash;Paravirtualized Guest</title>
    <tgroup cols="2">
     <colspec colnum="1" colname="1" colwidth=""/>
     <colspec colnum="2" colname="2" colwidth=""/>
     <thead>
      <row>
       <entry>
        <para>
         Features
        </para>
       </entry>
       <entry>
        <para>
         &xen;
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Virtual network and virtual block device hotplugging
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Virtual <xref linkend="gloss-vt-cpu-hotplug"/>
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Virtual <xref linkend="gloss-vt-cpu-overcommit"/>
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Dynamic virtual memory resize
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         VM save and restore
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         VM live migration
        </para>
       </entry>
       <entry>
        <para>
         Yes, between like virtual host systems with similar resources
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Advanced debugging with GDBC
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Dom0 metrics visible to VM
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Memory ballooning
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         PCI pass-through
        </para>
       </entry>
       <entry>
        <para>
         Yes (Netware guests are excluded)
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <para>
    For live migration, both source and target system architectures need to
    match; that is, the processors (AMD* or Intel*) must be the same. Unless
    CPU ID masking is used, such as with Intel FlexMigration, the target should
    feature the same processor revision or a more recent processor revision
    than the source. If VMs are moved among different systems, the same rules
    apply for each move. To avoid failing optimized code at runtime or
    application start-up, source and target CPUs need to expose the same
    processor extensions. &xen; exposes the physical CPU extensions to the VMs
    transparently. To summarize, guests can be 32-bit or 64-bit, but the
    <xref linkend="gloss-vt-vhs"/> must be identical.
   </para>
   <note>
    <title>Intel FlexMigration</title>
    <para>
     For machines that support Intel FlexMigration, CPU-ID masking and faulting
     allow more flexibility in cross-CPU migration.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="virt-support-feature-support-fv">
   <title>Fully Virtualized Guest</title>
   <table>
    <title>Feature Support&mdash;Fully Virtualized Guest</title>
    <tgroup cols="3">
     <colspec colwidth=""/>
     <colspec colwidth=""/>
     <thead>
      <row>
       <entry>
        <para>
         Features
        </para>
       </entry>
       <entry>
        <para>
         &xen;
        </para>
       </entry>
       <entry>
        <para>
         &kvm;
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         Virtual network and virtual block device hotplugging
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Virtual <xref linkend="gloss-vt-cpu-hotplug"/>
        </para>
       </entry>
       <entry>
        <para>
         No
        </para>
       </entry>
       <entry>
        <para>
         No
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Virtual <xref linkend="gloss-vt-cpu-overcommit"/>
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Dynamic virtual memory resize
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         VM save and restore
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         VM Live Migration
        </para>
       </entry>
       <entry>
        <para>
         Yes between like virtual host systems with similar resources (that is,
         from 32-bit to 32-bit, 64-bit to 64-bit)
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         VM snapshot
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Advanced debugging with GDBC
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Dom0 metrics visible to VM
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         PCI pass-through
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
       <entry>
        <para>
         Yes
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <note>
    <title>Windows Guest</title>
    <para>
     Hotplugging of virtual network and virtual block devices, and resizing,
     shrinking, and restoring dynamic virtual memory are supported in &xen; and
     &kvm; only if PV drivers are being used (VMDP).
    </para>
   </note>
   <para>
    For &kvm;, a detailed description of supported limits, features,
    recommended settings and scenarios, and other useful information is
    maintained in <filename>kvm-supported.txt</filename>. This file is part of
    the &kvm; package and can be found in
    <filename>/usr/share/doc/packages/kvm</filename>.
   </para>
  </sect2>
 </sect1>
</chapter>
