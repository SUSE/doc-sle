<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_prep_aarch64_raspi.xml" version="5.0" xml:id="sec-aarch64-deprpi">
 <title>Raspberry Pi</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  SUSE® Linux Enterprise Server는 저렴한 Raspberry Pi* 싱글 보드 컴퓨터를 지원하는 최초의 엔터프라이즈 Linux 배포판입니다. <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP4</phrase></phrase>가 지원하는 모델은 다음과 같습니다.
 </para>

 <itemizedlist>
  <listitem>
   <para>
    Raspberry Pi 3 Model A+
   </para>
  </listitem>
  <listitem>
   <para>
    Raspberry Pi 3 Model B
   </para>
  </listitem>
  <listitem>
   <para>
    Raspberry Pi 3 Model B+
   </para>
  </listitem>
  <listitem>
   <para>
    Raspberry Pi 4 Model B
   </para>
  </listitem>
  <listitem>
   <para>
    Raspberry Pi Compute Module 3
   </para>
  </listitem>
  <listitem>
   <para>
    Raspberry Pi Compute Module 3+
   </para>
  </listitem>
  
 </itemizedlist>

 <para>
  Raspberry Pi는 여러 가지로 기존 서버 시스템과 다릅니다. 우선 Raspberry Pi는 운영 체제를 로드할 수 있는 부트 로더를 제공하지 않습니다. 그러므로 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>는 이러한 차이를 해결하기 위해 추가 부트 로더 소프트웨어를 제공합니다.
 </para>

 <sect2 xml:id="sec-aarch64-deprpi-boot">
  <title>부팅 프로세스</title>
  <para>
   Raspberry Pi 시스템 온 칩(SoC)의 기본 프로세서는 Arm CPU(중앙 처리 장치)가 아닌 Broadcom VideoCore GPU(그래픽 처리 장치)입니다. GPU가 온 칩 부팅 읽기 전용 메모리(부트 ROM)의 1단계 부트 로더에서 하드웨어의 초기화를 시작합니다. 몇 개의 구성 옵션만 부팅 ROM에 영향을 미칩니다. 자세한 내용은 <xref linkend="sec-aarch64-deprpi-otp"/>를 참조하십시오.
  </para>
  <para>
   Raspberry Pi 3 하드웨어에는 내장 펌웨어가 없습니다. 그 대신, 시스템이 켜질 때마다 2단계 부트 로더 펌웨어인 <literal>bootcode.bin</literal>이 부팅 미디어에서 로드됩니다. 그리고 3단계 부트 로더인 <literal>start.elf</literal>가 로드됩니다.
  </para>
  <para>
   Raspberry Pi 4 하드웨어에는 2단계 부트 로더를 위한 소형 EEPROM(Electrically Erasable Programmable Read-Only Memory)이 탑재되어 있습니다. 이와 별도로 부팅 시퀀스는 부팅 미디어에서 3단계 부트 로더인 <literal>start4.elf</literal>를 로드하는 Raspberry Pi 3의 부팅 시퀀스와 유사합니다.
  </para>
  <warning>
   <title>Raspberry Pi 4의 EEPROM 업데이트</title>
   <para>
    2단계 부트 로더의 업데이트는 특별하게 준비된 microSD 카드로 부팅하여 수행할 수 있습니다.
   </para>
   <para>
    신뢰할 수 있는 부팅 미디어를 삽입하고 의도치 않게 <literal>recovery.bin</literal> 파일이 들어 있는지 확인하십시오.
   </para>
  </warning>
  <para>
   <literal>armstub8.bin</literal> 파일이 있는 경우 AArch64 Exception Level 3(EL3)에서 4단계 부트 로더로 로드됩니다. 없는 경우 최소 통합 스텁이 사용됩니다.
  </para>
  <note>
   <title>EL3 보안 고려 사항</title>
   <para>
    EL3용으로 로드된 코드(BL31이라고 함)가 메모리에 있으면 Linux가 런타임 동안 EL3에 대한 hypercall을 시도할 수 있습니다.
   </para>
   <para>
    부팅 미디어에 <literal>armstub8.bin</literal> 파일이 우연히 포함되지 않았는지 확인하십시오. <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase> <phrase role="productnumber"><phrase os="sles;sled">15 SP4</phrase></phrase>에는 이 파일이 포함되어 있지 않습니다.
   </para>
   <para>
    Raspberry Pi의 SoC는 TrustZone 보안 메모리를 제공하지 않음에 유의하십시오. CPU의 OS 및 GPU의 소프트웨어 모두 RAM에 액세스할 수 있습니다. 그러므로 암호화 EL0-s 응용 프로그램에는 적합하지 않습니다. <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>는 이러한 이유로 EL1-s TEE(Trusted Execution Environment)를 제공하지 않습니다.
   </para>
  </note>
  <para>
   Raspberry Pi용 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>는 <literal>Das U-Boot</literal>라는 5단계 부트 로더를 로드하도록 구성됩니다.
  </para>
  <sect3 xml:id="sec-aarch64-deprpi-configtxt">
   <title>Config.txt</title>
   <para>
    구성 정보를 저장하는 비휘발성 메모리가 없습니다. 즉, 부팅 장치 순서, 시간과 날짜 등을 조정하기 위한 기존 설정이 없습니다.
   </para>
   <para>
    대신, 부트 로더는 부팅 매체에서 <literal>config.txt</literal> 구성 파일을 읽습니다. SUSE가 제공하는 <literal>config.txt</literal>는 수정하지 말아야 합니다. 그리고 사용자는 선택적으로 <literal>extraconfig.txt</literal> 파일을 제공할 수 있으며, 이 파일은 필요한 경우 <literal>config.txt</literal>의 설정을 무효화로 만들 수 있습니다. 이를 통해 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>가 필요한 경우 사용자 설정을 덮어쓰지 않고 <literal>config.txt</literal> 파일을 업데이트할 수 있습니다.
   </para>
  </sect3>
  <sect3 xml:id="sec-aarch64-deprpi-otp">
   <title>OTP 메모리</title>
   <para>
    SoC에는 초소형 OTP(One-Time Programmable Memory) 메모리도 탑재되어 있습니다. OTP 메모리를 사용하면 부팅 ROM이 USB 장치 또는 이더넷에서 부팅을 시도해야 하는지와 같은 일부 설정을 구성할 수 있습니다.
   </para>
   <para>
    이 OTP 메모리에 관한 설명은 Raspberry Pi Foundation 웹 사이트(<link xlink:href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/otpbits.md"/>)에서 확인할 수 있습니다.
   </para>
   <warning>
    <title>일회성 프로그래밍 가능만 해당</title>
    <para>
     OTP 메모리에 쓴 구성 설정은 되돌릴 수 없습니다.
    </para>
   </warning>
   <para>
    OTP 메모리의 가장 일반적인 사용 사례는 Raspberry Pi 3 Model B 또는 Compute Module 3에서 USB 부팅을 활성화하는 것입니다.
   </para>
  </sect3>
  <sect3>
   <title>Raspberry Pi 3 Model B에 대해 USB 부팅 모드 활성화</title>
   <para>
    Raspberry Pi 3 Model B의 연결된 USB 대용량 저장 장치 및 온보드 USB 이더넷으로부터의 부팅을 영구적으로 허용하려면, <xref linkend="sec-aarch64-deprpi-img"/>의 설명과 같이 microSD 카드를 준비합니다. 카드의 탑재를 해제하거나 꺼내고 카드에서 부팅하기 전, 다음 설정이 포함된 FAT 파티션을 텍스트 파일 <literal>extraconfig.txt</literal>(<xref linkend="sec-aarch64-deprpi-configtxt"/>)에 추가합니다.
   </para>
<screen>program_usb_boot_mode=1</screen>
   <para>
    그리고 수정된 microSD 카드에서 정상적으로 부팅을 계속합니다. U-Boot 또는 GRUB 부트 로더 또는 Linux 커널에서 출력을 확인한 후에는 전원을 해제한 후 microSD 카드를 제거할 수 있습니다. 이제 장치를 USB(<xref linkend="sec-aarch64-deprpi-usb"/>)에서 부팅할 수 있습니다.
   </para>
   <para>
    USB 부팅 모드는 Raspberry Pi 3 Model B에 활성화되었으며, USB 부팅 모드를 다시 비활성화할 수 없다는 점에 유의하십시오(<xref linkend="sec-aarch64-deprpi-otp"/>).
   </para>
   <para>
    자세한 내용은 Raspberry Pi Foundation 웹사이트(<link xlink:href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md"/>)를 참조하십시오.
   </para>
   <para>
    Raspberry Pi Compute Module 3의 경우 필요한 설정은 동일하지만 수정된 이미지를 배포하는 작업이 약간 더 복잡합니다.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="sec-aarch64-deprpi-rtc">
  <title>실시간 클럭 미제공</title>
  <para>
   Raspberry Pi 자체에서는 배터리로 지원되는 RTC(실시간 클럭)가 없습니다.
  </para>
  <note>
   <title>시간 동기화</title>
   <para>
    실시간 클럭이 없으므로 Raspberry Pi 장치는 네트워크 시간 프로토콜을 사용하여 네트워크 서버에서 시간을 가져오도록 구성해야 합니다.
   </para>
  </note>
  <para>
   그러나 Raspberry Pi Compute Modules의 베이스 보드가 RTC를 제공할 수 있습니다.
  </para>
  <para>
   또한, HAT(Hardware Attached on Top)나 기타 확장 보드를 사용하여 GPIO 커넥터를 통해 RTC에 연결할 수도 있습니다.
  </para>
  <para>
   둘 중 어떤 방식을 사용하든지 간에, <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>의 각 RTC 칩셋 지원 여부를 확인하십시오. 연결된 RTC는 장치 트리 오버레이(<xref linkend="sec-aarch64-deprpi-configtxt"/>)를 통해 운영 체제에 설명되어야 합니다. 예를 들어, MyPi 베이스 보드는 다음을 사용할 수 있습니다.
  </para>
<screen>dtparam=i2c1=on
dtoverlay=i2c-rtc,ds1307</screen>
 </sect2>

 <sect2 xml:id="sec-aarch64-deprpi-img">
  <title>어플라이언스 이미지 배포</title>
  <para>
   운영 체제를 Raspberry Pi 하드웨어에 배포하는 가장 일반적인 방법은 사전 설치된 시스템 이미지를 부팅 매체(일반적으로 microSD 카드)에 복사하는 것입니다. 이 방법이 가장 간단하고 편리합니다.
  </para>
  <para>
   SUSE는 Raspberry Pi 하드웨어용 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>의 사전 구성 부팅 가능 이미지를 제공합니다. 이 이미지는 성능을 향상하고 microSD 미디어에서의 마모를 줄일 수 있도록 압축된 Btrfs 파일 시스템으로 제공됩니다.
  </para>
  <para>
   최소 크기가 8GB인 microSD 카드를 사용하는 것이 좋습니다. 카드의 속도가 빠르면 시스템 성능이 향상됩니다. 첫 번째 부팅에서 운영 체제는 파일 시스템을 자동으로 확장하여 카드를 채웁니다. 즉, 첫 번째 부팅은 이후 부팅보다 속도가 매우 느립니다.
  </para>
  <para>
   카드 이미지를 microSD 미디어에 쓰는 프로세스에 대한 설명은 <link xlink:href="https://documentation.suse.com/sles-15/html/SLES-rpi-quick/art-rpiquick.html"><citetitle>Raspberry Pi 빠른 시작</citetitle></link>에서 제공됩니다.
  </para>
 </sect2>

 <sect2 xml:id="sec-aarch64-deprpi-usb">
  <title>USB 미디어에서 설치</title>
  <para>
   일부 Raspberry Pi 모델은 USB 대용량 저장 장치로부터의 부팅을 허용합니다. 그러면 서버 플랫폼과 유사하게 Raspberry Pi에 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>를 배포할 수 있습니다.
  </para>
  <para>
   이동식 USB 매체(예: 메모리 스틱)를 사용하여 시스템의 내부 슬롯에 있는 microSD 카드에 설치할 수 있습니다. 아니면, 이동식 USB 매체를 사용하여 다른 USB 매체(예: USB 연결 하드 디스크)에 설치하는 것도 가능합니다.
  </para>
  <note>
   <title>USB 대역폭 제한</title>
   <para>
    Raspberry Pi 3의 이더넷 컨트롤러는 장치의 온보드 USB 2.0 버스에 연결됩니다.
   </para>
   <para>
    그러므로 USB를 통해 연결된 디스크에서 구동되는 운영 체제는 USB 2.0 컨트롤러의 총 480Mbps 대역폭을 공유해야 합니다. 이로 인해 성능이 제한되며 네트워크 성능에 커다란 영향을 줄 수 있습니다.
   </para>
   <para>
    이러한 제한은 Raspberry Pi 4에는 적용되지 않습니다.
   </para>
  </note>
  <para>
   BCM2837 B0 실리콘(블랙 칩이 아닌 실버 칩)이 적용된 최신 Raspberry Pi 3 모델(예: Raspberry Pi 3 Model B+ 및 Compute Module 3+)은 기본적으로 USB 연결 저장 장치로부터의 부팅을 허용합니다.
  </para>
  <para>
   기존 모델(예: Raspberry Pi 3 Model B 또는 Compute Module 3)의 경우 USB 부팅은 특별하게 준비된 microSD 카드에서 한 번 부팅하여 활성화할 수 있습니다. 자세한 내용은 <xref linkend="sec-aarch64-deprpi-otp"/> 항목을 참조하십시오.
  </para>
 </sect2>

 <sect2 xml:id="sec-aarch64-deprpi-net">
  <title>네트워크에서 설치</title>
  <para>
   하드웨어에는 온보드 펌웨어(<xref linkend="sec-aarch64-deprpi-boot"/>)가 없기 때문에, PXE를 사용하여 Raspberry Pi를 네트워크에서 부팅하는 것은 기존 컴퓨터보다 좀 더 복잡합니다.
  </para>
  <para>
   x86 및 Arm용 PXE 부팅 서버를 설정하는 프로세스에 대한 설명은 SUSE 모범 사례 문서 <link xlink:href="https://documentation.suse.com/sbp/all/html/SBP-Multi-PXE-Install/index.html"><citetitle>멀티 PXE 설치 서버 설정 방법</citetitle></link>에서 확인할 수 있습니다.
  </para>
  <para>
   Raspberry Pi Foundation은 한 Raspberry Pi에서 다른 Raspberry Pi로 PXE를 사용하여 부팅하는 방법에 대한 정보를 <link xlink:href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net_tutorial.md"/>에서 제공합니다.
  </para>
 </sect2>

 <sect2>
  <title>추가 정보</title>
  <para>
   자세한 정보는 다음 자료를 참조하십시오.
  </para>
  <variablelist>
   <varlistentry>
    <term>SUSE Linux Enterprise Server 15 SP3 릴리스 정보</term>
    <listitem>
     <para>
      Raspberry Pi를 실행하는 경우의 하드웨어 호환성, 지원되는 옵션 및 기능에 관한 자세한 정보는 SUSE Linux Enterprise Server 릴리스 정보에서 <citetitle>Raspberry Pi의 부팅 및 드라이브 사용 여부</citetitle> 절을 참조하십시오.
     </para>
     <para>
      <link xlink:href="https://www.suse.com/releasenotes/aarch64/SUSE-SLES/15-SP3/#aarch64-rpi"/>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><citetitle>Raspberry Pi 빠른 시작</citetitle></term>
    <listitem>
     <para>
      <link xlink:href="https://documentation.suse.com/sles-15/html/SLES-rpi-quick/art-rpiquick.html"/>
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>openSUSE 하드웨어 호환성 목록: Raspberry Pi 3</term>
    <listitem>
     <para>
      openSUSE 프로젝트도 Raspberry Pi 하드웨어의 설치 및 구성에 관한 정보를 제공합니다. 이러한 정보 중 많은 사항이 SUSE Linux Enterprise에도 적용됩니다.
     </para>
     <para>
      <link xlink:href="https://en.opensuse.org/HCL:Raspberry_Pi3"/>를 참조하십시오.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Das U-Boot</term>
    <listitem>
     <para>
      <literal>Das U-Boot</literal> 부트 로더에 관한 자세한 정보는 프로젝트의 GitHub 페이지(<link xlink:href="https://github.com/u-boot/u-boot"/>)에서 확인할 수 있습니다.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>
</sect1>
