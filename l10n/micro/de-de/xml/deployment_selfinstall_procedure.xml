<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_selfinstall_procedure.xml" version="5.0" xml:id="cha-selfinstal-procedure">
 <title>Bereitstellen von selbstinstallierenden Images</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    In diesem Kapitel wird die Bereitstellung von SLE Micro über selbstinstallierende, vordefinierte ISO-Images beschrieben.
   </para>
  </abstract>
 </info>
 <para>
  <phrase role="productname"><phrase os="slemicro">SUSE Linux Enterprise Micro</phrase></phrase> bietet selbstinstallierende ISO-Images, mit denen Sie SLE Micro auf Ihrem Computer (entweder eine virtuelle Maschine oder ein Bare-Metal-System) bereitstellen und das System beim ersten Starten konfigurieren können.
 </para>
 <para>
  Zum Vorbereiten der Einrichtung benötigen Sie Folgendes:
 </para>
 <itemizedlist>
  <listitem>
   <para>
    einen Datenträger (physisch oder virtuell), auf dem SLE Micro ausgeführt wird
   </para>
  </listitem>
  <listitem>
   <para>
    ein bootfähiges Gerät mit der selbstinstallierenden ISO (z. B. ein USB-Datenträger)
   </para>
  </listitem>
  <listitem>
   <para>
    (optional) ein Gerät, das als Konfigurationsmedium fungiert. Zum Vorbereiten des Konfigurationsgeräts führen Sie die Schritte in <xref linkend="pro-selfinstall-configuration-device"/> aus.
   </para>
  </listitem>
 </itemizedlist>
 <para>
  Wenn Sie das Konfigurationsgerät während der Installation nicht anschließen, wird <emphasis>jeos-firstboot</emphasis> beim ersten Booten gestartet. Mit diesem Tool können Sie eine Minimalkonfiguration von SLE Micro durchführen. Die Vorgehensweise finden Sie unter <xref linkend="sec-jeos-firstboot-selfinstall"/>. Für eine komplexere Konfiguration benötigen Sie das Konfigurationsmedium.
 </para>
 <para>
  Zur Installation von SLE Micro fahren Sie entsprechend den Anweisungen in <xref linkend="proc-selfinstall-installation"/> fort.
 </para>
 <important>
  <title>Das Konfigurationsgerät muss beim ersten Starten angeschlossen sein.</title>
  <para>
   Denken Sie daran, dass das Konfigurationsgerät, falls verwendet, während des gesamten Konfigurationsprozesses beim ersten Starten angeschlossen sein muss. Es wird empfohlen, das Gerät vor Beginn des Installationsprozesses anzuschließen. Falls Ihre Firmware nicht zwei oder mehr angeschlossene USB-Datenträger beim Starten unterstützt, können Sie das USB-Gerät vor Beginn des Konfigurationsprozesses austauschen.
  </para>
 </important>
 <note>
    <title>Bei der Installation mit dem selbstinstallierenden ISO-Image wird kein Boot-EFI-Eintrag erstellt.</title>
    <para>
     Bei der Bereitstellung des selbstinstallierenden ISO wird das Image des Systems einfach auf die ausgewählte Festplatte kopiert. Daher wird kein EFI-Boot-Eintrag erstellt (wie es normalerweise bei der Bereitstellung des Systems über ein Installationsprogramm der Fall wäre). Möglicherweise müssen Sie Ihr System manuell über die EFI-Shell booten, indem Sie den SLE Micro-Bootloader auswählen. Nach dem ersten Starten können Sie <command>efibootmgr</command> verwenden, um den Booteintrag zu erstellen. <command>efibootmgr</command> ist in dem bereitgestellten Image standardmäßig verfügbar.
    </para>
   </note>
 <procedure xml:id="proc-selfinstall-installation">
  <title>Installation von SLE Micro</title>
  <step>
   <para>
    Bereiten Sie bei Bedarf das Konfigurationsgerät wie in <xref linkend="pro-selfinstall-configuration-device"/> beschrieben vor.
   </para>
  </step>
  <step>
   <para>
    Starten Sie den Computer mit der angeschlossenen selbstinstallierenden ISO.
   </para>
  </step>
  <step>
   <para>
    Starten Sie den Installationsprozess mit <guimenu>SLE Micro installieren</guimenu>.
   </para>
  </step>
  <step>
   <para>
    Wählen Sie den Datenträger aus, auf dem SLE Micro installiert werden soll, und bestätigen Sie, dass Sie die Daten auf dem Datenträger löschen möchten. Daraufhin wird ein SLE Micro-Image auf den Datenträger kopiert.
   </para>
  </step>
  <step>
   <para>
    Ihr System wird mit <command>kexec</command> neu gestartet und dann für den Konfigurationsprozess vorbereitet.
   </para>
  </step>
  <step>
   <para>
    Starten Sie den Konfigurationsprozess, indem Sie <guimenu>SLE Micro</guimenu> auswählen. SLE Micro wird entweder gemäß den Anweisungen auf dem Konfigurationsgerät konfiguriert oder <emphasis>jeos-firstboot</emphasis> wird gestartet.
   </para>
  </step>
  <step>
   <para>
    (Optional) Konfigurieren Sie Ihr System mit <emphasis>jeos-firstboot</emphasis> wie in <xref linkend="sec-jeos-firstboot-selfinstall"/> beschrieben.
   </para>
  </step>
   <step>
   <para>
    Nach dem ersten Starten können Sie Ihre SLE Micro-Instanz mit dem Befehl <command>transactional-update</command> registrieren. Detaillierte Informationen finden Sie in <xref linkend="sec-images-registration"/>.
   </para>
   <para>
    Für SLE Micro sind Erweiterungen verfügbar. Wenn Sie eine dieser Erweiterungen verwenden möchten, nehmen Sie sie vom installierten System aus in Ihr Abonnement auf. Detaillierte Informationen finden Sie in <xref linkend="sec-adding-extension"/>.
   </para>
  </step>
 </procedure>
 <section xml:id="sec-selfinstall-conf-device">
  <title>Preparing the configuration device</title>
  <para>
   The following procedure describes how to prepare the configuration device:
  </para>
  <procedure xml:id="pro-selfinstall-configuration-device">
  <title>Preparing the configuration device</title>
  <step>
   <para>
    Format the disk to any file system supported by SLE Micro: Ext3, Ext4, etc:
   </para>
<screen>
<prompt>&gt; </prompt>sudo mkfs.ext4 /dev/sd<replaceable>Y</replaceable>
</screen>
  </step>
  <step>
   <para>
    Set the device label to either <literal>ignition</literal> (when either
    Ignition or Combustion is used) or <literal>combustion</literal> (when only
    Combustion is used). For the Ext4 file system:
   </para>
<screen><prompt>&gt; </prompt>sudo e2label /dev/sd<replaceable>Y</replaceable> ignition</screen>
   <para>
    You can use any type of configuration storage media that your
    virtualization system or your hardware supports: ISO image, a USB
    flash disk, etc
   </para>
  </step>
  <step>
   <para>
    Mount the device:
   </para>
<screen>
<prompt>&gt; </prompt>sudo mount /dev/sdY /mnt
</screen>
  </step>
  <step>
   <para>
    Create the directory structure as mentioned in
    <xref linkend="cha-images-ignition"/> or
    <xref linkend="cha-images-combustion"/>, depending on the configuration
    tool used:
   </para>
<screen>
<prompt>&gt; </prompt>sudo mkdir -p /mnt/ignition/
</screen>
   <para>
    or:
   </para>
<screen>
<prompt>&gt; </prompt>sudo mkdir -p /mnt/combustion/
</screen>
  </step>
  <step>
   <para>
    Prior to booting for the first time, prepare all elements of the
    configuration that will be used by
    <xref linkend="cha-images-ignition" xrefstyle="template:Ignition"/> or
    <xref linkend="cha-images-combustion" xrefstyle="template:Combustion"/>. To
    log in to your system, you need to provide a password for <systemitem class="username">root</systemitem> or set
    up passwordless authentication, otherwise the system will not be accessible
    after the first boot.
   </para>
  </step>
</procedure>
 </section>
 <section xml:id="sec-jeos-firstboot-selfinstall">
  <title>Minimal initial configuration</title>
  <para>
   If you do not attach any configuration medium,
   <emphasis>jeos-firstboot</emphasis> is started, and you can perform a
   minimal configuration of your system as follows:
  </para>
  <procedure>
   <title>Configuring the system using <emphasis>jeos-firstboot</emphasis></title>
   <step>
    <para>
     Confirm the configuration.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_start.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_start.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>jeos first boot</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Select your keyboard layout and confirm your selection.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_keyboard.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_keyboard.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>jeos keyboard selection</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Read the license agreement and accept it.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_eula.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_eula.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>jeos EULA</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Select your time zone.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_timezone.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_timezone.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>jeos time zone selection</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Enter a password for <systemitem class="username">root</systemitem>.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_password.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_password.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>root password</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Confirm the <systemitem class="username">root</systemitem> password.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_password_confirm.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_password_confirm.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>root password confirmation</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Accept the statement about SLE Micro registration.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_statement.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_statement.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>root password</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
  </procedure>
 </section>
</chapter>
