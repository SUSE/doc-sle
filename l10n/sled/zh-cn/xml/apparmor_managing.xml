<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="apparmor_managing.xml" version="5.0" xml:id="cha-apparmor-managing">
 <title>管理已构建配置文件的应用程序</title>
 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker>
        </dm:bugtracker>
	<dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <para>
  如果您在创建配置文件并使应用程序免疫后，对 <phrase>AppArmor®</phrase> 配置文件进行维护（包括分析日志文件、优化配置文件、备份配置文件集并使其保持最新），<phrase role="productname"><phrase os="sled">SUSE® Linux Enterprise Desktop</phrase></phrase> 的效率就会提升并得到更好的保护。您可以通过设置事件电子邮件通知、运行 aa-logprof 工具以根据系统日志项更新配置文件，以及处理维护问题，在这些问题造成影响之前对其妥善处理。
 </para>


 <sect1 xml:id="sec-apparmor-managing-react">
  <title>对安全事件拒绝做出反应</title>

  <para>
   收到安全事件拒绝时，请检查访问违规情况并确定此事件表示的是威胁还是正常应用程序行为的一部分。要进行判断，您必须具备特定于该应用程序的知识。如果拒绝的操作是正常应用程序行为的一部分，请在命令行中运行 <command>aa-logprof</command>。
  </para>

  <para>
   如果拒绝的操作不是正常应用程序行为的一部分，则应将此访问视为一次可能的入侵企图（已被阻止），并将此通知发送给贵组织中负责安全性的人员。
  </para>
 </sect1>
 <sect1 xml:id="sec-apparmor-managing-maintain">
  <title>维护安全配置文件</title>

  <para>
   在生产环境中，您应计划如何维护所有部署的应用程序的配置文件。安全策略是部署过程中不可分割的一部分。您应计划采取措施来备份和恢复安全策略文件，计划软件的更改，还应允许根据您的环境要求对安全策略进行任何必要的修改。
  </para>

  <sect2 xml:id="sec-apparmor-managing-maintain-backup">
   <title>备份安全配置文件</title>
   <para>
    通过备份配置文件，当磁盘崩溃后，您可能就不必重新构建所有程序的配置文件。另外，如果配置文件被更改，您可以使用备份的文件轻松地恢复之前设置。
   </para>
   <para>
    通过将配置文件复制到指定目录而备份配置文件。
   </para>
   <procedure>
    <step>
     <para>
      首先，您应将这些文件存档到一个文件中。为此，请打开终端窗口并以 <systemitem class="username">root</systemitem> 身份输入以下命令：
     </para>
<screen><prompt>&gt; </prompt><command>sudo</command> tar zclpf profiles.tgz /etc/apparmor.d</screen>
     <para>
      要确保系统定期备份您的安全策略文件，最简单的方法是在备份系统存档的目录列表中包含 <filename>/etc/apparmor.d</filename> 目录。
     </para>
    </step>
    <step>
     <para>
      您也可以使用 <command>scp</command> 或 Nautilus 等文件管理器将文件存储到某种存储媒体、网络或另一台计算机中。
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-apparmor-managing-maintain-change">
   <title>更改安全配置文件</title>
   <para>
    如果您确定系统对其应用程序要求保证安全性，维护安全配置文件会包含对它们的更改。要在 <phrase>AppArmor</phrase> 中更改配置文件，请参见<xref xrefstyle="SectTitleOnPage" linkend="sec-apparmor-yast-edit"/>。
   </para>
  </sect2>

  <sect2 xml:id="sec-apparmor-managing-maintain-change-new-software">
   <title>将新软件引入您的环境</title>
   <para>
    将新的应用程序版本或补丁添加到系统时，请务必更新配置文件以满足您的需要。根据贵公司的软件部署策略，您有若干选择。您可以将您的补丁和升级程序部署到测试或生产环境中。以下介绍每种方式的操作方法。
   </para>
   <para>
    如果您打算在测试环境中部署补丁或进行升级，更新配置文件的最佳方法是在终端中以 <systemitem class="username">root</systemitem> 身份运行 <command>aa-logprof</command>。有关详细说明，请参见<xref xrefstyle="HeadingOnPage" linkend="sec-apparmor-commandline-profiling-summary-logprof"/>。
   </para>
   <para>
    如果您打算直接在生产环境中部署补丁或进行升级，更新配置文件的最佳方法是经常监视系统，以确定是否需要将任何新的拒绝添加到配置文件，并根据需要使用 <command>aa-logprof</command> 进行更新。有关详细说明，请参见<xref xrefstyle="HeadingOnPage" linkend="sec-apparmor-commandline-profiling-summary-logprof"/>。
   </para>
  </sect2>
 </sect1>
</chapter>
