<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd">
<!--
*********************************
Please see LICENSE.txt for this document's license.
*********************************
-->
<chapter xml:base="deployment_auto.xml" id="cha.deployment.autoinst">
 <title>Installazione automatizzata</title>
 <para>
  AutoYaST consente di installare SUSE® Linux Enterprise su un ampio numero di computer in parallelo. La tecnologia AutoYaST offre una grande flessibilità per adeguare le distribuzioni ad hardware eterogenei. Questo capitolo illustra come preparare una semplice installazione automatizzata e disporre uno scenario avanzato che coinvolge diversi tipologie di hardware e scopi di installazione.
 </para>
 <sect1 id="sec.deployment.autoinst.simple">
  <title>Installazione semplice su larga scala</title>

  <important>
   <title>hardware identico</title>
   <para>
    In questo scenario si presume che si installi SUSE Linux Enterprise in una serie di computer con la stessa configurazione hardware.
   </para>
  </important>

  <para>
   Per preparare un'installazione di AutoYaST su larga scala, eseguire le operazioni riportate di seguito:
  </para>

  <procedure>
   <step performance="required">
    <para>
     Creare un profilo AutoYaST contenente i dettagli di installazione necessari per la distribuzione, secondo quanto descritto nella <xref linkend="sec.deployment.autoinst.simple.profile"/>.
    </para>
   </step>
   <step performance="required">
    <para>
     Determinare l'origine del profilo AutoYaST e il parametro da passare alle routine di installazione, come descritto nella <xref linkend="sec.deployment.autoinst.simple.dist"/>.
    </para>
   </step>
   <step performance="required">
    <para>
     Determinare l'origine dei dati di installazione di SUSE Linux Enterprise come descritto nella <xref linkend="sec.deployment.autoinst.simple.source"/>.
    </para>
   </step>
   <step performance="required">
    <para>
     Definire e configurare lo scenario di avvio per l'installazione automatica, come descritto nella <xref linkend="sec.deployment.autoinst.simple.boot"/>.
    </para>
   </step>
   <step performance="required">
    <para>
     Passare la riga di comando alle routine di installazione aggiungendo manualmente i parametri o creando un file <filename>info</filename>, come descritto nella <xref linkend="sec.deployment.autoinst.simple.info"/>.
    </para>
   </step>
   <step performance="required">
    <para>
     Avviare il processo di installazione automatica, come descritto nella <xref linkend="sec.deployment.autoinst.simple.install"/>.
    </para>
   </step>
  </procedure>

  <sect2 id="sec.deployment.autoinst.simple.profile">
   <title>Creazione di un profilo AutoYaST</title>
   <para>
    Un profilo AutoYaST indica ad AutoYaST i componenti da installare e come configurare il sistema installato per ottenere un sistema pronto all'uso. È possibile installare in molti modi diversi.
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Clonare una nuova installazione da un computer di riferimento in una serie di computer uguali
     </para>
    </listitem>
    <listitem>
     <para>
      Utilizzare la GUI di AutoYaST per creare e modificare un profilo in base alle esigenze
     </para>
    </listitem>
    <listitem>
     <para>
      Utilizzare un editor XML e creare un nuovo profilo
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Per clonare una nuova installazione di riferimento, procedere come indicato di seguito:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Avviare una normale installazione come descritto nel <xref linkend="cha.inst"/> e configurare il sistema in base alle esigenze. Nella schermata <guimenu>Impostazioni dell'installazione</guimenu>, (<xref linkend="sec.i.yast2.proposal"/>) scegliere <guimenu>Clona configurazione del sistema</guimenu> e attivare <guimenu>Scrivi profilo AutoYaST in /root/autoinst.xml</guimenu>.
     </para>
    </step>
    <step performance="required">
     <para>
      In <filename>/root/autoinst.xml</filename> verrà creato un profilo pronto all'uso. Può essere usato per creare cloni di questa particolare installazione.
     </para>
    </step>
   </procedure>
   <para>
    Per utilizzare la GUI di AutoYaST per creare un profilo da una configurazione di sistema esistente e modificarlo in base alle esigenze, procedere come indicato di seguito:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Avviare YaST come <systemitem class="username">utente root</systemitem>.
     </para>
    </step>
    <step performance="required">
     <para>
      Selezionare <menuchoice><guimenu>Varie</guimenu><guimenu>Installazione automatica</guimenu></menuchoice> per avviare il front-end grafico di AutoYaST.
     </para>
    </step>
    <step performance="required">
     <para>
      Selezionare <menuchoice> <guimenu>Strumenti</guimenu> <guimenu>Crea profilo di riferimento</guimenu> </menuchoice> per preparare AutoYaST a eseguire la copia speculare della configurazione di sistema esistente in un profilo AutoYaST.
     </para>
    </step>
    <step performance="required">
     <para>
      Oltre alle risorse di default (come il boot loader, le partizioni e la selezione del software), è possibile aggiungere molti altri aspetti del sistema al profilo, selezionando gli elementi nell'elenco di <guimenu>Crea un file di controllo di riferimento</guimenu>.
     </para>
    </step>
    <step performance="required">
     <para>
      Fare clic su <guimenu>Crea</guimenu> affinché YaST raccolga tutte le informazioni di sistema e le scriva in un nuovo profilo.
     </para>
    </step>
    <step performance="required">
     <para>
      Per continuare, selezionare una delle seguenti opzioni:
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        Se il profilo è completo e soddisfa i requisiti, selezionare <menuchoice> <guimenu>File</guimenu> <guimenu>Salva come</guimenu> </menuchoice> e immettere un nome di file per il profilo, ad es. <filename>autoinst.xml</filename>.
       </para>
      </listitem>
      <listitem>
       <para>
        Modificare il profilo di riferimento selezionando gli aspetti di configurazione appropriati (come <quote>Hardware/Stampante</quote>) dalla vista struttura a sinistra e facendo clic su <guimenu>Configura</guimenu>. Viene avviato il modulo YaST, ma le impostazioni vengono scritte sul profilo AutoYaST e non applicate al sistema. Al termine, selezionare <menuchoice><guimenu>File</guimenu> <guimenu>Salva con nome</guimenu></menuchoice> e specificare un nome adatto per il profilo.
       </para>
      </listitem>
     </itemizedlist>
    </step>
    <step performance="required">
     <para>
      Uscire dal modulo AutoYaST selezionando <menuchoice><guimenu>File</guimenu><guimenu>Esci</guimenu> </menuchoice>.
     </para>
    </step>
   </procedure>
   <figure>
    <title>Modifica di un profilo AutoYaST con il front-end di AutoYaST</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast_gui.png" width="75%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="autoyast_gui.png" width="75%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 id="sec.deployment.autoinst.simple.dist">
   <title>Distribuzione del profilo e individuazione del parametro AutoYaST</title>
   <para>
    È possibile distribuire il profilo AutoYAST in molti modi diversi. In base al protocollo utilizzato per distribuire i dati di profilo, vengono utilizzati diversi parametri di AutoYaST per rendere nota l'ubicazione del profilo alle routine di installazione nel client. L'ubicazione del profilo viene passata alle routine di installazione per mezzo del prompt di avvio o di un file <filename>info</filename> caricato all'avvio. Sono disponibili le seguenti opzioni:
   </para>
   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Ubicazione profilo
        </para>
       </entry>
       <entry>
        <para>
         Parametro
        </para>
       </entry>
       <entry>
        <para>
         Descrizione
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         File
        </para>
       </entry>
       <entry>
        <para>
         <filename>autoyast=file://<replaceable>percorso</replaceable></filename>
        </para>
       </entry>
       <entry>
        <para>
         Indica alle routine di installazione di cercare il file di controllo nel percorso indicato (relativo alla directory principale dell'origine—<filename>file:///autoinst.xml</filename> se si trova nella directory superiore di un CD-ROM).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         Dispositivo
        </para>
       </entry>
       <entry>
        <para>
         <filename>autoyast=device://<replaceable>percorso</replaceable></filename>
        </para>
       </entry>
       <entry>
        <para>
         Indica alle routine di installazione di cercare il file di controllo in un dispositivo di memorizzazione. È richiesto solo il nome del dispositivo—<filename>/dev/sda1</filename> è errato, utilizzare invece <filename>sda1</filename>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         NFS
        </para>
       </entry>
       <entry>
        <para>

         <filename>autoyast=nfs://<replaceable>server</replaceable>/<replaceable>percorso</replaceable></filename>
        </para>
       </entry>
       <entry>
        <para>
         Le routine di installazione recuperano il file di controllo da un server NFS.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         HTTP
        </para>
       </entry>
       <entry>
        <para>

         <filename>autoyast=http://<replaceable>server</replaceable>/<replaceable>percorso</replaceable></filename>
        </para>
       </entry>
       <entry>
        <para>
         Le routine di installazione recuperano il file di controllo da un server HTTP.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         HTTPS
        </para>
       </entry>
       <entry>
        <para>

         <filename>autoyast=https://<replaceable>server</replaceable>/<replaceable>percorso</replaceable></filename>
        </para>
       </entry>
       <entry>
        <para>
         Le routine di installazione recuperano il file di controllo da un server HTTPS.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         TFTP
        </para>
       </entry>
       <entry>
        <para>

         <filename>autoyast=tftp://<replaceable>server</replaceable>/<replaceable>percorso</replaceable></filename>
        </para>
       </entry>
       <entry>
        <para>
         Le routine di installazione recuperano il file di controllo da un server TFTP.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         FTP
        </para>
       </entry>
       <entry>
        <para>

         <filename>autoyast=ftp://<replaceable>server</replaceable>/<replaceable>percorso</replaceable></filename>
        </para>
       </entry>
       <entry>
        <para>
         Le routine di installazione recuperano il file di controllo da un server FTP.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
   <para>
    Sostituire i segnaposto <replaceable>server</replaceable> e <replaceable>percorso</replaceable> con i valori corrispondenti alla effettiva configurazione.
   </para>
   <para>
    AutoYaST include una funzione che consente di associare alcuni profili all'indirizzo MAC di un client. Senza dover modificare il parametro <option>autoyast=</option>, è possibile installare con la stessa configurazione diverse istanze utilizzando profili differenti.
   </para>
   <para>
    A tale scopo, procedere come indicato di seguito:
   </para>
   <procedure>
    <step performance="required">
     <para>
      Creare profili separati con l'indirizzo MAC del client come nome file e inserire i profili sul server HTTP che contiene i profili AutoYaST.
     </para>
    </step>
    <step performance="required">
     <para>
      Omettere il percorso esatto includendo il nome del file alla creazione del parametro <option>autoyast=</option>, ad esempio:
     </para>
<screen>autoyast=tftp://192.168.1.115/</screen>
    </step>
    <step performance="required">
     <para>
      Avviare l'autoinstallazione.
     </para>
    </step>
   </procedure>
   <para>
    YaST tenta di determinare la posizione del profilo come indicato di seguito:
   </para>
   <orderedlist spacing="normal">
    <listitem>
     <para>
      YaST cerca il profilo utilizzando il proprio indirizzo IP in formato maiuscolo esadecimale, ad esempio <literal>192.0.2.91</literal> è <literal>C000025B</literal>.
     </para>
    </listitem>
    <listitem>
     <para>
      Se il file non viene trovato, YaST rimuove una cifra esadecimale ed effettua un altro tentativo. L'azione viene ripetuta otto volte fino a quando non viene trovato il nome del file corretto.
     </para>
    </listitem>
    <listitem>
     <para>
      Se l'azione si conclude con un errore, l'applicazione tenta di trovare un file il cui nome contenga l'indirizzo MAC dei client. L'indirizzo MAC del client di esempio è <literal>0080C8F6484C</literal>.
     </para>
    </listitem>
    <listitem>
     <para>
      Se il file con il nome dell'indirizzo MAC non viene trovato, YaST cerca un file denominato <filename>default</filename> (minuscolo). Una sequenza di esempio degli indirizzi in cui YaST ricerca il profilo AutoYaST si presenta come segue:
     </para>
<screen>
C000025B 
C000025 
C00002 
C0000 
C000 
C00 
C0 
C 
0080C8F6484C 
default
     </screen>
    </listitem>
   </orderedlist>
  </sect2>

  <sect2 id="sec.deployment.autoinst.simple.source">
   <title>Inserimento dei dati di installazione</title>
   <para>
    I dati di installazione possono essere forniti mediante i CD o DVD del prodotto o utilizzando una fonte di installazione di rete. Se si utilizzano i CD del prodotto come origine dell'installazione, è necessario l'accesso fisico al client da installare perché il processo di avvio deve essere eseguito manualmente e i CD devono essere sostituiti.
   </para>
   <para>
    Per fornire le origini di installazione in rete, configurare un server di installazione di rete (HTTP, NFS, FTP) come descritto nella <xref linkend="sec.deployment.remoteinst.instserver.sles9"/>. Utilizzare un file <filename>info</filename> per trasmettere la locazione del server alle routine di installazione.
   </para>
  </sect2>

  <sect2 id="sec.deployment.autoinst.simple.boot">
   <title>Configurazione dello scenario di avvio</title>
   <para>
    Il client può essere avviato in diversi modi:
   </para>
   <variablelist>
    <varlistentry>
     <term>Avvio dalla rete</term>
     <listitem>
      <para>
       Come per la normale installazione remota, l'installazione automatica può essere avviata con Wake on LAN e PXE, l'immagine di avvio e il file di controllo possono essere ottenuti tramite TFTP e le origini dell'installazione da qualsiasi server di installazione di rete.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>CD-ROM</term>
     <listitem>
      <para>
       È possibile utilizzare il supporto di SUSE Linux Enterprise originale per avviare l'autoinstallazione e ricavare il file di controllo da una locazione di rete o un supporto rimovibile. In alternativa, creare un CD-ROM personalizzato contenente sia le origini di installazione sia il profilo AutoYaST.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Le sezioni seguenti illustrano le procedure di base per l'avvio dalla rete o da CD-ROM.
   </para>
   <sect3 id="sec.deployment.autoinst.simple.boot.pxe">
    <title>Preparazione all'avvio dalla rete</title>
    <para>
     L'avvio dalla rete con Wake on LAN, PXE e TFTP viene illustrato nella <xref linkend="sec.deployment.remoteinst.scenario.vncpxe"/>. Per utilizzare la configurazione per l'autoinstallazione, modificare il file di configurazione PXE Linux (<filename>/srv/tftp/pxelinux.cfg/default</filename>) per contenere il parametro <literal>autoyast</literal> indicante la posizione del profilo AutoYaST. Una voce di esempio per un'installazione standard è la seguente:
    </para>
<screen>
default linux 

# default label linux 
    kernel linux
    append initrd=initrd install=http://192.168.1.115/install/suse-enterprise/ 
	  
	</screen>
    <para>
     Lo stesso esempio per l'autoinstallazione è il seguente:
    </para>
<screen>
default linux 

# default label linux 
    kernel linux
    append initrd=initrd install=http://192.168.1.115/install/suse-enterprise/ \
           autoyast=nfs://192.168.1.110/profiles/autoinst.xml
	</screen>
    <para>
     Sostituire gli indirizzi IP e i percorsi con i dati utilizzati nella configurazione.
    </para>
   </sect3>
   <sect3 id="sec.deployment.autoinst.simple.boot.cd">
    <title>Preparazione all'avvio da CD-ROM</title>
    <para>
     Per le autoinstallazioni di AutoYaST l'avvio da CD-ROM può avvenire in diversi modi. Scegliere una delle seguenti opzioni:
    </para>
    <variablelist>
     <varlistentry>
      <term>Avviare dal supporto di SUSE Linux Enterprise e ottenere il profilo dalla rete</term>
      <listitem>
       <para>
        Utilizzare questo approccio se uno scenario basato totalmente su rete non è possibile (ad esempio, se l'hardware in uso non supporta PXE) e si dispone di accesso fisico al sistema da installare durante la maggior parte del processo.
       </para>
       <para>
        Sono necessari:
       </para>
       <itemizedlist mark="bullet" spacing="normal">
        <listitem>
         <para>
          Il supporto di SUSE Linux Enterprise
         </para>
        </listitem>
        <listitem>
         <para>
          Un server di rete che fornisca i dati del profilo (vedere la <xref linkend="sec.deployment.autoinst.simple.dist"/> per ulteriori dettagli)
         </para>
        </listitem>
        <listitem>
         <para>
          Un supporto rimovibile contenente il file <filename>info</filename> che indica alle routine di installazione dove trovare il profilo
         </para>
         <para>
          <emphasis>o</emphasis>
         </para>
         <para>
          Accesso al prompt di avvio del sistema da installare dove inserire manualmente il parametro <literal>autoyast=</literal>
         </para>
        </listitem>
       </itemizedlist>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term> Avviare e installare dal supporto di SUSE Linux Enterprise e ottenere il profilo da un supporto rimovibile</term>
      <listitem>
       <para>
        Utilizzare questo approccio nel caso in cui uno scenario di installazione basato totalmente su rete potrebbe non funzionare. Questo approccio richiede l'accesso fisico al sistema da installare per l'indirizzamento al computer di destinazione o, nel secondo caso, l'immissione dell'ubicazione del profilo al prompt di avvio. In entrambi i casi, potrebbe essere necessario cambiare supporto a seconda dell'ambito di installazione.
       </para>
       <para>
        Sono necessari:
       </para>
       <itemizedlist mark="bullet" spacing="normal">
        <listitem>
         <para>
          Il supporto di SUSE Linux Enterprise
         </para>
        </listitem>
        <listitem>
         <para>
          Un supporto rimovibile contenente il profilo e il file <filename>info</filename>
         </para>
         <para>
          <emphasis>o</emphasis>
         </para>
         <para>
          Accesso al prompt di avvio del computer di destinazione per immettere il parametro <option>autoyast=</option>
         </para>
        </listitem>
       </itemizedlist>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Avvio e installazione da un supporto personalizzato, recupero del profilo dal supporto</term>
      <listitem>
       <para>
        Se si desidera installare un numero limitato di pacchetti software e il numero di destinazioni è relativamente basso, si consiglia di creare un CD personalizzato contenente sia i dati di installazione sia il profilo stesso, soprattutto se la rete non è disponibile.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
  </sect2>

  <sect2 id="sec.deployment.autoinst.simple.info">
   <title>Creazione del file <filename>info</filename></title>
   <para>
    Le routine di installazione nella destinazione devono essere a conoscenza dei diversi componenti del framework AutoYaST. Per eseguire l'operazione, creare una riga di comando contenente tutti i parametri necessari per individuare i componenti AutoYaST, le origini di installazione e i parametri necessari per controllare il processo di installazione.
   </para>
   <para>
    Trasmettere manualmente i parametri al prompt di avvio dell'installazione o fornire un file denominato <filename>info</filename> che viene letto dalle routine di installazione (linuxrc). La trasmissione dei parametri al prompt di avvio richiede l'accesso fisico a tutti i client da installare, rendendo l'approccio non adatto alle grandi distribuzioni. Il secondo metodo consente di fornire il file <filename>info</filename> su un supporto che viene preparato e inserito nell'unità dei client prima dell'installazione automatica. In alternativa, utilizzare l'avvio PXE e includere i parametri linuxrc nel file <filename>pxelinux.cfg/default</filename> come illustrato nella <xref linkend="sec.deployment.autoinst.simple.boot.pxe"/>.
   </para>
   <para>
    I parametri seguenti sono usati comunemente per linuxrc. Per ulteriori informazioni, fare riferimento alla documentazione del pacchetto AutoYaST in <filename>/usr/share/doc/packages/autoyast</filename>.
   </para>
   <important>
    <title>separazione dei parametri e dei valori</title>
    <para>
     Quando si trasmettono i parametri a linuxrc al prompt di avvio, utilizzare <literal>=</literal> per separare il parametro dal valore. Quando si utilizza un file <filename>info</filename>, separare il parametro dal valore utilizzando <literal>:</literal>.
    </para>
   </important>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>
        <para>
         Parola chiave
        </para>
       </entry>
       <entry>
        <para>
         Valore
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>netdevice</literal>
        </para>
       </entry>
       <entry>
        <para>
         La periferica di rete da utilizzare per la configurazione della rete (per richieste BOOTP/DHCP). Necessaria solo se sono disponibili più periferiche di rete.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>hostip</literal>
        </para>
       </entry>
       <entry>
        <para>
         Se vuoto, il client invia una richiesta BOOTP, altrimenti il client viene configurato utilizzando i dati specificati.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>netmask</literal>
        </para>
       </entry>
       <entry>
        <para>
         Maschera di rete per la rete selezionata.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>gateway</literal>
        </para>
       </entry>
       <entry>
        <para>
         Gateway di default.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>nameserver</literal>
        </para>
       </entry>
       <entry>
        <para>
         Server dei nomi
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>autoyast</literal>
        </para>
       </entry>
       <entry>
        <para>
         Ubicazione del file di controllo da utilizzare per l'autoinstallazione, ad esempio <literal>autoyast=nfs//192.168.1.110/profiles/</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>installazione</literal>
        </para>
       </entry>
       <entry>
        <para>
         Posizione dell'origine di installazione, ad esempio <literal>install=nfs://192.168.1.110/CDs/</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>vnc</literal>
        </para>
       </entry>
       <entry>
        <para>
         Se impostato su <literal>1</literal>, consente l'installazione remota via VNC.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>vncpassword</literal>
        </para>
       </entry>
       <entry>
        <para>
         La password per VNC
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>usessh</literal>
        </para>
       </entry>
       <entry>
        <para>
         Se impostato su <literal>1</literal>, consente l'installazione remota via SSH.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>netsetup</literal>
        </para>
       </entry>
       <entry>
        <para>
         Se impostata su <literal>1</literal> viene configurata la rete. Di norma questa operazione viene effettuata automaticamente, ma è necessario impostare <literal>netsetup=1</literal> qualora l'archivio di installazione sia disponibile localmente (ad esempio via DVD o immagine iso locale) e il file <filename>info</filename> venga caricato dalla rete.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
   <para>
    Se lo scenario di installazione automatico prevede la configurazione del client tramite DHCP e un'origine dell'installazione di rete, e si desidera monitorare il processo di installazione tramite VNC, il file <filename>info</filename> avrebbe questo aspetto:
   </para>
<screen>autoyast:<replaceable>profile_source</replaceable> install:<replaceable>install_source</replaceable> vnc:1 vncpassword:<replaceable>some_password</replaceable></screen>
   <para>
    Se si preferisce una configurazione di rete statica al momento dell'installazione, il file <filename>info</filename> potrebbe avere il seguente formato:
   </para>
<screen>
autoyast:<replaceable>profile_source</replaceable> \
install:<replaceable>install_source</replaceable> \ 
hostip:<replaceable>some_ip</replaceable> \ 
netmask:<replaceable>some_netmask</replaceable> \ 
gateway:<replaceable>some_gateway</replaceable></screen>
   <para>
    La barra rovesciata (<literal>\</literal>) indica che le interruzioni di riga sono state aggiunte solo per migliorare la leggibilità. Tutte le opzioni devono essere inserite in una stringa continua.
   </para>
   <para>
    I dati <filename>info</filename> possono essere resi disponibili a linuxrc in diversi modi:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Come file in un supporto rimovibile disponibile sul client in fase di installazione. Aggiungere un parametro informazioni simile a <systemitem>info=cd:/info</systemitem>.
     </para>
    </listitem>
    <listitem>
     <para>
      Come file nella directory principale del disco RAM originale utilizzato per l'avvio del sistema fornito dal supporto personalizzato di installazione o mediante PXE.
     </para>
    </listitem>
    <listitem>
     <para>
      Come parte del profilo AutoYaST. In questo caso, il file AutoYaST deve essere denominato <filename>info</filename> per consentire l'analisi da parte di linuxrc. Di seguito viene riportato un esempio per questo approccio.
     </para>
    </listitem>
    <listitem>
     <para>
      Per mezzo di un URL che punta all'ubicazione del file info. La sintassi sarà simile a <systemitem>info=http://www.example.com/info</systemitem>.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    linuxrc cerca una stringa (<option>start_linuxrc_conf</option>) nel profilo che rappresenta l'inizio del file. Se la stringa viene trovata, linuxrc analizza il contenuto compreso tra questa stringa e la stringa <option>end_linuxrc_conf.</option> Le opzioni vengono memorizzate nel profilo come indicato di seguito:
   </para>
<screen>....
  &lt;install&gt;
....
    &lt;init&gt;
      &lt;info_file&gt;
&lt;![CDATA[
#
# Don't remove the following line:
# start_linuxrc_conf
#
install: nfs:<replaceable>server</replaceable>/<replaceable>path</replaceable>
vnc: 1
vncpassword: test
autoyast: file:///info

# end_linuxrc_conf
# Do not remove the above comment
#
]]&gt;

      &lt;/info_file&gt;
    &lt;/init&gt;
......
  &lt;/install&gt;
....
</screen>
   <para>
    linuxrc carica il profilo contenente i parametri di avvio invece del file <filename>info</filename> tradizionale. Il parametro <option>install:</option> punta all'ubicazione delle origini di installazione. <option>vnc</option> e <option>vncpassword</option> indicano l'utilizzo di VNC per il monitoraggio dell'installazione. Il parametro <option>autoyast</option> indica a linuxrc di trattare <filename>info</filename> come un profilo AutoYaST.
   </para>
  </sect2>

  <sect2 id="sec.deployment.autoinst.simple.install">
   <title>Avvio e controllo dell'autoinstallazione</title>
   <para>
    Dopo aver fornito l'infrastruttura indicata in precedenza (profilo, origine di installazione e file <filename>info</filename>), è possibile procedere all'avvio dell'autoinstallazione. In base allo scenario selezionato per l'avvio e il controllo del processo, potrebbe essere necessaria una interazione fisica con il client:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Se il sistema client esegue l'avvio da qualsiasi tipo di supporto fisico, supporto del prodotto o CD personalizzato, è necessario inserire il supporto nell'opportuna unità del client.
     </para>
    </listitem>
    <listitem>
     <para>
      Se il client non viene avviato via Wake on LAN, è necessario almeno attivare il computer client.
     </para>
    </listitem>
    <listitem>
     <para>
      Se non si è scelta l'autoinstallazione automatica, il feedback grafico di AutoYaST viene inviato al monitor del client o, se si utilizza un client headless, a una console seriale.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Per attivare l'autoinstallazione automatica da remoto, utilizzare i parametri VNC o SSH descritti nella <xref linkend="sec.deployment.autoinst.simple.info"/> e connettersi al client da un altro computer come illustrato nella <xref linkend="sec.deployment.remoteinst.monitor"/>.
   </para>
  </sect2>
 </sect1>
 <sect1 id="sec.deployment.autoinst.advanced">
  <title>Autoinstallazione con definizione di regole</title>

  <para>
   Le sezioni seguenti illustrano il concetto base dell'installazione con definizione di regole mediante AutoYaST e forniscono uno scenario di esempio che consente di creare una configurazione di autoinstallazione personalizzata.
  </para>

  <sect2 id="sec.deployment.autoinst.advanced.expl">
   <title>Autoinstallazione con definizione di regole</title>
   <para>
    L'autoinstallazione di AutoYaST con definizione di regole consente di utilizzare ambienti hardware eterogenei:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Il sito contiene hardware di diversi fornitori?
     </para>
    </listitem>
    <listitem>
     <para>
      I computer del sito hanno diverse configurazioni hardware (ad esempio, utilizzano periferiche diverse o dimensioni della memoria e del disco diverse)?
     </para>
    </listitem>
    <listitem>
     <para>
      Si intende eseguire l'installazione su domini diversi o occorre effettuare una distinzione tra di essi?
     </para>
    </listitem>
   </itemizedlist>
   <para>
    L'autoinstallazione basata su regole genera un profilo personalizzato per soddisfare uno scenario eterogeneo unendo diversi profili in un unico profilo. Ciascuna regola descrive una funzione particolare della configurazione (ad esempio le dimensioni del disco) e indica a AutoYaST il profilo da utilizzare quando le regole corrispondono. Più regole che descrivono diverse funzioni della configurazione vengono inserite in un file <filename>rules.xml</filename> di AutoYaST. Lo stack di regole viene quindi elaborato e AutoYaST genera il profilo finale unendo i vari profili che corrispondono alle regole AutoYaST in un profilo unico. Per informazioni sulla procedura, fare riferimento alla <xref linkend="sec.deployment.autoinst.advanced.example"/>.
   </para>
   <para>
    AutoYaST basato su regole offre una maggiore flessibilità per la pianificazione e l'esecuzione della distribuzione di SUSE Linux Enterprise. È possibile effettuare le seguenti operazioni:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Creare regole da associare a qualsiasi attributo di sistema predefinito in AutoYaST
     </para>
    </listitem>
    <listitem>
     <para>
      Combinare più attributi di sistema (ad esempio dimensioni del disco e architettura del kernel) in un'unica regola utilizzando operatori logici
     </para>
    </listitem>
    <listitem>
     <para>
      Creare regole personalizzate eseguendo script di shell e passando i relativi output al framework di AutoYaST. Il numero di regole personalizzate è limitato a cinque.
     </para>
    </listitem>
   </itemizedlist>
   <note>
    <para>
     Per ulteriori informazioni sulla creazione di regole e sull'utilizzo con AutoYaST, fare riferimento alla documentazione del pacchetto disponibile in <filename>/usr/share/doc/packages/autoyast2/html/index.html</filename>, capitolo <guimenu>Regole e classi</guimenu>.
    </para>
   </note>
   <para>
    Per prepararsi a un'installazione di massa di AutoYaST basata su regole, eseguire le operazioni riportate di seguito.
   </para>
   <procedure>
    <step performance="required">
     <para>
      Creare diversi profili AutoYaST che contengano i dettagli relativi all'installazione necessari per una configurazione eterogenea, come descritto nella <xref linkend="sec.deployment.autoinst.simple.profile"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Definire regole da associare agli attributi di sistema della configurazione hardware in uso, come illustrato nella <xref linkend="sec.deployment.autoinst.advanced.example"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Determinare l'origine del profilo AutoYaST e il parametro da passare alle routine di installazione, come descritto nella <xref linkend="sec.deployment.autoinst.simple.dist"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Determinare l'origine dei dati di installazione di SUSE Linux Enterprise come descritto nella <xref linkend="sec.deployment.autoinst.simple.source"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Passare la riga di comando alle routine di installazione aggiungendo manualmente i parametri o creando un file <filename>info</filename>, come descritto nella <xref linkend="sec.deployment.autoinst.simple.info"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Definire e configurare lo scenario di avvio per l'installazione automatica, come descritto nella <xref linkend="sec.deployment.autoinst.simple.boot"/>.
     </para>
    </step>
    <step performance="required">
     <para>
      Avviare il processo di installazione automatica, come descritto nella <xref linkend="sec.deployment.autoinst.simple.install"/>.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 id="sec.deployment.autoinst.advanced.example">
   <title>Esempio di scenario per l'installazione automatica basata su regole</title>
   <para>
    Per nozioni di base sulla modalità di creazione delle regole, fare riferimento all'esempio riportato di seguito, illustrato nella <xref linkend="fig.autoyast.rules"/>. Con una esecuzione di AutoYaST, si installa la seguente configurazione:
   </para>
   <variablelist>
    <varlistentry>
     <term>Un server di stampa</term>
     <listitem>
      <para>
       Questo sistema richiede un'installazione minima senza ambiente desktop e un insieme limitato di pacchetti software.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Workstation nel reparto progettazione</term>
     <listitem>
      <para>
       Questi sistemi richiedono un ambiente desktop e una vasta gamma di prodotti software per lo sviluppo.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Computer portatili nel reparto vendite</term>
     <listitem>
      <para>
       Questi sistemi richiedono un ambiente desktop e un insieme limitato di applicazioni specializzate, quali software per ufficio e gestione del calendario.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <figure id="fig.autoyast.rules">
    <title>Regole di AutoYaST</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast_rules.svg" width="90%" format="SVG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="autoyast_rules.png" width="80%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    Innanzitutto, applicare uno dei metodi descritti nella <xref linkend="sec.deployment.autoinst.simple.profile"/> per creare profili adeguati a ogni tipo di utilizzo. In questo esempio vengono creati <filename>print.xml</filename>, <filename>engineering.xml</filename> e <filename>sales.xml</filename>.
   </para>
   <para>
    A questo punto, creare regole per distinguere tra loro i tre tipi di hardware e per segnalare ad AutoYaST quale profilo utilizzare. Per impostare le regole, ricorrere a un algoritmo simile al seguente:
   </para>
   <orderedlist spacing="normal">
    <listitem>
     <para>
      Il computer possiede un IP di <guimenu>192.168.2.253</guimenu>? In caso affermativo, utilizzare il sistema come server di stampa.
     </para>
    </listitem>
    <listitem>
     <para>
      Il computer possiede hardware PCMCIA ed è dotato di un chipset Intel? In caso affermativo, considerarlo come un sistema portatile Intel e installarvi il software per il reparto vendite.
     </para>
    </listitem>
    <listitem>
     <para>
      Se nessuna delle condizioni sopra indicate risulta vera, considerare il sistema come una workstation per sviluppatori ed eseguire un'installazione adeguata.
     </para>
    </listitem>
   </orderedlist>
   <para>
    Per semplificare, tutto questo si traduce in un file <filename>rules.xml</filename> con i seguenti contenuti:
   </para>
<screen>
&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE autoinstall SYSTEM "/usr/share/autoinstall/dtd/rules.dtd"&gt; 
&lt;autoinstall xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;rules config:type="list"&gt;
    &lt;rule&gt;
       &lt;hostaddress&gt;
	    &lt;match&gt;192.168.2.253&lt;/match&gt;
            &lt;match_type&gt;exact&lt;/match_type&gt;
       &lt;/hostaddress&gt;
       &lt;result&gt;
            &lt;profile&gt;print.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
    &lt;rule&gt;
       &lt;haspcmcia&gt;
            &lt;match&gt;1&lt;/match&gt;
            &lt;match_type&gt;exact&lt;/match_type&gt;
       &lt;/haspcmcia&gt;
       &lt;custom1&gt;
           &lt;script&gt;
if grep -i intel /proc/cpuinfo &gt; /dev/null; then
echo -n "intel"
else
echo -n "non_intel"
fi;
           &lt;/script&gt;
           &lt;match&gt;*&lt;/match&gt;
           &lt;match_type&gt;exact&lt;/match_type&gt;
       &lt;/custom1&gt;
       &lt;result&gt;
            &lt;profile&gt;sales.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
        &lt;operator&gt;and&lt;/operator&gt;
    &lt;/rule&gt;
    &lt;rule&gt;
        &lt;haspcmcia&gt;
            &lt;match&gt;0&lt;/match&gt;
            &lt;match_type&gt;exact&lt;/match_type&gt;
        &lt;/haspcmcia&gt;
 	&lt;result&gt;
            &lt;profile&gt;engineering.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
  &lt;/rules&gt;
&lt;/autoinstall&gt;
</screen>
   <para>
    Al momento della distribuzione del file delle regole, verificare che la directory <filename>rules</filename> risieda nella directory <filename>profiles</filename> specificata in <filename>autoyast=<replaceable>protocol</replaceable>:<replaceable>serverip</replaceable>/profiles/</filename> URL. Innanzitutto, AutoYaST ricerca una sottodirectory <filename>rules</filename> che contenga il file <filename>rules.xml</filename> e quindi carica e unisce i profili specificati nel file delle regole.
   </para>
   <para>
    La parte restante della procedura di installazione automatica viene eseguita come di consueto.
   </para>
  </sect2>
 </sect1>
 <sect1 id="sec.deployment.autoinst.moreinfo">
  <title>Ulteriori informazioni</title>

  <para>

   Per informazioni dettagliate sulla tecnologia AutoYaST, fare riferimento a <phrase os="sles"><xref linkend="book.autoyast"/> o </phrase>, la documentazione in dotazione con il software (<filename>/usr/share/doc/packages/autoyast2</filename>).
  </para>
 </sect1>
</chapter>
