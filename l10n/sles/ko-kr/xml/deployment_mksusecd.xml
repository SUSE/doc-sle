<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_mksusecd.xml" version="5.0" role="General" xml:id="cha-deployment-prep-mksusecd">
 <title>mksusecd를 사용하여 설치 이미지 사용자 정의</title>
 <info>
  <abstract>
   <para>
    <command>mksusecd</command>는 사용자 정의 설치 이미지를 생성할 때 유용한 도구입니다. mksusecd를 사용하여 일반 SUSE Linux Enterprise 설치 이미지를 수정하고 파일을 추가 및 제거하며 최소 네트워크 설치 이미지를 생성하고 부팅 및 리포지토리 옵션을 사용자 정의하며 PXE 서버에서 시스템을 부팅하기 위한 대안으로 최소 부팅 이미지를 생성할 수 있습니다.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>예</dm:translation>
  </dm:docmanager>
 </info>
 <sect1 xml:id="sec-deployment-install-mksusecd">
  <title>mksusecd 설치</title>

  <para>
   SLE 15에서 <command>mksusecd</command>는 <literal>Development Tools 모듈</literal>에 있습니다. 이 모듈을 활성화하지 않은 경우 활성화해야 합니다. 먼저 이름이 <command>zypper</command>인 모듈을 찾습니다.
  </para>

<screen><prompt>tux &gt; </prompt>zypper search-packages mksusecd
Following packages were found in following modules:

Package               Module or Repository
--------------------  -----------------------------------------------------------------
mksusecd              Development Tools Module (sle-module-development-tools/15/x86_64)
mksusecd-debuginfo    Development Tools Module (sle-module-development-tools/15/x86_64)
mksusecd-debugsource  Development Tools Module (sle-module-development-tools/15/x86_64)
mksusecd              Available
srcpackage:mksusecd   Available

To activate the respective module or product, use SUSEConnect --product.
Use SUSEConnect --help for more details.</screen>

  <para>
   SUSEConnect 사용하여 활성화합니다.
  </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> SUSEConnect -p sle-module-development-tools/15/x86_64</screen>

  <para>
   SLE 15.1 이상에서는 <literal>주 업데이트 리포지토리</literal>에 있으며 기본적으로 활성화되어 있습니다.
  </para>

  <para>
   일반적인 방법을 <command>mksusecd</command>를 설치합니다.
  </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper se mksusecd</screen>

  <para>
   전체 명령 목록을 살펴보려면 <command>mksusecd --help</command>를 실행합니다.
  </para>

  <para>
   사용자 정의 이미지를 생성한 후에는 선호하는 디스크 쓰기 프로그램(예: Brasero 또는 <command>mybashburn</command>)을 사용하여 CD/DVD 매체로 굽거나 <command>dd</command> 명령을 사용하여 실행이 가능한 USB 플래시 드라이브를 생성합니다. 장치가 탑재되지 않았는지 확인한 후 다음 명령을 실행합니다.
  </para>

<screen><prompt role="root">root # </prompt><command>dd</command> if=<replaceable>min-install.iso</replaceable> of=/dev/<replaceable>SDB</replaceable> bs=4M</screen>

  <para>
   이제 부팅이 가능한 새 장치를 사용할 수 있습니다.
  </para>
 </sect1>
 <sect1 xml:id="sec-deployment-prep-boot-mksusecd">
  <title>최소 부팅 이미지 생성</title>

  <para>
   PXE 부팅 서버에서 시작할 수 있는 위치에서 CD/DVD 또는 USB 플래시 드라이브를 사용하여 클라이언트 시스템을 시작하려면 <command>mksusecd</command>를 사용하여 최소 부팅 이미지를 생성합니다. 최소 부팅 이미지는 커널 및 initrd를 실행한 후에 나머지 설치 파일을 로컬 NFS 서버에서 가져옵니다(<xref linkend="sec-deployment-instserver-sles9"/> 참조).
  </para>

  <para>
   다음 명령을 실행하여 최소 ISO 이미지를 생성합니다.
  </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> <command>mksusecd</command> --create <replaceable>min-install.iso</replaceable> \
--net=nfs://<replaceable>192.168.1.1:/srv/install/</replaceable><replaceable>ARCH</replaceable>/<replaceable>OS_VERSION</replaceable>/<replaceable>SP_VERSION</replaceable>/cd1  \
/srv/tftpboot/EFI/<replaceable>ARCH</replaceable>/boot</screen>

  <para>
   NFS 서버 주소를 자체 주소로 바꿉니다. <replaceable>ARCH</replaceable>를 대상 시스템 아키텍처에 해당하는 디렉토리로 바꿉니다. 또한 <replaceable>OS_version</replaceable>과 <replaceable>SP_VERSION</replaceable>(서비스 팩)을 <xref linkend="sec-deployment-instserver-sles9"/>의 경로에 따라 바꿉니다.
  </para>



  


 </sect1>
 
 <sect1 xml:id="sec-deployment-custom-image-boot">
  <title>기본 커널 부팅 파라미터 설정</title>

  <para>
   부팅 중 사용자 정의 커널 부팅 파라미터를 입력하라는 메시지가 표시될 때까지 기다리지 말고, 사용자 정의 <command>mksusecd</command> 이미지에서 구성합니다.
  </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> mksusecd --create <replaceable>install.iso</replaceable> \
--boot "<replaceable>textmode=1 splash=silent mitigations=auto</replaceable>"</screen>

  <para>
   <filename>/proc</filename>을 쿼리하여 시작된 후에 사용자 정의 파라미터가 올바르게 로드되었는지 확인합니다.
  </para>

<screen><prompt>tux &gt; </prompt>cat /proc/cmdline</screen>
 </sect1>
 <sect1 xml:id="sec-deployment-custom-modules">
  <title>모듈, 확장 및 리포지토리 사용자 정의</title>

  <para>
   SUSE Linux Enterprise 15는 다양한 제품 구성 요소를 위한 모듈(커널 모듈 아님) 및 확장을 지원합니다. 이는 개발 도구, 데스크톱 응용 프로그램 및 SUSE Linux Enterprise Live Patching과 같은 기본 Basesystem의 추가 기능입니다. 자세한 내용은 <citetitle>모듈 및 확장 빠른 시작</citetitle> 안내서를 참조하십시오.
  </para>

  <para>
   <command>mksusecd</command>를 사용하면 원하는 모든 추가 모듈 및 확장이 포함된 설치 이미지를 생성할 수 있습니다. 이 예에서 SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP3</phrase></phrase>와 같은 기존 이미지를 쿼리하여 시작합니다.
  </para>

  <screen><prompt>tux &gt; </prompt><command>sudo</command> mksusecd --list-repos SLE-15-SP3-Full-<replaceable>ARCH</replaceable>-GM-media1.iso
Repositories:
  SLES15-SP3 [15.3-0]
  SLES15 [15.3-0]
  Basesystem-Module [15.3-0]
  SUSE-CAP-Tools-Module [15.3-0]
  Containers-Module [15.3-0]
  Desktop-Applications-Module [15.3-0]
  Development-Tools-Module [15.3-0]
</screen>

  <para>
   선택한 모듈, 확장 및 리포지토리에서 새 설치 이미지를 생성하고 자동으로 활성화합니다.
  </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> mksusecd --create <replaceable>myinstaller.iso</replaceable>\
  --enable-repos auto --include-repos <replaceable>Basesystem-Module,Desktop-Applications-Module</replaceable> \
  SLE-15-SP3-Online-<replaceable>ARCH</replaceable>-GM-media1.iso \
  SLE-15-SP3-Full-<replaceable>ARCH</replaceable>-GM-media1.iso
  </screen>

  <para>
   그러면 <filename>add_on_products.xml</filename> 파일이 생성되어 새 이미지에 추가됩니다. <command>--enable-repos auto</command>를 <command>--enable-repos ask</command>로 바꾸면 설치 프로그램에 모듈 선택 대화 상자가 제공됩니다.
  </para>

  <note>
   <title>AutoYaST 제어 파일</title>
   <para>
    AutoYaST를 사용하여 설치를 구성하는 경우 <command>--enable-repos</command> 옵션을 사용할 때는 AutoYaST 제어 파일에 이러한 모듈을 나열할 필요가 없습니다.
   </para>
  </note>
 </sect1>
 <sect1 xml:id="sec-deployment-custom-netinstall">
  <title>최소 netinstall ISO 생성</title>

  <para>
   네트워크 설치를 실행하기 위해 최고 설치 이미지를 생성하려면 <command>--nano</command> 옵션을 사용합니다.
  </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> mksusecd --create <replaceable>netinstall.iso</replaceable> \
--nano SLE-15-SP3-Online-<replaceable>ARCH</replaceable>-GM-media1.iso</screen>
 </sect1>
 <sect1 xml:id="sec-deployment-custom-repo">
  <title>기본 리포지토리 변경</title>

  <para>
   다른 리포지토리(예: 로컬 리포지토리)를 설정하려면 <command>--net</command> 옵션을 사용합니다.
  </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> mksusecd --create <replaceable>localinstall.iso</replaceable> \
--net "https://example.com/local" SLE-15-SP3-Online-<replaceable>ARCH</replaceable>-GM-media1.iso</screen>
 </sect1>
</chapter>
