<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_sw_repo.xml" version="5.0" xml:id="sec-yast-software-instsource">
 <title>ソフトウェアリポジトリおよびサービスの管理</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  サードパーティソフトウェアをインストールするには、ソフトウェアリポジトリをシステムに追加します。デフォルトでは、システムを登録すると、<phrase role="productname"><phrase os="sles">SUSE Linux Enterprise Server</phrase></phrase>-DVD <phrase role="productnumber"><phrase os="sles;sled">15 SP4</phrase></phrase>や一致するアップデートリポジトリなどの製品リポジトリが自動的に設定されます。<phrase os="sles;sled">登録の詳細については、<xref linkend="sec-yast-install-scc-registration"/>または<xref linkend="sec-update-registersystem"/></phrase>を参照してください。最初に選択した製品によっては、変換、辞書などを含んだ追加リポジトリも設定できます。
 </para>

 <para>
  リポジトリを管理するには、YaSTを起動し、<menuchoice>
  <guimenu>ソフトウェア</guimenu> <guimenu>ソフトウェアリポジトリ</guimenu>
  </menuchoice>の順に選択します。<guimenu>設定されたソフトウェアリポジトリ</guimenu>ダイアログが開きます。ここで、ダイアログの右隅にある<guimenu>表示</guimenu>を<guimenu>すべてのサービス</guimenu>に変更することによって、いわゆる<guimenu>サービス</guimenu>の購読を管理することもできます。このコンテキストではサービスは、1つまたは複数のソフトウェアを提供できる<guimenu>Repository Index Service</guimenu> (RIS) です。この種のサービスは管理者またはベンダから動的に変更できます。
 </para>

 <para>
  各リポジトリは、リポジトリのコンテンツ(パッケージ名、バージョンなど)を説明したファイルを提供します。これらのリポジトリ記述ファイルは、YaSTで使用するローカルキャッシュにダウンロードされます。ソフトウェアリポジトリには、その整合性確認のため、リポジトリメンテナのGPGキーで署名することができます。新しいリポジトリを追加するたびに、YaSTでリポジトリのキーをインポートできます。
 </para>

 <warning>
  <title>外部ソフトウェアソースの信用</title>
  <para>
   外部ソフトウェアのリポジトリをリポジトリリストに追加する場合は、その前に、リポジトリを信頼できるかどうか確認してください。SUSEは、サードパーティのソフトウェアリポジトリからインストールされたソフトウェアによって発生するどのような問題についても、責任を負いません。
  </para>
 </warning>

 <sect2 xml:id="sec-yast-software-instsource-add">
  <title>ソフトウェアリポジトリの追加</title>
  <para>
   DVD/CD、USBフラッシュドライブ、ローカルディレクトリ、ISOイメージ、またはネットワークソースからリポジトリを追加できます。
  </para>
  <para>
   YaSTの<guimenu>設定されたソフトウェアリポジトリ</guimenu>ダイアログでリポジトリを追加するには、次の手順に従います。
  </para>
  <procedure>
   <step>
    <para>
     <guimenu>Add (追加)</guimenu>をクリックします。
    </para>
   </step>
   <step>
    <para>
     ダイアログに表示されているオプションのいずれかを選択します。
    </para>
    <figure xml:id="fig-y2-sw-repo-new">
     <title>ソフトウェアリポジトリの追加</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_addon_new.png" width="70%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_addon_new.png" width="65%"/>
      </imageobject>
     </mediaobject>
    </figure>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       ネットワークをスキャンして、SLP経由でサービスをアナウンスしているインストールサーバを検索するには、<guimenu>SLPを使用したスキャン</guimenu>を選択して<guimenu>次へ</guimenu>をクリックします。
      </para>
     </listitem>
     <listitem>
      <para>
       リムーバブルメディアからリポジトリを追加するには、該当するオプションを選択して、メディアを挿入するか、またはUSBデバイスをコンピュータに接続します。<guimenu>次へ</guimenu>をクリックして、インストールを開始します。
      </para>
     </listitem>
     <listitem>
      <para>
       大半のリポジトリでは、該当のオプションを選択して<guimenu>次へ</guimenu>をクリックすると、メディアへのパス(またはURL)を指定するように求められます。<guimenu>Repository Name (リポジトリ名)</guimenu>の指定は任意です。何も指定しない場合は、製品名またはURLがリポジトリ名として使用されます。
      </para>
     </listitem>
    </itemizedlist>
    <para>
     <guimenu>リポジトリの説明をダウンロード</guimenu>はデフォルトで有効になっています。このオプションを有効にしていない場合は、後で必要になったときにYaSTによって自動的にダウンロードされます。
    </para>
   </step>
   <step>
    <para>
     追加したリポジトリによっては、リポジトリのGPGキーのインポートを求められたり、ライセンスへの合意を求められたりします。
    </para>
    <para>
     これらのメッセージを確認すると、メタデータがダウンロードされ、解析されます。これにより、<guimenu>Configured Repositories (設定されたリポジトリ)</guimenu>のリストにリポジトリが追加されます。
    </para>
   </step>
   <step>
    <para>
     必要に応じて、<xref linkend="sec-yast-software-instsource-manage"/>の説明に従い、リポジトリの<guimenu>プロパティ</guimenu>を調整します。
    </para>
   </step>
   <step>
    <para>
     <guimenu>OK</guimenu>をクリックして変更内容を確認し、設定ダイアログを閉じます。
    </para>
   </step>
   <step>
    <para>
     リポジトリを正常に追加できると、ソフトウェアマネージャが起動し、そのリポジトリからパッケージをインストールできるようになります。詳細については、<xref linkend="cha-yast-software"/>を参照してください。
    </para>
   </step>
  </procedure>
 </sect2>

 <sect2 xml:id="sec-yast-software-instsource-manage">
  <title>リポジトリプロパティの管理</title>
  <para>
   <guimenu>ソフトウェアリポジトリ</guimenu>の<guimenu>設定されたソフトウェアリポジトリ</guimenu>の概要では、次のリポジトリプロパティを変更できます。
  </para>
  <variablelist>
   <varlistentry>
    <term>Status</term>
    <listitem>
     <para>
      リポジトリのステータスは、<guimenu>有効</guimenu>または<guimenu>無効</guimenu>のどちらかです。有効なリポジトリからのパッケージだけをインストールできます。一時的にリポジトリを無効にするには<guimenu>Enable (有効化)</guimenu>を無効にします。リポジトリ名をダブルクリックして、その状態を切り替えることもできます。リポジトリを完全に削除するには、<guimenu>削除</guimenu>をクリックします。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>更新</term>
    <listitem>
     <para>
      リポジトリを更新すると、そのコンテンツの説明(パッケージ名、バージョンなど)は、YaSTで使用されるローカルキャッシュにダウンロードされます。これは、CDやDVDなどの静的リポジトリでは1回で十分ですが、内容が頻繁に変更されるリポジトリでは頻繁な更新が必要です。リポジトリのキャッシュを最新の状態に保つ最も簡単な方法は、<guimenu>自動的に更新する</guimenu>の選択です。手動更新を行うには、<guimenu>更新</guimenu>をクリックして、オプションの1つを選択します。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>ダウンロードしたパッケージを維持します</guimenu>
    </term>
    <listitem>
     <para>
      インストールの前に、リモートリポジトリからのパッケージをダウンロードします。これらのパッケージは、デフォルトでは、インストールが正常に完了すると削除されます。<guimenu>ダウンロードしたパッケージを維持します</guimenu>を有効にすると、ダウンロードしたパッケージが削除されません。ダウンロードの場所は、<filename>/etc/zypp/zypp.conf</filename>に設定されます。これは、デフォルトでは、<filename>/var/cache/zypp/packages</filename>です。
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>優先度</guimenu>
    </term>
    <listitem>
     <para>
      リポジトリの<guimenu>優先度</guimenu>は、<literal>1</literal>～<literal>200</literal>の値です。ここで、<literal>1</literal>は最高の優先度、<literal>200</literal>は最低の優先度です。YaSTで追加した新しいリポジトリの優先度は、デフォルトで<literal>99</literal>です。特定のリポジトリに関して優先度値が何であってもよい場合は、値を<literal>0</literal>に設定しても、そのリポジトリにデフォルト優先度(<literal>99</literal>)を適用できます。パッケージが2つ以上のリポジトリにある場合は、優先度の最も高いリポジトリが優先して使用されます。これは、ローカルリポジトリ(たとえば、DVD)に高い優先度を与えることによって、インターネットから不必要にパッケージをダウンロードしないようにする場合に有用です。
     </para>
     <important>
      <title>優先度とバージョンの比較</title>
      <para>
       優先度の最も高いリポジトリが、常に、優先されます。したがって、更新リポジトリには必ず最高の優先度が割り当てられるようにします。そのようにしないと、次のオンラインアップデートまで更新されない古いバージョンがインストールされる可能性があります。
      </para>
     </important>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>名前とURL</term>
    <listitem>
     <para>
      リポジトリ名またはリポジトリのURLを変更するには、それをシングルクリックでリストから選択し、次に、<guimenu>編集</guimenu>をクリックします。
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </sect2>

 <sect2 xml:id="sec-yast-software-repo-gpg-keys">
  <title>リポジトリキーの管理</title>
  <para>
   ソフトウェアリポジトリには、その整合性確認のため、リポジトリメンテナのGPGキーで署名することができます。新しいリポジトリを追加するたびに、そのキーをYaSTでインポートできます。そのキーを他の任意のGPGキーのように検証し、キーが変更されていないことを確認してください。キーの変更を見つけた場合は、リポジトリに何らかの問題がある可能性があります。キーの変更の原因を突き止めるまで、リポジトリをインストールソースとして無効にしてください。
  </para>
  <para>
   インポートしたすべてのキーを管理するには、<guimenu>設定されたソフトウェアリポジトリ</guimenu>ダイアログで<guimenu>GPG鍵</guimenu>をクリックします。マウスでエントリを選択して、ウィンドウ下部にキーのプロパティを表示します。<guimenu>追加</guimenu>、<guimenu>編集</guimenu>、または<guimenu>削除</guimenu>をクリックすることで、該当する操作をキーに対して実行します。
  </para>
 </sect2>
</sect1>
