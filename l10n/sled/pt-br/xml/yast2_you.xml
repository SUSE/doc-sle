<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_you.xml" version="5.0" xml:id="cha-onlineupdate-you">
 <title>Atualização online do YaST</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  O SUSE oferece um fluxo contínuo de atualizações de segurança de software para o seu produto. Por padrão, o applet de atualização é usado para manter o sistema atualizado. Consulte a <xref linkend="sec-updater"/> para obter mais informações sobre o applet de atualização. Este capítulo aborda a ferramenta alternativa para atualizar pacotes de software: Atualização Online do YaST.
 </para>
 <para>
  Os patches atuais para o <phrase role="productname"><phrase os="sled">SUSE® Linux Enterprise Desktop</phrase></phrase> estão disponíveis em um repositório de software de atualização. <phrase os="sles;sled">Se você registrou seu produto durante a instalação, já há um repositório de atualização configurado. Se você não registrou o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>, pode fazer isso iniciando o <guimenu>Registro de Produto</guimenu> no YaST.</phrase> Alternativamente, você pode adicionar manualmente um repositório de atualização de uma fonte confiável. Para adicionar ou remover repositórios, inicie o Gerenciador de Repositórios em <menuchoice> <guimenu> Software</guimenu>
  <guimenu> Repositórios de Software</guimenu> </menuchoice>  no YaST. Saiba mais sobre o Gerenciador de Repositórios na <xref linkend="sec-yast-software-instsource"/>.
 </para>
 <note os="sles;sled">
  <title>Erro ao acessar o catálogo de atualização</title>
  <para>
   Se você não conseguir acessar o catálogo de atualização, pode ser que a inscrição tenha expirado. Normalmente, o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> vem com uma inscrição de um ou três anos, período em que você terá acesso ao catálogo de atualização. O acesso será negado quando a inscrição terminar.
  </para>
  <para>
   Se um acesso ao catálogo de atualização for negado, aparecerá uma mensagem de aviso solicitando que você visite o SUSE Customer Center e verifique sua assinatura. O SUSE Customer Center está disponível em <link xlink:href="https://scc.suse.com//"/>.
  </para>
 </note>
 <note os="sles;sled">
 <title>Configurações de firewall para receber atualizações</title>
 <para>
  Por padrão, o firewall no <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> bloqueia apenas as conexões de entrada. Se o seu sistema estiver protegido por outro firewall que bloqueia o tráfego de saída, permita conexões com <link xlink:href="https://scc.suse.com/"/> e <link xlink:href="https://updates.suse.com"/> nas portas 80 e 443 para receber atualizações.
 </para>
</note>
 <para>
  O SUSE oferece atualizações com diferentes níveis de relevância:
 </para>
 <variablelist>
  <varlistentry>
   <term>Atualizações de segurança</term>
   <listitem>
    <para>
     Corrigem riscos graves à segurança e sempre devem ser instaladas.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>Atualizações recomendadas</term>
   <listitem>
    <para>
     Corrigem problemas que podem comprometer o computador.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term>Atualizações opcionais</term>
   <listitem>
    <para>
     Corrigem problemas não relacionados à segurança ou aplicam melhorias.
    </para>
   </listitem>
  </varlistentry>
 </variablelist>
 <sect1 xml:id="sec-onlineupdate-you-overview">
  <title>Caixa de diálogo de atualização online</title>

  <para>
   Para abrir a caixa de diálogo <guimenu>Atualização Online</guimenu> do YaST, inicie o YaST e selecione <menuchoice> <guimenu> Software </guimenu> <guimenu> Atualização Online</guimenu> </menuchoice>. Se preferir, inicie-o usando a linha de comando <command>yast2 online_update</command>.
  </para>

  <para>
   A janela <guimenu>Atualização Online</guimenu> é composta por quatro seções.
  </para>

  <figure>
   <title>Atualização online do YaST</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_you.png" width="75%" format="PNG" os="sles;sled"/>
     
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_you.png" width="75%" format="PNG" os="sles;sled"/>
     
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   A seção <guimenu>Resumo</guimenu> à esquerda lista os patches disponíveis para o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>. Os patches são classificados por relevância de segurança: <literal>segurança</literal>, <literal>recomendado</literal> e <literal>opcional</literal>. É possível mudar a tela da seção <guimenu>Resumo</guimenu> selecionando uma das seguintes opções em <guimenu>Mostrar Categoria do Patch</guimenu>:
  </para>

  <variablelist>
   <varlistentry>
    <term><guimenu>Patches necessários</guimenu> (tela padrão)</term>
    <listitem>
     <para>
      Patches não instalados que se aplicam aos pacotes instalados no seu sistema.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>Patches não necessários</guimenu>
    </term>
    <listitem>
     <para>
      Os patches que se aplicam a pacotes não instalados no seu sistema, ou patches com requisitos que já foram atendidos (porque os pacotes relevantes já foram atualizados de outra fonte).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><guimenu>Todos os patches</guimenu>
    </term>
    <listitem>
     <para>
      Todos os patches disponíveis para o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>.
     </para>
    </listitem>
   </varlistentry>
  </variablelist>

  <para>
   Cada entrada da lista na seção <guimenu>Resumo</guimenu> consiste em um símbolo e no nome do patch. Para obter uma visão geral dos símbolos possíveis e seu significado, pressione <keycombo> <keycap function="shift"/> <keycap>F1</keycap>
   </keycombo>  . As ações exigidas pelos patches de <literal>Segurança</literal> e <literal>Recomendados</literal> são predefinidas automaticamente. Essas ações são <guimenu>Instalar automaticamente</guimenu>, <guimenu>Atualizar automaticamente</guimenu> e <guimenu>Apagar automaticamente</guimenu>.
  </para>

  <para>
   Se você instalar um pacote atualizado de um repositório que não seja o repositório de atualização, os requisitos de um patch para esse pacote poderão ser atendidos com essa instalação. Nesse caso, uma marca de seleção é exibida na frente do resumo do patch. O patch ficará visível na lista até você marcá-lo para instalação. Na verdade, isso não instalará o patch (porque o pacote já está atualizado), mas o marcará como instalado.
  </para>

  <para>
   Selecione uma entrada na seção <guimenu>Resumo</guimenu> para ver uma breve <guimenu>Descrição do Patch</guimenu> no canto inferior esquerdo da caixa de diálogo. A seção superior direita lista os pacotes incluídos no patch selecionado (um patch pode incluir vários pacotes). Clique em uma entrada na seção superior direita para ver os detalhes sobre o respectivo pacote que faz parte do patch.
  </para>
 </sect1>
 <sect1 xml:id="sec-onlineupdate-you-install">
  <title>Instalando patches</title>

  <para>
   A caixa de diálogo Atualização Online do YaST permite instalar todos os patches disponíveis de uma vez ou selecionar manualmente os patches desejados. É possível também reverter os patches que foram aplicados ao sistema.
  </para>

  <para>
   Por padrão, todos os novos patches (exceto os <literal>opcionais</literal>) disponíveis para o sistema já estão marcados para instalação. Eles serão aplicados automaticamente depois que você clicar em <guimenu>Aceitar</guimenu> ou <guimenu>Aplicar</guimenu>. Se um ou vários patches exigirem reinicialização do sistema, você será notificado sobre isso antes do início da instalação do patch. Você escolhe entre continuar a instalação dos patches selecionados, ignorar a instalação de todos os patches que precisam de reinicialização e instalar o restante ou voltar para a seleção manual de patch.
  </para>

  <procedure>
   <title>Aplicando patches com a atualização online do YaST</title>
   <step>
    <para>
     Inicie o YaST e selecione <menuchoice> <guimenu> Software</guimenu>
     <guimenu> Atualização Online</guimenu> </menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Para aplicar automaticamente todos os patches novos (exceto os que são <literal>opcionais</literal>) atualmente disponíveis para seu sistema, clique em <guimenu>Aplicar</guimenu> ou <guimenu>Aceitar</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Modifique primeiro a seleção dos patches que deseja aplicar:
    </para>
    <substeps performance="required">
     <step>
      <para>
       Use os respectivos filtros e telas fornecidos pela interface. Para obter informações detalhadas, consulte a <xref linkend="sec-onlineupdate-you-overview"/>.
      </para>
     </step>
     <step>
      <para>
       Selecione ou anule a seleção dos patches de acordo com as suas necessidades e com a sua vontade, clicando o botão direito do mouse no patch e escolhendo a respectiva ação no menu de contexto.
      </para>
      <important>
       <title>Sempre aplicar as atualizações de segurança</title>
       <para>
        Não anule a seleção de nenhum patch relacionado à <literal>segurança</literal> se não tiver um bom motivo para isso. Eles corrigem riscos graves à segurança e impedem que o sistema seja explorado.
       </para>
      </important>
     </step>
     <step>
      <para>
       A maioria dos patches inclui atualizações para diversos pacotes. Para mudar as ações de pacotes únicos, clique o botão direito do mouse em um pacote na tela de pacotes e escolha uma ação.
      </para>
     </step>
     <step>
      <para>
       Para confirmar sua seleção e aplicar os patches selecionados, clique em <guimenu>Aplicar</guimenu> ou <guimenu>Aceitar</guimenu>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Após o término da instalação, clique em <guimenu>Concluir</guimenu> para sair da <guimenu>Atualização Online</guimenu> do YaST. Seu sistema agora está atualizado.
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 xml:id="sec-onlineupdate-retracted-patches">
  <title>Vendo os patches recolhidos</title> 
  
  <para>
    As atualizações de manutenção são cuidadosamente testadas para minimizar o risco de introdução de bug. Se ficar comprovado que um patch tem um bug, ele será automaticamente recolhido. Uma nova atualização (com um número de versão maior) é emitida para reverter o patch com bug, e qualquer outra instalação dele é bloqueada. Você pode ver os patches recolhidos e o histórico deles na guia <guimenu>Classificação dos Pacotes</guimenu>.
  </para>
  <figure>
   <title>Vendo os patches recolhidos e o histórico</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_retracted_patches.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_retracted_patches.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>  
</sect1>

 <sect1 xml:id="sec-onlineupdate-you-automatically">
  <title>Atualização online automática</title>

  <para>
   Você pode configurar as atualizações automáticas com uma programação diária, semanal ou mensal ao usar o YaST. Instale o pacote <systemitem class="resource">yast2-online-update-configuration</systemitem>.
  </para>

  <para>
   Por padrão, o download das atualizações é feito como RPMs delta. Como a reconstrução dos pacotes RPM com base nos RPMs delta é uma tarefa de uso intensivo de memória e de processador, determinadas instalações ou configurações de hardware podem exigir que você desabilite o uso de RPMs delta em benefício do desempenho.
  </para>

  <para>
   Alguns patches, como atualizações do kernel ou pacotes que exigem contratos de licença, requerem a interação do usuário, o que pode parar o procedimento de atualização automática. É possível configurar uma opção para ignorar os patches que exigem interação do usuário.
  </para>
  
  <para>
      Use a guia <guimenu>Patches</guimenu> no módulo <guimenu>Software</guimenu> do YaST para revisar os patches disponíveis e instalados, incluindo as referências a relatórios de bugs e boletins do CVE.
  </para>

  <procedure>
   <title>Configurando a atualização online automática</title>
   <step>
    <para>
     Após a instalação, inicie o YaST e selecione <menuchoice>
     <guimenu> Software</guimenu> <guimenu> Atualização Online</guimenu>
     </menuchoice>. Escolha <menuchoice><guimenu>Configuração</guimenu>
     <guimenu> Atualização Online</guimenu></menuchoice>. Se o <package>yast2-online-update-configuration</package> não estiver instalado, você será solicitado a fazer isso.
    </para>
      <figure>
   <title>Configuração da atualização online do YaST</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="yast2_autoupdate.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="yast2_autoupdate.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
    <para>
     Se preferir, inicie o módulo com <command>yast2 online_update_configuration</command> pela linha de comando.
    </para>
    
   </step>
   <step>
    <para>
     Escolha o intervalo de atualização: <guimenu>Diariamente</guimenu>, <guimenu>Semanalmente</guimenu> ou <guimenu>Mensalmente</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Às vezes, os patches podem exigir a atenção do administrador, por exemplo, ao reiniciar serviços críticos. Por exemplo, pode se tratar de uma atualização do Docker Open Source Engine que exige a reinicialização de todos os containers. Antes da instalação desses patches, o usuário é informado a respeito das consequências e solicitado a confirmar a instalação deles. Esses patches são chamados de <quote>Patches Interativos</quote>.
    </para>
    <para>
     Na instalação automática de patches, pressupõe-se que você tenha aceitado a instalação dos patches interativos. Se você preferir revisar esses patches antes da instalação, marque <guimenu>Ignorar Patches Interativos</guimenu>. Nesse caso, os patches interativos serão ignorados durante a aplicação automática. Certifique-se de executar uma atualização manual online periodicamente para verificar se os patches interativos estão aguardando para serem instalados.
    </para>
   </step>
   <step>
    <para>
     Para aceitar automaticamente qualquer contrato de licença, ative <guimenu>Agree with Licenses</guimenu> (Concordar com Licenças).
    </para>
   </step>
   <step>
    <para>
     Para instalar automaticamente todos os pacotes recomendados por pacotes atualizados, ative <guimenu>Incluir Pacotes Recomendados</guimenu>.
    </para>
   </step>

   <step>
    <para>
     Para desabilitar o uso de RPMs delta (por questões de desempenho), desmarque <guimenu>Usar RPMs Delta</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Para filtrar os patches por categoria (como segurança ou recomendado), marque <guimenu>Filtrar por Categoria</guimenu> e adicione as categorias de patch apropriadas da lista. Apenas os patches das categorias selecionadas serão instalados. Convém habilitar apenas as atualizações automáticas de <guimenu>Segurança</guimenu> e revisar todas as outras manualmente. Em geral, a aplicação de patches é confiável, mas talvez você queira testar os patches que não são de segurança e voltá-los se tiver quaisquer problemas. 
    </para>
    <itemizedlist>
        <listitem>
            <para><guimenu>Packagemanager e YaST</guimenu> oferece patches para gerenciamento de pacote e recursos e módulos do YaST.
            </para>
        </listitem>
        <listitem>
            <para>Os patches de <guimenu>Segurança</guimenu> fornecem atualizações e correções de bug essenciais.
            </para>
        </listitem>
        <listitem>
            <para>Os patches <guimenu>Recomendados</guimenu> são correções de bug e aprimoramentos opcionais.
            </para>
        </listitem>
        <listitem>
            <para><guimenu>Opcional</guimenu> refere-se a novos pacotes.</para>
        </listitem>
        <listitem>
            <para><guimenu>Outros</guimenu> equivale a diversos.
                </para>
        </listitem>
        <listitem>
            <para><guimenu>Documento</guimenu> não é usado.
            </para>
        </listitem>
    </itemizedlist>            
    
   </step>
   <step>
    <para>
     Clique em <guimenu>OK</guimenu> para confirmar sua configuração.
    </para>
   </step>
  </procedure>

  <para>
   A atualização online automática não reinicia depois o sistema automaticamente. Se houver atualizações de pacotes que exijam reinicialização do sistema, você precisará fazer isso manualmente.
  </para>
 </sect1>
</chapter>
