<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="adm_support.xml" version="5.0" xml:id="cha-adm-support">

 <title>Reunindo informações do sistema para suporte</title>
 <info>
  <abstract>
   <para>
    Para uma rápida visão geral de todas as informações de sistema relevantes de uma máquina, o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> oferece o pacote <systemitem class="systemname">hostinfo</systemitem>. Ele também ajuda os administradores do sistema a verificarem se há kernels contaminados (que não são suportados) ou quaisquer pacotes de terceiros instalados na máquina.
   </para>

   <para>
    Em caso de problemas, é possível criar um relatório detalhado do sistema com a ferramenta de linha de comando <command>supportconfig</command> ou o módulo de <guimenu>Suporte</guimenu> do YaST. Os dois coletam informações sobre o sistema, como a versão atual do Kernel, o hardware, os pacotes instalados, a configuração da partição, etc. O resultado é um armazenamento de arquivos TAR. Após abrir uma Solicitação de Serviço (SS), você poderá fazer upload do armazenamento TAR para o Suporte Técnico Global. Ele ajuda a localizar o problema que você relatou e a orientá-lo para uma solução.
   </para>

   <para>
    Você também pode verificar se há problemas conhecidos na saída do <command>supportconfig</command> para ajudar a resolvê-los mais rapidamente. Para esta finalidade, o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> oferece uma aplicação e uma ferramenta de linha de comando para <literal>Supportconfig Analysis</literal> (SCA).
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes (sim)</dm:translation>
  </dm:docmanager>
 </info>

 <sect1 xml:id="sec-admsupport-hostinfo">
  <title>Exibindo informações atuais do sistema</title>

  <para>
   Para uma visão geral rápida e fácil de todas as informações do sistema relevantes, use o pacote <systemitem class="systemname">hostinfo</systemitem> ao efetuar login no servidor. Após ser instalado na máquina, o console exibirá as seguintes informações para qualquer usuário <systemitem class="username">root</systemitem> que efetuar login nessa máquina:
  </para>

  <example xml:id="ex-support-hostinfo">
   <title>Saída de <command>hostinfo</command> ao efetuar login como <systemitem class="username">root</systemitem></title>
<screen>Welcome to SUSE Linux Enterprise Server 15 SP2 Snapshot8 (x86_64) - Kernel \r (\l).


Distribution:             SUSE Linux Enterprise Server 15 SP2
Current As Of:            Wed 25 Mar 2020 12:09:20 PM PDT
Hostname:                 localhost
Kernel Version:           5.3.18-8-default
 Architecture:            x86_64
 Installed:               Thu 19 Mar 2020 11:25:13 AM PDT
 Status:                  Not Tainted
Last Installed Package:   Wed 25 Mar 2020 11:42:24 AM PDT
 Patches Needed:          0
 Security:                0
 3rd Party Packages:      219
Network Interfaces
 eth0:                    192.168.122.225/24 fe80::5054:ff:fea1:ffd8/64
Memory
 Total/Free/Avail:        7.4Gi/6.4Gi/6.8Gi (91% Avail)
CPU Load Average:         7 (3%) with 2 CPUs
</screen>
  </example>

  <para>
   Caso a saída apresente o kernel com status <literal>tainted</literal> (contaminado), consulte a <xref linkend="sec-admsupport-kernel"/> para ver mais detalhes.
  </para>
 </sect1>
 <sect1 xml:id="sec-admsupport-supportconfig">
  <title>Coletando informações do sistema com o supportconfig</title>
  <para>
   Para criar um arquivo TAR com informações detalhadas do sistema que você pode enviar ao Suporte Técnico Global, use:
  </para>
  <itemizedlist>
   <listitem>
    <para>o comando <command>supportconfig</command> ou </para>
   </listitem>
   <listitem>
    <para>o módulo de <guimenu>Suporte</guimenu> do YaST.</para>
   </listitem>
  </itemizedlist>
  <para>
   A ferramenta de linha de comando está incluída no pacote <systemitem>supportutils</systemitem>, que é instalado por padrão. O módulo de <guimenu>Suporte</guimenu> do YaST também é baseado na ferramenta de linha de comando.
  </para>
  <para>
   Dependendo dos pacotes instalados no sistema, alguns desses pacotes integrarão plug-ins do Supportconfig. Quando o Supportconfig for executado, todos os plug-ins também serão executados e criarão um ou mais arquivos de resultados para o TAR. O benefício desse recurso é que apenas os tópicos que contêm um plug-in específico para eles são marcados. Os plug-ins do Supportconfig são armazenados no diretório <filename>/usr/lib/supportconfig/plugins/</filename>.
  </para>

  <sect2 xml:id="sec-admsupport-supportconfig-sr">
   <title>Criando um número de solicitação de serviço</title>
   <para>
    É possível gerar armazenamentos do supportconfig a qualquer momento. No entanto, para enviar os dados do Supportconfig ao Suporte Técnico Global, é necessário gerar primeiro um número de solicitação de serviço. Você precisa dele para fazer upload do armazenamento para o suporte.
   </para>
   <para>
    Para criar uma solicitação de serviço, acesse <link xlink:href="https://scc.suse.com/support/requests"/> e siga as instruções na tela. Anote o seu número de solicitação de serviço de 12 dígitos.
   </para>
   <note>
    <title>Declaração de Privacidade</title>
    <para>
     A SUSE e a Micro Focus tratam os relatórios do sistema como dados confidenciais. Para ver detalhes do nosso compromisso de privacidade, acesse <link xlink:href="https://www.suse.com/company/policies/privacy/"/>.
    </para>
   </note>
  </sect2>

  <sect2 xml:id="sec-admsupport-supportconfig-upload">
   <title>Destinos de upload</title>
   <para>
    Após criar um número de solicitação de serviço, você poderá fazer upload dos arquivos do Supportconfig para o Suporte Técnico Global, conforme descrito no <xref linkend="pro-admsupport-submit-yast"/> ou no <xref linkend="pro-admsupport-submit-cli"/>. Use um dos seguintes destinos de upload:
   </para>


   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Clientes nos EUA: <link xlink:href="ftp://ftp.novell.com/incoming"/>
     </para>
    </listitem>
    <listitem>
     <para>
      EMEA, Europa, Oriente Médio e África: <link xlink:href="ftp://support-ftp.suse.com/in"/>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Você também pode anexar o armazenamento TAR manualmente à sua solicitação de serviço usando o URL da solicitação de serviço: <link xlink:href="https://scc.suse.com/support/requests"/>.
   </para>
  </sect2>

  <sect2 xml:id="sec-admsupport-yast">
   <title>Criando um armazenamento supportconfig com o YaST</title>
   <para>
    Para usar o YaST para coletar informações do sistema, faça o seguinte: <remark>2008-11-20 toms: YaST asks the user to open a URL as
     root(!). This happens when the users clicks on "Open" (Open
     Support Center/ This will start a browser with
     Support Center Portal). I do not think we should describe this
     and only *use* the above URL as a normal user for security
     reasons.</remark>
   </para>
   <procedure>
    <step>
     <para>
      Inicie o YaST e abra o módulo de <guimenu>Suporte</guimenu>.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2_support_main.png" width="70%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2_support_main.png" width="60%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
    </step>
    <step>
     <para>
      Clique em <guimenu>Criar relatório em arquivo tarball</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Na janela seguinte, selecione uma das opções do Supportconfig na lista de botões de opção. Por padrão, a opção <guimenu>Usar Configurações (Técnicas) Personalizadas</guimenu> está pré-selecionada. Para testar primeiro a função de relatório, use <guimenu>Reunir apenas uma quantidade mínima de informações</guimenu>. Para obter mais informações sobre outras opções, consulte a página de manual de <command>supportconfig</command>.
     </para>
     <para>
      Clique em <guimenu>Próximo</guimenu>.
     </para>
    </step>
    <step xml:id="st-supportconfig-contact">
     <para>
      Digite suas informações de contato. Elas são gravadas no arquivo <filename>basic-environment.txt</filename> e incluídas no arquivo criado.
     </para>
    </step>
    <step xml:id="st-supportconfig-upload-target">
     <para>
      Para enviar o arquivo ao Suporte Técnico Global, insira as <guimenu>Informações de Upload</guimenu> necessárias. O YaST propõe um servidor de upload automaticamente. Para modificá-lo, consulte a <xref linkend="sec-admsupport-supportconfig-upload"/> para saber os detalhes dos servidores de upload que estão disponíveis.
     </para>
     <para>
      Para enviar o arquivo mais tarde, deixe o campo <guimenu>Informações de Upload</guimenu> vazio.
     </para>
    </step>
    <step>
     <para>
      Clique em <guimenu>Próximo</guimenu> para iniciar o processo de coleta de informações.
     </para>
     <informalfigure>
      <mediaobject>
       <imageobject role="fo">
        <imagedata fileref="yast2_support_conf.png" width="90%"/>
       </imageobject>
       <imageobject role="html">
        <imagedata fileref="yast2_support_conf.png" width="80%"/>
       </imageobject>
      </mediaobject>
     </informalfigure>
     <para>
      Quando o processo for concluído, clique em <guimenu>Próximo</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Para revisar os dados coletados, selecione o arquivo desejado em <guimenu>Nome do Arquivo</guimenu> para ver seu conteúdo no YaST. Para remover um arquivo do armazenamento TAR antes de enviá-lo ao suporte, use <guimenu>Remover dos Dados</guimenu>. Clique em <guimenu>Próximo</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Grave o armazenamento TAR. Se você iniciou o módulo do YaST como usuário <systemitem class="username">root</systemitem>, o YaST exibe um prompt com a sugestão para gravar o arquivo em <filename>/var/log</filename> (ou em seu diretório pessoal). O formato do nome de arquivo é <filename>scc_<replaceable>HOST</replaceable>_<replaceable>DATE</replaceable>_<replaceable>TIME</replaceable>.tbz</filename>.
     </para>
    </step>
    <step>
     <para>
      Para fazer upload do arquivo diretamente para o suporte, verifique se a opção <guimenu>Fazer upload do tarball de arquivos de registro para URL</guimenu> está ativada. O <guimenu>Destino do Upload</guimenu> mostrado aqui é o mesmo sugerido pelo YaST na <xref linkend="st-supportconfig-upload-target"/>. Para modificar o destino do upload, verifique os servidores de upload que estão disponíveis na <xref linkend="sec-admsupport-supportconfig-upload"/>.
     </para>
    </step>
    <step>
     <para>
      Para ignorar o upload, desative a opção <guimenu>Fazer upload do tarball de arquivos de registro para URL</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Confirme as mudanças para fechar o módulo do YaST.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-admsupport-cli">
   <title>Criando um armazenamento supportconfig da linha de comando</title>
   <para>
    O seguinte procedimento mostra como criar um arquivo do Supportconfig, mas sem o enviar diretamente ao suporte. Para fazer seu upload, é necessário executar o comando com algumas opções, conforme descrito no <xref linkend="pro-admsupport-submit-cli"/>.
   </para>
   <procedure>
    <step>
     <para>
      Abra um shell e registre-se como <systemitem class="username">root</systemitem>.
     </para>
    </step>
    <step>
     <para>
      Execute o <command>supportconfig</command>. Geralmente, basta executar essa ferramenta sem nenhuma outra opção. Algumas opções são muito comuns e aparecem na lista a seguir:
     </para>
     <variablelist>
      <varlistentry>
       <term><option>-E <replaceable>E-MAIL</replaceable></option></term>
       <term><option>-N <replaceable>NOME</replaceable></option></term>
       <term><option>-O <replaceable>EMPRESA</replaceable></option></term>
       <term><option>-P <replaceable>TELEFONE</replaceable></option></term>
       <listitem>
        <para>
         Define os dados de contato: endereço de e-mail (<option>-E</option>), nome da empresa (<option>-O</option>), seu nome (<option>-N</option>) e seu número de telefone (<option>-P</option>).
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><option>-i <replaceable>PALAVRAS-CHAVE</replaceable></option></term>
       <term><option>-F</option></term>
       <listitem>
        <para>
         Limita os recursos que serão verificados. O marcador <replaceable>PALAVRAS-CHAVE</replaceable> é uma lista separada por vírgulas de palavras-chave com distinção entre maiúsculas e minúsculas. Execute o comando <command>supportconfig -F</command> para obter uma lista de todas as palavras-chave.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><option>-r <replaceable>NÚMEROSR</replaceable></option></term>
       <listitem>
        <para>
         Define o número da solicitação de serviço durante o upload do arquivo TAR gerado.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
    </step>
    <step>
     <para>
      Aguarde a ferramenta concluir a operação.
     </para>
    </step>
    <step>
     <para>
      O local padrão do arquivo é <filename>/var/log</filename>, com o formato de nome de arquivo <filename>scc_<replaceable>HOST</replaceable>_<replaceable>DATE</replaceable>_<replaceable>TIME</replaceable>.tbz</filename>
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec-admsupport-supportconfig-log">
   <title>Compreendendo a saída do <command>supportconfig</command></title>
   <para>
    Se você executar o <command>supportconfig</command> pelo YaST ou diretamente, o script lhe apresentará um resumo do que foi feito.
   </para>
   <screen>                     Support Utilities - Supportconfig
                          Script Version: 3.0-98 
                          Script Date: 2017 06 01
[...]
Gathering system information
  Data Directory:    /var/log/scc_d251_180201_1525 <co xml:id="co-admsupport-script-datadir"/>

  Basic Server Health Check...                 Done <co xml:id="co-admsupport-script-done"/>
  RPM Database...                              Done <xref linkend="co-admsupport-script-done"/>
  Basic Environment...                         Done <xref linkend="co-admsupport-script-done"/>
  System Modules...                            Done <xref linkend="co-admsupport-script-done"/>
[...]
  File System List...                          Skipped <co xml:id="co-admsupport-script-skipped"/>
[...]
  Command History...                           Excluded <co xml:id="co-admsupport-script-excluded"/>
[...]
  Supportconfig Plugins:                       1 <co xml:id="co-admsupport-script-plugin"/>
    Plugin: pstree...                          Done
[...]
Creating Tar Ball

==[ DONE ]===================================================================
  Log file tar ball: /var/log/scc_d251_180201_1525.tbz <co xml:id="co-admsupport-script-archive"/>
  Log file size:     732K
  Log file md5sum:   bf23e0e15e9382c49f92cbce46000d8b
=============================================================================</screen>
   <calloutlist>
    
    <callout arearefs="co-admsupport-script-datadir">
     <para>
      O diretório de dados temporários para armazenar os resultados. Esse diretório é armazenado como um arquivo tar. Consulte <xref linkend="co-admsupport-script-archive"/>. 
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-done">
     <para>
      O recurso foi habilitado (por padrão ou selecionado manualmente) e executado com êxito. O resultado é armazenado em um arquivo (consulte a <xref linkend="tab-admsupport-features-and-filenames"/>).
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-skipped">
     <para>
      O recurso foi ignorado porque alguns arquivos de um ou mais pacotes RPM foram mudados.
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-excluded">
     <para>
      O recurso foi excluído porque foi desmarcado por meio da opção <option>-x</option>.
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-plugin">
     <para>
      O script encontrou um plug-in e executa o plug-in <command>pstree</command>. O plug-in foi encontrado no diretório <filename class="directory">/usr/lib/supportconfig/plugins/</filename>. Consulte a página de manual para obter detalhes.
     </para>
    </callout>
    <callout arearefs="co-admsupport-script-archive">
     <para>
      O nome do tar do arquivo. Por padrão, comprimido com <command>bzip2</command>.
     </para>
    </callout>
   </calloutlist>
  </sect2>

  <sect2 xml:id="sec-admsupport-options">
   <title>Opções comuns do supportconfig</title>
   <para>
    O utilitário <command>supportconfig</command> é geralmente chamado sem nenhuma opção. Exiba uma lista de todas as opções com <command>supportconfig</command> <option>-h</option> ou consulte a página de manual. A seguinte lista apresenta uma breve visão geral de alguns casos de uso comuns:
   </para>
   <variablelist>
    <varlistentry>
     <term>Reduzindo o tamanho das informações coletadas</term>
     <listitem>
      <para>
       Usar a opção mínima (<option>-m</option>):
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -m</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Limitando as informações a determinado tópico</term>
     <listitem>
      <para>
       Se você já localizou um problema relacionado apenas à determinada área ou conjunto de recursos, convém limitar as informações coletadas à área específica na próxima execução do <command>supportconfig</command>. Por exemplo, se você detectou problemas com a LVM e deseja testar uma mudança recente que você fez na configuração da LVM. Nesse caso, convém coletar as informações mínimas do Supportconfig apenas sobre a LVM:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -i LVM</screen>
      <para>
       É possível separar as palavras-chave adicionais com vírgulas. Por exemplo, um teste de disco adicional:
      </para>
      <screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -i LVM,DISK</screen>
      <para>
       Para ver a lista completa de palavras-chave de recursos que você pode usar para limitar as informações coletadas a determinada área, execute:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -F</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Incluindo informações de contato adicionais na saída</term>
     <listitem>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -E tux@example.org -N "Tux Penguin" -O "Penguin Inc." ...</screen>
      <para>
       (tudo em uma linha)
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Coletando arquivos de registro já rotacionados</term>
     <listitem>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -l</screen>
      <para>
       Isso é útil principalmente em ambientes de alto registro ou após uma falha do kernel quando o syslog gira os arquivos de registro após uma reinicialização.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>
  <sect2 xml:id="sec-admsupport-log">
   <title>Visão geral do conteúdo do arquivo</title>
   <para>
    O arquivo TAR contém todos os resultados dos recursos. Dependendo do que você selecionou (tudo ou apenas um pequeno conjunto), o TAR pode conter mais ou menos arquivos. É possível limitar o conjunto de recursos por meio da opção <option>-i</option> (consulte a <xref linkend="sec-admsupport-options"/>).
   </para>
   <para>
    Para listar o conteúdo do arquivo, use o seguinte comando <command>tar</command>:
   </para>
   <screen><prompt role="root">root # </prompt><command>tar</command> xf /var/log/scc_earth_180131_1545.tbz</screen>
   <para>
    Os seguintes nomes de arquivo sempre estão disponíveis no arquivo TAR:
   </para>
   <variablelist>
    <title>Arquivos mínimos no TAR</title>
    <varlistentry>
     <term><filename>basic-environment.txt</filename></term>
     <listitem>
      <para>Contém a data em que este script foi executado e informações do sistema, como versão da distribuição, informações do hipervisor, etc.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>basic-health-check.txt</filename></term>
     <listitem>
      <para>
       Contém algumas verificações básicas de saúde, como tempo de atividade, estatísticas de memória virtual, memória livre e disco rígido, verificações de processos zumbis, etc.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>hardware.txt</filename></term>
     <listitem>
      <para>
       Contém verificações básicas de hardware, como informações sobre a arquitetura da CPU, lista de todos os hardwares conectados, interrupções, portas de E/S, mensagens de boot do kernel, etc.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>messages.txt</filename></term>
     <listitem>
      <para>
       Contém mensagens de registro do diário do sistema.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>rpm.txt</filename></term>
     <listitem>
      <para>Contém uma lista de todos os pacotes RPM instalados, o nome, a origem e as versões deles.</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>summary.xml</filename></term>
     <listitem>
      <para>Contém algumas informações no formato XML, como distribuição, versão e fragmentos específicos do produto.</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>supportconfig.txt</filename></term>
     <listitem>
      <para>
       Contém informações sobre o próprio script <command>supportconfig</command>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><filename>y2log.txt</filename></term>
     <listitem>
      <para>
       Contém informações específicas do YaST, como pacotes específicos, arquivos de configuração e arquivos de registro.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    A <xref linkend="tab-admsupport-features-and-filenames"/> lista todos os recursos disponíveis e seus nomes de arquivo. Outros pacotes de serviço podem estender a lista, assim como os plug-ins.
   </para>
   <table xml:id="tab-admsupport-features-and-filenames">
    <title>Comparação de recursos e nomes de arquivo no TAR</title>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>Recurso</entry>
       <entry>Nome do arquivo</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry><parameter>AFP</parameter></entry>
       <entry><filename>novell-afp.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>APPARMOR</parameter></entry>
       <entry><filename>security-apparmor.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>AUDIT</parameter></entry>
       <entry><filename>security-audit.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>AUTOFS</parameter></entry>
       <entry><filename>fs-autofs.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>BOOT</parameter></entry>
       <entry><filename>boot.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>BTRFS</parameter></entry>
       <entry><filename>fs-btrfs.txt</filename></entry>
      </row>
      <row>
       <entry><parameter>DAEMONS</parameter></entry>
       <entry><filename>chkconfig.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>CIFS</parameter></entry>
         <entry><filename>novell-cifs.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>CIMOM</parameter></entry>
         <entry><filename>cimom.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>CRASH</parameter></entry>
         <entry><filename>crash.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>CRON</parameter></entry>
         <entry><filename>cron.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DFS</parameter></entry>
         <entry><filename>novell-dfs.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DHCP</parameter></entry>
         <entry><filename>dhcp.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DISK</parameter></entry>
         <entry><filename>fs-diskio.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DNS</parameter></entry>
         <entry><filename>dns.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DOCKER</parameter></entry>
         <entry><filename>cocker.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DRBD</parameter></entry>
         <entry><filename>drbd.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>DSFW</parameter></entry>
         <entry><filename>novell-dsfw.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>EDIR</parameter></entry>
         <entry><filename>novell-edir.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>ENV</parameter></entry>
         <entry><filename>env.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>ETC</parameter></entry>
         <entry><filename>etc.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>EVMS</parameter></entry>
         <entry><filename>evms.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>HA</parameter></entry>
         <entry><filename>ha.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>HAPROXY</parameter></entry>
         <entry><filename>haproxy.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>HISTORY</parameter></entry>
         <entry><filename>shell_history.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>IB</parameter></entry>
         <entry><filename>ib.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>IMAN</parameter></entry>
         <entry><filename>novell-iman.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>ISCSI</parameter></entry>
         <entry><filename>fs-iscsi.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>KVM</parameter></entry>
         <entry><filename>kvm.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>LDAP</parameter></entry>
         <entry><filename>ldap.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>LUM</parameter></entry>
         <entry><filename>novell-lum.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>LVM</parameter></entry>
         <entry><filename>lvm.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>LXC</parameter></entry>
         <entry><filename>lxc.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>MEM</parameter></entry>
         <entry><filename>memory.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>MOD</parameter></entry>
         <entry><filename>modules.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>MPIO</parameter></entry>
         <entry><filename>mpio.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NCP</parameter></entry>
         <entry><filename>novell-ncp.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NCS</parameter></entry>
         <entry><filename>novell-ncs.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NET</parameter></entry>
         <entry><filename>network-*.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NFS</parameter></entry>
         <entry><filename>nfs.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NIT</parameter></entry>
         <entry><filename>novell-nit.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NSS</parameter></entry>
         <entry><filename>novell-nss.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>NTP</parameter></entry>
         <entry><filename>ntp.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>OCFS2</parameter></entry>
         <entry><filename>ocfs2.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>OES</parameter></entry>
         <entry>n/d</entry>
      </row>
      <row>
         <entry><parameter>OFILES</parameter></entry>
         <entry><filename>open-files.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>PAM</parameter></entry>
         <entry><filename>pam.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>PRINT</parameter></entry>
         <entry><filename>print.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>PROC</parameter></entry>
         <entry><filename>proc.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>PROXY</parameter></entry>
         <entry><filename>novell-proxymgmt.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SAM</parameter></entry>
         <entry><filename>sam.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SAR</parameter></entry>
         <entry><filename>sar.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SLERT</parameter></entry>
         <entry><filename>slert.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SLP</parameter></entry>
         <entry><filename>slp.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SMT</parameter></entry>
         <entry><filename>smt.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SMART</parameter></entry>
         <entry><filename>fs-smartmon.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SMB</parameter></entry>
         <entry><filename>samba.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SMS</parameter></entry>
         <entry><filename>novell-sms.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SRAID</parameter></entry>
         <entry><filename>fs-softraid.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SSH</parameter></entry>
         <entry><filename>ssh.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SSSD</parameter></entry>
         <entry><filename>sssd.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SYSCONFIG</parameter></entry>
         <entry><filename>sysconfig.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>SYSFS</parameter></entry>
         <entry><filename>sysfs.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>UDEV</parameter></entry>
         <entry><filename>udev.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>UFILES</parameter></entry>
         <entry><filename>fs-files-additional.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>UP</parameter></entry>
         <entry><filename>updates.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>UPD</parameter></entry>
         <entry><filename>updates-daemon.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>WEB</parameter></entry>
         <entry><filename>web.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>X</parameter></entry>
         <entry><filename>x.txt</filename></entry>
      </row>
      <row>
         <entry><parameter>XEN</parameter></entry>
         <entry><filename>xen.txt</filename></entry>
      </row>
     </tbody>
    </tgroup>
   </table>
  <remark>toms 2018-04-05: Make the table be aware of what packages brings
     what plugin?</remark>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-admsupport-submit">
  <title>Submetendo informações ao suporte técnico global</title>

  <para>
   Use o módulo de <guimenu>Suporte</guimenu> do YaST ou o utilitário de linha de comando <command>supportconfig</command> para submeter as informações do sistema ao Suporte Técnico Global. Se você tiver um problema com o servidor e quiser a ajuda do suporte, precisará abrir primeiro uma solicitação de serviço. Para obter os detalhes, consulte a <xref linkend="sec-admsupport-supportconfig-sr"/>.
  </para>

  <para>
   Os seguintes exemplos usam <replaceable>12345678901</replaceable> como marcador para o número da sua solicitação de serviço. Substitua <replaceable>12345678901</replaceable> pelo número da solicitação de serviço que você criou na <xref linkend="sec-admsupport-supportconfig-sr"/>.
  </para>

  <procedure xml:id="pro-admsupport-submit-yast">
   <title>Submetendo informações ao suporte com o YaST</title>
   <para>
    O seguinte procedimento considera que você já tenha criado um arquivo Supportconfig, mas ainda não tenha feito upload dele. Verifique se você incluiu suas informações de contato no armazenamento, conforme descrito na <xref linkend="sec-admsupport-yast"/>, <xref linkend="st-supportconfig-contact" xrefstyle="select:label nopage"/>. Para ver instruções de como gerar e enviar de uma só vez um arquivo Supportconfig, consulte a <xref linkend="sec-admsupport-yast"/>.
   </para>
   <step>
    <para>
     Inicie o YaST e abra o módulo de <guimenu>Suporte</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Clique em <guimenu>Fazer Upload</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Em <guimenu>Pacote com arquivos de registro</guimenu>, especifique o caminho para o arquivo Supportconfig existente ou use a opção <guimenu>Procurar</guimenu>.
    </para>
   </step>
   <step xml:id="st-supportcfg-submit-upltarget">
    <para>
     O YaST propõe um servidor de upload automaticamente. Para modificá-lo, consulte a <xref linkend="sec-admsupport-supportconfig-upload"/> para saber os detalhes de quais servidores de upload estão disponíveis.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast2_support_conf_upload.png" width="70%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast2_support_conf_upload.png" width="60%"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
    <para>
     <remark>taroth 2014-04-11: this does not make sense to me - why does the
      YaST module *not* ask for the SR number now? and lets you continue after
      specifying an upload target (but no RC or customer info)? I would
      expect it to *check* if an SR has been entered and otherwise show an error
      message - filed http://bugzilla.suse.com/show_bug.cgi?id=880943 for this, unfortunately it
      was rejected for technical reasons</remark> Continue com <guimenu>Avançar</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Clique em <guimenu>Concluir</guimenu>.
    </para>
   </step>
  </procedure>

  <procedure xml:id="pro-admsupport-submit-cli">
   <title>Submetendo informações ao suporte por linha de comando</title>
   <para>
    O seguinte procedimento considera que você já tenha criado um arquivo Supportconfig, mas ainda não tenha feito upload dele. Para ver instruções de como gerar e enviar de uma só vez um arquivo Supportconfig, consulte a <xref linkend="sec-admsupport-yast"/>.
   </para>
   <step>
    <para>
     Servidores com conectividade à Internet:
    </para>
    <substeps performance="required">
     <step>
      <para>
       Para usar o destino de upload padrão, execute:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -ur <replaceable>12345678901</replaceable></screen>
     </step>
     <step>
      <para>
       Para o destino de upload seguro, use o seguinte:
      </para>

<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -ar <replaceable>12345678901</replaceable></screen>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Servidores <emphasis>sem</emphasis> conectividade à Internet
    </para>
    <substeps performance="required">
     <step>
      <para>
       Execute o seguinte:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -r <replaceable>12345678901</replaceable></screen>
     </step>
     <step>
      <para>
       Faça upload manualmente do arquivo <filename>/var/log/scc_<replaceable>SR12345678901</replaceable>*tbz</filename> para um dos nossos servidores FTP. O servidor que deverá ser usado depende da sua localização global. Para uma visão geral, consulte a <xref linkend="sec-admsupport-supportconfig-upload"/>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Depois que o armazenamento TAR estiver no diretório de entrada do nosso servidor FTP, ele será automaticamente anexado à sua solicitação de serviço.
    </para>
   </step>
  </procedure>
 </sect1>

 <sect1 xml:id="sec-admsupport-sca">
  <title>Analisando informações do sistema</title>

  <para>
   É possível analisar os relatórios do sistema criados com o <command>supportconfig</command> para ver se há problemas conhecidos e agilizar sua solução. Para esta finalidade, o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> oferece uma aplicação e uma ferramenta de linha de comando para <literal>Supportconfig Analysis</literal> (SCA). A aplicação SCA é uma ferramenta não interativa executada no servidor. A ferramenta SCA (<command>scatool</command> incluída no pacote
   <package>sca-server-report</package>) é executada no cliente e por linha de comando. As duas ferramentas analisam os arquivos Supportconfig dos servidores afetados. A análise inicial do servidor ocorre na aplicação SCA ou na estação de trabalho em que a <command>scatool</command> é executada. Nenhum ciclo de análise é realizado no servidor de produção.
  </para>

  <para>
   Tanto a aplicação quanto a ferramenta de linha de comando precisam de padrões específicos do produto, que as permitem analisar a saída do Supportconfig dos produtos associados. Cada padrão é um script que analisa e avalia um arquivo Supportconfig referente a um problema conhecido. Os padrões estão disponíveis como pacotes RPM.
  </para>

  <para>
   É possível também desenvolver seus próprios padrões, conforme descrito resumidamente na <xref linkend="sec-admsupport-sca-patterns"/>.
  </para>

  <sect2 xml:id="sec-admsupport-sca-tool">
   <title>Ferramenta de linha de comando SCA</title>
   <para>
    A ferramenta de linha de comando SCA permite analisar uma máquina local usando o <command>supportconfig</command> e os padrões de análise referentes ao produto específico que está instalado na máquina local. A ferramenta cria um relatório HTML que mostra os resultados da análise. Para obter um exemplo, consulte a <xref linkend="fig-scatool-html"/>.
   </para>
   <figure xml:id="fig-scatool-html">
    <title>Relatório HTML gerado pela ferramenta SCA</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="sca_tool_report_html.png" width="100%"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="sca_tool_report_html.png" width="100%"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    O comando <command>scatool</command> está incluído no pacote
    <package>sca-server-report</package> . Ele não é instalado por padrão. Além disso, você precisa do pacote
    <package>sca-patterns-base</package> e de qualquer um dos pacotes
    <package>sca-patterns-*</package> específicos do produto correspondentes ao produto instalado na máquina em que você deseja executar o comando <command>scatool</command>.
   </para>
   <para>
    Execute o comando <command>scatool</command> como usuário <systemitem class="username">root</systemitem> ou com <command>sudo</command>. Ao chamar a ferramenta SCA, é possível analisar um arquivo TAR <command>supportconfig</command> existente ou deixar que ela gere e analise um novo arquivo de uma vez. A ferramenta também oferece um console interativo com complementação de guia. É possível executar o <command>supportconfig</command> em uma máquina externa e executar as análises subsequentes na máquina local.
   </para>
   <para>
    Veja a seguir alguns exemplos de comandos:
   </para>
   <variablelist>
    <varlistentry>
     <term><command>sudo scatool </command><option>-s</option>
     </term>
     <listitem>
      <para>
       Chama o <command>supportconfig</command> e gera um novo arquivo Supportconfig na máquina local. Analisa o armazenamento para ver se há problemas conhecidos aplicando os padrões de análise da SCA correspondentes ao produto instalado. Exibe o caminho para o relatório HTML que é gerado com base nos resultados da análise. Normalmente, ele é gravado no mesmo diretório do arquivo Supportconfig.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-s</option> <option>-o</option> <replaceable>/opt/sca/reports/</replaceable> 
     </term>
     <listitem>
      <para>
       Igual ao <command>sudo scatool </command><option>-s</option>, só que o relatório HTML é gravado no caminho especificado com <option>-o</option>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-a</option> <replaceable>CAMINHO_PARA_TARBALL_OU_DIR</replaceable> 
     </term>
     <listitem>
      <para>
       Analisa o arquivo de armazenamento Supportconfig especificado (ou o diretório indicado no qual o arquivo Supportconfig foi extraído). O relatório HTML gerado é gravado no mesmo local do arquivo ou diretório do Supportconfig.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-a</option> <replaceable>SERVIDOR_SLES.EMPRESA.COM</replaceable> 
     </term>
     <listitem>
      <para>
       Estabelece uma conexão SSH com um servidor externo <replaceable>SERVIDOR_SLES.EMPRESA.COM</replaceable> e executa o <command>supportconfig</command> no servidor. Em seguida, o arquivo Supportconfig é copiado novamente na máquina local e analisado nela. O relatório HTML gerado é gravado no diretório padrão <filename>/var/log</filename>. (Apenas o arquivo Supportconfig é criado em <replaceable>SERVIDOR_SLES.EMPRESA.COM</replaceable>).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><command>sudo scatool </command><option>-c</option>
     </term>
     <listitem>
      <para>
       Inicia o console interativo da <command>scatool</command>. Pressione <keycap function="tab"/> duas vezes para ver os comandos disponíveis.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    Para mais opções e informações, execute <command>sudo scatool -h</command> ou consulte a página de manual de <command>scatool</command>.
   </para>
  </sect2>

  <sect2 xml:id="sec-admsupport-sca-appliance">
   <title>Aplicação SCA</title>
   <para>
    Se você usar a aplicação SCA para analisar arquivos Supportconfig, configure um servidor dedicado (ou máquina virtual) como servidor da aplicação SCA. Depois disso, o servidor da aplicação SCA poderá ser usado para analisar arquivos Supportconfig em todas as máquinas da sua empresa que tenham o SUSE Linux Enterprise Server ou o SUSE Linux Enterprise Desktop. Basta fazer upload dos arquivos Supportconfig para o servidor da aplicação para análise. Não é necessária nenhuma interação. Em um banco de dados MariaDB, a aplicação SCA monitora todos os arquivos Supportconfig que foram analisados. É possível ler os relatórios da SCA diretamente da interface da Web da aplicação. Se você preferir, a aplicação poderá enviar o relatório HTML por e-mail para qualquer usuário administrativo. Para obter os detalhes, consulte a <xref linkend="sec-admsupport-sca-appliance-config-mail"/>.
   </para>
   <sect3 xml:id="sec-admsupport-sca-appliance-installquick">
    <title>Inicialização Rápida da Instalação</title>
    <para>
     Para instalar e configurar rapidamente a aplicação SCA por linha de comando, siga as instruções neste documento. O procedimento é voltado para especialistas e está centrado na instalação limpa e nos comandos de configuração. Para obter mais informações, consulte a descrição mais detalhada da <xref linkend="sec-admsupport-sca-appliance-pre"/> até a <xref linkend="sec-admsupport-sca-appliance-install"/>.
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <title>Pré-requisitos</title>
     <listitem>
      <para>
       Padrão da Web e LAMP
      </para>
     </listitem>
     <listitem>
      <para>
       Módulo da Web e de Criação de Scripts (você deve registrar a máquina para selecionar esse módulo).
      </para>
     </listitem>
    </itemizedlist>
    <note>
     <title>Privilégios de <systemitem class="username">root</systemitem> necessários</title>
     <para>
      Todos os comandos do procedimento a seguir devem ser executados como <systemitem class="username">root</systemitem>.
     </para>
    </note>
    <procedure>
     <title>Instalação usando FTP anônimo para upload</title>
     <para>
      Depois que a aplicação estiver funcionando, não será necessária mais nenhuma interação manual. Portanto, esta forma de configurar a aplicação é ideal ao usar tarefas cron para criar e fazer upload de arquivos Supportconfig.
     </para>
     <step>
      <para>
       Na máquina de instalação da aplicação, efetue login no console e execute os seguintes comandos:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper install sca-appliance-* sca-patterns-* vsftpd
systemctl enable apache2
systemctl start apache2
systemctl enable vsftpd
systemctl start vsftpd
yast ftp-server</screen>
     </step>
     <step>
      <para>
       No Servidor FTP do YaST, selecione <menuchoice> <guimenu>Autenticação</guimenu> <guimenu>Habilitar Upload</guimenu> <guimenu>Anônimo Pode Fazer Upload</guimenu> <guimenu>Concluir</guimenu> <guimenu>Sim</guimenu> </menuchoice> para <guimenu>Criar /srv/ftp/upload</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Execute os seguintes comandos:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> systemctl enable mysql
systemctl start mysql
mysql_secure_installation
setup-sca -f</screen>
      <para>
       A mysql_secure_installation cria uma senha de <systemitem class="username">root</systemitem> do MariaDB.
      </para>
     </step>
    </procedure>
    <procedure>
     <title>Instalação usando SCP/tmp para upload</title>
     <para>
      Esta forma de configurar a aplicação requer interação manual para digitar a senha SSH.
     </para>
     <step>
      <para>
       Na máquina de instalação da aplicação, efetue login no console.
      </para>
     </step>
     <step>
      <para>
       Execute os seguintes comandos:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper install sca-appliance-* sca-patterns-*
systemctl enable apache2
systemctl start apache2
sudo systemctl enable mysql
systemctl start mysql
mysql_secure_installation
setup-sca</screen>
     </step>
    </procedure>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-pre">
    <title>Pré-requisitos</title>
    <para>
     Para executar um servidor da aplicação SCA, são necessários os seguintes pré-requisitos:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Todos os pacotes <systemitem>sca-appliance-*</systemitem>.
      </para>
     </listitem>
     <listitem>
      <para>
       O pacote <systemitem class="resource">sca-patterns-base. </systemitem> Adicionalmente, qualquer um dos <systemitem class="resource">sca-patterns-*</systemitem> específicos do produto, de acordo com o tipo de arquivo Supportconfig que você deseja analisar com a aplicação.
      </para>
     </listitem>
     <listitem>
      <para>
       Apache
      </para>
     </listitem>
     <listitem>
      <para>
       PHP
      </para>
     </listitem>
     <listitem>
      <para>
       MariaDB
      </para>
     </listitem>
     <listitem>
      <para>
       Servidor FTP anônimo (opcional)
      </para>
     </listitem>
    </itemizedlist>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-install">
    <title>Instalação e configuração básica</title>
    <para>
     Conforme listado na <xref linkend="sec-admsupport-sca-appliance-pre"/>, a aplicação SCA possui várias dependências em outros pacotes. Portanto, você precisa fazer algumas preparações antes de instalar e configurar o servidor da aplicação SCA:
    </para>
    <procedure>
     <step>
      <para>
       No Apache e no MariaDB, instale os padrões de instalação da <systemitem>Web</systemitem> e <systemitem>LAMP</systemitem>.
      </para>
     </step>
     <step>
      <para>
       Configure o Apache, o MariaDB e, opcionalmente, um servidor FTP anônimo.
       
      </para>
     </step>
     <step>
      <para>
       Configure o Apache e o MariaDB para iniciarem no momento da inicialização:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> systemctl enable apache2 mysql</screen>
     </step>
     <step>
      <para>
       Inicie os dois serviços:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> systemctl start apache2 mysql</screen>
     </step>
    </procedure>
    <para>
     Agora você pode instalar a aplicação SCA e configurá-la conforme descrito no <xref linkend="pro-sca-appl-install"/>.
    </para>
    <procedure xml:id="pro-sca-appl-install">
     <title>Instalando e configurando a aplicação SCA</title>
     <para>
      Após instalar os pacotes, use o script <command>setup-sca</command> para a configuração básica do banco de dados de administração e relatório MariaDB, que é usado pela aplicação SCA.
     </para>
     <para>
      Ele pode ser usado para configurar as seguintes opções disponíveis para fazer upload dos arquivos Supportconfig de suas máquinas para a aplicação SCA:
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        <command>scp</command>
       </para>
      </listitem>
      <listitem>
       <para>
        servidor FTP anônimo
       </para>
      </listitem>
     </itemizedlist>
     <step>
      <para>
       Instale a aplicação e a biblioteca de padrões com base na SCA:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper install sca-appliance-* sca-patterns-base</screen>
     </step>
     <step>
      <para>
       Instale também os pacotes de padrões de acordo com os tipos de arquivos Supportconfig que você deseja analisar. Por exemplo, se você tem servidores SUSE Linux Enterprise Server 12 e SUSE Linux Enterprise Server 15 em seu ambiente, instale os dois pacotes <systemitem>sca-patterns-sle12</systemitem> e <systemitem>sca-patterns-sle15</systemitem>.
      </para>
      <para>
       Para instalar todos os padrões disponíveis:
      </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper install sca-patterns-*</screen>
     </step>
     <step>
      <para>
       Para a configuração básica da aplicação SCA, use o script <command>setup-sca. </command> O modo como ele é chamado depende de como você deseja fazer upload dos arquivos Supportconfig para o servidor da aplicação SCA:
      </para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         Se você configurou um servidor FTP anônimo que usa o diretório <filename>/srv/ftp/upload</filename>, execute o script de configuração com a opção <option>-f</option>. Siga as instruções na tela:
        </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> setup-sca -f</screen>
        <note>
         <title>Servidor FTP que usa outro diretório</title>
         <para>
          Se o seu servidor FTP usa um diretório diferente do <filename>/srv/ftp/upload</filename>, ajuste os seguintes arquivos de configuração para apontarem para o diretório correto: <filename>/etc/sca/sdagent.conf</filename> e <filename>/etc/sca/sdbroker.conf</filename> .
         </para>
        </note>
       </listitem>
       <listitem>
        <para>
         Para fazer upload dos arquivos Supportconfig para o diretório <filename>/tmp</filename> do servidor da aplicação SCA usando o comando <command>scp</command>, chame o script de configuração sem nenhum parâmetro. Siga as instruções na tela:
        </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> setup-sca</screen>
       </listitem>
      </itemizedlist>
      <para>
       O script de configuração executa algumas verificações referentes a seus requisitos e configura os componentes necessários. Ele pede duas senhas: a senha de <systemitem class="username">root</systemitem> MySQL do MariaDB que você configurou e uma senha de usuário da Web usada para efetuar login na interface da Web da aplicação SCA.
      </para>
     </step>
     <step>
      <para>
       Digite a senha de <systemitem class="username">root</systemitem> existente do MariaDB. Isso permite que a aplicação SCA se conecte com o MariaDB.
      </para>
     </step>
     <step>
      <para>
       Defina uma senha para o usuário da Web. Ela será gravada em <filename>/srv/www/htdocs/sca/web-config.php</filename> e definida como a senha do usuário <systemitem class="username">scdiag</systemitem>. Tanto o nome de usuário quanto a senha podem ser mudados a qualquer momento. Consulte a <xref linkend="sec-admsupport-sca-appliance-config-passwd"/>.
      </para>

     </step>
    </procedure>
    <para>
     Após a instalação e configuração bem-sucedidas, a aplicação SCA estará pronta para uso. Consulte a <xref linkend="sec-admsupport-sca-appliance-use"/>. No entanto, você deve modificar algumas opções, como mudar a senha da interface da Web, mudar a fonte das atualizações dos padrões da SCA, habilitar o modo de arquivamento ou configurar notificações por e-mail. Para ver os detalhes sobre isso, consulte a <xref linkend="sec-admsupport-sca-appliance-config"/>.
    </para>
    <warning>
     <title>Proteção de Dados</title>
     <para>
      Como os relatórios no servidor da aplicação SCA incluem informações relacionadas à segurança, proteja os dados no servidor da aplicação SCA contra acesso não autorizado.
     </para>
    </warning>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-use">
    <title>Usando a aplicação SCA</title>
    <para>
     É possível fazer upload dos arquivos Supportconfig existentes para a aplicação SCA manualmente ou criar novos arquivos Supportconfig e fazer upload deles para a aplicação SCA em uma etapa. O upload pode ser feito por FTP ou SCP. Nos dois, é necessário saber o URL para acessar a aplicação SCA. Para upload por FTP, um servidor FTP precisa ser configurado para a aplicação SCA. Consulte o <xref linkend="pro-sca-appl-install"/>.
    </para>
    <sect4 xml:id="sec-admsupport-sca-appliance-use-upload">
     <title>Fazendo upload de armazenamentos supportconfig para a aplicação SCA</title>
     <para/>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        Para criar um arquivo Supportconfig e fazer upload dele por FTP (anônimo):
       </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -U “ftp://<replaceable>SCA-APPLIANCE.COMPANY.COM</replaceable>/upload”</screen>
      </listitem>
      <listitem>
       <para>
        Para criar um arquivo Supportconfig e fazer upload dele por SCP:
       </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> supportconfig -U “scp://<replaceable>SCA-APPLIANCE.COMPANY.COM</replaceable>/tmp”</screen>
       <para>
        Você deverá informar a senha de usuário <systemitem class="username">root</systemitem> do servidor que executa a aplicação SCA.
       </para>
      </listitem>
      <listitem>
       <para>
        Para fazer upload de um ou vários arquivos manualmente, copie os arquivos de armazenamento existentes (que costumam estar em <filename>/var/log/scc_*.tbz</filename>) para a aplicação SCA. Como destino, use o diretório <filename>/tmp</filename> do servidor da aplicação ou o diretório <filename>/srv/ftp/upload</filename> (se FTP estiver configurado para o servidor da aplicação SCA).
       </para>
      </listitem>
     </itemizedlist>
    </sect4>
    <sect4 xml:id="sec-admsupport-sca-appliance-use-view">
     <title>Vendo relatórios da SCA</title>
     <para>
      É possível ver os relatórios da SCA de qualquer máquina que tenha um browser instalado e acesso à página de índice de relatórios da aplicação SCA.
     </para>
     <procedure>
      <step>
       <para>
        Inicie o browser da Web e verifique se o JavaScript e os cookies estão habilitados.
       </para>
      </step>
      <step>
       <para>
        Como URL, insira a página de índice de relatórios da aplicação SCA.
       </para>
<screen>https://sca-appliance.company.com/sca</screen>
       <para>
        Se estiver em dúvida, pergunte ao administrador do sistema.
       </para>
      </step>
      <step>
       <para>
        Você deverá informar o nome de usuário e a senha para efetuar login.
       </para>
       <figure xml:id="fig-sca-appl-html">
        <title>Relatório HTML gerado pela aplicação SCA</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="sca_appl_report_html.png" width="100%"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="sca_appl_report_html.png" width="100%"/>
         </imageobject>
        </mediaobject>
       </figure>
      </step>
      <step>
       <para>
        Após o login, clique na data do relatório que deseja ler.
       </para>
      </step>
      <step>
       <para>
        Clique primeiro na categoria <guimenu>Basic Health</guimenu> (Saúde Básica) para expandi-la.
       </para>
      </step>
      <step>
       <para>
        Na coluna <guimenu>Message</guimenu> (Mensagem), clique em uma entrada. O artigo correspondente é aberto na Base de Dados de Conhecimento SUSE. Leia a solução proposta e siga as instruções.
       </para>
      </step>
      <step>
       <para>
        Se a coluna <guimenu>Solutions</guimenu> (Soluções) do <guimenu>Relatório da Supportconfig Analysis</guimenu> mostrar qualquer outra entrada, clique nela. Leia a solução proposta e siga as instruções.
       </para>
      </step>
      <step>
       <para>
        Consulte a Base de Dados de Conhecimento SUSE (<link xlink:href="https://www.suse.com/support/kb/"/>) para ver resultados diretamente relacionados ao problema identificado pela SCA. Resolva o problema.
       </para>
      </step>
      <step>
       <para>
        Procure resultados que possam ser usados proativamente para evitar futuros problemas.
       </para>
      </step>
     </procedure>
    </sect4>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-config">
    <title>Personalizando a aplicação SCA</title>
    <para>
     As seguintes seções mostram como mudar a senha da interface da Web, como mudar a fonte das atualizações dos padrões da SCA, como habilitar o modo de arquivamento e como configurar notificações por e-mail.
    </para>
    <sect4 xml:id="sec-admsupport-sca-appliance-config-passwd">
     <title>Senha da interface da Web</title>
     <para>
      A interface da Web da aplicação SCA requer nome de usuário e senha para login. O nome de usuário padrão é <literal>scdiag</literal> e a senha padrão é <literal>linux</literal> (caso não tenham sido especificados de outra forma. Consulte o <xref linkend="pro-sca-appl-install"/>). Mude a senha padrão para uma senha segura na primeira oportunidade. É possível também modificar o nome de usuário.
     </para>
     <procedure xml:id="pro-sca-passwd-change">
      <title>Mudando nome de usuário ou senha da interface da Web</title>
      <step>
       <para>
        Efetue login como usuário <systemitem class="username">root</systemitem> no console do sistema do servidor da aplicação SCA.
       </para>
      </step>
      <step>
       <para>
        Abra o <filename>/srv/www/htdocs/sca/web-config.php</filename> em um editor.
       </para>
      </step>
      <step>
       <para>
        Mude os valores de <literal>$username</literal> e <literal>$password</literal> conforme desejado.
       </para>
      </step>
      <step>
       <para>
        Grave o arquivo e saia.
       </para>
      </step>
     </procedure>
    </sect4>
    <sect4 xml:id="sec-admsupport-sca-appliance-config-upd">
     <title>Atualizações dos padrões da SCA</title>
     <para>
      Por padrão, todos os pacotes <systemitem class="resource">sca-patterns-*</systemitem> são atualizados regularmente por uma tarefa cron <systemitem class="username">root</systemitem> que executa o script <filename>sdagent-patterns</filename> durante a noite, que, por sua vez, executa <command>zypper update sca-patterns-*</command>. Uma atualização regular de sistema atualiza todos os pacotes de padrões e da aplicação SCA. Para atualizar a aplicação SCA e os padrões manualmente, execute:
     </para>
<screen><prompt>tux &gt; </prompt><command>sudo</command> zypper update sca-*</screen>
     <para>
      Por padrão, as atualizações são instaladas do repositório de atualização do SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP2</phrase>. </phrase> Você poderá mudar a fonte das atualizações para um servidor RMT, se desejado. Quando <filename>sdagent-patterns</filename> executa <command>zypper update sca-patterns-*</command>, ele acessa as atualizações do canal de atualização configurado no momento. Se esse canal estiver em um servidor RMT, os pacotes serão acessados de lá.
     </para>
     <procedure>
      <title>Desabilitando atualizações automáticas de padrões da SCA</title>
      <step>
       <para>
        Efetue login como usuário <systemitem class="username">root</systemitem> no console do sistema do servidor da aplicação SCA.
       </para>
      </step>
      <step>
       <para>

        Abra o <filename>/etc/sca/sdagent-patterns.conf</filename> em um editor.
       </para>
      </step>
      <step>
       <para>
        Mudar a entrada
       </para>
<screen>UPDATE_FROM_PATTERN_REPO=1</screen>
       <para>
        to
       </para>
<screen>UPDATE_FROM_PATTERN_REPO=0</screen>
      </step>
      <step>
       <para>
        Grave o arquivo e saia. Não é necessário reiniciar a máquina para aplicar a mudança.
       </para>
      </step>
     </procedure>
    </sect4>
    <sect4 xml:id="sec-admsupport-sca-appliance-config-archive">
     <title>Modo de arquivamento</title>
     <para>
      Todos os arquivos Supportconfig serão apagados da aplicação SCA depois de serem analisados e de seus resultados serem armazenados no banco de dados MariaDB. Para fins de solução de problemas, no entanto, convém manter cópias dos arquivos Supportconfig de uma máquina. Por padrão, o modo de arquivamento está desabilitado.
     </para>
     <procedure>
      <title>Habilitando o modo de arquivamento na aplicação SCA</title>
      <step>
       <para>
        Efetue login como usuário <systemitem class="username">root</systemitem> no console do sistema do servidor da aplicação SCA.
       </para>
      </step>
      <step>
       <para>
        Abra o <filename>/etc/sca/sdagent.conf</filename> em um editor.
       </para>
      </step>
      <step>
       <para>
        Mudar a entrada
       </para>
<screen>ARCHIVE_MODE=0</screen>
       <para>
        to
       </para>
<screen>ARCHIVE_MODE=1</screen>
      </step>
      <step>
       <para>
        Grave o arquivo e saia. Não é necessário reiniciar a máquina para aplicar a mudança.
       </para>
      </step>
     </procedure>
     <para>
      Após habilitar o modo de arquivamento, a aplicação SCA gravará os arquivos Supportconfig no diretório <filename>/var/log/archives/saved</filename>, em vez de apagá-los.
     </para>
    </sect4>
    <sect4 xml:id="sec-admsupport-sca-appliance-config-mail">
     <title>Enviando relatórios da SCA por e-mail</title>
     <para>
      A aplicação SCA pode enviar um arquivo HTML de relatório por e-mail referente a cada Supportconfig analisado. Por padrão, este recurso está desabilitado. Ao habilitá-lo, você pode definir uma lista de endereços de e-mail para os quais os relatórios devem ser enviados. Defina um nível de mensagens de status que acione o envio de relatórios (<literal>STATUS_NOTIFY_LEVEL</literal>).
     </para>
     <variablelist xml:id="vl-sca-mails-notify-level">
      <title>Valores possíveis para <literal>STATUS_NOTIFY_LEVEL</literal></title>
      <varlistentry>
       <term>$STATUS_OFF</term>
       <listitem>
        <para>
         Desativar o envio de relatórios HTML.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_CRITICAL</term>
       <listitem>
        <para>
         Enviar apenas relatórios da SCA que incluam CRITICAL (Crítico).
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_WARNING </term>
       <listitem>
        <para>
         Enviar apenas relatórios da SCA que incluam WARNING (Aviso) ou CRITICAL.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_RECOMMEND</term>
       <listitem>
        <para>
         Enviar apenas relatórios da SCA que incluam RECOMMEND (Recomendado), WARNING ou CRITICAL.
        </para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>$STATUS_SUCCESS</term>
       <listitem>
        <para>
         Enviar relatórios da SCA que incluam SUCCESS (Êxito), RECOMMEND, WARNING ou CRITICAL.
        </para>
       </listitem>
      </varlistentry>
     </variablelist>
     <procedure>
      <title>Configurando notificações por e-mail para relatórios da SCA</title>
      <step>
       <para>
        Efetue login como usuário <systemitem class="username">root</systemitem> no console do sistema do servidor da aplicação SCA.
       </para>
      </step>
      <step>
       <para>
        Abra o <filename>/etc/sca/sdagent.conf</filename> em um editor.
       </para>
      </step>
      <step>
       <para>
        Pesquise a entrada <systemitem>STATUS_NOTIFY_LEVEL</systemitem>. Por padrão, ela está definida como <literal>$STATUS_OFF</literal> (notificações por e-mail desabilitadas).
       </para>
      </step>
      <step>
       <para>
        Para habilitar as notificações por e-mail, mude <literal>$STATUS_OFF</literal> para o nível de mensagens de status para o qual deseja gerar relatórios por e-mail, por exemplo:
       </para>
<screen>STATUS_NOTIFY_LEVEL=$STATUS_SUCCESS</screen>
       <para>
        Para obter os detalhes, consulte a <xref linkend="vl-sca-mails-notify-level"/>.
       </para>
      </step>
      <step>
       <para>
        Para definir a lista de destinatários que devem receber os relatórios:
       </para>
       <substeps performance="required">
        <step>
         <para>
          Pesquise a entrada <literal>EMAIL_REPORT='root'</literal>.
         </para>
        </step>
        <step>
         <para>
          Substitua <literal>root</literal> pela lista de endereços de e-mail aos quais enviar os relatórios da SCA. Os endereços de e-mail devem ser separados por espaços. Por exemplo:
         </para>
<screen>EMAIL_REPORT='tux@my.company.com wilber@your.company.com'</screen>
        </step>
       </substeps>
      </step>
      <step>
       <para>
        Grave o arquivo e saia. Não é necessário reiniciar a máquina para aplicar as mudanças. Todos os relatórios futuros da SCA serão enviados por e-mail aos endereços especificados.
       </para>
      </step>
     </procedure>
    </sect4>
   </sect3>
   <sect3 xml:id="sec-admsupport-sca-appliance-backup">
    <title>Fazendo backup e restaurando o banco de dados</title>
    <para>
     Para fazer backup e restaurar o banco de dados MariaDB que armazena os relatórios da SCA, use o comando <command>scadb</command>, conforme descrito a seguir. O <command>scadb</command> está incluído no pacote
     <package>sca-appliance-broker</package>.
    </para>
    <procedure>
     <title>Fazendo backup do banco de dados</title>
     <step>
      <para>
       Efetue login como usuário <systemitem class="username">root</systemitem> no console do sistema do servidor que executa a aplicação SCA.
      </para>
     </step>
     <step>
      <para>
       Coloque a aplicação no modo de manutenção executando:
      </para>
<screen><prompt role="root">root # </prompt>scadb maint</screen>
     </step>
     <step>
      <para>
       Inicie o backup com:
      </para>
<screen><prompt role="root">root # </prompt>scadb backup</screen>
      <para>
       Os dados são gravados em um armazenamento TAR: <filename>sca-backup-*sql.gz</filename>.
      </para>
     </step>
     <step>
      <para>
       Se você usa o banco de dados de criação de padrões para desenvolver seus próprios padrões (consulte a <xref linkend="sec-admsupport-sca-patterns"/>), faça backup também destes dados:
      </para>
<screen><prompt role="root">root # </prompt>sdpdb backup</screen>
      <para>
       Os dados são gravados em um armazenamento TAR: <filename>sdp-backup-*sql.gz</filename>.
      </para>
     </step>
     <step>
      <para>
       Copie os seguintes dados para outra máquina ou para um meio de armazenamento externo:
      </para>
      <itemizedlist mark="bullet" spacing="normal">
       <listitem>
        <para>
         <filename>sca-backup-*sql.gz</filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>sdp-backup-*sql.gz</filename>
        </para>
       </listitem>
       <listitem>
        <para>
         <filename>/usr/lib/sca/patterns/local</filename> (necessário apenas se você criar padrões personalizados)
        </para>
       </listitem>
      </itemizedlist>
     </step>
     <step>
      <para>
       Ative novamente a aplicação SCA com:
      </para>
<screen><prompt role="root">root # </prompt>scadb reset agents</screen>
     </step>
    </procedure>
    <procedure>
     <title>Restaurando o banco de dados</title>
     <para>
      Para restaurar o banco de dados do backup, faça o seguinte:
     </para>
     <step>
      <para>
       Efetue login como usuário <systemitem class="username">root</systemitem> no console do sistema do servidor que executa a aplicação SCA.
      </para>
     </step>
     <step>
      <para>
       Copie os armazenamentos TAR <filename>sca-backup-*sql.gz</filename> e <filename>sdp-backup-*sql.gz</filename> mais recentes para o servidor da aplicação SCA.
      </para>
     </step>
     <step>
      <para>
       Para descompactar os arquivos, execute:
      </para>
<screen><prompt role="root">root # </prompt>gzip -d *-backup-*sql.gz</screen>
     </step>
     <step>
      <para>
       Para importar os dados para o banco de dados, execute:
      </para>
<screen><prompt role="root">root # </prompt>scadb import sca-backup-*sql</screen>
     </step>
     <step>
      <para>
       Se você usa o banco de dados de criação de padrões para criar seus próprios padrões, importe também os seguintes dados com:
      </para>
<screen><prompt role="root">root # </prompt>sdpdb import sdp-backup-*sql</screen>
     </step>
     <step>
      <para>
       Se você usa padrões personalizados, restaure também <filename>/usr/lib/sca/patterns/local</filename> dos dados do backup.
      </para>
     </step>
     <step>
      <para>
       Ative novamente a aplicação SCA com:
      </para>
<screen><prompt role="root">root # </prompt>scadb reset agents</screen>
     </step>
     <step>
      <para>
       Atualize os módulos de padrão no banco de dados com:
      </para>
<screen><prompt role="root">root # </prompt>sdagent-patterns -u</screen>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 xml:id="sec-admsupport-sca-patterns">
   <title>Desenvolvendo padrões de análise personalizados</title>
   <para>
    A aplicação SCA vem com um ambiente completo de desenvolvimento de padrões (o Banco de Dados de Padrões da SCA), que permite desenvolver padrões personalizados. Os padrões podem ser desenvolvidos em qualquer linguagem de programação. Para disponibilizá-los para o processo de análise do Supportconfig, eles devem ser gravados em <filename>/usr/lib/sca/patterns/local</filename> e ser executáveis. Tanto a aplicação quanto a ferramenta SCA executam os padrões personalizados nos novos arquivos Supportconfig como parte do relatório de análise. Para obter instruções detalhadas sobre como criar (e testar) seus próprios padrões, visite <link xlink:href="https://www.suse.com/c/blog/sca-pattern-development/"/>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-admsupport-install">
  <title>Coletando informações durante a instalação</title>
  <para>
   Durante a instalação, o <command>supportconfig</command> não está disponível. No entanto, você pode coletar arquivos de registro do YaST usando <command>save_y2logs</command>. Esse comando criará um arquivo <filename>.tar.xz</filename> no diretório <filename>/tmp</filename>.
  </para>
  
  <para>
   Se aparecerem problemas muito no começo da instalação, talvez seja possível coletar informações do arquivo de registro criado por <command>linuxrc</command>. <command>linuxrc</command> é um comando pequeno que é executado antes de o YaST ser iniciado. Esse arquivo de registro está disponível em <filename>/var/log/linuxrc.log</filename>.
  </para>
  <important>
   <title>Arquivos de registro de instalação não disponíveis no sistema instalado</title>
   <para>
    Os arquivos de registro disponíveis durante a instalação não estão mais disponíveis no sistema instalado. Grave apropriadamente os arquivos de registro de instalação enquanto o instalador ainda está em execução.
   </para>
  </important>
 </sect1>

 <sect1 xml:id="sec-admsupport-kernel">
  <title>Suporte aos módulos do Kernel</title>

  <para>
   Um requisito importante para todo sistema operacional empresarial é o nível de suporte que você recebe do ambiente. Os módulos do Kernel são o conector mais relevante entre o hardware (<quote>controladoras</quote>) e o sistema operacional. Cada módulo do kernel no SUSE Linux Enterprise possui um flag <literal>supported</literal> (suportado) que pode ter três valores:
  </para>

  <itemizedlist mark="bullet" spacing="normal">

   <listitem>
    <para>
     <quote>yes</quote>, portanto, <literal>supported</literal>
    </para>
   </listitem>
   <listitem>
    <para>
     <quote>external</quote> (externo), portanto, <literal>supported</literal>
    </para>
   </listitem>
   <listitem>
    <para>
     <quote/> (vazio, não definido), portanto <literal>unsupported</literal> (não suportado)
    </para>
   </listitem>
  </itemizedlist>

  <para>
   As seguintes regras são válidas:
  </para>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     Por padrão, todos os módulos de um kernel autorrecompilado são marcados como não suportados.
    </para>
   </listitem>
   <listitem>
    <para>
     Os módulos do Kernel suportados pelos parceiros do SUSE e distribuídos pelo <literal>SUSE SolidDriver Program</literal> são marcados como <quote>externos</quote>.
    </para>
   </listitem>
   <listitem>
    <para>
     Se o flag <literal>supported</literal> não estiver definido, o carregamento do módulo contaminará o kernel. Kernels contaminados não são suportados. Os módulos do Kernel não suportados estão incluídos em um pacote RPM adicional (<systemitem>kernel-<replaceable>TIPO</replaceable>-extra</systemitem>). Esse pacote apenas está disponível para o SUSE Linux Enterprise Desktop e a SUSE Linux Enterprise Workstation Extension. Por padrão, esses kernels não são carregados (<replaceable>TIPO</replaceable>=<literal>default</literal>|<literal>xen</literal>|...). Esses módulos não suportados também não estão disponíveis no instalador, e o pacote <systemitem class="resource">kernel-<replaceable>TIPO</replaceable>-extra</systemitem> não faz parte da mídia do SUSE Linux Enterprise.
    </para>
   </listitem>
   <listitem>
    <para>
     Os módulos do kernel não incluídos em uma licença compatível com a licença do kernel do Linux também contaminarão o kernel. Para obter detalhes, consulte <filename>/usr/src/linux/Documentation/sysctl/kernel.txt</filename> e o estado de <filename>/proc/sys/kernel/tainted</filename>.
    </para>
   </listitem>
  </itemizedlist>

  <sect2 xml:id="sec-admsupport-kernel-background">
   <title>Informações técnicas</title>
   <para/>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Kernel do Linux: O valor de <filename>/proc/sys/kernel/unsupported</filename> usa o padrão <literal>2</literal> no SUSE Linux Enterprise <phrase role="productnumber"><phrase os="sles;sled">15 SP2</phrase></phrase> (<literal>do not warn in syslog when loading unsupported modules</literal>). Esse padrão é usado no instalador e no sistema instalado. Consulte <filename>/usr/src/linux/Documentation/sysctl/kernel.txt</filename> para obter mais informações.
     </para>
    </listitem>
    <listitem>
     <para>
      <command>modprobe</command>: O utilitário <command>modprobe</command> de verificação de dependências de módulos e carregamento dos módulos apropriados confirma se o valor do flag é <literal>supported</literal> (suportado). Se o valor for <quote>sim</quote> ou <quote>externo</quote>, o módulo será carregado, do contrário, não. Para obter informações sobre como anular este comportamento, consulte a <xref linkend="sec-admsupport-kernel-unsupported"/>.
     </para>
     <note>
      <title>Suporte</title>
      <para>
       Em geral, o SUSE não suporta a remoção de módulos de armazenamento por <command>modprobe -r</command>.
      </para>
     </note>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec-admsupport-kernel-unsupported">
   <title>Trabalhando com módulos não suportados</title>
   <para>
    Embora a capacidade de suporte geral seja importante, algumas situações podem exigir o carregamento de um módulo não suportado. Por exemplo, para fins de teste ou depuração, ou se o seu fornecedor de hardware disponibilizar um hotfix.
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Para anular o padrão, edite <filename>/etc/modprobe.d/10-unsupported-modules.conf</filename> e mude o valor da variável <varname>allow_unsupported_modules</varname> para <literal>1</literal>. Se for necessário um módulo não suportado no initrd, lembre-se de executar <command>dracut </command><option>-f</option> para atualizar o initrd.
     </para>
     <para>
      Para apenas tentar carregar um módulo uma vez, é possível usar a opção <option>--allow-unsupported-modules</option> com <command>modprobe</command>. Para obter mais informações, consulte a página de manual de <command>modprobe</command>.
     </para>
    </listitem>
    <listitem>
     <para>
      Durante a instalação, módulos não suportados podem ser adicionados por meio de discos de atualização de driver, e eles serão carregados. Para impor o carregamento de módulos não suportados durante a inicialização e posteriormente, use a opção de linha de comando do kernel <option>oem-modules</option>. Durante a instalação e inicialização do pacote <systemitem class="resource">suse-module-tools</systemitem>, o flag do kernel <literal>TAINT_NO_SUPPORT</literal> (<filename>/proc/sys/kernel/tainted</filename>) será avaliado. Se o kernel já foi contaminado, <literal>allow_unsupported_modules</literal> será habilitado. Isso impede que módulos não suportados acessem o sistema que está sendo instalado. Se não houver nenhum módulo não suportado durante a instalação e não for usada a outra opção de linha de comando especial do kernel (<option>oem-modules=1</option>), o padrão ainda será de não permitir módulos não suportados.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Lembre-se de que carregar e executar módulos não suportados tornam o kernel e todo o sistema não suportados pelo SUSE.
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="sec-admsupport-moreinfo">
  <title>Para obter mais informações</title>

  <para/>

  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     <command>man supportconfig</command>: A página de manual de <command>supportconfig</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man supportconfig.conf</command>: A página de manual do arquivo de configuração Supportconfig.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man scatool</command>: A página de manual de <command>scatool</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man scadb</command>: A página de manual de <command>scadb</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <command>man setup-sca</command>: A página de manual de <command>setup-sca</command>.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://mariadb.com/kb/en/"/>: A documentação do MariaDB.
    </para>
   </listitem>
   
   
   <listitem>
    <para>
     <link xlink:href="https://www.suse.com/c/blog/sca-pattern-development/"/>: Instruções sobre como criar (e testar) seus próprios padrões da SCA.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://www.suse.com/c/blog/basic-server-health-check-supportconfig/"/>: Uma verificação da saúde básica do servidor com o supportconfig.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://community.microfocus.com/t5/GroupWise-Tips-Information/Create-Your-Own-Supportconfig-Plugin/ta-p/1783289"/>: Criar seu próprio plug-in Supportconfig.
    </para>
   </listitem>
   <listitem>
    <para>
     <link xlink:href="https://www.suse.com/c/blog/creating-a-central-supportconfig-repository/"/>: Criar um repositório central do Supportconfig.
    </para>
    <para>
     <remark>taroth 2014-04-25: jrecord, should we still refer to the three articles above? </remark>
    </para>
   </listitem>
  </itemizedlist>
 </sect1>
</chapter>
