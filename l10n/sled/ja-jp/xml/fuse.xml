<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="fuse.xml" version="5.0" xml:id="cha-fuse">
 <title>FUSEによるファイルシステムへのアクセス</title>
 <info>
      <abstract>
        <para>
    FUSEは、<emphasis>file system in user space</emphasis>の頭字語です。これは、特権のないユーザとしてファイルシステムを設定およびマウントできることを意味します。通常、このタスクを行うためには、<systemitem class="username">root</systemitem>である必要があります。FUSE自体は、カーネルモジュールです。FUSEは、プラグインと組み合わせることで、ほとんどすべてのファイルシステムにアクセスするように拡張できます(リモートSSH接続、ISOイメージなど)。
   </para>
      </abstract>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:bugtracker/>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    
 <sect1 xml:id="sec-fuse-config">
  <title>FUSEの設定</title>

  <para>
   FUSEを使用するには、まず、<systemitem class="resource">fuse</systemitem>パッケージをインストールする必要があります。使用するファイルシステムによって、別々のパッケージとして使用できるプラグインを追加する必要があります。 
  </para>

  <para>
   通常は、FUSEを設定する必要はありません。ただし、すべてのマウントポイントを結合するディレクトリの作成をお勧めします。たとえば、ディレクトリ<filename>~/mounts</filename>を作成し、そこに、各種のファイルシステムのサブディレクトリを挿入します。
  </para>
 </sect1>
 <sect1 xml:id="sec-fuse-ntfs">
  <title>NTFSパーティションのマウント</title>

  <para>
   NTFS(<emphasis>New Technology File System</emphasis>)は、Windowsのデフォルトのファイルシステムです。通常の状況では、特権のないユーザは外部のFUSEライブラリを使用してNTFSブロックデバイスをマウントできません。そのため、次に説明する方法でWindowsパーティションをマウントするには、ルート特権が必要です。
  </para>

  <procedure>
   <step>
    <para>
     <systemitem class="username">root</systemitem>になって、パッケージ<systemitem class="resource">ntfs-3g</systemitem>をインストールします。 
    </para>
   </step>
   <step>
    <para>
     マウントポイントとして使用するディレクトリ(<filename>~/mounts/windows</filename>など)を作成します。
    </para>
   </step>
   <step>
    <para>
     必要なWindowsパーティションを見つけます。YaSTを使用し、パーティショナモジュールを起動して、Windowsに属するパーティションを確認します(ただし、何も変更しないでください)。代替として、<systemitem class="username">root</systemitem>になって、<command>/sbin/fdisk</command> <option>-l</option>を実行することもできます。パーティションタイプ<literal>HPFS/NTFS</literal>のパーティションを捜します。
    </para>
   </step>
   <step>
    <para>
     読み書きモードでパーティションをマウントします。プレースホルダ<replaceable>DEVICE</replaceable>を各Windowsパーティションで置き換えます。
    </para>
<screen><prompt>tux &gt; </prompt>ntfs-3g /dev/<replaceable>DEVICE</replaceable> <replaceable>MOUNT POINT</replaceable></screen>
    <para>
     Windowsパーティションを読み込み専用モードで使用するには、<option>-o ro</option>を追加します。
    </para>
<screen><prompt>tux &gt; </prompt>ntfs-3g /dev/<replaceable>DEVICE</replaceable> <replaceable>MOUNT POINT</replaceable> -o ro</screen>
    <para>
     コマンド<command>ntfs-3g</command>は、現在のユーザ(UID)とグループ(GID)を使用して、所定のデバイスをマウントします。書き込みパーミッションを別のユーザに設定するには、コマンド<command>id</command>
     <option>USER</option>を使用して、UID値とGID値の出力を取得します。次のコードで設定してください。
    </para>
<screen><prompt role="root">root # </prompt>id tux
uid=1000(tux) gid=100(users) groups=100(users),16(dialout),33(video)
ntfs-3g /dev/<replaceable>DEVICE</replaceable> <replaceable>MOUNT POINT</replaceable> -o uid=1000,gid=100</screen>
    <para>
     その他のオプションについては、マニュアルページを参照してください。
    </para>
   </step>
  </procedure>

  <para>
   リソースをアンマウントするには、<command>fusermount -u </command>
   <replaceable>MOUNT POINT</replaceable>を実行します。
  </para>
 </sect1>
 
 
 
 <sect1 xml:id="sec-fuse-moreinfo">
  <title>詳細情報</title>

  <para>
   詳細については、<link xlink:href="https://github.com/libfuse/libfuse"/>にあるFUSEのホームページを参照してください。
  </para>
 </sect1>
</chapter>
