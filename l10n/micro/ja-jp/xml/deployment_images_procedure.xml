<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_images_procedure.xml" version="5.0" xml:id="cha-images-procedure">
 <title>生イメージの展開</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>
 <para>
  <phrase role="productname"><phrase os="slemicro">SUSE Linux Enterprise Micro</phrase></phrase>には、デバイスストレージ(メモリカード、USBメモリ、またはハードディスク)に直接展開できる生イメージが用意されています。イメージを展開できるデバイスタイプのオプションは、特定のハードウェアごとに異なるため、ベンダーのドキュメントのガイダンスに従ってください。
 </para>

 <para>
  セットアップを準備するには、2つの個別のデバイスが必要になる場合があります。1つはSLE Microが実行する生のディスクイメージ用で、もう1つはUSBディスクなど設定メディアとして機能するものです。基本設定は、設定メディアがなくても実行できます。より複雑な設定を行うには、設定メディアを準備する必要があります。 
 </para>

 <para>
  次の手順は、システムに生イメージを展開する手順を示します。
 </para>
<procedure>
  <title>生イメージの展開</title>
  <step>
    <para>
      <xref linkend="proc-prepare-image"/>の説明に従って、生イメージを準備します。
    </para>
  </step>
  <step>
    <para>
      必要に応じて、<xref linkend="pro-preparing-configuration-device"/>の説明に従って、設定メディアを準備します。
    </para>
  </step>
  <step>
    <para>
      設定メディアを使用しなかった場合は、<xref linkend="sec-jeos-firstboot"/>の説明に従って続行します。
    </para>
  </step>
  <step>
    <para>
  最初のブート後、<command>transactional-update</command>コマンドを使用してSLE Microインスタンスを登録できます。詳細については、<xref linkend="sec-images-registration"/>を参照してください。
 </para>
  </step>
  <step>
    <para>
  SLE Microでは拡張機能を利用できます。これらの拡張機能の一部を使用するには、インストール済みシステムからサブスクリプションに拡張機能を追加する必要があります。詳細については、<xref linkend="sec-adding-extension"/>を参照してください。
 </para> 
  </step>
</procedure>

 <section xml:id="sec-raw-preparation">
  <title>生イメージの準備</title>
  <para>
  生イメージを準備するには、次の手順に従います。
 </para> 
 <procedure xml:id="proc-prepare-image">
  <title>生のディスクイメージの準備</title>
  <step>
   <para>
    生イメージをダウンロードし、解凍します。
   </para>
<screen><prompt>&gt; </prompt>xz -d <replaceable>DOWNLOADED_IMAGE.raw.xz</replaceable></screen>
  </step>
  <step>
   <para>
    SLE Microを実行するデバイスに、解凍したイメージをコピーします。
   </para>
<screen><prompt>&gt; </prompt>dd if=<replaceable>DOWNLOADED_IMAGE.raw</replaceable> of=/dev/sd<replaceable>X</replaceable></screen>
  </step>
 </procedure>
</section>

<section xml:id="sec-prepare-device">
  <title>設定デバイスの準備</title>
 <para>
  次の手順では、設定デバイス(通常はUSBメモリ)を準備する方法を説明します。この設定デバイスは、初回の起動時にSLE Microを実行しているホストに接続する必要があることに注意してください。
 </para>
 <procedure xml:id="pro-preparing-configuration-device">
 <title>設定デバイスの準備</title>
  <step>
   <para>
    SLE Microでサポートされている任意のファイルシステム(Ext3、Ext4など)にディスクをフォーマットします。
   </para>
<screen>
<prompt>&gt; </prompt>sudo mkfs.ext4 /dev/sd<replaceable>Y</replaceable>
</screen>
  </step>
  <step>
   <para>
    デバイスのラベルを、<literal>ignition</literal> (IgnitionまたはCombustionのいずれかが使用されている場合)または<literal>combustion</literal> (Combustionのみが使用されている場合)に設定します。Ext4ファイルシステムの場合は、次のように設定します。
   </para>
<screen><prompt>&gt; </prompt>sudo e2label /dev/sd<replaceable>Y</replaceable> ignition</screen>
   <para>
    仮想化システムまたはハードウェアがサポートしている任意のタイプの設定ストレージメディアを使用できます(ISOイメージ、USBメモリなど)。
   </para>
  </step>
  <step>
   <para>
    デバイスをマウントします。
   </para>
<screen>
<prompt>&gt; </prompt>sudo mount /dev/sdY /mnt
</screen>
  </step>
  <step>
   <para>
    使用する設定ツールに応じて、<xref linkend="cha-images-ignition"/>または<xref linkend="cha-images-combustion"/>に示すようにディレクトリ構造を作成します。
   </para>
<screen>
<prompt>&gt; </prompt>sudo mkdir -p /mnt/ignition/
</screen>
   <para>
    あるいは、
   </para>
<screen>
<prompt>&gt; </prompt>sudo mkdir -p /mnt/combustion/
</screen>
  </step>
  <step>
   <para>
    初めて起動する前に、<xref linkend="cha-images-ignition" xrefstyle="template:Ignition"/>または<xref linkend="cha-images-combustion" xrefstyle="template:Combustion"/>で使用される設定のすべての要素を準備します。システムにログインするには、<systemitem class="username">root</systemitem>用のパスワードを指定するか、パスワードのない認証を設定する必要があります。そうしない場合、初回の起動後にシステムにアクセスできなくなります。
   </para>
  </step>
</procedure>
  </section>

  <section xml:id="sec-jeos-firstboot">
    <title>最小限の初期設定</title>
    <para>
      生イメージを初めて起動するときに設定デバイスを接続しない場合、「jeos-firstboot」を使用すると、以下のようにシステムの最小限の設定を実行できます。<emphasis></emphasis>
    </para>
    <procedure>
      <title>「jeos-firstboot」を使用したシステムの設定<emphasis></emphasis></title>
      <step>
        <para>
          設定を確認します。
        </para>
        <informalfigure>
        <mediaobject>
          <imageobject role="fo">
     <imagedata fileref="slemicro_jeos_start.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="slemicro_jeos_start.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>jeos first boot</phrase>
    </textobject>
        </mediaobject>
      </informalfigure>
      </step>
      <step>
        <para>
          キーボードレイアウトを選択して、選択内容を確認します。
        </para>
        <informalfigure>
        <mediaobject>
          <imageobject role="fo">
     <imagedata fileref="slemicro_jeos_keyboard.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="slemicro_jeos_keyboard.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>jeos keyboard selection</phrase>
    </textobject>
        </mediaobject>
      </informalfigure>
      </step>
      <step>
        <para>
          ライセンス契約を読んで、同意します。
        </para>
        <informalfigure>
        <mediaobject>
          <imageobject role="fo">
     <imagedata fileref="slemicro_jeos_eula.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="slemicro_jeos_eula.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>jeos EULA</phrase>
    </textobject>
        </mediaobject>
      </informalfigure>
      </step>
      <step>
        <para>
          タイムゾーンを選択します。
        </para>
        <informalfigure>
        <mediaobject>
          <imageobject role="fo">
     <imagedata fileref="slemicro_jeos_timezone.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="slemicro_jeos_timezone.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>jeos time zone selection</phrase>
    </textobject>
        </mediaobject>
      </informalfigure>
      </step>
      <step>
        <para>
          <systemitem class="username">root</systemitem>のパスワードを入力します。
        </para>
        <informalfigure>
        <mediaobject>
          <imageobject role="fo">
     <imagedata fileref="slemicro_jeos_password.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="slemicro_jeos_password.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>root password</phrase>
    </textobject>
     </mediaobject>
   </informalfigure>
   </step>
   <step>
    <para>
      <systemitem class="username">root</systemitem>パスワードを確認します。
    </para>
    <informalfigure>
    <mediaobject>
      <imageobject role="fo">
     <imagedata fileref="slemicro_jeos_password_confirm.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="slemicro_jeos_password_confirm.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>root password confirmation</phrase>
    </textobject>
        </mediaobject>
      </informalfigure>
      </step>
      <step>
        <para>
          SLE Micro登録に関するステートメントに同意します。
        </para>
        <informalfigure>
        <mediaobject>
          <imageobject role="fo">
     <imagedata fileref="slemicro_jeos_statement.png" width="100%"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="slemicro_jeos_statement.png" width="100%"/>
    </imageobject>
    <textobject role="description"><phrase>root password</phrase>
    </textobject>
        </mediaobject>
      </informalfigure>
      </step>
    </procedure>
  </section>
</chapter>
