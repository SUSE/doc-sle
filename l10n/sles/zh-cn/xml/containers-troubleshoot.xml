<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="containers-troubleshoot.xml" version="5.0" xml:id="cha-containers-troubleshoot"> <info>
      <title>查错</title>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
    </info>
    <sect1 xml:id="sec-container-diff">
  <title>使用 container-diff 分析容器映像</title>

  <para>
   如果基于 SLE 基本容器映像构建的自定义 Docker 开源引擎容器映像无法按预期方式工作，您可以借助
   <package>container-diff</package> 工具来分析该映像并收集用于查错的相关信息。
  </para>

  <para>
   <package>container-diff</package> 可以分析映像的变化，具体方式是计算映像之间的差异并以直观易懂且可处理的格式呈现差异。该工具可以找出系统软件包、语言级软件包和容器映像中文件的差异。
  </para>

  <para>
   <package>container-diff</package> 可以处理本地容器映像（使用前缀 <literal>daemon://</literal>）、远程注册表中的映像（使用前缀 <literal>remote://</literal>），以及另存为 <literal>.tar</literal> 存档的映像。可使用
   <package>container-diff</package> 来计算映像的本地版本与远程版本之间的差异。
  </para>

  <para>
   要安装 <package>container-diff</package>，请运行 <command>sudo zypper in container-diff</command> 命令。
  </para>

  <sect2 xml:id="sec-container-diff-basics">
   <title>基本 container-diff 命令</title>
   <para>
    <command>container-diff analyze <replaceable>IMAGE</replaceable></command> 命令针对单个映像运行标准分析。它默认会返回容器映像的哈希和大小。如需可帮助您识别和修复问题的详细信息，请使用特定的分析器。使用 <literal>--type</literal> 参数指定所需的分析器。两个最有用的分析器是 <literal>history</literal>（返回映像层创建说明列表）和 <literal>file</literal>（返回文件系统内容的列表，包括名称、路径和大小）：
   </para>
<screen><prompt>tux &gt; </prompt>sudo container-diff analyze --type=history daemon://<replaceable>IMAGE</replaceable>
<prompt>tux &gt; </prompt>sudo container-diff analyze --type=file daemon://<replaceable>IMAGE</replaceable></screen>
   <para>
    要查看所有可用参数及其简要说明，请运行 <command>container-diff analyze --help</command> 命令。
   </para>
   <para>
    使用 <command>container-diff diff</command> 命令可以比较两个容器映像并检查两者的差异。与 <command>container-diff analyze</command> 命令类似，<command>container-diff diff</command> 支持多个参数。下面的示例命令会比较两个映像，并返回有关如何基于 IMAGE_1 创建了 IMAGE_2 的说明列表。
   </para>
<screen><prompt>tux &gt; </prompt>sudo container-diff diff daemon://<replaceable>IMAGE_1</replaceable> daemon://<replaceable>IMAGE_2</replaceable> --type=history</screen>
   <para>
    要查看所有可用参数及其简要说明，请运行 <command>container-diff diff --help</command> 命令。
   </para>
  </sect2>
 </sect1>
</chapter>
