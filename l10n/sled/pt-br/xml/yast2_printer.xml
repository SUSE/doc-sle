<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="yast2_printer.xml" version="5.0" xml:id="sec-yast-hw-print">
 <title>Configurando uma impressora</title>

 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
 </info>

 <para>
  É possível usar o YaST para configurar uma impressora local conectada à máquina por USB e definir a impressão com impressoras de rede. É possível também compartilhar impressoras na rede. Há mais informações disponíveis sobre impressão (informações gerais, detalhes técnicos e solução de problemas) no <xref linkend="cha-print"/>.
 </para>

 <para>
  No YaST, clique em <menuchoice> <guimenu>Hardware</guimenu>
  <guimenu>Impressora</guimenu> </menuchoice> para iniciar o módulo de impressora. Por padrão, ele é aberto na tela <guimenu>Configurações da Impressora</guimenu>, exibindo uma lista de todas as impressoras disponíveis e configuradas. Isso é especialmente útil quando se tem acesso a inúmeras impressoras na rede. Deste ponto, é possível também <guimenu>Imprimir uma Página de Teste</guimenu> e configurar impressoras.
 </para>

 <note>
  <title>Iniciando o CUPS</title>
  <para>
   Para imprimir do seu sistema, o CUPS deve estar em execução. Se ele não estiver em execução, será solicitado para que seja iniciado. Responda com <guimenu>Sim</guimenu>, do contrário, não será possível configurar a impressão. Caso o CUPS não seja iniciado no momento da inicialização, também será solicitado para você habilitar esse recurso. É recomendado especificar <guimenu>Sim</guimenu>, do contrário, o CUPS terá de ser iniciado manualmente após cada reinicialização.
  </para>
 </note>

 <sect1 xml:id="sec-yast-hw-print-local">
  <title>Configurando impressoras</title>
  <para>
   Normalmente, uma impressora USB é automaticamente detectada. Há dois motivos possíveis para ela não ser detectada automaticamente:
  </para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>
     A impressora USB está desligada.
    </para>
   </listitem>
   <listitem>
    <para>
     A comunicação entre a impressora e o computador não é possível. Verifique o cabo e os plugues para se certificar de que a impressora esteja corretamente conectada. Se este for o caso, o problema poderá não estar relacionado à impressora, mas sim ao USB.
    </para>
   </listitem>
  </itemizedlist>
  <para>
   A configuração de uma impressora é um processo de três etapas: especificar o tipo de conexão, escolher um driver e dar um nome à fila de impressão para esta configuração.
  </para>
  <para>
   Há vários drivers disponíveis para diversos modelos de impressora. Ao configurar a impressora, o YaST usa como padrão os drivers marcados com <literal>recommended</literal> (recomendados) como regra geral. Normalmente, não é necessário mudar o driver. Entretanto, para que uma impressora colorida imprima apenas em preto e branco, você pode usar um driver que não suporte impressão colorida. Se você tiver problemas de desempenho com uma impressora PostScript para imprimir gráficos, tente alternar de um driver PostScript para um driver PCL (contanto que sua impressora reconheça PCL).
  </para>
  <para>
   Se o driver de sua impressora não aparecer na lista, tente selecionar um driver genérico com uma linguagem padrão apropriada na lista. Consulte a documentação da sua impressora para saber qual linguagem (o conjunto de comandos que controlam a impressora) é entendida por sua impressora. Se isso não funcionar, consulte a <xref linkend="sec-yast-hw-print-local-get-ppd"/> para obter outra solução possível.
  </para>
  <para>
   A impressora nunca é usada diretamente, mas sempre por meio de uma fila de impressão. Dessa forma, as tarefas simultâneas poderão ser enfileiradas e processadas em sequência. Cada fila de impressão recebe um driver específico, e uma impressora pode ter várias filas. Isso possibilita configurar uma segunda fila em uma impressora colorida que imprima somente em preto e branco, por exemplo. Consulte a <xref linkend="sec-print-workflow"/> para obter mais informações sobre filas de impressão.
  </para>
  <procedure xml:id="pro-y2-hw-print-local-config">
   <title>Adicionando uma nova impressora</title>
   <step>
    <para>
     Inicie o módulo de impressora do YaST em <menuchoice>
     <guimenu>Hardware</guimenu> <guimenu>Impressora</guimenu></menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Na tela <guimenu>Configurações da Impressora</guimenu>, clique em <guimenu>Adicionar</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Se a impressora já estiver na lista em <literal>Especificar a Conexão</literal>, vá para a próxima etapa. Do contrário, tente <guimenu>Detect More</guimenu> (Detectar Mais) ou inicie o <guimenu>Assistente de Conexão</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Na caixa de texto em <literal>Find and Assign a Driver</literal> (Localizar e Atribuir um Driver), digite o nome do fornecedor e do modelo e clique em <guimenu>Procurar por</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Escolha um driver que corresponda à impressora. É recomendado escolher o primeiro driver da lista. Se nenhum driver adequado for exibido:
    </para>
    <substeps performance="required">
     <step>
      <para>
       Verifique o termo de pesquisa.
      </para>
     </step>
     <step>
      <para>
       Amplie a pesquisa clicando em <guimenu>Localizar Mais</guimenu>.
      </para>
     </step>
     <step>
      <para>
       Adicione o driver conforme descrito na <xref linkend="sec-yast-hw-print-local-get-ppd"/>.
      </para>
     </step>
    </substeps>
   </step>
   <step>
    <para>
     Especifique o <literal>Tamanho padrão do papel</literal>.
    </para>
   </step>
   <step>
    <para>
     No campo <guimenu>Set Arbitrary Name</guimenu> (Definir Nome Arbitrário), digite um nome exclusivo para a fila de impressão.
    </para>
   </step>
   <step>
    <para>
     A impressora agora está definida com as configurações padrão e pronta para ser usada. Clique em <guimenu>OK</guimenu> para retornar à tela <guimenu>Configurações da Impressora. </guimenu> A impressora recém-configurada agora aparece na lista de impressoras.
    </para>
   </step>
  </procedure>
  <sect2 xml:id="sec-yast-hw-print-local-get-ppd">
   <title>Adicionando drivers com o YaST</title>
   <para>
    Nem todos os drivers de impressora disponíveis para o <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase> são instalados por padrão. Se nenhum driver adequado estiver disponível na caixa de diálogo <guimenu>Find and Assign a Driver</guimenu> ao adicionar uma nova impressora, instale um pacote que tenha os drivers para a sua impressora:
   </para>
   <procedure>
    <title>Instalando pacotes de drivers adicionais</title>
    <step>
     <para>
      Inicie o módulo de impressora do YaST em <menuchoice>
      <guimenu>Hardware</guimenu> <guimenu>Impressora</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Na tela <guimenu>Configurações da Impressora</guimenu>, clique em <guimenu>Adicionar</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Na seção <literal>Find and Assign a Driver</literal>, clique em <guimenu>Pacotes de Drivers</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Escolha um ou mais pacotes de drivers adequados na lista. <emphasis>Não</emphasis> especifique o caminho para um arquivo de descrição da impressora.
     </para>
    </step>
    <step>
     <para>
      Escolha <guimenu>OK</guimenu> e confirme a instalação do pacote.
     </para>
    </step>
    <step>
     <para>
      Para usar os drivers diretamente, proceda conforme descrito no <xref linkend="pro-y2-hw-print-local-config"/>.
     </para>
    </step>
   </procedure>
   <para>
    As impressoras PostScript não precisam de software de driver de impressora. As impressoras PostScript só precisam de um arquivo PPD (PostScript Printer Description) correspondente ao modelo em particular. Os arquivos PPD são fornecidos pelo fabricante da impressora.
   </para>
   <para>
    Se não houver nenhum arquivo PPD adequado disponível na caixa de diálogo <guimenu>Localizar e Atribuir um Driver</guimenu> ao adicionar uma impressora PostScript, instale um arquivo PPD para sua impressora:
   </para>
   <para>
    Há várias fontes de arquivos PPD disponíveis. A recomendação é primeiro tentar outros pacotes de drivers que façam parte do <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>, mas que não são instalados por padrão (veja a seguir as instruções de instalação). Se esses pacotes não incluírem os drivers adequados para a sua impressora, obtenha os arquivos PPD diretamente do fornecedor da impressora ou do CD do driver de uma impressora PostScript. Para obter os detalhes, consulte a <xref linkend="sec-print-prob-ppd"/>. Se preferir, localize os arquivos PPD em <link xlink:href="http://www.linuxfoundation.org/collaborate/workgroups/openprinting/database/databaseintro"/>, o <quote>banco de dados de impressoras do OpenPrinting.org</quote>. Ao fazer download dos arquivos PPD do OpenPrinting, lembre-se de que o status do suporte do Linux mais recente é sempre mostrado, que não é necessariamente igual ao do <phrase role="productname"><phrase os="sled">SUSE Linux Enterprise Desktop</phrase></phrase>.
   </para>
   <procedure>
    <title>Adicionando um arquivo PPD para impressoras PostScript</title>
    <step>
     <para>
      Inicie o módulo de impressora do YaST em <menuchoice>
      <guimenu>Hardware</guimenu> <guimenu>Impressora</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Na tela <guimenu>Configurações da Impressora</guimenu>, clique em <guimenu>Adicionar</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Na seção <literal>Find and Assign a Driver</literal>, clique em <guimenu>Pacotes de Drivers</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Insira o caminho completo para o arquivo PPD na caixa de texto em <literal>Disponibilizar um Arquivo de Descrição de Impressora</literal>.
     </para>
    </step>
    <step>
     <para>
      Clique em <guimenu>OK</guimenu> para retornar à tela <literal>Adicionar Nova Configuração de Impressora</literal>.
     </para>
    </step>
    <step>
     <para>
      Para usar diretamente esse arquivo PPD, proceda conforme descrito no <xref linkend="pro-y2-hw-print-local-config"/>.
     </para>
    </step>
   </procedure>
  </sect2>
  <sect2 xml:id="sec-yast-hw-print-local-tune">
   <title>Editando a configuração da impressora local</title>
   <para>
    Ao editar uma configuração existente de uma impressora, é possível mudar as configurações básicas, como o tipo de conexão e o driver. Também é possível ajustar as configurações padrão de tamanho de papel, resolução, fonte de mídia etc. Você pode mudar os identificadores da impressora alterando a descrição ou o local da impressora.
   </para>
   <procedure>
    <step>
     <para>
      Inicie o módulo de impressora do YaST em <menuchoice>
      <guimenu>Hardware</guimenu> <guimenu>Impressora</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      Na tela <guimenu>Configurações da Impressora</guimenu>, escolha a configuração da impressora local na lista e clique em <guimenu>Editar</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Mude o tipo de conexão ou o driver conforme descrito no <xref linkend="pro-y2-hw-print-local-config"/>. Isso será necessário apenas se houver problemas com a configuração atual.
     </para>
    </step>
    <step>
     <para>
      Se preferir, defina a impressora como padrão marcando <guimenu>Impressora Padrão</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Ajuste as configurações padrão clicando em <guimenu>Todas as Opções do Driver Atual</guimenu>. Para mudar uma configuração, expanda a lista de opções clicando no sinal de <literal>+</literal> relacionado. Mude o padrão clicando em uma opção. Aplique suas mudanças com <guimenu>OK</guimenu>.
     </para>
    </step>
   </procedure>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-yast-hw-print-network">
  <title>Configurando a impressão pela rede com o YaST</title>
  <para>
   As impressoras de rede não são detectadas automaticamente. Elas devem ser configuradas manualmente usando o módulo de impressora do YaST. Dependendo de sua configuração de rede, você poderá imprimir em um servidor de impressão (CUPS, LPD, SMB ou IPX) ou diretamente em uma impressora de rede (de preferência, via TCP). Acesse a tela de configuração para impressão de rede escolhendo <guimenu>Impressão pela Rede</guimenu> no painel esquerdo do módulo de impressora do YaST.
  </para>
  <sect2 xml:id="sec-yast-hw-print-network-cups">
   <title>Usando CUPS</title>
   <para>
    Em um ambiente Linux, o CUPS é geralmente usado para imprimir pela rede. A configuração mais simples consiste em imprimir apenas por um único servidor CUPS que possa ser diretamente acessado por todos os clientes. A impressão por mais de um servidor CUPS requer um daemon local do CUPS em execução que se comunique com os servidores CUPS remotos.
   </para>
   <important>
    <title>Pesquisando filas de impressão de rede</title>
    <para>
     Os servidores CUPS anunciam suas filas de impressão pela rede usando o protocolo de pesquisa tradicional do CUPS ou o Bonjour/DNS-SD. Os clientes precisam navegar pelas listas para que os usuários possam selecionar as impressoras específicas às quais enviar seus serviços de impressão. Para navegar em filas de impressão de rede, o serviço <systemitem class="daemon">cups-browsed</systemitem> incluído no pacote <systemitem class="resource">cups-filters-cups-browsed</systemitem> deve ser executado em todos os clientes que imprimem usando servidores CUPS. O <systemitem class="daemon">cups-browsed</systemitem> é iniciado automaticamente quando a impressão de rede é configurada com o YaST.
    </para>
    <para>
     Caso a pesquisa não funcione depois de iniciar <systemitem class="daemon">cups-browsed</systemitem>, o(s) servidor(es) CUPS provavelmente anunciará(ão) as filas de impressão de rede pelo Bonjour/DNS-SD. Neste caso, é necessário instalar também o pacote <systemitem class="resource">avahi</systemitem> e iniciar o serviço associado ao <command>sudo systemctl start avahi-daemon</command> em todos os clientes.
    </para>
   </important>
   <procedure>
    <title>Imprimindo por um único servidor CUPS</title>
    <step>
     <para>
      Inicie o módulo de impressora do YaST em <menuchoice>
      <guimenu>Hardware</guimenu> <guimenu>Impressora</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      No painel esquerdo, inicie a tela <guimenu>Imprimir pela Rede</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Marque <guimenu>Do All Your Printing Directly via One Single CUPS Server</guimenu> (Realizar Toda a Impressão Diretamente via um Único Servidor CUPS) e especifique o nome ou endereço IP do servidor.
     </para>
    </step>
    <step>
     <para>
      Clique em <guimenu>Testar Servidor</guimenu> para verificar se você escolheu o nome ou endereço IP correto.
     </para>
    </step>
    <step>
     <para>
      Clique em <guimenu>OK</guimenu> para retornar à tela <guimenu>Configurações da Impressora</guimenu>. Todas as impressoras disponíveis pelo servidor CUPS são listadas.
     </para>
    </step>
   </procedure>
   <procedure>
    <title>Imprimindo por vários servidores CUPS</title>
    <step>
     <para>
      Inicie o módulo de impressora do YaST em <menuchoice>
      <guimenu>Hardware</guimenu> <guimenu>Impressora</guimenu> </menuchoice>.
     </para>
    </step>
    <step>
     <para>
      No painel esquerdo, inicie a tela <guimenu>Imprimir pela Rede</guimenu>.
     </para>
    </step>
    <step>
     <para>
      Marque <guimenu>Accept Printer Announcements from CUPS Servers</guimenu> (Aceitar Anúncios de Impressora de Servidores CUPS).
     </para>
    </step>
    <step>
     <para>
      Em <literal>Configurações Gerais</literal>, especifique quais servidores serão usados. É possível aceitar conexões de todas as redes disponíveis ou de hosts específicos. Se você escolher a última opção, deverá especificar os nomes de host ou endereços IP.
     </para>
    </step>
    <step>
     <para>
      Clique em <guimenu>OK</guimenu> para confirmar e depois em <guimenu>Sim</guimenu> quando for solicitado a iniciar um servidor CUPS local. Após a inicialização do servidor, o YaST retornará para a tela <guimenu>Configurações da Impressora. </guimenu> Clique em <guimenu>Lista de Atualização</guimenu> para ver as impressoras detectadas até o momento. Clique nesse botão mais uma vez, caso haja mais impressoras disponíveis.
     </para>
    </step>
   </procedure>
  </sect2>
  <sect2 xml:id="sec-yast-hw-print-network-other">
   <title>Usando servidores de impressão diferentes do CUPS</title>
   <para>
    Se a sua rede oferecer serviços de impressão por servidores de impressão diferentes do CUPS, inicie o módulo de impressora do YaST clicando em <menuchoice>
    <guimenu>Hardware</guimenu><guimenu>Impressora</guimenu></menuchoice> e inicie a tela <guimenu>Imprimir pela Rede</guimenu> pelo painel esquerdo. Inicie o <guimenu>Assistente de Conexão</guimenu> e escolha o <guimenu>Tipo de Conexão</guimenu>. Solicite mais informações ao administrador da rede sobre como configurar uma impressora de rede em seu ambiente.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec-yast-hw-print-share">
  <title>Compartilhando impressoras pela rede</title>
  <para>
   As impressoras gerenciadas por um daemon CUPS local podem ser compartilhadas pela rede, portanto, transforme sua máquina em um servidor CUPS. Normalmente, você compartilha uma impressora habilitando o chamado <quote>modo de navegação</quote> no CUPS. Se a pesquisa estiver habilitada, as filas de impressão locais serão disponibilizadas na rede para escutar os daemons remotos do CUPS. Também é possível configurar um servidor CUPS dedicado que gerencie todas as filas de impressão e possa ser acessado diretamente pelos clientes remotos. Nesse caso, não é necessário habilitar a navegação.
  </para>
  <procedure>
   <title>Compartilhando impressoras</title>
   <step>
    <para>
     Inicie o módulo de impressora do YaST em <menuchoice>
     <guimenu>Hardware</guimenu> <guimenu>Impressora</guimenu> </menuchoice>.
    </para>
   </step>
   <step>
    <para>
     Inicie a tela <guimenu>Compartilhar Impressoras</guimenu> no painel esquerdo.
    </para>
   </step>
   <step>
    <para>
     Selecione <guimenu>Permitir acesso remoto</guimenu>. Marque também <guimenu>Para computadores dentro da rede local</guimenu> e habilite o modo de pesquisa marcando <guimenu>Publicar impressoras por padrão dentro da rede local</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Clique em <guimenu>OK</guimenu> para reiniciar o servidor CUPS e retornar à tela <guimenu>Configurações da Impressora</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Para saber sobre as configurações do CUPS e de firewall, acesse o site <link xlink:href="https://en.opensuse.org/SDB:CUPS_and_SANE_Firewall_settings"/>.
    </para>
   </step>
  </procedure>
 </sect1>
</chapter>
