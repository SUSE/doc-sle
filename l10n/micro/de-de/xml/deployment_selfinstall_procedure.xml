<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="deployment_selfinstall_procedure.xml" version="5.0" xml:id="cha-selfinstal-procedure">
 <title>Bereitstellen von selbstinstallierenden Images</title>
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker/>
   <dm:translation>yes</dm:translation>
  </dm:docmanager>
  <abstract>
   <para>
    In diesem Kapitel wird die Bereitstellung von SLE Micro über selbstinstallierende, vordefinierte ISO-Images beschrieben.
   </para>
  </abstract>
 </info>
 <para>
  <phrase role="productname"><phrase os="slemicro">SUSE Linux Enterprise Micro</phrase></phrase> bietet selbstinstallierende ISO-Images, mit denen Sie SLE Micro auf Ihrem Computer (entweder eine virtuelle Maschine oder ein Bare-Metal-System) bereitstellen und das System beim ersten Starten konfigurieren können.
 </para>
 <para>
  Zum Vorbereiten der Einrichtung benötigen Sie Folgendes:
 </para>
 <itemizedlist>
  <listitem>
   <para>
    einen Datenträger (physisch oder virtuell), auf dem SLE Micro ausgeführt wird
   </para>
  </listitem>
  <listitem>
   <para>
    ein bootfähiges Gerät mit der selbstinstallierenden ISO (z. B. ein USB-Datenträger)
   </para>
  </listitem>
  <listitem>
   <para>
    (optional) ein Gerät, das als Konfigurationsmedium fungiert. Zum Vorbereiten des Konfigurationsgeräts führen Sie die Schritte in <xref linkend="pro-selfinstall-configuration-device"/> aus.
   </para>
  </listitem>
 </itemizedlist>
 <para>
  Wenn Sie das Konfigurationsgerät während der Installation nicht anschließen, wird <emphasis>jeos-firstboot</emphasis> beim ersten Booten gestartet. Mit diesem Tool können Sie eine Minimalkonfiguration von SLE Micro durchführen. Die Vorgehensweise finden Sie unter <xref linkend="sec-jeos-firstboot-selfinstall"/>. Für eine komplexere Konfiguration benötigen Sie das Konfigurationsmedium.
 </para>
 <para>
  Zur Installation von SLE Micro fahren Sie entsprechend den Anweisungen in <xref linkend="proc-selfinstall-installation"/> fort.
 </para>
 <important>
  <title>Das Konfigurationsgerät muss beim ersten Starten angeschlossen sein.</title>
  <para>
   Denken Sie daran, dass das Konfigurationsgerät, falls verwendet, während des gesamten Konfigurationsprozesses beim ersten Starten angeschlossen sein muss. Es wird empfohlen, das Gerät vor Beginn des Installationsprozesses anzuschließen. Falls Ihre Firmware nicht zwei oder mehr angeschlossene USB-Datenträger beim Starten unterstützt, können Sie das USB-Gerät vor Beginn des Konfigurationsprozesses austauschen.
  </para>
 </important>
 <note>
    <title>Bei der Installation mit dem selbstinstallierenden ISO-Image wird kein Boot-EFI-Eintrag erstellt.</title>
    <para>
     Bei der Bereitstellung des selbstinstallierenden ISO wird das Image des Systems einfach auf die ausgewählte Festplatte kopiert. Daher wird kein EFI-Boot-Eintrag erstellt (wie es normalerweise bei der Bereitstellung des Systems über ein Installationsprogramm der Fall wäre). Möglicherweise müssen Sie Ihr System manuell über die EFI-Shell booten, indem Sie den SLE Micro-Bootloader auswählen. Nach dem ersten Starten können Sie <command>efibootmgr</command> verwenden, um den Booteintrag zu erstellen. <command>efibootmgr</command> ist in dem bereitgestellten Image standardmäßig verfügbar.
    </para>
   </note>
 <procedure xml:id="proc-selfinstall-installation">
  <title>Installation von SLE Micro</title>
  <step>
   <para>
    Bereiten Sie bei Bedarf das Konfigurationsgerät wie in <xref linkend="pro-selfinstall-configuration-device"/> beschrieben vor.
   </para>
  </step>
  <step>
   <para>
    Starten Sie den Computer mit der angeschlossenen selbstinstallierenden ISO.
   </para>
  </step>
  <step>
   <para>
    Starten Sie den Installationsprozess mit <guimenu>SLE Micro installieren</guimenu>.
   </para>
  </step>
  <step>
   <para>
    Wählen Sie den Datenträger aus, auf dem SLE Micro installiert werden soll, und bestätigen Sie, dass Sie die Daten auf dem Datenträger löschen möchten. Daraufhin wird ein SLE Micro-Image auf den Datenträger kopiert.
   </para>
  </step>
  <step>
   <para>
    Ihr System wird mit <command>kexec</command> neu gestartet und dann für den Konfigurationsprozess vorbereitet.
   </para>
  </step>
  <step>
   <para>
    Starten Sie den Konfigurationsprozess, indem Sie <guimenu>SLE Micro</guimenu> auswählen. SLE Micro wird entweder gemäß den Anweisungen auf dem Konfigurationsgerät konfiguriert oder <emphasis>jeos-firstboot</emphasis> wird gestartet.
   </para>
  </step>
  <step>
   <para>
    (Optional) Konfigurieren Sie Ihr System mit <emphasis>jeos-firstboot</emphasis> wie in <xref linkend="sec-jeos-firstboot-selfinstall"/> beschrieben.
   </para>
  </step>
   <step>
   <para>
    Nach dem ersten Starten können Sie Ihre SLE Micro-Instanz mit dem Kommando <command>transactional-update</command> registrieren. Detaillierte Informationen finden Sie in <xref linkend="sec-images-registration"/>.
   </para>
   <para>
    Für SLE Micro sind Erweiterungen verfügbar. Wenn Sie eine dieser Erweiterungen verwenden möchten, nehmen Sie sie vom installierten System aus in Ihr Abonnement auf. Detaillierte Informationen finden Sie in <xref linkend="sec-adding-extension"/>.
   </para>
  </step>
 </procedure>
 <section xml:id="sec-selfinstall-conf-device">
  <title>Vorbereiten des Konfigurationsgeräts</title>
  <para>
   Mit dem folgenden Verfahren bereiten Sie das Konfigurationsgerät vor:
  </para>
  <procedure xml:id="pro-selfinstall-configuration-device">
  <title>Vorbereiten des Konfigurationsgeräts</title>
  <step>
   <para>
    Formatieren Sie den Datenträger mit einem Dateisystem, das von SLE Micro unterstützt wird: Ext3, Ext4 usw:
   </para>
<screen>
<prompt>&gt; </prompt>sudo mkfs.ext4 /dev/sd<replaceable>Y</replaceable>
</screen>
  </step>
  <step>
   <para>
    Legen Sie als Gerätekennung entweder <literal>ignition</literal> (wenn entweder Ignition oder Combustion verwendet wird) oder <literal>combustion</literal> fest (wenn nur Combustion verwendet wird). Ext4-Dateisystem:
   </para>
<screen><prompt>&gt; </prompt>sudo e2label /dev/sd<replaceable>Y</replaceable> ignition</screen>
   <para>
    Sie können ein beliebiges Konfigurationsspeichermedium verwenden, das von Ihrem Virtualisierungssystem oder Ihrer Hardware unterstützt wird: ISO-Image, USB-Speicherstick usw.
   </para>
  </step>
  <step>
   <para>
    Hängen Sie das Gerät ein:
   </para>
<screen>
<prompt>&gt; </prompt>sudo mount /dev/sdY /mnt
</screen>
  </step>
  <step>
   <para>
    Erstellen Sie die Verzeichnisstruktur gemäß <xref linkend="cha-images-ignition"/> oder <xref linkend="cha-images-combustion"/>, je nach dem verwendeten Konfigurationstool:
   </para>
<screen>
<prompt>&gt; </prompt>sudo mkdir -p /mnt/ignition/
</screen>
   <para>
    oder:
   </para>
<screen>
<prompt>&gt; </prompt>sudo mkdir -p /mnt/combustion/
</screen>
  </step>
  <step>
   <para>
    Bereiten Sie vor dem ersten Starten alle Elemente der Konfiguration vor, die von <xref linkend="cha-images-ignition" xrefstyle="template:Ignition"/> oder <xref linkend="cha-images-combustion" xrefstyle="template:Combustion"/> verwendet werden. Zum Anmelden bei Ihrem System müssen Sie ein Passwort für <systemitem class="username">root</systemitem> angeben oder die passwortlose Authentifizierung einrichten. Ansonsten ist nach dem ersten Starten kein Zugriff auf das System möglich.
   </para>
  </step>
</procedure>
 </section>
 <section xml:id="sec-jeos-firstboot-selfinstall">
  <title>Minimale Erstkonfiguration</title>
  <para>
   Wenn Sie kein Konfigurationsmedium anhängen, wird <emphasis>jeos-firstboot</emphasis> gestartet und Sie können eine minimale Konfiguration Ihres Systems wie folgt vornehmen:
  </para>
  <procedure>
   <title>Konfigurieren des Systems mit <emphasis>jeos-firstboot</emphasis></title>
   <step>
    <para>
     Bestätigen Sie die Konfiguration.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_start.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_start.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>jeos first boot</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Wählen Sie ein Tastaturlayout und bestätigen Sie die Auswahl.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_keyboard.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_keyboard.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>jeos keyboard selection</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Lesen Sie die Lizenzvereinbarung und akzeptieren Sie sie.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_eula.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_eula.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>jeos EULA</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Wählen Sie eine Zeitzone.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_timezone.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_timezone.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>jeos time zone selection</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Geben Sie ein Passwort für <systemitem class="username">root</systemitem> ein.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_password.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_password.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>root password</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Bestätigen Sie das <systemitem class="username">root</systemitem>-Passwort.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_password_confirm.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_password_confirm.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>root password confirmation</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
   <step>
    <para>
     Akzeptieren Sie die Anweisung zur Registrierung von SLE Micro.
    </para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="slemicro_jeos_statement.png" width="100%"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="slemicro_jeos_statement.png" width="100%"/>
      </imageobject>
      <textobject role="description"><phrase>root password</phrase>
      </textobject>
     </mediaobject>
    </informalfigure>
   </step>
  </procedure>
 </section>
</chapter>
